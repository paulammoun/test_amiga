<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="theme-color" content="#ee6060"/>

<link rel="apple-touch-icon" href="./icons/icon-192.png">
<link rel="icon" type="image/png" sizes="32x32" href="./icons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="./icons/favicon-16x16.png">

<link rel="manifest" href="manifest.json">



<style type="text/css">
html { -webkit-tap-highlight-color: rgba(0,0,0,0); -webkit-user-select: none; -ms-touch-action: none;}
iframe {-webkit-user-select: text;}
.A5container {float:left;padding:0px;}
.A5CWLayout {padding: 4px; float: left; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;}
.A5GridHideErrorCol .A5GridErrorCol {display:none; }
.A5GridRowErrorIcon {display:none;}
.A5GridHasRowError .A5GridRowErrorIcon {display:inline-block;}
.A5GridRowViewMode {display:block;}
.A5GridRowEditMode {display:none;}
.A5GridRowInEditMode .A5GridRowViewMode {display:none;}
.A5GridRowInEditMode .A5GridRowEditMode {display:block;}
.A5GridRowDirty {display:none;}
.A5GridRowClean {display:inline;}
.A5GridRowIsDirty .A5GridRowDirty {display:inline;}
.A5GridRowIsDirty .A5GridRowClean {display:none;}
.errorText {color:red;font-size:8pt;}
.errorTextHighlight {font-weight:bold;font-size:8pt;}
.errorTip {color:red;background:#fffafa url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAALklEQVR42mP8//8/AwMDw4cPDAwMDAICcDYTVlEGAQEmrKIwHRiiDB8+MNLBDgDHLSXJCJBQaQAAAABJRU5ErkJggg==');border:1px solid #f88;margin-top:2px;padding:2px;font-size:8pt;}
.errorInput {color:red;border:1px solid red;margin:1px;}
.errorInputHighlight {color:red;border:2px solid red;margin:0px;}
.A5SelectedButton {opacity:.5;filter:alpha(opacity=50);}
.A5InvisibleLock {background: rgba(0,0,0,0); }
.A5floatClear { clear: both; font-size: 0px; width: 0px; height: 0px; overflow: hidden; padding: 0px; margin: 0px; border:none; visibility:hidden; }
.A5ListGroupHeaders {z-index:5;	position:relative;}



.A5ContainerAlignCenter {padding: 4px; margin-left:auto;margin-right:auto;text-align: center; box-sizing: border-box;}
.A5ContainerAlignLeft {padding: 4px; margin-right:auto;text-align: left; box-sizing: border-box;} 
.A5ContainerAlignRight {padding: 4px; margin-left:auto;text-align: right; box-sizing: border-box;}

.A5ContainerAlignCenter > .A5CWLayout, .A5ContainerAlignLeft > .A5CWLayout, .A5ContainerAlignRight > .A5CWLayout, .A5ContainerAlignCenter > .A5container, .A5ContainerAlignLeft > .A5container, .A5ContainerAlignRight > .A5container  {display: inline-block; float: none;}
.A5Disabled {opacity: .5}


.A5FloatingLabelCont {	position: relative;	margin-top: 20px;}
.A5FloatingLabelInsideCont {	position: relative;	}
.A5FloatingLabelInsideCont input, .A5FloatingLabelInsideCont select, .A5FloatingLabelInsideCont textarea {	padding-top: 20px !important;}

.A5FloatingLabel, .A5FloatingLabelInside {pointer-events:none;	position: absolute;	opacity: .5;	top: 50%;	left: 10px;;	right: 10px;; transform: translate(0px,-51%);	transition: transform 300ms, top 300ms, font-size 300ms;}
.A5FloatingLabelFloat .A5FloatingLabel {	font-size: 10px;	top: 0px;	opacity: 1;	transform: translate(0px,-100%);}
.A5FloatingLabelFloat .A5FloatingLabelInside {	font-size: 10px;	top: 0px;	opacity: 1;	transform: translate(0px,6px);}

.A5PanelResize { background-color:rgba(0,0,0,.15); }




.A5AccordionTitleOn, .A5AccordionTitleOff, .A5AccordionTitleDisabled {display: block;border: 1px solid #999;padding: 2px;text-decoration: none;cursor: pointer;margin-bottom: 2px; padding: 2px}
.A5AccordionPane {border: 1px solid #999;border-top: none;margin-bottom: 2px;margin-top: -2px;}
.A5TabTopOn, .A5TabTopOff, .A5TabTopDisabled {display: block;float: left;border: 1px solid #999;border-bottom: none;margin-right: 2px;padding: 2px;text-decoration: none;cursor: pointer;}
.A5TabTopOn {margin-bottom: -1px;padding-bottom: 3px;}
.A5TabBottomOn, .A5TabBottomOff, .A5TabBottomDisabled {display: block;float: left;border: 1px solid #999;margin-right: 2px;padding: 2px;text-decoration: none;cursor: pointer;}
.A5TabBottomOn {border-top: none;padding-top: 3px;}
.A5TabLeftOn, .A5TabLeftOff, .A5TabLeftDisabled {display: block;border: 1px solid #999;margin-bottom: 2px;padding: 2px;text-decoration: none;cursor: pointer;}
.A5TabLeftOn {margin-right: -1px;padding-right: 3px;border-right: none;}
.A5TabRightOn, .A5TabRightOff, .A5TabRightDisabled {display: block;border: 1px solid #999;border-left: none;margin-bottom: 2px;padding: 2px;text-decoration: none;cursor: pointer;}
.A5TabRightOn {margin-left: -1px;padding-left: 3px;}
.A5TabTopPane, .A5TabBottomPane, .A5TabLeftPane, .A5TabRightPane {border: 1px solid #999; padding: 2px;}


.A5TabBand {border: 1px solid #999; padding: 0px;}
.A5TabBandTabOn, .A5TabBandTabOff, .A5TabBandTabDisabled {position: relative;display: block;border: 1px solid #999;border-bottom: none;margin-right: 2px;margin-top: 2px;padding: 2px;text-decoration: none;cursor: pointer;white-space: nowrap;}
.A5TabBandTabOn {margin-bottom: -1px;padding-bottom: 3px;}
.A5TabBandSeparator {border: none;border-top: 1px solid #999;height: 3px;padding: 0px;font: 0pt arial;}
.A5TabBandLeftScroll {position: relative;display: block;padding: 2px;margin-bottom: -1px;padding-bottom: 3px;text-decoration: none;border: 1px solid #999;border-left: none;border-bottom: none;}
.A5TabBandRightScroll {position: relative;display: block;padding: 2px;margin-bottom: -1px;padding-bottom: 3px;text-decoration: none;border: 1px solid #999;border-right: none;border-bottom: none;}
.A5TabBandTabDisabled, .A5TabTopDisabled, .A5TabLeftDisabled, .A5TabRightDisabled, .A5TabBottomDisabled, .A5AccordionTitleDisabled {opacity: .5; filter: alpha(opacity: 50)}
.A5Window {-moz-border-radius: 3px; -webkit-border-radius: 3px;}
.A5WindowLock{border: 1px solid #000;background: #222;opacity: .25;filter: alpha(opacity: 25);}

.A5AccordionTitleOn:hover, .A5AccordionTitleOff:hover, .A5TabBandTabOff:hover, .A5TabTopOff:hover, .A5TabLeftOff:hover, .A5TabRightOff:hover, .A5TabBottomOff:hover{text-decoration: underline;}

.A5MenuItem {text-decoration:none;}
.A5DialogRSSeparator {border-top: 1px dotted #ccc; line-height:5px; margin-top: 5px;}
.A5DialogRSFooter {margin-top: 10px;}

.A5AnimRotate90, .A5AnimRotate90CCW, .A5AnimRotate180, .A5AnimRotate180CCW {display: inline-block;transition: transform 300ms;}
.A5AnimRotate90[a5-checked=on] {transform: rotate(90deg);}
.A5AnimRotate90CCW[a5-checked=on] {transform: rotate(-90deg);}
.A5AnimRotate180[a5-checked=on] {transform: rotate(180deg);}
.A5AnimRotate180CCW[a5-checked=on] {transform: rotate(-180deg);}
.A5AnimSwap.A5AnimRotate90 > *:last-child {transform: rotate(-90deg);}
.A5AnimSwap.A5AnimRotate90CCW > *:last-child {transform: rotate(90deg);}
.A5AnimSwap.A5AnimRotate180 > *:last-child {transform: rotate(-180deg);}
.A5AnimSwap.A5AnimRotate180CCW > *:last-child {transform: rotate(180deg);}
.A5AnimSwap {position: relative;display: inline-block;transition: transform 300ms;}
.A5AnimSwap > * {transition: opacity 300ms;}
.A5AnimSwap > *:last-child {position: absolute;top: 0px;left: 0px;opacity: 0;}
.A5AnimSwap[a5-checked=on] > *:first-child {opacity: 0;}
.A5AnimSwap[a5-checked=on] > *:last-child {opacity: 1;}




</style>

<link palette="" rel="stylesheet" type="text/css" href="css/Alpha-Magenta/style.css ">
<link rel="stylesheet" type="text/css" href="css/_sharedStyles/style.css">

<style type="text/css">
.iconSizeable {
  vertical-align: middle;
  height: auto;
  width: auto;
  fill: #000;
  stroke: #000; }
.iconDisabled {
  opacity: .75; }
.icon {
  vertical-align: middle;
  width: 26px;
  height: 26px; }
.KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.noHoverEffect:hover,
.noHoverEffect:focus,
.noHoverEffect:active {
  background: inherit !important;
  color: inherit !important;
  border: none !important;
  box-shadow: none !important;
  outline: none !important; }
.pcs.listItem {
  all: unset !important;
  background: none !important;
  color: inherit !important;
  border: none !important;
  box-shadow: none !important;
  text-decoration: none !important;
  padding: 0 !important;
  margin: 0 !important; }
.KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.field-box {
  border: 1px solid #ccc;
  /* Optional: adds a light gray border */
  width: 80px;
  height: 30px;
  box-sizing: border-box;
  /* Ensures padding/border stay within the 80x30 */ }
.qty-bonus-display {
  display: inline-block;
  width: 80px;
  height: 30px;
  line-height: 30px;
  text-align: center;
  border: 1px solid #ccc;
  font-size: 14px;
  background-color: #f9f9f9;
  box-sizing: border-box; }
.qty-bonus-display {
  all: unset !important;
  display: inline-block !important;
  width: 70px !important;
  height: 30px !important;
  line-height: 30px !important;
  text-align: center !important;
  vertical-align: center !important;
  border: 1px solid #ccc !important;
  font-size: 14px !important;
  background-color: #f9f9f9 !important;
  box-sizing: border-box !important;
  padding-top: 0pc; }
.list-item {
  width: 100%;
  max-width: 100%;
  border-bottom: 2px solid red;
  padding: 10px;
  font-size: 14px;
  box-sizing: border-box; }
.product-header {
  display: flex;
  max-width: 100%;
  justify-content: space-between;
  margin-bottom: 10px;
  font-weight: bold; }
.product-code {
  width: 30%;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap; }
.description {
  max-width: 100%;
  width: 70%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap; }
.product-breakdown {
  max-width: 100%;
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px; }
.section {
  flex-direction: column;
  gap: 5px;
  max-width: 100%;
  width: 20%;
  text-align: right; }
.section.center {
  text-align: left;
  max-width: 100%;
  width: 25%; }
.section.right {
  text-align: left;
  max-width: 100%;
  width: 30%; }
.section.save {
  text-align: left;
  max-width: 100%;
  width: 25%; }
.title {
  font-size: 12px;
  font-weight: bold;
  color: #000;
  max-width: 100%; }
.value {
  font-size: 14px; }
.label {
  padding-top: 10px;
  max-width: 100%; }
.product-footer {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
  max-width: 100%; }
.footer-item {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
  max-width: 100%; }
.qty-bonus-display {
  all: unset !important;
  display: inline-block !important;
  width: 70px !important;
  height: 30px !important;
  line-height: 30px !important;
  text-align: center !important;
  vertical-align: center !important;
  border: 1px solid #ccc !important;
  font-size: 14px !important;
  background-color: #f9f9f9 !important;
  box-sizing: border-box !important;
  padding-top: 0pc; }
.list-item {
  width: 100%;
  max-width: 100%;
  border-bottom: 2px solid red;
  padding: 10px;
  font-size: 14px;
  box-sizing: border-box; }
.product-header {
  display: flex;
  max-width: 100%;
  justify-content: space-between;
  margin-bottom: 10px;
  font-weight: bold; }
.product-code {
  width: 30%;
  max-width: 100%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap; }
.description {
  max-width: 100%;
  width: 70%;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap; }
.product-breakdown {
  max-width: 100%;
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px; }
.section {
  flex-direction: column;
  max-width: 100%;
  width: 20%;
  text-align: right; }
.section.center {
  text-align: left;
  max-width: 100%;
  width: 25%; }
.section.right {
  text-align: left;
  max-width: 100%;
  width: 30%; }
.section.save {
  text-align: left;
  max-width: 100%;
  width: 25%; }
.title {
  font-size: 12px;
  font-weight: bold;
  color: #000;
  max-width: 100%; }
.value {
  font-size: 14px; }
.label {
  padding-top: 10px;
  max-width: 100%; }
.product-footer {
  display: flex;
  justify-content: space-between;
  font-weight: bold;
  max-width: 100%; }
.footer-item {
  display: block;
  justify-content: space-between;
  font-weight: bold;
  max-width: 100%; }
.qty-bonus-display {
  /* all: unset !important;  
  display: inline-block !important;
  width: 80px !important;
  height: 35px !important;
  line-height: 30px !important;
  text-align: center !important;*/
  /* vertical-align: center is invalid */
  vertical-align: middle !important;
  /*  border: 1px solid #ccc !important;
  font-size: 14px !important;
  background-color: #f9f9f9 !important;
  box-sizing: border-box !important;
*/
  /* Units typo: 0pc is valid but probably meant to be 0px */
  padding-top: 0px; }
.list-item {
  width: 100%;
  border-bottom: 2px solid red;
  padding: 10px;
  font-size: 14px;
  box-sizing: border-box; }
/* Rows are now cells inside a table row */
.section {
  display: table-cell;
  vertical-align: top;
  padding: 0 5px; }
.section.right {
  display: table-cell;
  vertical-align: top;
  padding: 0 5px;
  text-align: left;
  width: 40%; }
.section.save {
  text-align: left;
  width: 15%; }
.title {
  font-size: 12px;
  font-weight: bold;
  color: #000; }
.value {
  font-size: 14px;
  margin-top: 5px; }
.label {
  font-size: 14px;
  padding-top: 10px; }
/* Footer can stay flex if you want, but here it is in table layout */
.product-footer {
  display: table;
  width: 100%;
  font-weight: bold;
  table-layout: fixed; }
.footer-item {
  display: table-cell;
  vertical-align: top;
  padding-right: 10px; }
.qty-bonus-display {
  /* all: unset !important;  
  display: inline-block !important;
  width: 80px !important;
  height: 35px !important;
  line-height: 30px !important;
  text-align: center !important;*/
  /* vertical-align: center is invalid */
  vertical-align: middle !important;
  /*  border: 1px solid #ccc !important;
  font-size: 14px !important;
  background-color: #f9f9f9 !important;
  box-sizing: border-box !important;
*/
  /* Units typo: 0pc is valid but probably meant to be 0px */
  padding-top: 0px; }
.list-item {
  width: 100%;
  border-bottom: 2px solid red;
  padding: 10px;
  font-size: 14px;
  box-sizing: border-box; }
/* Rows are now cells inside a table row */
.section {
  display: table-cell;
  vertical-align: top;
  padding: 0 5px; }
.section.right {
  display: table-cell;
  vertical-align: top;
  padding: 0 5px;
  text-align: left;
  width: 40%; }
.section.save {
  text-align: left;
  width: 15%; }
.title {
  font-size: 12px;
  font-weight: bold;
  color: #000; }
.value {
  font-size: 14px;
  margin-top: 5px; }
.label {
  font-size: 14px;
  padding-top: 10px; }
/* Footer can stay flex if you want, but here it is in table layout */
.product-footer {
  display: table;
  width: 100%;
  font-weight: bold;
  table-layout: fixed; }
.footer-item {
  display: table-cell;
  vertical-align: top;
  padding-right: 10px; }
.nopadding {
  padding: 0px;
  margin: 0px;
  padding-top: 0px;
  padding-bottom: 0px;
  margin-bottom: 0px;
  margin-top: 0px; }
.nopaddingt {
  padding: 0px;
  margin: 0px;
  padding-top: 4px; }
.spinner {
  width: 40px;
  height: 40px;
  border: 4px solid rgba(0, 0, 0, 0.1);
  border-top: 4px solid #3498db;
  border-radius: 50%;
  animation: spin 1s linear infinite; }
/* Keyframes for spinning */
@keyframes spin {
  0% {
    transform: rotate(0deg); }
  100% {
    transform: rotate(360deg); } }
.listItem {
  background: none !important;
  color: inherit !important;
  text-decoration: none !important;
  padding: 0 !important;
  margin: 0 !important; }
.DLG1_LIST2_2 .card {
  display: inline-block;
  background: #fff;
  color: #333;
  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.5);
  border-radius: 6px;
  margin: 6px;
  overflow: hidden; }
.DLG1_LIST2_2 .card-content {
  padding: 18px; }
.DLG1_LIST2_2 .card-image > img {
  width: 100%; }
.DLG1_LIST2_2 .card-buttons {
  display: flex;
  flex-direction: row;
  background: #4fc0f3; }
.DLG1_LIST2_2 .card-buttons > button {
  flex: 1 auto;
  font-size: 12pt;
  line-height: 40px;
  border: none;
  outline: none;
  background: #03a9f4;
  color: #fff; }
.DLG1_LIST2_2 .card-buttons > button:not(:last-child) {
  margin-right: 1px; }
.DLG1_LIST2_2 .card-buttons > button:hover {
  background: #00a0ea; }
.DLG1_LIST2_2 .card-image-bubble {
  position: relative;
  overflow: visible;
  padding-top: 80px;
  margin-top: 80px; }
.DLG1_LIST2_2 .card-image-bubble .card-image {
  position: absolute;
  width: 160px;
  height: 160px;
  top: -80px;
  left: 50%;
  margin-left: -80px;
  border: 8px solid #7a31cc;
  padding: 4px;
  border-radius: 100%;
  overflow: hidden;
  box-sizing: border-box; }
.DLG1_LIST2_2 .card-image-bubble .card-image:after {
  content: "";
  position: absolute;
  top: 0px;
  left: 0px;
  right: 0px;
  bottom: 0px;
  border: 4px solid #fff;
  border-radius: 100%; }
.DLG1_LIST2_2 .card-image-bubble .card-content {
  text-align: center; }
.DLG1_LSTROUTES_2 .KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.DLG1_LSTROUTES_2 .KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.DLG1_LSTOFFROUTE_2 .KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.DLG1_LSTOFFROUTE_2 .KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.DLG1_LSTVISITHEAD_2 .KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.DLG1_LSTVISITHEAD_2 .KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.DLG1_LSTDISCUSSED_2 .KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.DLG1_LSTDISCUSSED_2 .KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.DLG1_LSTSAMPLES_2 .KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.DLG1_LSTSAMPLES_2 .KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.DLG1_LSTORDERS_2 .KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.DLG1_LSTORDERS_2 .KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.DLG1_LSTINVOICES_2 .KanbanColumns {
  display: flex;
  flex-direction: row;
  flex-wrap: wrap;
  align-items: flex-start; }
.DLG1_LSTINVOICES_2 .KanbanColumns .KanbanColumn {
  background: #f0f0f0;
  border: 1px solid #eee;
  margin: 10px;
  flex: 1 auto; }
.DLG1_LSTITEMS_2 {
  /* Rows are now cells inside a table row */
  /* Footer can stay flex if you want, but here it is in table layout */ }
.DLG1_LSTITEMS_2 .qty-bonus-display {
  /* all: unset !important;  
  display: inline-block !important;
  width: 80px !important;
  height: 35px !important;
  line-height: 30px !important;
  text-align: center !important;*/
  /* vertical-align: center is invalid */
  vertical-align: middle !important;
  /*  border: 1px solid #ccc !important;
  font-size: 14px !important;
  background-color: #f9f9f9 !important;
  box-sizing: border-box !important;
*/
  /* Units typo: 0pc is valid but probably meant to be 0px */
  padding-top: 0px; }
.DLG1_LSTITEMS_2 .list-item {
  width: 100%;
  border-bottom: 2px solid red;
  padding: 10px;
  font-size: 14px;
  box-sizing: border-box; }
.DLG1_LSTITEMS_2 .section {
  display: table-cell;
  vertical-align: top;
  padding: 0 5px; }
.DLG1_LSTITEMS_2 .section.right {
  display: table-cell;
  vertical-align: top;
  padding: 0 5px;
  text-align: left;
  width: 40%; }
.DLG1_LSTITEMS_2 .section.save {
  text-align: left;
  width: 15%; }
.DLG1_LSTITEMS_2 .title {
  font-size: 12px;
  font-weight: bold;
  color: #000; }
.DLG1_LSTITEMS_2 .value {
  font-size: 14px;
  margin-top: 5px; }
.DLG1_LSTITEMS_2 .label {
  font-size: 14px;
  padding-top: 10px; }
.DLG1_LSTITEMS_2 .product-footer {
  display: table;
  width: 100%;
  font-weight: bold;
  table-layout: fixed; }
.DLG1_LSTITEMS_2 .footer-item {
  display: table-cell;
  vertical-align: top;
  padding-right: 10px; }
._DLG1_LSTVISITHEAD_dirtyRow {
  position: relative; }
._DLG1_LSTVISITHEAD_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTVISITHEAD_newRow {
  position: relative; }
._DLG1_LSTVISITHEAD_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTVISITHEAD_hasError {
  position: relative; }
._DLG1_LSTVISITHEAD_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTVISITHEAD_deletedRow {
  position: relative; }
._DLG1_LSTVISITHEAD_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTVISITHEAD_dirtyRowInherited {
  position: relative; }
._DLG1_LSTVISITHEAD_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTVISITHEAD_deletedRowInherited {
  position: relative; }
._DLG1_LSTVISITHEAD_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTVISITHEAD_newRowInherited {
  position: relative; }
._DLG1_LSTVISITHEAD_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTVISITHEAD_hasErrorInherited {
  position: relative; }
._DLG1_LSTVISITHEAD_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTDISCUSSED_dirtyRow {
  position: relative; }
._DLG1_LSTDISCUSSED_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTDISCUSSED_newRow {
  position: relative; }
._DLG1_LSTDISCUSSED_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTDISCUSSED_hasError {
  position: relative; }
._DLG1_LSTDISCUSSED_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTDISCUSSED_deletedRow {
  position: relative; }
._DLG1_LSTDISCUSSED_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTDISCUSSED_dirtyRowInherited {
  position: relative; }
._DLG1_LSTDISCUSSED_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTDISCUSSED_deletedRowInherited {
  position: relative; }
._DLG1_LSTDISCUSSED_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTDISCUSSED_newRowInherited {
  position: relative; }
._DLG1_LSTDISCUSSED_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTDISCUSSED_hasErrorInherited {
  position: relative; }
._DLG1_LSTDISCUSSED_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTSAMPLES_dirtyRow {
  position: relative; }
._DLG1_LSTSAMPLES_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTSAMPLES_newRow {
  position: relative; }
._DLG1_LSTSAMPLES_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTSAMPLES_hasError {
  position: relative; }
._DLG1_LSTSAMPLES_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTSAMPLES_deletedRow {
  position: relative; }
._DLG1_LSTSAMPLES_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTSAMPLES_dirtyRowInherited {
  position: relative; }
._DLG1_LSTSAMPLES_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTSAMPLES_deletedRowInherited {
  position: relative; }
._DLG1_LSTSAMPLES_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTSAMPLES_newRowInherited {
  position: relative; }
._DLG1_LSTSAMPLES_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTSAMPLES_hasErrorInherited {
  position: relative; }
._DLG1_LSTSAMPLES_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTORDERS_dirtyRow {
  position: relative; }
._DLG1_LSTORDERS_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTORDERS_newRow {
  position: relative; }
._DLG1_LSTORDERS_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTORDERS_hasError {
  position: relative; }
._DLG1_LSTORDERS_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTORDERS_deletedRow {
  position: relative; }
._DLG1_LSTORDERS_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTORDERS_dirtyRowInherited {
  position: relative; }
._DLG1_LSTORDERS_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTORDERS_deletedRowInherited {
  position: relative; }
._DLG1_LSTORDERS_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTORDERS_newRowInherited {
  position: relative; }
._DLG1_LSTORDERS_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTORDERS_hasErrorInherited {
  position: relative; }
._DLG1_LSTORDERS_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTINVOICES_dirtyRow {
  position: relative; }
._DLG1_LSTINVOICES_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTINVOICES_newRow {
  position: relative; }
._DLG1_LSTINVOICES_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTINVOICES_hasError {
  position: relative; }
._DLG1_LSTINVOICES_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTINVOICES_deletedRow {
  position: relative; }
._DLG1_LSTINVOICES_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTINVOICES_dirtyRowInherited {
  position: relative; }
._DLG1_LSTINVOICES_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTINVOICES_deletedRowInherited {
  position: relative; }
._DLG1_LSTINVOICES_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTINVOICES_newRowInherited {
  position: relative; }
._DLG1_LSTINVOICES_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTINVOICES_hasErrorInherited {
  position: relative; }
._DLG1_LSTINVOICES_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTRECEIPT_dirtyRow {
  position: relative; }
._DLG1_LSTRECEIPT_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTRECEIPT_newRow {
  position: relative; }
._DLG1_LSTRECEIPT_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTRECEIPT_hasError {
  position: relative; }
._DLG1_LSTRECEIPT_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTRECEIPT_deletedRow {
  position: relative; }
._DLG1_LSTRECEIPT_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTRECEIPT_dirtyRowInherited {
  position: relative; }
._DLG1_LSTRECEIPT_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTRECEIPT_deletedRowInherited {
  position: relative; }
._DLG1_LSTRECEIPT_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTRECEIPT_newRowInherited {
  position: relative; }
._DLG1_LSTRECEIPT_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTRECEIPT_hasErrorInherited {
  position: relative; }
._DLG1_LSTRECEIPT_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTVISITNOTES_dirtyRow {
  position: relative; }
._DLG1_LSTVISITNOTES_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTVISITNOTES_newRow {
  position: relative; }
._DLG1_LSTVISITNOTES_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTVISITNOTES_hasError {
  position: relative; }
._DLG1_LSTVISITNOTES_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTVISITNOTES_deletedRow {
  position: relative; }
._DLG1_LSTVISITNOTES_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTVISITNOTES_dirtyRowInherited {
  position: relative; }
._DLG1_LSTVISITNOTES_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTVISITNOTES_deletedRowInherited {
  position: relative; }
._DLG1_LSTVISITNOTES_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTVISITNOTES_newRowInherited {
  position: relative; }
._DLG1_LSTVISITNOTES_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTVISITNOTES_hasErrorInherited {
  position: relative; }
._DLG1_LSTVISITNOTES_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTITEMS_dirtyRow {
  position: relative; }
._DLG1_LSTITEMS_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTITEMS_newRow {
  position: relative; }
._DLG1_LSTITEMS_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTITEMS_hasError {
  position: relative; }
._DLG1_LSTITEMS_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTITEMS_deletedRow {
  position: relative; }
._DLG1_LSTITEMS_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTITEMS_dirtyRowInherited {
  position: relative; }
._DLG1_LSTITEMS_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTITEMS_deletedRowInherited {
  position: relative; }
._DLG1_LSTITEMS_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTITEMS_newRowInherited {
  position: relative; }
._DLG1_LSTITEMS_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTITEMS_hasErrorInherited {
  position: relative; }
._DLG1_LSTITEMS_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTVACATION_dirtyRow {
  position: relative; }
._DLG1_LSTVACATION_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTVACATION_newRow {
  position: relative; }
._DLG1_LSTVACATION_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTVACATION_hasError {
  position: relative; }
._DLG1_LSTVACATION_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTVACATION_deletedRow {
  position: relative; }
._DLG1_LSTVACATION_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTVACATION_dirtyRowInherited {
  position: relative; }
._DLG1_LSTVACATION_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTVACATION_deletedRowInherited {
  position: relative; }
._DLG1_LSTVACATION_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTVACATION_newRowInherited {
  position: relative; }
._DLG1_LSTVACATION_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTVACATION_hasErrorInherited {
  position: relative; }
._DLG1_LSTVACATION_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTPOI_dirtyRow {
  position: relative; }
._DLG1_LSTPOI_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTPOI_newRow {
  position: relative; }
._DLG1_LSTPOI_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTPOI_hasError {
  position: relative; }
._DLG1_LSTPOI_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTPOI_deletedRow {
  position: relative; }
._DLG1_LSTPOI_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTPOI_dirtyRowInherited {
  position: relative; }
._DLG1_LSTPOI_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTPOI_deletedRowInherited {
  position: relative; }
._DLG1_LSTPOI_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTPOI_newRowInherited {
  position: relative; }
._DLG1_LSTPOI_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTPOI_hasErrorInherited {
  position: relative; }
._DLG1_LSTPOI_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTDEALS_dirtyRow {
  position: relative; }
._DLG1_LSTDEALS_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTDEALS_newRow {
  position: relative; }
._DLG1_LSTDEALS_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTDEALS_hasError {
  position: relative; }
._DLG1_LSTDEALS_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTDEALS_deletedRow {
  position: relative; }
._DLG1_LSTDEALS_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTDEALS_dirtyRowInherited {
  position: relative; }
._DLG1_LSTDEALS_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTDEALS_deletedRowInherited {
  position: relative; }
._DLG1_LSTDEALS_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTDEALS_newRowInherited {
  position: relative; }
._DLG1_LSTDEALS_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTDEALS_hasErrorInherited {
  position: relative; }
._DLG1_LSTDEALS_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTGEOLOC_dirtyRow {
  position: relative; }
._DLG1_LSTGEOLOC_dirtyRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTGEOLOC_newRow {
  position: relative; }
._DLG1_LSTGEOLOC_newRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTGEOLOC_hasError {
  position: relative; }
._DLG1_LSTGEOLOC_hasError:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent; }
._DLG1_LSTGEOLOC_deletedRow {
  position: relative; }
._DLG1_LSTGEOLOC_deletedRow:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  opacity: 1;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent; }
._DLG1_LSTGEOLOC_dirtyRowInherited {
  position: relative; }
._DLG1_LSTGEOLOC_dirtyRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid orange;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTGEOLOC_deletedRowInherited {
  position: relative; }
._DLG1_LSTGEOLOC_deletedRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTGEOLOC_newRowInherited {
  position: relative; }
._DLG1_LSTGEOLOC_newRowInherited:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid blue;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
._DLG1_LSTGEOLOC_hasErrorInherited {
  position: relative; }
._DLG1_LSTGEOLOC_hasErrorInherited:after {
  content: "";
  position: absolute;
  bottom: 0px;
  right: 0px;
  border: 10px solid red;
  border-bottom-width: 0px;
  border-left-width: 0px;
  border-top-color: transparent;
  opacity: .3; }
.parentDeleted {
  position: relative; }
.parentIsDeleted .parentDeleted:before {
  content: "";
  position: absolute;
  top: 0px;
  right: 0px;
  border: 10px solid purple;
  border-top-width: 0px;
  border-left-width: 0px;
  border-bottom-color: transparent;
  opacity: .3; }
.inkSigActivePage {
  background: #fff;
  border: 1px solid #28a4ff; }
</style>
<style>
</style>


<script type="text/javascript" src="javascript/a5.js?build_93485713"></script>
<script type="text/javascript" src="javascript/a5_url.js?build_93485713"></script>
<script type="text/javascript" src="css/Alpha-Magenta/style.js"></script>
<script type="text/javascript" src="javascript/A5jQueryWithUI.js"></script>
<script>
	if(typeof jQuery != 'undefined') jQuery.noConflict();
</script>
<script>
A5.u.template.formats['pp'] = function(v) {
 if(Number(v) < 100 ) return 'High risk';
 else return 'Low risk';}
</script>
<script type="text/javascript" src="__precomputedUXComponents.js"></script>
<script type="text/javascript" src="svg/AASVG.js"></script><script>var ele2 = document.getElementById('_alphaAnywhereSVGIconsLocal_DLG1');

if(!ele2) { 
	var ele = document.createElement('div');
	ele.id = '_alphaAnywhereSVGIconsLocal_DLG1';
	ele.style.position = 'absolute';
	ele.style.top = '-10000px';
	ele.innerHTML = _svg;
	var ele3 = document.documentElement;
	ele3.appendChild(ele)
	
}
</script>
<script type="text/javascript" src="JS.js?crc_4294926888"></script>

<title></title></head>
<body class="[class.Page]  pulse">
<iframe style="display:none;" id="DLG1.__IFRAME1"></iframe>
<input type="hidden" value="" id="DLG1.PARAMETERBUCKET"/>
<input type="file" style="position:absolute; top:-1000px;visibility:hidden;" capture accept="image/*" id="DLG1._GETPHOTO"/><input type="file" style="position:absolute; top:-1000px;visibility:hidden;" name="files[]" multiple = "" id="DLG1._GETFILEMULTI"/><input type="file" style="position:absolute; top:-1000px;visibility:hidden;" name="files[]" id="DLG1._GETFILE"/><input id="DLG1.V.R1.SLIDER1" name="V.R1.SLIDER1" type="hidden"/>
<input type="hidden" id="DLG1.V.R1.LIST2" name="V.R1.LIST2" />
<input id="DLG1.V.R1.SLIDERSAVING" name="V.R1.SLIDERSAVING" type="hidden"/>
<input type="hidden" id="DLG1.V.R1.LSTROUTES" name="V.R1.LSTROUTES" />
<input type="hidden" id="DLG1.V.R1.LSTOFFROUTE" name="V.R1.LSTOFFROUTE" />
<input type="hidden" id="DLG1.V.R1.LSTVISITHEAD" name="V.R1.LSTVISITHEAD" />
<input type="hidden" id="DLG1.V.R1.LSTDISCUSSED" name="V.R1.LSTDISCUSSED" />
<input type="hidden" id="DLG1.V.R1.LSTSAMPLES" name="V.R1.LSTSAMPLES" />
<input type="hidden" id="DLG1.V.R1.LSTORDERS" name="V.R1.LSTORDERS" />
<input type="hidden" id="DLG1.V.R1.LSTINVOICES" name="V.R1.LSTINVOICES" />
<input type="hidden" id="DLG1.V.R1.LSTRECEIPT" name="V.R1.LSTRECEIPT" />
<input type="hidden" id="DLG1.V.R1.LSTUNPAIDINV" name="V.R1.LSTUNPAIDINV" />
<input type="hidden" id="DLG1.V.R1.SIGNATURECAPTURE1" name="V.R1.SIGNATURECAPTURE1" />
<input type="hidden" id="DLG1.V.R1.LSTVISITNOTES" name="V.R1.LSTVISITNOTES" />
<input type="hidden" id="DLG1.V.R1.LSTMEDIALFILES" name="V.R1.LSTMEDIALFILES" />
<input type="hidden" id="DLG1.V.R1.LSTBASKETH" name="V.R1.LSTBASKETH" />
<input type="hidden" id="DLG1.V.R1.LSTBASKETDET" name="V.R1.LSTBASKETDET" />
<input type="hidden" id="DLG1.V.R1.LSTITEMS" name="V.R1.LSTITEMS" />
<input type="hidden" id="DLG1.V.R1.LSTVACATION" name="V.R1.LSTVACATION" />
<input type="hidden" id="DLG1.V.R1.LSTGEOLOC" name="V.R1.LSTGEOLOC" />
<input type="hidden" id="DLG1.V.R1.BASKETNUM" name="V.R1.BASKETNUM" />
<div 	id="DLG1.V.R1.INJECTIBLE_3"   
			A5-containerType="injectible"
			class=""  style="display: none; "  >
<div 	id="DLG1.V.R1.CONTAINER_244"   
			A5-containerType="none"
			class="A5CWLayout "  style="width: 80%; "  >
<div class="A5CWLayout" style="width: 50%" >
	<select 	
		size="1" 
		class="edit "  
		name="V.R1.DROPGROUP" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.DROPGROUP"  
		 onChange="var tfunc = function() {onChange_dropgroup_c22c6fb5a59044a5b0314fe334d01b7c.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >

</select>

</div>
<div class="A5CWLayout" style="width: 50%" >
	<select 	
		size="1" 
		class="edit "  
		name="V.R1.DROPSUBGROUP" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.DROPSUBGROUP"  
		 onchange="var tfunc = function() {onChange_dropsubgroup_8c2b23e57920487fbcaf26f907e80eba.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >
<option value=""></option> 
</select>

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<input	type="text" id="DLG1.V.R1.TXTSEARCHDESC" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_txtsearchdesc_291381a632ed4f7cb99ab3e1de45b948.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TXTSEARCHDESC"    value=""    />

</div>
<div class="A5CWLayout" style="width: 2in" >
	<label id="DLG1.LBL.R1.SUBGROUPARRAY" for="DLG1.V.R1.SUBGROUPARRAY" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Textarea2</label>
<div style="margin-left: 40% ;"><textarea	id="DLG1.V.R1.SUBGROUPARRAY" class="edit " title="" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" rows="2" cols="20"  onchange="var tfunc = function() {onChange_subgrouparray_e00998d760c94f51bd803551638a2fee.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.SUBGROUPARRAY"  ></textarea>
</div>
</div><br  style="clear:both; " />
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	
<div 	id="DLG1.V.R1.CONTAINER_245"   
			A5-containerType="none"
			class="A5CWLayout "  style="width: 20%; "  >
<div class="A5CWLayout" style="width: 100%" >
	<button type="button" id="DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS2"    ></button>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<button type="button" id="DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS"    ></button>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<button type="button" id="DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS1"    ></button>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	<br  id="DLG1.V.R1.CONTAINER_245.BREAK"  style="clear:both; " />
<div 	id="DLG1.V.R1.INJECTIBLE_ORDERTOT"   
			A5-containerType="injectible"
			class=""  style="display: none; "  >
<div class="A5CWLayout" style="width: 33.33%" >
	<label id="DLG1.LBL.R1.TOTAL_BEF_ORD" for="DLG1.V.R1.TOTAL_BEF_ORD" title="" class="label" style="display:block;">Textbox2</label>

	<input	type="text" id="DLG1.V.R1.TOTAL_BEF_ORD" title=""     class="editPrimary " style="text-align: right; font-size: 8pt; font-weight: bold; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_total_bef_ord_fae0872281864a9b8ff1536a7c6793f7.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TOTAL_BEF_ORD"    value=""    />

</div>
<div class="A5CWLayout" style="width: 33.33%" >
	<label id="DLG1.LBL.R1.TOTAL_VAT_ORDER" for="DLG1.V.R1.TOTAL_VAT_ORDER" title="" class="label" style="display:block;">Total VAT</label>

	<input	type="text" id="DLG1.V.R1.TOTAL_VAT_ORDER" title=""     class="editPrimary " style="text-align: right; font-size: 8pt; font-weight: bold; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_total_vat_order_d9cf073893064144a4050153c27c0b77.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TOTAL_VAT_ORDER"    value=""    />

</div>
<div class="A5CWLayout" style="width: 33.33%" >
	<label id="DLG1.LBL.R1.TOTAL_ORDER_WITH_VAT" for="DLG1.V.R1.TOTAL_ORDER_WITH_VAT" title="" class="label" style="display:block;">Total Order</label>

	<input	type="text" id="DLG1.V.R1.TOTAL_ORDER_WITH_VAT" title=""     class="editPrimary " style="text-align: right; font-size: 8pt; font-weight: bold; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_total_order_with_vat_3871e697ab74476f86107459729638e7.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TOTAL_ORDER_WITH_VAT"    value=""    />

</div>
<div style="font: 0pt arial;clear:both;"></div>
	</div>
	</div>

<div 	id="DLG1.V.R1.INJECTIBLE_INVTOT"   
			A5-containerType="injectible"
			class=""  style="display: none; width: 100%; "  >
<div class="A5CWLayout" style="width: 33.33%" >
	<label id="DLG1.LBL.R1.TOTAL_BEF_INV" for="DLG1.V.R1.TOTAL_BEF_INV" title="" class="label" style="display:block;">Total VAT</label>

	<input	type="text" id="DLG1.V.R1.TOTAL_BEF_INV" title=""     class="editPrimary " style="text-align: right; font-size: 8pt; font-weight: bold; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_total_bef_inv_20a4bee4c5704469b43ea96455a63d71.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TOTAL_BEF_INV"    value=""    />

</div>
<div class="A5CWLayout" style="width: 33.33%" >
	<label id="DLG1.LBL.R1.TOTAL_VAT_INV" for="DLG1.V.R1.TOTAL_VAT_INV" title="" class="label" style="display:block;">Total VAT</label>

	<input	type="text" id="DLG1.V.R1.TOTAL_VAT_INV" title=""     class="editPrimary " style="text-align: right; font-size: 8pt; font-weight: bold; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_total_vat_inv_d7aa6cc48c2c4e628672cf9177e2cdc1.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TOTAL_VAT_INV"    value=""    />

</div>
<div class="A5CWLayout" style="width: 33.33%" >
	<label id="DLG1.LBL.R1.TOTAL_INV_WITH_VAT" for="DLG1.V.R1.TOTAL_INV_WITH_VAT" title="" class="label" style="display:block;">Total Order</label>

	<input	type="text" id="DLG1.V.R1.TOTAL_INV_WITH_VAT" title=""     class="editPrimary " style="text-align: right; font-size: 8pt; font-weight: bold; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_total_inv_with_vat_5141760dc7cd48b5857b68a13ea9d528.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TOTAL_INV_WITH_VAT"    value=""    />

</div>
<div style="font: 0pt arial;clear:both;"></div>
	</div>
	</div>

<div style="font: 0pt arial;clear:both;"></div>
	</div>
	</div>














<div 	id="DLG1.V.R1.WINDOW_PROGRESS"   
			A5-containerType="window"
			class=""  style="; display: none;"  >
<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.PLACEHOLDER_PROGRESS" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	

<div 	id="DLG1.V.R1.WINDOW_16"   
			A5-containerType="window"
			class=""  style="; display: none;"  >
<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.PLACEHOLDER_16" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 2in" >
	<label id="DLG1.LBL.R1.NEWPASSWORD" for="DLG1.V.R1.NEWPASSWORD" title="" class="label" style="display:block;">newpassword</label>

	<input	type="text" id="DLG1.V.R1.NEWPASSWORD" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_newpassword_f59f969e845440a491b959c89cc80053.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.NEWPASSWORD"    value=""    />

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: " >
	<button type="button" id="DLG1.V.R1.BUTTON_125"    ></button>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.PLACEHOLDER_17" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.PLACEHOLDER_18" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	

<div 	id="DLG1.V.R1.WINDOW_18"   
			A5-containerType="window"
			class=""  style="; display: none;"  >
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.DITRICT1" for="DLG1.V.R1.DITRICT1" title="" class="label" style="color: #000; display: block; ">Ditrict</label>

	<table id="DLG1.V.R1.DITRICT1.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">
<tr>
<td style="width:100%">
	<input  	id="DLG1.V.R1.DITRICT1" name="V.R1.DITRICT1"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />
	
</td>
		<td class="" >&nbsp;</td>
		<td id="DLG1.V.R1.DITRICT1.BUTTON" class="editBGButton" style="width: 0%;" ><svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg></td>
	</tr>
</table>

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.REGION1" for="DLG1.V.R1.REGION1" title="" class="label" style="color: #000; display: block; ">Region</label>

	<table id="DLG1.V.R1.REGION1.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">
<tr>
<td style="width:100%">
	<input  	id="DLG1.V.R1.REGION1" name="V.R1.REGION1"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />
	
</td>
		<td class="" >&nbsp;</td>
		<td id="DLG1.V.R1.REGION1.BUTTON" class="editBGButton" style="width: 0%;" ><svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg></td>
	</tr>
</table>

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: " >
	<button type="button" id="DLG1.V.R1.BUTTON_139"    ></button>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	

<div 	id="DLG1.V.R1.GETPASS"   
			A5-containerType="window"
			class=""  style="; display: none;"  >
<div class="A5CWLayout" style="width: 100%" >
	<div id="DLG1.V.R1.STATICTEXT_17" title=""  class="" style="color: #fa0303; font-weight: bold; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >You are far from the location!</div>
</div><br  style="clear:both; " /><div  style="height:15px; font: 0pt;"></div>
<div class="A5CWLayout" style="width: 50%" >
	<label id="DLG1.LBL.R1.POSACCURACY" for="DLG1.V.R1.POSACCURACY" title="" class="label" style="text-align: center; color: #000; font: bolder 10pt Segoe Fluent Icons; display: block; ">GPS accuracy</label>

	<table id="DLG1.V.R1.POSACCURACY.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">
<tr>
<td style="width:100%">
	<input  	id="DLG1.V.R1.POSACCURACY" name="V.R1.POSACCURACY"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />
	
</td>
		<td class="" >&nbsp;</td>
		<td id="DLG1.V.R1.POSACCURACY.CUSTOMBUTTON.0"  class="editBGButton" style="width: 0%;"><svg     title="" style="vertical-align: middle; ; fill: #f60707;" width="24" height="24" class="icon" ><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-refresh"  pointer-events="none" /></svg></td>
	</tr>
</table>

</div>
<div class="A5CWLayout" style="width: 50%" >
	<label id="DLG1.LBL.R1.POSDISTANCE" for="DLG1.V.R1.POSDISTANCE" title="" class="label" style="text-align: center; color: #000; font: bolder 10pt Segoe Fluent Icons; display: block; ">Distance From Loc.</label>

	<table id="DLG1.V.R1.POSDISTANCE.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">
<tr>
<td style="width:100%">
	<input  	id="DLG1.V.R1.POSDISTANCE" name="V.R1.POSDISTANCE"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />
	
</td>
		<td class="" >&nbsp;</td>
		<td id="DLG1.V.R1.POSDISTANCE.CUSTOMBUTTON.0"  class="editBGButton" style="width: 0%;"><svg     title="" style="vertical-align: middle; ; fill: #f70707;" width="24" height="24" class="icon" ><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-mapRoute"  pointer-events="none" /></svg></td>
	</tr>
</table>

</div><br  style="clear:both; " />
<div 	id="DLG1.V.R1.CONTAINER_248"   
			A5-containerType="none"
			class="A5CWLayout "  style="margin-left: 25%; width: 50%; "  >
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.MYPIN" for="DLG1.V.R1.MYPIN" title="" class="label" style="text-align: center; color: #000; font: bolder 10pt Segoe Fluent Icons; display: block; ">Mypin</label>

	<input	type="text" id="DLG1.V.R1.MYPIN" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_mypin_b26f55ebe539436d8727b3966a9a6564.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.MYPIN"    value=""    />

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.RECEIVEDPIN" for="DLG1.V.R1.RECEIVEDPIN" title="" class="label" style="text-align: center; color: #000; font: bolder 10pt Segoe Fluent Icons; display: block; ">Receivedpin</label>

	<input	type="text" id="DLG1.V.R1.RECEIVEDPIN" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_receivedpin_50259d0e48fa4eb08478012b7a5338df.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.RECEIVEDPIN"    value=""    />

</div><br  style="clear:both; " />
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	<br  id="DLG1.V.R1.CONTAINER_248.BREAK"  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<button type="button" id="DLG1.V.R1.BUTTON_130"    ></button>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	

<div 	id="DLG1.V.R1.WINDOW_SKIPREAS"   
			A5-containerType="window"
			class=""  style="; display: none;"  >
<div class="A5CWLayout" style="width: 80%" >
	<label id="DLG1.LBL.R1.SKIPREAS" for="DLG1.V.R1.SKIPREAS" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Skipreas</label>
<div style="margin-left: 40% ;"><select 	
		size="1" 
		class="edit "  
		name="V.R1.SKIPREAS" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.SKIPREAS"  
		 onchange="var tfunc = function() {onChange_skipreas_80b7ac9640d247008258910d7a7ce761.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >

</select>
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 80%" >
	<label id="DLG1.LBL.R1.SKIPCOMMENT" for="DLG1.V.R1.SKIPCOMMENT" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Skipcomment</label>
<div style="margin-left: 40% ;"><textarea	id="DLG1.V.R1.SKIPCOMMENT" class="edit " title="" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" rows="2" cols="20"  onchange="var tfunc = function() {onChange_skipcomment_997de16a3e3448eda852ad13f7a1c140.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.SKIPCOMMENT"  ></textarea>
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 80%" >
	<button type="button" id="DLG1.V.R1.BUTTON_102"    ></button>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	

<div 	id="DLG1.V.R1.WINDOW_VACATION"   
			A5-containerType="window"
			class=""  style="overflow: hidden; ; display: none;"  >
<div class="A5CWLayout" style="width: " >
	<button type="button" id="DLG1.V.R1.BUTTON_136"    ></button>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 50%" >
	<label id="DLG1.LBL.R1.VACATION_ACTIVITY" for="DLG1.V.R1.VACATION_ACTIVITY" title="" class="label" style="display:block;">Non Field Activity</label>

	<select 	
		size="1" 
		class="edit "  
		name="V.R1.VACATION_ACTIVITY" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.VACATION_ACTIVITY"  
		 onchange="var tfunc = function() {onChange_vacation_activity_24c9add5c5b3481888b2491e0f100e13.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >
<option value="1">Non&#45;Field Work</option> <option value="2">Vacation</option> 
</select>

</div>
<div class="A5CWLayout" style="width: 50%" >
	<label id="DLG1.LBL.R1.REASON" for="DLG1.V.R1.REASON" title="" class="label" style="display:block;">reason</label>

	<select 	
		size="1" 
		class="edit "  
		name="V.R1.REASON" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.REASON"  
		 onchange="var tfunc = function() {onChange_reason_dd5ea832a19240189f4958c794495a42.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >
<option value=""></option> <option value="RTD">RTD</option> <option value="Conference">Conference</option> <option value="Meeting">Meeting</option> <option value="Group Meeting">Group Meeting</option> <option value="Training">Training</option> 
</select>

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.VACATION_DATE" for="DLG1.V.R1.VACATION_DATE" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Date</label>
<div style="margin-left: 40% ;"><table id="DLG1.V.R1.VACATION_DATE.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">
<tr>
<td style="width:100%">
	<input  	id="DLG1.V.R1.VACATION_DATE" name="V.R1.VACATION_DATE"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />
	
</td>
		<td class="" >&nbsp;</td>
		<td id="DLG1.V.R1.VACATION_DATE.BUTTON" class="editBGButton" style="width: 0%;" ><img src="{images.edit.datePicker}" /></td>
	</tr>
</table>
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.VACATION_COMMENT" for="DLG1.V.R1.VACATION_COMMENT" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Comment</label>
<div style="margin-left: 40% ;"><textarea	id="DLG1.V.R1.VACATION_COMMENT" class="edit " title="" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" rows="3" cols="20"  onchange="var tfunc = function() {onChange_vacation_comment_a5644b2142894d2e90809ccc3b9f2bbb.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.VACATION_COMMENT"  ></textarea>
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<button type="button" id="DLG1.V.R1.BUTTON_DVSAVE_LSTVACATION"    ></button>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	

<div 	id="DLG1.V.R1.WINDOW_14"   
			A5-containerType="window"
			class=""  style="; display: none;"  >
<div 	id="DLG1.V.R1.CONTAINER_1"   
			A5-containerType="none"
			class="A5CWLayout "  style="width: 100%; height: screen.height/10*3; "  >
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.PAIMENTTYPE" for="DLG1.V.R1.PAIMENTTYPE" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Paiment Type</label>
<div style="margin-left: 40% ;"><select 	
		size="1" 
		class="edit "  
		name="V.R1.PAIMENTTYPE" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.PAIMENTTYPE"  
		 onchange="var tfunc = function() {onChange_paimenttype_b87c962f834942ffad5279ce33856408.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >
<option value="Cash">Cash</option> <option value="Cheques">Cheques</option> 
</select>
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.TXTRECDESC" for="DLG1.V.R1.TXTRECDESC" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Description</label>
<div style="margin-left: 40% ;"><input	type="text" id="DLG1.V.R1.TXTRECDESC" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_txtrecdesc_1695bd3ae0184117a483680e81413253.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TXTRECDESC"    value=""    />
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.CURRENCY" for="DLG1.V.R1.CURRENCY" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Currency</label>
<div style="margin-left: 40% ;"><select 	
		size="1" 
		class="edit "  
		name="V.R1.CURRENCY" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.CURRENCY"  
		 onchange="var tfunc = function() {onChange_Currency_03273cf34cf44d00a2ac4dfa5b0ebf75.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >
<option value="EGP">EGP</option> <option value="USD">USD</option> 
</select>
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.AMOUNT" for="DLG1.V.R1.AMOUNT" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Amount</label>
<div style="margin-left: 40% ;"><input	type="number" id="DLG1.V.R1.AMOUNT" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onFocus="$(this).select();" onchange="var tfunc = function() {onChange_amount_6150bee91694404b8e5ae75930f8ef51.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.AMOUNT"    value=""    />
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 2in" >
	<label id="DLG1.LBL.R1.ONINVOICENO" for="DLG1.V.R1.ONINVOICENO" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">OnInvoiceNo</label>
<div style="margin-left: 40% ;"><input	type="text" id="DLG1.V.R1.ONINVOICENO" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_OnInvoiceNo_bc6c913ac0ff4a0999a067d731de5ea8.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ONINVOICENO"    value=""    />
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 33.33%" >
	<button type="button" id="DLG1.V.R1.BUTTON_DVSAVE_LSTRECEIPT"    ></button>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	

<div 	id="DLG1.V.R1.WINDOW_SHIP"   
			A5-containerType="window"
			class=""  style="; display: none;"  >
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.SHIPDATE" for="DLG1.V.R1.SHIPDATE" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Shipdate</label>
<div style="margin-left: 40% ;"><table id="DLG1.V.R1.SHIPDATE.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">
<tr>
<td style="width:100%">
	<input  	id="DLG1.V.R1.SHIPDATE" name="V.R1.SHIPDATE"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />
	
</td>
		<td class="" >&nbsp;</td>
		<td id="DLG1.V.R1.SHIPDATE.BUTTON" class="editBGButton" style="width: 0%;" ><img src="{images.edit.datePicker}" /></td>
	</tr>
</table>
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.PAYMODE" for="DLG1.V.R1.PAYMODE" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Pay Mode</label>
<div style="margin-left: 40% ;"><select 	
		size="1" 
		class="edit "  
		name="V.R1.PAYMODE" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.PAYMODE"  
		 onchange="var tfunc = function() {onChange_PayMode_4e44e82e7f6742e48e7c911a6de067cd.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >

</select>
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.DELIVERYMODE" for="DLG1.V.R1.DELIVERYMODE" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Delivery Mode</label>
<div style="margin-left: 40% ;"><select 	
		size="1" 
		class="edit "  
		name="V.R1.DELIVERYMODE" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.DELIVERYMODE"  
		 onchange="var tfunc = function() {onChange_DeliveryMode_cd2187bf51454e0d834ed6024c8d3b6f.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >

</select>
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<button type="button" id="DLG1.V.R1.BUTTON_100"    ></button>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	

<div 	id="DLG1.V.R1.WINDOW_13"   
			A5-containerType="window"
			class=""  style="; display: none;"  >
<div 	id="DLG1.V.R1.CONTAINER_1_4"   
			A5-containerType="none"
			class="A5CWLayout "  style="width: 100%; height: 350px; "  >
<div class="A5CWLayout" style="width: 150px" >
	<label id="DLG1.LBL.R1.IMAGEBLOB" for="DLG1.V.R1.IMAGEBLOB" title="" class="label" style="display:block;">imageblob</label>

	<img src="" id="DLG1.V.R1.IMAGEBLOB" class=" " title="" style="width: 100%; height: 150px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onerror="if(typeof DLG1_DlgObj != 'undefined') DLG1_DlgObj._executeEvent('onImageError',{element: this});"  /><input type="hidden" id="DLG1.V.R1.IMAGEBLOB_HIDDENA5FN" name="V.R1.IMAGEBLOB_HIDDENA5FN" >
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: " >
	<button type="button" id="DLG1.V.R1.BUTTON_DVSAVE_LSTVISITNOTES"    ></button>
</div>
<div class="A5CWLayout" style="width: 30%" >
	<button type="button" id="DLG1.V.R1.BUTTON_19"    ></button>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<textarea	id="DLG1.V.R1.NOTES" class="edit " title="" style="border: 1px solid; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" rows="2" cols="20"  onchange="var tfunc = function() {onChange_Notes_c125184e7bdc43eeaeccb03c7dfe7dd8.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.NOTES"  ></textarea>

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 2in" >
	<input	type="text" id="DLG1.V.R1.NOTE_COMPID" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_note_compid_82906675996f44c2b2459c741bd8739c.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.NOTE_COMPID"    value=""    />

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.LSTVISITNOTES_GLOBALERRORS" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.MEDIAFILES_GLOBALERRORS" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.SYNC" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.PLACEHOLDER_4" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	

<div 	id="DLG1.V.R1.WINDOW_BASKET"   
			A5-containerType="window"
			class=""  style="; display: none;"  >
<div class="A5CWLayout" style="width: 100%" >
	<input type="hidden" id="DLG1.V.R1.BASKETNUM" name="V.R1.BASKETNUM" />
<div >
	<div id="DLG1.V.R1.BASKETNUM.CONTROL"  class="DLG1_BASKETNUM" style="overflow: auto; width: 100%; "></div>
</div>

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<button type="button" id="DLG1.V.R1.BUTTON_91"    ></button>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	

<div 	id="DLG1.V.R1.WINDOW_15"   
			A5-containerType="window"
			class=""  style="; display: none;"  >
<div class="A5CWLayout" style="width: 2in" >
	<label id="DLG1.LBL.R1.BASKETITEM" for="DLG1.V.R1.BASKETITEM" title="" class="label" style="display:block;">basketitem</label>

	<select 	
		size="1" 
		class="edit "  
		name="V.R1.BASKETITEM" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.BASKETITEM"  
		 onchange="var tfunc = function() {onChange_basketitem_b3614458fae9498884bbe1875393b0b7.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >
<option value=""></option> 
</select>

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: " >
	<button type="button" id="DLG1.V.R1.BUTTON_93"    ></button>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	

<div 	id="DLG1.V.R1.WINDOW_17"   
			A5-containerType="window"
			class="nopadding"  style="; display: none;"  >
<div 	id="DLG1.V.R1.CONTAINER_252"   
			A5-containerType="none"
			class="A5CWLayout nopadding"  style="font-weight: bold; margin-bottom: 0px ; display: table; width: 100%; "  >
<div class="A5CWLayout" style="nopadding;width: 30%" >
	<input	type="text" id="DLG1.V.R1.PRODCODE" title=""     class="edit " style="white-space: nowrap; font-size: 14px; font-weight: bold; padding: 0px; padding-top: 0px; padding-bottom: 0px; margin: 0px; margin-top: 0px; margin-bottom: 0px ; display: table-cell; overflow: hidden; vertical-align: middle; width: 100%; text-overflow: ellipsis; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_prodcode_02191e7affd340eabc52b13d5ba62fa5.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.PRODCODE"    value=""   readonly="readonly"   />

</div>
<div class="A5CWLayout" style="nopadding;width: 70%" >
	<input	type="text" id="DLG1.V.R1.ITEMNAME" title=""     class="edit " style="white-space: nowrap; font-size: 14px; font-weight: bold; padding: 0px; padding-top: 0px; padding-bottom: 0px; margin: 0px; margin-top: 0px; margin-bottom: 0px ; display: table-cell; overflow: hidden; vertical-align: middle; width: 100%; text-overflow: ellipsis; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_itemname_f4f102f0b2194c009107404cae5fbf4f.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ITEMNAME"    value=""   readonly="readonly"   />

</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	<br  id="DLG1.V.R1.CONTAINER_252.BREAK"  style="clear:both; " />
<div 	id="DLG1.V.R1.CONTAINER_253"   
			A5-containerType="none"
			class="A5CWLayout nopadding"  style="margin-bottom: 0px; display: table; width: 100%; table-layout: fixed; "  >
<div 	id="DLG1.V.R1.CONTAINER_251"   
			A5-containerType="none"
			class="A5CWLayout "  style="padding: 0 5px; display: table-cell; vertical-align: top; width: 15%; "  >
<div class="A5CWLayout nopadding" style="width: " >
	<div id="DLG1.V.R1.STATICTEXT_18" title=""  class="" style="font-size: 14px; margin-top: 25px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >SELL:</div>
</div><br  style="clear:both; " />

<div class="A5CWLayout nopadding" style="width: " >
	<div id="DLG1.V.R1.STATICTEXT_3" title=""  class="" style="font-size: 14px; padding-top: 15px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >Bonus :</div>
</div>


<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	
<div 	id="DLG1.V.R1.CONTAINER_249"   
			A5-containerType="none"
			class="A5CWLayout "  style="text-align: left; padding: 0 5px; display: table-cell; vertical-align: top; width: 23%; "  >
<div class="A5CWLayout nopadding" style="width: " >
	<div id="DLG1.V.R1.STATICTEXT_4" title=""  class="" style="color: #000; font-size: 12px; font-weight: bold; padding: 0px; padding-top: 0px; margin: 0px; margin-top: 0px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >QTY</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout nopadding" style="width: 2in" >
	<input	type="number" id="DLG1.V.R1.LSTITEMS_QTY_PAC" title=""     class="qty-bonus-display " style="font-size: 14px; margin-top: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onBlur="mp = DLG1_DlgObj.getValue('lstitems_qty_pac'); mps = DLG1_DlgObj.getValue('qtybypack'); mq = mp * mps; DLG1_DlgObj.setValue('lstitems_qty',mq);" onChange="var tfunc = function() {onChange_lstitems_qty_pac_d65e41bf4a51449c8c17cb066b359682.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );" onFocus="setTimeout($(this).select(),300);"   name="V.R1.LSTITEMS_QTY_PAC"    value=""    />

</div><br  style="clear:both; " />
<div class="A5CWLayout nopaddingt" style="width: 2in" >
	<input	type="number" id="DLG1.V.R1.LSTITEMS_BONUSQ_PAC" title=""     class="qty-bonus-display " style="font-size: 14px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onBlur="mp = DLG1_DlgObj.getValue('lstitems_bonusq'); mps = DLG1_DlgObj.getValue('qtybypack'); mq = mp * mps; DLG1_DlgObj.setValue('lstitems_qty',mq);" onFocus="setTimeout($(this).select(),300);" onchange="var tfunc = function() {onChange_lstitems_bonusq_pac_343f5e6e898d4628b1cd050de7c7facf.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LSTITEMS_BONUSQ_PAC"    value=""    />

</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	
<div 	id="DLG1.V.R1.CONTAINER_254"   
			A5-containerType="none"
			class="A5CWLayout "  style="text-align: left; padding: 0 5px; display: table-cell; vertical-align: top; width: 23%; "  >
<div class="A5CWLayout nopadding" style="width: " >
	<div id="DLG1.V.R1.STATICTEXT_19" title=""  class="" style="color: #000; font-size: 12px; font-weight: bold; padding-top: 0px; margin-top: 0px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >UNIT</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout nopadding" style="width: 100%" >
	<select 	
		size="1" 
		class="qty-bonus-display "  
		name="V.R1.DROPSELLUNIT" 
		title=""
		style="font-size: 14px; margin-top: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.DROPSELLUNIT"  
		 onChange="var tfunc = function() {onChange_dropsellunit_3b81a4f1bdb64e03bfbe8ae3bd50fed0.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >
<option value=""></option> 
</select>

</div><br  style="clear:both; " />
<div class="A5CWLayout nopaddingt" style="width: 100%" >
	<select 	
		size="1" 
		class="qty-bonus-display "  
		name="V.R1.DROPBONUSUNIT" 
		title=""
		style="font-size: 14px; padding-top: 0px; padding-bottom: 0px; margin-top: 0px; margin-bottom: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.DROPBONUSUNIT"  
		 onChange="var tfunc = function() {onChange_dropbonusunit_2d250ef731e0410cbaaa16538ca25342.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >
<option value=""></option> 
</select>

</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	
<div 	id="DLG1.V.R1.CONTAINER_256"   
			A5-containerType="none"
			class="A5CWLayout "  style="text-align: left; padding: 0 5px; display: table-cell; vertical-align: top; width: 15%; "  >
<div class="A5CWLayout nopadding" style="width: " >
	<div id="DLG1.V.R1.STATICTEXT_4_1" title=""  class="" style="color: #000; font-size: 12px; font-weight: bold; padding: 0px; padding-top: 0px; margin: 0px; margin-top: 0px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >U. Size</div>
</div><br  style="clear:both; " /><div  style="height:10px; font: 0pt;"></div>
<div class="A5CWLayout nopadding" style="width: 100%" >
	<input	type="number" id="DLG1.V.R1.LSTITEMS_SELLSIZE" title=""     class="edit " style="text-align: right; font-size: 14px; font-weight: bold; padding: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onFocus="$(this).select();" onchange="var tfunc = function() {onChange_lstitems_sellsize_e2db5f75970247a7bfa1cb764e4627bb.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LSTITEMS_SELLSIZE"    value=""    />

</div><br  style="clear:both; " /><div  style="height:15px; font: 0pt;"></div>
<div class="A5CWLayout nopadding" style="width: 100%" >
	<input	type="number" id="DLG1.V.R1.LSTITEMS_BONUSSIZE" title=""     class="edit " style="text-align: right; font-size: 14px; font-weight: bold; padding: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onFocus="$(this).select();" onchange="var tfunc = function() {onChange_lstitems_bonussize_602727207fa947a8878223659067c4cf.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LSTITEMS_BONUSSIZE"    value=""    />

</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	
<div 	id="DLG1.V.R1.CONTAINER_250"   
			A5-containerType="none"
			class="A5CWLayout "  style="text-align: left; padding: 0 5px; display: table-cell; vertical-align: top; width: 24%; "  >
<div class="A5CWLayout" style="width: 100%" >
	<button type="button" id="DLG1.V.R1.BUTTON_DVSAVE_LSTITEMS1"    ></button>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<button type="button" id="DLG1.V.R1.BUTTON_DVSAVE_LSTITEMS1_1"    ></button>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	<br  id="DLG1.V.R1.CONTAINER_253.BREAK"  style="clear:both; " />
<div 	id="DLG1.V.R1.CONTAINER_255"   
			A5-containerType="none"
			class="A5CWLayout "  style="border-top: 1px solid black; margin-top: 4px; width: 100%; "  >
<div class="A5CWLayout nopadding" style="width: 30%" >
	<label id="DLG1.LBL.R1.QTY" for="DLG1.V.R1.QTY" title="" class="label" style="text-align: right; color: #000000; font-size: 16px; font-weight: bold; padding: 0px; float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Qty</label>
<div style="margin-left: 40% ;"><input	type="text" id="DLG1.V.R1.QTY" title=""     class="editPrimary " style="text-align: right; font-size: 16px; font-weight: bold; padding: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_qty_92cf6e74cd7948cc9bb2f52e94aabe56.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.QTY"    value=""    />
</div>
</div>
<div class="A5CWLayout nopadding" style="width: 30%" >
	<label id="DLG1.LBL.R1.BONUS" for="DLG1.V.R1.BONUS" title="" class="label" style="text-align: right; color: #000000; font-size: 16px; font-weight: bold; padding: 0px; float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">bonus</label>
<div style="margin-left: 40% ;"><input	type="text" id="DLG1.V.R1.BONUS" title=""     class="editPrimary " style="text-align: right; font-size: 16px; font-weight: bold; padding: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_bonus_a66fb130a7ad47829587f5620010f741.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.BONUS"    value=""    />
</div>
</div>
<div class="A5CWLayout nopadding" style="width: 40%" >
	<label id="DLG1.LBL.R1.LSTITEMS_UNITPR" for="DLG1.V.R1.LSTITEMS_UNITPR" title="" class="label" style="text-align: right; color: #000000; font-size: 16px; font-weight: bold; padding: 0px; float: left; width: 35%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Unit Pr.</label>
<div style="margin-left: 35% ;"><input	type="number" id="DLG1.V.R1.LSTITEMS_UNITPR" title=""     class="edit " style="text-align: right; font-size: 16px; font-weight: bold; padding: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onFocus="$(this).select();" onchange="var tfunc = function() {onChange_lstitems_unitpr_0ceb521df3fa4052ac76cbbd0ebc4349.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LSTITEMS_UNITPR"    value=""    />
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout nopadding" style="width: 35%" >
	<label id="DLG1.LBL.R1.LSTITEMS_DISCOUNT" for="DLG1.V.R1.LSTITEMS_DISCOUNT" title="" class="label" style="text-align: right; color: #000000; font-size: 16px; font-weight: bold; padding: 0px; float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Disc %</label>
<div style="margin-left: 40% ;"><input	type="number" id="DLG1.V.R1.LSTITEMS_DISCOUNT" title=""     class="edit " style="text-align: right; font-size: 16px; font-weight: bold; padding: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onFocus="$(this).select();" onchange="var tfunc = function() {onChange_lstitems_discount_9aee24e85bb24ac69ec712d23d379af4.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LSTITEMS_DISCOUNT"    value=""    />
</div>
</div>
<div class="A5CWLayout nopadding" style="width: 60%" >
	<label id="DLG1.LBL.R1.TOTAL_PRICE" for="DLG1.V.R1.TOTAL_PRICE" title="" class="label" style="text-align: right; color: #000000; font-size: 16px; font-weight: bold; padding: 0px; float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Total Price</label>
<div style="margin-left: 40% ;"><input	type="text" id="DLG1.V.R1.TOTAL_PRICE" title=""     class="edit " style="text-align: right; font-size: 16px; font-weight: bold; padding: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_Total_Price_78897ab6e06248a0935c4666fce123bd.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TOTAL_PRICE"    value=""    />
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 2in" >
	<label id="DLG1.LBL.R1.SMOQ" for="DLG1.V.R1.SMOQ" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">smoq</label>
<div style="margin-left: 40% ;"><input	type="text" id="DLG1.V.R1.SMOQ" title=""     class="editPrimary " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_smoq_dbab642e13684f7dab52f3751ae81ff9.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.SMOQ"    value=""    />
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 2in" >
	<label id="DLG1.LBL.R1.BMOQ" for="DLG1.V.R1.BMOQ" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">smoq</label>
<div style="margin-left: 40% ;"><input	type="text" id="DLG1.V.R1.BMOQ" title=""     class="editPrimary " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_bmoq_c6b7b9f757cd4a0598b39a37cdbff42f.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.BMOQ"    value=""    />
</div>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	<br  id="DLG1.V.R1.CONTAINER_255.BREAK"  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.LITEITEMS_DISCUSSEDTYPE" for="DLG1.V.R1.LITEITEMS_DISCUSSEDTYPE" title="" class="label" style="display:block;">Discussed Type</label>

	<select 	
		size="1" 
		class="edit "  
		name="V.R1.LITEITEMS_DISCUSSEDTYPE" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.LITEITEMS_DISCUSSEDTYPE"  
		 onchange="var tfunc = function() {onChange_liteitems_DiscussedType_f52387457aad435d8c70d528ae8ba7af.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >

</select>

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 100%" >
	<label id="DLG1.LBL.R1.LISTITEMS_DISCUSSEDCOMENT" for="DLG1.V.R1.LISTITEMS_DISCUSSEDCOMENT" title="" class="label" style="display:block;">Discussed Coment</label>

	<textarea	id="DLG1.V.R1.LISTITEMS_DISCUSSEDCOMENT" class="edit " title="" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" rows="2" cols="20"  onchange="var tfunc = function() {onChange_listitems_DiscussedComent_e6e8815b512c45da98cf899734164e2a.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LISTITEMS_DISCUSSEDCOMENT"  ></textarea>

</div><br  style="clear:both; " />
<div 	id="DLG1.V.R1.CONTAINER_247"   
			A5-containerType="none"
			class="A5CWLayout "  style="background-color: #fbdada; width: 100%; "  >
<div class="A5CWLayout" style="width: 50%" >
	<label id="DLG1.LBL.R1.TMPRET" for="DLG1.V.R1.TMPRET" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Returned</label>
<div style="margin-left: 40% ;"><input	type="text" id="DLG1.V.R1.TMPRET" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onChange="var tfunc = function() {onChange_tmpret_1afb4b6185cf48e7a862538f21c26371.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TMPRET"    value=""    />
</div>
</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 46%" >
	<label id="DLG1.LBL.R1.RETURNITEM" for="DLG1.V.R1.RETURNITEM" title="" class="label" style="display:block;">ReturnITems</label>

	<select 	
		size="1" 
		class="edit "  
		name="V.R1.RETURNITEM" 
		title=""
		style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"
		id="DLG1.V.R1.RETURNITEM"  
		 onchange="var tfunc = function() {onChange_returnitem_d8c5b1f8632b46cbae0ebd6efd2a784c.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  
		
		
		 >

</select>

</div>
<div class="A5CWLayout" style="width: 27%" >
	<label id="DLG1.LBL.R1.RETURNQTY" for="DLG1.V.R1.RETURNQTY" title="" class="label" style="display:block;">Textbox2</label>

	<input	type="text" id="DLG1.V.R1.RETURNQTY" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_returnqty_7ec8ca444a004cc5a87258cf56e271dc.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.RETURNQTY"    value=""    />

</div>
<div class="A5CWLayout" style="width: 27%" >
	<label id="DLG1.LBL.R1.RETPRICE" for="DLG1.V.R1.RETPRICE" title="" class="label" style="display:block;">retprice</label>

	<input	type="text" id="DLG1.V.R1.RETPRICE" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_retprice_c6bda7cb1b83470d9174375141e64a89.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.RETPRICE"    value=""    />

</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	<br  id="DLG1.V.R1.CONTAINER_247.BREAK"  style="clear:both; " />
<div class="A5CWLayout" style="width: 2in" >
	<label id="DLG1.LBL.R1.RETURNABLE" for="DLG1.V.R1.RETURNABLE" title="" class="label" style="display:block;">returnable</label>

	<input	type="text" id="DLG1.V.R1.RETURNABLE" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_returnable_e438ce889eec4c308c3d9c74a9fc13fc.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.RETURNABLE"    value=""    />

</div><br  style="clear:both; " />
<div class="A5CWLayout" style="width: 2in" >
	<label id="DLG1.LBL.R1.FLAGVIEWBONUS" for="DLG1.V.R1.FLAGVIEWBONUS" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Flagviewbonus</label>
<div style="margin-left: 40% ;"><input	type="text" id="DLG1.V.R1.FLAGVIEWBONUS" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_flagviewbonus_4e9c20000f264745ad8b0d69402584fa.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.FLAGVIEWBONUS"    value=""    />
</div>
</div>
<div style="display:none;font: 0pt arial;clear:both;"></div>
		</div>
	


<script type="text/javascript" language="javascript">

//mark 2

if(!A5.ink) { 	
/*
Copyright (c) 2001, 2024 Alpha Software Corporation
All Rights Reserved.
This JavaScript library is licensed exclusively for use with Alpha Anywhere, Alpha Five,
Alpha Five Application Server, Alpha Anywhere Application Server,
Alpha Five Run Engine, and Alpha Anywhere Run Engine. It is specifically
not licensed for use on a server that does not have installed on it a
licensed copy of the Alpha Five Application Server or the Alpha Anywhere Application Server.
Portions:
(c) Copyright 2010- 2024 Software Garden, Inc.
All Rights Reserved.
*/
A5.ink={_:{pageLines:{'signature':{defaults:{size:120,margin:20,x:{show:true,color:'#000',width:5,ratio:.75,margin:30},baseLine:{show:true,color:'#000',width:1},background:'',text:{show:false,data:'',size:60,margin:5,color:'#000',fontFamily:'Arial'}},navigate:function(d,r,s){return d;},draw:function(r,s,c){var svg='';var hm=Math.round(s.margin*r.scale);var vm=Math.round(((r.height-s.size-$if(s.text.show,s.text.size+s.text.margin,0))*r.scale)/2);var rh=Math.round((s.size*r.scale));var rw=Math.round((r.width*r.scale)-(hm*2));var xl=(r.x*r.scale)+hm;var xr=xl+rw;var yt=(r.y*r.scale)+vm;var yb=yt+rh;if(s.background!=''){if(c){c.fillStyle=s.background;c.fillRect(xl,yt,rw,rh);}else{svg+='<rect x="'+xl+'" y="'+yt+'" width="'+rw+'" height="'+rh+'" style="stroke: none; fill: '+s.background+';" />';}}
if(s.baseLine.show){var sWidth=Math.max(1,s.baseLine.width*r.scale);if(c){c.strokeStyle=s.baseLine.color;c.lineWidth=sWidth;c.lineCap='butt';c.beginPath();c.moveTo(xl,yb);c.lineTo(xr,yb);c.stroke();c.closePath()}else{svg+='<path d="M '+xl+' '+yb+' L '+xr+' '+yb+'" style="stroke: '+s.baseLine.color+'; stroke-width: '+sWidth+'; stroke-linecap: butt;" />';}}
if(s.x.show){var xoff=(s.x.margin*r.scale);var xh=Math.round(rh-(xoff*2));var xw=Math.round(xh*s.x.ratio);var xxl=xl+xoff;var xxr=xxl+xw;var xyt=yt+xoff;var xyb=xyt+xh;var sWidth=Math.max(1,s.x.width*r.scale);if(c){c.strokeStyle=s.x.color;c.lineWidth=sWidth;c.lineCap='round';c.beginPath();c.moveTo(xxl,xyt);c.lineTo(xxr,xyb);c.stroke();c.moveTo(xxl,xyb);c.lineTo(xxr,xyt);c.stroke();c.closePath()}else{svg+='<path d="M '+xxl+' '+xyt+' L '+xxr+' '+xyb+'" style="stroke: '+s.x.color+'; stroke-width: '+sWidth+'; stroke-linecap: round;" />';svg+='<path d="M '+xxl+' '+xyb+' L '+xxr+' '+xyt+'" style="stroke: '+s.x.color+'; stroke-width: '+sWidth+'; stroke-linecap: round;" />';}}
if(s.text.show){var tyt=yb+((s.text.size+s.text.margin)*r.scale);var txt=s.text.data;if(txt[0]=='@'){txt=txt.substr(1);txt=txt.split('||');var altTxt=txt[1]||'';txt=txt[0];txt=txt.split('.');var d=this.meta;while(txt.length>0){if(typeof d[txt[0]]!='undefined'){d=d[txt[0]];txt.shift();}else{d=altTxt;break;}}
if(typeof d=='string'&&d!='')txt=d;else txt=altTxt;}
if(c){c.font=(s.text.size*r.scale)+'px '+s.text.fontFamily;c.fillStyle=s.text.color;c.fillText(txt,xl,tyt);}else{svg+='<text x="'+xl+'" y="'+tyt+'" style="fill: '+s.text.color+'; stroke: none; font: '+(s.text.size*r.scale)+'px '+s.text.fontFamily+'">'+txt+'</text>';}}
return svg;}},'graph':{defaults:{style:'normal',color:'#c7c7c7',width:1,size:120,minor:0,margin:{top:0,left:0,right:0,bottom:0,adjust:true}},navigate:function(d,r,s){if(d=='forward')return'right';else if(d=='back')return'left';else if(d=='start')return{x:0,y:0};else if(d=='end')return{x:r.width,y:r.height};else if(d=='line-start')return{x:0,y:r.y};else if(d=='line-end')return{x:r.width,y:r.y};else if(d=='new-line')return{x:Math.max(s.margin.left-10,0),y:r.y+s.size};else if(d=='prev-line')return{x:r.x,y:r.y-s.size};else if(d=='next-line')return{x:r.x,y:r.y+s.size};},draw:function(r,s,c){if(!r.editing&&s.style[0]=='e')return'';var cs=s.size*r.scale;var csm=0;if(s.minor>0){csm=cs/s.minor;if(csm>4)csm=csm;else csm=0;}
if(s.margin.adjust){var hm=((r.width*r.scale)-(Math.floor((((r.width-s.margin.left-s.margin.right)*r.scale))/cs)*cs))/2;var vm=((r.height*r.scale)-(Math.floor((((r.height-s.margin.top-s.margin.bottom)*r.scale))/cs)*cs))/2;var xl=Math.floor((r.x*r.scale)+hm);var xr=Math.ceil(((r.x+r.width)*r.scale)-hm);var yt=Math.floor((r.y*r.scale)+vm);var yb=Math.ceil(((r.y+r.height)*r.scale)-vm);}else{var xl=Math.floor(((r.x+s.margin.left)*r.scale));var xr=Math.ceil(((r.x-s.margin.right+r.width)*r.scale));var yt=Math.floor(((r.y+s.margin.top)*r.scale));var yb=Math.ceil(((r.y-s.margin.bottom+r.height)*r.scale));}
var svg='';var sWidth=Math.max(1,s.width*r.scale);if(csm>0){if(c){c.strokeStyle=s.color;c.lineWidth=sWidth;c.lineCap='square';c.globalAlpha=.5;}else{svg+='<g style="stroke-width: '+sWidth+'; stroke-linecap: square;"><g style="stroke: '+s.color+'; stroke-opacity: .5;">';}
var lc=0;var cx=xl;var start=xl;while(cx<=xr){if(lc!=0){if(c){c.beginPath();c.moveTo(cx,yt);c.lineTo(cx,yb);c.stroke();c.closePath()}else{svg+='<path d="M '+cx+' '+yb+' L '+cx+' '+yb+'" />';}}
lc++;if(lc==s.minor){lc=0;start+=cs;cx=start;}else cx+=csm;}
lc=0;var cy=yt;start=yt;while(cy<=yb){if(lc!=0){if(c){c.beginPath();c.moveTo(xl,cy);c.lineTo(xr,cy);c.stroke();c.closePath()}else{svg+='<path d="M '+xl+' '+cy+' L '+xr+' '+cy+'" />';}}
lc++;if(lc==s.minor){lc=0;start+=cs;cy=start;}else cy+=csm;}
if(!c)svg+='</g>';}
if(c){c.strokeStyle=s.color;c.lineWidth=sWidth;c.lineCap='square';c.globalAlpha=1;}else{svg+='<g style="stroke-width: '+sWidth+'; stroke-linecap: square;"><g style="stroke: '+s.color+';">';}
var cx=xl;while(cx<=xr){if(c){c.beginPath();c.moveTo(cx,yt);c.lineTo(cx,yb);c.stroke();c.closePath()}else{svg+='<path d="M '+cx+' '+yb+' L '+cx+' '+yb+'" />';}
cx+=cs;}
var cy=yt;while(cy<=yb){if(c){c.beginPath();c.moveTo(xl,cy);c.lineTo(xr,cy);c.stroke();c.closePath()}else{svg+='<path d="M '+xl+' '+cy+' L '+xr+' '+cy+'" />';}
cy+=cs;}
if(!s.margin.adjust){if(c){c.beginPath();c.moveTo(xl,yt);c.lineTo(xr,yt);c.stroke();c.closePath()
c.beginPath();c.moveTo(xl,yb);c.lineTo(xr,yb);c.stroke();c.closePath()
c.beginPath();c.moveTo(xl,yt);c.lineTo(xl,yb);c.stroke();c.closePath()
c.beginPath();c.moveTo(xr,yt);c.lineTo(xr,yb);c.stroke();c.closePath()}else{svg+='<path d="M '+xl+' '+yt+' L '+xr+' '+yt+'" />';svg+='<path d="M '+xl+' '+yb+' L '+xr+' '+yb+'" />';svg+='<path d="M '+xl+' '+yt+' L '+xl+' '+yb+'" />';svg+='<path d="M '+xr+' '+yt+' L '+xr+' '+yb+'" />';}}
if(!c)svg+='</g>';return svg;}},'ruled':{defaults:{flow:'ltr',style:'normal',width:1,margin:{show:'all',color:'#f98a6e',top:120,left:120,right:120,bottom:120},rules:{color:'#c7c7c7',size:120}},navigate:function(d,r,s){if(s.flow=='ltr'||s.flow=='rtl'){var rOff=0;if(r.clip.height>s.rules.size*2)rOff=s.rules.size/2;else if(r.clip.height>s.rules.size*1.5)rOff=s.rules.size/3;var cLine=Math.floor(((r.y+s.rules.size)-s.margin.top-1)/s.rules.size);var lLine=Math.floor((r.height-s.margin.top-s.margin.bottom)/s.rules.size)-1;if(s.flow=='ltr'){if(d=='forward')return'right';else if(d=='back')return'left';else if(d=='start')return{x:Math.max(s.margin.left-10,0),y:s.margin.top+s.rules.size+rOff-r.clip.height};else if(d=='end')return{x:r.width,y:s.margin.top+(lLine*s.rules.size)-rOff};else if(d=='line-start')return{x:Math.max(s.margin.left-10,0),y:s.margin.top+(cLine*s.rules.size)-rOff};else if(d=='line-end')return{x:r.width,y:s.margin.top+(cLine*s.rules.size)-rOff};else if(d=='new-line')return{x:Math.max(s.margin.left-10,0),y:s.margin.top+(Math.min(cLine+1,lLine)*s.rules.size)-rOff};}else{if(d=='forward')return'left';else if(d=='back')return'right';else if(d=='start')return{x:r.width-Math.max(s.margin.right-10,0),y:s.margin.top+s.rules.size+rOff-r.clip.height};else if(d=='end')return{x:0,y:s.margin.top+(lLine*s.rules.size)-rOff};else if(d=='line-start')return{x:r.width-Math.max(s.margin.right-10,0),y:s.margin.top+(cLine*s.rules.size)-rOff};else if(d=='line-end')return{x:0,y:s.margin.top+(cLine*s.rules.size)-rOff};else if(d=='new-line')return{x:r.width-Math.max(s.margin.right-10,0),y:s.margin.top+(Math.min(cLine+1,lLine)*s.rules.size)-rOff};}
if(d=='prev-line')return{x:r.x,y:s.margin.top+(Math.max(cLine-1,0)*s.rules.size)-rOff};else if(d=='next-line')return{x:r.x,y:s.margin.top+(Math.min(cLine+1,lLine)*s.rules.size)-rOff};}else if(s.flow=='ttb-ltr'){var rOff=0;if(r.clip.width>s.rules.size*2)rOff=s.rules.size/2;else if(r.clip.width>s.rules.size*1.5)rOff=s.rules.size/3;var cLine=Math.floor(((r.x+s.rules.size)-s.margin.left-1)/s.rules.size);var lLine=Math.floor((r.width-s.margin.left-s.margin.right)/s.rules.size)-1;if(d=='forward')return'down';else if(d=='back')return'up';else if(d=='start')return{x:s.margin.left+s.rules.size+rOff-r.clip.width,y:Math.max(s.margin.top-10,0)};else if(d=='end')return{x:s.margin.left+(lLine*s.rules.size)-rOff,y:r.height};else if(d=='line-start')return{x:s.margin.left+(cLine*s.rules.size)-rOff,y:Math.max(s.margin.top-10,0)};else if(d=='line-end')return{x:s.margin.left+(cLine*s.rules.size)-rOff,y:r.height};else if(d=='new-line')return{x:s.margin.left+(Math.min(cLine+1,lLine)*s.rules.size)-rOff,y:Math.max(s.margin.top-10,0)};else if(d=='prev-line')return{x:s.margin.left+(Math.max(cLine-1,0)*s.rules.size)-rOff,y:r.y};else if(d=='next-line')return{x:s.margin.left+(Math.min(cLine+1,lLine)*s.rules.size)-rOff,y:r.y};}else if(s.flow=='ttb-ltr'||s.flow=='ttb-rtl'){var rOff=0;if(r.clip.width>s.rules.size*2)rOff=s.rules.size/2;else if(r.clip.width>s.rules.size*1.5)rOff=s.rules.size/3;var cLine=Math.floor(((r.x+s.rules.size)-s.margin.left-1)/s.rules.size)-1;var lLine=Math.floor((r.width-s.margin.left-s.margin.right)/s.rules.size)-1;var fOff=r.width-((lLine+1)*s.rules.size)-s.margin.left-s.margin.right;if(d=='forward')return'down';else if(d=='back')return'up';else if(d=='start')return{x:s.margin.left+(lLine*s.rules.size)-rOff+fOff,y:Math.max(s.margin.top-10,0)};else if(d=='end')return{x:s.margin.left+s.rules.size+rOff-r.clip.width+fOff,y:r.height};else if(d=='line-start')return{x:s.margin.left+(cLine*s.rules.size)-rOff+fOff,y:Math.max(s.margin.top-10,0)};else if(d=='line-end')return{x:s.margin.left+(cLine*s.rules.size)-rOff+fOff,y:r.height};else if(d=='new-line')return{x:s.margin.left+(Math.max(cLine-1,0)*s.rules.size)-rOff+fOff,y:Math.max(s.margin.top-10,0)};else if(d=='prev-line')return{x:s.margin.left+(Math.min(cLine+1,lLine)*s.rules.size)-rOff+fOff,y:r.y};else if(d=='next-line')return{x:s.margin.left+(Math.max(cLine-1,0)*s.rules.size)-rOff+fOff,y:r.y};}},draw:function(r,s,c){if(!r.editing&&s.style[0]=='e')return'';var svg='';var sWidth=Math.max(1,s.width*r.scale);var dash=[(sWidth*3),(sWidth*3)];if(c){if(s.style[0]=='e'&&c.setLineDash)c.setLineDash(dash);c.strokeStyle=s.rules.color;c.lineWidth=sWidth;c.lineCap='square';}else{svg+='<g style="stroke-width: '+sWidth+'; stroke-linecap: square;"><g style="stroke: '+s.rules.color+';">';}
if(s.flow=='ltr'||s.flow=='rtl'){var pl=(r.x*r.scale);var pr=((r.width+r.x)*r.scale);var xl=((s.margin.left+r.x)*r.scale);var xr=((r.x+r.width-s.margin.right)*r.scale);var yt=(r.y*r.scale);var yb=((r.height+r.y)*r.scale);var rs=(s.rules.size*r.scale);var rt=(yt+rs+(s.margin.top*r.scale));var rb=((Math.floor((yb-rt-(s.margin.bottom*r.scale))/rs)*rs)+rt);var rl=pl;var rr=pr;if(s.style[0]=='m'){if(c){var rt2=rt;if(c.setLineDash)c.setLineDash(dash);while(rt2<rb){if(c){c.beginPath();c.moveTo(pl,rt2);c.lineTo(xl,rt2);c.stroke();c.moveTo(pr,rt2);c.lineTo(xr,rt2);c.stroke();c.closePath();}
rt2+=rs;}
if(c.setLineDash)c.setLineDash([]);}
rl=xl;rr=xr;}
while(rt<rb){if(c){c.beginPath();c.moveTo(rl,rt);c.lineTo(rr,rt);c.stroke();c.closePath();}else{svg+='<path d="M '+rl+' '+rt+' L '+rr+' '+rt+'" />';}
rt+=rs;}
if(s.flow=='ltr'){var xp=xl;var xs=xr;}else{var xp=xr;var xs=xl;}
if(c){if(s.style[0]=='m'&&c.setLineDash)c.setLineDash(dash);c.strokeStyle=s.margin.color;c.beginPath();c.moveTo(xp,yt);c.lineTo(xp,yb);c.stroke();c.closePath();c.globalAlpha=.4;c.beginPath();c.moveTo(xs,yt);c.lineTo(xs,yb);c.stroke();c.closePath();if(s.style[0]=='m'){c.beginPath();c.moveTo(pl,rb);c.lineTo(xl,rb);c.stroke();c.closePath();c.beginPath();c.moveTo(pr,rb);c.lineTo(xr,rb);c.stroke();c.closePath();if(c.setLineDash)c.setLineDash([]);}
c.beginPath();c.moveTo(rl,rb);c.lineTo(rr,rb);c.stroke();c.closePath();c.globalAlpha=1;}else{if(s.style[0]=='m'){svg+='<path d="M '+rl+' '+rb+' L '+rr+' '+rb+'"/>';svg+='</g>';}else{svg+='</g>';svg+='<path d="M '+xs+' '+yt+' L '+xs+' '+yb+'" style="stroke: '+s.margin.color+'; stroke-opacity: .4;" />';if(r.editing)svg+='<path d="M '+pl+' '+rb+' L '+pr+' '+rb+'" style="stroke: '+s.margin.color+'; stroke-opacity: .4;" />';else svg+='<path d="M '+pl+' '+rb+' L '+pr+' '+rb+'" style="stroke: '+s.rules.color+';" />';svg+='<path d="M '+xp+' '+yt+' L '+xp+' '+yb+'" style="stroke: '+s.margin.color+';" />';}}}else if(s.flow=='ttb-ltr'||s.flow=='ttb-rtl'){var pt=(r.y*r.scale);var pb=((r.height+r.y)*r.scale);var xl=(r.x*r.scale);var xr=((r.width+r.x)*r.scale);var yt=((s.margin.top+r.y)*r.scale);var yb=((r.height+r.y-s.margin.bottom)*r.scale);var rs=(s.rules.size*r.scale);var rl=(xl+(s.margin.left*r.scale))+rs;var rr=((Math.floor((xr-rl-(s.margin.right*r.scale))/rs)*rs)+rl)-rs;if(s.flow=='ttb-rtl'){var off=(r.width*r.scale)-(rr-rl)-(rs*2)-((s.margin.right+s.margin.left)*r.scale);rl+=off;rr+=off;}
var rt=pt;var rb=pb;var rc=rl;if(s.style[0]=='m'){if(c){var rc2=rc;if(c.setLineDash)c.setLineDash(dash);while(rc2<=rr){if(c){c.beginPath();c.moveTo(rc2,rt);c.lineTo(rc2,yt);c.stroke();c.moveTo(rc2,rb);c.lineTo(rc2,yb);c.stroke();c.closePath();}
rc2+=rs;}
if(c.setLineDash)c.setLineDash([]);}
var rt=yt;var rb=yb;}
while(rc<=rr){if(c){c.beginPath();c.moveTo(rc,rt);c.lineTo(rc,rb);c.stroke();c.closePath()}else{svg+='<path d="M '+rc+' '+rt+' L '+rc+' '+rb+'" />';}
rc+=rs;}
rl-=rs;rr+=rs;if(c){if(s.style[0]=='m'&&c.setLineDash)c.setLineDash(dash);c.strokeStyle=s.margin.color;c.beginPath();c.moveTo(xl,yt);c.lineTo(xr,yt);c.stroke();c.closePath();c.globalAlpha=.4;c.beginPath();c.moveTo(xl,yb);c.lineTo(xr,yb);c.stroke();c.closePath();if(s.style[0]=='m'){if(s.flow=='ttb-rtl'){c.beginPath();c.moveTo(rr,pt);c.lineTo(rr,pb);c.stroke();c.closePath();c.beginPath();c.moveTo(rl,pt);c.lineTo(rl,rt);c.stroke();c.closePath();c.beginPath();c.moveTo(rl,pb);c.lineTo(rl,rb);c.stroke();c.closePath();if(c.setLineDash)c.setLineDash([]);c.beginPath();c.moveTo(rl,rt);c.lineTo(rl,rb);c.stroke();c.closePath();}else{c.beginPath();c.moveTo(rl,pt);c.lineTo(rl,pb);c.stroke();c.closePath();c.beginPath();c.moveTo(rr,pt);c.lineTo(rr,rt);c.stroke();c.closePath();c.beginPath();c.moveTo(rr,pb);c.lineTo(rr,rb);c.stroke();c.closePath();if(c.setLineDash)c.setLineDash([]);c.beginPath();c.moveTo(rr,rt);c.lineTo(rr,rb);c.stroke();c.closePath();}}else{c.beginPath();c.moveTo(rr,pt);c.lineTo(rr,pb);c.stroke();c.closePath();c.beginPath();c.moveTo(rl,pt);c.lineTo(rl,pb);c.stroke();c.closePath();}
c.globalAlpha=1;}else{if(s.style[0]=='m'){if(s.flow=='ttb-rtl')svg+='<path d="M '+rl+' '+rt+' L '+rl+' '+rb+'" />';else svg+='<path d="M '+rr+' '+rt+' L '+rr+' '+rb+'" />';svg+='</g>';}else{svg+='</g>';svg+='<path d="M '+xl+' '+yb+' L '+xr+' '+yb+'" style="stroke: '+s.margin.color+'; stroke-opacity: .4;" />';if(s.flow=='ttb-rtl'){svg+='<path d="M '+rr+' '+pt+' L '+rr+' '+pb+'" style="stroke: '+s.margin.color+'; stroke-opacity: .4;" />';if(r.editing)svg+='<path d="M '+rl+' '+pt+' L '+rl+' '+pb+'" style="stroke: '+s.margin.color+'; stroke-opacity: .4;" />';else svg+='<path d="M '+rl+' '+pt+' L '+rl+' '+pb+'" style="stroke: '+s.rules.color+';" />';}else{svg+='<path d="M '+rl+' '+pt+' L '+rl+' '+pb+'" style="stroke: '+s.margin.color+'; stroke-opacity: .4;" />';if(r.editing)svg+='<path d="M '+rr+' '+pt+' L '+rr+' '+pb+'" style="stroke: '+s.margin.color+'; stroke-opacity: .4;" />';else svg+='<path d="M '+rr+' '+pt+' L '+rr+' '+pb+'" style="stroke: '+s.rules.color+';" />';}
svg+='<path d="M '+xl+' '+yt+' L '+xr+' '+yt+'" style="stroke: '+s.margin.color+';" />';}}}
if(c){if(s.style[0]=='e'&&c.setLineDash)c.setLineDash([]);}else svg+='</g>';return svg;}}}},shapes:{'line':{draw:function(xy,set,data,ctx){ctx.moveTo(xy.startX,xy.startY);ctx.lineTo(xy.endX,xy.endY);ctx.stroke();},commit:function(xy,set,data){data.drawLine(xy.startX,xy.startY,xy.endX,xy.endY,15);}},'arrow':{draw:function(xy,set,data,ctx){ctx.moveTo(xy.startX,xy.startY);ctx.lineTo(xy.endX,xy.endY);var w=ctx.lineWidth*6;var dx=xy.endX-xy.startX;var dy=xy.endY-xy.startY;var deg=Math.atan2(dy,dx)*180/Math.PI;var a1=(deg-135)%360*Math.PI/180;var a2=(deg+135)%360*Math.PI/180;var tx=xy.endX+(w*Math.cos(a1));var ty=xy.endY+(w*Math.sin(a1));ctx.moveTo(xy.endX,xy.endY);ctx.lineTo(tx,ty);tx=xy.endX+(w*Math.cos(a2));ty=xy.endY+(w*Math.sin(a2));ctx.moveTo(xy.endX,xy.endY);ctx.lineTo(tx,ty);ctx.stroke();},commit:function(xy,set,data){data.drawLine(xy.startX,xy.startY,xy.endX,xy.endY,15);var w=data.state.stroke.activeWidth*6;var dx=xy.endX-xy.startX;var dy=xy.endY-xy.startY;var deg=Math.atan2(dy,dx)*180/Math.PI;var a1=(deg-135)%360*Math.PI/180;var a2=(deg+135)%360*Math.PI/180;var tx=xy.endX+(w*Math.cos(a1));var ty=xy.endY+(w*Math.sin(a1));data.drawLine(xy.endX,xy.endY,tx,ty,5,true);tx=xy.endX+(w*Math.cos(a2));ty=xy.endY+(w*Math.sin(a2));data.drawLine(xy.endX,xy.endY,tx,ty,5,true);}},'rect':{draw:function(xy,set,data,ctx){ctx.rect(Math.min(xy.startX,xy.endX),Math.min(xy.startY,xy.endY),Math.abs(xy.endX-xy.startX),Math.abs(xy.endY-xy.startY));ctx.stroke();},commit:function(xy,set,data){data.drawLine(xy.startX,xy.startY,xy.endX,xy.startY,10);data.drawLine(xy.startX,xy.endY,xy.endX,xy.endY,10,true);data.drawLine(xy.startX,xy.startY,xy.startX,xy.endY,10,true);data.drawLine(xy.endX,xy.startY,xy.endX,xy.endY,10,true);}},},penPreview:function(p,o){A5.u.object.assign(p,{width:1,color:'#000000',lineCap:'round'},true);A5.u.object.assign(o,{size:20,width:{show:'auto'},clip:{shape:'circle'}},true);var lc=p.lineCap
if(lc=='butt')lc='square';var r=Math.round(o.size/2);var r2=r-1;var soff=4+Math.round(p.width/2+.499999);var sm=Math.round((o.size-(soff*2))/2);var color='dark';var svg=['<svg width="'+o.size+'" height="'+o.size+'">'];var isTooBig=false;if(p.width>(r-(p.width/1.5))){if(o.clip.shape=='circle'){svg=svg.concat(['<defs>','<clipPath id="A5InkStrokePreviewClip'+o.size+'">','<circle cx="'+r+'" cy="'+r+'" r="'+(r2-2)+'" />','</clipPath>','</defs>']);}else{svg=svg.concat(['<defs>','<clipPath id="A5InkStrokePreviewClip'+o.size+'">','<rect x="0" y="0" width="'+o.size+'" height="'+o.size+'"/>','</clipPath>','</defs>']);}
svg.push('<line x1="'+soff+'" y1="'+r+'" x2="'+(o.size-soff)+'" y2="'+r+'" style="fill: none; stroke: '+p.color+'; stroke-width: '+p.width+'; stroke-linecap: '+lc+';" clip-path="url(#A5InkStrokePreviewClip'+o.size+')" />');isTooBig=true;}else{svg.push('<path d="m '+soff+','+r+' c '+sm+',-'+sm+' '+sm+','+sm+' '+(sm*2)+',0" style="fill: none; stroke: '+p.color+'; stroke-width: '+p.width+'; stroke-linecap: '+lc+';"/>');}
if(o.width.show=='always'||(o.width.show=='auto'&&isTooBig)){svg.push('<g style="opacity: .5;">');svg.push('<text x="'+(o.size-2)+'" y="0" text-anchor="end" font-size="10" dy="10" style="fill: black; stroke: white; stroke-width: 1;">'+p.width+'</text>');svg.push('<text x="'+(o.size-2)+'" y="0" text-anchor="end" font-size="10" dy="10" style="fill: black;">'+p.width+'</text>');svg.push('</g>');}
svg.push('</svg>');return{'svg':svg.join(''),'color':color};},toSVG:function(ink,o){if(typeof ink!='string')ink='';if(A5.u.typeOf(o)!='object')o={};A5.u.object.assign(o,{size:{width:'auto',height:'auto'},bounds:'page',page:{background:true,lines:true}},true);var data=new A5.ink._.Data();data.fromFormat(ink);var b={x:0,y:0,w:data._maxX,h:data._maxY};if(typeof o.bounds=='object'){if(o.bounds.type=='ink'){var m=typeof o.bounds.margin=='number'?o.bounds.margin:0;b.x=Math.max(data._b.l-m,0);b.y=Math.max(data._b.t-m,0);b.w=Math.min(data._b.r-data._b.l+(m*2),data._maxX-b.x);b.h=Math.min(data._b.b-data._b.t+(m*2),data._maxY-b.y);}else if(o.bounds.type=='explicit'){b.x=o.bounds.x;b.y=o.bounds.y;b.w=o.bounds.width;b.h=o.bounds.height;}}
var scale=1;var w=-1;var h=-1;if(typeof o.size.scale=='number'){scale=o.size.scale;w=b.w*scale;h=b.h*scale;}else if(typeof o.size.zoom=='string'){scale=data.zoomToScale(o.size.zoom);w=b.w*scale;h=b.h*scale;}else{if(o.size.width=='auto'&&o.size.height=='auto'){w=b.w;h=b.h;}else{if(o.size.width!='auto'){if(''+o.size.width==''+Number(o.size.width))w=Number(o.size.width);else w=A5.u.convertUnits(o.size.width,'px');}
if(o.size.height!='auto'){if(''+o.size.height==''+Number(o.size.height))h=Number(o.size.height);else h=A5.u.convertUnits(o.size.height,'px');}
if(w!=-1&&h==-1){scale=w/b.w;h=b.h*scale;}else if(w==-1&&h!=-1){scale=h/b.h;w=b.w*scale;}else{scale=Math.min(w/b.w,h/b.h);}}}
var svg=data.renderRect({x:0,y:0,w:w,h:h},{editing:false,scale:scale,offset:{x:-b.x,y:-b.y},showPageLines:o.page.lines},null);var ps=data.scaleToPageSize(scale);var bg=data.page.background;if(bg.image&&o.page.background){var xOff=0-(b.x*scale);var yOff=0-(b.y*scale);if(typeof bg.image.size=='object'){var w=bg.image.size.width*scale;var h=bg.image.size.height*scale;var x=(ps.width-w)/2;var y=(ps.height-h)/2;if(bg.image.position.indexOf('left')!=-1)x=0;else if(bg.image.position.indexOf('right')!=-1)x=ps.width-w;if(bg.image.position.indexOf('top')!=-1)y=0;else if(bg.image.position.indexOf('bottom')!=-1)y=ps.height-h;x=x-xOff;y=y-yOff;svg='<image xlink:href="'+bg.image.data+'" preserveAspectRatio="none" x="'+x+'" y="'+y+'" width="'+w+'px" height="'+h+'px"/>'+svg;}else{var xPos='xMid';var yPos='YMid';if(bg.image.position.indexOf('left')!=-1)xPos='xMin';else if(bg.image.position.indexOf('right')!=-1)xPos='xMax';if(bg.image.position.indexOf('top')!=-1)yPos='YMin';else if(bg.image.position.indexOf('bottom')!=-1)yPos='YMax';if(bg.image.size=='contain'){svg='<image xlink:href="'+bg.image.data+'" preserveAspectRatio="'+xPos+yPos+' meet" x="'+xOff+'" y="'+yOff+'" width="'+ps.width+'px" height="'+ps.height+'px"/>'+svg;}else if(bg.image.size=='cover'){svg='<image xlink:href="'+bg.image.data+'" preserveAspectRatio="'+xPos+yPos+' slice" x="'+xOff+'" y="'+yOff+'" width="'+ps.width+'px" height="'+ps.height+'px"/>'+svg;}}}
var bgCSS='';if(bg.color!=''){bgCSS='background-color: '+bg.color+';';}
var attr=typeof arguments[2]=='string'?' '+arguments[2]:'';svg='<svg viewBox="0 0 '+(b.w*scale)+' '+(b.h*scale)+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink" style="width: '+w+'px; height: '+h+'px; '+bgCSS+'"'+attr+'>'+svg+'</svg>';return svg;}};A5.ink._.Data=Class.create({initialize:function(s){if(typeof s=='undefined')s={};A5.u.object.assign(this,{page:{width:300,height:200,unit:'px',dpu:6,lines:false,background:{image:false,color:''}},meta:{bounds:{}},state:{}},true);A5.u.object.assign(this,s);this.pts=[];this.strokes=[];this.attrs=[];this.state.stroke={maxWidth:1,activeWidth:1};this.state.pen={};this._cStroke=-1;this._cStrokeOff=1;this._cAttr=this.getPenAttr(1,'#000000','r');this._uo=new A5.ink._.Undo();var d=new Date();this.state.created=d.toFormat('yyyy-MM-dd 0h:0m:0s am');this.meta.created=this.state.created;this.meta.modified=this.meta.created;this._initSize();},_initSize:function(){this._maxX=this.page.width*this.page.dpu;this._maxY=this.page.height*this.page.dpu;this._b={l:this._maxX,t:this._maxY,r:0,b:0};A5.u.object.assign(this.meta.bounds,this._b);if(this.page.lines){if(A5.ink._.pageLines[this.page.lines.type]){var l=A5.ink._.pageLines[this.page.lines.type];if(l.defaults)A5.u.object.assign(this.page.lines,l.defaults,true);}}},clear:function(){if(arguments[0]==true){this.pts=[];this.strokes=[];this.attrs=[];this.state.stroke={maxWidth:1,activeWidth:1};this._cStroke=-1;this._cStrokeOff=1;this._cAttr=this.getPenAttr(1,'#000000','r');}else{this._uo=null;this.initialize();}},toFormat:function(saveBg){var str='#A5Ink\n';str+='version 1.0\n';var d=new Date();this.meta.created=this.state.created;this.meta.modified=d.toFormat('yyyy-MM-dd 0h:0m:0s am');this.meta.pen={};A5.u.object.assign(this.meta.pen,this.state.pen);var md={};A5.u.object.assign(md,this.meta);md.bounds=this._b;var s={page:{},meta:md};A5.u.object.assign(s.page,this.page);if(typeof s.page.background=='object'){if(typeof s.page.background.save=='boolean'){if(!s.page.background.save)delete s.page.background;}}
s=JSON.stringify(s);str+='settings %json%\n'+s+'\n%json%\n';var attr,penvals;var cattr=-1;var pt,p;var lastx,lasty;var start=true;var saved=0;var saved2=0;var attr=null;for(p=0;p<this.pts.length;p++){pt=this.pts[p];if(pt.x<=0){if(!start){str+='\n';start=true;}
continue;}
if(start){start=false;if(pt.a!=cattr){cattr=pt.a;attr=this.attrs[cattr];penvals=attr.vals;str+='A pen '+penvals.width+' '+penvals.color+$if(penvals.lineCap[0]!='r',' lc:'+penvals.lineCap[0],'')+'\n';}
lastx=pt.x;lasty=pt.y;str+='S '+pt.x+','+pt.y+',';continue;}
dx=Math.floor(pt.x-lastx);dy=Math.floor(pt.y-lasty);lastx=pt.x;lasty=pt.y;if(dx>0){if(dx>=1&&dx<=26)str+=String.fromCharCode(64+dx);else str+='+'+dx;}else if(dx==0){str+='+';}else{if(dx<=-1&&dx>=-26)str+=String.fromCharCode(-dx+96);else str+=dx;}
if(dy>0){if(dy>=1&&dy<=26)str+=String.fromCharCode(64+dy);else str+='+'+dy;}else if(dy==0){str+='+';}else{if(dy<=-1&&dy>=-26)str+=String.fromCharCode(-dy+96);else str+=dy;}}
if(!start)str+='\n';return str;},fromFormat:function(str,onloadfunction){this.clear();if(!str)return;str+='\n';var ch,pos;var classInst=this;function nextChar(){var ch='\n';pos++;if(pos<str.length)ch=str.charAt(pos);return ch;}
function getToken(){var token='';var ch=nextChar();while(ch!=' '&&ch!='\n'&&ch!=','&&ch!='+'&&ch!='-'){token+=ch;ch=nextChar();}
return token;}
function checkForTwo(){return null;if(pos>=str.length)return null;var chnum=str.charCodeAt(pos);if(chnum<33||chnum>41)return null;pos++;var objs=[{dx:-1,dy:-1},{dx:0,dy:-1},{dx:1,dy:-1},{dx:-1,dy:0},{dx:0,dy:0},{dx:1,dy:0},{dx:-1,dy:1},{dx:0,dy:1},{dx:1,dy:1}];return objs[chnum-33];}
function skipToEOL(){if(pos>=str.length)return;var i=str.indexOf('\n',pos);if(i<0)pos=str.length;else pos=i;return;}
function getStrokeDelta(){if(pos>=str.length)return 0;var sign=str.charAt(pos);var code;pos++;if(sign!='+'&&sign!='-'){code=sign.charCodeAt(0);if(code>=65&&code<=90)return code-64;if(code>=97&&code<=122)return-(code-96);return 0;}
var val=0;while(pos<str.length){code=str.charCodeAt(pos);if(code<48||code>57)break;val=10*val+(code-48);pos++;}
return sign=='-'?-val:val;}
function getStroke(){var x=getToken()-0;var y=getToken()-0;var dx,dy,both;var ch;var newpt=classInst.newPointObject(x,y,true);classInst.pts.push(newpt);nextChar();while(pos<str.length&&str.charAt(pos)!='\n'){both=checkForTwo();if(both){dx=both.dx;dy=both.dy;}else{dx=getStrokeDelta();dy=getStrokeDelta();}
x=x+dx;y=y+dy;newpt=classInst.newPointObject(x,y,true);classInst.pts.push(newpt);}
classInst.pts.push(classInst.newZeroPointObject());}
var cmd,cmd2,a,b,c,d,e,f,marker;pos=-1;while(pos<str.length){cmd=getToken()||'#';cmd2=cmd.substring(0,2);if(cmd=='')skipToEOL();else if(cmd.charAt(0)=='#')skipToEOL();else if(cmd.charAt(0)=='v')skipToEOL();else if(cmd2=='se'){marker=getToken();skipToEOL();a=str.indexOf('\n'+marker+'\n',pos+1);if(a<0)a=str.length;b=str.substring(pos+1,a);pos=a+marker.length;skipToEOL();c=JSON.parse(b);this.page.lines=false;this.page.background={image:false,color:''};this.meta={bounds:{}};A5.u.object.assign(this.page,c.page);A5.u.object.assign(this.meta,c.meta);if(c.meta.created)this.state.created=c.meta.created;if(c.meta.bounds)A5.u.object.assign(this._b,c.meta.bounds);this._initSize();}else if(cmd.charAt(0)=='S'){getStroke();skipToEOL();}else if(cmd.charAt(0)=='A'){a=getToken();if(a=='pen'){a=str.indexOf('\n',pos+1);if(a<0)a=str.length;b=str.substring(pos+1,a);pos=a;b=b.split(' ');c='r';if(b[2])c=b[2].split(':').pop();if(c=='s')c='square';else if(c=='b')c='butt';else c='round'
this._cAttr=this.getPenAttr(b[0]-0,b[1],c);}
skipToEOL();}else{skipToEOL();}}
this.rebuildStrokes();},newPointObject:function(x,y,init){x=Math.round(x);y=Math.round(y);var x1=x>0?(x<this._maxX||init?x:this._maxX):1;var y1=y>0?(y<this._maxY||init?y:this._maxY):1;var npo={x:x1,y:y1,a:this._cAttr};return npo;},newZeroPointObject:function(){var nzpo={x:0,y:0,a:-1};return nzpo;},newStrokeObject:function(){var nso={start:-1,end:-1,bounds:{l:this._maxX,t:this._maxY,r:0,b:0}};return nso;},newAttrObject:function(){var nao={type:0,vals:null};return nao;},attrMap:{pen:1},newAttrPenObject:function(){var napo={color:'#000000',width:1,lineCap:'r'};return napo;},getPenAttr:function(w,c,lc){var num,attr;for(num=0;num<this.attrs.length;num++){attr=this.attrs[num];if(attr.type==this.attrMap.pen&&attr.vals.color==c&&attr.vals.width==w&&attr.vals.lineCap==lc){A5.u.object.assign(this.state.pen,attr.vals);this.state.stroke.activeWidth=w;return num;}}
var ao=this.newAttrObject();ao.type=this.attrMap.pen;var pa=this.newAttrPenObject();pa.color=c;pa.width=w;pa.lineCap=lc;ao.vals=pa;this.attrs.push(ao);A5.u.object.assign(this.state.pen,pa);this.state.stroke.maxWidth=Math.max(w,this.state.stroke.maxWidth);this.state.stroke.activeWidth=w;this._cStrokeOff=Math.round(Math.sqrt(((w/2)*(w/2))*2)+.4999);return this.attrs.length-1;},startStroke:function(x,y){var addTo=typeof arguments[2]!='undefined'?arguments[2]:false;var newpt=this.newPointObject(x,y);this.pts.push(newpt);if(addTo)this._uo.addToUndo(this._uo.newUndo(this.pts.length-1,0,0,-1,newpt.x,newpt.y,this._cAttr));else this._uo.addUndo(this._uo.newUndo(this.pts.length-1,0,0,-1,newpt.x,newpt.y,this._cAttr));var newstroke=this.newStrokeObject();newstroke.start=this.pts.length-1;newstroke.end=newstroke.start;this.strokes.push(newstroke);this._cStroke=this.strokes.length-1;this.adjustCurrentStrokeBounds(newpt.x,newpt.y);this.inStroke=true;},addToStroke:function(x,y){var newpt=this.newPointObject(x,y);this.pts.push(newpt);this._uo.addToUndo(this._uo.newUndo(this.pts.length-1,0,0,-1,newpt.x,newpt.y,this._cAttr));this.strokes[this._cStroke].end=this.pts.length-1;this.adjustCurrentStrokeBounds(newpt.x,newpt.y);},endStroke:function(x,y){var len=this.pts.length;var newpt=this.newPointObject(x,y);if(len==0||this.pts[len-1].x!=newpt.x||this.pts[len-1].y!=newpt.y){this.pts.push(newpt);this._uo.addToUndo(this._uo.newUndo(this.pts.length-1,0,0,-1,newpt.x,newpt.y,-1));this.adjustCurrentStrokeBounds(newpt.x,newpt.y);this.strokes[this._cStroke].end=this.pts.length-1;}
this.adjustBoundsWithCurrentStroke();this.pts.push(this.newZeroPointObject());},adjustCurrentStrokeBounds:function(x,y){x=Math.round(x);y=Math.round(y);if(x-this._cStrokeOff<this.strokes[this._cStroke].bounds.l)this.strokes[this._cStroke].bounds.l=x-this._cStrokeOff;if(x+this._cStrokeOff>this.strokes[this._cStroke].bounds.r)this.strokes[this._cStroke].bounds.r=x+this._cStrokeOff;if(y-this._cStrokeOff<this.strokes[this._cStroke].bounds.t)this.strokes[this._cStroke].bounds.t=y-this._cStrokeOff;if(y+this._cStrokeOff>this.strokes[this._cStroke].bounds.b)this.strokes[this._cStroke].bounds.b=y+this._cStrokeOff;},adjustBoundsWithCurrentStroke:function(){if(this.strokes[this._cStroke].bounds.l<this._b.l)this.meta.bounds.l=this._b.l=this.strokes[this._cStroke].bounds.l;if(this.strokes[this._cStroke].bounds.r>this._b.r)this.meta.bounds.r=this._b.r=this.strokes[this._cStroke].bounds.r;if(this.strokes[this._cStroke].bounds.t<this._b.t)this.meta.bounds.t=this._b.t=this.strokes[this._cStroke].bounds.t;if(this.strokes[this._cStroke].bounds.b>this._b.b)this.meta.bounds.b=this._b.b=this.strokes[this._cStroke].bounds.b;},rebuildStrokes:function(){var p,pt,stroke;this.strokes=[];this._b={l:this._maxX,t:this._maxY,r:0,b:0};stroke=this.newStrokeObject();this.strokes.push(stroke);this._cStroke=0;for(p=0;p<this.pts.length;p++){pt=this.pts[p];if(pt.x!=0){if(stroke.start==-1)stroke.start=p;else stroke.end=p;this.adjustCurrentStrokeBounds(pt.x,pt.y);}else{if(stroke.start!=-1){this.adjustBoundsWithCurrentStroke();stroke=this.newStrokeObject();this.strokes.push(stroke);this._cStroke=this.strokes.length-1;}}}
if(stroke.start==-1){this.strokes.pop();this._cStroke=this.strokes.length-1;}},erasePoints:function(x,y,size,numSoFar){var left=x-size/2;var top=y-size/2;var right=left+size;var bottom=top+size;var p,pt;var n=numSoFar;for(p=0;p<this.pts.length;p++){pt=this.pts[p];if(pt.x>=left&&pt.x<=right&&pt.y>=top&&pt.y<=bottom){if(n==0)this._uo.addUndo(this._uo.newUndo(p,pt.x,pt.y,pt.a,0,0,-1));else this._uo.addToUndo(this._uo.newUndo(p,pt.x,pt.y,pt.a,0,0,-1));n++;pt.x=0;pt.y=0;pt.a=-1;}}
this.rebuildStrokes();return n;},undo:function(){var undoredos=this._uo.nextUndo();if(!undoredos)return;var i,undoredo,pt;for(i=undoredos.length-1;i>=0;i--){undoredo=undoredos[i];pt=this.pts[undoredo.p];pt.x=undoredo.ox;pt.y=undoredo.oy;pt.a=undoredo.oa;}
this.rebuildStrokes();},redo:function(){var undoredos=this._uo.nextRedo();if(!undoredos)return;var i,undoredo,pt;for(i=0;i<=undoredos.length-1;i++){undoredo=undoredos[i];pt=this.pts[undoredo.p];pt.x=undoredo.nx;pt.y=undoredo.ny;pt.a=undoredo.na;}
this.rebuildStrokes();},zoomToScale:function(z){if(typeof z=='object'){var margin=typeof z.margin!='undefined'?z.margin:0;if(z.fit=='both'){var w=z.width-(margin*2);var h=z.height-(margin*2);return Math.min(w/this._maxX,h/this._maxY);}else if(z.fit=='width'){var w=z.width-(margin*2);return w/this._maxX;}else if(z.fit=='height'){var h=z.height-(margin*2);return h/this._maxY;}}else{if(typeof z=='string')z=z.toNumber();var w=A5.u.convertUnits(this.page.width,this.page.unit,'px');return(w/this._maxX)*(z/100);}},scaleToPageSize:function(s){return{width:this._maxX*s,height:this._maxY*s,dpp:1/s};},drawLine:function(x1,y1,x2,y2,step){dx=x2-x1;dy=y2-y1;m=Math.floor(Math.sqrt((dx*dx)+(dy*dy))/step);this.startStroke(x1,y1,arguments[5]);if(m>0){for(var i=0;i<=m;i++){this.addToStroke(x1+(dx/m*i),y1+(dy/m*i));}}
this.endStroke(x2,y2);},renderRect:function(r,o,c){if(typeof c=='undefined'||c==null)c=false;if(r==null)r=false;if(!c)var sgv='';A5.u.object.assign(o,{editing:false,clear:true,showPageLines:true,scale:1,offset:{x:0,y:0},line:{defaultWidth:3,maxWidth:500,minWidth:1},stroke:{first:0,last:-1},background:''},true);var cr=false;if(r)cr={l:(r.x/o.scale)-o.offset.x,t:(r.y/o.scale)-o.offset.y,r:((r.x+r.w)/o.scale)-o.offset.x,b:((r.y+r.h)/o.scale)-o.offset.y};if(o.line.defaultWidth<o.line.minWidth)o.line.defaultWidth=o.line.minWidth;if(o.line.defaultWidth>o.line.maxWidth)o.line.defaultWidth=o.line.maxWidth;if(o.stroke.last==-1||o.stroke.last>this.strokes.length-1)o.stroke.last=this.strokes.length-1;if(c&&r){r.x=Math.round(r.x);r.y=Math.round(r.y);r.w=Math.round(r.w);r.h=Math.round(r.h);if(o.clear){c.beginPath();c.clearRect(r.x,r.y,r.w,r.h);c.stroke();}
c.save();c.rect(r.x,r.y,r.w,r.h);c.clip();}
if(c&&o.background!=''){c.fillStyle=o.background;c.fillRect(r.x,r.y,r.w,r.h);}
var svg='';if(o.showPageLines&&this.page.lines){if(A5.ink._.pageLines[this.page.lines.type]){svg+=A5.ink._.pageLines[this.page.lines.type].draw.call(this,{editing:o.editing,x:o.offset.x,y:o.offset.y,width:this._maxX,height:this._maxY,scale:o.scale,clip:r},this.page.lines,c);}}
if(o.stroke.first>o.stroke.last){if(c&&r)c.restore();return svg;}
var b,s,p,pt,pattr,sColor,sWidth,sLineCap;var lastx;var lasty;var x,y;var midx,midy,lastmidx,lastmidy;var dx,dy,dx1,dx2,dy1,dy2,mindelta;var ln;var lastattr=-1;var wrote=false;sWidth=o.line.defaultWidth*o.scale;if(sWidth<o.line.minWidth)sWidth=o.line.minWidth;if(sWidth>o.line.maxWidth)sWidth=o.line.maxWidth;if(c){c.lineWidth=sWidth;c.lineCap='round';c.lineJoin='round';}else{svg+='<g style="fill:none; stroke-linejoin: round; stroke-linecap: round;">';svg+='<g style="stroke:#000000; stroke-width:'+sWidth+';">';}
for(s=o.stroke.first;s<=o.stroke.last;s++){if(cr){b=this.strokes[s].bounds;if(cr.l>b.r||cr.r<b.l||cr.t>b.b||cr.b<b.t)continue;}
p=this.strokes[s].start;pt=this.pts[p];if(pt.a!=lastattr){if(pt.a<0||pt.a>=this.attrs.length)alert('Bad last attrib: '+pt.a);pattr=this.attrs[pt.a].vals;sWidth=pattr.width*o.scale;if(sWidth<o.line.minWidth)sWidth=o.line.minWidth;if(sWidth>o.line.maxWidth)sWidth=o.line.maxWidth;sColor=pattr.color;sLineCap=pattr.lineCap;if(c){c.lineWidth=sWidth;c.strokeStyle=sColor;c.lineCap=sLineCap;}else{svg+='</g><g style="stroke:'+sColor+'; stroke-width:'+sWidth+'; stroke-linecap: '+sLineCap+'">';}
lastattr=pt.a;}
lastx=(pt.x+o.offset.x)*o.scale;lasty=(pt.y+o.offset.y)*o.scale;lastmidx=lastx;lastmidy=lasty;if(c)c.beginPath();else svg+='<path d="';if(c)c.moveTo(lastx,lasty);else svg+='M '+lastx+' '+lasty+' ';wrote=false;for(p+=1;p<this.pts.length;p++){pt=this.pts[p];if(pt.x==0)break;x=(pt.x+o.offset.x)*o.scale;y=(pt.y+o.offset.y)*o.scale;dx=Math.abs(x-lastx);dy=Math.abs(y-lasty);if(dx<1.0&&dy<1.0)continue;midx=(x+lastx)/2.0;midy=(y+lasty)/2.0;ln=false;if(lastmidx>0&&sWidth>1.0){dx1=lastx-lastmidx;dy1=lasty-lastmidy;dx2=lastx-midx;dy2=lasty-midy;mindelta=0.5*sWidth;if(Math.abs(dx1)<mindelta){if(Math.abs(dx2)<mindelta&&((dy1<0&&dy2<0)||(dy1>0&&dy2>0))){if(4*Math.abs(dx1)<=Math.abs(dy1)&&4*Math.abs(dx2)<=Math.abs(dy2))ln=true;}}
if(Math.abs(dy2)<mindelta){if(Math.abs(dy2)<mindelta&&((dx1<0&&dx2<0)||(dx1>0&&dx2>0))){if(4*Math.abs(dy1)<=Math.abs(dx1)&&4*Math.abs(dy2)<=Math.abs(dx2))ln=true;}}}
if(dx<3.0&&dy<3.0){ln=true;}
if(ln&&sWidth>1.0&&lastmidx>0){dx1=lastx-lastmidx;dy1=lasty-lastmidy;dx2=lastx-midx;dy2=lasty-midy;if(dx1==0){if(dx2==0&&((dx1<0&&dx2<0)||(dx1>0&&dx2>0)))x=x+1;}else if(dy1==0){if(dy2==0&&((dx1<0&&dx2<0)||(dx1>0&&dx2>0)))y=y+1;}else if(dx2/dx1==dy2/dy1&&((dx1<0&&dx2<0)||(dx1>0&&dx2>0))){x=x+1;}
midx=x;midy=y;}
lastmidx=midx;lastmidy=midy;if(c){if(ln)c.lineTo(midx,midy);else c.quadraticCurveTo(lastx,lasty,midx,midy);}else{if(ln)svg+='L '+midx+' '+midy+' ';else svg+='Q '+lastx+' '+lasty+' '+midx+' '+midy+' ';}
if(!wrote&&(lastx!=x||lasty!=y))wrote=true;lastx=x;lasty=y;}
if(!wrote)lastx+=1;if(c){c.lineTo(lastx,lasty);c.stroke();}else{svg+='L '+lastx+' '+lasty+'" />';}}
if(c){if(r)c.restore();return true;}else{svg+='</g></g>';return svg;}},renderImage:function(imageType,w,h,back,quality){var canvas=document.createElement('canvas');canvas.width=w;var fH=h>0?h:w*(this._maxY/this._maxX);canvas.height=fH;canvas.style.position='absolute';canvas.style.top='-10000px';document.body.appendChild(canvas);var ctx=canvas.getContext("2d");if(back){var bg=this.page.background;if(back.color){var c=typeof back.color=='string'?back.color:this.page.background.color;if(c!=''){canvas.style.backgroundColor=back;ctx.beginPath();ctx.fillStyle=c;ctx.fillRect(0,0,w,fH);ctx.stroke();}}
if(back.image&&bg.image){var iX=0;var iY=0;var iW=back.image.naturalWidth;var iH=back.image.naturalHeight;if(typeof bg.image.size=='object'){var scale=w/this.page.width;iW=bg.image.size.width*scale;iH=bg.image.size.height*scale;}else{var wScale=w/iW;var hScale=fH/iH;var scale=Math.max(wScale,hScale);if(bg.image.size=='contain')scale=Math.min(wScale,hScale);iW=iW*scale;iH=iH*scale;}
iX=(w-iW)/2;iY=(fH-iH)/2;if(bg.image.position.indexOf('left')!=-1)iX=0;else if(bg.image.position.indexOf('right')!=-1)iX=w-iW;if(bg.image.position.indexOf('top')!=-1)iY=0;else if(bg.image.position.indexOf('bottom')!=-1)iY=fH-iH;iX=Math.round(iX);iY=Math.round(iY);iW=Math.round(iW);iH=Math.round(iH);ctx.drawImage(back.image,iX,iY,iW,iH);}}
var options={editing:true,scale:w/this._maxX,linewidth:1.0};this.renderRect(null,options,ctx);var str;if(quality)str=canvas.toDataURL(imageType=="jpeg"?"image/jpeg":"image/png",quality);else str=canvas.toDataURL(imageType=="jpeg"?"image/jpeg":"image/png");document.body.removeChild(canvas);delete ctx;delete canvas;return str;}});A5.ink._.Undo=Class.create({initialize:function(){A5.u.object.assign(this,{undoStack:[],undoTOS:-1,maxUndoSteps:100});},newUndo:function(p,ox,oy,oa,nx,ny,na){var ud={p:(p),ox:(ox),oy:(oy),oa:(oa),nx:(nx),ny:(ny),na:(na)};return ud;},addUndo:function(undoRedo){this.undoStack.length=this.undoTOS+1;var undoredos=[];undoredos.push(undoRedo);this.undoStack.push(undoredos);if(this.undoStack.length>this.maxUndoSteps){this.undoStack.splice(0,this.undoStack.length-this.maxUndoSteps);}
this.undoTOS=this.undoStack.length-1;},addToUndo:function(undoRedo){this.undoStack[this.undoTOS].push(undoRedo);},nextUndo:function(){var undoredos=null;if(this.undoTOS>=0){undoredos=this.undoStack[this.undoTOS];this.undoTOS--;}
return undoredos;},nextRedo:function(){var undoredos=null;if(this.undoTOS<this.undoStack.length-1){this.undoTOS++;undoredos=this.undoStack[this.undoTOS];}
return undoredos;},canUndo:function(){return this.undoTOS>=0;},canRedo:function(){return this.undoTOS<this.undoStack.length-1;},saveUndoState:function(){return{undoStack:this.undoStack,undoTOS:this.undoTOS,maxUndoSteps:this.maxUndoSteps};},loadUndoState:function(savedState){if(!savedState||!savedState.undoStack)return;this.undoStack=savedState.undoStack;this.undoTOS=savedState.undoTOS;this.maxUndoSteps=savedState.maxUndoSteps;},resetUndoState:function(){this.undoStack=[];this.undoTOS=-1;}});A5.Ink=Class.create({initialize:function(contId,settings){this.contId=contId;A5.u.object.assign(this,{theme:'',override:'base',inputId:'',autoCommit:false,layout:'split',previewSize:512,page:{},view:{detached:{id:''},scale:{fit:'both',margin:10,lock:true},className:'',zoomBox:{className:'',navigateClassName:'',scale:{allow:true,className:'',from:'bottom-right'}},page:{className:'',offset:0},margin:{top:0,left:0,right:0,bottom:0},overlay:{show:false,html:''}},editor:{snap:0,scale:false,className:'',page:{className:'',offset:0},margin:{top:0,left:0,right:0,bottom:0},overlay:{show:false,html:''},autoAdvance:{allow:false,flow:'auto',size:200,background:'#f9f9f9'}},split:{layout:'v-view-editor',size:'300px',minSize:'100px',bar:{show:false,size:'1px',className:'',verticalClassName:'',horizontalClassName:''}},items:{},tools:{pen:{activeClassName:'',smooth:2,memory:{load:'current',clear:'current'},base:{color:'#000',width:3,lineCap:'round'},preview:{size:38,width:{show:'never'},clip:{shape:'circle'}}},eraser:{activeClassName:'',areaClassName:'',size:50,max:400,min:20},pan:{activeClassName:''}},status:{messages:{'tool:pen':'','tool:eraser':'Eraser','tool:pan':'Drag to pan','item:eraser':'Drag to size eraser','item:undo':'Drag to navigate undo stack','item:redo':'Drag to navigate undo stack','item:navigate':'Drag to pan','item:navigate:new-line':'Drag to move between lines'}},onChange:false,onBeforeCommit:false,onCommit:false,onToolChange:false,onPenChange:false,onBackgroundChange:false,onLayout:false,state:{active:'editor',undo:false,redo:false,tool:{type:'pen',sticky:false,settings:false},pen:{},view:{shown:false,autoScale:false,detached:false,width:0,height:0,offset:{x:0,y:0},scale:.15},editor:{shown:false,autoScale:false,width:0,height:0,offset:{x:0,y:0},scale:1,autoAdvance:{show:false,flow:'ltr',size:200,offset:{x:0,y:0},edge:-1}}}});if(typeof settings.theme!='undefined')A5.themes.assign(this,settings.theme,'ink');A5.u.object.assign(this,settings);A5.overrides.assign(this,'ink',this.override);var dSet={page:{}};A5.u.object.assign(dSet.page,this.page);this.data=new A5.ink._.Data(dSet);this.value=this.data.toFormat();this._vNav=false;this._eNav=false;this._pal={a:false,n:'',t:''};this._render();},setValue:function(v){this.data.fromFormat(v);if(v=='')A5.u.object.assign(this.data.page,this.page);this.navigate('view','start');this.navigate('editor','start');this._setBack();this._resize();this._change({type:'setValue'});if(this.tools.pen.memory.load=='base')this.setPen(this.tools.pen.base);else if(this.tools.pen.memory.load=='last'){if(this.data.meta.pen)this.setPen(this.data.meta.pen);else this.setPen(this.tools.pen.base);}else this.setPen(this.state.pen);},commit:function(){if(typeof this.onBeforeCommit=='function')this.onBeforeCommit.call(this);this.value=this.data.toFormat();if(this.inputId!=''){$svs(this.inputId,this.value);$e.execute(this.inputId,'change');}
if(typeof this.onCommit=='function')this.onCommit.call(this,this.value);},clear:function(){this.data.clear();this.navigate('view','start');this.navigate('editor','start');this._repaint(false);this._change({type:'clear'});this.setStatus();if(this.tools.pen.memory.load=='base')this.setPen(this.tools.pen.base);else this.setPen(this.state.pen);if(this.autoCommit)this.commit();},undo:function(){this.data.undo();this._aaClear();this._repaint(false);this._change({type:'undo'});if(this.autoCommit)this.commit();},redo:function(){this.data.redo();this._aaClear();this._repaint(false);this._change({type:'redo'});if(this.autoCommit)this.commit();},refresh:function(){this._resize();},destroy:function(){A5.u.pointerTracker.remove(this.contId);if(this.layout=='detached-view')A5.u.pointerTracker.remove(this.view.detached.id);},setTool:function(tool){tool=tool.toLowerCase();var tList=['pen','eraser','pan','draw-shape'];if(tList.indexOf(tool)==-1)tool='pen';var s=typeof arguments[2]!='undefined'?arguments[2]:false;var oldTool=this.state.tool.type;this.state.tool.sticky=typeof arguments[1]=='boolean'?arguments[1]:false;this.state.tool.type=tool;this.state.tool.settings=s;if(this.state.editor.autoAdvance.show&&tool!=oldTool){this._aaClear();this._repaintEditor(false);}
if(this.tools[oldTool]){if(this.tools[oldTool].activeClassName!='')$rcn(this.contId,this.tools[oldTool].activeClassName);}
if(this.tools[tool]){if(this.tools[tool].activeClassName!='')$acn(this.contId,this.tools[tool].activeClassName);}
if(typeof this.onToolChange=='function')this.onToolChange.call(this,tool,oldTool);this.setStatus();},setPen:function(o){A5.u.object.assign(o,{color:'#000000',width:1,lineCap:'round'},true);if(o.color.constructor==Array){var ca=[];for(var i=0;i<Math.min(o.color.length,4);i++){if(typeof o.color[i]!='number')ca.push(String(o.color[i]).toNumber());else ca.push(o.color[i]);}
if(o.color.length==4){o.color='rgba('+o.color.join(',')+')';}else if(o.color.length==3){o.color='rgb('+o.color.join(',')+')';}else o.color='#000000';}else{o.color=o.color.toLowerCase();var f4=o.color.substr(0,4);var f5=o.color.substr(0,5);if(o.color[0]=='#'){o.color='#'+o.color.replace(/[^0-9a-f]/gi,'');}else if(f4=='rgb('||f4=='hls('){o.color=o.color.replace(/[^0-9,\.%]/gi,'');var c=o.color.split(',');if(c.length>2)o.color=f4+c[0]+','+c[1]+','+c[2]+')';else o.color='#000000';}else if(f5=='rgba('||f5=='hlsa('){o.color=o.color.replace(/[^0-9,\.%]/gi,'');var c=o.color.split(',');if(c.length>3)o.color=f5+c[0]+','+c[1]+','+c[2]+','+c[3]+')';else o.color='#000000';}else o.color='#000000';}
this.data._cAttr=this.data.getPenAttr(o.width,o.color,o.lineCap);if(this._ppEle){var spObj=A5.ink.penPreview(this.data.state.pen,this.tools.pen.preview);this._ppEle.innerHTML=spObj.svg;}
A5.u.object.assign(this.state.pen,this.data.state.pen);if(typeof this.onPenChange=='function')this.onPenChange.call(this,o);},setPage:function(p){A5.u.object.assign(this.data.page,p);this.data._initSize();this._setBack();this._resize();if(this.autoCommit)this.commit();},setBackground:function(bs){if(bs==false||bs==null||typeof bs=='undefined'){this.data.page.background.image=false;this.data.page.background.color='';this._setBack();}else{A5.u.object.assign(this.data.page.background,bs);this._setBack();this._repaint(false);}
if(typeof this.onBackgroundChange=='function')this.onBackgroundChange.call(this,this.data.page.background);if(this.autoCommit)this.commit();},metaData:function(){var md=typeof arguments[0]=='object'?arguments[0]:false;if(md)A5.u.object.assign(this.data.meta,md);A5.u.object.assign(this.data.meta.bounds,this.data._b);if(this.autoCommit)this.commit();return this.data.meta;},setOverlay:function(p,o){if(p=='editor'){var ele=$(this.contId+'.EDITOR.OVERLAY')
if(o){if(typeof o=='string'){o=o.replace(/\{id\}/gi,this.contId);ele.innerHTML=o;this.editor.overlay.html=o;}else if(o.constructor==Function){ele.innerHTML=o.call(this,'editor').replace(/\{id\}/gi,this.contId);this.editor.overlay.html=o;}
ele.style.display='';this.editor.overlay.show=true;}else{ele.style.display='none';this.editor.overlay.show=false;}}else if(p=='view'){var ele=$(this.contId+'.VIEW.OVERLAY')
if(o){if(typeof o=='string'){o=o.replace(/\{id\}/gi,this.contId);ele.innerHTML=o;this.view.overlay.html=o;}else if(o.constructor==Function){ele.innerHTML=o.call(this,'view').replace(/\{id\}/gi,this.contId);this.view.overlay.html=o;}
ele.style.display='';this.view.overlay.show=true;}else{ele.style.display='none';this.view.overlay.show=false;}}
this._sEle=$(this.contId+'.STATUS');},setStatus:function(){if(this._sEle){var msg=typeof arguments[0]!='undefined'?arguments[0]:false;var html='';if(typeof msg=='object'){html=msg.html;}else if(this.status.messages){if(typeof msg=='string'){if(this.status.messages[msg])html=this.status.messages[msg];}else{if(this.status.messages['tool:'+this.state.tool.type])html=this.status.messages['tool:'+this.state.tool.type];}}
this._sEle.innerHTML=html;if(html=='')this._sEle.style.display='none';else this._sEle.style.display='';}},navigate:function(p,d){if(d=='scale'){var s=arguments[2];if(p=='editor'){if(this.state.editor.autoScale){if(this.editor.scale.lock)return false;}
this.editor.scale=false;if(typeof s=='number')this.state.editor.scale=s;else if(typeof s=='object'){var ele=$(this.contId+'.EDITORCONTENT');s.width=ele.offsetWidth;s.height=ele.offsetHeight;this.state.editor.scale=this.data.zoomToScale(s);if(s.autoScale){delete s.autoScale;this.state.editor.autoScale=true;this.editor.scale=s;}}else if(s=='in'||s=='out'){var a=this.state.editor.scale/4;if(s=='out'&&this.state.editor.scale>.05)this.state.editor.scale-=a;else if(s=='in')this.state.editor.scale+=a;}else this.state.editor.scale=this.data.zoomToScale(s);}else if(p=='view'){if(this.state.view.autoScale){if(this.view.scale.lock)return false;}
this.view.scale=false;if(typeof s=='number')this.state.view.scale=s;else if(typeof s=='object'){var ele=$(this.contId+'.VIEWCONTENT');s.width=ele.offsetWidth;s.height=ele.offsetHeight;this.state.view.scale=this.data.zoomToScale(s);if(s.autoScale){delete s.autoScale;this.state.view.autoScale=true;this.view.scale=s;}}else if(s=='in'||s=='out'){var a=this.state.view.scale/4;if(s=='out'&&this.state.view.scale>.05)this.state.view.scale-=a;else if(s=='in')this.state.view.scale+=a;}else this.state.view.scale=this.data.zoomToScale(s);}
this._resize();}else{var wCmd=['forward','back','new-line','prev-line','next-line','line-start','line-end','start','end'];if(p=='editor'){this._aaClear();if(wCmd.indexOf(d)!=-1){if(this.data.page.lines){var pl=A5.ink._.pageLines[this.data.page.lines.type];if(pl){if(pl.navigate){var res=pl.navigate(d,{x:this.state.editor.offset.x,y:this.state.editor.offset.y,width:this.data._maxX,height:this.data._maxY,clip:{width:this.state.editor.width/this.state.editor.scale,height:this.state.editor.height/this.state.editor.scale}},this.data.page.lines);if(typeof res=='object'){this._offset('editor',res.x,res.y);this._repaint(false);return true;}else if(typeof res=='string')d=res;}}}}
var eEle=$(this.contId+'.EDITORCONTENT');var ps=this.data.scaleToPageSize(this.state.editor.scale);var w=eEle.offsetWidth;var h=eEle.offsetHeight;var pw=Math.min(ps.width,w);var ph=Math.min(ps.height,h);var maxOffX=0;var maxOffY=0;if(ps.width>w)maxOffX=(ps.width-w)*ps.dpp;if(ps.height>h)maxOffY=(ps.height-h)*ps.dpp;var move=.5;if(d.substr(0,6)=='nudge-'){move=.1;d=d.substr(6);}
var wIndx=wCmd.indexOf(d);if(wIndx!=-1){var wrCmd=['right','left',{x:0,y:false,m:'down'},'up','down',{x:0,y:false,m:false},{x:maxOffX,y:false,m:false},{x:0,y:0,m:false},{x:maxOffX,y:maxOffY,m:false}];d=wrCmd[wIndx];if(typeof d=='object'){if(typeof d.x=='number')this.state.editor.offset.x=d.x;if(typeof d.y=='number')this.state.editor.offset.y=d.y;if(typeof d.m=='string')d=d.m;else{this._repaint(false);return true;}}}
if(d[0]=='l'||d[0]=='r'){var a=(eEle.offsetWidth*move)/this.state.editor.scale;if(d[0]=='l')this.state.editor.offset.x-=a;else this.state.editor.offset.x+=a;this.state.editor.offset.x=Math.min(Math.max(0,this.state.editor.offset.x),maxOffX);}else if(d[0]=='u'||d[0]=='d'){var a=(eEle.offsetHeight*move)/this.state.editor.scale;if(d[0]=='u')this.state.editor.offset.y-=a;else this.state.editor.offset.y+=a;this.state.editor.offset.y=Math.min(Math.max(0,this.state.editor.offset.y),maxOffY);}
this._repaint(false);}else if(p=='view'){if(wCmd.indexOf(d)!=-1){if(this.data.page.lines){var pl=A5.ink._.pageLines[this.data.page.lines.type];if(pl){if(pl.navigate){var res=pl.navigate(d,{x:this.state.view.offset.x,y:this.state.view.offset.y,width:this.data._maxX,height:this.data._maxY,clip:{width:this.state.view.width/this.state.view.scale,height:this.state.view.height/this.state.view.scale}},this.data.page.lines);if(typeof res=='object'){this._offset('view',res.x,res.y);this._repaint(false);return true;}else if(typeof res=='string')d=res;}}}}
var vEle=$(this.contId+'.VIEWCONTENT');var ps=this.data.scaleToPageSize(this.state.view.scale);var w=vEle.offsetWidth;var h=vEle.offsetHeight;var pw=Math.min(ps.width,w);var ph=Math.min(ps.height,h);var maxOffX=0;var maxOffY=0;if(ps.width>w)maxOffX=(ps.width-w)*ps.dpp;if(ps.height>h)maxOffY=(ps.height-h)*ps.dpp;var move=.5;if(d.substr(0,6)=='nudge-'){move=.1;d=d.substr(6);}
var wIndx=wCmd.indexOf(d);if(wIndx!=-1){var wrCmd=['right','left',{x:0,y:false,m:'down'},'up','down',{x:0,y:false,m:false},{x:maxOffX,y:false,m:false},{x:0,y:0,m:false},{x:maxOffX,y:maxOffY,m:false}];d=wrCmd[wIndx];if(typeof d=='object'){if(typeof d.x=='number')this.state.view.offset.x=d.x;if(typeof d.y=='number')this.state.view.offset.y=d.y;if(typeof d.m=='string')d=d.m;else{this._repaint(false);return true;}}}
if(d[0]=='l'||d[0]=='r'){var a=(vEle.offsetWidth*move)/this.state.view.scale;if(d[0]=='l')this.state.view.offset.x-=a;else this.state.view.offset.x+=a;this.state.view.offset.x=Math.min(Math.max(0,this.state.view.offset.x),maxOffX);}else if(d[0]=='u'||d[0]=='d'||d[0]=='n'){var a=(vEle.offsetHeight*move)/this.state.view.scale;if(d[0]=='u')this.state.view.offset.y-=a;else this.state.view.offset.y+=a;if(d[0]=='n')this.state.view.offset.x=0;this.state.view.offset.y=Math.min(Math.max(0,this.state.view.offset.y),maxOffY);}
this._repaint(false);}}},_change:function(ed){this.state.undo=this.data._uo.canUndo();this.state.redo=this.data._uo.canRedo();if(typeof this.onChange=='function')this.onChange.call(this,ed);},_resize:function(){if(this.state.view.detached)this.layout='detached-view';var cEle=$(this.contId);var vEle=$(this.contId+'.VIEW');var eEle=$(this.contId+'.EDITOR');var sbEle=$(this.contId+'.SPIT.BAR');sbEle.style.display='none';var eRefresh=true;var vRefresh=true;var forceEditor=false;if(this.layout=='split'){var eSize=A5.u.convertUnits(this.split.size,'px');var vmSize=A5.u.convertUnits(this.split.minSize,'px');if(this.split.layout.substr(0,2)=='v-'){if(eSize+vmSize>cEle.clientHeight)forceEditor=true;}else if(this.split.layout.substr(0,2)=='h-'){if(eSize+vmSize>cEle.clientWidth)forceEditor=true;}}
this.state.editor.shown=false;this.state.view.shown=false;if(this.layout=='view'||(this.layout=='split'&&this.split.layout=='view')){vEle.style.display='';vEle.style.top='0px';vEle.style.left='0px';vEle.style.right='0px';vEle.style.bottom='0px';eEle.style.display='none';eRefresh=false;}else if(this.layout=='editor'||this.layout=='detached-view'||(this.layout=='split'&&this.split.layout=='editor')||forceEditor){if(this.layout=='detached-view')vEle.style.display='';else{vEle.style.display='none';vRefresh=false;}
eEle.style.top='0px';eEle.style.left='0px';eEle.style.right='0px';eEle.style.bottom='0px';eEle.style.display='';}else if(this.layout=='split'){if(this.split.layout=='v-view-editor'){var vh=cEle.clientHeight-eSize+'px';var vb=this.split.size;if(this.split.bar.show){vb=(eSize+A5.u.convertUnits(this.split.bar.size,'px'))+'px';sbEle.style.top='';sbEle.style.bottom=this.split.size;sbEle.style.left='0px';sbEle.style.right='0px';sbEle.style.height=this.split.bar.size;sbEle.style.width='';sbEle.style.display='';sbEle.className=this.split.bar.className+' '+this.split.bar.verticalClassName;}
vEle.style.top='0px';vEle.style.left='0px';vEle.style.right='0px';vEle.style.bottom=vb;vEle.style.display='';eEle.style.top=vh;eEle.style.left='0px';eEle.style.right='0px';eEle.style.bottom='0px';eEle.style.display='';}else if(this.split.layout=='v-editor-view'){var vt=this.split.size;if(this.split.bar.show){vt=(eSize+A5.u.convertUnits(this.split.bar.size,'px'))+'px';sbEle.style.top=this.split.size;sbEle.style.bottom='';sbEle.style.left='0px';sbEle.style.right='0px';sbEle.style.height=this.split.bar.size;sbEle.style.width='';sbEle.style.display='';sbEle.className=this.split.bar.className+' '+this.split.bar.verticalClassName;}
vEle.style.top=vt;vEle.style.left='0px';vEle.style.right='0px';vEle.style.bottom='0px';vEle.style.display='';eEle.style.top='0px';eEle.style.left='0px';eEle.style.right='0px';eEle.style.bottom=(cEle.clientHeight-eSize)+'px';eEle.style.display='';}else if(this.split.layout=='h-editor-view'){var vl=this.split.size;if(this.split.bar.show){vl=(eSize+A5.u.convertUnits(this.split.bar.size,'px'))+'px';sbEle.style.top='0px';sbEle.style.bottom='0px';sbEle.style.left=this.split.size;sbEle.style.right='';sbEle.style.height='';sbEle.style.width=this.split.bar.size;sbEle.style.display='';sbEle.className=this.split.bar.className+' '+this.split.bar.horizontalClassName;}
vEle.style.top='0px';vEle.style.left=vl;vEle.style.right='0px';vEle.style.bottom='0px';vEle.style.display='';eEle.style.top='0px';eEle.style.left='0px';eEle.style.right=(cEle.clientWidth-eSize)+'px';eEle.style.bottom='0px';eEle.style.display='';}else if(this.split.layout=='h-view-editor'){var vr=this.split.size;if(this.split.bar.show){vr=(eSize+A5.u.convertUnits(this.split.bar.size,'px'))+'px';sbEle.style.top='0px';sbEle.style.bottom='0px';sbEle.style.left='';sbEle.style.right=this.split.size;sbEle.style.height='';sbEle.style.width=this.split.bar.size;sbEle.style.display='';sbEle.className=this.split.bar.className+' '+this.split.bar.horizontalClassName;}
vEle.style.top='0px';vEle.style.left='0px';vEle.style.right=vr;vEle.style.bottom='0px';vEle.style.display='';eEle.style.top='0px';eEle.style.left=(cEle.clientWidth-eSize)+'px';eEle.style.right='0px';eEle.style.bottom='0px';eEle.style.display='';}}
if(eRefresh){eEle=eEle.firstChild;eEle.style.top=this.editor.margin.top+'px';eEle.style.left=this.editor.margin.left+'px';eEle.style.right=this.editor.margin.right+'px';eEle.style.bottom=this.editor.margin.bottom+'px';this.state.editor.shown=true;this.state.editor.autoScale=false;if(this.editor.scale){A5.u.object.assign(this.editor.scale,{fit:'both',margin:10,lock:false},true);this.state.editor.scale=this.data.zoomToScale({fit:this.editor.scale.fit,width:eEle.offsetWidth,height:eEle.offsetHeight,margin:this.editor.scale.margin});if(this.state.editor.scale==0)this.state.editor.scale=1;if(this.editor.scale.lock)this.state.editor.autoScale=true;}
var ps=this.data.scaleToPageSize(this.state.editor.scale);var w=eEle.offsetWidth;var h=eEle.offsetHeight;var pw=Math.min(ps.width,w);var ph=Math.min(ps.height,h);var maxOffX=0;var maxOffY=0;if(ps.width>w)maxOffX=Math.max((ps.width-w)*ps.dpp,0);if(ps.height>h)maxOffY=Math.max((ps.height-h)*ps.dpp,0);this.state.editor.offset.x=Math.min(this.state.editor.offset.x,maxOffX);this.state.editor.offset.y=Math.min(this.state.editor.offset.y,maxOffY);var epOff=this.editor.page.offset;this._epEle.style.width=(pw)+'px';this._epEle.style.height=(ph)+'px';this._epEle.style.left=(((w-pw)/2)-epOff)+'px';this._epEle.style.top=(((h-ph)/2)-epOff)+'px';this._enpEle.style.left=(0-epOff)+'px';this._enpEle.style.top=(0-epOff)+'px';this._bcEle.width=pw;this._bcEle.height=ph;this._fcEle.width=pw;this._fcEle.height=ph;this.state.editor.width=w;this.state.editor.height=h;if(this.editor.autoAdvance.allow){var f=this.editor.autoAdvance.flow;if(f=='auto'&&this.data.page.lines){if(this.data.page.lines.flow)f=this.data.page.lines.flow;}
if(f!='ttb'&&f!='rtl')f='ltr';this.state.editor.autoAdvance.flow=f;this._aaClear();}
this._repaintEditor(false);}
if(vRefresh){vEle=vEle.firstChild;vEle.style.top=this.view.margin.top+'px';vEle.style.left=this.view.margin.left+'px';vEle.style.right=this.view.margin.right+'px';vEle.style.bottom=this.view.margin.bottom+'px';this.state.view.shown=true;this.state.view.autoScale=false;if(this.view.scale){A5.u.object.assign(this.view.scale,{fit:'both',margin:10,lock:false},true);this.state.view.scale=this.data.zoomToScale({fit:this.view.scale.fit,width:vEle.offsetWidth,height:vEle.offsetHeight,margin:this.view.scale.margin});if(this.state.view.scale==0)this.state.view.scale=.15;if(this.view.scale.lock)this.state.view.autoScale=true;}
var ps=this.data.scaleToPageSize(this.state.view.scale);var w=vEle.offsetWidth;var h=vEle.offsetHeight;var pw=Math.min(ps.width,w);var ph=Math.min(ps.height,h);var maxOffX=0;var maxOffY=0;if(ps.width>w)maxOffX=(ps.width-w)*ps.dpp;if(ps.height>h)maxOffY=(ps.height-h)*ps.dpp;this.state.view.offset.x=Math.min(this.state.view.offset.x,maxOffX);this.state.view.offset.y=Math.min(this.state.view.offset.y,maxOffY);var vpOff=this.view.page.offset;this._vpEle.style.width=(pw)+'px';this._vpEle.style.height=(ph)+'px';this._vpEle.style.left=(((w-pw)/2)-vpOff)+'px';this._vpEle.style.top=(((h-ph)/2)-vpOff)+'px';this._vnpEle.style.left=(0-vpOff)+'px';this._vnpEle.style.top=(0-vpOff)+'px';this._vcEle.width=pw;this._vcEle.height=ph;this.state.view.width=w;this.state.view.height=h;if(this.layout=='view'||(this.layout=='split'&&this.split.layout=='view')){this.state.editor.width=w;this.state.editor.height=h;}
this._repaintView();}
if(typeof this.onLayout=='function')this.onLayout.call(this);},_offset:function(p,x,y){if(p=='editor'){this.state.editor.offset.x=Math.max(Math.min(x,Math.floor(this.data._maxX-(this.state.editor.width/this.state.editor.scale))),0);this.state.editor.offset.y=Math.max(Math.min(y,Math.floor(this.data._maxY-(this.state.editor.height/this.state.editor.scale))),0);}else{this.state.view.offset.x=Math.max(Math.min(x,Math.floor(this.data._maxX-(this.state.view.width/this.state.view.scale))),0);this.state.view.offset.y=Math.max(Math.min(y,Math.floor(this.data._maxY-(this.state.view.height/this.state.view.scale))),0);}},_startPageNav:function(p){if(p=='editor'&&!this._eNav){this._renderNavPage('editor',this.state.editor.scale,-this.state.editor.offset.x,-this.state.editor.offset.y);this._enpEle.style.display='';this._epEle.style.display='none';this._eNav=true;}else if(!this._vNav){this._renderNavPage('view',this.state.view.scale,-this.state.view.offset.x,-this.state.view.offset.y);this._vnpEle.style.display='';this._vpEle.style.display='none';this._vNav=true;}},_endPageNav:function(p){if(p=='editor'&&this._eNav){this._enpEle.style.display='none';this._enpEle.firstChild.style.backgroundImage='';this._epEle.style.display='';this._eNav=false;}else if(this._vNav){this._vnpEle.style.display='none';this._vnpEle.firstChild.style.backgroundImage='';this._vpEle.style.display='';this._vNav=false;}},_setBack:function(){if(this.data.page.background.image){A5.u.object.assign(this.data.page.background.image,{type:'image',data:'',position:'center',size:'contain'},true);if(this.data.page.background.image.data.indexOf('\\')!=-1)this.data.page.background.image.data=this.data.page.background.image.data.split('\\').join('/');this._epbEle.style.backgroundImage='url('+this.data.page.background.image.data+')';this._epbEle.style.backgroundSize=this.data.page.background.image.size;this._epbEle.style.backgroundPosition=this.data.page.background.image.position;this._vpbEle.style.backgroundImage='url('+this.data.page.background.image.data+')';this._vpbEle.style.backgroundSize=this.data.page.background.image.size;this._vpbEle.style.backgroundPosition=this.data.page.background.image.position;}else{this._epbEle.style.backgroundImage='';this._vpbEle.style.backgroundImage='';}
this._epbEle.style.display='block';this._vpbEle.style.display='block';this._epbEle.style.backgroundColor=this.data.page.background.color;this._vpbEle.style.backgroundColor=this.data.page.background.color;},_repaint:function(ac){this._repaintEditor(ac);this._repaintView();},_repaintEditor:function(ac){if(this._eNav){if(this.layout!='view'&&!(this.layout=='split'&&this.split.layout=='view')){this._updateNavPage('editor',this.state.editor.scale,-this.state.editor.offset.x,-this.state.editor.offset.y);}}else{if(this.layout!='view'&&!(this.layout=='split'&&this.split.layout=='view')){if(this.data.page.background.image){this._epbEle.style.left=((0-this.state.editor.offset.x)*this.state.editor.scale)+'px';this._epbEle.style.top=((0-this.state.editor.offset.y)*this.state.editor.scale)+'px';var ps=this.data.scaleToPageSize(this.state.editor.scale);this._epbEle.style.width=ps.width+'px';this._epbEle.style.height=ps.height+'px';if(typeof this.data.page.background.image.size=='object'){this._epbEle.style.backgroundSize=(this.state.editor.scale*this.data.page.background.image.size.width)+'px '+(this.state.editor.scale*this.data.page.background.image.size.height)+'px';}}
if(this.state.editor.autoAdvance.show){if(this.state.editor.autoAdvance.flow=='rtl'){}else if(this.state.editor.autoAdvance.flow=='ttb'){}else{this.data.renderRect({x:0,y:0,w:this.state.editor.autoAdvance.size,h:this.state.editor.height},{editing:true,scale:this.state.editor.scale,offset:{x:-this.state.editor.autoAdvance.offset.x,y:-this.state.editor.autoAdvance.offset.y},background:this.editor.autoAdvance.background},this._bcCtx);this.data.renderRect({x:this.state.editor.autoAdvance.size,y:0,w:this.state.editor.width-this.state.editor.autoAdvance.size,h:this.state.editor.height},{editing:true,scale:this.state.editor.scale,offset:{x:-this.state.editor.offset.x,y:-this.state.editor.offset.y}},this._bcCtx);}}else{this.data.renderRect({x:0,y:0,w:this.state.editor.width,h:this.state.editor.height},{editing:true,scale:this.state.editor.scale,offset:{x:-this.state.editor.offset.x,y:-this.state.editor.offset.y}},this._bcCtx);}}
if(this.autoCommit&&ac)this.commit();}},_repaintView:function(){if(this._vNav){if(this.layout!='editor'&&!(this.layout=='split'&&this.split.layout=='editor')){this._updateNavPage('view',this.state.view.scale,-this.state.view.offset.x,-this.state.view.offset.y);}}else{if(this.layout!='editor'&&!(this.layout=='split'&&this.split.layout=='editor')){var ps=this.data.scaleToPageSize(this.state.view.scale);if(this.data.page.background.image){this._vpbEle.style.left=((0-this.state.view.offset.x)*this.state.view.scale)+'px';this._vpbEle.style.top=((0-this.state.view.offset.y)*this.state.view.scale)+'px';this._vpbEle.style.width=ps.width+'px';this._vpbEle.style.height=ps.height+'px';if(typeof this.data.page.background.image.size=='object'){this._vpbEle.style.backgroundSize=(this.state.view.scale*this.data.page.background.image.size.width)+'px '+(this.state.view.scale*this.data.page.background.image.size.height)+'px';}}
this.data.renderRect({x:0,y:0,w:this.state.view.width,h:this.state.view.height},{editing:true,scale:this.state.view.scale,offset:{x:-this.state.view.offset.x,y:-this.state.view.offset.y}},this._vcCtx);this._vzbEle.style.left=((this.state.editor.offset.x*this.state.view.scale)-(this.state.view.offset.x*this.state.view.scale))+'px';this._vzbEle.style.top=((this.state.editor.offset.y*this.state.view.scale)-(this.state.view.offset.y*this.state.view.scale))+'px';this._vzbEle.style.width=(Math.min(((this.state.editor.width/this.state.editor.scale)*this.state.view.scale),ps.width)-(this.view.page.offset*2))+'px';this._vzbEle.style.height=(Math.min(((this.state.editor.height/this.state.editor.scale)*this.state.view.scale),ps.height)-(this.view.page.offset*2))+'px';}}},_renderNavPage:function(t,s,x,y){var m=this.previewSize;var s2=this.data.zoomToScale({fit:'both',width:m,height:m});var ps=this.data.scaleToPageSize(s2);if(t[0]=='v'){var ele=this._vnpEle;this._vnpScale=this.data._maxX/ps.width;ele.firstChild.innerHTML='<div class="'+this.view.zoomBox.navigateClassName+'" style="position: absolute; top: '+(this.state.editor.offset.y*s2)+'px; left: '+(this.state.editor.offset.x*s2)+'px; width: '+(this.state.editor.width*s2/this.state.editor.scale)+'px; height: '+(this.state.editor.height*s2/this.state.editor.scale)+'px;"></div>'}else{var ele=this._enpEle;this._enpScale=this.data._maxX/ps.width;}
var bgImg=this.data.renderImage('png',ps.width,ps.height);ele.style.width=ps.width+'px';ele.style.height=ps.height+'px';if(this.data.page.background.image){ele.style.backgroundImage='url('+this.data.page.background.image.data+')';if(typeof this.data.page.background.image.size=='object')ele.style.backgroundSize=(s2*this.data.page.background.image.size.width)+'px '+(s2*this.data.page.background.image.size.height)+'px';else ele.style.backgroundSize=this.data.page.background.image.size;ele.style.backgroundPosition=this.data.page.background.image.position;ele.style.backgroundColor=this.data.page.background.color;}else{ele.style.backgroundImage='';ele.style.backgroundColor=this.data.page.background.color;}
ele.firstChild.style.backgroundImage='url('+bgImg+')';ele.firstChild.style.backgroundSize='';this._updateNavPage(t,s,x,y);},_updateNavPage:function(t,s,x,y){var x=x*s;var y=y*s;if(t[0]=='v'){var ele=this._vnpEle;var s2=s*this._vnpScale;var w=this.state.view.width;var h=this.state.view.height;}else{var ele=this._enpEle;var s2=s*this._enpScale;var w=this.state.editor.width;var h=this.state.editor.height;}
var ps=this.data.scaleToPageSize(s);if(ps.width<w)x=(w-ps.width)/2;if(ps.height<h)y=(h-ps.height)/2;ele.style[A5.u.css.properties.transformDOM]='translate('+x+'px,'+y+'px) scale('+s2+','+s2+')';},_aaClear:function(){this.state.editor.autoAdvance.show=false;this.state.editor.autoAdvance.edge=-1;},_render:function(){var cEle=$(this.contId);cEle.style.overflow='hidden';cEle.style.cursor='default';if(cEle.style.position!='absolute')cEle.style.position='relative';this._bindEvents(cEle);var vEle=document.createElement('div');vEle.id=this.contId+'.VIEW';vEle.className=this.view.className;$ss(vEle,'position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; overflow: hidden;');var vcEle=document.createElement('div');vcEle.id=this.contId+'.VIEWCONTENT';$ss(vcEle,'position: absolute; top: '+this.view.margin.top+'px; left: '+this.view.margin.left+'px; right: '+this.view.margin.right+'px;  bottom: '+this.view.margin.bottom+'px; overflow: hidden;');vEle.appendChild(vcEle);this._vpEle=document.createElement('div');this._vpEle.id=this.contId+'.VIEW.PAGE';this._vpEle.className=this.view.page.className;$ss(this._vpEle,'position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow: hidden;');vcEle.appendChild(this._vpEle);this._vnpEle=document.createElement('div');this._vnpEle.id=this.contId+'.VIEW.NAVPAGE';this._vnpEle.className=this.view.page.className;$ss(this._vnpEle,'display: none; position: absolute; top: 0px; left: 0px; overflow: hidden; -ms-transform-origin: left top 0; -webkit-transform-origin: left top 0; transform-origin: left top 0; background-repeat: no-repeat;');this._vnpEle.innerHTML='<div style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px;"></div>';vcEle.appendChild(this._vnpEle);this._vpbEle=document.createElement('div');this._vpbEle.id=this.contId+'.VIEW.BACKGROUND';$ss(this._vpbEle,'display: none; position: absolute; top: 0px; left: 0px; background-repeat: no-repeat;');this._vpEle.appendChild(this._vpbEle);this._vcEle=document.createElement('canvas');this._vcCtx=this._vcEle.getContext("2d");this._vcEle.id=this.contId+'.VIEW.CANVAS';$ss(this._vcEle,'position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; width: 100%; height: 100%;');this._vpEle.appendChild(this._vcEle);cEle.appendChild(vEle);this._vzbEle=document.createElement('div');this._vzbEle.id=this.contId+'.VIEW.ZOOMBOX';this._vzbEle.className=this.view.zoomBox.className+$if(this.view.zoomBox.scale.allow,' '+this.view.zoomBox.scale.className,'');$ss(this._vzbEle,'position: absolute; top: 0px; left: 0px; width: 100px; height: 100px;');this._vpEle.appendChild(this._vzbEle);var voEle=document.createElement('div');voEle.id=this.contId+'.VIEW.OVERLAY';if(this.view.overlay.html.constructor==Function)voEle.innerHTML=this.view.overlay.html.call(this,'view').replace(/\{id\}/gi,this.contId);else voEle.innerHTML=this.view.overlay.html.replace(/\{id\}/gi,this.contId);$ss(voEle,'position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px;');if(!this.view.overlay.show)voEle.style.display='none';vEle.appendChild(voEle);if(this.layout=='detached-view'){var dvEle=$(this.view.detached.id);if(dvEle){dvEle.appendChild(vEle);if(dvEle.style.position!='absolute')dvEle.style.position='relative';this._bindEvents(dvEle);this.state.view.detached=true;}else{this.layout=='split';cEle.appendChild(vEle);}}else cEle.appendChild(vEle);var eEle=document.createElement('div');eEle.id=this.contId+'.EDITOR';eEle.className=this.editor.className;$ss(eEle,'position: absolute; top: 0px; left: 0px; right: 0px;  bottom: 0px; overflow: hidden;');var ecEle=document.createElement('div');ecEle.id=this.contId+'.EDITORCONTENT';$ss(ecEle,'position: absolute; top: '+this.editor.margin.top+'px; left: '+this.editor.margin.left+'px; right: '+this.editor.margin.right+'px;  bottom: '+this.editor.margin.bottom+'px; overflow: hidden;');eEle.appendChild(ecEle);this._epEle=document.createElement('div');this._epEle.id=this.contId+'.EDITOR.PAGE';this._epEle.className=this.editor.page.className;$ss(this._epEle,'position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; overflow: hidden;');ecEle.appendChild(this._epEle);this._enpEle=document.createElement('div');this._enpEle.id=this.contId+'.EDITOR.NAVPAGE';this._enpEle.className=this.editor.page.className;$ss(this._enpEle,'display: none; position: absolute; top: 0px; left: 0px; overflow: hidden; -ms-transform-origin: left top 0; -webkit-transform-origin: left top 0; transform-origin: left top 0; background-repeat: no-repeat;');this._enpEle.innerHTML='<div style="position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px;"></div>';ecEle.appendChild(this._enpEle);this._epbEle=document.createElement('div');this._epbEle.id=this.contId+'.EDITOR.BACKGROUND';$ss(this._epbEle,'display: none; position: absolute; top: 0px; left: 0px; background-repeat: no-repeat;');this._epEle.appendChild(this._epbEle);this._bcEle=document.createElement('canvas');this._bcCtx=this._bcEle.getContext('2d');$ss(this._bcEle,'position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; width: 100%; height: 100%;');this._epEle.appendChild(this._bcEle);this._fcEle=document.createElement('canvas');this._fcCtx=this._fcEle.getContext('2d');$ss(this._fcEle,'position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; width: 100%; height: 100%;');this._epEle.appendChild(this._fcEle);this._eeEle=document.createElement('div');$ss(this._eeEle,'position: absolute; top: 0px; bottom: 0px; width: 50px; height: 50px; display: none;');this._eeEle.className=this.tools.eraser.areaClassName;this._epEle.appendChild(this._eeEle);var eoEle=document.createElement('div');eoEle.id=this.contId+'.EDITOR.OVERLAY';if(this.editor.overlay.html.constructor==Function)eoEle.innerHTML=this.editor.overlay.html.call(this,'editor').replace(/\{id\}/gi,this.contId);else eoEle.innerHTML=this.editor.overlay.html.replace(/\{id\}/gi,this.contId);$ss(eoEle,'position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;');if(!this.editor.overlay.show)eoEle.style.display='none';eEle.appendChild(eoEle);cEle.appendChild(eEle);var sbEle=document.createElement('div');sbEle.id=this.contId+'.SPIT.BAR';$ss(sbEle,'position: absolute; display: none; overflow: hidden;');cEle.appendChild(sbEle);this._sEle=$(this.contId+'.STATUS');this._ppEle=$(this.contId+'.PENPREVIEW');this.setStatus();this.setPen(this.tools.pen.base);this._resize();},_bindEvents:function(cEle){A5.u.drag.add(cEle,'prevent');A5.u.pointerTracker.add(cEle,{ink:this,gOff:function(id,ele){var b=ele.getBoundingClientRect();id.xo=0-b.left;id.yo=0-b.top;},snap:function(xy,id,od,off){var s=null;var p=od.ink.data.pts;var sp=null;var ep=null;var cx=xy.x/od.ink.state.editor.scale+od.ink.state.editor.offset.x;var cy=xy.y/od.ink.state.editor.scale+od.ink.state.editor.offset.y;var snap=od.ink.editor.snap/od.ink.state.editor.scale;for(var i=0;i<od.ink.data.strokes.length+off;i++){s=od.ink.data.strokes[i];sp=p[s.start];ep=p[s.end];if(Math.abs(cx-sp.x)<snap&&Math.abs(cy-sp.y)<snap){xy.x=(sp.x-od.ink.state.editor.offset.x)*od.ink.state.editor.scale;xy.y=(sp.y-od.ink.state.editor.offset.y)*od.ink.state.editor.scale;break;}else if(Math.abs(cx-ep.x)<snap&&Math.abs(cy-ep.y)<snap){xy.x=(ep.x-od.ink.state.editor.offset.x)*od.ink.state.editor.scale;xy.y=(ep.y-od.ink.state.editor.offset.y)*od.ink.state.editor.scale;break;}}},onStart:function(id,od,e){var ele=document.elementFromPoint(id.x,id.y);if(!ele)return false;id.activePart='';id.viewPart='';id.item=false;id.itemArgs='';id.itemArgs='';id.itemObj=false;id.itemEle=false;var item='';while(ele!=this&&ele!=document.body){if(!id.item){item=$ga(ele,'a5-item');if(item!=''&&item!=null){item=item.split(':');id.item=item.shift();id.itemArgs=item.join(':');if(od.ink.items[id.item])id.itemObj=od.ink.items[id.item];id.itemEle=ele;}}
if(ele.id==od.ink.contId+'.VIEW')id.activePart='view';else if(ele.id==od.ink.contId+'.EDITOR')id.activePart='editor';ele=ele.parentNode;}
if(!id.item){if(id.activePart=='editor')od.gOff(id,od.ink._fcEle);else od.gOff(id,od.ink._vcEle);}},onSingleStart:function(id,od,e){if(!id.item){var xy={x:id.x+id.xo,y:id.y+id.yo};if(id.activePart=='editor'){id.preventAdd=true;if(od.ink.editor.snap>0)od.snap(xy,id,od,0);if(od.ink.state.tool.type=='eraser'){od.ink._eeEle.style.left=(xy.x-(od.ink.tools.eraser.size/2))+'px';od.ink._eeEle.style.top=(xy.y-(od.ink.tools.eraser.size/2))+'px';od.ink._eeEle.style.width=od.ink.tools.eraser.size+'px';od.ink._eeEle.style.height=od.ink.tools.eraser.size+'px';od.ink._eeEle.style.display='';id.cOff=((od.ink.data.state.stroke.maxWidth*od.ink.state.editor.scale)/1.5)+2;id.ensf=od.ink.data.erasePoints(xy.x/od.ink.state.editor.scale-od.ink.state.editor.offset.x,xy.y/od.ink.state.editor.scale-od.ink.state.editor.offset.y,od.ink.tools.eraser.size/od.ink.state.editor.scale,0);}else if(od.ink.state.tool.type=='pan'){id._startX=od.ink.state.editor.offset.x;id._startY=od.ink.state.editor.offset.y;od.ink._startPageNav(id.activePart);}else if(od.ink.state.tool.type=='draw-shape'){id.cOff=(od.ink.data.state.stroke.activeWidth*od.ink.state.editor.scale)+20;id.sxy=xy;var pattr=od.ink.data.attrs[od.ink.data._cAttr].vals;var sWidth=pattr.width*od.ink.state.editor.scale;if(sWidth<1)sWidth=1;if(sWidth>500)sWidth=500;od.ink._fcCtx.lineWidth=sWidth;od.ink._fcCtx.strokeStyle=pattr.color;od.ink._fcCtx.lineCap=pattr.lineCap;id._shape=false;id._shapeSet=false;if(od.ink.state.tool.settings){id._shapeSet=od.ink.state.tool.settings;if(id._shapeSet.shape){if(A5.ink.shapes[id._shapeSet.shape]){id._shape=A5.ink.shapes[id._shapeSet.shape];}}}}else{if(od.ink.editor.autoAdvance.allow&&od.ink.state.editor.autoAdvance.show){if(od.ink.state.editor.autoAdvance.flow=='rtl'){}else if(od.ink.state.editor.autoAdvance.flow=='ttb'){}else{if(xy.x<od.ink.state.editor.autoAdvance.size){od.ink.state.editor.autoAdvance.show=false;od.ink._offset('editor',od.ink.state.editor.autoAdvance.offset.x,od.ink.state.editor.autoAdvance.offset.y);od.ink._repaintEditor(false);}}}
od.ink.data.startStroke(xy.x/od.ink.state.editor.scale+od.ink.state.editor.offset.x,xy.y/od.ink.state.editor.scale+od.ink.state.editor.offset.y);id.cOff=(od.ink.data.state.stroke.activeWidth*od.ink.state.editor.scale)+2;id.lxy=xy;od.ink.data.renderRect({x:xy.x-id.cOff,y:xy.y-id.cOff,w:(id.cOff*2),h:(id.cOff*2)},{editing:true,showPageLines:false,scale:od.ink.state.editor.scale,stroke:{first:od.ink.data._cStroke,last:od.ink.data._cStroke},offset:{x:-od.ink.state.editor.offset.x,y:-od.ink.state.editor.offset.y}},od.ink._fcCtx);}}else if(id.activePart=='view'){var zbx=od.ink._vzbEle.offsetLeft;var zby=od.ink._vzbEle.offsetTop;var zbow=od.ink._vzbEle.offsetWidth;var zboh=od.ink._vzbEle.offsetHeight;var zbw=Math.max(42,zbow);var zbh=Math.max(42,zboh);zbxc=zbx-(zbw/2)+(zbow/2);zbyc=zby-(zbh/2)+(zboh/2);var zbs=false;if(od.ink.view.zoomBox.scale.allow){id._startX=od.ink.state.editor.offset.x;id._startY=od.ink.state.editor.offset.y;id._
if(od.ink.view.zoomBox.scale.from=='top-left'){if(xy.x>=zbx-22&&xy.x<=zbx+22&&xy.y>=zby-22&&xy.y<=zby+22){zbs=true;id._startX=od.ink.state.editor.offset.x+(od.ink.state.editor.width/od.ink.state.editor.scale);id._startY=od.ink.state.editor.offset.y+(od.ink.state.editor.height/od.ink.state.editor.scale);}}else if(od.ink.view.zoomBox.scale.from=='top-right'){if(xy.x>=zbx+zbow-22&&xy.x<=zbx+zbow+22&&xy.y>=zby-22&&xy.y<=zby+22){zbs=true;id._startY=od.ink.state.editor.offset.y+(od.ink.state.editor.height/od.ink.state.editor.scale);}}else if(od.ink.view.zoomBox.scale.from=='bottom-left'){if(xy.x>=zbx-22&&xy.x<=zbx+22&&xy.y>=zby+zboh-22&&xy.y<=zby+zboh+22){zbs=true;id._startX=od.ink.state.editor.offset.x+(od.ink.state.editor.width/od.ink.state.editor.scale);}}else{if(xy.x>=zbx+zbow-22&&xy.x<=zbx+zbow+22&&xy.y>=zby+zboh-22&&xy.y<=zby+zboh+22)zbs=true;}}
if(zbs){var noScale=false;if(od.ink.state.editor.autoScale){if(od.ink.editor.scale.lock)noScale=true;}
if(noScale){id.viewPart='view';id._panActive=false;}else{od.ink.editor.scale=false;id.viewPart='zoombox-scale';id._startZBW=zbow;id._startZBH=zboh;od.ink._startPageNav('editor');}}else if(xy.x>=zbxc&&xy.x<=zbxc+zbw&&xy.y>=zbyc&&xy.y<=zbyc+zbh){id.viewPart='zoombox-move';id._startX=od.ink.state.editor.offset.x;id._startY=od.ink.state.editor.offset.y;od.ink._startPageNav('editor');}else{id.viewPart='view';id._panActive=false;}}}else{id.preventAdd=true;id._d={c:false,a:false,t:'',inc:{a:'n',x:0,y:0,n:0,oy:0,ox:0},md:0,sx:0,sy:0,isx:0,isy:0,ss:15,s:20};if(id.item=='*navigate'&&id.itemArgs=='new-line'){id._d.c=true;id._d.t='pan-line';od.ink.setStatus('item:navigate:new-line');}else if(id.item=='*navigate'||(id.item=='*pan'&&id.itemArgs=='immediate')){id._d.c=true;id._d.t='pan';od.ink.setStatus('item:navigate');}else if(id.item=='*undo'||id.item=='*redo'){id._d.c=true;id._d.t=id.item.substr(1);od.ink.setStatus('item:'+id._d.t);}else if(id.item=='*eraser'){id._d.c=true;id._d.t='eraser';od.ink.setStatus('item:eraser');}}},onDblStart:function(id,od,e){if(!id.item){id.preventAdd=true;if(!id._panActive)od.ink._startPageNav(id.activePart);if(id.activePart=='editor'){id._startScale=od.ink.state.editor.scale;id._startX=od.ink.state.editor.offset.x;id._startY=od.ink.state.editor.offset.y;}else if(id.activePart=='view'){id._startScale=od.ink.state.view.scale;id._startX=od.ink.state.view.offset.x;id._startY=od.ink.state.view.offset.y;}}},onDblEnd:function(id,od,e){if(!id.item){id.preventAdd=false;od.ink._endPageNav(id.activePart);od.ink.refresh();}},onChange:function(id,od,e){if(!id.item){if(id.type=='single'){if(id.activePart=='editor'){var xy={x:id.x+id.xo,y:id.y+id.yo};if(od.ink.state.tool.type=='eraser'){od.ink._eeEle.style.left=(xy.x-(od.ink.tools.eraser.size/2))+'px';od.ink._eeEle.style.top=(xy.y-(od.ink.tools.eraser.size/2))+'px';id.ensf=od.ink.data.erasePoints(xy.x/od.ink.state.editor.scale+od.ink.state.editor.offset.x,xy.y/od.ink.state.editor.scale+od.ink.state.editor.offset.y,od.ink.tools.eraser.size/od.ink.state.editor.scale,id.ensf);od.ink.data.renderRect({x:xy.x-(od.ink.tools.eraser.size/2)-id.cOff,y:xy.y-(od.ink.tools.eraser.size/2)-id.cOff,w:od.ink.tools.eraser.size+(id.cOff*2),h:od.ink.tools.eraser.size+(id.cOff*2)},{editing:true,scale:od.ink.state.editor.scale,offset:{x:-od.ink.state.editor.offset.x,y:-od.ink.state.editor.offset.y}},od.ink._bcCtx);}else if(od.ink.state.tool.type=='pan'){od.ink._offset('editor',id._startX-(id.delta.x/od.ink.state.editor.scale),id._startY-(id.delta.y/od.ink.state.editor.scale));od.ink._repaintEditor(false);od.ink._vzbEle.style.left=((od.ink.state.editor.offset.x*od.ink.state.view.scale)-(od.ink.state.view.offset.x*od.ink.state.view.scale))+'px';od.ink._vzbEle.style.top=((od.ink.state.editor.offset.y*od.ink.state.view.scale)-(od.ink.state.view.offset.y*od.ink.state.view.scale))+'px';}else if(od.ink.state.tool.type=='draw-shape'){od.ink._fcCtx.beginPath();od.ink._fcCtx.clearRect(0,0,od.ink._fcEle.width,od.ink._fcEle.height);if(id._shape){id._shape.draw({startX:id.sxy.x,startY:id.sxy.y,endX:xy.x,endY:xy.y},id._shapeSet,od.ink.data,od.ink._fcCtx);}}else{if(Math.abs(id.lxy.x-xy.x)>od.ink.tools.pen.smooth||Math.abs(id.lxy.y-xy.y)>od.ink.tools.pen.smooth){id.lxy=xy;od.ink.data.addToStroke(xy.x/od.ink.state.editor.scale+od.ink.state.editor.offset.x,xy.y/od.ink.state.editor.scale+od.ink.state.editor.offset.y);od.ink.data.renderRect({x:id.start.x+id.xo+id.delta.min.x-id.cOff,y:id.start.y+id.yo+id.delta.min.y-id.cOff,w:id.delta.max.x-id.delta.min.x+(id.cOff*2),h:id.delta.max.y-id.delta.min.y+(id.cOff*2)},{editing:true,showPageLines:false,scale:od.ink.state.editor.scale,stroke:{first:od.ink.data._cStroke,last:od.ink.data._cStroke},offset:{x:-od.ink.state.editor.offset.x,y:-od.ink.state.editor.offset.y}},od.ink._fcCtx);}}}else if(id.activePart=='view'){if(id.viewPart=='zoombox-scale'){if(od.ink.view.zoomBox.scale.from=='top-left'){od.ink.state.editor.scale=Math.max(Math.min(od.ink.state.editor.width/(((id._startZBW-id.delta.x)/od.ink.state.view.scale)),od.ink.state.editor.height/(((id._startZBH-id.delta.y)/od.ink.state.view.scale))),.05);od.ink._offset('editor',id._startX-(od.ink.state.editor.width/od.ink.state.editor.scale),id._startY-(od.ink.state.editor.height/od.ink.state.editor.scale));}else if(od.ink.view.zoomBox.scale.from=='top-right'){od.ink.state.editor.scale=Math.max(Math.min(od.ink.state.editor.width/(((id._startZBW+id.delta.x)/od.ink.state.view.scale)),od.ink.state.editor.height/(((id._startZBH-id.delta.y)/od.ink.state.view.scale))),.05);od.ink._offset('editor',id._startX,id._startY-(od.ink.state.editor.height/od.ink.state.editor.scale));}else if(od.ink.view.zoomBox.scale.from=='bottom-left'){od.ink.state.editor.scale=Math.max(Math.min(od.ink.state.editor.width/(((id._startZBW-id.delta.x)/od.ink.state.view.scale)),od.ink.state.editor.height/(((id._startZBH+id.delta.y)/od.ink.state.view.scale))),.05);od.ink._offset('editor',id._startX-(od.ink.state.editor.width/od.ink.state.editor.scale),id._startY);}else{od.ink.state.editor.scale=Math.max(Math.min(od.ink.state.editor.width/(((id._startZBW+id.delta.x)/od.ink.state.view.scale)),od.ink.state.editor.height/(((id._startZBH+id.delta.y)/od.ink.state.view.scale))),.05);}
od.ink._vzbEle.style.left=((od.ink.state.editor.offset.x*od.ink.state.view.scale)-(od.ink.state.view.offset.x*od.ink.state.view.scale))+'px';od.ink._vzbEle.style.top=((od.ink.state.editor.offset.y*od.ink.state.view.scale)-(od.ink.state.view.offset.y*od.ink.state.view.scale))+'px';od.ink._vzbEle.style.width=(((od.ink.state.editor.width/od.ink.state.editor.scale)*od.ink.state.view.scale)-1)+'px';od.ink._vzbEle.style.height=(((od.ink.state.editor.height/od.ink.state.editor.scale)*od.ink.state.view.scale)-2)+'px';od.ink._repaintEditor(false);}else if(id.viewPart=='zoombox-move'){od.ink._offset('editor',((id._startX*od.ink.state.view.scale)+id.delta.x)/od.ink.state.view.scale,((id._startY*od.ink.state.view.scale)+id.delta.y)/od.ink.state.view.scale);od.ink._vzbEle.style.left=((od.ink.state.editor.offset.x*od.ink.state.view.scale)-(od.ink.state.view.offset.x*od.ink.state.view.scale))+'px';od.ink._vzbEle.style.top=((od.ink.state.editor.offset.y*od.ink.state.view.scale)-(od.ink.state.view.offset.y*od.ink.state.view.scale))+'px';od.ink._repaintEditor(false);}else if(id.viewPart=='view'){if(id._panActive){od.ink._offset('view',id._startX-(id.delta.x/od.ink.state.view.scale),id._startY-(id.delta.y/od.ink.state.view.scale));od.ink._repaintView();}else if(Math.abs(id.delta.x)>5||Math.abs(id.delta.y)>5){id._panActive=true;od.ink._startPageNav(id.activePart);id._startX=od.ink.state.view.offset.x+(id.delta.x/od.ink.state.view.scale);id._startY=od.ink.state.view.offset.y+(id.delta.x/od.ink.state.view.scale);}}}}else if(id.type=='double'){if(id.activePart=='editor'){if(!od.ink.state.editor.autoScale){od.ink.editor.scale=false;od.ink.state.editor.scale=Math.max((id._startScale*id.scale.value),.05);}
od.ink._offset('editor',id._startX-(id.delta.x/od.ink.state.editor.scale),id._startY-(id.delta.y/od.ink.state.editor.scale));od.ink._repaintEditor(false);}else if(id.activePart=='view'){if(!od.ink.state.view.autoScale){od.ink.view.scale=false;od.ink.state.view.scale=Math.max((id._startScale*id.scale.value),.05);}
od.ink._offset('view',id._startX-(id.delta.x/od.ink.state.view.scale),id._startY-(id.delta.y/od.ink.state.view.scale));od.ink._repaintView();}}}else{if(id._d.c){if(id._d.a){if(id._d.t=='pan'){if(id.activePart=='editor'){od.ink._offset('editor',id._d.isx-(id.delta.x/od.ink.state.editor.scale),id._d.isy-(id.delta.y/od.ink.state.editor.scale));od.ink._repaintEditor(false);od.ink._vzbEle.style.left=((od.ink.state.editor.offset.x*od.ink.state.view.scale)-(od.ink.state.view.offset.x*od.ink.state.view.scale))+'px';od.ink._vzbEle.style.top=((od.ink.state.editor.offset.y*od.ink.state.view.scale)-(od.ink.state.view.offset.y*od.ink.state.view.scale))+'px';}else if(id.activePart=='view'){od.ink._offset('view',id._d.isx-(id.delta.x/od.ink.state.view.scale),id._d.isy-(id.delta.y/od.ink.state.view.scale));od.ink._repaintView();}}else if(id._d.t=='eraser'){if(Math.abs(id.delta.x-id._d.sx)>Math.abs(id.delta.y-id._d.sy))id._d.md=id.delta.x-id._d.sx;else id._d.md=id.delta.y-id._d.sy;var es=Math.max(Math.min(id._d.md+od.ink.tools.eraser.size,od.ink.tools.eraser.max),od.ink.tools.eraser.min);od.ink._eeEle.style.left=((od.ink.state.editor.width/2)-(es/2))+'px';od.ink._eeEle.style.top=((od.ink.state.editor.height/2)-(es/2))+'px';od.ink._eeEle.style.width=es+'px';od.ink._eeEle.style.height=es+'px';od.ink._eeEle.style.display='';}else{if(Math.abs(id.delta.x-id._d.inc.ox)>=id._d.s){if(id.delta.x<id._d.inc.ox)id._d.inc.x=-1;else id._d.inc.x=1;id._d.inc.ox=id.delta.x;id._d.inc.a='x';}else if(Math.abs(id.delta.y-id._d.inc.oy)>=id._d.s){if(id.delta.y<id._d.inc.oy)id._d.inc.y=-1;else id._d.inc.y=1;id._d.inc.oy=id.delta.y;id._d.inc.a='y';}
if(id._d.t=='pan-line'){if(id._d.inc[id._d.inc.a]==-1)od.ink.navigate(id.activePart,'prev-line');else if(id._d.inc[id._d.inc.a]==1)od.ink.navigate(id.activePart,'next-line');}else if(id._d.t=='undo'||id._d.t=='redo'){if(id._d.inc[id._d.inc.a]==-1)od.ink.undo();else if(id._d.inc[id._d.inc.a]==1)od.ink.redo();}
id._d.inc.a='n';}}else if(Math.abs(id.delta.x)>id._d.ss||Math.abs(id.delta.y)>id._d.ss){id._d.a=true;id._d.sx=id.delta.x;id._d.sy=id.delta.y;id._d.isx=od.ink.state[id.activePart].offset.x+(id.delta.x/od.ink.state[id.activePart].scale);id._d.isy=od.ink.state[id.activePart].offset.y+(id.delta.y/od.ink.state[id.activePart].scale);if(id._d.t=='pan')od.ink._startPageNav(id.activePart);}}}},onEnd:function(id,od,e){od.ink._endPageNav('editor');od.ink._endPageNav('view');od.ink.setStatus();if(!id.item){var xy={x:id.x+id.xo,y:id.y+id.yo};if(id.activePart=='editor'){if(od.ink.editor.snap>0)od.snap(xy,id,od,-1);if(od.ink.state.tool.type=='eraser'){od.ink._repaint(true);od.ink._eeEle.style.display='none';od.ink._change({type:'edit'});}else if(od.ink.state.tool.type=='pan'){od.ink._repaint(false);}else if(od.ink.state.tool.type=='draw-shape'){if(id._shape){id._shape.commit({startX:id.sxy.x/od.ink.state.editor.scale+od.ink.state.editor.offset.x,startY:id.sxy.y/od.ink.state.editor.scale+od.ink.state.editor.offset.y,endX:xy.x/od.ink.state.editor.scale+od.ink.state.editor.offset.x,endY:xy.y/od.ink.state.editor.scale+od.ink.state.editor.offset.y},id._shapeSet,od.ink.data);}
od.ink._fcCtx.beginPath();od.ink._fcCtx.clearRect(0,0,od.ink._fcEle.width,od.ink._fcEle.height);od.ink._fcCtx.stroke();od.ink._repaint(true);od.ink._change({type:'edit'});}else{od.ink._fcCtx.beginPath();od.ink._fcCtx.clearRect(0,0,od.ink._fcEle.width,od.ink._fcEle.height);od.ink._fcCtx.stroke();od.ink.data.endStroke(xy.x/od.ink.state.editor.scale+od.ink.state.editor.offset.x,xy.y/od.ink.state.editor.scale+od.ink.state.editor.offset.y);if(od.ink.editor.autoAdvance.allow){if(od.ink.state.editor.autoAdvance.flow=='rtl'){}else if(od.ink.state.editor.autoAdvance.flow=='ttb'){}else{var mx=(id.original.x+id.delta.max.x+id.xo);var sx=Math.max(od.ink.state.editor.width/2,od.ink.state.editor.autoAdvance.size);if(mx>sx){var xOff=(mx/od.ink.state.editor.scale)+od.ink.state.editor.offset.x-((od.ink.editor.autoAdvance.size/od.ink.state.editor.scale)/2);var mxOff=od.ink.data._maxX-(od.ink.state.editor.width/od.ink.state.editor.scale);if(xOff>od.ink.state.editor.autoAdvance.edge){od.ink.state.editor.autoAdvance.show=true;od.ink.state.editor.autoAdvance.edge=xOff;od.ink.state.editor.autoAdvance.offset.x=Math.min(xOff,mxOff);od.ink.state.editor.autoAdvance.offset.y=od.ink.state.editor.offset.y;od.ink.state.editor.autoAdvance.size=od.ink.editor.autoAdvance.size+((xOff-od.ink.state.editor.autoAdvance.offset.x)/od.ink.state.editor.scale);if(od.ink.state.editor.autoAdvance.size>=od.ink.state.editor.width-(od.ink.editor.autoAdvance.size/2)||od.ink.state.editor.autoAdvance.offset.x==od.ink.state.editor.offset.x){var nx=0;var ny=od.ink.state.editor.offset.y+((od.ink.state.editor.height*.5)/od.ink.state.editor.scale);if(od.ink.data.page.lines){var pl=A5.ink._.pageLines[od.ink.data.page.lines.type];if(pl){if(pl.navigate){var res=pl.navigate('new-line',{x:od.ink.state.editor.offset.x,y:od.ink.state.editor.offset.y,width:od.ink.data._maxX,height:od.ink.data._maxY,clip:{width:od.ink.state.editor.width/od.ink.state.editor.scale,height:od.ink.state.editor.height/od.ink.state.editor.scale}},od.ink.data.page.lines);if(typeof res=='object'){nx=res.x;ny=res.y;}}}}
od.ink.state.editor.autoAdvance.edge=nx;od.ink.state.editor.autoAdvance.offset.x=nx;od.ink.state.editor.autoAdvance.offset.y=Math.max(Math.min(ny,Math.floor(od.ink.data._maxY-(od.ink.state.editor.height/od.ink.state.editor.scale))),0);od.ink.state.editor.autoAdvance.size=od.ink.editor.autoAdvance.size;}}}}}
od.ink._repaint(true);od.ink._change({type:'edit'});}
if(!od.ink.state.tool.sticky)od.ink.setTool('pen');}else if(id.activePart=='view'){if(id.viewPart=='zoombox-scale'||id.viewPart=='zoombox-move'){od.ink._resize();}else if(id.viewPart=='view'){if(id.captured==1&&id.delta.max.x<15&&id.delta.max.y<15&&id.delta.min.x>-15&&id.delta.min.y>-15){od.ink._offset('editor',od.ink.state.view.offset.x+(xy.x/od.ink.state.view.scale)-(od.ink.state.editor.width/2),od.ink.state.view.offset.y+(xy.y/od.ink.state.view.scale)-(od.ink.state.editor.height/2));}
od.ink._repaint(false);}}}else{if(id._d.a){if(id._d.t=='eraser'){od.ink.tools.eraser.size=Math.max(Math.min(id._d.md+od.ink.tools.eraser.size,od.ink.tools.eraser.max),od.ink.tools.eraser.min);od.ink._eeEle.style.display='none';od.ink.setTool('eraser',id.itemArgs=='sticky');}
od.ink._repaint(false);}else{var ele=document.elementFromPoint(id.x,id.y);var isClick=false;if(ele){while(ele!=this&&ele!=document.body){if(ele==id.itemEle){isClick=true;break;}
ele=ele.parentNode;}}
if(isClick&&A5.u.drag._sDif<$e.abstractEvents.click.scrollMax){if(id.itemObj){if(id.itemObj.onClick)id.itemObj.onClick.call(od.ink,id.itemEle,id.itemArgs,id.activePart,id);}else{var sticky=id.itemArgs=='sticky';if(id.item=='*undo')od.ink.undo()
else if(id.item=='*redo')od.ink.redo()
else if(id.item=='*eraser'){if(od.ink.state.tool.type!='eraser')od.ink.setTool('eraser',sticky);else od.ink.setTool('pen');}else if(id.item=='*pan'&&id.itemArgs!='immediate'){if(od.ink.state.tool.type!='pan')od.ink.setTool('pan',sticky);else od.ink.setTool('pen');}else if(id.item=='*navigate')od.ink.navigate(id.activePart,id.itemArgs);}}}
id.itemObj=false;id.itemEle=false;}}});$e.add(cEle,'wheel',function(e,ci){var ele=document.elementFromPoint(e.clientX,e.clientY);if(!ele)return false;$e.stopEvent(e);activePart='';while(ele!=this&&ele!=document.body){if(ele.id==ci.contId+'.VIEW'){activePart='view';break;}else if(ele.id==ci.contId+'.EDITOR'){activePart='editor';break;}
ele=ele.parentNode;}
if(activePart=='view'){if(e.ctrlKey){if(ci.state.view.autoScale){if(ci.view.scale.lock)return false;}
ci.view.scale=false;var a=ci.state.view.scale/4;if(e.deltaY>0&&ci.state.view.scale>.05)ci.state.view.scale-=a;else if(e.deltaY<0)ci.state.view.scale+=a;ci._resize();}else if(e.shiftKey){if(e.deltaX>0||e.deltaY>0)ci.navigate('view','nudge-right');else if(e.deltaX<0||e.deltaY<0)ci.navigate('view','nudge-left');}else{if(e.deltaY>0)ci.navigate('view','nudge-down');else if(e.deltaY<0)ci.navigate('view','nudge-up');}}else if(activePart=='editor'){if(e.ctrlKey){if(ci.state.editor.autoScale){if(ci.editor.scale.lock)return false;}
ci.editor.scale=false;var a=ci.state.editor.scale/4;if(e.deltaY>0&&ci.state.editor.scale>.05)ci.state.editor.scale-=a;else if(e.deltaY<0)ci.state.editor.scale+=a;ci._resize();}else if(e.shiftKey){if(e.deltaX>0||e.deltaY>0)ci.navigate('editor','nudge-right');else if(e.deltaX<0||e.deltaY<0)ci.navigate('editor','nudge-left');}else{if(e.deltaY>0)ci.navigate('editor','nudge-down');else if(e.deltaY<0)ci.navigate('editor','nudge-up');}}},this,false,'INK.'+this.contId+'.EVENTS');}});};if(typeof A5.pickers == 'undefined'){	
/*
Copyright (c) 2001, 2024 Alpha Software Corporation
All Rights Reserved.
This JavaScript library is licensed exclusively for use with Alpha Anywhere, Alpha Five,
Alpha Five Application Server, Alpha Anywhere Application Server,
Alpha Five Run Engine, and Alpha Anywhere Run Engine. It is specifically
not licensed for use on a server that does not have installed on it a
licensed copy of the Alpha Five Application Server or the Alpha Anywhere Application Server.
*/
A5.pickers={_:{pi:0,pci:{}},u:{get:function(id){var p=A5.pickers._.pci[id];if(!p)p=null;return p;}},guides:{'list':{display:{mode:'flex',width:'stretch',height:'max'},settings:{height:'300px',multiple:false,separator:', ',selectionMode:'default',allowNullSelection:true,allowNullDeselection:true,filter:{allow:false,edit:{className:''}},data:{filter:false,order:false,wait:{message:'Loading...'},empty:{message:'No Results...'}},item:{className:'',style:''},onSelect:false},autoFilter:function(d){if(!this._.re)return true;if(typeof d=='object'&&d!=null){if(typeof d.type=='string'&&d.type=='title')return false;if(typeof d.value=='string'&&d.value.search(this._.re)!=-1)return true;if(typeof d.html=='string'&&d.html.search(this._.re)!=-1)return true;}else if(typeof d=='string'&&d.search(this._.re)!=-1)return true;return false;},processData:function(d,s,c){if(!d||d.constructor!=Array)return[];var f=s.data.filter;var changed=false;c._.re=false;if(f=='contains'||f=='starts-with'){var v=c.state.value.current;if(v!=''&&v!=null){var re='';if(f=='contains')re=new RegExp(String(v).escapeRegExp(),'i');else if(f=='starts-with')re=new RegExp('^'+String(v).escapeRegExp(),'i');f=this.autoFilter;c._.re=re;}else f=false;}
if(typeof f=='function'){var td=[];for(var i=0;i<d.length;i++){if(f.call(c,d[i]))td.push(d[i]);}
if(!c._.re)changed=true;else{if(td.length!=1)changed=true;else if(typeof td[0]=='string'&&td[0]!=v)changed=true;else if(typeof td[0]=='object'&&td[0].value!=v)changed=true;}
if(changed)d=td;}
if(s.data.order){A5.u.array.order(d,s.data.order,this);changed=true;}
if(changed){var td=[];var di=null;for(var i=0;i<d.length;i++){di=d[i];if(typeof di=='string'||(typeof di=='object'&&!(typeof di.type=='string'&&di.type=='title')))td.push(di);}
d=td;}
return d;},init:function(ele,inst){var tl={};A5.themes.assign(tl,this.theme,'listbox');var id=ele.id+'.';inst.ctrl=new A5.ViewBox(ele.id,[],{pid:inst.id,allowAnyValue:true,allowNullSelection:true,allowNullDeselection:true,onChange:function(){var p=A5.pickers.u.get(this.pid);var c=[];var dj=null;var vi=null;for(var i=0;i<this.value.length;i++){vi=this.value[i];for(var j=0;j<this.data.length;j++){dj=this.data[j];if(typeof dj=='object'&&dj!=null){if(typeof dj.type=='undefined'||dj.type!='title'){if(dj.value==vi)c.push(dj);}}else if(vi==dj)c.push(dj);}}
p.state.value.context=c;},items:{'list-item':{selectable:true,selectedClassName:tl.item.selectedClassName,onClick:function(v,ia,ele,e){A5.pickers.u.get(this.pid).commit(!this.multiple);}}},wrapper:{allow:true,html:'<div class="'+tl.header.className+'" style="display: none;">Header</div><div a5-layout-target="true" style="flex: 1 1;"></div>'},layout:'list',layouts:{'list':{type:'template',template:['{*if [root].length == 0}<div id="'+id+'EMPTY" class="'+tl.item.className+'"">{[scope].emptyMsg}</div>{*endif}','{*root}','{*if typeof [value] != \'object\'}','<div id="'+id+'{[count]}" class="'+tl.item.className+' {[scope].getItemClassName([value])}" style="{[scope].getItemStyle([value])}" onmouseover="A5.u.element.cls(this,\'+='+tl.item.hoverClassName+'\')" onmouseout="A5.u.element.cls(this,\'-='+tl.item.hoverClassName+'\')" a5-item="list-item:{[count]}" a5-value="{[value]}">{[value]}</div>','{*elseif <defined<type>> && type == \'title\'}','<div class="'+tl.item.titleClassName+'">{html}</div>','{*else}','<div id="'+id+'{[count]}" class="'+tl.item.className+' {[scope].getItemClassName([value])}" style="{[scope].getItemStyle([value])}" onmouseover="A5.u.element.cls(this,\'+='+tl.item.hoverClassName+'\')" onmouseout="A5.u.element.cls(this,\'-='+tl.item.hoverClassName+'\')" a5-item="list-item:{[count]}" a5-value="{value}">{*if <defined<[value].html>>}{html}{*else}{text:escape}{*endif}</div>','{*endif}','{/*root}'].join('')},'wait':{type:'template',template:'<div id="'+id+'WAIT" class="'+tl.item.className+'"">{[scope].waitMsg}</div>{*root}{/*root}'}},getItemClassName:function(d){var v=this._itemCls;var t=typeof v;if(t=='function')return v(d);else if(t=='string')return v;return'';},getItemStyle:function(d){var v=this._itemStyle;var t=typeof v;if(t=='function')return v(d);else if(t=='string')return v;return'';}});ele.style.flexDirection='column';A5.u.drag.add(ele,'scroll',{axis:'y'});},show:function(inst,st){var s=st.picker.settings;inst.element.style.maxHeight=s.height;inst.ctrl.multiple=s.multiple;inst.ctrl.selectionMode=s.selectionMode;inst.ctrl.allowNullSelection=s.allowNullSelection;inst.ctrl.allowNullDeselection=s.allowNullDeselection;inst.ctrl._itemCls=s.item.className;inst.ctrl._itemStyle=s.item.style;var d=null;if(st.data&&st.data.constructor==Array)d=st.data;else{if(inst.ctrl.layout!='wait')inst.ctrl.layout='wait';inst.ctrl.waitMsg=s.data.wait.message;inst.ctrl.refresh();return false;}
inst.ctrl.emptyMsg=s.data.empty.message;if(inst.ctrl.layout=='wait')inst.ctrl.layout='list';d=inst.def.processData(d,s,this);inst.ctrl.populate(d);var vals=st.value.current;if(s.multiple&&vals.constructor!=Array){if(s.separator)vals=vals.split(s.separator);else vals=[vals];if(vals.join('')=='')vals=[];}
inst.ctrl.setValue(vals);},update:function(type,inst,st){var s=st.picker.settings;var ud=type.indexOf('data')!=-1;if(s.data.filter||s.data.order||ud){if(ud)inst.ctrl.layout=st.data?'list':'wait';var d=inst.def.processData(st.data,s,this);inst.ctrl.populate(d);var vals=st.value.current;if(s.multiple&&vals.constructor!=Array){if(s.separator)vals=vals.split(s.separator);else vals=[vals];}
inst.ctrl.setValue(vals);}},action:function(name,args,inst,st,sameInst,samePicker){if(sameInst&&(name=='first'||name=='last'||name=='prev'||name=='previous'||name=='next')){if(inst.ctrl.selectionInfo.active.has)inst.ctrl.navigate(name);else inst.ctrl.navigate('first');}},commit:function(inst,st){var s=st.picker.settings;if(s.multiple){var v=A5.u.array.unique(inst.ctrl.value);if(s.separator)return v.join(s.separator);else return v;}else return inst.ctrl.value.length>0?inst.ctrl.value[0]:null;}},'date-time':{display:{mode:'',width:'',height:'max'},settings:{format:A5.d.date.format},init:function(ele,inst){ele.style.textAlign='center';ele.innerHTML='<div id="'+ele.id+'.C" style="display: inline-block;"></div>'
inst.ctrl=new A5.DateTimePicker(ele.children[0].id,{theme:this.theme,pid:inst.id,datePicker:{navigator:{header:{todayButton:{show:true}}}},combinedContainer:{buttons:{show:'auto'}},onCommit:function(){A5.pickers.u.get(this.pid).commit();},onCancel:function(){A5.pickers.u.get(this.pid).cancel();}});},show:function(inst,st){var s=st.picker.settings;inst.ctrl.setFormat(s.format);var v=this.state.value.current||new Date();inst.ctrl.setValue(v);},update:function(type,inst,st){var v=this.state.value.current||new Date();inst.ctrl.setValue(v);},action:function(name,args,inst,st,sameInst,samePicker){if(sameInst){var dpp=inst.ctrl._dp._curPane[0];if(name[0]=='p'){if(dpp=='y')inst.ctrl._dp.prevDecade();else if(dpp=='m')inst.ctrl._dp.prevYear();else inst.ctrl._dp.prevMonth();}else if(name[0]=='n'){if(dpp=='y')inst.ctrl._dp.nextDecade();else if(dpp=='m')inst.ctrl._dp.nextYear();else inst.ctrl._dp.nextMonth();}}},commit:function(inst,st){return inst.ctrl.date.toFormat(st.picker.settings.format);}},'date':{display:{mode:'',width:'',height:'max'},settings:{format:A5.d.date.format},init:function(ele,inst){ele.style.textAlign='center';ele.innerHTML='<div id="'+ele.id+'.C" style="display: inline-block;"></div>';inst.ctrl=new A5.DatePicker(ele.children[0].id,{theme:this.theme,pid:inst.id,navigator:{header:{todayButton:{show:true}}},onClick:function(){A5.pickers.u.get(this.pid).commit();}});},show:function(inst,st){var s=st.picker.settings;inst.ctrl.setFormat(s.format);var v=this.state.value.current||new Date();inst.ctrl.setValue(v);},update:function(type,inst,st){var v=this.state.value.current||new Date();inst.ctrl.setValue(v);},action:function(name,args,inst,st,sameInst,samePicker){if(sameInst){var dpp=inst.ctrl._curPane[0];if(name[0]=='p'){if(dpp=='y')inst.ctrl.prevDecade();else if(dpp=='m')inst.ctrl.prevYear();else inst.ctrl.prevMonth();}else if(name[0]=='n'){if(dpp=='y')inst.ctrl.nextDecade();else if(dpp=='m')inst.ctrl.nextYear();else inst.ctrl.nextMonth();}}},commit:function(inst,st){return inst.ctrl.date.toFormat(st.picker.settings.format);}}}}
A5.Picker=Class.create({initialize:function(s){A5.u.object.assign(this,{theme:'',layout:'',layouts:{},onBeforeShow:false,onShow:false,onBeforeCommit:false,onCommit:false,onBeforeCancel:false,onCancel:false,onBeforeHide:false,onHide:false,onBeforeDestroy:false,onDestroy:false,state:{}});A5.u.object.assign(this,s);this._={id:'A5PICKER.'+A5.pickers._.pi,update:function(p,st,val){var stb=st.binding;if(stb.type=='element'){var be=$(stb.id);val=$gvs(be);var tn=be.tagName.toLowerCase()
if(this.state=='show'&&(tn=='input'||tn=='textarea')){be.focus();be.select();}}else if(stb.type=='path')val=A5.u.object.get(st.context,stb.path);if(this.process)val=this.process.call(p,val,st.data,st.context,st.scope);if(this.state=='show')st.value.initial=val;st.value.current=val;},hide:function(p){if(p.state.shown){if(typeof p.onBeforeHide=='function'){var res=p.onBeforeHide();if(typeof res=='boolean'&&!res)return false;}
var st=p.state;st.shown=false;var stb=st.binding;var def=p._.picker.def;if(typeof def.hide=='function')def.hide.call(p,p._.picker,st);p._.trans.hide();if(typeof p.onHide=='function')p.onHide();}},state:'',pickers:{},dState:{shown:false,instanceId:'',picker:{type:'',settings:null},target:{type:'',id:'',data:null,position:null},binding:{type:'',path:'',id:''},value:{initial:'',current:'',context:null},data:null,context:null,scope:null}}
A5.u.object.assign(this.state,this._.dState);this._.trans=new A5.Transient({theme:this.theme,pickerId:this._.id,layout:this.layout,layouts:this.layouts,onShown:function(){var pObj=A5.pickers._.pci[this.pickerId];var def=pObj._.picker.def;if(typeof def.shown=='function')def.shown.call(pObj,pObj._.picker,pObj.state);},onHidden:function(){var pObj=A5.pickers._.pci[this.pickerId];pObj.state.shown=false;pObj._.state='hidden';var def=pObj._.picker.def;if(typeof def.hidden=='function')def.hidden.call(pObj,pObj._.picker,pObj.state);pObj._.bs=null;pObj._.picker=null;A5.u.object.assign(pObj.state,pObj._.dState);}});this._.trans._.ele.style.zIndex='500';A5.pickers._.pi++;A5.pickers._.pci[this._.id]=this;},destroy:function(){if(typeof this.onBeforeDestroy=='function')this.onBeforeDestroy.call(this);var po=null;for(var pn in this._.pickers){po=this._.pickers[pn];if(typeof po.destroy=='function')po.destroy();}
this._.trans.destroy();if(typeof this.onDestroy=='function')this.onDestroy.call(this);},setLayout:function(l){this._.trans.setLayout(l);},show:function(pt,t,b,d,ps,c,sc){var zIndx=500;if(typeof A5.Window!='undefined')zIndx=Math.max(zIndx,A5.Window.prototype._maxDlgZIndx[0]);this._.trans._.ele.style.zIndex=''+(zIndx+1);var def=A5.pickers.guides[pt];if(!def)return false;var s=null;if(!ps)var ps=def.settings;else A5.u.object.assign(ps,def.settings,true);if(!this._.pickers[pt]){var ele=document.createElement('div');ele.id=this._.id+'.'+pt;ele.style.display='none';this._.pickers[pt]={element:ele,def:def,id:this._.id};s=this._.pickers[pt];var cEle=this._.trans.getElement('content');cEle.appendChild(ele);def.init.call(this,ele,s);}else s=this._.pickers[pt];if(s){if(typeof this.onBeforeShow=='function'){var res=this.onBeforeShow();if(typeof res=='boolean'&&!res)return false;}
this._.state='show';var cEle=this._.trans.getElement('content');for(var i=0;i<cEle.children.length;i++)cEle.children[i].style.display='none';var st=this.state;st.picker.settings=ps;if(typeof d=='string'){if(this.data[d])d=this.data[d];else if(d[0]=='*'){d=d.substr(1);var dlc=d.toLowerCase();var td=null;var mIndx=['month','month:0','month:1','mon','mon:0','mon:1'].indexOf(dlc)
if(mIndx>=0&&mIndx<6){if(mIndx<3)td=[].concat(A5.d.date.months);else td=[].concat(A5.d.date.monthsShort);if(d[0]=='M'){var tc='proper';if(d[1]=='O')tc='upper'
for(var i=0;i<td.length;i++)td[i]=td[i].toCase(tc);}
if(mIndx==1||mIndx==4){for(var i=0;i<td.length;i++)td[i]={html:td[i],value:i};}else if(mIndx==2||mIndx==5){for(var i=0;i<td.length;i++)td[i]={html:td[i],value:i+1};}else{for(var i=0;i<td.length;i++)td[i]={html:td[i],value:td[i]};}
this.data['*'+d]=td;d=td;}else return false;}else d=null;}
st.data=typeof d=='object'?d:null;st.context=typeof c=='object'?c:null;st.scope=typeof sc=='object'||typeof sc=='function'?sc:null;if(typeof t=='object'&&t!=null&&typeof t.id=='string'){if(t.id=='')t.id=A5.u.getUniqueId();t=t.id;}
if(typeof t=='string'){st.target.type='element';st.target.id=t;}else if(typeof t=='object'&&t!=null){st.target.type='custom';st.target.data=t;}else st.target.type='none';var cancel=false;var val=null;if(typeof b=='string')b=$(b);if(typeof b=='object'){if(b.tagName){st.binding.type='element';st.binding.id=b.id;}else{if(b.path){st.binding.type='path';st.binding.path=b.path;}else if(b.element){st.binding.type='element';var be=$(b.element);if(!be)cancel=true;st.binding.id=be.id;}else{b.type='custom';if(typeof b.value!='undefined')val=b.value;else cancel=true;}
this._.process=b.process||null;}}
if(cancel){A5.u.object.assign(st,this._.dState);this._.state='hidden';return false;}
this._.picker=s;st.instanceId=pt+'@'+Date.now();this._.update(this,st,val);if(typeof def.show=='function')def.show.call(this,s,st);s.element.style.display=def.display.mode;this._.trans.show(t);st.shown=true;this._.state='shown';if(typeof this.onShow=='function')this.onShow();return st.instanceId;}
return false;},update:function(t,d){if(this.state.shown){var st=this.state;var iid=typeof arguments[2]!='undefined'?arguments[2]:st.instanceId;if(iid==st.instanceId){if(typeof t=='string'){t=[t];d=[d];}
var tt='';var td='';for(var i=0;i<t.length;i++){tt=t[i];td=d[i]||null;if(tt=='value')this._.update(this,st,td);else if(td){if(tt=='data')st.data=td;else if(tt=='context')st.context=td;else if(tt=='scope')st.scope=td;}}
var def=this._.picker.def;if(typeof def.update=='function')def.update.call(this,t,this._.picker,st);this._.trans.refresh();}}},focus:function(){var s=false;var iid=arguments[2]||this.state.instanceId;var pt=iid.split('@')[0];s=this._.pickers[pt];if(s){var def=A5.pickers.guides[pt];if(typeof def.focus=='function')return def.focus.call(this,s,this.state,iid==this.state.instanceId,pt==this.state.type);}
return false;},action:function(an){var s=false;var args=arguments[1]||null;var iid=arguments[2]||this.state.instanceId;var pt=iid.split('@')[0];s=this._.pickers[pt];if(s){var def=A5.pickers.guides[pt];if(typeof def.action=='function'){var res=def.action.call(this,an,args,s,this.state,iid==this.state.instanceId,pt==this.state.type);if(res||typeof res=='undefined')this._.trans.refresh();}}},commit:function(){if(this.state.shown){var hide=typeof arguments[0]=='boolean'?arguments[0]:true;var iid=typeof arguments[1]=='string'?arguments[1]:this.state.instanceId;if(iid==this.state.instanceId){if(typeof this.onBeforeCommit=='function'){var res=this.onBeforeCommit(hide);if(typeof res=='boolean'&&!res)return false;}
this._.state='commit';var val=this._.picker.def.commit.call(this,this._.picker,this.state);var st=this.state;var stb=st.binding;if(typeof st.value.initial=='number'&&typeof val=='string'&&val==Number(val))val=Number(val);st.value.current=val;if(stb.type=='element'){$svs(stb.id,val);$e.execute(stb.id,'change');}else if(stb.type=='path')A5.u.object.set(st.context,stb.path,val);if(typeof this.onCommit=='function')this.onCommit(hide);if(hide){if(!this._.hide(this))return false;}
return val;}}},cancel:function(){if(this.state.shown){var iid=typeof arguments[0]!='undefined'?arguments[0]:this.state.instanceId;if(iid==this.state.instanceId){if(typeof this.onBeforeCancel=='function'){var res=this.onBeforeCancel();if(typeof res=='boolean'&&!res)return false;}
if(!this._.hide(this))return false;if(typeof this.onCancel=='function')this.onCancel();}}}});}
if(!A5.controlBar) { 	
/*
Copyright (c) 2001, 2024 Alpha Software Corporation
All Rights Reserved.
This JavaScript library is licensed exclusively for use with Alpha Anywhere, Alpha Five,
Alpha Five Application Server, Alpha Anywhere Application Server,
Alpha Five Run Engine, and Alpha Anywhere Run Engine. It is specifically
not licensed for use on a server that does not have installed on it a
licensed copy of the Alpha Five Application Server or the Alpha Anywhere Application Server.
*/
A5.controlBar={disclosure:{defaultContainer:''},items:{'html':{initialize:function(name,id,s,theme){$u.o.assign(s,{size:'',html:'',bind:{show:''}},true);var html=s.html;html='<div class="A5ControlBarItem" style="'+$if(s.size!='','A5CONTROLBARITEMSIZE: '+s.size+';','')+'">'+html+'</div>';if(s.bind.show!=''){html='{*if '+s.bind.show+'}'+html+'{*endif}';}
s.template=html;}},'button':{initialize:function(name,id,s,theme){$u.o.assign(s,{size:'',settings:{theme:theme,style:''},actions:{},bind:{show:'',disabled:''},autoHideDisclosure:'auto'},true);s.settings.style='width: 100%;'+s.settings.style;if(s.size!='')s.settings.style='A5CONTROLBARITEMSIZE: 100%;'+s.settings.style;var html=A5.buttons.html(id,s.settings,'a5-item="'+name+'"','',true);if(s.bind.disabled!=''){var dHTML=A5.buttons.html(id,s.settings,'a5-item="'+name+'"','disabled',true);html='{*if '+s.bind.disabled+'}'+dHTML+'{*else}'+html+'{*endif}';}
html='<div class="A5ControlBarItem" style="'+$if(s.size!='','A5CONTROLBARITEMSIZE: '+s.size+';','')+'">'+html+'</div>';if(s.bind.show!=''){html='{*if '+s.bind.show+'}'+html+'{*endif}';}
s.template=html;},event:function(type,name,value,item,ele,e){if(type=='down'){var id=ele.id;var pcn=item.settings.pressedClassName;if(pcn!='')$acn(ele,pcn);if(item.settings.pressedIcon!=''){A5.u.icon.update($(ele.id+'.ICON'),item.settings.pressedIcon);A5.buttons._p[id]={c:pcn,i:item.settings.icon};}else A5.buttons._p[id]=pcn;}
if(item.actions[type]){var data={item:{name:name,value:value,def:item},element:ele,event:e}
this.action(item.actions[type],data);}}},'button-toggle':{initialize:function(name,id,s,theme){$u.o.assign(s,{size:'',settings:{theme:theme,style:'',type:'two-state',keepPressed:true},actions:{},bind:{value:'',data:'',show:'',disabled:''},autoHideDisclosure:'auto'},true);s.settings.style='width: 100%;'+s.settings.style;if(s.size!='')s.settings.style='A5CONTROLBARITEMSIZE: 100%;'+s.settings.style;if(s.settings.type=='multi-state'){var sStr=JSON.stringify(s.settings);sStr=sStr.replace(/\{/g,'\\{');sStr=sStr.replace(/\}/g,'\\}');sStr=sStr.replace(/:/g,'\\:');var html='{A5.buttons.html(\''+id+'\',function(od)\\{var o = '+sStr+'; $u.o.assign(o,od); return o;\\}('+s.bind.data+'['+s.bind.value+']),\'a5-item="'+name+'"\')}';}else{var html=A5.buttons.html(id,s.settings,'a5-item="'+name+'"','',true);if(s.settings.keepPressed){html='{*if '+s.bind.value+'}'+A5.buttons.html(id,s.settings,'a5-item="'+name+'"','pressed',true)+'{*else}'+html+'{*endif}';}
if(s.bind.disabled!=''){var dHTML=A5.buttons.html(id,s.settings,'a5-item="'+name+'"','disabled',true);html='{*if '+s.bind.disabled+'}'+dHTML+'{*else}'+html+'{*endif}';}}
html='<div class="A5ControlBarItem" style="'+$if(s.size!='','A5CONTROLBARITEMSIZE: '+s.size+';','')+'">'+html+'</div>';if(s.bind.show!=''){html='{*if '+s.bind.show+'}'+html+'{*endif}';}
s.template=html;},event:function(type,name,value,item,ele,e){if(type=='down'){var id=ele.id;var pcn=item.settings.pressedClassName;if(pcn!='')$acn(ele,pcn);if(item.settings.pressedIcon!=''){A5.u.icon.update($(ele.id+'.ICON'),item.settings.pressedIcon);A5.buttons._p[id]={c:pcn,i:item.settings.icon};}else A5.buttons._p[id]=pcn;}
if(type=='click'){var curV=A5.u.object.get(this.data,item.bind.value);if(item.settings.type=='multi-state'){curV++;var d=A5.u.object.get(this.data,item.bind.data);if(curV>=d.length)curV=0;this.update(item.bind.value,curV);}else{this.update(item.bind.value,!curV);}}
if(item.actions[type]){var data={item:{name:name,value:value,def:item},element:ele,event:e}
this.action(item.actions[type],data);}}},'button-list':{initialize:function(name,id,s,theme){$u.o.assign(s,{size:'',settings:{theme:theme,allowNullSelection:false,multiple:false,className:'',nullSelectionClassName:'',button:{keepPressed:true}},actions:{},bind:{data:'',value:'',show:''},autoHideDisclosure:'auto'},true);var ts={};A5.themes.assign(ts,s.settings.theme,'buttonList');$u.o.assign(s.settings,ts,true);var sStr=JSON.stringify(s.settings);sStr=sStr.replace(/\{/g,'\\{');sStr=sStr.replace(/\}/g,'\\}');sStr=sStr.replace(/:/g,'\\:');var html='{A5.buttonLists.html(\''+id+'\','+sStr+','+s.bind.data+','+$if(s.settings.button.keepPressed,s.bind.value,'\'\'')+',\'a5-item="'+name+'" a5-value="\\{index\\}"\')}';var cStyle='';if(s.size=='')cStyle=' style="display: inline-block;"';if(s.settings.nullSelectionClassName!=''){html='<div class="'+s.settings.className+'{*if ('+s.bind.value+').toString() == \'\'}'+s.settings.nullSelectionClassName+'{*endif}"'+cStyle+'>'+html+'</div>';}else{html='<div class="'+s.settings.className+'"'+cStyle+'>'+html+'</div>';}
html='<div class="A5ControlBarItem" style="'+$if(s.size!='','A5CONTROLBARITEMSIZE: '+s.size+';','')+'">'+html+'</div>';if(s.bind.show!=''){html='{*if '+s.bind.show+'}'+html+'{*endif}';}
s.template=html;},event:function(type,name,value,item,ele,e){if(type=='down'){var id=ele.id;var pcn=item.settings.button.pressedClassName;if(pcn!=''){$acn(ele,pcn);A5.buttons._p[id]=pcn;}}
if(type=='click'){var d=A5.u.object.get(this.data,item.bind.data);var v=d[Number(value)];if(v){if(typeof v=='object'){v=v.value;}
var curV=A5.u.object.get(this.data,item.bind.value);if(item.settings.multiple){if(curV.constructor==Array){var cIndx=curV.indexOf(v);if(cIndx==-1){curV.push(v);v=curV;}else curV.splice(cIndx,1);if(item.settings.allowNullSelection===false&&curV.length==0)v=[v];else v=curV;}else console.log('ERROR - button-list value must be array if multiple select is set to true.');}else{if(item.settings.allowNullSelection===true&&v.toString()==curV.toString()){if(curV.constructor==Array)v=[];else v='';}else if(curV.constructor==Array)v=[v];}
this.update(item.bind.value,v);}}
if(item.actions[type]){var data={item:{name:name,value:value,def:item},element:ele,event:e}
this.action(item.actions[type],data);}}},'disclosure-button':{initialize:function(name,id,s,theme){$u.o.assign(s,{size:'',autoHideDisclosure:'always',disclosure:{name:'',type:''},actions:{},settings:{show:{theme:theme,style:''},hide:{theme:theme,style:''}},bind:{show:'',disabled:''}},true);s.settings.show.style='width: 100%;'+s.settings.show.style;s.settings.hide.style='width: 100%;'+s.settings.hide.style;if(s.size!=''){s.settings.show.style='A5CONTROLBARITEMSIZE: 100%;'+s.settings.show.style;s.settings.hide.style='A5CONTROLBARITEMSIZE: 100%;'+s.settings.hide.style;}
var showHTML=A5.buttons.html(id,s.settings.show,'a5-item="'+name+'"','',true);var hideHTML=A5.buttons.html(id,s.settings.hide,'a5-item="'+name+'"','',true);if(s.bind.disabled!=''){var dHTML=A5.buttons.html(id,s.settings.show,'a5-item="'+name+'"','disabled',true);showHTML='{*if '+s.bind.disabled+'}'+dHTML+'{*else}'+showHTML+'{*endif}';dHTML=A5.buttons.html(id,s.settings.hide,'a5-item="'+name+'"','disabled',true);hideHTML='{*if '+s.bind.disabled+'}'+dHTML+'{*else}'+hideHTML+'{*endif}';}
var html='{*if [temp].state.disclosure.shown && [temp].state.disclosure.name == \''+s.disclosure.name+'\'}'+hideHTML+'{*else}'+showHTML+'{*endif}';html='<div class="A5ControlBarItem" style="'+$if(s.size!='','A5CONTROLBARITEMSIZE: '+s.size+';','')+'">'+html+'</div>';if(s.bind.show!=''){html='{*if '+s.bind.show+'}'+html+'{*endif}';}
s.template=html;},event:function(type,name,value,item,ele,e){var id=ele.id;if(this._d.shown)var bs=item.settings.hide;else var bs=item.settings.show;if(type=='down'){var pcn=bs.pressedClassName;if(pcn!='')$acn(ele,pcn);if(bs.pressedIcon!=''){A5.u.icon.update($(ele.id+'.ICON'),bs.pressedIcon);A5.buttons._p[id]={c:pcn,i:bs.icon};}else A5.buttons._p[id]=pcn;}
if(type=='click'){if(this._d.shown)var html=A5.buttons.html(id,item.settings.hide,'a5-item="'+name+'"','',true);else var html=A5.buttons.html(id,item.settings.show,'a5-item="'+name+'"','',true);var pEle=ele.parentNode;pEle.innerHTML=A5.u.template.expand(this.data,html);A5.buttons._p[id]=pcn;}
if(item.actions[type]){var data={item:{name:name,value:value,def:item},element:ele,event:e}
this.action(item.actions[type],data);}}},'edit':{initialize:function(name,id,s,theme){$u.o.assign(s,{size:'',update:'default',actions:{},settings:{theme:theme,style:'',watermark:{text:'',className:''}},bind:{value:'',show:''}},true);var ts={};A5.themes.assign(ts,s.settings.theme,'edit');$u.o.assign(s.settings,ts,true);if(s.size!='')s.settings.style='A5CONTROLBARITEMSIZE: 100%;'+s.settings.style;s.settings.style='display: inline-block; overflow: hidden;'+s.settings.style;var wm=s.settings.watermark.text;if(wm=='')wm='&nbsp;';var html='{*if '+s.bind.value+' != \'\'}<div id="'+id+'" a5-item="'+name+'" class="'+s.settings.className+'" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; '+s.settings.style+'{*if [temp].state.edit.shown && [temp].state.edit.item == \''+name+'\'}visibility: hidden;{*endif}">{'+s.bind.value+'}</div>{*else}<div id="'+id+'" a5-item="'+name+'" class="'+s.settings.className+' '+s.settings.watermark.className+'" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; '+s.settings.style+'{*if [temp].state.edit.shown && [temp].state.edit.item == \''+name+'\'}visibility: hidden;{*endif}"><escape<'+wm+'>></div>{*endif}';html='<div class="A5ControlBarItem" style="'+$if(s.size!='','A5CONTROLBARITEMSIZE: '+s.size+';','')+'; text-align: left;">'+html+'</div>';if(s.bind.show!=''){html='{*if '+s.bind.show+'}'+html+'{*endif}';}
s.template=html;},event:function(type,name,value,item,ele,e){if(item.actions[type]){var data={item:{name:name,value:value,def:item},element:ele,event:e}
this.action(item.actions[type],data);}}}},_:{lDefs:{type:'default',className:'',style:'',bind:{show:''},before:{items:[]},middle:{items:[]},after:{items:[]}},initDone:false,init:function(){if(!A5.controlBar._.initDone){A5.u.css.setSelector('.A5ControlBarHorz .A5ControlBarLine','position: relative; text-align: center;');A5.u.css.setSelector('.A5ControlBarHorz .A5ControlBarLineCust','position: relative;');A5.u.css.setSelector('.A5ControlBarHorz .A5ControlBarLineBefore','text-align: left;');A5.u.css.setSelector('.A5ControlBarHorz .A5ControlBarLineAfter','text-align: right;');A5.u.css.setSelector('.A5ControlBarHorz .A5ControlBarItem','display: inline-block;');A5.u.css.setSelector('.A5ControlBarHorz .A5ControlBarLineContentBefore','position: absolute; top: 0px; left: 0px;');A5.u.css.setSelector('.A5ControlBarHorz .A5ControlBarLineContentAfter','position: absolute; top: 0px; right: 0px;');A5.u.css.setSelector('.A5ControlBarHorz .A5ControlBarLineBefore .A5ControlBarLineContentBefore, .A5ControlBarHorz .A5ControlBarLineAfter .A5ControlBarLineContentAfter','position: static;');A5.u.css.setSelector('.A5ControlBarCollapse .A5ControlBarHorz .A5ControlBarLine > div','position: static; display: inline;');A5.u.css.setSelector('.A5ControlBarCollapse .A5ControlBarHorz .A5ControlBarLine','text-align: inherit;');A5.u.css.setSelector('.A5ControlBarVert','display: table; height: 100%;');A5.u.css.setSelector('.A5ControlBarVert .A5ControlBarLine','display: table-cell; vertical-align: middle;');A5.u.css.setSelector('.A5ControlBarVert .A5ControlBarLineCust','display: table-cell;');A5.u.css.setSelector('.A5ControlBarVert .A5ControlBarLineBefore','display: table-cell; vertical-align: top;');A5.u.css.setSelector('.A5ControlBarVert .A5ControlBarLineAfter','display: table-cell; vertical-align: bottom;');A5.u.css.setSelector('.A5ControlBarVert .A5ControlBarLineContentBefore','position: absolute; top: 0px;');A5.u.css.setSelector('.A5ControlBarVert .A5ControlBarLineContentAfter','position: absolute; bottom: 0px;');A5.u.css.setSelector('.A5ControlBarVert .A5ControlBarLineBefore .A5ControlBarLineContentBefore, .A5ControlBarVert .A5ControlBarLineAfter .A5ControlBarLineContentAfter','position: static;');A5.u.css.setSelector('.A5ControlBarCollapse .A5ControlBarVert .A5ControlBarLine > div','position: static; display: block;');A5.u.css.setSelector('.A5ControlBarCollapse .A5ControlBarVert .A5ControlBarLine','vertical-align: top;');A5.controlBar._.initDone=true;}}}}
A5.ControlBar=Class.create({initialize:function(contId,data,settings){if(typeof settings=='undefined'){settings=data;data=null;}
this.contId=contId;A5.controlBar._.init();$u.o.assign(this,{theme:'',override:'base',edge:'top',className:'',disclosuresClassName:'',topClassName:'',bottomClassName:'',leftClassName:'',rightClassName:'',separator:{horizontalClassName:'',verticalClassName:''},items:{},actions:{},layout:'',layouts:{},disclosure:{container:A5.controlBar.disclosure.defaultContainer,animation:{duration:300,tween:'ease-in-out'},coverClassName:'',cover:{topClassName:'',bottomClassName:'',leftClassName:'',rightClassName:''},extend:{topClassName:'',bottomClassName:'',leftClassName:'',rightClassName:''},expand:{topClassName:'',bottomClassName:'',leftClassName:'',rightClassName:''},defaults:{type:'static',html:'',className:'',onInitialize:false,onBeforeDraw:false,onDraw:false,onSize:false,onShow:false,onShowComplete:false,onHide:false}},disclosures:{},data:{},state:{layout:'',edit:{shown:false,item:'',part:'',path:''},disclosure:{shown:false,name:'',type:'',edge:''}},onDraw:false,onBeforeDraw:false,onPopulate:false,onBeforePopulate:false,onChange:false});if(typeof settings.theme!='undefined')A5.themes.assign(this,settings.theme,'controlBar');$u.o.assign(this,settings);A5.overrides.assign(this,'controlBar',this.override);this.initializeItems();var cEle=$(contId);cEle.innerHTML='<div></div><input id="'+this.contId+'.EDIT" style="position: absolute; top: 0px; left: 0px; margin: 0px; display: none; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />';if(cEle.style.position!='absolute')cEle.style.position='relative';cEle.style.padding='0px';cEle.style.overflow='hidden';$acn(cEle,this.className);this._bindEvents(cEle);this._m={anim:false,next:{has:false,args:[]},async:{}};var egName='CONTROLBAR.'+this.contId;var dEle=document.createElement('div');dEle.id=this.contId+'.DISCLOSURES';$ss(dEle,'z-index: 100000; position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px; display: none;');dEle.innerHTML='<div style="position: absolute; overflow: hidden;"><div class="'+this.disclosure.defaults.className+'" id="'+this.contId+'.DISCLOSURE.A5CONTROLBARDYNAMIC" style="z-index: 100002; position: absolute; display: none;"><div></div><input id="'+this.contId+'.EDITDIS" style="position: absolute; top: 0px; left: 0px; margin: 0px; display: none; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" /></div></div><div id="'+this.contId+'.DISCLOSURE.CLOSE" style="z-index: 100001; position: absolute; display: none;">&nbsp;</div>';$acn(dEle,this.disclosuresClassName);if(this.disclosure.container!='')$(this.disclosure.container).appendChild(dEle);else document.body.insertBefore(dEle,document.body.firstChild);this._bindEvents(dEle.children[0].children[0]);$e.add(dEle,A5.d.evnts.click,this._disClick,this,false,egName);$e.add(this.contId+'.DISCLOSURE.CLOSE',A5.d.evnts.click,this._disCloseClick,this,false,egName);if(A5.flags.supportsTouch){$e.add(dEle,'touchmove',function(e){var tempT=$e.getTouches(e);var pDef=true;if(tempT){if(tempT.length){if(tempT.length>1)pDef=false;}}
if(pDef)$e.preventDefault(e);});}
this._d={ele:dEle,shown:false,current:false,next:false};var dd=null;for(var d in this.disclosures){dd=this.disclosures[d];this.addDisclosure(d,dd,true);}
var eEle=$(this.contId+'.EDIT');var edEle=$(this.contId+'.EDITDIS');$e.add(eEle,'keyup',this._editKeyup,this,false,egName);$e.add(edEle,'keyup',this._editKeyup,this,false,egName);$e.add(eEle,'blur',this._editBlur,this,false,egName);$e.add(edEle,'blur',this._editBlur,this,false,egName);this._e={ele:eEle,dEle:edEle,shown:0,current:false};if(data!=null)this.populate(data);else this.refresh();if(!A5.flags.isMobile)$e.add(window,'resize',this._relayout,this,true,egName);else{$e.add(window,'orientationchange',this._relayout,this,true,egName);if(A5.flags.iOSVersion==-1)$e.add(window,'resize',this._relayout,this,true,egName);}
$e.add(document,'webkitfullscreenchange',this._relayout,this,true,egName);$e.add(document,'mozfullscreenchange',this._relayout,this,true,egName);$e.add(document,'fullscreenchange',this._relayout,this,true,egName);$e.add(document,'fullscreenchange',this._relayout,this,true,egName);},initializeItems:function(){var iObj=null;var iTObj=null;var theme=this.theme;theme=theme.split(':').shift();for(var item in this.items){iObj=this.items[item];iTObj=A5.controlBar.items[iObj.type];if(iTObj)iTObj.initialize(item,this.contId+'.'+item,iObj,theme);else iObj.template='ERROR '+item+' - Item type "'+iObj.type+'" not found!';}
for(var layout in this.layouts){if(typeof this.layouts[layout]._t!='undefined'){delete this.layouts[layout]._t.top;delete this.layouts[layout]._t.bottom;delete this.layouts[layout]._t.left;delete this.layouts[layout]._t.right;}}},destroy:function(){$e.removeGroup('CONTROLBAR.'+this.contId);var dEle=this._d.ele;if(dEle){var pEle=dEle.parentNode;if(pEle)pEle.removeChild(dEle);}},populate:function(data){var anim=typeof arguments[1]!='undefined'?arguments[1]:false;var fEvnts=typeof arguments[2]!='undefined'?arguments[2]:true;var async=typeof arguments[3]!='undefined'?arguments[3]:false;if(this.onBeforePopulate.constructor==Function&&fEvnts){var res=this.onBeforePopulate.call(this,data);if(typeof res=='boolean'){if(!res)return false;}}
this.data={};$u.o.assign(this.data,data);this.refresh(anim,async);if(this.onPopulate.constructor==Function&&fEvnts)this.onPopulate.call(this,data);},update:function(p,v){var anim=typeof arguments[2]!='undefined'?arguments[2]:false;var fEvnts=typeof arguments[3]!='undefined'?arguments[3]:true;var async=typeof arguments[4]!='undefined'?arguments[4]:false;if(typeof p=='string'){p=[p];v=[v];}
for(var i=0;i<p.length;i++)A5.u.object.set(this.data,p[i],v[i],true);if(fEvnts){if(this.onChange.constructor==Function)this.onChange.call(this,p,v);}
this.refresh(anim,async);},setLayout:function(l){if(this.layouts[l]){var anim=typeof arguments[1]!='undefined'?arguments[1]:false;var async=typeof arguments[2]!='undefined'?arguments[2]:false;this.layout=l;this.refresh(anim,async);}else console.log('ERROR - control bar layout "'+l+'" not found');},refresh:function(){var anim=typeof arguments[0]!='undefined'?arguments[0]:false;var async=typeof arguments[1]!='undefined'?arguments[1]:false;if(this._m.anim){this._m.next.has=true;this._m.next.args=[anim,async];return false;}
if(async){clearTimeout(this._m.async.to);var ci=this;this._m.async.to=setTimeout(function(){ci.refresh.apply(ci,ci._m.async.args);delete ci;},0);this._m.async.args=[anim];return false;}
if(this.onBeforeDraw.constructor==Function)this.onBeforeDraw.call(this,'main');var l='';if(this.layout.constructor==Function)l=this.layout.call(this);else l=this.layout;this._cl=this.layouts[l];this.state.layout=l;this._compileTemplate(this._cl,this.edge);var cEle=$(this.contId);var html=A5.u.template.expand(this.data,{template:this._cl._t[this.edge]},{state:this.state},this);var animDo=false;var cn='class="'+this[this.edge+'ClassName']+'" ';var hCSS='';if(this.edge=='left'||this.edge=='right')hCSS=' height: 100%;';if(anim){if(typeof anim!='object')anim={type:anim,duration:500};if(!anim.tween)anim.tween='ease-in-out';if(anim.type.indexOf('-in')!=-1||anim.type.indexOf('-out')!=-1||anim.type.indexOf('-before')!=-1||anim.type.indexOf('-after')!=-1){if(this.edge=='top'){anim.type=anim.type.replace('-in','-top').replace('-out','-bottom').replace('-before','-left').replace('-after','-right');}else if(this.edge=='bottom'){anim.type=anim.type.replace('-in','-bottom').replace('-out','-top').replace('-before','-left').replace('-after','-right');}else if(this.edge=='left'){anim.type=anim.type.replace('-in','-left').replace('-out','-right').replace('-before','-top').replace('-after','-bottom');}else if(this.edge=='right'){anim.type=anim.type.replace('-in','-right').replace('-out','-left').replace('-before','-top').replace('-after','-bottom');}}
var oldHTML='';var ccEle=$(this.contId+'.CONTENT');if(ccEle){oldHTML=ccEle.innerHTML;oldHTML=oldHTML.replace(/id="[^"]+"/g,'').replace(/a5-item="[^"]+"/g,'');}
var tProp=A5.u.css.properties.transform;var tPropDOM=A5.u.css.properties.transformDOM;var taProp=tProp.replace('transform','transition');if(anim.type.indexOf('slide-')==0){var vals=['0px','100%','0px','-100%'];if(anim.type=='slide-left')vals=['100%','0px','-100%','0px'];else if(anim.type=='slide-right')vals=['-100%','0px','100%','0px'];else if(anim.type=='slide-bottom')vals=['0px','-100%','0px','100%'];var taVal=taProp+': '+tProp+' '+anim.duration+'ms '+anim.tween+';';html='<div '+cn+'id="'+this.contId+'.CONTENTOLD" style="position: absolute; width: 100%;'+hCSS+' '+tProp+': '+A5.u.css.transform2D('0px','0px')+'; '+taVal+'">'+oldHTML+'</div><div '+cn+'id="'+this.contId+'.CONTENT" style="'+hCSS+''+tProp+': '+A5.u.css.transform2D(vals[0],vals[1])+'; '+taVal+'">'+html+'</div>';animDo=[{p:tPropDOM,v:A5.u.css.transform2D('0px','0px')},{p:tPropDOM,v:A5.u.css.transform2D(vals[2],vals[3])}];}else if(anim.type.indexOf('swap-')==0){var vals=['0px','-100%'];if(anim.type=='swap-left')vals=['-100%','0px'];else if(anim.type=='swap-right')vals=['100%','0px'];else if(anim.type=='swap-bottom')vals=['0px','100%'];var hDur=(anim.duration/2);var taVal=taProp+': '+tProp+' '+hDur+'ms '+anim.tween+';';html='<div '+cn+'id="'+this.contId+'.CONTENTOLD" style="position: absolute; width: 100%;'+hCSS+' '+tProp+': '+A5.u.css.transform2D('0px','0px')+'; '+taVal+'">'+oldHTML+'</div><div '+cn+'id="'+this.contId+'.CONTENT" style="'+hCSS+''+tProp+': '+A5.u.css.transform2D(vals[0],vals[1])+'; '+taVal+' transition-delay: '+hDur+'ms;">'+html+'</div>';animDo=[{p:tPropDOM,v:A5.u.css.transform2D('0px','0px')},{p:tPropDOM,v:A5.u.css.transform2D(vals[0],vals[1])}];}else if(anim.type=='fade'){var taVal=taProp+': opacity '+anim.duration+'ms '+anim.tween+';';html='<div '+cn+'id="'+this.contId+'.CONTENTOLD" style="position: absolute; width: 100%;'+hCSS+' opacity: 1; '+taVal+'">'+oldHTML+'</div><div '+cn+'id="'+this.contId+'.CONTENT" style="'+hCSS+'opacity: 0; '+taVal+'">'+html+'</div>';animDo=[{p:'opacity',v:'1'},{p:'opacity',v:'0'}];}else html='<div id="'+this.contId+'.CONTENT" style="'+hCSS+'">'+html+'</div>';}else html='<div '+cn+'id="'+this.contId+'.CONTENT" style="'+hCSS+'">'+html+'</div>';if(hCSS=='')cEle.children[0].style.height='';else cEle.children[0].style.height='100%';cEle.children[0].innerHTML=html;this._m.anim=false;if(animDo){var lcEle=$(this.contId+'.CONTENT');var lcoEle=$(this.contId+'.CONTENTOLD');lcEle.offsetWidth;lcEle.style[animDo[0].p]=animDo[0].v;lcoEle.style[animDo[1].p]=animDo[1].v;var ci=this;setTimeout(function(){var ele=$(ci.contId+'.CONTENTOLD');pEle=ele.parentNode;pEle.removeChild(ele);ci._refreshAnimComplete();delete ci;delete ele;delete pEle;},anim.duration);this._m.anim=true;}
if(this.onDraw.constructor==Function)this.onDraw.call(this,'main',cEle);if(this._d.shown){if(this._d.current.s.isTemplate){if(this._d.current.s.name.substr(0,7)=='layout:'){var dEle=$(this.contId+'.DISCLOSURE.A5CONTROLBARDYNAMIC');if(this.onBeforeDraw.constructor==Function)this.onBeforeDraw.call(this,'disclosure');var layoutEdge=this._d.current.layoutEdge;var cn='class="'+this[layoutEdge+'ClassName']+'" ';var hCSS='';if(layoutEdge=='left'||layoutEdge=='right')hCSS='height: 100%;';if(hCSS=='')dEle.children[0].style.height='';else dEle.children[0].style.height='100%';dEle.children[0].innerHTML='<div '+cn+' style="'+hCSS+'">'+A5.u.template.expand(this.data,{template:this._cdl._t[layoutEdge]},{state:this.state},this)+'</div>';if(this.onDraw.constructor==Function)this.onDraw.call(this,'disclosure',dEle);}else{var dd=this.disclosures[this._d.current.s.name];var dEle=$(this.contId+'.DISCLOSURE.'+this._d.current.s.name);if(dd.onBeforeDraw.constructor==Function)dd.onBeforeDraw.call(this,dEle);A5.u.element.setContent(dEle,A5.u.template.expand(this.data,{template:dd._t},{state:this.state},this));if(dd.onDraw.constructor==Function)dd.onDraw.call(this,dEle);}}}},action:function(action){if(this.actions[action]){var data=typeof arguments[1]!='undefined'?arguments[1]:false;this.actions[action].call(this,data);}else console.log('ERROR - control bar action "'+action+'" not found');},focus:function(name){var iObj=this.items[name];if(iObj){var id=this.contId+'.'+name;var ele=$(id);if(iObj.type=='edit'){if(ele){var part='disclosure';while(ele!=document.body){if(ele.id==this.contId){part='main';break;}
ele=ele.parentNode;}
if(this.state.edit.shown){var tEle=$(this._e.current.id);tEle.innerHTML=this._e.ele.value;tEle.style.visibility='';}
this._e.current={item:iObj,id:id,p:part};if(part=='main')var eEle=this._e.ele;else var eEle=this._e.dEle;eEle.className=iObj.settings.className;$ss(eEle,iObj.settings.style+'; position: absolute; top: 0px; left: 0px; margin: 0px; display: none; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;');var ev=A5.u.object.get(this.data,iObj.bind.value);eEle.value=ev;this._editPos();eEle.focus();eEle.select();this.state.edit.shown=true;this.state.edit.item=name;this.state.edit.part=part;this.state.edit.path=iObj.bind.value;}}else ele.focus();}},addDisclosure:function(n,s,ow){if(this.disclosures[n]&&!ow)return false;var cdEle=$(this.contId+'.DISCLOSURES').children[0];A5.u.object.assign(s,this.disclosure.defaults,true);if(!ow)this.disclosures[n]=s;var tdEle=document.createElement('div');tdEle.id=this.contId+'.DISCLOSURE.'+n;tdEle.className=s.className;tdEle.style.position='absolute';tdEle.style.display='none';tdEle.style.zIndex='100002';cdEle.appendChild(tdEle);if(s.type=='template')this._bindEvents(tdEle);else tdEle.innerHTML=s.html;if(s.onInitialize.constructor==Function)s.onInitialize.call(this,tdEle);return true;},showDisclosure:function(s){if(this._d.shown){this._d.next=s;this.hideDisclosure();}else{var ele=typeof arguments[1]!='undefined'?arguments[1]:false;ele=$(ele);$u.o.assign(s,{name:'',type:'extend',size:false,margin:{top:0,left:0,right:0,bottom:0},animation:true,autoHide:true,className:'',coverClassName:this.disclosure.coverClassName},true);if(typeof s.margin.top!='number')s.margin.top=A5.u.convertUnits(s.margin.top.toString(),'px');if(typeof s.margin.left!='number')s.margin.left=A5.u.convertUnits(s.margin.left.toString(),'px');if(typeof s.margin.right!='number')s.margin.right=A5.u.convertUnits(s.margin.right.toString(),'px');if(typeof s.margin.bottom!='number')s.margin.bottom=A5.u.convertUnits(s.margin.bottom.toString(),'px');var type=s.type;if(type.indexOf('element')!=-1&&!ele){type=type.split('-').shift();if(type=='expand')type='expand-after';}
this._cdl=false;var dd=false;if(s.name.substr(0,7)=='layout:'){var dEle=$(this.contId+'.DISCLOSURE.A5CONTROLBARDYNAMIC');this._cdl=this.layouts[s.name.substr(7)];if(!this._cdl)return false;if(s.className=='')s.className=this.disclosure.defaults.className;s.isTemplate=true;}else{dd=this.disclosures[s.name];if(!dd)return false;var dEle=$(this.contId+'.DISCLOSURE.'+s.name);if(s.className=='')s.className=dd.className;if(dd.type=='template'){s.isTemplate=true;if(typeof dd._t=='undefined'){var tPH='';var tHTML=dd.html;for(var item in this.items){tPH='['+item+']';if(tHTML.indexOf(tPH)!=-1)tHTML=tHTML.split(tPH).join(this.items[item].template);}
tHTML=tHTML.replace(/A5CONTROLBARITEMSIZE/gi,'width');tHTML=tHTML.replace(/A5CONTROLBARSEPCLASSNAME/gi,this.separator.horizontalClassName);dd._t=A5.u.template.parse(tHTML);}
if(dd.onBeforeDraw.constructor==Function)dd.onBeforeDraw.call(this,dEle);A5.u.element.setContent(dEle,A5.u.template.expand(this.data,{template:dd._t},{state:this.state},this));if(dd.onDraw.constructor==Function)dd.onDraw.call(this,dEle);}else s.isTemplate=false;}
dEle.className=s.className;dEle.style.top='';dEle.style.bottom='';dEle.style.left='';dEle.style.right='';dEle.style.width='';dEle.style.height='';if(type=='explicit'){if(s.rectangle.constructor==Function)var rect=s.rectangle.call(this,s,ele);else var rect=s.rectangle;}else var rect=this._getDisclosureRect(type,ele);var layoutEdge=this.edge;if(s.name.substr(0,7)=='layout:'){if(type=='outside-before'||type=='outside-after'||type.split('-').shift()=='screen')layoutEdge=rect.edge;this._compileTemplate(this._cdl,layoutEdge);if(this.onBeforeDraw.constructor==Function)this.onBeforeDraw.call(this,'disclosure');var cn='class="'+this[layoutEdge+'ClassName']+'" ';var hCSS='';if(layoutEdge=='left'||layoutEdge=='right')hCSS='height: 100%;';if(hCSS=='')dEle.children[0].style.height='';else dEle.children[0].style.height='100%';dEle.children[0].innerHTML='<div '+cn+' style="'+hCSS+'">'+A5.u.template.expand(this.data,{template:this._cdl._t[layoutEdge]},{state:this.state},this)+'</div>';if(this.onDraw.constructor==Function)this.onDraw.call(this,'disclosure',dEle);}
var dcEle=this._d.ele.children[0];if(typeof rect.className!='undefined')dcEle.className=rect.className;else dcEle.className='';dcEle.style.top=(rect.top+s.margin.top)+'px';dcEle.style.bottom=(rect.bottom+s.margin.bottom)+'px';dcEle.style.left=(rect.left+s.margin.left)+'px';dcEle.style.right=(rect.right+s.margin.right)+'px';var setMargin=false;dEle.style[rect.edge]='0px';dEle.style.marginLeft='';dEle.style.marginTop='';if(rect.fill=='both'||s.size=='fill'){dEle.style.top='0px';dEle.style.bottom='0px';dEle.style.left='0px';dEle.style.right='0px';}else if(rect.fill=='width'){dEle.style.left='0px';dEle.style.right='0px';}else if(rect.fill=='height'){dEle.style.top='0px';dEle.style.bottom='0px';}else{if(!rect.align)rect.align='middle';if(rect.align=='before'){if(rect.edge=='top'||rect.edge=='bottom')dEle.style.left='0px';else dEle.style.top='0px';}else if(rect.align=='after'){if(rect.edge=='top'||rect.edge=='bottom')dEle.style.right='0px';else dEle.style.bottom='0px';}else{if(rect.edge=='top'||rect.edge=='bottom')dEle.style.left='50%';else dEle.style.top='50%';setMargin=true;}}
var startTrans='';if(rect.edge=='top'){startTrans=A5.u.css.transform2D('0px','-100%');if(s.size&&s.size!='fill'&&type!='cover'){dEle.style.height=s.size;}}else if(rect.edge=='bottom'){startTrans=A5.u.css.transform2D('0px','100%');if(s.size&&s.size!='fill'&&type!='cover'){dEle.style.height=s.size;}}else if(rect.edge=='left'){startTrans=A5.u.css.transform2D('-100%','0px');if(s.size&&s.size!='fill'&&type!='cover'){dEle.style.width=s.size;}}else if(rect.edge=='right'){startTrans=A5.u.css.transform2D('100%','0px');if(s.size&&s.size!='fill'&&type!='cover'){dEle.style.width=s.size;}}
dEle.style.display='';if(type.split('-').shift()=='expand'&&!s.size)this._d.ele.className=this.disclosuresClassName+' '+s.coverClassName+' A5ControlBarCollapse';else this._d.ele.className=this.disclosuresClassName+' '+s.coverClassName;var dur=this.disclosure.animation.duration;var tween=this.disclosure.animation.tween;var completeDelay=false;if(s.animation){if(typeof s.animation=='object'){if(s.animation.duration)dur=s.animation.duration;if(s.animation.tween)tween=s.animation.tween;}
var cssDOMProp=A5.u.css.properties.transformDOM;var cssAnimProp=A5.u.css.properties.transitionDOM;dEle.style[cssDOMProp]=startTrans;dEle.style[cssAnimProp]='';this._d.ele.style.display='';dEle.offsetHeight;dEle.style[cssAnimProp]=A5.u.css.properties.transform+' '+dur+'ms '+tween;dEle.style[cssDOMProp]=A5.u.css.transform2D('0px','0px');completeDelay=true;}else{var cssDOMProp=A5.u.css.properties.transformDOM;var cssAnimProp=A5.u.css.properties.transitionDOM;dEle.style[cssDOMProp]=A5.u.css.transform2D('0px','0px');dEle.style[cssAnimProp]='';this._d.ele.style.display='';dEle.offsetHeight;dEle.style[cssAnimProp]=A5.u.css.properties.transform+' '+dur+'ms '+tween;}
if(setMargin){if(rect.edge=='top'||rect.edge=='bottom')dEle.style.marginLeft='-'+(dEle.offsetWidth/2)+'px';else dEle.style.marginTop='-'+(dEle.offsetHeight/2)+'px';}
var eleId=false
if(ele)eleId=ele.id;this._d.current={s:s,eleId:eleId,dEle:dEle,trans:startTrans,dur:dur,layoutEdge:layoutEdge,internalShow:false};this._d.next=false;this._d.shown=true;var dbcEle=$(this.contId+'.DISCLOSURE.CLOSE');dbcEle.style.display='none';if(this._d.internalShow&&ele){this._d.current.internalShow=true;var eBRect=ele.getBoundingClientRect();var tOff=0;var lOff=0;if(this.disclosure.container!=''){var cEle=$(this.disclosure.container);if(cEle){var ceBRect=cEle.getBoundingClientRect();tOff=ceBRect.top;lOff=ceBRect.left;}}
dbcEle.style.top=(eBRect.top-tOff)+'px';dbcEle.style.left=(eBRect.left-lOff)+'px';dbcEle.style.width=eBRect.width+'px';dbcEle.style.height=eBRect.height+'px';dbcEle.style.display='block';}
this.state.disclosure.shown=true;this.state.disclosure.name=s.name;this.state.disclosure.type=type;this.state.disclosure.edge=layoutEdge;if(dd){$e.execute(dEle,'a5resize');if(dd.onShow.constructor==Function)dd.onShow.call(this,dEle);if(dd.onSize.constructor==Function)dd.onSize.call(this,dEle);if(completeDelay){var ci=this;setTimeout(function(){ci._showDisclosureComplete();delete ci;},dur+10);}else this._showDisclosureComplete();}}},hideDisclosure:function(){if(this._d.shown){if(this.state.edit.shown&&this.state.edit.part!='main'){this._e.dEle.blur();this._editBlur.call(this._e.dEle,false,this);}
var anim=typeof arguments[0]!='undefined'?arguments[0]:true;var dur=0;if(anim){this._d.current.dEle.style[A5.u.css.properties.transformDOM]=this._d.current.trans;dur=this._d.current.dur;}
clearTimeout(this._hdcTO);var ci=this;this._hdcTO=setTimeout(function(){ci._hideDisclosureComplete();delete ci;},dur);}},resizeDisclosure:function(){if(this._d.shown){var s=this._d.current.s;var type=s.type
if(type=='explicit'){if(s.rectangle.constructor==Function)var rect=s.rectangle.call(this,s,$(this._d.current.eleId));else var rect=s.rectangle;}else var rect=this._getDisclosureRect(type,$(this._d.current.eleId));var dcEle=this._d.ele.children[0];dcEle.style.top=(rect.top+s.margin.top)+'px';dcEle.style.bottom=(rect.bottom+s.margin.bottom)+'px';dcEle.style.left=(rect.left+s.margin.left)+'px';dcEle.style.right=(rect.right+s.margin.right)+'px';var dd=this.disclosures[s.name];if(dd){$e.execute(this._d.current.dEle,'a5resize');if(dd.onSize.constructor==Function)dd.onSize.call(this,this._d.current.dEle);}
if(this._d.current.internalShow){var dbcEle=$(this.contId+'.DISCLOSURE.CLOSE');var eBRect=$(this._d.current.eleId).getBoundingClientRect();var tOff=0;var lOff=0;if(this.disclosure.container!=''){var cEle=$(this.disclosure.container);if(cEle){var ceBRect=cEle.getBoundingClientRect();tOff=ceBRect.top;lOff=ceBRect.left;}}
dbcEle.style.top=(eBRect.top-tOff)+'px';dbcEle.style.left=(eBRect.left-lOff)+'px';dbcEle.style.width=eBRect.width+'px';dbcEle.style.height=eBRect.height+'px';}}},_getDisclosureRect:function(type,ele){var rect={top:0,left:0,right:0,bottom:0,edge:this.edge,fill:'',className:''};var cBRect=$(this.contId).getBoundingClientRect();var eBRect=false;if(ele)eBRect=ele.getBoundingClientRect();if(this.disclosure.container!=''){var tBRect=$(this.disclosure.container).getBoundingClientRect();var leftOff=tBRect.left;var topOff=tBRect.top;var docWidth=tBRect.width;var docHeight=tBRect.height;}else{var leftOff=0;var topOff=0;var docWidth=document.documentElement.clientWidth;var docHeight=document.documentElement.clientHeight;}
if(type.split('-').shift()=='expand'){rect.top=cBRect.top-topOff;rect.bottom=docHeight-cBRect.bottom+topOff;rect.left=cBRect.left-leftOff;rect.right=docWidth-cBRect.right+leftOff;if(this.edge=='top'||this.edge=='bottom'){rect.fill='height';if(type=='expand-before'){rect.edge='left';}else if(type=='expand-after'){rect.edge='right';}else if(type=='expand-element'||type=='expand-element-cover'){if(eBRect.left>(cBRect.left+(cBRect.width/2))){rect.edge='right';if(type=='expand-element')rect.right=(docWidth-eBRect.left+leftOff);else rect.right=(docWidth-eBRect.right+leftOff);}else{rect.edge='left';if(type=='expand-element')rect.left=eBRect.right-leftOff;else rect.left=eBRect.left-leftOff;}}}else{rect.fill='width';if(type=='expand-before'){rect.edge='top';}else if(type=='expand-after'){rect.edge='bottom';}else if(type=='expand-element'||type=='expand-element-cover'){if(eBRect.top>(cBRect.top+(cBRect.height/2))){rect.edge='bottom';if(type=='expand-element')rect.bottom=(docHeight-eBRect.top+topOff);else rect.bottom=(docHeight-eBRect.bottom+topOff);}else{rect.edge='top';if(type=='expand-element')rect.top=eBRect.bottom-topOff;else rect.top=eBRect.top-topOff;}}}
rect.className=this.disclosure.expand[rect.edge+'ClassName'];}else if(type.split('-').shift()=='flyout'){if(this.edge=='top'||this.edge=='bottom'){if(this.edge=='top'){if(type=='flyout-element')rect.top=eBRect.bottom-topOff;else if(type=='flyout-element-cover')rect.top=eBRect.top-topOff;else rect.top=cBRect.bottom-topOff;}else{if(type=='flyout-element')rect.bottom=docHeight-eBRect.top+topOff;else if(type=='flyout-element-cover')rect.bottom=docHeight-eBRect.bottom+topOff;else rect.bottom=docHeight-cBRect.top+topOff;}
if(eBRect.left>(cBRect.left+(cBRect.width/2))){rect.align='after';rect.right=(docWidth-eBRect.right+leftOff);}else{rect.align='before';rect.left=eBRect.left-leftOff;}}else{if(this.edge=='left'){if(type=='flyout-element')rect.left=eBRect.right-leftOff;else if(type=='flyout-element-cover')rect.left=eBRect.left-leftOff;else rect.left=cBRect.right-leftOff;}else{if(type=='flyout-element')rect.right=docWidth-eBRect.left+leftOff;else if(type=='flyout-element-cover')rect.right=docWidth-eBRect.right+leftOff;else rect.right=docWidth-cBRect.left+leftOff;}
if(eBRect.top>(cBRect.top+(cBRect.height/2))){rect.align='after';rect.bottom=(docHeight-eBRect.bottom+topOff);}else{rect.align='before';rect.top=eBRect.top-topOff;}}}else if(type=='cover'){rect.top=cBRect.top-topOff;rect.bottom=docHeight-cBRect.bottom+topOff;rect.left=cBRect.left-leftOff;rect.right=docWidth-cBRect.right+leftOff;rect.fill='both';rect.className=this.disclosure.cover[rect.edge+'ClassName'];}else if(type.split('-').shift()=='screen'){rect.edge=type.split('-').pop();if(rect.edge=='left'||rect.edge=='right')rect.fill='height';else rect.fill='width';}else{if(this.edge=='top'){rect.left=cBRect.left-leftOff;rect.right=docWidth-cBRect.right+leftOff;rect.fill='width';if(type=='extend-element'){rect.top=eBRect.bottom-topOff;}else if(type=='extend-element-cover'){rect.top=eBRect.top-topOff;}else{rect.top=cBRect.bottom-topOff;if(type=='outside-before'){rect.fill='height';rect.edge='left';}else if(type=='outside-after'){rect.fill='height';rect.edge='right';}}}else if(this.edge=='bottom'){rect.left=cBRect.left-leftOff;rect.right=docWidth-cBRect.right+leftOff;rect.fill='width';if(type=='extend-element'){rect.bottom=docHeight-eBRect.top+topOff;}else if(type=='extend-element-cover'){rect.bottom=docHeight-eBRect.bottom+topOff;}else{rect.bottom=docHeight-cBRect.top+topOff;if(type=='outside-before'){rect.fill='height';rect.edge='left';}else if(type=='outside-after'){rect.fill='height';rect.edge='right';}}}else if(this.edge=='left'){rect.top=cBRect.top-topOff;rect.bottom=docHeight-cBRect.bottom+topOff;rect.fill='height';if(type=='extend-element'){rect.left=eBRect.right-leftOff;}else if(type=='extend-element-cover'){rect.left=eBRect.left-leftOff;}else{rect.left=cBRect.right-leftOff;if(type=='outside-before'){rect.fill='width';rect.edge='top';}else if(type=='outside-after'){rect.fill='width';rect.edge='bottom';}}}else if(this.edge=='right'){rect.top=cBRect.top-topOff;rect.bottom=docHeight-cBRect.bottom+topOff;rect.fill='height';if(type=='extend-element'){rect.right=docWidth-eBRect.left+leftOff;}else if(type=='extend-element-cover'){rect.right=docWidth-eBRect.right+leftOff;}else{rect.right=docWidth-cBRect.left+leftOff;if(type=='outside-before'){rect.fill='width';rect.edge='top';}else if(type=='outside-after'){rect.fill='width';rect.edge='bottom';}}}
rect.className=this.disclosure.extend[rect.edge+'ClassName'];}
return rect;},_showDisclosureComplete:function(){if(this._d.shown){var dd=this.disclosures[this._d.current.s.name];if(dd){if(dd.onShowComplete.constructor==Function)dd.onShowComplete.call(this,this._d.current.dEle);}}},_hideDisclosureComplete:function(){if(this._d.shown){this._d.shown=false;this.state.disclosure.shown=false;this._d.current.dEle.style.display='none';var dd=this.disclosures[this._d.current.s.name];if(dd){if(dd.onHide.constructor==Function)dd.onHide.call(this,this._d.current.dEle);}
if(this._d.next){this.showDisclosure(this._d.next,this._d.current.eleId);}else{this._d.ele.style.display='none';this._d.current=false;}
this.refresh();}},_refreshAnimComplete:function(){this._m.anim=false;if(this._m.next.has){this._m.next.has=false;this.refresh.apply(this,this._m.next.args);delete this._m.next.args;}},_relayout:function(){if(this._d.shown){var ci=this
clearTimeout(this._rdTO);this._rdTO=setTimeout(function(){ci.resizeDisclosure();delete ci},50);}
if(this._e.shown){var ci=this
clearTimeout(this._reTO);this._reTO=setTimeout(function(){ci._editPos();delete ci},50);}},_disClick:function(e,ci){if(ci._d.current){var cEle=$(ci.contId);var coor=$e.getCoors(e);var ele=document.elementFromPoint(coor.clientX,coor.clientY);if(!ele)return true;while(ele!=cEle&&ele!=document.body){if(ele.hasAttribute('a5-action'))ci.action(ele.getAttribute('a5-action'),{element:ele,event:e});else if(ele==ci._d.current.dEle)return true;ele=ele.parentNode;}
if(ci._d.current){if(!ci._d.current.s.autoHide)return true;ci.hideDisclosure();}}},_disCloseClick:function(e,ci){ci.hideDisclosure();},_editKeyup:function(e,ci){if(ci.state.edit.item!=''){if(ci._e.current.item.update!='done')ci.update(ci.state.edit.path,this.value);A5.controlBar.items.edit.event.call(ci,'keyup',ci.state.edit.item,this.value,ci.items[ci.state.edit.item],this,e);var keyCode=e.charCode||e.keyCode;if(keyCode==13)this.blur();}},_editBlur:function(e,ci){if(document.activeElement!=ci._e.ele&&document.activeElement!=ci._e.dEle&&ci.state.edit.item!=''){ci._e.shown=false;$(ci._e.current.id).style.visibility='';A5.controlBar.items.edit.event.call(ci,'done',ci.state.edit.item,this.value,ci.items[ci.state.edit.item],this,e);this.style.display='none';ci.state.edit.shown=false;ci.state.edit.item='';ci.state.edit.part='';if(ci._e.current.item.update=='done')ci.update(ci.state.edit.path,this.value);}},_editPos:function(){var tEle=$(this._e.current.id);if(tEle){if(this._e.current.p=='main')var ele=this._e.ele;else var ele=this._e.dEle;var eBRect=tEle.getBoundingClientRect();var peBRect=ele.parentNode.getBoundingClientRect();ele.style.top=(eBRect.top-peBRect.top)+'px';ele.style.left=(eBRect.left-peBRect.left)+'px';ele.style.width=eBRect.width+'px';ele.style.height=eBRect.height+'px';ele.style.display='';tEle.style.visibility='hidden';this._e.shown=true;}else{this._e.ele.style.display='none';this._e.dEle.style.display='none';this._e.shown=false;}},_down:function(e,ci){var r=ci._aEle(e);ci._startItem=false;if(r){ci._startItem={i:r.i,v:r.v,id:r.ele.id};if($ga(r.ele,'a5-disabled')!='true'&&!r.ele.disabled){var iObj=ci.items[r.i];if(iObj){var iTObj=A5.controlBar.items[iObj.type];if(iTObj){if(iTObj.event)iTObj.event.call(ci,'down',r.i,r.v,iObj,r.ele,e);}}}}
delete r;},_up:function(e,ci){var r=ci._aEle(e);if(r){if($ga(r.ele,'a5-disabled')!='true'&&!r.ele.disabled){var iObj=ci.items[r.i];if(iObj){var iTObj=A5.controlBar.items[iObj.type];if(iTObj){if(iTObj.event)iTObj.event.call(ci,'up',r.i,r.v,iObj,r.ele,e);}
if(A5.u.drag._sDif<$e.abstractEvents.click.scrollMax){var id='';if(ci._startItem){if(ci._startItem.i==r.i){id=r.ele.id;var dShown=ci._d.shown;if(iObj.disclosure){if(iObj.autoHideDisclosure!='auto')ci._d.internalShow=true;ci.showDisclosure(iObj.disclosure,r.ele);ci._d.internalShow=false;}else if(iObj.type=='edit'){if(ci.state.edit.shown){var tEle=$(ci._e.current.id);tEle.innerHTML=ci._e.ele.value;tEle.style.visibility='';}
ci._e.current={item:iObj,id:id,p:r.p};if(r.p=='main')var eEle=ci._e.ele;else var eEle=ci._e.dEle;eEle.className=iObj.settings.className;$ss(eEle,iObj.settings.style+'; position: absolute; top: 0px; left: 0px; margin: 0px; display: none; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;');var ev=A5.u.object.get(ci.data,iObj.bind.value);eEle.value=ev;ci._editPos();eEle.focus();eEle.select();ci.state.edit.shown=true;ci.state.edit.item=r.i;ci.state.edit.part=r.p;ci.state.edit.path=iObj.bind.value;}
if(iTObj){if(iTObj.event)iTObj.event.call(ci,'click',r.i,r.v,iObj,r.ele,e);}
if(dShown&&!ci._d.next&&ci._d.current){if(iObj.autoHideDisclosure){var hide=false;if(iObj.autoHideDisclosure=='always')hide=true;else if(iObj.autoHideDisclosure!='never'&&ci._d.current.s.autoHide)hide=true;if(hide)ci.hideDisclosure();}}}}
if(this._oid==id)this._isdc=true;else{this._isdc=false;this._oid=id;}}}}}
delete r;},_dblClick:function(e,ci){if(!this._isdc)return false;var r=ci._aEle(e);if(r){if($ga(r.ele,'a5-disabled')!='true'&&!r.ele.disabled){var iObj=ci.items[r.i];if(iObj){var iTObj=A5.controlBar.items[iObj.type];if(iTObj){if(iTObj.event)iTObj.event.call(ci,'dblclick',r.i,r.v,iObj,r.ele,e);}}}}
delete r;},_rClick:function(e,ci){var r=ci._aEle(e);if(r){if($ga(r.ele,'a5-disabled')!='true'&&!r.ele.disabled){var iObj=ci.items[r.i];if(iObj){var iTObj=A5.controlBar.items[iObj.type];if(iTObj){if(iTObj.event)iTObj.event.call(ci,'contextclick',r.i,r.v,iObj,r.ele,e);}}}}
delete r;},_downHold:function(e,ci){var r=ci._aEle(e);if(r){if($ga(r.ele,'a5-disabled')!='true'&&!r.ele.disabled){var iObj=ci.items[r.i];if(iObj){var iTObj=A5.controlBar.items[iObj.type];if(iTObj){if(iTObj.event)iTObj.event.call(ci,'downhold',r.i,r.v,iObj,r.ele,e);}}}}
delete r;},_swipe:function(e,ci){if(ci._startItem){var r=ci._startItem;var ele=$(r.id);if($ga(ele,'a5-disabled')!='true'&&!ele.disabled){var iObj=ci.items[r.i];if(iObj){var iTObj=A5.controlBar.items[iObj.type];if(iTObj){if(iTObj.event)iTObj.event.call(ci,'swipe',r.i,r.v,iObj,ele,e);}}}}},_aEle:function(e){var cEle=$(this.contId);var coor=$e.getCoors(e);var ele=document.elementFromPoint(coor.clientX,coor.clientY);if(!ele)return false;var result=false;var i='';while(ele!=cEle&&ele!=document.body){if(!result){i=$ga(ele,'a5-item');if(i!=null&&i!=''){var v=this._getValue(ele);result={i:i,v:v,ele:ele,p:'disclosure'};}}
ele=ele.parentNode;}
if(ele==cEle&&result)result.p='main';return result;},_getValue:function(ele){var v=$ga(ele,'a5-value');if(v==''||v==null)v=ele.id;return v;},_bindEvents:function(ele){var egName='CONTROLBAR.'+this.contId;$e.add(ele,A5.d.evnts.dblClick,this._dblClick,this,false,egName);$e.add(ele,'contextmenu',this._rClick,this,false,egName);$e.add(ele,A5.d.evnts.down,this._down,this,false,egName);$e.add(ele,A5.d.evnts.up,this._up,this,false,egName);$e.add(ele,'abstractdownhold',this._downHold,this,false,egName);$e.add(ele,'abstractswipe',this._swipe,this,false,egName);},_compileTemplate:function(cl,edge){if(typeof cl._t=='undefined')cl._t={};if(typeof cl._t[edge]=='undefined'){var tLines=[];var l=null;var ti=null;var cn='';var temp=[];var name='';var tHTML='';var tPH='';for(var i=0;i<cl.lines.length;i++){l=cl.lines[i];$u.o.assign(l,A5.controlBar._.lDefs,true);cn='A5ControlBarLine';if(l.type!='custom'){if(l.middle.items.length==0){if(l.before.items.length==0)cn='A5ControlBarLine A5ControlBarLineAfter';else cn='A5ControlBarLine A5ControlBarLineBefore';}}else cn='A5ControlBarLineCust';temp=['<div class="'+cn+' '+l.className+'" style="'+l.style+'">'];if(l.type=='custom'){tHTML=l.html;for(var item in this.items){tPH='['+item+']';if(tHTML.indexOf(tPH)!=-1)tHTML=tHTML.split(tPH).join(this.items[item].template);}
temp.push(tHTML);}else{if(l.before.items.length!=0){temp.push('<div class="A5ControlBarLineContentBefore">&#65279;');for(var k=0;k<l.before.items.length;k++){name=l.before.items[k];if(name=='-'){temp.push('<div class="A5ControlBarItem A5CONTROLBARSEPCLASSNAME">&#65279;</div>');}else if(name[0]=='<'){name=name.substring(1,name.length-1).trim();temp.push('<div class="A5ControlBarItem" style="A5CONTROLBARITEMSIZE: '+name+';"></div>');}else if(this.items[name])temp.push(this.items[name].template);}
temp.push('</div>');}
if(l.middle.items.length!=0){temp.push('<div class="A5ControlBarLineContentMiddle">&#65279;');for(var k=0;k<l.middle.items.length;k++){name=l.middle.items[k];if(name=='-'){temp.push('<div class="A5ControlBarItem A5CONTROLBARSEPCLASSNAME">&#65279;</div>');}else if(name[0]=='<'){name=name.substring(1,name.length-1).trim();temp.push('<div class="A5ControlBarItem" style="A5CONTROLBARITEMSIZE: '+name+';"></div>');}else if(this.items[name])temp.push(this.items[name].template);}
temp.push('</div>');}
if(l.after.items.length!=0){temp.push('<div class="A5ControlBarLineContentAfter">&#65279;');for(var k=0;k<l.after.items.length;k++){name=l.after.items[k];if(name=='-'){temp.push('<div class="A5ControlBarItem A5CONTROLBARSEPCLASSNAME">&#65279;</div>');}else if(name[0]=='<'){name=name.substring(1,name.length-1).trim();temp.push('<div class="A5ControlBarItem" style="A5CONTROLBARITEMSIZE: '+name+';"></div>');}else if(this.items[name])temp.push(this.items[name].template);}
temp.push('</div>');}}
temp.push('</div>');if(l.bind.show!=''){temp.unshift('{*if '+l.bind.show+'}')
temp.push('{*endif}');}
tLines.push(temp.join(''));}
if(edge=='left'){tLines.unshift('<div class="A5ControlBarVert">');tLines.push('</div>');}else if(edge=='bottom'){tLines.reverse();tLines.unshift('<div class="A5ControlBarHorz">');tLines.push('</div>');}else if(edge=='right'){tLines.reverse();tLines.unshift('<div class="A5ControlBarVert">');tLines.push('</div>');}else{tLines.unshift('<div class="A5ControlBarHorz">');tLines.push('</div>');}
tLines=tLines.join('');if(edge=='left'||edge=='right'){tLines=tLines.replace(/A5CONTROLBARITEMSIZE/gi,'height');tLines=tLines.replace(/A5CONTROLBARSEPCLASSNAME/gi,this.separator.verticalClassName);}else{tLines=tLines.replace(/A5CONTROLBARITEMSIZE/gi,'width');tLines=tLines.replace(/A5CONTROLBARSEPCLASSNAME/gi,this.separator.horizontalClassName);}
cl._t[edge]=A5.u.template.parse(tLines);}}});};
A5._windowDefaults={title:{tools:{defaults:{'close':{action:'close',name:'close',image:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAB/klEQVR42qWTPU9qQRCGn92zh0BskGMBFbmlPZHWhopgbWNj/EmWJ7EiASztKK39BZiTGwtCSCAaPIrZz9vIBu69nZtMss3MPO87MyKEwE+eAphOp7+staPNZtNxzknnHN57vPf8/Q8h+DRNn5RSlzc3N78VgLV2dHp6etZut3HOYa2NYYzBGIPWGmMMX19fsiiKs/l8PgK6CmCz2XTa7TYfHx8453h/f0dKidY6RlmWfDej1Woxm806ABJgh22MYTKZcHt7GxMAPj8/ub+/5/HxEe89u5z9AlhrKcuSoihYLBbkeU5ZlpRlyXg8ZrVasVgs0FpHX6KJ3nustUgpub6+Js9zlssld3d3hBBYr9dkWUa/3ydJEpxzOOeIBN77aFSaplxdXXFycsJqtWK9XtNoNBgMBlQqldjsgGAnQWsNgDGG/f0IIcQxOucQQvxLsHP77e2N4XAYOx8fH/P6+srDw0OckjEmEhxI2DcsyzIuLi4YDAaxyHQ6ZbvdHkiIUzDGANBsNmk0GvT7fZRSJElCr9ejXq+TZRlCiCgnehBC8NvtVlpr6Xa7aK3jInnvSZKE8/NzhBAAaK0JIfhIkKbpU1EUVCoVqtUqR0dHJEmClJKdRKUUQgiMMby8vFCr1Z4igVLqcj6fj56fnzvOObl/RP87pu/kSwDx03P+A1+yn0B7bDkwAAAAAElFTkSuQmCC'}}}}}
A5.serverSideDateFormat = 'dd/MM/yyyy';
A5.u.drag.useDragScrolling = 'auto';
if(typeof DLG1_DlgObj == 'object') { 
	DLG1_DlgObj._destroy();
	try {
		delete DLG1_DlgObj;
	} catch(e) {
		DLG1_DlgObj = undefined;
	}
};
;if(typeof DLG1_PanelObj != 'undefined' && DLG1_PanelObj) {
	var ele = $(DLG1_PanelObj.getPanelId());
	if(ele) {
		if(ele.parentNode) ele.parentNode.removeChild(ele);
	}
	delete DLG1_PanelObj;
}
;window['DLG1_PanelObj'] = new A5.PanelNavigator([
{
	name: 'SIGNIN_PANELCARD',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div  id="DLG1.V.R1.CONTAINER_8_2"   \r\n   A5-containerType="none"\r\n   class="A5CWLayout "  style="padding-top: 0px; padding-left: 0px; padding-right: 0px; padding-bottom: 20px; display: flex; width: 100%; justify-content: center; "  >\r\n<div class="A5CWLayout"  style=" padding: 0px; ">\r\n<div  id="DLG1.V.R1.CONTAINER_240_2"   \r\n   A5-containerType="none"\r\n   class="A5CWLayout "  style="padding: 0px; display: flex; width: 100%; justify-content: center; "  >\r\n<div class="A5CWLayout"  style=" padding: 0px; ">\r\n<div class="A5CWLayout" style="width: 200px" >\r\n <div id="DLG1.V.R1.IMAGE_5_1" style="z-index:10000; width: 100%; height: 50px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ; padding:0;margin:0;"    >\r\n  <img src="Amiga_logo_pcs_CroppedXS.png" class="" style="width: 100%; height: 50px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" title=""  onerror="if(typeof DLG1_DlgObj != \'undefined\') DLG1_DlgObj._executeEvent(\'onImageError\',{element: this});"  />\r\n </div>\r\n</div><br  style="clear:both; " />\r\n</div><div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n <br  id="DLG1.V.R1.CONTAINER_240_2.BREAK"  style="clear:both; " />\r\n</div><div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n <br  id="DLG1.V.R1.CONTAINER_8_2.BREAK"  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 35%" >\r\n <div id="SPACER_19" style="width: 100%; height: 1px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; font: 0pt Arial;">&nbsp;</div>\r\n</div>\r\n \r\n<div class="A5CWLayout" style="width: " >\r\n <div id="DLG1.V.R1.STATICTEXT_15" title=""  class="" style="font-size: 20px; font-weight: bolder; font-variant: small-caps; height: 50px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   ><span id="_language_LOGIN" class="_language">L O G I N</span>\r\n</div>\r\n</div>\r\n<div class="A5CWLayout" style="width: " >\r\n <div id="DLG1.V.R1.IMAGE_6" style="z-index:10000; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ; padding:0;margin:0;"    >\r\n  <img src="settings-778.png" class="" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" title=""  onerror="if(typeof DLG1_DlgObj != \'undefined\') DLG1_DlgObj._executeEvent(\'onImageError\',{element: this});"  />\r\n </div>\r\n</div>\r\n<div class="A5CWLayout" style="width: 20%" >\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.LANG" \r\n  title=""\r\n  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.LANG"  \r\n   onChange="var tfunc = function() {onChange_lang_bdce615dc462445dbbb22017a9d994da.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n<option value=""></option> <option value="english">en</option> <option value="arabic">ar</option> \r\n</select>\r\n\r\n</div><br  style="clear:both; " />\r\n<div  id="DLG1.V.R1.CONTAINER_241"   \r\n   A5-containerType="none"\r\n   class="A5CWLayout "  style="padding: 0px; margin-left: 3%; width: 95%; "  >\r\n<div class="A5CWLayout" style="width: 40%" >\r\n <label id="DLG1.LBL.R1.REPID" for="DLG1.V.R1.REPID" title="" class="label" style="display:block;"><span id="_language_REPID" class="_language">Rep ID</span></label>\r\n\r\n <table id="DLG1.V.R1.REPID.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\r\n<tr>\r\n<td style="width:100%">\r\n <input   id="DLG1.V.R1.REPID" name="V.R1.REPID"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="text-align: right; font-size: 10pt; width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\r\n \r\n</td>\r\n  <td class="" >&nbsp;</td>\r\n  <td id="DLG1.V.R1.REPID.CUSTOMBUTTON.0"  class="editBGButton" style="width: 0%;"><svg     title="" style="vertical-align: middle; ; fill: #f53d3d;" width="42" height="42" class="icon" ><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-checkCircle"  pointer-events="none" /></svg></td>\r\n </tr>\r\n</table>\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 60%" >\r\n <label id="DLG1.LBL.R1.MEDREP" for="DLG1.V.R1.MEDREP" title="" class="label" style="text-align: Center; display: block; "><span id="_language_REPNAME" class="_language">Rep. Name</span></label>\r\n\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.MEDREP" \r\n  title="pppp"\r\n  style="font-size: 10pt; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.MEDREP"  \r\n   onChange="var tfunc = function() {onChange_MedRep_e990b731369945df8805870e5793ad1a.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n<option value="a:Select a representative">a:Select a representative</option> \r\n</select>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout"      style="width: ; "  >\r\n <div>\r\n <fieldset id="DLG1.V.R1.FRAME_2" a5-containertype="framesimple" class="" style="-moz-border-radius: 8px;display:inline; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" >\r\n <legend class="" style=""  >POI  to Load</legend>\r\n<div class="A5CWLayout" style="width: 40%" >\r\n <label id="DLG1.LBL.R1.REPID_1" for="DLG1.V.R1.REPID_1" title="" class="label" style="display:block;">Rep Id</label>\r\n\r\n <table id="DLG1.V.R1.REPID_1.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\r\n<tr>\r\n<td style="width:100%">\r\n <input   id="DLG1.V.R1.REPID_1" name="V.R1.REPID_1"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="text-align: right; font-size: 10pt; width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\r\n \r\n</td>\r\n  <td class="" >&nbsp;</td>\r\n  <td id="DLG1.V.R1.REPID_1.CUSTOMBUTTON.0"  class="editBGButton" style="width: 0%;"><svg     title="" style="vertical-align: middle; ; fill: #f53d3d;" width="42" height="42" class="icon" ><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-checkCircle"  pointer-events="none" /></svg></td>\r\n </tr>\r\n</table>\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 60%" >\r\n <label id="DLG1.LBL.R1.MEDREP_1" for="DLG1.V.R1.MEDREP_1" title="" class="label" style="text-align: Center; display: block; ">Rep. Name</label>\r\n\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.MEDREP_1" \r\n  title="pppp"\r\n  style="font-size: 10pt; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.MEDREP_1"  \r\n   onChange="var tfunc = function() {onChange_MedRep_1_ec87e600a65f49728836c0055897c68f.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n<option value="a:Select a representative">a:Select a representative</option> \r\n</select>\r\n\r\n</div><br  style="clear:both; " />\r\n</fieldset>\r\n</div>\r\n</div>\r\n<br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <table id="DLG1.V.R1.DATE.CONTAINER" cellspacing="0" cellpadding="0" class="editBGPrimary" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\r\n<tr>\r\n<td style="width:100%">\r\n <input   id="DLG1.V.R1.DATE" name="V.R1.DATE"  value=""  readonly="readonly"  autocomplete="off"   size="200" class="editBGEdit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\r\n \r\n</td>\r\n  <td class="" >&nbsp;</td>\r\n  <td id="DLG1.V.R1.DATE.BUTTON" class="editBGButton" style="width: 0%;" ><svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg></td>\r\n  <td id="DLG1.V.R1.DATE.CUSTOMBUTTON.0"  class="editBGButton" style="width: 0%;"><svg     title="" style="vertical-align: middle; ; stroke: #f70808;" width="30" height="30" ><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-cloudLightning"  pointer-events="none" /></svg></td>\r\n </tr>\r\n</table>\r\n\r\n</div><br  style="clear:both; " />\r\n<form onsubmit="__preventDefault(event);"><div class="A5CWLayout" style="width: 100%" >\r\n <table id="DLG1.V.R1.PASSWORD.CONTAINER" cellspacing="0" cellpadding="0" class="editBGPrimary" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\r\n<tr>\r\n<td style="width:100%">\r\n <input  type="password"   id="DLG1.V.R1.PASSWORD" name="V.R1.PASSWORD"  value=""  onBlur="DLG1_DlgObj.setValueFrom(\'textbox3\',\'MedRep\'); return; var _onOffline = function() { }; var _onServerNotAvailable = function() { ; }; var _onSuccess = function(data) { DLG1_DlgObj.setValue(\'vPAssword\',data[0].Password); DLG1_DlgObj.setValue(\'vSecurity\',data[0].SecurityType); }; var _onFail = function() { ; }; mMedRepId = DLG1_DlgObj.getValue(\'MedRep\'); var _filter = \'data.ID==&quot;\'+mMedRepId+\'&quot;\'; var _order = \'\'; function _refreshThenReadItem(items,_onRead,_onOffline,_onServerUnavailable, _onFail, _filer,_order) {  var _onCompleteREAD = _onRead;  var _onOffline = function() {   if(typeof _onOffline == \'function\') _onOffline();   DLG1_DlgObj.getFromDataCache(items,_onSuccess,_onFail,_filter,_order,_onOffline,_onServerNotAvailable);  };  var _onServerNotAvailable = function() {   if(typeof _onServerUnavailable == \'function\') _onServerUnavailable();   DLG1_DlgObj.getFromDataCache(items,_onSuccess,_onFail,_filter,_order,_onOffline,_onServerNotAvailable);  };  var flagOnline = DLG1_DlgObj._getOnlineStatus();  if(!flagOnline) {   _onOffline();  } else {   var _onServerIsAvailable = function() {    var _onRefreshOK = function() {     DLG1_DlgObj.getFromDataCache(items,_onSuccess,_onFail,_filter,_order,_onOffline,_onServerNotAvailable);    }     DLG1_DlgObj.refreshDataCacheItem(items,_onRefreshOK);    }   DLG1_DlgObj.serverIsAvailable(300,_onServerIsAvailable,_onServerNotAvailable);  } }  _refreshThenReadItem(\'medreps\',_onSuccess, _onOffline,_onServerNotAvailable,_onFail,_filter,_order)"   autocomplete="off"   size="200" class="edit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\r\n \r\n</td>\r\n  <td class="" >&nbsp;</td>\r\n  <td id="DLG1.V.R1.PASSWORD.CUSTOMBUTTON.0"  class="editBGButton" style="width: 0%;"><span title="" style=""><span id="_language_CHPASS" class="_language">Change Password</span></span></td>\r\n </tr>\r\n</table>\r\n\r\n</div></form>\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n <br  id="DLG1.V.R1.CONTAINER_241.BREAK"  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 5%" >\r\n <div id="SPACER_18" style="width: 100%; height: 1px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; font: 0pt Arial;">&nbsp;</div>\r\n</div>\r\n \r\n<div class="A5CWLayout" style="width: 2in" >\r\n <input type="text" id="DLG1.V.R1.TEXTBOX3" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_textbox3_8793c92bd62e4b6ba826cfbd328e9e74.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TEXTBOX3"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <input type="text" id="DLG1.V.R1.PASSOK" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_passok_d5cc36fb866549929eceeb5600b802fb.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.PASSOK"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <input type="text" id="DLG1.V.R1.VPASSWORD" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_vPAssword_139e9860e87c4f9daa89d41d7c349c19.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.VPASSWORD"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <input type="text" id="DLG1.V.R1.VSECURITY" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_vSecurity_6b30f65774254a79a8902ad4f0665ec0.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.VSECURITY"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.SYNCINPROGRESS" for="DLG1.V.R1.SYNCINPROGRESS" title="" class="label" style="display:block;">syncinprogress</label>\r\n\r\n <input type="text" id="DLG1.V.R1.SYNCINPROGRESS" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_syncinprogress_8857c570c1cb4fff96eba26001b9f707.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.SYNCINPROGRESS"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.FAILEDSYNC" for="DLG1.V.R1.FAILEDSYNC" title="" class="label" style="display:block;">syncinprogress</label>\r\n\r\n <input type="text" id="DLG1.V.R1.FAILEDSYNC" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_failedsync_ae132b6693394052bba691b191901aa2.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.FAILEDSYNC"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 25%" >\r\n <div id="SPACER_17" style="width: 100%; height: 1px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; font: 0pt Arial;">&nbsp;</div>\r\n</div><br style="clear:both;" />\r\n \r\n<div class="A5CWLayout" style="width: 2in" >\r\n <input type="text" id="DLG1.V.R1.MEDREPNAME" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_medrepname_88449100368d47b689eaa871feb971c1.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.MEDREPNAME"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div  id="DLG1.V.R1.CONTAINER_238"   \r\n   A5-containerType="none"\r\n   class=""  style="padding: 0px; margin-left: 10%; width: 80%; "  >\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_30_2"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div  id="DLG1.V.R1.CONTAINER_239"   \r\n   A5-containerType="none"\r\n   class="A5CWLayout "  style="width: 100%; "  >\r\n<div class="A5CWLayout" style="width: 10%" >\r\n <input type="text" id="DLG1.V.R1.AUTOSAVEINV" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_autosaveinv_436ba4e27c484439ab93f566366c242d.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.AUTOSAVEINV"    value=""    />\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 10%" >\r\n <input type="text" id="DLG1.V.R1.HIDEBONUS" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_hidebonus_efdb01549b214ccf8c31ef10f40dfab9.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.HIDEBONUS"    value=""    />\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 20%" >\r\n <input type="text" id="DLG1.V.R1.COMPANYID" title=""     class="edit " style="font-size: 14pt; font-weight: bolder; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_COMPANYID_ba5f49449dee4fd391ce734b020e4bd8.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.COMPANYID"    value=""    />\r\n\r\n</div>\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n <br  id="DLG1.V.R1.CONTAINER_239.BREAK"  style="clear:both; " />\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div class="A5CWLayout" style="width: 100%" >\r\n \r\n\r\n<div id="DLG1.V.R1.SLIDER1.CONTROL"  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; "></div>\r\n\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div style="display:none;"></div>'
	},
	footer: {
		html: '<div style="display:table; margin:auto;"><div class="A5CWLayout" style="width: " >  <div id="DLG1.V.R1.STATICTEXT_8" title=""  class="" style="font-size: 7pt; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   ><strong>Copyright 2019-2025 PCS  Version 1.3.0 (build  92)</strong></div> </div> </div>',
		show: true
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('SIGNIN_PANELCARD',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('SIGNIN_PANELCARD'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('SIGNIN_PANELCARD')
},0);
},
	onView: function() {setTimeout(function(){
 mcp1 = DLG1_DlgObj.getValue('CompanyCode');
 mcp2 = DLG1_DlgObj.getValue('CompanyName');
 console.log(mcp1);
 console.log(mcp2);
 if (mcp1=='' || mcp2 == '')  {
  DLG1_DlgObj.panelSetActive('PANELCARD_SETTING');
  return;
  }
 mcpn = DLG1_DlgObj.getValue('CompanyName');
 DLG1_DlgObj.setValue('textbox2',mcpn);
 DLG1_DlgObj.setValueFrom('MedRep','repid');
},1250);;
;setTimeout(function() {
 if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('SIGNIN_PANELCARD')
},0);},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_SETTING',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div  id="DLG1.V.R1.CONTAINER_8_1"   \r\n   A5-containerType="none"\r\n   class="A5CWLayout "  style="padding: 0px; display: flex; width: 100%; justify-content: center; "  >\r\n<div class="A5CWLayout"  style=" padding: 0px; ">\r\n<div  id="DLG1.V.R1.CONTAINER_240_1"   \r\n   A5-containerType="none"\r\n   class="A5CWLayout "  style="padding: 0px; display: flex; width: 100%; justify-content: center; "  >\r\n<div class="A5CWLayout"  style=" padding: 0px; ">\r\n<div class="A5CWLayout" style="width: 200px" >\r\n <div id="DLG1.V.R1.IMAGE_5" style="z-index:10000; width: 100%; height: 50px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ; padding:0;margin:0;"    >\r\n  <img src="Amiga_logo_pcs_CroppedXS.png" class="" style="width: 100%; height: 50px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" title=""  onerror="if(typeof DLG1_DlgObj != \'undefined\') DLG1_DlgObj._executeEvent(\'onImageError\',{element: this});"  />\r\n </div>\r\n</div><br  style="clear:both; " />\r\n</div><div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n <br  id="DLG1.V.R1.CONTAINER_240_1.BREAK"  style="clear:both; " />\r\n</div><div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n <br  id="DLG1.V.R1.CONTAINER_8_1.BREAK"  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 0px" >\r\n <div id="SPACER_20" style="width: 100%; height: 15px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; font: 0pt Arial;">&nbsp;</div>\r\n</div>\r\n \r\n<div  id="DLG1.V.R1.CONTAINER_10"   \r\n   A5-containerType="none"\r\n   class="A5CWLayout "  style="padding: 0px; width: 100%; "  >\r\n<div class="A5CWLayout" style="width: 40%" >\r\n <label id="DLG1.LBL.R1.COMPANYCODE" for="DLG1.V.R1.COMPANYCODE" title="" class="label" style="display:block;">CompanyCode</label>\r\n\r\n <table id="DLG1.V.R1.COMPANYCODE.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\r\n<tr>\r\n<td style="width:100%">\r\n <input   id="DLG1.V.R1.COMPANYCODE" name="V.R1.COMPANYCODE"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="font-size: 10pt; font-weight: bolder; padding: 0px; width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\r\n \r\n</td>\r\n  <td   style="width: 0%;"><span id="DLG1.V.R1.COMPANYCODE.CUSTOMBUTTONSTATIC.0"><svg     title="" style="vertical-align: middle; ; fill: #f51111;" width="24" height="24" class="icon" ><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-cloudLightning"  pointer-events="none" /></svg></span></td>\r\n </tr>\r\n</table>\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.COMPANYNAME" for="DLG1.V.R1.COMPANYNAME" title="" class="label" style="display:block;">Welcome To :</label>\r\n\r\n <input type="text" id="DLG1.V.R1.COMPANYNAME" title=""     class="edit " style="font-size: 10pt; font-weight: bolder; padding: 0px; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_CompanyName_4d3dbfff40e64212b9b199ee79ac6ea8.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.COMPANYNAME"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n <br  id="DLG1.V.R1.CONTAINER_10.BREAK"  style="clear:both; " />\r\n<div  id="DLG1.V.R1.CONTAINER_238_1"   \r\n   A5-containerType="none"\r\n   class=""  style="padding: 0px; margin-left: 10%; width: 80%; "  >\r\n<div class="A5CWLayout" style="width: 0px" >\r\n <div id="SPACER_20_1" style="width: 100%; height: 15px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; font: 0pt Arial;">&nbsp;</div>\r\n</div>\r\n \r\n<div class="A5CWLayout" style="width: 100%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_30_1"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div style="display:none;"></div>'
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_SETTING',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_SETTING'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_SETTING')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_SETTING')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_MENU',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.LIST2" for="DLG1.V.R1.LIST2" title="" class="label" style="display:block;">LIST1</label>\r\n\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LIST2.CONTROL"  class="DLG1_LIST2" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: 27px" >  <div id="DLG1.V.R1.IMAGE_4" style="z-index:10000; width: 100%; height: 22px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ; padding:0;margin:0;"    >   <img src="low.png" class="" style="width: 100%; height: 22px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" title=""  onerror="if(typeof DLG1_DlgObj != \'undefined\') DLG1_DlgObj._executeEvent(\'onImageError\',{element: this});"  />  </div> </div> <div class="A5CWLayout" style="width: 15%" >  <input type="text" id="DLG1.V.R1.MESSLOW_" title=""     class="edit " style="color: #fff; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_MessLow__943c93295aff4bc48f1e5de77ccb9f30.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.MESSLOW_"    value=""   readonly="readonly"   />  </div> <div class="A5CWLayout" style="width: 27px" >  <div id="DLG1.V.R1.IMAGE_3" style="z-index:10000; width: 100%; height: 22px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ; padding:0;margin:0;"    >   <img src="medium.png" class="" style="width: 100%; height: 22px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" title=""  onerror="if(typeof DLG1_DlgObj != \'undefined\') DLG1_DlgObj._executeEvent(\'onImageError\',{element: this});"  />  </div> </div> <div class="A5CWLayout" style="width: 15%" >  <input type="text" id="DLG1.V.R1.MESSMEDIUM_" title=""     class="edit " style="color: #fff; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_MessMedium__40d1b6a410d54c27af48d5e8820529a6.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.MESSMEDIUM_"    value=""   readonly="readonly"   />  </div> <div class="A5CWLayout" style="width: 27px" >  <div id="DLG1.V.R1.IMAGE_3_1" style="z-index:10000; width: 100%; height: 22px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ; padding:0;margin:0;"    >   <img src="hight.png" class="" style="width: 100%; height: 22px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" title=""  onerror="if(typeof DLG1_DlgObj != \'undefined\') DLG1_DlgObj._executeEvent(\'onImageError\',{element: this});"  />  </div> </div> <div class="A5CWLayout" style="width: 15%" >  <input type="number" id="DLG1.V.R1.MESSHIGHT_" title=""     class="editPrimary " style="color: #fff; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_MessHight__f164343db54b44a8829061f848dc0c91.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.MESSHIGHT_"    value=""   readonly="readonly"   />  </div> <div class="A5CWLayout" style="width: 22px" >  <div id="DLG1.V.R1.IMAGE_2" style="z-index:10000; width: 100%; height: 20px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ; padding:0;margin:0;"    >   <img src="alert.png" class="" style="width: 100%; height: 20px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" title=""  onerror="if(typeof DLG1_DlgObj != \'undefined\') DLG1_DlgObj._executeEvent(\'onImageError\',{element: this});"  />  </div> </div> <div class="A5CWLayout" style="width: 15%" >  <input type="text" id="DLG1.V.R1.MESSALERT_" title=""     class="edit " style="color: #fff; font-size: 8pt; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_MessAlert__d061b888cabf4485989284afd3d7064a.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.MESSALERT_"    value=""   readonly="readonly"   />  </div><br  style="clear:both; " /> <div  id="DLG1.V.R1.CONTAINER_246"       A5-containerType="none"    class="A5CWLayout "  style="width: 100%; "  > <div class="A5CWLayout" style="width: 99%" >  <div  id="DLG1.V.R1.SLIDERSAVING.SLIDERMESSAGEWRAPPER"   style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; "  >     <div id="DLG1.V.R1.SLIDERSAVING.SLIDERMESSAGEOUTERCONTAINER" __class2__ style="" > <span style="display:;" id="DLG1.V.R1.SLIDERSAVING.SLIDERMESSAGECONTAINER"></span>&nbsp;</div> <div id="DLG1.V.R1.SLIDERSAVING.CONTROL"  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; "></div>   </div> </div><br  style="clear:both; " /> <div class="A5CWLayout" style="width: 100%" >  <div id="DLG1.V.R1.STATICTEXT_16" title=""  class="" style="text-align: center; color: #fff; background-color: #f00; font-size: 12pt; font-weight: bolder; font-variant: small-caps; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >You have unsynchronised Data</div> </div> <div class="A5CWLayout" style="width: 100%" >  <div id="DLG1.V.R1.STATICTEXT_2" title=""  class="" style="text-align: center; color: #fff; background-color: #f00; font-size: 12pt; font-weight: bolder; font-variant: small-caps; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onclick="DLG1_DlgObj.panelSetActive(\'PANELCARD_47\');"  >You have unsynchronised Location</div> </div> <div style="display:none;font: 0pt arial;clear:both;"></div>   </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LIST2'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_MENU',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_MENU'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_MENU')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_MENU')
},0);
},
	onActivate: function() {setTimeout(function(){
	translatepanels();	
},1500)
},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_2',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.LSTROUTES" for="DLG1.V.R1.LSTROUTES" title="" class="label" style="display:block;">LSTROUTES</label>\r\n\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTROUTES.CONTROL"  class="DLG1_LSTROUTES" style="overflow: auto; width: 100%; height: 100%; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_28" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout" style="width: 100%" >  <button type="button" id="DLG1.V.R1.BUTTON_33"    ></button> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTROUTES'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_2',this);try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_28'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_2'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_2')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_2')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_16',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.LSTOFFROUTE" for="DLG1.V.R1.LSTOFFROUTE" title="" class="label" style="display:block;">LSTROUTES</label>\r\n\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTOFFROUTE.CONTROL"  class="DLG1_LSTOFFROUTE" style="overflow: auto; width: 100%; height: 100%; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_30" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div><br  style="clear:both; " /> <div class="A5CWLayout" style="width: 100%" >  <table id="DLG1.V.R1.SEARCH_OFFROUTE.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; "> <tr> <td style="width:100%">  <input   id="DLG1.V.R1.SEARCH_OFFROUTE" name="V.R1.SEARCH_OFFROUTE"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />   </td>   <td class="" >&nbsp;</td>   <td id="DLG1.V.R1.SEARCH_OFFROUTE.CUSTOMBUTTON.0"  class="editBGButton" style="width: 0%;"><svg    title = "" style = "vertical-align: middle; " class="icon iconButton"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-x"  pointer-events="none" /></svg></td>   <td id="DLG1.V.R1.SEARCH_OFFROUTE.CUSTOMBUTTON.1"  class="editBGButton" style="width: 0%;"><svg     title="" style="vertical-align: middle; ; fill: #f51313; stroke: #000;" width="50" height="50" class="icon" ><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-magGlass"  pointer-events="none" /></svg></td>  </tr> </table>  </div><br  style="clear:both; " /> <div class="A5CWLayout" style="width: 40%" >  <button type="button" id="DLG1.V.R1.BUTTON_27"    ></button> </div> <div class="A5CWLayout" style="width: 40%" >  <button type="button" id="DLG1.V.R1.BUTTON_38"    ></button> </div> <div class="A5CWLayout" style="width: 20%" >  <button type="button" id="DLG1.V.R1.BUTTON_138"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout" style="width: 100%" >  <button type="button" id="DLG1.V.R1.BUTTON_34"    ></button> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTOFFROUTE'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_16',this);try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_30'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_16'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_16')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_16')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_4',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout  A5FloatingLabelCont" style="width: 40%" >\r\n <label id="DLG1.LBL.R1.VISITTYPE" for="DLG1.V.R1.VISITTYPE" title="" class="label A5FloatingLabel " style="display:block;">Visit Type</label>\r\n\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.VISITTYPE" \r\n  title="Visit Type"\r\n  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.VISITTYPE"  \r\n   onchange="var tfunc = function() {onChange_VisitType_8a3abc88bbc14f289e7b83484a105534.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n\r\n</select>\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 10%" >\r\n <div id="DLG1.V.R1.STATICTEXT_9" title=""  class="" style="color: #f00; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >*</div>\r\n</div>\r\n<div class="A5CWLayout  A5FloatingLabelCont" style="width: 40%" >\r\n <label id="DLG1.LBL.R1.VISITOBJECTIVE" for="DLG1.V.R1.VISITOBJECTIVE" title="" class="label A5FloatingLabel " style="display:block;">Visit Objective</label>\r\n\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.VISITOBJECTIVE" \r\n  title=""\r\n  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.VISITOBJECTIVE"  \r\n   onchange="var tfunc = function() {onChange_VisitObjective_0e5f8291b7a74414a1b7a15b5fe6c44f.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n\r\n</select>\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 10%" >\r\n <div id="DLG1.V.R1.STATICTEXT_10" title=""  class="" style="color: #f00; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >*</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout  A5FloatingLabelCont" style="width: 90%" >\r\n <label id="DLG1.LBL.R1.SUPERVISOR" for="DLG1.V.R1.SUPERVISOR" title="" class="label A5FloatingLabel " style="display:block;">Supervisor</label>\r\n\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.SUPERVISOR" \r\n  title=""\r\n  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.SUPERVISOR"  \r\n   onchange="var tfunc = function() {onChange_Supervisor_695e39da6c2f49c0bb812cc6f6a34005.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n\r\n</select>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 75%" >\r\n <textarea id="DLG1.V.R1.SPECIALREQUEST" class="edit " title="" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" rows="2" cols="20"  onchange="var tfunc = function() {onChange_SpecialRequest_95fcd30e3c3947e49554fa1057890de6.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.SPECIALREQUEST"  ></textarea>\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 75%" >\r\n <textarea id="DLG1.V.R1.COMENT" class="edit " title="" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" rows="2" cols="20"  onchange="var tfunc = function() {onChange_Coment_4173cd046a6f469cbce0da268cc33281.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.COMENT"  ></textarea>\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 5px" >\r\n <div id="DLG1.V.R1.STATICTEXT_12" title=""  class="" style="color: #f00; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >*</div>\r\n</div>\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_9"    ></button>\r\n</div>\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_8"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_11"    ></button>\r\n</div>\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_7"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_12"    ></button>\r\n</div>\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_13"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_16"    ></button>\r\n</div>\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_20"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_17"    ></button>\r\n</div>\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_14"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_20" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_4',this);try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_20'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_4'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_4')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_4')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_5',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 4in" >\r\n <label id="DLG1.LBL.R1.LSTVISITHEAD" for="DLG1.V.R1.LSTVISITHEAD" title="" class="label" style="display:block;">LSTVISITHEAD</label>\r\n\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTVISITHEAD.CONTROL"  class="DLG1_LSTVISITHEAD" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_97"    ></button> </div> <div class="A5CWLayout" style="width: 2in" >  <input type="text" id="DLG1.V.R1.TEST1" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_test1_7e045424331e467c995ff9d6d5d1c14a.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TEST1"    value=""    />  </div><br  style="clear:both; " /> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTVISITHEAD'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_5',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_5'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_5')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_5')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_6',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 4in" >\r\n <div id="DLG1.V.R1.MAP1.CONTROL"  style="width: 100%; height: 4in; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; "></div>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: false
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_28"    ></button> </div> <div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_15"    ></button> </div> <div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_4"    ></button> </div><br  style="clear:both; " /> <div class="A5CWLayout" style="width: 50%" >  <label id="DLG1.LBL.R1.DEVLAT" for="DLG1.V.R1.DEVLAT" title="" class="label" style="display:block;">DEVLAT</label>   <input type="text" id="DLG1.V.R1.DEVLAT" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_DEVLAT_62d2e2587db242cbbf2368b1019508f1.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEVLAT"    value=""    />  </div> <div class="A5CWLayout" style="width: 50%" >  <label id="DLG1.LBL.R1.DEVLONG" for="DLG1.V.R1.DEVLONG" title="" class="label" style="display:block;">DEVLONG</label>   <input type="text" id="DLG1.V.R1.DEVLONG" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_DEVLONG_3f85f15dd1d04ab5939eecc0db612164.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEVLONG"    value=""    />  </div> <div style="display:none;"></div>',
		show: true,
		style: 'background-color: #5282c8;'
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('MAP1'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_6',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_6'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_6')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_6')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_7',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div style="font: 0pt arial;clear:both;"></div>\r\n </div>\r\n </div>\r\n\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <input type="text" id="DLG1.V.R1.PHONEORDER" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_phoneorder_dcc37a79c2464acbb9d435d4a9c072c5.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.PHONEORDER"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.ALLOWEDDISTANCE" for="DLG1.V.R1.ALLOWEDDISTANCE" title="" class="label" style="display:block;">alloweddistance</label>\r\n\r\n <input type="text" id="DLG1.V.R1.ALLOWEDDISTANCE" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_alloweddistance_b867a39d67f2454bb116505104f58da4.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ALLOWEDDISTANCE"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.TXTPOILAT" for="DLG1.V.R1.TXTPOILAT" title="" class="label" style="display:block;">txtpoilat</label>\r\n\r\n <input type="text" id="DLG1.V.R1.TXTPOILAT" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_txtpoilat_2a3aeb03732f4b8c8d8414d9ad0f1c4d.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TXTPOILAT"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.TXTPOILONG" for="DLG1.V.R1.TXTPOILONG" title="" class="label" style="display:block;">txtpoilong</label>\r\n\r\n <input type="text" id="DLG1.V.R1.TXTPOILONG" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_txtpoilong_73c93e6659cd4b18a3493a764254ec38.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TXTPOILONG"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.VIEWALLDAYSINPLAN" for="DLG1.V.R1.VIEWALLDAYSINPLAN" title="" class="label" style="display:block;">viewalldaysinplan</label>\r\n\r\n <input type="text" id="DLG1.V.R1.VIEWALLDAYSINPLAN" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_viewalldaysinplan_7552f4f953604eb68e1f405be3b5127a.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.VIEWALLDAYSINPLAN"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.WH1" for="DLG1.V.R1.WH1" title="" class="label" style="display:block;">Wh1</label>\r\n\r\n <input type="text" id="DLG1.V.R1.WH1" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_wh1_cd70c546d95649c3aac7f7e39632b257.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.WH1"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.WH2" for="DLG1.V.R1.WH2" title="" class="label" style="display:block;">Wh2</label>\r\n\r\n <input type="text" id="DLG1.V.R1.WH2" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_wh2_6cb0250588194639b6e363cadd96354e.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.WH2"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.WH3" for="DLG1.V.R1.WH3" title="" class="label" style="display:block;">Wh3</label>\r\n\r\n <input type="text" id="DLG1.V.R1.WH3" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_wh3_f6f955a4c1a94d289c2b86a7676592a9.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.WH3"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.WH4" for="DLG1.V.R1.WH4" title="" class="label" style="display:block;">Wh4</label>\r\n\r\n <input type="text" id="DLG1.V.R1.WH4" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_wh4_7c0307e670f54e9d8e3e3b479a7195a8.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.WH4"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.ALLOWBONUS" for="DLG1.V.R1.ALLOWBONUS" title="" class="label" style="display:block;">Textbox2</label>\r\n\r\n <input type="text" id="DLG1.V.R1.ALLOWBONUS" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_allowbonus_22c8b9b143b34667a1b1ee03061d858a.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ALLOWBONUS"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.PLANOPPENED" for="DLG1.V.R1.PLANOPPENED" title="" class="label" style="display:block;">Planoppened</label>\r\n\r\n <input type="text" id="DLG1.V.R1.PLANOPPENED" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_Planoppened_2bb78a87322f471db2a69cf00941c9a8.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.PLANOPPENED"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.VISITSHEAD_ID" for="DLG1.V.R1.VISITSHEAD_ID" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Textbox2</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.VISITSHEAD_ID" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_visitshead_id_cded815c27244d3eae236cc5de6b085c.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.VISITSHEAD_ID"    value=""    />\r\n</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.ID" for="DLG1.V.R1.ID" title="" class="label" style="display:block;">id</label>\r\n\r\n <input type="text" id="DLG1.V.R1.ID" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_id_4ae6ff27681343db884d61a21c71eb8c.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ID"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.DATE_2" for="DLG1.V.R1.DATE_2" title="" class="label" style="display:block;">date 2</label>\r\n\r\n <table id="DLG1.V.R1.DATE_2.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\r\n<tr>\r\n<td style="width:100%">\r\n <input   id="DLG1.V.R1.DATE_2" name="V.R1.DATE_2"  value=""  autocomplete="off"   size="200" class="edit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\r\n \r\n</td>\r\n  <td class="" >&nbsp;</td>\r\n  <td id="DLG1.V.R1.DATE_2.BUTTON" class="editBGButton" style="width: 0%;" ><svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg></td>\r\n </tr>\r\n</table>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.VISITHEAD_COMP_ID" for="DLG1.V.R1.VISITHEAD_COMP_ID" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Visithead Comp Id</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.VISITHEAD_COMP_ID" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_visithead_comp_id_c73a1b136e944c22b1e90d1a1741dcf8.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.VISITHEAD_COMP_ID"    value=""    />\r\n</div>\r\n</div>\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.STARTH" for="DLG1.V.R1.STARTH" title="" class="label" style="display:block;">starth</label>\r\n\r\n <input type="text" id="DLG1.V.R1.STARTH" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_starth_412317370af343e18a1c1230d708dc48.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.STARTH"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.STARTM" for="DLG1.V.R1.STARTM" title="" class="label" style="display:block;">startm</label>\r\n\r\n <input type="text" id="DLG1.V.R1.STARTM" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_startm_7762ab8894044ad68cfeb0f6f5278a1d.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.STARTM"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.ENDH" for="DLG1.V.R1.ENDH" title="" class="label" style="display:block;">endh</label>\r\n\r\n <input type="text" id="DLG1.V.R1.ENDH" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_endh_ffd2077e21c04fa99fc1fc21dabcaee8.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ENDH"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.ENDM" for="DLG1.V.R1.ENDM" title="" class="label" style="display:block;">endm</label>\r\n\r\n <input type="text" id="DLG1.V.R1.ENDM" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_endm_1b3a52097e7a4e8492a5b56640d49422.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ENDM"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: " >\r\n <button type="button" id="DLG1.V.R1.BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2"    ></button>\r\n</div>\r\n<div class="A5CWLayout" style="width: " >\r\n <button type="button" id="DLG1.V.R1.BUTTON_96"    ></button>\r\n</div>\r\n<div class="A5CWLayout" style="width: " >\r\n <button type="button" id="DLG1.V.R1.BUTTON_DVSAVE_LSTVISITHEAD"    ></button>\r\n</div>\r\n<div class="A5CWLayout" style="width: " >\r\n <button type="button" id="DLG1.V.R1.BUTTON_DVNEWRECORD_LSTVISITHEAD"    ></button>\r\n</div>\r\n<div class="A5CWLayout" style="width: " >\r\n <button type="button" id="DLG1.V.R1.BUTTON_DVDELETERECORD_LSTVISITHEAD"    ></button>\r\n</div>\r\n<div class="A5CWLayout" style="width: " >\r\n <button type="button" id="DLG1.V.R1.BUTTON_DVRESET_LSTVISITHEAD"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: " >\r\n <div id="DLG1.V.R1._UXSQLTRACELOG" title=""  class="" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   ><div\r\n onclick="A5.u.element.toggle($(\'DLG1.UXSQLTRACELOG\'),{show: {type: \'slide\',duration: \'fast\'},hide: {type: \'slide\',duration: \'fast\'}} )"\r\n><a href="#">Show/hide SQL Trace Log</a>\r\n<pre id="DLG1.UXSQLTRACELOG" style="display:none;"></pre>\r\n</div>\r\n\r\n</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <input type="text" id="DLG1.V.R1.DISPLAYMEDREPNAME" title=""     class="edit " style="text-align: center; letter-spacing: 2px; color: #364fc7; font: bolder 24pt Bahnschrift Light; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_DISPLAYMEDREPNAME_f254b0115d714c21868452cb7ae44617.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DISPLAYMEDREPNAME"    value=""   readonly="readonly"   />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <input type="text" id="DLG1.V.R1.DISPLAYDATE" title=""     class="edit " style="text-align: center; letter-spacing: 2px; color: #364fc7; font: bolder 24pt Bahnschrift Light; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_DISPLAYDATE_54952a7be85b49d6a0619e623040b904.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DISPLAYDATE"    value=""   readonly="readonly"   />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.PRICELIST" for="DLG1.V.R1.PRICELIST" title="" class="label" style="display:block;">pricelist</label>\r\n\r\n <input type="text" id="DLG1.V.R1.PRICELIST" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_pricelist_70096938ce504386af09a31ab3eb18d0.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.PRICELIST"    value=""    />\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.TMPPOIID" for="DLG1.V.R1.TMPPOIID" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Tmppoiid</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.TMPPOIID" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_tmppoiid_bce9c0a5830b416db198c7ddd65840cf.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TMPPOIID"    value=""    />\r\n</div>\r\n</div>\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.POIID" for="DLG1.V.R1.POIID" title="" class="label" style="display:block;">poiid</label>\r\n\r\n <input type="text" id="DLG1.V.R1.POIID" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_poiid_52b1f126c6be4601bbe1d4058f31a08c.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.POIID"    value=""    />\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <input type="text" id="DLG1.V.R1.POINAME" title=""     class="edit " style="color: #000; font-family: Segoe UI; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_poiname_37201855b3804e22a68b764c870c1501.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.POINAME"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 66.67%" >\r\n <input type="text" id="DLG1.V.R1.POITYPE" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_poitype_9e22177d142a45c6a5afe3ff07f36271.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.POITYPE"    value=""    />\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 33.33%" >\r\n <input type="text" id="DLG1.V.R1.BESTTIME" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_besttime_b746bc37fbd54134b503692f3b28547b.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.BESTTIME"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <input type="text" id="DLG1.V.R1.REGION" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_region_7f3f989a797e4583b2501ea8a6f1f691.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.REGION"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <input type="text" id="DLG1.V.R1.COMMENT" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_comment_903d4e16a04f46849c3a2eb1e8111863.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.COMMENT"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <input type="text" id="DLG1.V.R1.PHONENO" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_phoneno_f6c2a46eff68466fb3ce785966df0590.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.PHONENO"    value=""    />\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <input type="text" id="DLG1.V.R1.ROUTE" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_route_1af389844cb24fe285320b9cc50a2af7.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ROUTE"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.TOTAL_DUES" for="DLG1.V.R1.TOTAL_DUES" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Total Dues</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.TOTAL_DUES" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_Total_Dues_49e5bfe7eca741f88b7cf6abc8d21634.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TOTAL_DUES"    value=""    />\r\n</div>\r\n</div>\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_84"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.LATITUDE" for="DLG1.V.R1.LATITUDE" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">lat</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.LATITUDE" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_latitude_2e33a4a079ae4293b949c40dfe008d86.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LATITUDE"    value=""    />\r\n</div>\r\n</div>\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.LONGITUDE" for="DLG1.V.R1.LONGITUDE" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">lon</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.LONGITUDE" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_longitude_0cee84b93606419594ea24147e144393.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LONGITUDE"    value=""    />\r\n</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.PLACEHOLDER_14" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.PLACEHOLDER_15" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.PLACEHOLDER_12" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.PLACEHOLDER_13" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">\r\n</div><br  style="clear:both; " />\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.ADDITEMWITHBONUS" for="DLG1.V.R1.ADDITEMWITHBONUS" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Additemwithbonus</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.ADDITEMWITHBONUS" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_additemwithbonus_33768535af6240b9a76708db6ca6599b.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ADDITEMWITHBONUS"    value=""    />\r\n</div>\r\n</div>\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <input type="text" id="DLG1.V.R1.FLAGADDITEM" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_flagadditem_7b27b0feea8248f2981609a62053ccb3.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.FLAGADDITEM"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div  id="DLG1.V.R1.CONTAINER_1_1"   \r\n   A5-containerType="none"\r\n   class="A5CWLayout "  style=""  >\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.ROUTEID" for="DLG1.V.R1.ROUTEID" title="" class="label" style="display:block;">routeid</label>\r\n\r\n <input type="text" id="DLG1.V.R1.ROUTEID" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_routeid_44e881804fa547529d69f24df914337b.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ROUTEID"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.MEDREPID" for="DLG1.V.R1.MEDREPID" title="" class="label" style="display:block;">medrepid</label>\r\n\r\n <input type="text" id="DLG1.V.R1.MEDREPID" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_medrepid_4eb65a4f64e54ff49864cdc5a622c83b.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.MEDREPID"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.ENDTIME" for="DLG1.V.R1.ENDTIME" title="" class="label" style="display:block;">endtime</label>\r\n\r\n <table id="DLG1.V.R1.ENDTIME.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\r\n<tr>\r\n<td style="width:100%">\r\n <input   id="DLG1.V.R1.ENDTIME" name="V.R1.ENDTIME"  value=""  autocomplete="off"   size="200" class="edit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\r\n \r\n</td>\r\n  <td class="" >&nbsp;</td>\r\n  <td id="DLG1.V.R1.ENDTIME.BUTTON" class="editBGButton" style="width: 0%;" ><svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg></td>\r\n </tr>\r\n</table>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.LATX" for="DLG1.V.R1.LATX" title="" class="label" style="display:block;">latx</label>\r\n\r\n <input type="text" id="DLG1.V.R1.LATX" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_latx_935287f9b8ef43ed8a4b62f8f02bee68.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LATX"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.LATY" for="DLG1.V.R1.LATY" title="" class="label" style="display:block;">laty</label>\r\n\r\n <input type="text" id="DLG1.V.R1.LATY" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_laty_3e712370485b4c8d9469922e5c6bc43f.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LATY"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.ACCURACY" for="DLG1.V.R1.ACCURACY" title="" class="label" style="display:block;">accuracy</label>\r\n\r\n <input type="text" id="DLG1.V.R1.ACCURACY" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_accuracy_17926b63c0a34638963cc4c37c1d310f.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ACCURACY"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.ALTITUDE" for="DLG1.V.R1.ALTITUDE" title="" class="label" style="display:block;">altitude</label>\r\n\r\n <input type="text" id="DLG1.V.R1.ALTITUDE" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_altitude_3d628ebc22b94d55868ed82dab88b36a.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ALTITUDE"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.ALTITUDEACCUR" for="DLG1.V.R1.ALTITUDEACCUR" title="" class="label" style="display:block;">altitudeaccur</label>\r\n\r\n <input type="text" id="DLG1.V.R1.ALTITUDEACCUR" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_altitudeaccur_2a81df78ee034521b154eac8ef4f6f22.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ALTITUDEACCUR"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.HEADING" for="DLG1.V.R1.HEADING" title="" class="label" style="display:block;">heading</label>\r\n\r\n <input type="text" id="DLG1.V.R1.HEADING" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_heading_474524f505f84ea3b67b603f08b6985a.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.HEADING"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.SPEED" for="DLG1.V.R1.SPEED" title="" class="label" style="display:block;">speed</label>\r\n\r\n <input type="text" id="DLG1.V.R1.SPEED" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_speed_daa635e8344a4678a3d77f8cf9856406.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.SPEED"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.TIMESTANPD" for="DLG1.V.R1.TIMESTANPD" title="" class="label" style="display:block;">timestanpd</label>\r\n\r\n <table id="DLG1.V.R1.TIMESTANPD.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\r\n<tr>\r\n<td style="width:100%">\r\n <input   id="DLG1.V.R1.TIMESTANPD" name="V.R1.TIMESTANPD"  value=""  autocomplete="off"   size="200" class="edit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\r\n \r\n</td>\r\n  <td class="" >&nbsp;</td>\r\n  <td id="DLG1.V.R1.TIMESTANPD.BUTTON" class="editBGButton" style="width: 0%;" ><svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg></td>\r\n </tr>\r\n</table>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.LSTVISITHEAD_GLOBALERRORS" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">\r\n</div><br  style="clear:both; " />\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n <br  id="DLG1.V.R1.CONTAINER_1_1.BREAK"  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <input type="text" id="DLG1.V.R1.LAT1" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_lat1_9a719938f12c40a58090dd66ae4e9174.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LAT1"    value=""    />\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <input type="text" id="DLG1.V.R1.LONG1" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_long1_496edc10a3ad49a8a59a6db7691cff43.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LONG1"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div style="display:none;"></div>'
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_7',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_7'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_7')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_7')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_8',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 4in" >\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTDISCUSSED.CONTROL"  class="DLG1_LSTDISCUSSED" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: 25%" >  <button type="button" id="DLG1.V.R1.BUTTON_22"    ></button> </div> <div class="A5CWLayout" style="width: 75%" >  <div id="DLG1.V.R1.STATICTEXT_5" title=""  class="" style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >Discussed Products</div> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_DVDELETERECORD_LSTDISCUSSED"    ></button> </div> <div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_DVSAVE_LSTDISCUSSED"    ></button> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTDISCUSSED'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_8',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_8'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_8')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_8')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_9',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 4in" >\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTSAMPLES.CONTROL"  class="DLG1_LSTSAMPLES" style="overflow: auto; width: 100%; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_29"    ></button> </div> <div class="A5CWLayout" style="width: 50%" >  <div id="DLG1.V.R1.STATICTEXT_6" title=""  class="" style="text-align: right; font: small-caps Segoe UI Black; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >Samples</div> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_DVDELETERECORD_LSTSAMPLES"    ></button> </div> <div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_DVDELETERECORD_LSTSAMPLES1"    ></button> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTSAMPLES'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_9',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_9'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_9')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_9')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_10',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.PLACEHOLDER_2" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div style="display:none;"></div>'
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_10',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_10'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_10')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_10')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_13',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 4in" >\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTORDERS.CONTROL"  class="DLG1_LSTORDERS" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: 40%" >  <button type="button" id="DLG1.V.R1.BUTTON_35"    ></button> </div> <div class="A5CWLayout" style="width: 60%" >  <div id="DLG1.V.R1.STATICTEXT_13" title=""  class="" style="text-align: right; font: small-caps Segoe UI Black; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >Ordered Items</div> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_26" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTORDERS'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_13',this);try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_26'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_13'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_13')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_13')
},0);
},
	onActivate: function() {moTotalBeforeVat = 0
moVatValue = 0
var listObj = DLG1_DlgObj.getControl('lstorders');
listObj.refresh();
DLG1_DlgObj.setValue('OrdTotal',moTotalBeforeVat);
DLG1_DlgObj.setValue('OrdVAT',moVatValue);
DLG1_DlgObj.setValue('OrdTTC',moTotalBeforeVat+moVatValue);
},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_INVOICES',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 4in" >\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTINVOICES.CONTROL"  class="DLG1_LSTINVOICES" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_2" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_27_1" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> ',
		show: true,
		style: 'width: 100%;'
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTINVOICES'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_INVOICES',this);try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_2'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_27_1'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_INVOICES'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_INVOICES')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_INVOICES')
},0);
},
	onActivate: function() {mTotalBeforeVat = 0
mVatValue = 0
var listObj = DLG1_DlgObj.getControl('lstinvoices');
listObj.refresh();
DLG1_DlgObj.setValue('INVTotal',mTotalBeforeVat);
DLG1_DlgObj.setValue('INVVAT',mVatValue);
DLG1_DlgObj.setValue('INVTTC',mTotalBeforeVat+mVatValue);},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_18',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 100" >\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTRECEIPT.CONTROL"  class="DLG1_LSTRECEIPT" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div>\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_3" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_17" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTRECEIPT'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_18',this);try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_3'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_17'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_18'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_18')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_18')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_19',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 4in" >\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTUNPAIDINV.CONTROL"  class="DLG1_LSTUNPAIDINV" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_41"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTUNPAIDINV'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_19',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_19'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_19')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_19')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_20',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 4in" >\r\n \r\n<div >\r\n <div id="DLG1.V.R1.SIGNATURECAPTURE1.CONTROL"   class="ink"  style="overflow: auto; width: 100%; height: 5in; "></div>\r\n</div>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_42"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_20',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_20'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_20')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_20')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_21',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.LOAD" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">\r\n</div><br  style="clear:both; " />\r\n<div  id="DLG1.V.R1.CONTAINER_226"   \r\n   A5-containerType="none"\r\n   class="A5CWLayout "  style="width: 100%; height: 300px; "  >\r\n<div class="A5CWLayout" style="width: 4in" >\r\n <label id="DLG1.LBL.R1.LSTVISITNOTES" for="DLG1.V.R1.LSTVISITNOTES" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">LSTVISITNOTES</label>\r\n<div style="margin-left: 40% ;">\r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTVISITNOTES.CONTROL"  class="DLG1_LSTVISITNOTES" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n</div>\r\n</div>\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n <br  id="DLG1.V.R1.CONTAINER_226.BREAK"  style="clear:both; " />\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_43"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_16" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTVISITNOTES'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_21',this);try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_16'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_21'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_21')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_21')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_MEDIA',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div  id="DLG1.V.R1.CONTAINER_2"   \r\n   A5-containerType="none"\r\n   class="A5CWLayout "  style="width: 100%; height: 300px; "  >\r\n<div class="A5CWLayout" style="width: 4in" >\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTMEDIALFILES.CONTROL"  class="DLG1_LSTMEDIALFILES" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div><br  style="clear:both; " />\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n <br  id="DLG1.V.R1.CONTAINER_2.BREAK"  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.PLACEHOLDER_1" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: " >\r\n <button type="button" id="DLG1.V.R1.BUTTON_3"    ></button>\r\n</div>\r\n<div class="A5CWLayout" style="width: " >\r\n <button type="button" id="DLG1.V.R1.BUTTON_18"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_55"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTMEDIALFILES'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_MEDIA',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_MEDIA'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_MEDIA')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_MEDIA')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_FEEDBACK',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div  id="DLG1.V.R1.CONTAINER_228"   \r\n   A5-containerType="none"\r\n   class="A5CWLayout "  style="width: 100%; "  >\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.FEEDBACK" for="DLG1.V.R1.FEEDBACK" title="" class="label" style="display:block;">Feedback</label>\r\n\r\n <textarea id="DLG1.V.R1.FEEDBACK" class="edit " title="" style="border: 1 solid; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" rows="3" cols="20"  onchange="var tfunc = function() {onChange_FeedBack_ca22955168a64a33ad84cc30a3c91e27.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.FEEDBACK"  ></textarea>\r\n\r\n</div><br  style="clear:both; " />\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n <br  id="DLG1.V.R1.CONTAINER_228.BREAK"  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_56"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_FEEDBACK',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_FEEDBACK'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_FEEDBACK')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_FEEDBACK')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_VISITSUMMARY',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.NBROF_SAMPLES" for="DLG1.V.R1.NBROF_SAMPLES" title="" class="label" style="display:block;">Nbr of Samples Items</label>\r\n\r\n <input type="text" id="DLG1.V.R1.NBROF_SAMPLES" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_nbrOf_Samples_610b3688b28d424ca6d1dafadcb67dd6.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.NBROF_SAMPLES"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.NBROFORDERS" for="DLG1.V.R1.NBROFORDERS" title="" class="label" style="display:block;">Nbr of Ordered Items</label>\r\n\r\n <input type="text" id="DLG1.V.R1.NBROFORDERS" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_nbrOfOrders_96af70976b1a487f848c64ad5e1f93c9.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.NBROFORDERS"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.NBROFDISCUSSEDPRODUTS" for="DLG1.V.R1.NBROFDISCUSSEDPRODUTS" title="" class="label" style="display:block;">Nbr of Disccused Products</label>\r\n\r\n <input type="text" id="DLG1.V.R1.NBROFDISCUSSEDPRODUTS" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_nbrOfDiscussedProduts_53e2165a4b8e4e9d97d0fd547a2145ff.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.NBROFDISCUSSEDPRODUTS"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.NBROFINVOICES" for="DLG1.V.R1.NBROFINVOICES" title="" class="label" style="display:block;">Nbr Of invoiced items</label>\r\n\r\n <input type="text" id="DLG1.V.R1.NBROFINVOICES" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_nbrOfInvoices_88fe3d4ceccf4bb885812f503975ef04.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.NBROFINVOICES"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 2in" >\r\n <label id="DLG1.LBL.R1.NBROFRECEIPTS" for="DLG1.V.R1.NBROFRECEIPTS" title="" class="label" style="display:block;">Nbr Of Receipts lines</label>\r\n\r\n <input type="text" id="DLG1.V.R1.NBROFRECEIPTS" title=""     class="edit " style="text-align: right; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_nbrOfReceipts_6ca900da2fa54b63a767852df71f63b6.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.NBROFRECEIPTS"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_82"    ></button> </div> <div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_81"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_VISITSUMMARY',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_VISITSUMMARY'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_VISITSUMMARY')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_VISITSUMMARY')
},0);
},
	onActivate: function() {var lObj = DLG1_DlgObj.getControl('LSTSAMPLES');
var obj = lObj.indexVisible();
DLG1_DlgObj.setValue('nbrOf_Samples',obj.end+1)
var lObj = DLG1_DlgObj.getControl('lstorders');
var obj = lObj.indexVisible();
DLG1_DlgObj.setValue('nbrOfOrders',obj.end+1)
var lObj = DLG1_DlgObj.getControl('LSTDISCUSSED');
var obj = lObj.indexVisible();
DLG1_DlgObj.setValue('nbrOfDiscussedProduts',obj.end+1)
var lObj = DLG1_DlgObj.getControl('lstinvoices');
var obj = lObj.indexVisible();
DLG1_DlgObj.setValue('nbrOfInvoices',obj.end+1)
var lObj = DLG1_DlgObj.getControl('LSTRECEIPT');
var obj = lObj.indexVisible();
DLG1_DlgObj.setValue('nbrOfReceipts',obj.end+1)},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_BASKET',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.LSTBASKETH" for="DLG1.V.R1.LSTBASKETH" title="" class="label" style="display:block;">LSTBASKETH</label>\r\n\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTBASKETH.CONTROL"  class="DLG1_LSTBASKETH" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_87"    ></button> </div> <div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_141"    ></button> </div><br  style="clear:both; " /> <div class="A5CWLayout" style="width: 66.67%" >  <div id="DLG1.V.R1.STATICTEXT_14" title=""  class="" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >Baskets</div> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_23" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTBASKETH'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_BASKET',this);try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_23'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_BASKET'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_BASKET')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_BASKET')
},0);
},
	onActivate: function() {var listObj = DLG1_DlgObj.getControl('LSTBASKETH');
mPoidId =DLG1_DlgObj.getValue('tmppoiid') ;
mPoiTypeId = DLG1_DlgObj.getValue('poitype') ;
listObj.setFilter(function(data){
 if (data.poiid == mPoidId || data.poitype == mPoiTypeId) { return true; }
    else { return false; }
})},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_BASKETDET',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.LSTBASKETDET" for="DLG1.V.R1.LSTBASKETDET" title="" class="label" style="display:block;">LSTBASKETDET</label>\r\n\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTBASKETDET.CONTROL"  class="DLG1_LSTBASKETDET" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_24" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTBASKETDET'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_BASKETDET',this);try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_24'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_BASKETDET'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_BASKETDET')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_BASKETDET')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANEL_CARD_BASKET_VARIABLES',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div style="display:none;"></div>'
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANEL_CARD_BASKET_VARIABLES',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANEL_CARD_BASKET_VARIABLES'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANEL_CARD_BASKET_VARIABLES')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANEL_CARD_BASKET_VARIABLES')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_ITEMS_ALL',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.LSTITEMS" for="DLG1.V.R1.LSTITEMS" title="" class="label" style="display:block;">LSTITEMS</label>\r\n\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTITEMS.CONTROL"  class="DLG1_LSTITEMS" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_31" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTITEMS'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_ITEMS_ALL',this);try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_31'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_ITEMS_ALL'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_ITEMS_ALL')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_ITEMS_ALL')
},0);
},
	onActivate: function() {var mFlag = DLG1_DlgObj.getValue('flagadditem');
if(mFlag == 4){
 retdiscussed();
};
fillitemlist();},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_VACATION',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.LSTVACATION" for="DLG1.V.R1.LSTVACATION" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">LSTVACATION</label>\r\n<div style="margin-left: 40% ;">\r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTVACATION.CONTROL"  class="DLG1_LSTVACATION" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n</div>\r\n</div>\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_103"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_DVNEWRECORD_LSTVACATION"    ></button> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTVACATION'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_VACATION',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_VACATION'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_VACATION')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_VACATION')
},0);
},
	onActivate: function() {DLG1_DlgObj.runAction('REFRESHVACATIONLIST');},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_POI',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_114"    ></button> </div><br  style="clear:both; " /> <div class="A5CWLayout" style="width: 100%" >  <label id="DLG1.LBL.R1.LSTPOI_KEYWORDSEARCH" for="DLG1.V.R1.LSTPOI_KEYWORDSEARCH" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Search for</label> <div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.LSTPOI_KEYWORDSEARCH" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_LSTPOI_KEYWORDSEARCH_ea10abf019c3419383bd6b99f9d53691.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.LSTPOI_KEYWORDSEARCH"    value=""    /> </div> </div><br  style="clear:both; " /> <div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_LISTSEARCHCLEAR_LSTPOI"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_DVNEWRECORD_LSTPOI1"    ></button> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTPOI'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_POI',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_POI'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_POI')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_POI')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_POI_DET',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 100%" >\r\n <div id="DLG1.V.R1.STATICTEXT_20" title=""  class="" style="color: #000; font: bolder 16pt Segoe UI; width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"   >New Customer</div>\r\n</div><br  style="clear:both; " />\r\n<div  id="DLG1.V.R1.CONTAINER_NEW_POI"   \r\n   A5-containerType="none"\r\n   class=""  style="border: 1px solid #ddd8d8; overflow: hidden; width: 100%; border-radius: 10px; "  >\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.POINAME_1" for="DLG1.V.R1.POINAME_1" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Customer Name</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.POINAME_1" title=""     class="editPrimary " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_POINAME_1_1585409d5c134e9885637b8014b1351c.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.POINAME_1"    value=""    />\r\n</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.COMMENT_1" for="DLG1.V.R1.COMMENT_1" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Comment</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.COMMENT_1" title=""     class="editPrimary " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_COMMENT_1_45235e3582a7401e9c05d1b53e86cd98.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.COMMENT_1"    value=""    />\r\n</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.CONTACTPERSON" for="DLG1.V.R1.CONTACTPERSON" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Contact Pers.</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.CONTACTPERSON" title=""     class="editPrimary " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_CONTACTPERSON_61b69e5990e7419c93bfb10fe898662e.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.CONTACTPERSON"    value=""    />\r\n</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.PHONENO_1" for="DLG1.V.R1.PHONENO_1" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Phone No</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.PHONENO_1" title=""     class="editPrimary " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_PHONENO_1_0dead06369054023b1a0fe5fab57a8b8.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.PHONENO_1"    value=""    />\r\n</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.MOBILE" for="DLG1.V.R1.MOBILE" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Mobile No</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.MOBILE" title=""     class="editPrimary " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_MOBILE_f7cb7b59a67247b082904b0fa8cd2417.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.MOBILE"    value=""    />\r\n</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.EMAIL" for="DLG1.V.R1.EMAIL" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">EMAIL</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.EMAIL" title=""     class="editPrimary " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_EMAIL_e969b11a2336445d9e97c09d4d9ae677.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.EMAIL"    value=""    />\r\n</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.ADDRESS" for="DLG1.V.R1.ADDRESS" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Address</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.ADDRESS" title=""     class="editPrimary " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_ADDRESS_bd3ede2235814ac387aff5d8ee059844.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ADDRESS"    value=""    />\r\n</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.STREET" for="DLG1.V.R1.STREET" title="" class="label" style="float: left; width: 40%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;">Street</label>\r\n<div style="margin-left: 40% ;"><input type="text" id="DLG1.V.R1.STREET" title=""     class="editPrimary " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_STREET_826c11752c774e95b2d9dd80e83abe8c.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.STREET"    value=""    />\r\n</div>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.FREQUENCY" for="DLG1.V.R1.FREQUENCY" title="" class="label" style="display:block;">frequency</label>\r\n\r\n <input type="text" id="DLG1.V.R1.FREQUENCY" title=""     class="editPrimary " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_frequency_1b8f730b1ab74f5ea45bd98bc995eed7.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.FREQUENCY"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: "  id="DLG1.V.R1.LSTPOI_GLOBALERRORS" style="box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" _type="placeholder">\r\n</div><br  style="clear:both; " />\r\n<div style="display:none;font: 0pt arial;clear:both;"></div>\r\n  </div>\r\n \r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_DVSAVE_LSTPOI_1"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout" style="width: 100%" >  <button type="button" id="DLG1.V.R1.BUTTON_DVSAVE_LSTPOI"    ></button> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_POI_DET',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_POI_DET'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_POI_DET')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_POI_DET')
},0);
},
	onActivate: function() {setTimeout(function(){
	var lObj = DLG1_DlgObj.getControl('LSTPOI');
	lObj.newDetailViewRecord();	
},500)
},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_SETTINGS',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 100%" >\r\n <input type="text" id="DLG1.V.R1.PRINTERNAME" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_printername_cf878541c4fd4b2782ba446956381aa6.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.PRINTERNAME"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_121"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <button type="button" id="DLG1.V.R1.BUTTON_120"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 100%" >\r\n <textarea id="DLG1.V.R1.TEXTAREA1" class="edit " title="" style="width: 100%; height: 500px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" rows="2" cols="20"  onchange="var tfunc = function() {onChange_textarea1_e27c2b7a77ea452894c52691345ab0fe.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TEXTAREA1"  ></textarea>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: " >\r\n <button type="button" id="DLG1.V.R1.BUTTON_123"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: " >\r\n <button type="button" id="DLG1.V.R1.BUTTON_DVDELETESTORAGE_LSTVISITHEAD"    ></button>\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout"   id="DLG1.V.R1.CONTROLBAR_29" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_SETTINGS',this);try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_29'); 
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_SETTINGS'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_SETTINGS')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_SETTINGS')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_42',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5floatClear"></div>'
		},
		scroll: false
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_126"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_42',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_42'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_42')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_42')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_43',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_127"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_43',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_43'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_43')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_43')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELNAVIGATOR_2',
	src: new A5.PanelNavigator([
{
	name: 'PANELCARD_48',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_129"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_132"    ></button> </div> ',
		show: true
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTDEALS'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_48',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_48'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_48')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_48')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_44',
	title: 'INFO',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_AMOUNT" for="DLG1.V.R1.DEAL_AMOUNT" title="" class="label" style="display:block;">deal amount</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_AMOUNT" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_amount_4952c1fdf3a34d699def392c6d2a52d8.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_AMOUNT"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_STARTD" for="DLG1.V.R1.DEAL_STARTD" title="" class="label" style="display:block;">deal startd</label>\r\n\r\n <table id="DLG1.V.R1.DEAL_STARTD.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\r\n<tr>\r\n<td style="width:100%">\r\n <input   id="DLG1.V.R1.DEAL_STARTD" name="V.R1.DEAL_STARTD"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\r\n \r\n</td>\r\n  <td class="" >&nbsp;</td>\r\n  <td id="DLG1.V.R1.DEAL_STARTD.BUTTON" class="editBGButton" style="width: 0%;" ><svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg></td>\r\n </tr>\r\n</table>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_ROI_DATE" for="DLG1.V.R1.DEAL_ROI_DATE" title="" class="label" style="display:block;">deal roi date</label>\r\n\r\n <table id="DLG1.V.R1.DEAL_ROI_DATE.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\r\n<tr>\r\n<td style="width:100%">\r\n <input   id="DLG1.V.R1.DEAL_ROI_DATE" name="V.R1.DEAL_ROI_DATE"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\r\n \r\n</td>\r\n  <td class="" >&nbsp;</td>\r\n  <td id="DLG1.V.R1.DEAL_ROI_DATE.BUTTON" class="editBGButton" style="width: 0%;" ><svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg></td>\r\n </tr>\r\n</table>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_TYPE" for="DLG1.V.R1.DEAL_TYPE" title="" class="label" style="display:block;">deal type</label>\r\n\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.DEAL_TYPE" \r\n  title=""\r\n  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.DEAL_TYPE"  \r\n   onchange="var tfunc = function() {onChange_deal_type_26352fdee3014a1fa6dfb7d1d6776c5b.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n<option value="1">Accomodation Local</option> <option value="2">Bank Transfer</option> <option value="3">Check</option> <option value="4">Conference</option> <option value="5">Dinner or lunch</option> <option value="6">Gift</option> <option value="7">Group Meeting</option> <option value="8">Printed Materials</option> <option value="9">Stand in Conference</option> <option value=""></option> \r\n</select>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_SOURCE_SALE" for="DLG1.V.R1.DEAL_SOURCE_SALE" title="" class="label" style="display:block;">deal source sale</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_SOURCE_SALE" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_source_sale_f0ba0a9864d9419784aea1c54a56e403.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_SOURCE_SALE"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_SOURCE_NAME" for="DLG1.V.R1.DEAL_SOURCE_NAME" title="" class="label" style="display:block;">deal source name</label>\r\n\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.DEAL_SOURCE_NAME" \r\n  title=""\r\n  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.DEAL_SOURCE_NAME"  \r\n   onchange="var tfunc = function() {onChange_deal_source_name_7279949fa35f42ccb14476d7e6a9da20.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n<option value=""></option> <option value="1">Direct</option> <option value="2">Distributors</option> <option value="3">Warehouses</option> <option value="4">Chain Pharmacsy</option> \r\n</select>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_PHNAME" for="DLG1.V.R1.DEAL_PHNAME" title="" class="label" style="display:block;">deal phname</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_PHNAME" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_phname_82ff383aabfb4f808d44a573af940d9a.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_PHNAME"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_PH_INVNO" for="DLG1.V.R1.DEAL_PH_INVNO" title="" class="label" style="display:block;">deal ph invno</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_PH_INVNO" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_ph_invno_3e2af67a6e684643bb013e74c24e0346.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_PH_INVNO"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_PH_DATE" for="DLG1.V.R1.DEAL_PH_DATE" title="" class="label" style="display:block;">deal ph date</label>\r\n\r\n <table id="DLG1.V.R1.DEAL_PH_DATE.CONTAINER" cellspacing="0" cellpadding="0" class="editBG" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\r\n<tr>\r\n<td style="width:100%">\r\n <input   id="DLG1.V.R1.DEAL_PH_DATE" name="V.R1.DEAL_PH_DATE"  value=""  autocomplete="off"   size="200" class="editBGEdit" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\r\n \r\n</td>\r\n  <td class="" >&nbsp;</td>\r\n  <td id="DLG1.V.R1.DEAL_PH_DATE.BUTTON" class="editBGButton" style="width: 0%;" ><svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg></td>\r\n </tr>\r\n</table>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_134"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_44',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_44'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_44')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_44')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_45',
	title: 'Items',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 75%" >\r\n <label id="DLG1.LBL.R1.DEAL_ITEM1" for="DLG1.V.R1.DEAL_ITEM1" title="" class="label" style="display:block;">deal item1</label>\r\n\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.DEAL_ITEM1" \r\n  title=""\r\n  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.DEAL_ITEM1"  \r\n   onchange="var tfunc = function() {onChange_deal_item1_342256ea3d44487482214a99134829aa.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n\r\n</select>\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 25%" >\r\n <label id="DLG1.LBL.R1.DEAL_ITEM1Q" for="DLG1.V.R1.DEAL_ITEM1Q" title="" class="label" style="display:block;">deal item1q</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_ITEM1Q" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_item1q_2b47ede8eaf941cb9a9f62f29642e67f.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_ITEM1Q"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 75%" >\r\n <label id="DLG1.LBL.R1.DEAL_ITEM2" for="DLG1.V.R1.DEAL_ITEM2" title="" class="label" style="display:block;">deal item2</label>\r\n\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.DEAL_ITEM2" \r\n  title=""\r\n  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.DEAL_ITEM2"  \r\n   onchange="var tfunc = function() {onChange_deal_item2_4cd6087eb11544ae820ed7ebfd39acab.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n\r\n</select>\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 25%" >\r\n <label id="DLG1.LBL.R1.DEAL_ITEM2Q" for="DLG1.V.R1.DEAL_ITEM2Q" title="" class="label" style="display:block;">deal item2q</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_ITEM2Q" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_item2q_c64e2a6fc7af495bb72083d9008d3314.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_ITEM2Q"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 75%" >\r\n <label id="DLG1.LBL.R1.DEAL_ITEM3" for="DLG1.V.R1.DEAL_ITEM3" title="" class="label" style="display:block;">deal item3</label>\r\n\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.DEAL_ITEM3" \r\n  title=""\r\n  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.DEAL_ITEM3"  \r\n   onchange="var tfunc = function() {onChange_deal_item3_c6d8ae69fe1040ca9841c3292517b8dd.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n\r\n</select>\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 25%" >\r\n <label id="DLG1.LBL.R1.DEAL_ITEM3Q" for="DLG1.V.R1.DEAL_ITEM3Q" title="" class="label" style="display:block;">deal item3q</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_ITEM3Q" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_item3q_09cc3314c3804929ad0ae7f16754ee20.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_ITEM3Q"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 75%" >\r\n <label id="DLG1.LBL.R1.DEAL_ITEM4" for="DLG1.V.R1.DEAL_ITEM4" title="" class="label" style="display:block;">deal item4</label>\r\n\r\n <select  \r\n  size="1" \r\n  class="edit "  \r\n  name="V.R1.DEAL_ITEM4" \r\n  title=""\r\n  style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"\r\n  id="DLG1.V.R1.DEAL_ITEM4"  \r\n   onchange="var tfunc = function() {onChange_deal_item4_6156a49b00a74bdc9a9464e401bd98e5.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"  \r\n  \r\n  \r\n   >\r\n\r\n</select>\r\n\r\n</div>\r\n<div class="A5CWLayout" style="width: 25%" >\r\n <label id="DLG1.LBL.R1.DEAL_ITEM4Q" for="DLG1.V.R1.DEAL_ITEM4Q" title="" class="label" style="display:block;">deal item4q</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_ITEM4Q" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_item4q_ddbba59db3c84259b0ee939b37237a84.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_ITEM4Q"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_21"    ></button> </div> <div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_21_1"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_45',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_45'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_45')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_45')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
},
{
	name: 'PANELCARD_46',
	title: 'Others',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_PAY_METHOD" for="DLG1.V.R1.DEAL_PAY_METHOD" title="" class="label" style="display:block;">deal pay method</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_PAY_METHOD" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_pay_method_6a819a16d0554f82afdc9fd353f58a0e.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_PAY_METHOD"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_BANK" for="DLG1.V.R1.DEAL_BANK" title="" class="label" style="display:block;">deal bank</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_BANK" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_bank_bf641e7d62d74be19fb3a12766a768bc.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_BANK"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_BANK_ACC" for="DLG1.V.R1.DEAL_BANK_ACC" title="" class="label" style="display:block;">deal bank acc</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_BANK_ACC" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_bank_acc_80f00e94ee99498b913646f6847c0bc6.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_BANK_ACC"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_ID" for="DLG1.V.R1.DEAL_ID" title="" class="label" style="display:block;">deal id</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_ID" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_id_9d2f82759e794135ba2f8525b9fbfdc9.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_ID"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_COMENT" for="DLG1.V.R1.DEAL_COMENT" title="" class="label" style="display:block;">deal coment</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_COMENT" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_coment_6a4f249118894adf9b7a92d7d8b8c1e9.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_COMENT"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5CWLayout" style="width: 50%" >\r\n <label id="DLG1.LBL.R1.DEAL_PAY" for="DLG1.V.R1.DEAL_PAY" title="" class="label" style="display:block;">deal pay</label>\r\n\r\n <input type="text" id="DLG1.V.R1.DEAL_PAY" title=""     class="edit " style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;"  onchange="var tfunc = function() {onChange_deal_pay_4fb6c6e924f64200ab74bd2cd3b42bdf.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DEAL_PAY"    value=""    />\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_21_2"    ></button> </div> <div class="A5CWLayout" style="width: 50%" >  <button type="button" id="DLG1.V.R1.BUTTON_133"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_46',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_46'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_46')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_46')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
}
],{
	__parentPanelName: 'PANELNAVIGATOR_1',
	type: 'tabband',
	flow: 'ltr',
	loopNavigate: false,
	onPanelActivate: function() {},
	onPanelActivateComplete: function() {;
DLG1_DlgObj.refreshClientSideComputations(true);},
	onPanelView: function() {
;
},
	onSize: function() {
;},
	onCreate: function() {
},
	location: 'top',
	tabband: {
		theme: 'Alpha-Magenta:flared'
	},
	theme: 'Alpha-Magenta',
	header: {
		show: false
	},
	footer: {
	},
	overlay: {
	},
	controls: {
		prev: {
			has: false
		},
		next: {
			has: false
		},
		back: {
			has: false
		},
		forward: {
			has: false
		}
	},
	body: {
	},
	animation: {
		duration: 400
	}
})
},
{
	name: 'PANELCARD_47',
	src: new A5.PanelCard({
	theme: 'Alpha-Magenta',
	body: {
		content: {
			type: 'html',
			src: '<div class="A5CWLayout" style="width: 100%" >\r\n <label id="DLG1.LBL.R1.LSTGEOLOC" for="DLG1.V.R1.LSTGEOLOC" title="" class="label" style="display:block;">lstgeoloc</label>\r\n\r\n \r\n<div   style="padding:0px; "  >\r\n <div id="DLG1.V.R1.LSTGEOLOC.CONTROL"  class="DLG1_LSTGEOLOC" style="overflow: auto; width: 100%; height: 3in; "></div>\r\n</div>\r\n\r\n</div><br  style="clear:both; " />\r\n<div class="A5floatClear"></div>'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				y: 'auto',
				x: 'auto',
				duration: 1000
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		}
	},
	header: {
		html: '<div class="A5CWLayout" style="width: " >  <button type="button" id="DLG1.V.R1.BUTTON_10"    ></button> </div> <div style="display:none;"></div>',
		show: true
	},
	footer: {
	},
	overlay: {
	},
	onSize: function() {
;
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj ) {var mObj = DLG1_DlgObj.getControl('LSTGEOLOC'); if(mObj) {
			if(mObj.resize) {
				mObj.resize();
			} else { 
				if(typeof mObj.autoRefreshOnResize == 'undefined' || mObj.autoRefreshOnResize) mObj.refresh()
			}
		}
	}
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj && DLG1_DlgObj._pdfViewerResizeToFitPanelCard) DLG1_DlgObj._pdfViewerResizeToFitPanelCard('PANELCARD_47',this);
if(typeof DLG1_DlgObj != 'undefined' && DLG1_DlgObj != null && typeof DLG1_DlgObj._panelCardResize != 'undefined') { DLG1_DlgObj._panelCardResize('PANELCARD_47'); };;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_47')
},0);
},
	onView: function() {;
;setTimeout(function() { 
	if(DLG1_DlgObj && DLG1_DlgObj._turnResizeOnForListsOnPanel) DLG1_DlgObj._turnResizeOnForListsOnPanel('PANELCARD_47')
},0);
},
	onActivate: function() {},
	onCreate: function() {
}
})
}
],{
	__parentPanelName: '[top]',
	type: 'programmatic',
	flow: 'ltr',
	loopNavigate: false,
	onPanelActivate: function() {},
	onPanelActivateComplete: function() {return;
function translatepanels(){
 mv=DLG1_DlgObj.getValue('lang');
 doTranslate(mv);
 function doTranslate(language) {
     var _translations = {
         "REPID": {
             "english": "Rep ID",
    "arabic": "\u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645"
         },
         "REPNAME": {
             "english": "Rep Name",
   "arabic": "\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062F\u0648\u0628"
   },
   "CHPASS":{
   "english": "Change Password",
   "arabic": "\u062A\u063A\u064A\u064A\u0631 \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631"
   },
   "SIGNIN":{
   "english": "Sign In",
   "arabic": "\u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644"
   },
   "LOGIN":{
   "english":"L O G I N",
   "arabic":"\u062A \u0633 \u062C \u064A \u0644"
   },
   "VIEWOUTOFPLAN":{
   "english":"View out of plan",
   "arabic":"\u0639\u0631\u0636\u0020\u062e\u0627\u0631\u062c\u0020\u0627\u0644\u062e\u0637\u0629"
   },
   "NOTVISITEDTHISCYCLE":{
   "english":"Not visited this cycle",
   "arabic":"\u0644\u0645\u0020\u064a\u062a\u0645\u0020\u0627\u0644\u0632\u064a\u0627\u0631\u0629\u0020\u0641\u064a\u0020\u0647\u0630\u0647\u0020\u0627\u0644\u062f\u0648\u0631\u0629"
   },
   "SHOWALL":{
   "english":"Show All",
   "arabic":"\\u0639\u0631\u0636\u0020\u0627\u0644\u0643\u0644"
   },
   "REFRESH":{
   "english":"Refresh",
   "arabic":"\u062a\u062d\u062f\u064a\u062b"
   },
   "VIEWPLAN":{
   "english":"View Plan",
   "arabic":"\u0639\u0631\u0636\u0020\u0627\u0644\u062e\u0637\u0629"
   },
   "BACK":{
   "english":"View Plan",
   "arabic":"\u0631\u062c\u0648\u0639"
   },
   "SAMPLES":{
   "english":"Samples",
   "arabic":"\u0639\u064a\u0646\u0627\u062a"
   },
   "PROMOTED_PRODUCTS":{
   "english":"Promote Products",
   "arabic":"\u0631\u0648\u0651\u062c\u0020\u0627\u0644\u0645\u0646\u062a\u062c\u0627\u062a"
   },
   "ORDER":{
   "english":"Order",
   "arabic":"\u0637\u0644\u0628"
   },
   "INVOICE":{
   "english":"Invoice",
   "arabic":"\u0641\u0627\u062a\u0648\u0631\u0629"
   },
   "RECEIPT":{
   "english":"Receipt",
   "arabic":"\u0625\u064a\u0635\u0627\u0644"
   },
   "SIGNATURE":{
   "english":"Signature",
   "arabic":"\u062a\u0648\u0642\u064a\u0639"
   },
   "MEDIAS":{
   "english":"Media",
   "arabic":"\u0648\u0633\u0627\u0626\u0637\u0020\u0645\u062a\u0639\u062f\u062f\u0629"
   },
   "FEEDBACK":{
   "english":"Feedback",
   "arabic":"\u0645\u0644\u0627\u062d\u0638\u0627\u062a"
   },
   "IMAGES":{
   "english":"Images",
   "arabic":"\u0635\u0648\u0631"
   }
     };
     if (typeof _translations === 'undefined') return false;
     var arr = document.getElementsByClassName('_language');
     for (var i = 0; i < arr.length; i++) {
         var ele = arr[i];
         var id = ele.id;
         var key = id.split('_language_')[1];
  console.log(i);
  console.log(ele);
  console.log(id);
  console.log(key);
         if (typeof _translations[key] === 'undefined' || _translations[key] === null) continue;
         var string = _translations[key][language];
   console.log(string);
         if (typeof string !== 'undefined' && string !== null && string !== '') {
             ele.innerHTML = string;
             ele.innerText = string;
             ele.textContent = string;
         }
     }
 }
};
DLG1_DlgObj.refreshClientSideComputations(true);},
	onPanelView: function() {
;
},
	onSize: function() {;if(typeof DLG1_DlgObj != 'undefined') {
 if(typeof DLG1_DlgObj._findActiveLayoutRule != 'undefined') {
  DLG1_DlgObj._findActiveLayoutRule();
 }
}
try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_28');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_30');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_20');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_26');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_2');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_27_1');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_3');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_17');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_16');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_23');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_24');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_31');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };try { var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_29');
if(cbObj && DLG1_DlgObj.flagRenderComplete && arguments[0].changed ) cbObj.refresh();
} catch(error) { };},
	onCreate: function() {
},
	theme: 'Alpha-Magenta',
	header: {
		show: false
	},
	footer: {
	},
	overlay: {
	},
	controls: {
		prev: {
			has: false
		},
		next: {
			has: false
		},
		back: {
			has: false
		},
		forward: {
			has: false
		}
	},
	body: {
	},
	animation: {
		type: 'none'
	}
})
var ele = window['DLG1_PanelObj'].create('DLG1.R1');
		var panelRootId = '{UXPRERENDEROUTPUTDIV}';
		var flagSizeToParent = true;
		var wf_alias = 'DLG1';
		if(panelRootId != '') { 
			if (!$(panelRootId)) panelRootId = '';
		}
		if(panelRootId != '') { 
			$(panelRootId).appendChild(ele);
			if(flagSizeToParent) { 
				if(window[wf_alias + '_PanelObj']) window[wf_alias + '_PanelObj'].bindSize('parent');
				var ele = $(panelRootId + '.CONTENT'); if(ele) ele.style.display = 'none'; //srec
			}
		} else { 
			document.body.insertBefore(ele,document.body.firstChild);
			if(window[wf_alias + '_PanelObj']) window[wf_alias + '_PanelObj'].bindSize('window');
		}
DLG1_PanelObj._panelPath = {
	SIGNIN_PANELCARD: 'SIGNIN_PANELCARD',
	PANELCARD_SETTING: 'PANELCARD_SETTING',
	PANELCARD_MENU: 'PANELCARD_MENU',
	PANELCARD_2: 'PANELCARD_2',
	PANELCARD_16: 'PANELCARD_16',
	PANELCARD_4: 'PANELCARD_4',
	PANELCARD_5: 'PANELCARD_5',
	PANELCARD_6: 'PANELCARD_6',
	PANELCARD_7: 'PANELCARD_7',
	PANELCARD_8: 'PANELCARD_8',
	PANELCARD_9: 'PANELCARD_9',
	PANELCARD_10: 'PANELCARD_10',
	PANELCARD_13: 'PANELCARD_13',
	PANELCARD_INVOICES: 'PANELCARD_INVOICES',
	PANELCARD_18: 'PANELCARD_18',
	PANELCARD_19: 'PANELCARD_19',
	PANELCARD_20: 'PANELCARD_20',
	PANELCARD_21: 'PANELCARD_21',
	PANELCARD_MEDIA: 'PANELCARD_MEDIA',
	PANELCARD_FEEDBACK: 'PANELCARD_FEEDBACK',
	PANELCARD_VISITSUMMARY: 'PANELCARD_VISITSUMMARY',
	PANELCARD_BASKET: 'PANELCARD_BASKET',
	PANELCARD_BASKETDET: 'PANELCARD_BASKETDET',
	PANEL_CARD_BASKET_VARIABLES: 'PANEL_CARD_BASKET_VARIABLES',
	PANELCARD_ITEMS_ALL: 'PANELCARD_ITEMS_ALL',
	PANELCARD_VACATION: 'PANELCARD_VACATION',
	PANELCARD_POI: 'PANELCARD_POI',
	PANELCARD_POI_DET: 'PANELCARD_POI_DET',
	PANELCARD_SETTINGS: 'PANELCARD_SETTINGS',
	PANELCARD_42: 'PANELCARD_42',
	PANELCARD_43: 'PANELCARD_43',
	PANELNAVIGATOR_2: 'PANELNAVIGATOR_2',
	PANELCARD_48: 'PANELNAVIGATOR_2:PANELCARD_48',
	PANELCARD_44: 'PANELNAVIGATOR_2:PANELCARD_44',
	PANELCARD_45: 'PANELNAVIGATOR_2:PANELCARD_45',
	PANELCARD_46: 'PANELNAVIGATOR_2:PANELCARD_46',
	PANELCARD_47: 'PANELCARD_47'
}
DLG1_PanelObj._displayNames = {
SIGNIN_PANELCARD : 'SIGNIN_PANELCARD',PANELCARD_SETTING : 'PANELCARD_SETTING',PANELCARD_MENU : 'PANELCARD_MENU',PANELCARD_2 : 'PANELCARD_2',PANELCARD_16 : 'PANELCARD_16',PANELCARD_4 : 'PANELCARD_4',PANELCARD_5 : 'PANELCARD_5',PANELCARD_6 : 'PANELCARD_6',PANELCARD_7 : 'PANELCARD_7',PANELCARD_8 : 'PANELCARD_8',PANELCARD_9 : 'PANELCARD_9',PANELCARD_10 : 'PANELCARD_10',PANELCARD_13 : 'PANELCARD_13',PANELCARD_INVOICES : 'PANELCARD_INVOICES',PANELCARD_18 : 'PANELCARD_18',PANELCARD_19 : 'PANELCARD_19',PANELCARD_20 : 'PANELCARD_20',PANELCARD_21 : 'PANELCARD_21',PANELCARD_MEDIA : 'PANELCARD_MEDIA',PANELCARD_FEEDBACK : 'PANELCARD_FEEDBACK',PANELCARD_VISITSUMMARY : 'PANELCARD_VISITSUMMARY',PANELCARD_BASKET : 'PANELCARD_BASKET',PANELCARD_BASKETDET : 'PANELCARD_BASKETDET',PANEL_CARD_BASKET_VARIABLES : 'PANEL_CARD_BASKET_VARIABLES',PANELCARD_ITEMS_ALL : 'PANELCARD_ITEMS_ALL',PANELCARD_VACATION : 'PANELCARD_VACATION',PANELCARD_POI : 'PANELCARD_POI',PANELCARD_POI_DET : 'PANELCARD_POI_DET',PANELCARD_SETTINGS : 'PANELCARD_SETTINGS',PANELCARD_42 : 'PANELCARD_42',PANELCARD_43 : 'PANELCARD_43',PANELCARD_48 : 'PANELCARD_48',PANELCARD_44 : 'INFO',PANELCARD_45 : 'Items',PANELCARD_46 : 'Others',PANELCARD_47 : 'PANELCARD_47',PANELNAVIGATOR_1 : 'PANELNAVIGATOR_1',PANELNAVIGATOR_2 : 'PANELNAVIGATOR_2'
};
if(typeof DLG1_DlgObj == 'object') DLG1_DlgObj._destroy();
var DLG1_DlgObj = new A5.DialogComponentHelper('DLG1',{
	ajaxURL: 'https://www.amiga-dsd.app/test_amiga/MOBILEVISITPWAN4.a5wcmp?__virtualPage=__a5RunDialog.a5w&__dialogFilename=MOBILEVISITPWAN4&__alias=DLG1&__unsaved=no',
	_embeddedMode: false,
	_livePreviewInBuilder: false,
	componentGUID: '243b85e3-f1be-453b-82ef-bc82c8108ab6',
	columnInfo: {'LANG': {info: {controlType: 'dropdownbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'REPID': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'MEDREP': {info: {controlType: 'DropdownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'REPID_1': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'MEDREP_1': {info: {controlType: 'DropdownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DATE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'T'  },'PASSWORD': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'TEXTBOX3': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'PASSOK': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'VPASSWORD': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'VSECURITY': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'SYNCINPROGRESS': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'FAILEDSYNC': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'MEDREPCODE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'MEDREPNAME': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'AUTOSAVEINV': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'HIDEBONUS': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'COMPANYID': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'SAVING': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'CHANGEPASS': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'NEWPASSWORD': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'SLIDER1': {info: {controlType: 'Slider'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'COMPANYCODE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'COMPANYNAME': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'MESSLOW_': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'MESSMEDIUM_': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'MESSHIGHT_': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'MESSALERT_': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'SLIDERSAVING': {info: {controlType: 'Slider'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'LIST2': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LSTROUTES': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'SEARCH_OFFROUTE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LSTOFFROUTE': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'VISITTYPE': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'VISITOBJECTIVE': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'SUPERVISOR': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'SPECIALREQUEST': {info: {controlType: 'TextArea'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'COMENT': {info: {controlType: 'TextArea'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'TEST1': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'TEST2': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LSTVISITHEAD': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'DEVLAT': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DEVLONG': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'MAP1': {info: {controlType: 'Map'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DROPGROUP': {info: {controlType: 'dropdownbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DROPSUBGROUP': {info: {controlType: 'dropdownbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'TXTSEARCHDESC': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'SUBGROUPARRAY': {info: {controlType: 'textarea'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'TOTAL_BEF_ORD': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'TOTAL_VAT_ORDER': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'TOTAL_ORDER_WITH_VAT': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'TOTAL_BEF_INV': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'TOTAL_VAT_INV': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'TOTAL_INV_WITH_VAT': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'PHONEORDER': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'ALLOWEDDISTANCE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'TXTPOILAT': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'D'  },'TXTPOILONG': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'D'  },'VIEWALLDAYSINPLAN': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'WH1': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'WH2': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'WH3': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'WH4': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'ALLOWBONUS': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'PLANOPPENED': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'VISITSHEAD_ID': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'ID': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DATE_2': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'D'  },'VISITHEAD_COMP_ID': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'STARTH': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'STARTM': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'ENDH': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'ENDM': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DISPLAYMEDREPNAME': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DISPLAYDATE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'T'  },'PRICELIST': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'TMPPOIID': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'POIID': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'POINAME': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C', validate: function(data,colName,rowNum,instNum) {this.validateField(colName,rowNum,instNum); return true; }  },'POITYPE': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'BESTTIME': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'REGION': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'COMMENT': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'PHONENO': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'ROUTE': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'TOTAL_DUES': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'STARTTIME': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'D'  },'DATE_1': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: ''  },'LATITUDE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LONGITUDE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DITRICT1': {info: {controlType: 'textbox',controlSubType: 'Edit-Combo List'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'D'  },'DISTRICT_ID': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'REGION1': {info: {controlType: 'textbox',controlSubType: 'Edit-Combo List'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'AREA1': {info: {controlType: 'textbox',controlSubType: 'Edit-Combo List'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'POSACCURACY': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'POSDISTANCE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'MYPIN': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'RECEIVEDPIN': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'PINISVALID': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'SKIPREAS': {info: {controlType: 'dropdownbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'SKIPCOMMENT': {info: {controlType: 'textarea'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'VACATION_MEDREP': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'VACATION_COMPANY_ID': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'VACATION_ACTIVITY': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'REASON': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'VACATION_DATE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'D'  },'VACATION_COMMENT': {info: {controlType: 'textarea'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'ADDITEMWITHBONUS': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'FLAGADDITEM': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'ROUTEID': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'MEDREPID': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'ENDTIME': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'D'  },'LATX': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LATY': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'ACCURACY': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'ALTITUDE': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'ALTITUDEACCUR': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'HEADING': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'SPEED': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'TIMESTANPD': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'T'  },'LAT1': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LONG1': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LSTDISCUSSED': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'LSTSAMPLES': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'LSTORDERS': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'LSTINVOICES': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'LSTRECEIPT': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'PAIMENTTYPE': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'TXTRECDESC': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'CURRENCY': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'AMOUNT': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'ONINVOICENO': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'SHIPDATE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'D'  },'PAYMODE': {info: {controlType: 'dropdownbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DELIVERYMODE': {info: {controlType: 'dropdownbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'LSTUNPAIDINV': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'SIGNATURECAPTURE1': {info: {controlType: 'Ink'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LSTVISITNOTES': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'IMAGEBLOB': {info: {controlType: 'Image'}, hiddenVal: false, type: 'img,img', isCalc: false, hlp: '', isArray: false, dataType: ''  },'NOTES': {info: {controlType: 'TextArea'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'NOTE_COMPID': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'ID_3': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: ''  },'VISITFK': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'LSTMEDIALFILES': {info: {controlType: 'list'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'AVAILABLE_MEDIA1': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'FEEDBACK': {info: {controlType: 'textarea'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'NBROF_SAMPLES': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'NBROFORDERS': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'NBROFDISCUSSEDPRODUTS': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'NBROFINVOICES': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'NBROFRECEIPTS': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'LSTBASKETH': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'LSTBASKETDET': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'BASKETNUM': {info: {controlType: 'IntegerValue'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'BASKETITEM': {info: {controlType: 'dropdownbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'PRODCODE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'ITEMNAME': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LSTITEMS_QTY_PAC': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'LSTITEMS_BONUSQ_PAC': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DROPSELLUNIT': {info: {controlType: 'dropdownbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DROPBONUSUNIT': {info: {controlType: 'dropdownbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LSTITEMS_SELLSIZE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'LSTITEMS_BONUSSIZE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'QTY': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: true, hlp: '', isArray: false, dataType: 'N'  },'BONUS': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: true, hlp: '', isArray: false, dataType: 'D'  },'LSTITEMS_UNITPR': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'LSTITEMS_DISCOUNT': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'TOTAL_PRICE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: true, hlp: '', isArray: false, dataType: 'N'  },'SMOQ': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'BMOQ': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'LITEITEMS_DISCUSSEDTYPE': {info: {controlType: 'DropdownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'LISTITEMS_DISCUSSEDCOMENT': {info: {controlType: 'Textarea'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'TMPRET': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'RETURNITEM': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'RETURNQTY': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'RETPRICE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'RETURNABLE': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'FLAGVIEWBONUS': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'LSTITEMS': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'LSTVACATION': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'LSTPOI_KEYWORDSEARCH': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LSTPOI': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: ''  },'POINAME_1': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: ''  },'COMMENT_1': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: ''  },'CONTACTPERSON': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'PHONENO_1': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: ''  },'MOBILE': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'EMAIL': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'ADDRESS': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'STREET': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'FREQUENCY': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'MEDREP_ID': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'COMPANY_ID': {info: {controlType: 'TextBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'PRINTERNAME': {info: {controlType: 'textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'TEXTAREA1': {info: {controlType: 'textarea'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'LSTDEALS': {info: {controlType: 'List'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DEAL_AMOUNT': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_STARTD': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'D'  },'DEAL_ROI_DATE': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'D'  },'DEAL_TYPE': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_SOURCE_SALE': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_SOURCE_NAME': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DEAL_PHNAME': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DEAL_PH_INVNO': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DEAL_PH_DATE': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'D'  },'DEAL_ITEM1': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_ITEM1Q': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_ITEM2': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_ITEM2Q': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_ITEM3': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_ITEM3Q': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_ITEM4': {info: {controlType: 'DropDownBox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_ITEM4Q': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_PAY_METHOD': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'DEAL_BANK': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DEAL_BANK_ACC': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DEAL_ID': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: ''  },'DEAL_COMENT': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'C'  },'DEAL_PAY': {info: {controlType: 'Textbox'}, hiddenVal: false, type: 'input,label', isCalc: false, hlp: '', isArray: false, dataType: 'N'  },'LSTGEOLOC': {info: {controlType: 'list'}, hiddenVal: false, type: 'control', isCalc: false, hlp: '', isArray: false, dataType: 'C'  }},
	originalValues: [{
	"LANG": "",
	"REPID": "",
	"REPID_1": "",
	"PASSWORD": "",
	"TEXTBOX3": "",
	"VPASSWORD": "",
	"VSECURITY": "",
	"MEDREPCODE": "",
	"MEDREPNAME": "",
	"AUTOSAVEINV": "",
	"HIDEBONUS": "",
	"COMPANYID": "",
	"NEWPASSWORD": "",
	"SLIDER1": "",
	"COMPANYCODE": "",
	"COMPANYNAME": "",
	"MESSLOW_": "",
	"MESSMEDIUM_": "",
	"MESSHIGHT_": "",
	"MESSALERT_": "",
	"SLIDERSAVING": "",
	"LIST2": "",
	"LSTROUTES": "",
	"SEARCH_OFFROUTE": "",
	"LSTOFFROUTE": "",
	"VISITTYPE": "",
	"VISITOBJECTIVE": "",
	"SUPERVISOR": "",
	"SPECIALREQUEST": "",
	"COMENT": "",
	"TEST1": "0",
	"TEST2": "29/04/2025",
	"LSTVISITHEAD": "",
	"DEVLAT": "",
	"DEVLONG": "",
	"MAP1": "",
	"DROPGROUP": "",
	"DROPSUBGROUP": "",
	"TXTSEARCHDESC": "",
	"SUBGROUPARRAY": "",
	"TOTAL_BEF_ORD": "",
	"TOTAL_VAT_ORDER": "",
	"TOTAL_ORDER_WITH_VAT": "",
	"TOTAL_BEF_INV": "",
	"TOTAL_VAT_INV": "",
	"TOTAL_INV_WITH_VAT": "",
	"ALLOWEDDISTANCE": "",
	"TXTPOILAT": "",
	"TXTPOILONG": "",
	"VIEWALLDAYSINPLAN": "",
	"WH1": "",
	"WH2": "",
	"WH3": "",
	"WH4": "",
	"ALLOWBONUS": "",
	"VISITSHEAD_ID": "",
	"ID": "",
	"DATE_2": "",
	"VISITHEAD_COMP_ID": "",
	"STARTH": "",
	"STARTM": "",
	"ENDH": "",
	"ENDM": "",
	"DISPLAYMEDREPNAME": "",
	"DISPLAYDATE": "",
	"PRICELIST": "",
	"TMPPOIID": "",
	"POIID": "",
	"POINAME": "",
	"POITYPE": "",
	"BESTTIME": "",
	"REGION": "",
	"COMMENT": "",
	"PHONENO": "",
	"ROUTE": "",
	"TOTAL_DUES": "",
	"STARTTIME": "",
	"DATE_1": "",
	"LATITUDE": "",
	"LONGITUDE": "",
	"DITRICT1": "",
	"DISTRICT_ID": "",
	"REGION1": "",
	"AREA1": "",
	"POSACCURACY": "",
	"POSDISTANCE": "",
	"MYPIN": "",
	"RECEIVEDPIN": "",
	"SKIPREAS": "",
	"SKIPCOMMENT": "",
	"VACATION_MEDREP": "",
	"VACATION_COMPANY_ID": "",
	"VACATION_ACTIVITY": "",
	"REASON": "",
	"VACATION_DATE": "",
	"VACATION_COMMENT": "",
	"ADDITEMWITHBONUS": "",
	"ROUTEID": "",
	"MEDREPID": "",
	"ENDTIME": "",
	"LATX": "",
	"LATY": "",
	"ACCURACY": "",
	"ALTITUDE": "",
	"ALTITUDEACCUR": "",
	"HEADING": "",
	"SPEED": "",
	"TIMESTANPD": "",
	"LAT1": "",
	"LONG1": "",
	"LSTDISCUSSED": "",
	"LSTSAMPLES": "",
	"LSTORDERS": "",
	"LSTINVOICES": "",
	"LSTRECEIPT": "",
	"PAIMENTTYPE": "",
	"TXTRECDESC": "",
	"CURRENCY": "",
	"AMOUNT": "",
	"ONINVOICENO": "",
	"SHIPDATE": "",
	"PAYMODE": "",
	"DELIVERYMODE": "",
	"LSTUNPAIDINV": "",
	"SIGNATURECAPTURE1": "",
	"LSTVISITNOTES": "",
	"IMAGEBLOB": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP4//8/AwAI/AL+eMSysAAAAABJRU5ErkJggg==",
	"IMAGEBLOB_HIDDENA5FN": "",
	"NOTES": "",
	"NOTE_COMPID": "",
	"ID_3": "",
	"VISITFK": "",
	"LSTMEDIALFILES": "",
	"AVAILABLE_MEDIA1": "",
	"FEEDBACK": "",
	"NBROF_SAMPLES": "",
	"NBROFORDERS": "",
	"NBROFDISCUSSEDPRODUTS": "",
	"NBROFINVOICES": "",
	"NBROFRECEIPTS": "",
	"LSTBASKETH": "",
	"LSTBASKETDET": "",
	"BASKETNUM": "",
	"BASKETITEM": "",
	"PRODCODE": "",
	"ITEMNAME": "",
	"LSTITEMS_QTY_PAC": "",
	"LSTITEMS_BONUSQ_PAC": "",
	"DROPSELLUNIT": "",
	"DROPBONUSUNIT": "",
	"LSTITEMS_SELLSIZE": "",
	"LSTITEMS_BONUSSIZE": "",
	"QTY": "",
	"BONUS": "",
	"LSTITEMS_UNITPR": "",
	"LSTITEMS_DISCOUNT": "",
	"TOTAL_PRICE": "",
	"SMOQ": "",
	"BMOQ": "",
	"LITEITEMS_DISCUSSEDTYPE": "",
	"LISTITEMS_DISCUSSEDCOMENT": "",
	"TMPRET": "",
	"RETURNITEM": "",
	"RETURNQTY": "",
	"RETPRICE": "",
	"RETURNABLE": "",
	"LSTITEMS": "",
	"LSTVACATION": "",
	"LSTPOI_KEYWORDSEARCH": "",
	"LSTPOI": "",
	"POINAME_1": "",
	"COMMENT_1": "",
	"CONTACTPERSON": "",
	"PHONENO_1": "",
	"MOBILE": "",
	"EMAIL": "",
	"ADDRESS": "",
	"STREET": "",
	"FREQUENCY": "",
	"MEDREP_ID": "",
	"COMPANY_ID": "",
	"PRINTERNAME": "",
	"TEXTAREA1": "",
	"LSTDEALS": "",
	"DEAL_AMOUNT": "",
	"DEAL_STARTD": "",
	"DEAL_ROI_DATE": "",
	"DEAL_TYPE": "",
	"DEAL_SOURCE_SALE": "",
	"DEAL_SOURCE_NAME": "",
	"DEAL_PHNAME": "",
	"DEAL_PH_INVNO": "",
	"DEAL_PH_DATE": "",
	"DEAL_ITEM1": "",
	"DEAL_ITEM1Q": "",
	"DEAL_ITEM2": "",
	"DEAL_ITEM2Q": "",
	"DEAL_ITEM3": "",
	"DEAL_ITEM3Q": "",
	"DEAL_ITEM4": "",
	"DEAL_ITEM4Q": "",
	"DEAL_PAY_METHOD": "",
	"DEAL_BANK": "",
	"DEAL_BANK_ACC": "",
	"DEAL_ID": "",
	"DEAL_COMENT": "",
	"DEAL_PAY": "",
	"LSTGEOLOC": "",
	"MEDREP": "Invalid expression: convert_number(\"\"+convert_type(a,\"N\"))",
	"MEDREP_1": "Invalid expression: convert_number(\"\"+convert_type(a,\"N\"))",
	"DATE": "29/04/2025",
	"PASSOK": "0",
	"SYNCINPROGRESS": "0",
	"FAILEDSYNC": "0",
	"SAVING": "0",
	"CHANGEPASS": "0",
	"PHONEORDER": "0",
	"PLANOPPENED": "0",
	"PINISVALID": "0",
	"FLAGADDITEM": "0",
	"FLAGVIEWBONUS": "0"
}],
	defaultValues: {
	"LANG": "",
	"REPID": "",
	"REPID_1": "",
	"PASSWORD": "",
	"TEXTBOX3": "",
	"VPASSWORD": "",
	"VSECURITY": "",
	"MEDREPCODE": "",
	"MEDREPNAME": "",
	"AUTOSAVEINV": "",
	"HIDEBONUS": "",
	"COMPANYID": "",
	"NEWPASSWORD": "",
	"SLIDER1": "",
	"COMPANYCODE": "",
	"COMPANYNAME": "",
	"MESSLOW_": "",
	"MESSMEDIUM_": "",
	"MESSHIGHT_": "",
	"MESSALERT_": "",
	"SLIDERSAVING": "",
	"LIST2": "",
	"LSTROUTES": "",
	"SEARCH_OFFROUTE": "",
	"LSTOFFROUTE": "",
	"VISITTYPE": "",
	"VISITOBJECTIVE": "",
	"SUPERVISOR": "",
	"SPECIALREQUEST": "",
	"COMENT": "",
	"TEST1": "0",
	"TEST2": "29/04/2025",
	"LSTVISITHEAD": "",
	"DEVLAT": "",
	"DEVLONG": "",
	"MAP1": "",
	"DROPGROUP": "",
	"DROPSUBGROUP": "",
	"TXTSEARCHDESC": "",
	"SUBGROUPARRAY": "",
	"TOTAL_BEF_ORD": "",
	"TOTAL_VAT_ORDER": "",
	"TOTAL_ORDER_WITH_VAT": "",
	"TOTAL_BEF_INV": "",
	"TOTAL_VAT_INV": "",
	"TOTAL_INV_WITH_VAT": "",
	"ALLOWEDDISTANCE": "",
	"TXTPOILAT": "",
	"TXTPOILONG": "",
	"VIEWALLDAYSINPLAN": "",
	"WH1": "",
	"WH2": "",
	"WH3": "",
	"WH4": "",
	"ALLOWBONUS": "",
	"VISITSHEAD_ID": "",
	"ID": "",
	"DATE_2": "",
	"VISITHEAD_COMP_ID": "",
	"STARTH": "",
	"STARTM": "",
	"ENDH": "",
	"ENDM": "",
	"DISPLAYMEDREPNAME": "",
	"DISPLAYDATE": "",
	"PRICELIST": "",
	"TMPPOIID": "",
	"POIID": "",
	"POINAME": "",
	"POITYPE": "",
	"BESTTIME": "",
	"REGION": "",
	"COMMENT": "",
	"PHONENO": "",
	"ROUTE": "",
	"TOTAL_DUES": "",
	"STARTTIME": "",
	"DATE_1": "",
	"LATITUDE": "",
	"LONGITUDE": "",
	"DITRICT1": "",
	"DISTRICT_ID": "",
	"REGION1": "",
	"AREA1": "",
	"POSACCURACY": "",
	"POSDISTANCE": "",
	"MYPIN": "",
	"RECEIVEDPIN": "",
	"SKIPREAS": "",
	"SKIPCOMMENT": "",
	"VACATION_MEDREP": "",
	"VACATION_COMPANY_ID": "",
	"VACATION_ACTIVITY": "",
	"REASON": "",
	"VACATION_DATE": "",
	"VACATION_COMMENT": "",
	"ADDITEMWITHBONUS": "",
	"ROUTEID": "",
	"MEDREPID": "",
	"ENDTIME": "",
	"LATX": "",
	"LATY": "",
	"ACCURACY": "",
	"ALTITUDE": "",
	"ALTITUDEACCUR": "",
	"HEADING": "",
	"SPEED": "",
	"TIMESTANPD": "",
	"LAT1": "",
	"LONG1": "",
	"LSTDISCUSSED": "",
	"LSTSAMPLES": "",
	"LSTORDERS": "",
	"LSTINVOICES": "",
	"LSTRECEIPT": "",
	"PAIMENTTYPE": "",
	"TXTRECDESC": "",
	"CURRENCY": "",
	"AMOUNT": "",
	"ONINVOICENO": "",
	"SHIPDATE": "",
	"PAYMODE": "",
	"DELIVERYMODE": "",
	"LSTUNPAIDINV": "",
	"SIGNATURECAPTURE1": "",
	"LSTVISITNOTES": "",
	"IMAGEBLOB": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP4//8/AwAI/AL+eMSysAAAAABJRU5ErkJggg==",
	"IMAGEBLOB_HIDDENA5FN": "",
	"NOTES": "",
	"NOTE_COMPID": "",
	"ID_3": "",
	"VISITFK": "",
	"LSTMEDIALFILES": "",
	"AVAILABLE_MEDIA1": "",
	"FEEDBACK": "",
	"NBROF_SAMPLES": "",
	"NBROFORDERS": "",
	"NBROFDISCUSSEDPRODUTS": "",
	"NBROFINVOICES": "",
	"NBROFRECEIPTS": "",
	"LSTBASKETH": "",
	"LSTBASKETDET": "",
	"BASKETNUM": "",
	"BASKETITEM": "",
	"PRODCODE": "",
	"ITEMNAME": "",
	"LSTITEMS_QTY_PAC": "",
	"LSTITEMS_BONUSQ_PAC": "",
	"DROPSELLUNIT": "",
	"DROPBONUSUNIT": "",
	"LSTITEMS_SELLSIZE": "",
	"LSTITEMS_BONUSSIZE": "",
	"QTY": "",
	"BONUS": "",
	"LSTITEMS_UNITPR": "",
	"LSTITEMS_DISCOUNT": "",
	"TOTAL_PRICE": "",
	"SMOQ": "",
	"BMOQ": "",
	"LITEITEMS_DISCUSSEDTYPE": "",
	"LISTITEMS_DISCUSSEDCOMENT": "",
	"TMPRET": "",
	"RETURNITEM": "",
	"RETURNQTY": "",
	"RETPRICE": "",
	"RETURNABLE": "",
	"LSTITEMS": "",
	"LSTVACATION": "",
	"LSTPOI_KEYWORDSEARCH": "",
	"LSTPOI": "",
	"POINAME_1": "",
	"COMMENT_1": "",
	"CONTACTPERSON": "",
	"PHONENO_1": "",
	"MOBILE": "",
	"EMAIL": "",
	"ADDRESS": "",
	"STREET": "",
	"FREQUENCY": "",
	"MEDREP_ID": "",
	"COMPANY_ID": "",
	"PRINTERNAME": "",
	"TEXTAREA1": "",
	"LSTDEALS": "",
	"DEAL_AMOUNT": "",
	"DEAL_STARTD": "",
	"DEAL_ROI_DATE": "",
	"DEAL_TYPE": "",
	"DEAL_SOURCE_SALE": "",
	"DEAL_SOURCE_NAME": "",
	"DEAL_PHNAME": "",
	"DEAL_PH_INVNO": "",
	"DEAL_PH_DATE": "",
	"DEAL_ITEM1": "",
	"DEAL_ITEM1Q": "",
	"DEAL_ITEM2": "",
	"DEAL_ITEM2Q": "",
	"DEAL_ITEM3": "",
	"DEAL_ITEM3Q": "",
	"DEAL_ITEM4": "",
	"DEAL_ITEM4Q": "",
	"DEAL_PAY_METHOD": "",
	"DEAL_BANK": "",
	"DEAL_BANK_ACC": "",
	"DEAL_ID": "",
	"DEAL_COMENT": "",
	"DEAL_PAY": "",
	"LSTGEOLOC": "",
	"MEDREP": "Invalid expression: convert_number(\"\"+convert_type(a,\"N\"))",
	"MEDREP_1": "Invalid expression: convert_number(\"\"+convert_type(a,\"N\"))",
	"DATE": "29/04/2025",
	"PASSOK": "0",
	"SYNCINPROGRESS": "0",
	"FAILEDSYNC": "0",
	"SAVING": "0",
	"CHANGEPASS": "0",
	"PHONEORDER": "0",
	"PLANOPPENED": "0",
	"PINISVALID": "0",
	"FLAGADDITEM": "0",
	"FLAGVIEWBONUS": "0"
},
	datePickerMonthNames: ['January','February','March','April','May','June','July','August','September','October','November','December'],
	datePickerDayNames: ['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],
	datePickerTodayButton: 'Today',
	datePickerCloseButton: '',
	datePickerFirstDayOfWeek: 1,
	resetFormMessage: 'Are you sure you want to reset the form?',
	resetFormTitle: 'Warning',
	resetFormIcon: 'svgIcon=#alpha-icon-questionCircle:icon',
	dirtyFormMessage: 'You must first save your changes or cancel changes by clicking the Reset button.',
	dirtyFormTitle: 'Notice',
	dirtyFormIcon: 'svgIcon=#alpha-icon-infoCircle:icon',
	deleteRecordDialogTitle: 'Delete Record',
	deleteRecordDialogMessage: 'Are you sure you want to delete this record?',	
	ssDateFormat: 'dd/MM/yyyy',
	styleName: 'Alpha-Magenta',
	_fieldHelpers_DIALOG2: [],
	parentComponentAlias: '',
	submitIfHasClientSideErrors: true, 
	rowErrors: {
				showMessageBox: false,
				messageBoxTitle: 'Error',
				style: 'color: red; width: 6in; height: 2in;'
		},
	fieldErrors: {
		type: 'block', 
		className: 'errorText',
		inputClassName: '[class.gridInputError]',
		edit: { 
			container: { className: '[class.gridInputContainerError]'}
		},
		icon: 'svgIcon=#alpha-icon-exclamationCircle:icon',
		global: {
			contId: 'DLG1.GLOBALERRORS',
			hoverClassName: 'errorTextHighlight',
			hoverInputClassName: 'errorInputHighlight'
		}
	},
		_canAjaxCallback: function(e) {
DLG1_DlgObj.showWaitMessage('page',{useCSSAnimation: false,message: 'Wait (server)...',icon: 'css/A5System/Images/wait.gif'});
		},
		__afterAjaxCallbackComplete: function(e) {
DLG1_DlgObj.hideWaitMessage('page');
		},
		canAjaxCallback: function(e) {
if(typeof DLG1_DlgObj.__ajaxTiming == 'undefined') DLG1_DlgObj.__ajaxTiming = {};
var t = new Date();
DLG1_DlgObj.__ajaxTiming[e.xbasicFunctionName] = t;
		},
		afterAjaxCallbackComplete: function(e) {
if(typeof DLG1_DlgObj.__ajaxTiming == 'undefined') DLG1_DlgObj.__ajaxTiming = {};
var t2 = new Date();
var t1 = DLG1_DlgObj.__ajaxTiming[e.xbasicFunctionName]
var elapse = (t2-t1)/1000
console.log('Ajax timing for \'' + e.xbasicFunctionName + '\' ' + elapse + ' seconds')
		},
		onInitializeComplete: function(e) {
setTimeout(function(){
 DLG1_DlgObj.setValue('saving',0);
 DLG1_DlgObj.setValue('syncinprogress',0);
 var lObj = DLG1_DlgObj.getControl('LSTITEMS');
 lObj.setFilter(false);
 DLG1_DlgObj.setValue('saving',0);
 var _onSuccess = function(data) {
  var _d = '';
   _d = [['','']];
   for(var i = 0; i < data.length; i++) {
    _d.push([data[i].MEDREPNAME, data[i].ID]);
   }
   DLG1_DlgObj.populateDropdownBox('MEDREP',_d,true);
   DLG1_DlgObj.populateDropdownBox('MEDREP_1',_d,true);
 };
 var _onFail = function() {
 alert("you have to re-sync (1)");
 };
 var _filter = '';
 var _order = '';
 DLG1_DlgObj.getFromDataCache('medreps',_onSuccess,_onFail,_filter,_order);
},750)
		},
		onRenderComplete: function(e) {
console.log('entered on render complete');
setTimeout(function(){
 const tdate = new Date();
 var thed = tdate.toFormat('dd/MM/yyyy');
 DLG1_DlgObj.setValue('Date',thed);
 mcp1 = DLG1_DlgObj.getValue('CompanyCode');
 mcp2 = DLG1_DlgObj.getValue('CompanyName');
 console.log(mcp1);
 console.log(mcp2);
 if (mcp1=='' || mcp2 == '')  {
  console.log('ff');
   var frameId = 'FRAME_1';
   var frameState = 'open';
  }
},500)
		},
		onAndroidBackButton: function(e) {
__pgShellAndroidBack();
		},
		onOrientationChange: function(e) {
var pObj = DLG1_DlgObj.getPanelObject();
if(pObj && pObj.resize && typeof pObj.resize == 'function') pObj.resize();
		},
		onPhoneGapReady: function(e) {
DLG1_DlgObj._windowResizeDelay = 86400000;
		},
		onFirestoreAuthStateChanged: function(e) {
DLG1_DlgObj.onFirestoreLogin(e);
		},
		appCache_error: function(e) {
var ele = $('APPCACHE_DOWNLOAD_ERROR');
if(ele) { 
	ele.style.display = '';
	ele.innerHTML = 'Error: Cache was not loaded. ';
}
		},
		appCache_progress: function(e) {
var ele = $('APPCACHE_DOWNLOAD_PROGRESS');
if(ele) {
 ele.style.display = '';
 if(typeof e.event.total != 'undefined') {
  ele.innerHTML = 'Loaded ' + e.event.loaded + ' of ' + e.event.total;
  if(e.event.loaded == e.event.total) {
   ele.style.display = 'none';
  }
 } else {
  ele.innerHTML = 'Working....';
 }
}
		},
		appCache_updateready: function(e) {
window.location.reload();
		},
		_onWindowResize: function(e) {
var arr = DLG1_DlgObj._listControls;
if(arr) {
	var obj;
	for(var i = 0; i < arr.length; i++) { 
		obj = DLG1_DlgObj.getControl(arr[i]);
		if(obj && obj.resize && typeof obj.resize == 'function') obj.resize()
	}
}
		},
_onInitializeBegin: function(e) { /*systemOnInitializeBegin*/ ;
   },
	});
DLG1_DlgObj._onOrientationChange =  function(e) { ;
DLG1_DlgObj._findActiveLayoutRule();
;  };
A5.__componentObj = DLG1_DlgObj;
A5.map._fn='https://maps.googleapis.com/maps/api/js?key=AIzaSyDFKjCO7et3Oy6OBhc3tDikNSevoIzQPIQ&libraries=geometry,places&callback=A5.map.init';
DLG1_DlgObj._tabObjects = [];
A5.loadJavascript('var discussedarray = [[\'\',\'\']];\n//OffrouteVisited(data.mvisitcnt,data.frequency,data.mcyclefdat,data.mcycletdat)\nvar msubgroup = \'\' ;\nvar mgroup = \'\' ;\nfunction openGoogleMaps(lat, lng) {\n    // Construct the URL with the provided latitude and longitude\n    const url = `https://www.google.com/maps?q=${lat},${lng}`;\n\n    // Check if Cordova is available and the InAppBrowser plugin is installed\n    if (window.cordova && cordova.InAppBrowser) {\n        // Open the URL using InAppBrowser in Cordova\n        cordova.InAppBrowser.open(url, \'_system\');\n    } else {\n        // Open the URL in a new tab or window in a regular web browser\n        window.open(url, \'_blank\');\n    }\n}\n\nfunction mainmenu() {\n\t\n\n\tDLG1_DlgObj.runAction(\'showwait1\');\n\tmSelection = DLG1_DlgObj.getValue(\'list::LIST2::menutext\');\n\n\tif(mSelection==\'Planned visit\') DLG1_DlgObj.panelSetActive(\'PANELCARD_2\');\n\t\n\tif(mSelection==\'Out of Plan\') DLG1_DlgObj.panelSetActive(\'PANELCARD_16\');\n\t\n\tif(mSelection==\'list of invoices\') {\n\t\tvar _ok = function() {\n\t\t\t\t\n//\t\t\tDLG1_DlgObj.runAction(\'setsessionid\');\n//\t\t\tsetTimeout(function(){\n\t\t\t\tDLG1_DlgObj.runAction(\'Open_Invoice_List\');\n\t\t\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_42\');\n\t\t\t\t\n//\t\t\t\t},750);\n\t\t\t\t\n\t\t};\n\n\t\tvar _err = function() {\n\t\t    alert(\'you need an internet connection to Open this module\');\n\t\t    DLG1_DlgObj.runAction(\'hidewait\');\n\t\t}; \n\n\t\twaitingmess(\'Working\');\n\t\tDLG1_DlgObj.serverIsAvailable(1000,_ok,_err);\n\n\t}\n\t\n\tif(mSelection==\'Receipt List\') {\n\t\tvar _ok = function() {\n\n\t\t\tDLG1_DlgObj.runAction(\'setsessionid\');\n\t\t\tsetTimeout(function(){\n\t\t\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_42\');\n\t\t\t\tDLG1_DlgObj.runAction(\'Open_Receipt_List\');\t\n\t\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t\t},1250);\n\t\t};\n\n\t\tvar _err = function() {\n\t\t    alert(\'you need an internet connection to Open this module\');\n\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t}; \n\t\twaitingmess(\'Working\');\n\n\t\tDLG1_DlgObj.serverIsAvailable(750,_ok,_err);\n\n\t}\n\t\n\tif(mSelection==\'Create Plan\') {\n\t\t\n\t\tvar _ok = function() {\n\t\t\tDLG1_DlgObj.setValue(\'Planoppened\',1);\n\t\t\tDLG1_DlgObj.runAction(\'setsessionid\');\n\t\t\t\n\t\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_42\');\n\t\t\tDLG1_DlgObj.runAction(\'open_Cylcle\');\t\n\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t};\n\n\t\tvar _err = function() {\n\t\t    alert(\'you need an internet connection to open this module\');\n\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t}; \n\t\twaitingmess(\'Working\');\n\n\t\tDLG1_DlgObj.serverIsAvailable(1000,_ok,_err);\n\t}\n\n\tif(mSelection==\'Visit History\') {\n\t\t\n\t\tvar _ok = function() {\n//\t\t\tDLG1_DlgObj.runAction(\'setsessionid\');\n//\t\t\tsetTimeout(function(){\n\t\t\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_42\');\n\t\t\t\t//DLG1_DlgObj.panelSetActive(\'PANELCARD_49\');\n\t\t\t\tDLG1_DlgObj.runAction(\'Open_VisitHistoryD\');\n\t\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n//\t\t\t},750);\n\t\t};\n\n\t\tvar _err = function() {\n\t\t    alert(\'you need an internet connection to open this module\');\n\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t}; \n\t\twaitingmess(\'Working\');\n\n\t\tDLG1_DlgObj.serverIsAvailable(1000,_ok,_err);\n\t}\n\tif(mSelection==\'Order List\') {\n\t\t\n\t\tvar _ok = function() {\n//\t\t\tDLG1_DlgObj.runAction(\'setsessionid\');\n//\t\t\tsetTimeout(function(){\n\t\t\t\twaitingmess(\'loading\');\n\t\t\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_42\');\n\t\t\t\tDLG1_DlgObj.runAction(\'Open_ListOfOrders\');\n\n//\t\t\t},750);\n\n\t\t};\n\n\t\tvar _err = function() {\n\t\t    alert(\'you need an internet connection to open This Module\');\n\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t}; \n\t\twaitingmess(\'Working\');\n\t\tDLG1_DlgObj.serverIsAvailable(1000,_ok,_err);\n\t}\n\n\tif(mSelection==\'Messages\') {\n\t\t\n\t\tvar _ok = function() {\n\t\t\tDLG1_DlgObj.runAction(\'setsessionid\');\n\t\t\tsetTimeout(function(){\n\t\t\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_42\');\n\t\t\t\tDLG1_DlgObj.runAction(\'Open_Message\');\n\t\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t\t},750);\n\t\t};\n\n\t\tvar _err = function() {\n\t\t    alert(\'you need an internet connection to open this module\');\n\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t}; \n\t\twaitingmess(\'Working\');\n\n\t\tDLG1_DlgObj.serverIsAvailable(1000,_ok,_err);\n\t}\n\t\n//\talert(mSelection);\n\t//console.log(mSelection);\n\tif(mSelection == \'non field visit\') {\n\t\t//alert("hhh");\n\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_VACATION\');\t\n\t}\n\n\tif(mSelection==\'New Customer\') {\n\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_POI_DET\');\n\t}\n\n\tif(mSelection==\'Offline Visit\') {\n\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_5\');\n\t}\n\n\tif(mSelection==\'Synchronise\') {\n//\t\tDLG1_DlgObj.showContainerWindow(this,\'WINDOW_PROGRESS\');\n\t\tsyncData() ;\n\t}\n\n\tif(mSelection==\'logout\') {\n\t\tif(isvisitheaddirty()) {\n\t\t\talert(\'you have unsynchronized data\');\n\t\t} else {\n\t\t\tDLG1_DlgObj.panelSetActive(\'SIGNIN_PANELCARD\');\n\t\t}\n\t}\n\tif(mSelection==\'Dashboard\') {\n\n\t\tvar _ok = function() {\n\t\t\tDLG1_DlgObj.runAction(\'setsessionid\');\n\t\t\tsetTimeout(function(){\n\t\t\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_42\');\n\t\t\t\tDLG1_DlgObj.runAction(\'Open_Dashboard\');\n\t\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t\t},750);\n\t\t};\n\n\t\tvar _err = function() {\n\t\t    alert(\'you need an internet connection to open this module\');\n\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t}; \n\t\twaitingmess(\'Working\');\n\n\t\tDLG1_DlgObj.serverIsAvailable(1000,_ok,_err);\n\t}\n\t\n\tif(mSelection==\'Loading/Unloading\') {\n\n\t\tvar _ok = function() {\n\t\t\tDLG1_DlgObj.runAction(\'setsessionid\');\n\t\t\tsetTimeout(function(){\n\t\t\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_42\');\n\t\t\t\tDLG1_DlgObj.runAction(\'Open_Loading\');\n\t\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t\t},750);\n\t\t};\n\n\t\tvar _err = function() {\n\t\t    alert(\'you need an internet connection to open this module\');\n\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\n\t\t}; \n\t\twaitingmess(\'Working\');\n\n\t\tDLG1_DlgObj.serverIsAvailable(1000,_ok,_err);\n\t}\n\t\n\tDLG1_DlgObj.runAction(\'hidewait\');\n\n};\n\n\nfunction makeVisit(){\n\n\tmalloweddist = DLG1_DlgObj.getValue(\'alloweddistance\');\n\tmPhoneOrder = DLG1_DlgObj.getValue(\'phoneorder\');\n\n\tif (malloweddist>=10 && mPhoneOrder==0)  {\n\t\tfunction getCurrentLocation(onSuccess, onError) {\n\t     if (navigator.geolocation) {\n           navigator.geolocation.getCurrentPosition(onSuccess, onError, {\n\t\t\tenableHighAccuracy: true, \n\t\t\ttimeout: 15000, \n\t\t\tmaximumAge: 60 // Allow a cached position up to 60 seconds old\n\t\t\t});\n\n \t      } else {\n  \t          alert("access lcoation denied");\n   \t\t    }\n    \t }\n\n        /**\n         * Main function to check the distance and run another function if the distance is less than 50 meters.\n         * @param {number} customerLat - Latitude of the customer location.\n         * @param {number} customerLon - Longitude of the customer location.\n         */\n        function checkProximityAndRun(customerLat, customerLon) {\n            getCurrentLocation(\n                function(position) { // Success callback\n                    const currentLat = position.coords.latitude;\n                    const currentLon = position.coords.longitude;\n            \t\tconst accuracy = position.coords.accuracy;\n              \n                    malloweddist = DLG1_DlgObj.getValue(\'alloweddistance\');\n\t\t\t\t\t\n\n                    const distance = calculateDistance(customerLat, customerLon, currentLat, currentLon);\n                    if (distance <= malloweddist) {\n                        // Run the desired function if the distance is less than 50 meters\n                        DLG1_DlgObj.hideWaitMessage();\n                        setTimeout(function(){\n\t                        startvisit();\n\t\t\t\t\t\t},500)\n\n                    } else {\n\t\t\t\t\t\t//Code for a button that opens a container window\n\t\t\t\t\t\tDLG1_DlgObj.hideWaitMessage();\n\t\t\t\t\t\tDLG1_DlgObj.showContainerWindow(this,\'GETPASS\');    \n\t\t\t\t\t\tDLG1_DlgObj.setValue(\'posaccuracy\',accuracy);\n\t\t\t\t\t\tDLG1_DlgObj.setValue(\'posDistance\',distance);\n\t\t\t\t\t\t                \t\t\n                        console.error(\'Error: You are more than 50 meters away from the customer location.\');\n                        console.log(customerLat);\n                        console.log(customerLon);\n                        console.log(currentLat);\n                        console.log(currentLon);\n                        console.log(malloweddist);\n                        console.log(distance);\n\n\t\t\t\t\t\t\n\n          //              console.error(\'customer lat\'+customerLat);\n            //            console.error(\'customer lon\'+customerLon);\n              //       \tconsole.error(currentLat lat\'+currentLat);\n                //        console.error(currentLon lon\'+currentLon);\n                           \n                    }\n                },\n                function(error) { // Error callback\n                \tDLG1_DlgObj.hideWaitMessage();\n\t\t\t\t\tDLG1_DlgObj.showContainerWindow(this,\'GETPASS\');                    \t\t\n                    console.error(`Error getting current location: ${error.message}`);\n                }\n            );\n        }\n\n        /**\n         * Example function to be run if the distance is less than 50 meters.\n         */\n   \n        // Example usage:\n        // Trigger the proximity check (this can be bound to a button click or any other event)\n\n\t\tcustomerLat = DLG1_DlgObj.getValue(\'txtpoilat\');\n\t\tcustomerLon = DLG1_DlgObj.getValue(\'txtpoilong\');\n\n\t\twaitingmess(\'Getting location\')\n\n        checkProximityAndRun(customerLat, customerLon);\n\t\t        \n\n///to check the distance of the location\n\n\t\t\n\t\t}\n\telse {\n                        startvisit();\n\t\t\n\t\t }\n\n//\tDLG1_DlgObj.runAction(\'showwait1\');\n\n\n\t//assume you have the 3 asynchronous functions that you want to run synchronously\n//\tvar actions  = [ff1,ff2,ff3,ff4] ; //an array of functions to execute\n\n\n\n///to check the distance of the location\n\n\n\n}\n\n////\n\nfunction syncData() {\n    // Reset \'saving\' status\n    DLG1_DlgObj.setValue(\'saving\', 0);\n\n    var listObj = DLG1_DlgObj.getControl(\'LSTVISITHEAD\');\n    var flag = listObj.listIsDirty();\n\n    // Delay sync operation slightly (helps with UI transitions or pending edits)\n    setTimeout(syncit, 750);\n\n    if (!flag) {\n        // If no dirty records, reset status after a short delay\n        setTimeout(function () {\n            DLG1_DlgObj.setValue(\'saving\', 0);\n            DLG1_DlgObj.hideWaitMessage();\n        }, 4000);\n    }\n}\n\nfunction syncit() {\n    DLG1_DlgObj.setValue(\'SliderSaving\', 0);\n    DLG1_DlgObj.setValue(\'saving\', 1);\n//    DLG1_DlgObj.runAction(\'waitsaving\');\n\n    // Debug info output\n    var mFile = DLG1_DlgObj.getValue(\'MedRep\');\n    var now = new Date();\n    var dateTime = `${now.getFullYear()}-${now.getMonth() + 1}-${now.getDate()}#${now.getHours()}_${now.getMinutes()}_${now.getSeconds()}`;\n    var filename = `c:\\\\debuginfo\\\\${mFile}${dateTime}.txt`;\n\n    var list = DLG1_DlgObj.getControl(\'LSTVISITHEAD\');\n    var data = JSON.stringify(list._data, null, 2);\n    DLG1_DlgObj.debugInfoToFile(data, filename, true, true);\n\n    // Message if user has unsaved changes\n    var msg = \'Detail view has unsaved changes\';\n\n    // Shared AJAX sync config\n    var ajaxOptions = {\n        onAjaxFail: () => alert(\'Unable to sync.\'),\n        onDeviceOffline: () => {\n            alert(\'Device is offline.\');\n            DLG1_DlgObj.setValue(\'saving\', 0);\n        },\n        onServerNotAvailable: () => {\n            alert(\'Server is not available.\');\n            DLG1_DlgObj.setValue(\'saving\', 0);\n        },\n        onPoorConnection: () => {\n            alert(\'You have a poor connection.\');\n            DLG1_DlgObj.setValue(\'saving\', 0);\n        },\n        dirtyDetailViewMessage: msg,\n        checkifserveravailable: true,\n        amountofdatatosend: \'.1MB\',\n        performspeedtest: false,\n        maxspeedtestduration: 4200,\n        timeOutnumber: 4200\n    };\n\n    // Helper function to sync a list\n\n\tfunction syncList(listName, useAjaxOptions = true) {\n        var options = {\n            rows: \'allRows\',\n            chunked: { allow: true }\n        };\n\n        if (useAjaxOptions) {\n            options.ajax = ajaxOptions;\n        }\n\n        DLG1_DlgObj.saveListEdits(listName, options);\n    }\n\n    // Perform syncs\n    syncList(\'LSTVISITHEAD\');\n    syncList(\'LSTPOI\');\n    syncList(\'lstgeoloc\');\n    syncList(\'LSTDEALS\');\n    syncList(\'LSTVACATION\'); \n}\n\nfunction printEscCode(mTxt){\n\tBTPrinter.printPOSCommand(function(data){\n\t    console.log("Success");\n\t    console.log(data)\n\t},function(err){\n\t    console.log("Error");\n\t    console.log(err)\n\t}, mTxt);//OC is a POS command for page feed\n}\n\n\nfunction printText(mTxt){\n\tBTPrinter.printTextSizeAlign(function(data){\n\t    console.log("Success");\n\t    console.log(data)\n\t},function(err){\n\t    console.log("Error");\n\t    console.log(err)\n\t}, mTxt,\'0\',\'0\')//string, size, align\n}\n\n\nfunction printBase64(mString){\n\t\talert(\'b64\');\n\tBTPrinter.printBase64(function(data){\n \t   console.log("Success b64");\n  \t  console.log(data);\n\t},function(err){\n \t   console.log("Error");\n \t   console.log(err);\n\t}, mString,\'0\');//base64 string, align\n\n}\nfunction disconnectPrinter(){\n\tmPrname = DLG1_DlgObj.getValue(\'printername\');\n\n\tsetTimeout(function(){\n\t    BTPrinter.disconnect(function(data){\n\t\tconsole.log("Success");\n\t\tconsole.log(data);\n\t//\talert(\'disconected\');\n\t    },function(err){\n\t\tconsole.log("Error");\n\t\tconsole.log(err)\n\t    }, mPrname)\n\t}, 1500);\n\n}\n\nfunction printLine(mLine){\n//\talert(mLine);\n\tBTPrinter.printText(function(data){\n\t    console.log("Success");\n\t    console.log(data);\n\t //   alert(mLine);\n\t    \n\t},function(err){\n\t    console.log("Error");\n\t    console.log(err)\n\t}, mLine)\n}\n\nfunction connectPrinter(){\n//\talert(\'connect\');\n\tmPrname = DLG1_DlgObj.getValue(\'printername\');\n\tconsole.log(mPrname);\n\tBTPrinter.connect(function(data){\n\t\tconsole.log("connected Success");\n\t\tconsole.log(data)\n\t//\talert(\'connected\');\n\t},function(err){\n\t\tconsole.log("Error");\n\t\tconsole.log(err)\n\t}, mPrname);\n\t\n\n}\n\nfunction makeId(length) {\n    var result           = \'\';\n    var characters       = \'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\';\n    var charactersLength = characters.length;\n    for ( var i = 0; i < length; i++ ) {\n        result += characters.charAt(Math.floor(Math.random() * charactersLength));\n    }\n    return result;\n}\n\n\nfunction getitemgroup() {\n\tvar _d = [[\'\',\'\']];\n \t\n\tvar _onComplete = function(objl) {\n\t\t\tfor(var i = 0; i < objl.itemgroups.length; i++) {\n \t\t\t_d.push( [objl.itemgroups[i].itemgroup, objl.itemgroups[i].id]);\n \t\t}\n \t\tDLG1_DlgObj.populateDropdownBox(\'DROPGROUP\',_d,true) ;\n \t}\n\t\n\tDLG1_DlgObj.readDataCacheItems(\'itemgroups\',_onComplete);\n\t\n\tif(_d.length <= 1) {\n\t\tDLG1_DlgObj.readDataCacheItems(\'itemgroups\',_onComplete);\n\t}\n\t\n\t\n\t//DLG1_DlgObj.setValue(\'freeitemid\',mitemid) ;\t\n\t\n}\n\nfunction viewInvTotals() {\n//\tdebugger ;\n\tvar lObj = DLG1_DlgObj.getControl(\'lstinvoices\');\n\tmTotalht = 0 ;\n\tmTotalVat = 0 ;\n\tTotDisc = DLG1_DlgObj.getValue(\'MainDisc\');\n\t\n\tvar i;\n\tfor (i = 0; i < lObj._data.length; i++) {\n\t\t\n\n\t\tmQty = lObj._data[i].qty;\n\t\tmUnitPr = lObj._data[i].unitprice;\n\t\tmDicount = Number(lObj._data[i].discount) ;\n\t\tmVat = Number(lObj._data[i].vat) ;\t\t\n\t\t\t\n\t\tmTotalht = mTotalht + (mQty *mUnitPr) * ((100-mDicount)/100) ;\n\t\t\n\n\t} ;\n\t\n\tmTotalVat = mTotalVat + ((mTotalht * ((100-TotDisc)/100))*((mVat)/100));\n\t\n\tDLG1_DlgObj.setValue(\'INVTotal\',mTotalht) ;\n\tDLG1_DlgObj.setValue(\'TotalVat\',mTotalVat) ;\n\t\n\t//alert(mTotalVat) ;\n\n};\n\nfunction viewOrdTotals() {\n//\tdebugger ;\n\tvar lObj = DLG1_DlgObj.getControl(\'lstorders\');\n\tmTotalht = 0 ;\n\tmTotalVat = 0 ;\n\tTotDisc = DLG1_DlgObj.getValue(\'OrdDisc\');\n\t\n\tvar i;\n\tfor (i = 0; i < lObj._data.length; i++) {\n\t\t\n\n\t\tmQty = lObj._data[i].qty;\n\t\tmUnitPr = lObj._data[i].price;\n\t\tmDicount = Number(lObj._data[i].discount) ;\n\t\tmVat = Number(lObj._data[i].vat) ;\t\t\n\t\t\t\n\t\tmTotalht = mTotalht + (mQty *mUnitPr) * ((100-mDicount)/100) ;\n\t\t\n\n\t} ;\n\t\n\tmTotalVat = mTotalVat + ((mTotalht * ((100-TotDisc)/100))*((mVat)/100));\n\t\n\tDLG1_DlgObj.setValue(\'OrdTotal\',mTotalht) ;\n\tDLG1_DlgObj.setValue(\'OrdTotalVat\',mTotalVat) ;\n\t\n};\n\n\nfunction OffrouteVisited(mVisitc,mFreq,mFDate,mTdate){\n//\talert(\'?\');\n\tmDt = DLG1_DlgObj.getValue(\'Date\');\n//\talert(\'h\');\n\tif(mVisitc>=mFreq && mDt >= mFDate && mDt <= mTdate){\n//\t\tconsole.log(mVisitc);\n//\t\tconsole.log(mFreq);\n//\t\tconsole.log(mDt);\n//\t\tconsole.log(mFDate);\n//\t\tconsole.log(mTdate);\n\t\t\n\t\treturn true;\n\t\t}\n\t//console.log(\'false\');\n\treturn false;\n\t\n}\n\nfunction getsynccount(){\n\tvar o = DLG1_DlgObj.countRecordsToSynch(\'LSTVISITHEAD\');\n\tif(o.count>0) {\n\t\treturn true ;\n\t}\n\treturn false ;\n\n} \nfunction refreshFreeItem(mtype,mitemid) {\n//\talert(\'here\');\n\t\n\tvar _onComplete = function(objl) {\n\t//\talert(\'rf complete\');\n\t\tvar _d = \'\';\n \t\t_d = [[\'\',\'\']];\n \t\tfor(var i = 0; i < objl.items.length; i++) {\n \t\t\tif(mtype != 0){\n \t\t\t\tif(objl.items[i].type_id == mtype){\n \t\t\t\t\t_d.push( [objl.items[i].description, objl.items[i].id]);\n \t\t\t\t}\n \t\t\t}\n \t\t\t\n \t\t\tif(mtype == 0 && mitemid == objl.items[i].id){\n\t\t  \t\t_d.push( [objl.items[i].description, objl.items[i].id]);\n\t\t  \t}\n\t\t }\n\t \tDLG1_DlgObj.populateDropdownBox(\'FREEITEMID\',_d,true) ;\n//\t\tDLG1_DlgObj.populateDropdownBox(\'LSTITEMS_BONUSI\',_d,true) ;\n\n//\t\tvar lObj = DLG1_DlgObj.getControl(\'LSTITEMS\');\n//\t\tif (lObj) {\n//\t\t    lObj._inplaceEditing.choices.bonusitem = _d;\n//\t\t}\n\t}\n\n\tDLG1_DlgObj.readDataCacheItems(\'items\',_onComplete);\n\n\tDLG1_DlgObj.setValue(\'freeitemid\',mitemid) ;\t\n\t\n}\n\n\nfunction getChartData() {\n\t\n\t\n//\talert(chartData);\n\tDLG1_DlgObj.runAction(\'readchartval\');\n//\talert(chartData) ;\n//\tconsole.log(chartData) ;\n\treturn chartData ;\n}\nfunction populateBasketDropDown() {\n\tDLG1_DlgObj.runAction(\'populateitembasket\');\n\n//\tvar choices = [];\n//\tmFilterIType=DLG1_DlgObj.getValue(\'list::LSTBASKETDET::itemtypeid\') ;\n//\tvar itemIds = DLG1_DlgObj._dataSeriesData.products.id\n//\tvar itemDescr = DLG1_DlgObj._dataSeriesData.products.description;\n//\tvar itemType = DLG1_DlgObj._dataSeriesData.products.type_id;\n//\tvar _d = A5.makeArrayOfArrays(itemDescr,itemIds,itemType); //undocumented; will fix\n//\tfor (var i = 0; i < _d.length; i++) {\n//\t\tif(_d[i][2] == mFilterIType){\n//        \tchoices.push([_d[i][0],_d[i][1]]);\n//     }\n//\tDLG1_DlgObj.populateDropdownBox(\'basketitem\',choices,true);\n}\n\n\nfunction __pgShellAndroidBack() { \n\tmOp = DLG1_DlgObj.getValue(\'Planoppened\');\n\tif(mOp==1) {\n\t\tcycleback();\n\t\treturn\n\t}\n\tmactp = DLG1_DlgObj.panelGetActive(\'PANELNAVIGATOR_1\')\n\tif(mactp==\'SIGNIN_PANELCARD\'){\n\t\tmsgResult = confirm(\'<a5:r>Confirm Exit</a5:r>\');\n\t\tif ( msgResult ){\n\t\t\t//alert(\'a\');\n\t\t\tif (navigator.app) {\n\t\t\t\t//alert(\'b\');\n                navigator.app.exitApp();\n            } else if (navigator.device) {\n            \t//alert(\'c\');\n                navigator.device.exitApp();\n            }\t\t\n           }\n\t} else if(mactp==\'PANELCARD_MENU\'){\n\t\tmsgResult = confirm(\'<a5:r>Are you sure you want to logout?</a5:r>\');\n\t\tif ( msgResult ){\n\t\t\tDLG1_DlgObj.panelSetActive(\'SIGNIN_PANELCARD\')\n\t\t}\n\t\n\t} else if(mactp==\'PANELCARD_8\' || mactp==\'PANELCARD_9\' || mactp==\'PANELCARD_13\' || mactp==\'PANELCARD_INVOICES\' || mactp==\'PANELCARD_18\'){\n\t\tmsgResult = confirm(\'<a5:r>go back without saving?</a5:r>\');\n\t\tif ( msgResult ){\n\t\t\tDLG1_DlgObj.panelNavigate(\'PANELNAVIGATOR_1\',\'historyback\');\n\t\t}\n\t} else{\n\t\tDLG1_DlgObj.panelNavigate(\'PANELNAVIGATOR_1\',\'historyback\');\n\t}\n}\n\n\nfunction funcUpdatePoiLoc() {\n//\tmp = DLG1_DlgObj.getValue(\'tmppoiid\');\n//\talert(mp);\n\tDLG1_DlgObj.runAction(\'savepoiloc\');\n\t\n\t//setTimeout(function(){ DLG1_DlgObj.runAction(\'hidewait\'); }, 3000);\n\n}\n\nfunction endadd() {\n\tmLat2 = DLG1_DlgObj.getValue(\'list::LSTROUTES::LAT\') ;\n\tmLong2 = DLG1_DlgObj.getValue(\'list::LSTROUTES::LONT\') ;\n//\talert(mLat2+\',\'+mLong2) ;\n\treturn mLat2+\',\'+mLong2 ;\n}\n\nfunction startadd() {\n\tmLat1 = DLG1_DlgObj.getValue(\'lat1\') ;\n\tmLong1 = DLG1_DlgObj.getValue(\'long1\') ;\n//\talert(mLat1+\',\'+mLong1) ;\n\treturn mLat1+\',\'+mLong1 ;\n}\n\n\n\nfunction getFiles () {\n\n\tvar l = DLG1_DlgObj.getControl(\'lstMedialFiles\');\n\t\n\tvar arr = [];\n\tvar _d = l._data\n\tfor(var i =0; i < _d.length; i++) {\n\t\tarr.push(\'MEDIAFILESDL/\' + _d[i].filename);\n\t}\n\t\n\t\treturn arr;\n}\n\n\nfunction getFileNative() {\n\n\tvar l = DLG1_DlgObj.getControl(\'lstMedialFiles\');\n\tvar _d = l.selectionData[0];\n\t\n\treturn \'MEDIAFILES/MEDIAFILESDL/\' + _d.filename; \t\t\n\n}\n\n\nfunction formatNumber(num) {\n  return num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \'$1,\')\n}\n\nfunction handleBackButton(e) { // Android back button event handler\n    // Go through UI items in priority order to do "back" operation\n    var winobj = DLG1_DlgObj.getWindow(\'INTROWINDOW\'); // Is this window popped up?\n    if (!winobj.hidden) {\n        winobj.hide(); // no - hide and finish\n    return;\n    }\n\n    winobj = DLG1_DlgObj.getWindow(\'SETTINGSPOPUP\'); // another potential window\n    if (!winobj.hidden) {\n        winobj.hide();\n        return;\n    }\n\n    var panel = DLG1_DlgObj.panelGet(\'OVERALLLAYOUT\'); // is a docked panel being shown?\n    if (panel.state.dockPanelShown) {\n        panel.hideDock(); // yes - hide it and finish\n        return;\n    }\n\n  //  if (canGoBack()) { // do normal user-initiated "back" operation in app (like a browser)\n    //    doBackForward(+1);\n//        return;\n  //  }\n\n    // nothing left - exit app\n    e.preventDefault();\n    navigator.app.exitApp();\n\n}\n\n\nfunction supports_html5_storage() {\n  try {\n    return \'localStorage\' in window && window[\'localStorage\'] !== null;\n  } catch (e) {\n    return false;\n  }\n}\n\n\nfunction restoreVar() {\n\talert(\'rvar\')\n\t\n\n\tvar lautosave = localStorage.getItem(\'ls_savevisit\');\n\tDLG1_DlgObj.setValue(\'autosaveinv\',lautosave) ;\n\t\n\n\tvar lcompcode = localStorage.getItem(\'ls_compcode\');\n\tDLG1_DlgObj.setValue(\'CompanyCode\',lcompcode) ;\n\t\n\tvar lcompid = localStorage.getItem(\'ls_compid\');\n\tDLG1_DlgObj.setValue(\'COMPANYID\',lcompid) ;\n\n//\talert(lcompcode);\n\n\t\n\tvar lcompname = localStorage.getItem(\'ls_compname\');\n\tDLG1_DlgObj.setValue(\'CompanyName\',lcompname) ;\n\t\n\tvar lmedrep = localStorage.getItem(\'ls_medrep\');\n\tDLG1_DlgObj.setValue(\'MedRep\',lmedrep) ;\n\n\tDLG1_DlgObj.setValue(\'medrepcode\',lmedrep) ;\n//\talert(lmedrep);\n\n\tvar lt3 = localStorage.getItem(\'ls_t3\');\n\tDLG1_DlgObj.setValue(\'textbox3\',lt3) ;\n\n\n\tvar newd = new Date();\n\t\n\tvar dString = newd.toFormat(\'dd/MM/yyyy\');\n\n\n\tDLG1_DlgObj.setValue(\'Date\',dString) ;\n\t\n\t\n}\n\n\nfunction synccompanyinfo(){\n\tfunction f1(obj) {\n\t\tDLG1_DlgObj.runAction(\'fillcompanyinfo\');\n\t}\n\n\tfunction f2(obj) {\n\t\tDLG1_DlgObj.runAction(\'setsessionid\');\n\t}\n\tfunction f3(obj) {\n\t\tvar _onComplete = function(obj) {\n\n\t\tvar _d = \'\';\n\t\t _d = [[\'\',\'\']];\n\t\t for(var i = 0; i < obj.medreps.length; i++) {\n\t\t  _d.push( [obj.medreps[i].MEDREPNAME, obj.medreps[i].ID]);\n\t\t }\n\t\t DLG1_DlgObj.populateDropdownBox(\'MEDREP\',_d,true);;\n\t\t}\n\t\tvar _refreshThenRead = function(items,_onRead,_onOffline,_onServerUnavailable) {\n\t\t\tvar _onCompleteREAD = _onRead;\n\t\t\tvar _onOffline = function() {\n\t\t\t\t\tif(typeof _onOffline == \'function\') _onOffline();\n\t\t\t\t\tDLG1_DlgObj.readDataCacheItems(items,_onCompleteREAD);\n\t\t\t};\n\t\t\tvar _onServerNotAvailable = function() {\n\t\t\t\tif(typeof _onServerUnavailable == \'function\') _onServerUnavailable();\n\t\t\t\t\tDLG1_DlgObj.readDataCacheItems(items,_onCompleteREAD);\n\t\t\t};\n\t\t\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\t\t\t\tif(!flagOnline) {\n\t\t\t\t\t_onOffline();\n\t\t\t\t} else {\n\t\t\t\t\tvar _onServerIsAvailable = function() {\n\t\t\t\t\t\tvar _onRefreshOK = function() {\n\t\t\t\t\t\t\tDLG1_DlgObj.readDataCacheItems(items,_onCompleteREAD);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tDLG1_DlgObj.refreshDataCacheItem(items,_onRefreshOK);\n\t\t\t\t\t}\n\t\t\t\t\tDLG1_DlgObj.serverIsAvailable(800,_onServerIsAvailable,_onServerNotAvailable);\n\t\t\t\t}\n\t\t\t}\n\t//\talert(\'refresh read\');\n\t\t_refreshThenRead(\'medreps\',_onComplete)\n\t\n\t\t\n\t}\n\tfunction f4() {\n\t\tvar _html = \'<div style="display:inline-block;">Company Info Refreshed</div>\';\n\t\tvar _options = {\n\t\t"close": {\n\t\t\t"show": false\n\t\t},\n\t\t"duration": 2000,\n\t\t"animation": {\n\t\t\t"show": {\n\t\t\t\t"type": "auto",\n\t\t\t\t"duration": 600\n\t\t\t},\n\t\t\t"hide": {\n\t\t\t\t"type": "auto",\n\t\t\t\t"duration": 600\n\t\t\t}\n\t\t\t}\n\t\t};\n\t\tDLG1_DlgObj.transientMessage(\'top-fill\',_html,_options);\n\t}\n\t\n\n\tf1();\n\tsetTimeout(f2,750);\n\tsetTimeout(f3,1500);\n\t//setTimeout(f3,3000);\n\tsetTimeout(f4,3500);\n\t///setTimeout(f4,3000);\n\n}\n\n\nfunction retdiscussed(){\n\t\n\n\n\n\t//read data from a data-cache item called \'customer\'\n\tvar _onSuccess = function(data) {\n\t\t_d = [[\'\',\'\']];\n\t\tfor(var i = 0; i < data.length; i++) {\n\t\t  _d.push( [data[i].discussed_type, Number(data[i].id)]);\n\t\t }\n\t\tDLG1_DlgObj.stateInfo[\'discussedar\'] = _d;\n\t\t\n\t\tvar x = DLG1_DlgObj.stateInfo[\'discussedar\'] ;\n\t\t\n\t\tDLG1_DlgObj.populateDropdownBox(\'liteitems_DiscussedType\',_d,true) ;\t\t\n\t};\n\tvar _onFail = function() {\n\t};\n\t//filter expression references the \'Country\' field in the data item. If expression\n\t//returns true, the row is include in the output array\n\tvar _filter = \'\';\n\t//no sorting\n\tvar _order = \'\';\n\tDLG1_DlgObj.getFromDataCache(\'discussedtypes\',_onSuccess,_onFail,_filter,_order);\n\n}\n\n\nfunction isvisitheaddirty(){\n\n\tvar listObj = DLG1_DlgObj.getControl(\'LSTVISITHEAD\');\n\tvar flag = listObj.listIsDirty();\n\treturn flag ;\t\n}\n\nfunction checkloc(){\n\talert("location checked");\n}\n\nfunction startvisit(){\n//\tmp = DLG1_DlgObj.getValue(\'tmppoiid\') ;\n//\talert(mp);\n\t\n\tfunction ff1(obj) {\n\t\t\n\t\tmTmpPoi = DLG1_DlgObj.getValue(\'tmppoiid\');\n//\t\tDLG1_DlgObj.runAction(\'Getcoord\');\t\n\t\t\t\t\n\t\tvar i;\n\t\tvar mfound;\n\t\tmcontinue = 1\n\t\tvar listObj = DLG1_DlgObj.getControl(\'LSTVISITHEAD\');\n\t\tconsole.log(listObj._data);\n//\t\tfor (i = 0; i < listObj._data.length; i++) {\n//\t\t\tif(mTmpPoi == listObj._data[i].poiid) {\n//\t\t\t\tlet confirmAction = confirm("This POI has already been visited, visit again?");\n//   \t     \t\tif (confirmAction) {\n//\t\t\t\t\n // \t \t\t     } else {\n//\t        \t\tmcontinue = 0\n// \t    \t\t\tobj.stop();\n//  \t  \t\t    }\n//\t\t\t}  \t\n//\t\t};\n\t\t\n\t\tif(mcontinue==1){\n\t\t\n\t\t\tvar now = new Date();\n\t\t\tmh = now.getHours();\n\t\t\tmm = now.getMinutes();\n\t\t\tmTmpPoi = DLG1_DlgObj.getValue(\'tmppoiid\');\n\t\t\tmMedrepcode = DLG1_DlgObj.getValue(\'medrepid\') ;\n\t\t\tmCompid = DLG1_DlgObj.getValue(\'COMPANYID\');\n\t\t\tif(mTmpPoi==\'\')alert(\'poi is empty\');\t\t\n\t\t\tDLG1_DlgObj.setValueFrom(\'routeid\',\'route\') ;\n\t\t\tmRoute = DLG1_DlgObj.getValue(\'route\');\n\n\t\t\tvar listObj = DLG1_DlgObj.getControl(\'LSTVISITHEAD\');\n\t\n\t\t\tvar data =  {};\n\t\t\tdata.starth = mh ;\n\t\t\tdata.startm = mm ;\n\t\t\tdata.poiid = mTmpPoi ;\n\t\t\tdata.medrepid = mMedrepcode;\n\t\t\tdata.date = now ;\n\t\t\tdata.starttime = now;\n\t\t\tdata.company_id = mCompid ;\n\t\t\t\n\t\t\tvar ops = {};\n    \t\tops.setFocusToTargetRow = true;\n    \t\tops.insertRow = true;\n    \t\tops.insertPosition = 0 ;\n\t\t    if (listObj ) {\n\t\t\t\tlistObj.addTableRow(data,ops);\n\t\t\t\tconsole.log(\'adding list data\');\n\t\t\t\tconsole.log(data);\n\t\t\t\tconsole.log(listObj);\n\t\t\t\tdiplayMess(\'Visit Added\') ;\n\t\t\t}\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tobj.next() \n\t\n\t\t\t},500)\n\t\t\t\n\t\t}\n\t}\n\n\n\t\n\tfunction ff2(obj) {\n\n\t\tvar lObjV = DLG1_DlgObj.getControl(\'LSTVISITHEAD\');\n\t\t\n//\t\tif(lObjV.selection[0] = \'undefined\') {\n//\t\t\tconsole.log(lObjV);\n//\t\t\talert("adding missing row");\n\t\t\t//lObjV._selectedRow = lObjV.selection[0];\n//\t\t\tMDEBUG=lObjV._debugListData();\n//\t\t\tconsole.log(MDEBUG);\n//\t\t\tlObjV.setValue(0);\n//\t\t\tMDEBUG=lObjV._debugListData();\n//\t\t\tconsole.log(MDEBUG);\n\n//\t\t}\n\t\t\n\t\n\t\t\n\t\tmPoiid = DLG1_DlgObj.getValue(\'poiid\') ;\n\t\tvar newd = new Date();\n\t\tvar month = newd.getUTCMonth() + 1; //months from 1-12\n\t\tvar day = newd.getUTCDate();\n\t\tvar year = newd.getUTCFullYear();\n\n\t\tnewdate = day+\'/\'+month+\'/\'+year ;\n\n\t\tvar listObj = DLG1_DlgObj.getControl(\'LSTOFFROUTE\');\n\t\tlistObj.updateRow(mPoiid,{visited: 1});\n\t\tmvvv=DLG1_DlgObj.getValue(\'list::LSTOFFROUTE::visited\');\n\t\tDLG1_DlgObj.setValueFrom(\'medrepid\',\'MedRep\');\n\t\tDLG1_DlgObj.setValue(\'date_2\',newdate);\n\n\t\tvar cbObj = DLG1_DlgObj.getControl(\'CONTROLBAR_20\');\n\t\tif(cbObj) {\n\t\t\tvar varNames = [\'custvisited\'];\n\t\t\tvar dataValues = [DLG1_DlgObj.getValue(\'poiname\')];\n\t\t\tcbObj.update(varNames,dataValues,false,true,false);\n\t\t};\n\n\t\tmRoute = DLG1_DlgObj.getValue(\'route\');\n\t\tif(mRoute==0){\n\t\t\tvar listObj = DLG1_DlgObj.getControl(\'LSTOFFROUTE\');\n\t\t\tvar curSelection=listObj.selection[0];\n\t\t\t\n\t\t\t//console.log(listObj);\n\t\t\t//update the 4th row (index is zero based)\n\t\t\tlistObj.updateRow(curSelection,{visited: \'1\'});\n\t\t\t//update the row for list primary key value of \'ALFKI\' (List is configured to return the Primary Key)\n\t\t\t//listObj.updateRow(\'ALFKI\',{firstname: \'John\', lastname: \'Smith\'});\t\n\t\t} else {\n\t\t\tvar listObj = DLG1_DlgObj.getControl(\'LSTROUTES\');\n\t\t\tvar curSelection=listObj.selection[0];\n\t\t\t//console.log(listObj);\n\t\t\t//update the 4th row (index is zero based)\n\t\t\tlistObj.updateRow(curSelection,{visited: \'1\'});\n\t\t}\n\t\t\n\t\tobj.next() ;\n\t}\n\n\tfunction ff3(obj) {\n\t\tvar lObj = DLG1_DlgObj.getControl(\'LSTVISITHEAD\');\n//\t\tif(lObj.selection[0] != \'undefined\') { \n//\t\t\tlObj._selectedRow = lObj.selection[0];\n//\t\t}\n\t\tlObj.updateListFromUXControls();\n\t\n\t\tmPrimaryKey = DLG1_DlgObj.getValue(\'LSTVISITHEAD\');\n\t\t//alert(mPrimaryKey);\n//\t\tDLG1_DlgObj.setValue(\'visitshead_id\',mPrimaryKey);\n\t\t\n//\t\t\tmp = DLG1_DlgObj.getValue(\'poiid\') ;\n//\talert(mp);\n\n\t\tobj.next();\n\n\t}\n\n //        console.log(\'You are within 50 meters of the customer location. Running the desired function...\');\n\t\t\t\t\twaitingmess(\'Getting location\')\n\n\t\t\tvar actions  = [ff1,ff2,ff3] ; //an array of functions to execute\n\t\t\tvar done = function(){ \n\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\t\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_4\');\n\t\t\t } ;//functi;on to call when done\n\t\t\tvar stopped = function() { alert(\'execution was stopped\') } ;//function to call if execution was stopped.\n\t\t\tA5.runChain(actions,done,stopped) ;\n\n}\n\nfunction waitingmess(mthemess){\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: mthemess,icon: \'css/A5System/Images/wait.gif\',waitMessageAutoCloseDelay: 5000});\n}\n\n\n\nfunction hidingwait(){\n\tDLG1_DlgObj.hideWaitMessage();\n}\n\n\nfunction isgeolocdirty() {\n\n\tvar listObj = DLG1_DlgObj.getControl(\'lstgeoloc\');\n\tvar flag = listObj.listIsDirty();\n\treturn flag ;\t\n\n}\n\n\nfunction downloadData() {\n    DLG1_DlgObj.setValue(\'failedsync\', 0);\n    DLG1_DlgObj.setValue(\'syncinprogress\', 1);\n\n    const debugLog = (msg) => console.log(`[${new Date().toLocaleTimeString()}] ${msg}`);\n    const isOnline = () => DLG1_DlgObj._getOnlineStatus();\n    const runAction = (actionName) => DLG1_DlgObj.runAction(actionName);\n    const setSlider = (val) => DLG1_DlgObj.setValue(\'Slider1\', val);\n\n    // Initial cleanup\n    const localStorageSettings = DLG1_DlgObj._localStorageSettings;\n    DLG1_DlgObj._persistToLocalStorageInitializeKeys(localStorageSettings, \'LSTVISITHEAD\', true);\n    const keys = DLG1_DlgObj._ls_getData(\'lists:t\');\n    DLG1_DlgObj._ls_deleteKeys(keys);\n\n    // Display Rep name in UI\n    const medRep = DLG1_DlgObj.getValue(\'MedRep\');\n    DLG1_DlgObj.setValue(\'textbox3\', medRep);\n\n    // --- STEP 1: Set Session ---\n    function setSession(obj) {\n        if (!isOnline()) return obj.stop();\n\n        runAction(\'setsessionid\');\n        setSlider(5);\n        debugLog(\'Session ID set\');\n        obj.next();\n    }\n\n    // --- STEP 2: Sync Lists and Cache ---\n    function synchronizeData(obj) {\n        if (!isOnline()) return obj.stop();\n\n        debugLog(\'Synchronizing lists...\');\n        DLG1_DlgObj.synchronizeLists();\n\n        DLG1_DlgObj.refreshDataCacheItem(\'*all\', () => {\n            debugLog(\'Data cache refreshed\');\n            setSlider(10);\n            obj.next();\n        });\n    }\n\n    // --- STEP 3: Populate Dropdowns ---\n    function populateDropdowns(obj) {\n        const populateDropdown = (id, items) => {\n            const dropdownData = [[\'\', \'\'], ...items.map(item => [item.label, item.id])];\n            DLG1_DlgObj.populateDropdownBox(id, dropdownData, true);\n        };\n\n        const dropdownMappings = [\n            { id: \'VISITTYPE\', key: \'visittypedata\', label: \'visittype\' },\n            { id: \'SKIPREAS\', key: \'skipreasons\', label: \'skipreason\' },\n            { id: \'VISITOBJECTIVE\', key: \'visitobj\', label: \'objective\' },\n            { id: \'SUPERVISOR\', key: \'supervisors\', label: \'supervisorname\' },\n            { id: \'DISCUSSEDTYPE\', key: \'discussedtypes\', label: \'discussed_type\' },\n            { id: \'PAIMENTTYPE\', key: \'paytypes\', label: \'paimentType\' },\n            { id: \'CURRENCY\', key: \'currencies\', label: \'Currency\' },\n            { id: \'ITEMID\', key: \'items\', label: \'description\' },\n            { id: \'DROPGROUP\', key: \'itemgroups\', label: \'itemgroup\' }\n        ];\n\n        const keys = dropdownMappings.map(d => d.key).join(\',\');\n\n        DLG1_DlgObj.readDataCacheItems(keys, (cache) => {\n            debugLog(\'Populating dropdowns...\');\n\n            dropdownMappings.forEach(({ id, key, label }) => {\n                const data = cache[key] || [];\n                const items = data.map(item => ({\n                    label: item[label],\n                    id: item.id\n                }));\n                populateDropdown(id, items);\n            });\n\n            setSlider(70);\n            obj.next();\n        });\n    }\n\n    // --- STEP 4: Refresh Lists ---\n    function refreshLists(obj) {\n        if (!isOnline()) return obj.stop();\n\n        runAction(\'refreshlists\');\n        debugLog(\'Lists refreshed\');\n        obj.next();\n    }\n\n    // --- Execution Chain ---\n    const actions = [setSession, synchronizeData, populateDropdowns, refreshLists];\n    const onComplete = () => debugLog(\'? All actions completed successfully\');\n    const onStopped = () => {\n        alert(\'?? Slow internet, retrying\');\n        DLG1_DlgObj.setValue(\'failedsync\', 1);\n    };\n\n    A5.runChain(actions, onComplete, onStopped);\n}\n\nfunction diplayMess(mTheMess) {\n\tvar _html = \'<div style="display:inline-block;">\'+mTheMess+\'</div>\';\n\tvar _options = {\n\t\t"close": {\n\t\t\t"show": false\n\t\t},\n\t\t"duration": 2000,\n\t\t"animation": {\n\t\t\t"show": {\n\t\t\t\t"type": "auto",\n\t\t\t\t"duration": 600\n\t\t\t},\n\t\t\t"hide": {\n\t\t\t\t"type": "auto",\n\t\t\t\t"duration": 600\n\t\t}\n\t\t}\n\t};\n\tDLG1_DlgObj.transientMessage(\'top-fill\',_html,_options);\n\n}\n\n\nfunction doTranslateits(){\n\n\tmv=DLG1_DlgObj.getValue(\'lang\');\n\n\tdoTranslateITS(mv);\n\n\tfunction doTranslateITS(language) {\n \t   var _translations = {\n        "SELL": {\n            "english": "SELL :",\n\t\t\t"arabic": "\\u0628\\u064A\\u0639 \\u003A"\n        \t},\n        \t"BONUS":{\n\t            "english": "BONUS :",\n\t\t\t"arabic": "\\u0645\\u062C\\u0627\\u0646\\u064A"\n        \t}\n          };\n\tconsole.log(_translations);\n    if (typeof _translations === \'undefined\') return false;\n\n    var arr = document.getElementsByClassName(\'_language\');\n//    alert("render");\n\n\tconsole.log(arr);\n    for (var i = 0; i < arr.length; i++) {\n        var ele = arr[i];\n        var id = ele.id;\n        var key = id.split(\'_language_\')[1];\n\n        if (typeof _translations[key] === \'undefined\' || _translations[key] === null) continue;\n\n        var string = _translations[key][language];\n\n        if (typeof string !== \'undefined\' && string !== null && string !== \'\') {\n            ele.innerHTML = string;\n        }\n    }\n}\n}\n\n\nfunction filldrop() {\n\n\tfunction fillvtype() {\n\t\tvar _onSuccess = function(data) {\n\t\t\tvar _d = [[\'\', \'\']];\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t_d.push([data[i].visittype, data[i].id]);\n\t\t\t}\n\t\t\tDLG1_DlgObj.populateDropdownBox(\'VISITTYPE\', _d, true);\n\t\t};\n\t\tDLG1_DlgObj.getFromDataCache(\'visittypedata\', _onSuccess, failAlert, \'\', \'\');\n\t}\n\n\tfunction fillvisitobjective() {\n\t\tvar _onSuccess = function(data) {\n\t\t\tvar _d = [[\'\', \'\']];\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t_d.push([data[i].objective, data[i].id]);\n\t\t\t}\n\t\t\tDLG1_DlgObj.populateDropdownBox(\'VISITOBJECTIVE\', _d, true);\n\t\t};\n\t\tDLG1_DlgObj.getFromDataCache(\'visitobj\', _onSuccess, failAlert, \'\', \'\');\n\t}\n\n\tfunction fillsupervisors() {\n\t\tvar _onSuccess = function(data) {\n\t\t\tvar _d = [[\'\', \'\']];\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t_d.push([data[i].supervisorname, data[i].id]);\n\t\t\t}\n\t\t\tDLG1_DlgObj.populateDropdownBox(\'SUPERVISOR\', _d, true);\n\t\t};\n\t\tDLG1_DlgObj.getFromDataCache(\'supervisors\', _onSuccess, failAlert, \'\', \'\');\n\t}\n\n\tfunction filldiscussedtypes() {\n\t\tvar _onSuccess = function(data) {\n\t\t\tvar _d = [[\'\', \'\']];\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t_d.push([data[i].discussedtypes, data[i].id]);\n\t\t\t}\n\t\t\tDLG1_DlgObj.populateDropdownBox(\'discussedtypes\', _d, true);\n\t\t};\n\t\tDLG1_DlgObj.getFromDataCache(\'discussedtypes\', _onSuccess, failAlert, \'\', \'\');\n\t}\n\n\tfunction fillpaytypes() {\n\t\tvar _onSuccess = function(data) {\n\t\t\tvar _d = [[\'\', \'\']];\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t_d.push([data[i].paimentType, data[i].id]);\n\t\t\t}\n\t\t\tDLG1_DlgObj.populateDropdownBox(\'PAIMENTTYPE\', _d, true);\n\t\t};\n\t\tDLG1_DlgObj.getFromDataCache(\'paytypes\', _onSuccess, failAlert, \'\', \'\');\n\t}\n\n\tfunction fillcurrencies() {\n\t\tvar _onSuccess = function(data) {\n\t\t\tvar _d = [[\'\', \'\']];\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t_d.push([data[i].Currency, data[i].id]);\n\t\t\t}\n\t\t\tDLG1_DlgObj.populateDropdownBox(\'CURRENCY\', _d, true);\n\t\t};\n\t\tDLG1_DlgObj.getFromDataCache(\'currencies\', _onSuccess, failAlert, \'\', \'\');\n\t}\n\n\tfunction fillitems() {\n\t\tvar _onSuccess = function(data) {\n\t\t\tvar _d = [[\'\', \'\']];\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t_d.push([data[i].description, data[i].id]);\n\t\t\t}\n\t\t\tvar targets = [\'ITEMID\', \'ITEMID1\', \'deal_item1\', \'deal_item2\', \'deal_item3\', \'deal_item4\', \'returnitem\'];\n\t\t\tfor (var j = 0; j < targets.length; j++) {\n\t\t\t\tDLG1_DlgObj.populateDropdownBox(targets[j], _d, true);\n\t\t\t}\n\t\t};\n\t\tDLG1_DlgObj.getFromDataCache(\'items\', _onSuccess, failAlert, \'\', \'\');\n\t}\n\n\tfunction fillitemgroups() {\n\t\tvar _onSuccess = function(data) {\n\t\t\tvar _d = [[\'\', \'\']];\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t_d.push([data[i].itemgroup, data[i].id]);\n\t\t\t}\n\t\t\tDLG1_DlgObj.populateDropdownBox(\'ITEMID\', _d, true);\n\t\t};\n\t\tDLG1_DlgObj.getFromDataCache(\'DROPGROUP\', _onSuccess, failAlert, \'\', \'\');\n\t}\n\n\t// Shared failure handler\n\tfunction failAlert() {\n\t\talert("You have to re-sync (1)");\n\t}\n\n\t// Call all the fill functions\n\tfillvtype();\n\tfillvisitobjective();\n\tfillsupervisors();\n\tfilldiscussedtypes();\n\tfillpaytypes();\n\tfillcurrencies();\n\tfillitems();\n\tfillitemgroups();\n}\n\n\nfunction fillunitdrop() {\n\tmItem = DLG1_DlgObj.getValue(\'list::LSTITEMS::id\');\n\t\n\t\n\t//read data from a data-cache item called \'customer\'\n\tvar _onSuccess = function(data) {\n\t\t//alert(\'Rows in data item: \' + data.length);\n\t\t\t\tvar _d = [[\'\', \'\']];\n\t\t\tfor (var i = 0; i < data.length; i++) {\n\t\t\t\t_d.push([data[i].sellingunit, data[i].id]);\n\t\t\t}\n\t\t\tDLG1_DlgObj.populateDropdownBox(\'DROPSELLUNIT\', _d, true);\n\t\t};\n\t\t\n\n\tvar _onFail = function() {\n\t};\n\t//filter expression references the \'Country\' field in the data item. If expression\n\t//returns true, the row is include in the output array\n\tvar _filter = \'data.itemid == \'+ mItem;\n\t//no sorting\n\tvar _order = \'\';\n\n\tDLG1_DlgObj.getFromDataCache(\'ITEMSUNIT\',_onSuccess,_onFail,_filter,_order);\n}\n\nfunction showbonus(mdata){\n\tmhideb = DLG1_DlgObj.getValue(\'hidebonus\');\n\t\tif (mhideb==1)  {\n\t\t\treturn true ;\n\t\t}\n\telse {\n\t\treturn false ;\n\t\t }\n}\n\n\nfunction fillitemlist() {\n\t\n\tconsole.trace("fillitemlist called"); // Optional: helps track AJAX source\n\n\tvar _onSuccess = function(data) {\n//\t\tsetTimeout(function(){\n\t\t  var listObj = DLG1_DlgObj.getControl(\'LSTITEMS\');\n  \t\t  var poiid = DLG1_DlgObj.getValue(\'tmppoiid\');\n       \t  var filteredData = data.filter(function(item) {\n            return item.custid == 0 || item.custid == poiid;\n    \t\t});\n\n\t    listObj.populate(filteredData);\n\t    \n    \n//\t\t}, 150);\n\n\t\t\tvar lObj = DLG1_DlgObj.getControl(\'LSTITEMS\');\n\t\t\tvar mFlag = DLG1_DlgObj.getValue(\'flagadditem\');\n\n\t\t\tvar updateItems = function(target, source, matchField, mapper) {\n\t\t\t\tfor (var i = 0; i < target._data.length; i++) {\n\t\t\t\t\tvar id = target._data[i].id;\n\t\t\t\t\tfor (var j = 0; j < source._data.length; j++) {\n\t\t\t\t\t\tif (source._data[j][matchField] == id) {\n\t\t\t\t\t\t\tmapper(target._data[i], source._data[j], i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar layoutSwitcher = function(name) {\n\t\t\t\treturn function(obj) {\n\t\t\t\t\tDLG1_DlgObj.getControl(\'LSTITEMS\').selectCurrentLayout(name);\n\t\t\t\t\tobj.next();\n\t\t\t\t};\n\t\t\t};\n\n\t\t\tif (mFlag == 1) {\n\t\t\t\tvar actions = [\n\t\t\t\t\tfunction(obj) {\n\t\t\t\t\t\tvar items = DLG1_DlgObj.getControl(\'LSTITEMS\');\n\t\t\t\t\t\tvar samples = DLG1_DlgObj.getControl(\'LSTSAMPLES\');\n\t\t\t\t\t\tupdateItems(items, samples, \'prodid\', function(item, sample) {\n\t\t\t\t\t\t\titem.qty = sample.qty;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tobj.next();\n\t\t\t\t\t},\n\t\t\t\t\tlayoutSwitcher(\'sample\')\n\t\t\t\t];\n\t\t\t\tA5.runChain(actions, function() {}, function() { alert(\'Execution was stopped\'); });\n\t\t\t} else if (mFlag == 2) {\n\t\t\t\tvar actions = [\n\t\t\t\t\tfunction(obj) {\n\t\t\t\t\t\tvar items = DLG1_DlgObj.getControl(\'LSTITEMS\');\n\t\t\t\t\t\tvar discussed = DLG1_DlgObj.getControl(\'LSTDISCUSSED\');\n\t\t\t\t\t\tupdateItems(items, discussed, \'product_id\', function(item, disc) {\n\t\t\t\t\t\t\titem.discusedtype = disc.discussedtype;\n\t\t\t\t\t\t\titem.discusedcoment = disc.coment;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tobj.next();\n\t\t\t\t\t},\n\t\t\t\t\tlayoutSwitcher(\'discus\')\n\t\t\t\t];\n\t\t\t\tA5.runChain(actions, function() {}, function() { alert(\'Execution was stopped\'); });\n\t\t\t} else if (mFlag == 3) {\n\t\t\t\t\t///alert("here");\n//\t\t\t\t\tsetTimeout(function(){\n//\t\t\t\t\t\tlayoutSwitcher(\'default\')\t\n//\t\t\t\t\t},500)\n\t\t\t\tDLG1_DlgObj.getControl(\'LSTITEMS\').selectCurrentLayout(\'default\');\n\t\t\t\tconsole.log(\'switching\');\n\t\t\t\t\t\n\t\t\t} else if (mFlag == 4) {\n\t\t\t\tDLG1_DlgObj.getControl(\'LSTITEMS\').selectCurrentLayout(\'default\');\n\t\t\t\t\t\t\t\t\n\t\t\t}\n\n\n\t};\n\tconsole.log(\'wait mess\');\n\twaitingmess(\'Loading Items\');\n\t//console.log( DLG1_DlgObj.stateInfo[\'_items\']);\n\t//console.log(DLG1_DlgObj.getStateInfo(\'_items\'))\n\tDLG1_DlgObj._listRemoveAllRows(\'LSTITEMS\');\n\tvar mFlag = DLG1_DlgObj.getValue(\'flagadditem\');\n\n\t_onSuccess(DLG1_DlgObj.stateInfo[\'_items\']);\n\tconsole.log(\'remove wait\');\n\tsetTimeout(function(){\n\t\thidingwait();\n\t\n\t},150)\n\n//\tDLG1_DlgObj.getFromDataCache(\'items\', _onSuccess, _onFail, _filter, _order);\n}\n\n\n\nfunction additems(){\nfunction s0() {\n\tDLG1_DlgObj.runAction(\'showwait1\');\n\tvar lObj = DLG1_DlgObj.getControl(\'LSTITEMS\');\n\tlObj.setFilter(false);\n\tlObj._selectedRow = lObj.selection[1] || lObj.selection[0];\n}\n\nfunction s1() {\n\tvar lObj = DLG1_DlgObj.getControl(\'LSTITEMS\');\n\tvar mMedrep = DLG1_DlgObj.argumentValue(\'mMedrepId\');\n\tvar mmpoiid = DLG1_DlgObj.argumentValue(\'MPOIID\');\n\tvar mCmpId = DLG1_DlgObj.getValue(\'COMPANYID\');\n\tvar mVisitid = DLG1_DlgObj.getValue(\'list::LSTVISITHEAD::id\');\n\tvar mFlag = DLG1_DlgObj.getValue(\'flagadditem\');\n\n\tif (mFlag == 1) { DLG1_DlgObj._listRemoveAllRows(\'LSTSAMPLES\'); }\n\tif (mFlag == 2) { DLG1_DlgObj._listRemoveAllRows(\'LSTDISCUSSED\'); }\n\t\n\tif (mFlag == 3 || mFlag == 4) { mBulkArr = []; };\n\t\n\t// if (mFlag == 3 || mFlag == 4) removals are commented out\n\n\tconst filteredData = lObj._data.filter(item =>\n\t\tNumber(item.qty) > 0 ||\n\t\tNumber(item.bonus) > 0 ||\n\t\titem.discusedtype !== \'\' ||\n\t\titem.discusedcoment !== 0\n\t);\n\n\tfor (var i = 0; i < filteredData.length; i++) {\n\t\tvar row = filteredData[i];\n\t\tvar mTotq = Number(row.qty || 0) + Number(row.bonus || 0);\n\n\t\tif (mTotq > 0 || mFlag == 2) {\n\t\t\tvar mProdid = row.id || \'\';\n\t\t\tvar mDescription = row.description || \'\';\n\t\t\tvar mQty = row.qty || \'\';\n\t\t\tvar mBonus = row.bonus || \'\';\n\t\t\tvar mDiscount = row.discount || \'\';\n\t\t\tvar mVat = row.tva || \'\';\n\t\t\tvar mFreeProdid = row.bonusitem || \'\';\n\t\t\tvar mProductCode = row.product_code || \'\';\n\t\t\tvar mPrice = row.price || \'\';\n\t\t\tvar mUnitPrice = row.price || \'\';\n\t\t\tvar msellunit = row.sellunit || \'\';\n\t\t\tvar mbonusunit = row.bonusunit || \'\';\n\t\t\tvar mqteinpack = row.qteinpack || \'\';\n\t\t\tvar mbonusinpack = row.bonusinpack || \'\';\n\t\t\tvar mlineTot = Number(mQty) * Number(mUnitPrice) * ((100 - Number(mDiscount)) / 100);\n\t\t\tvar mlineVat = mlineTot * Number(mVat) / 100;\n\n\t\t\tif (mFlag == 1) {\n\t\t\t\tvar listObj = DLG1_DlgObj.getControl(\'LSTSAMPLES\');\n\t\t\t\tlistObj.addTableRow({ prodid: mProdid, visitid: mVisitid, qty: mQty, proddesc: mDescription, company_id: mCmpId });\n\t\t\t}\n\t\t\tif (mFlag == 4) {\n\t\t\t\tvar listObj = DLG1_DlgObj.getControl(\'lstinvoices\');\n\t\t\t\tlistObj.addTableRow({\n\t\t\t\t\tbonusitemid: mFreeProdid,\n\t\t\t\t\titemid: mProdid,\n\t\t\t\t\titemcode: mProdid,\n\t\t\t\t\tVisit_id: mVisitid,\n\t\t\t\t\tdescription: mDescription,\n\t\t\t\t\tqty: mQty,\n\t\t\t\t\tBonusqty: mBonus,\n\t\t\t\t\tunitprice: mUnitPrice,\n\t\t\t\t\tdiscount: mDiscount,\n\t\t\t\t\tvat: mVat,\n\t\t\t\t\tcompany_id: mCmpId,\n\t\t\t\t\tlinetot: mlineTot,\n\t\t\t\t\tlinevat: mlineVat,\n\t\t\t\t\tsellunit: msellunit,\n\t\t\t\t\tbonusunit: mbonusunit\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (mFlag == 3) {\n\t\t\t\tvar listObj = DLG1_DlgObj.getControl(\'lstorders\');\n\t\t\t\t\n\t\t\t\tmnewRow= {\n\t\t\t\t\tbonusitemid: mFreeProdid,\n\t\t\t\t\titemid: mProdid,\n\t\t\t\t\tvisitid: mVisitid,\n\t\t\t\t\tdescription: mDescription,\n\t\t\t\t\tdiscount: mDiscount,\n\t\t\t\t\tqty: mQty,\n\t\t\t\t\tprice: mPrice,\n\t\t\t\t\tvat: mVat,\n\t\t\t\t\tbonusqty: mBonus,\n\t\t\t\t\tcompany_id: mCmpId,\n\t\t\t\t\ttotvat: mlineVat,\n\t\t\t\t\ttotline: mlineTot,\n\t\t\t\t\tsellunit: msellunit,\n\t\t\t\t\tbonusunit: mbonusunit,\n\t\t\t\t\tqteinpack: mqteinpack,\n\t\t\t\t\tbonusinpack: mbonusinpack,\n\t\t\t\t\tproduct_code: mProductCode\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tmBulkArr.push(mnewRow);\n\t\t\t}\n\t\t}\n\n\t\tif (mFlag == 2) {\n\t\t\tvar mDiscussedtype = row.discusedtype || \'\';\n\t\t\tvar mDiscussedComent = row.discusedcoment || \'\';\n\t\t\tif (mDiscussedComent !== \'\' || Number(mDiscussedtype) !== 0) {\n\t\t\t\tvar listObj = DLG1_DlgObj.getControl(\'LSTDISCUSSED\');\n\t\t\t\tlistObj.addTableRow({\n\t\t\t\t\tproduct_id: mProdid,\n\t\t\t\t\tVisit_id: mVisitid,\n\t\t\t\t\tproddesc: mDescription,\n\t\t\t\t\tdiscussedtype: mDiscussedtype,\n\t\t\t\t\tcoment: mDiscussedComent,\n\t\t\t\t\tcompany_id: mCmpId\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\t\tif ( mFlag == 3)  {\n\t\t\t\t\t\n\n\t\t\tlistObj.addTableRowsBulk(mBulkArr);\n\t\t\t\t\t\n\t\t}\n\n}\n\nfunction s2() {\n\tvar mFlag = DLG1_DlgObj.getValue(\'flagadditem\');\n\tif (mFlag == 1 || mFlag == 2) {\n\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_4\');\n\t}\n\tif (mFlag == 3) {\n\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_13\');\n\t}\n\tif (mFlag == 4) {\n\t\tDLG1_DlgObj.panelSetActive(\'PANELCARD_INVOICES\');\n\t}\n\t\n}\nwaitingmess(\'adding items\');\ns0();\ns1();\ns2();\nsetTimeout(function(){\nhidingwait();\n\t\n},150)\n\n}\n\nfunction translatepanels(){\n\tmv=DLG1_DlgObj.getValue(\'lang\');\n\n\tdoTranslate(mv);\n//      "arabic": "\\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645"\n\n\tfunction doTranslate(language) {\n\t    var _translations = {\n\t        "REPID": {\n\t            "english": "Rep ID",\n\t\t\t\t"arabic": "\\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645"\n\t        },\n\t        "REPNAME": {\n\t            "english": "Rep Name",\n\t\t\t"arabic": "\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062F\\u0648\\u0628"\n\t\t\t},\n\t\t\t"CHPASS":{\n\t\t\t"english": "Change Password",\n\t\t\t"arabic": "\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631"\n\t\t\t},\n\t\t\t"SIGNIN":{\n\t\t\t"english": "Sign In",\n\t\t\t"arabic": "\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644"\n\t\t\t},\n\t\t\t"LOGIN":{\n\t\t\t"english":"L O G I N",\n\t\t\t"arabic":"\\u062A \\u0633 \\u062C \\u064A \\u0644"\n\t\t\t},\n\t\t\t"VIEWOUTOFPLAN":{\n\t\t\t"english":"View out of plan",\n\t\t\t"arabic":"\\u0639\\u0631\\u0636\\u0020\\u062e\\u0627\\u0631\\u062c\\u0020\\u0627\\u0644\\u062e\\u0637\\u0629"\n\t\t\t},\n\t\t\t"NOTVISITEDTHISCYCLE":{\n\t\t\t"english":"Not visited this cycle",\n\t\t\t"arabic":"\\u0644\\u0645\\u0020\\u064a\\u062a\\u0645\\u0020\\u0627\\u0644\\u0632\\u064a\\u0627\\u0631\\u0629\\u0020\\u0641\\u064a\\u0020\\u0647\\u0630\\u0647\\u0020\\u0627\\u0644\\u062f\\u0648\\u0631\\u0629"\n\t\t\t},\n\t\t\t"SHOWALL":{\n\t\t\t"english":"Show All",\n\t\t\t"arabic":"\\\\u0639\\u0631\\u0636\\u0020\\u0627\\u0644\\u0643\\u0644"\n\t\t\t},\n\t\t\t"REFRESH":{\n\t\t\t"english":"Refresh",\n\t\t\t"arabic":"\\u062a\\u062d\\u062f\\u064a\\u062b"\n\t\t\t},\n\t\t\t"VIEWPLAN":{\n\t\t\t"english":"View Plan",\n\t\t\t"arabic":"\\u0639\\u0631\\u0636\\u0020\\u0627\\u0644\\u062e\\u0637\\u0629"\n\t\t\t},\n\t\t\t"BACK":{\n\t\t\t"english":"View Plan",\n\t\t\t"arabic":"\\u0631\\u062c\\u0648\\u0639"\n\t\t\t},\n\t\t\t"SAMPLES":{\n\t\t\t"english":"Samples",\n\t\t\t"arabic":"\\u0639\\u064a\\u0646\\u0627\\u062a"\n\t\t\t},\n\t\t\t"PROMOTED_PRODUCTS":{\n\t\t\t"english":"Promote Products",\n\t\t\t"arabic":"\\u0631\\u0648\\u0651\\u062c\\u0020\\u0627\\u0644\\u0645\\u0646\\u062a\\u062c\\u0627\\u062a"\n\t\t\t},\n\t\t\t"ORDER":{\n\t\t\t"english":"Order",\n\t\t\t"arabic":"\\u0637\\u0644\\u0628"\n\t\t\t},\n\t\t\t"INVOICE":{\n\t\t\t"english":"Invoice",\n\t\t\t"arabic":"\\u0641\\u0627\\u062a\\u0648\\u0631\\u0629"\n\t\t\t},\n\t\t\t"RECEIPT":{\n\t\t\t"english":"Receipt",\n\t\t\t"arabic":"\\u0625\\u064a\\u0635\\u0627\\u0644"\n\t\t\t},\n\t\t\t"SIGNATURE":{\n\t\t\t"english":"Signature",\n\t\t\t"arabic":"\\u062a\\u0648\\u0642\\u064a\\u0639"\n\t\t\t},\n\t\t\t"MEDIAS":{\n\t\t\t"english":"Media",\n\t\t\t"arabic":"\\u0648\\u0633\\u0627\\u0626\\u0637\\u0020\\u0645\\u062a\\u0639\\u062f\\u062f\\u0629"\n\t\t\t},\n\t\t\t"FEEDBACK":{\n\t\t\t"english":"Feedback",\n\t\t\t"arabic":"\\u0645\\u0644\\u0627\\u062d\\u0638\\u0627\\u062a"\n\t\t\t},\n\t\t\t"IMAGES":{\n\t\t\t"english":"Images",\n\t\t\t"arabic":"\\u0635\\u0648\\u0631"\n\t\t\t}\n\t    };\n\n\t    if (typeof _translations === \'undefined\') return false;\n\n\t    var arr = document.getElementsByClassName(\'_language\');\n\t\n \t   for (var i = 0; i < arr.length; i++) {\n\t        var ele = arr[i];\n\t        var id = ele.id;\n\t        var key = id.split(\'_language_\')[1];\n\t\n\t\tconsole.log(i);\n\t\tconsole.log(ele);\n\t\tconsole.log(id);\n\t\tconsole.log(key);\n\t\n\t\n \t       if (typeof _translations[key] === \'undefined\' || _translations[key] === null) continue;\n\n\t        var string = _translations[key][language];\n\t\t\tconsole.log(string);\n\t\t\n\t        if (typeof string !== \'undefined\' && string !== null && string !== \'\') {\n\t            ele.innerHTML = string;\n\t            ele.innerText = string;\n\t            ele.textContent = string;\n\n\t        }\n\t    }\n\t}\n}\n;\n\n;\nfunction onChange_lang_bdce615dc462445dbbb22017a9d994da(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LANG\'); mv=_dlgObj.getValue(\'lang\'); doTranslate(mv); function doTranslate(language) {     var _translations = {         "REPID": {             "english": "Rep ID",    "arabic": "\\u0627\\u0644\\u0645\\u0633\\u062A\\u062E\\u062F\\u0645"         },         "REPNAME": {             "english": "Rep Name",   "arabic": "\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0645\\u0646\\u062F\\u0648\\u0628"   },   "CHPASS":{   "english": "Change Password",   "arabic": "\\u062A\\u063A\\u064A\\u064A\\u0631 \\u0643\\u0644\\u0645\\u0629 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631"   },   "SIGNIN":{   "english": "Sign In",   "arabic": "\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644"   },   "LOGIN":{   "english":"L O G I N",   "arabic":"\\u062A \\u0633 \\u062C \\u064A \\u0644"   },   "VIEWOUTOFPLAN":{   "english":"View out of plan",   "arabic":"\\u0639\\u0631\\u0636\\u0020\\u062e\\u0627\\u0631\\u062c\\u0020\\u0627\\u0644\\u062e\\u0637\\u0629"   },   "NOTVISITEDTHISCYCLE":{   "english":"Not visited this cycle",   "arabic":"\\u0644\\u0645\\u0020\\u064a\\u062a\\u0645\\u0020\\u0627\\u0644\\u0632\\u064a\\u0627\\u0631\\u0629\\u0020\\u0641\\u064a\\u0020\\u0647\\u0630\\u0647\\u0020\\u0627\\u0644\\u062f\\u0648\\u0631\\u0629"   },   "SHOWALL":{   "english":"Show All",   "arabic":"\\\\u0639\\u0631\\u0636\\u0020\\u0627\\u0644\\u0643\\u0644"   },   "REFRESH":{   "english":"Refresh",   "arabic":"\\u062a\\u062d\\u062f\\u064a\\u062b"   },   "VIEWPLAN":{   "english":"View Plan",   "arabic":"\\u0639\\u0631\\u0636\\u0020\\u0627\\u0644\\u062e\\u0637\\u0629"   },   "BACK":{   "english":"View Plan",   "arabic":"\\u0631\\u062c\\u0648\\u0639"   },   "SAMPLES":{   "english":"Samples",   "arabic":"\\u0639\\u064a\\u0646\\u0627\\u062a"   },   "PROMOTED_PRODUCTS":{   "english":"Promote Products",   "arabic":"\\u0631\\u0648\\u0651\\u062c\\u0020\\u0627\\u0644\\u0645\\u0646\\u062a\\u062c\\u0627\\u062a"   },   "ORDER":{   "english":"Order",   "arabic":"\\u0637\\u0644\\u0628"   },   "INVOICE":{   "english":"Invoice",   "arabic":"\\u0641\\u0627\\u062a\\u0648\\u0631\\u0629"   },   "RECEIPT":{   "english":"Receipt",   "arabic":"\\u0625\\u064a\\u0635\\u0627\\u0644"   },   "SIGNATURE":{   "english":"Signature",   "arabic":"\\u062a\\u0648\\u0642\\u064a\\u0639"   },   "MEDIAS":{   "english":"Media",   "arabic":"\\u0648\\u0633\\u0627\\u0626\\u0637\\u0020\\u0645\\u062a\\u0639\\u062f\\u062f\\u0629"   },   "FEEDBACK":{   "english":"Feedback",   "arabic":"\\u0645\\u0644\\u0627\\u062d\\u0638\\u0627\\u062a"   },   "IMAGES":{   "english":"Images",   "arabic":"\\u0635\\u0648\\u0631"   }     };     if (typeof _translations === \'undefined\') return false;     var arr = document.getElementsByClassName(\'_language\');     for (var i = 0; i < arr.length; i++) {         var ele = arr[i];         var id = ele.id;         var key = id.split(\'_language_\')[1];  console.log(i);  console.log(ele);  console.log(id);  console.log(key);         if (typeof _translations[key] === \'undefined\' || _translations[key] === null) continue;         var string = _translations[key][language];   console.log(string);         if (typeof string !== \'undefined\' && string !== null && string !== \'\') {             ele.innerHTML = string;             ele.innerText = string;             ele.textContent = string;         }     } }};\n\nfunction onChange_repid_6f38c18401fd405b9f4eb34fd78e91ce(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'REPID\');};\nfunction onChange_MedRep_e990b731369945df8805870e5793ad1a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MEDREP\');  _dlgObj.setValueFrom(\'medrepcode\',\'MedRep\');  _dlgObj.setValueFrom(\'repid\',\'MedRep\');};\nfunction onChange_repid_1_93c73fc048644eaa82b0b181d1aa6be1(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'REPID_1\');};\nfunction onChange_MedRep_1_ec87e600a65f49728836c0055897c68f(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MEDREP_1\');  _dlgObj.setValueFrom(\'repid_1\',\'MedRep_1\');};\nfunction onChange_Date_74414e685e9a4b868429699ddae3ff2b(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DATE\');};\nfunction onChange_password_a49fc21fe93444089b9b00726d98a102(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PASSWORD\');};\nfunction onChange_textbox3_8793c92bd62e4b6ba826cfbd328e9e74(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TEXTBOX3\');};\nfunction onChange_passok_d5cc36fb866549929eceeb5600b802fb(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PASSOK\');};\nfunction onChange_vPAssword_139e9860e87c4f9daa89d41d7c349c19(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VPASSWORD\');};\nfunction onChange_vSecurity_6b30f65774254a79a8902ad4f0665ec0(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VSECURITY\');};\nfunction onChange_syncinprogress_8857c570c1cb4fff96eba26001b9f707(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SYNCINPROGRESS\');};\nfunction onChange_failedsync_ae132b6693394052bba691b191901aa2(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'FAILEDSYNC\');};\nfunction onChange_medrepcode_272e1a4ce97140d4baa1be74abb68faf(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MEDREPCODE\');};\nfunction onChange_medrepname_88449100368d47b689eaa871feb971c1(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MEDREPNAME\');};\nfunction onChange_autosaveinv_436ba4e27c484439ab93f566366c242d(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'AUTOSAVEINV\');};\nfunction onChange_hidebonus_efdb01549b214ccf8c31ef10f40dfab9(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'HIDEBONUS\');};\nfunction onChange_COMPANYID_ba5f49449dee4fd391ce734b020e4bd8(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'COMPANYID\');};\nfunction onChange_saving_423437b528f5462ba787fb9d115f3768(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SAVING\');};\nfunction onChange_changepass_7c4c548485644520ba8822a57b751b55(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'CHANGEPASS\');};\nfunction onChange_newpassword_f59f969e845440a491b959c89cc80053(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'NEWPASSWORD\');};\nfunction onChange_Slider1_8b3418163bed436d9b04ef5932fd4a93(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SLIDER1\');};\nfunction onChange_CompanyCode_5f2bee355dd44c84aefd96e2b2e46995(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'COMPANYCODE\');};\nfunction onChange_CompanyName_4d3dbfff40e64212b9b199ee79ac6ea8(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'COMPANYNAME\');};\nfunction onChange_MessLow__943c93295aff4bc48f1e5de77ccb9f30(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MESSLOW_\');};\nfunction onChange_MessMedium__40d1b6a410d54c27af48d5e8820529a6(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MESSMEDIUM_\');};\nfunction onChange_MessHight__f164343db54b44a8829061f848dc0c91(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MESSHIGHT_\');};\nfunction onChange_MessAlert__d061b888cabf4485989284afd3d7064a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MESSALERT_\');};\nfunction onChange_SliderSaving_2f1d4baa8ee5444fa9d11e92194efa4e(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SLIDERSAVING\');};\nfunction onChange_LIST2_224e9f5a042a4bd6a0a2566871f9a39d(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LIST2\');};\nfunction onChange_LSTROUTES_28b05baf10da4f06a7b55ff2f1e6171a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTROUTES\');};\nfunction onChange_Search_offRoute_8603ad7bc02a4007aa3b83ccdf788642(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SEARCH_OFFROUTE\');};\nfunction onChange_LSTOFFROUTE_dec0ab5e1cc4457e94c13225eb889cc1(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTOFFROUTE\');};\nfunction onChange_VisitType_8a3abc88bbc14f289e7b83484a105534(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VISITTYPE\');};\nfunction onChange_VisitObjective_0e5f8291b7a74414a1b7a15b5fe6c44f(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VISITOBJECTIVE\');};\nfunction onChange_Supervisor_695e39da6c2f49c0bb812cc6f6a34005(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SUPERVISOR\');};\nfunction onChange_SpecialRequest_95fcd30e3c3947e49554fa1057890de6(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SPECIALREQUEST\');};\nfunction onChange_Coment_4173cd046a6f469cbce0da268cc33281(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'COMENT\');};\nfunction onChange_test1_7e045424331e467c995ff9d6d5d1c14a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TEST1\');};\nfunction onChange_test2_e40b869910fb4048ad3c0853a4491c2f(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TEST2\');};\nfunction onChange_LSTVISITHEAD_3348931971bb4ed7bed1c23e454812d3(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTVISITHEAD\');};\nfunction onChange_DEVLAT_62d2e2587db242cbbf2368b1019508f1(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEVLAT\');};\nfunction onChange_DEVLONG_3f85f15dd1d04ab5939eecc0db612164(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEVLONG\');};\nfunction onChange_map1_0c85d81b177a4b56b80eb41db27e0e58(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MAP1\');};\nfunction onChange_dropgroup_c22c6fb5a59044a5b0314fe334d01b7c(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DROPGROUP\'); var mGrpId = _dlgObj.getValue(\'dropgroup\') ; var data  = JSON.parse(_dlgObj.getValue(\'subgrouparray\')); console.log(data); var filteredData = data.filter(function(item) {     return item.group_id == mGrpId; }); console.log(mGrpId); console.log(filteredData); var _d = [[\'\', \'\']]; for (var i = 0; i < filteredData.length; i++) {     _d.push([filteredData[i].subgroup, filteredData[i].id]); } console.log(_d); _dlgObj.populateDropdownBox(\'dropsubgroup\',_d,true);};\nfunction onChange_dropsubgroup_8c2b23e57920487fbcaf26f907e80eba(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DROPSUBGROUP\');};\nfunction onChange_txtsearchdesc_291381a632ed4f7cb99ab3e1de45b948(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TXTSEARCHDESC\');};\nfunction onChange_subgrouparray_e00998d760c94f51bd803551638a2fee(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SUBGROUPARRAY\');};\nfunction onChange_total_bef_ord_fae0872281864a9b8ff1536a7c6793f7(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TOTAL_BEF_ORD\');};\nfunction onChange_total_vat_order_d9cf073893064144a4050153c27c0b77(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TOTAL_VAT_ORDER\');};\nfunction onChange_total_order_with_vat_3871e697ab74476f86107459729638e7(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TOTAL_ORDER_WITH_VAT\');};\nfunction onChange_total_bef_inv_20a4bee4c5704469b43ea96455a63d71(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TOTAL_BEF_INV\');};\nfunction onChange_total_vat_inv_d7aa6cc48c2c4e628672cf9177e2cdc1(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TOTAL_VAT_INV\');};\nfunction onChange_total_inv_with_vat_5141760dc7cd48b5857b68a13ea9d528(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TOTAL_INV_WITH_VAT\');};\nfunction onChange_phoneorder_dcc37a79c2464acbb9d435d4a9c072c5(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PHONEORDER\');};\nfunction onChange_alloweddistance_b867a39d67f2454bb116505104f58da4(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ALLOWEDDISTANCE\');};\nfunction onChange_txtpoilat_2a3aeb03732f4b8c8d8414d9ad0f1c4d(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TXTPOILAT\');};\nfunction onChange_txtpoilong_73c93e6659cd4b18a3493a764254ec38(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TXTPOILONG\');};\nfunction onChange_viewalldaysinplan_7552f4f953604eb68e1f405be3b5127a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VIEWALLDAYSINPLAN\');};\nfunction onChange_wh1_cd70c546d95649c3aac7f7e39632b257(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'WH1\');};\nfunction onChange_wh2_6cb0250588194639b6e363cadd96354e(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'WH2\');};\nfunction onChange_wh3_f6f955a4c1a94d289c2b86a7676592a9(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'WH3\');};\nfunction onChange_wh4_7c0307e670f54e9d8e3e3b479a7195a8(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'WH4\');};\nfunction onChange_allowbonus_22c8b9b143b34667a1b1ee03061d858a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ALLOWBONUS\');};\nfunction onChange_Planoppened_2bb78a87322f471db2a69cf00941c9a8(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PLANOPPENED\');};\nfunction onChange_visitshead_id_cded815c27244d3eae236cc5de6b085c(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VISITSHEAD_ID\');};\nfunction onChange_id_4ae6ff27681343db884d61a21c71eb8c(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ID\');};\nfunction onChange_date_2_5ca4b9608f3d4e8dbb42529f37401e5e(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DATE_2\');};\nfunction onChange_visithead_comp_id_c73a1b136e944c22b1e90d1a1741dcf8(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VISITHEAD_COMP_ID\');};\nfunction onChange_starth_412317370af343e18a1c1230d708dc48(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'STARTH\');};\nfunction onChange_startm_7762ab8894044ad68cfeb0f6f5278a1d(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'STARTM\');};\nfunction onChange_endh_ffd2077e21c04fa99fc1fc21dabcaee8(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ENDH\');};\nfunction onChange_endm_1b3a52097e7a4e8492a5b56640d49422(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ENDM\');};\nfunction onChange_DISPLAYMEDREPNAME_f254b0115d714c21868452cb7ae44617(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DISPLAYMEDREPNAME\');};\nfunction onChange_DISPLAYDATE_54952a7be85b49d6a0619e623040b904(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DISPLAYDATE\');};\nfunction onChange_pricelist_70096938ce504386af09a31ab3eb18d0(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PRICELIST\');};\nfunction onChange_tmppoiid_bce9c0a5830b416db198c7ddd65840cf(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TMPPOIID\');};\nfunction onChange_poiid_52b1f126c6be4601bbe1d4058f31a08c(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'POIID\');};\nfunction onChange_poiname_37201855b3804e22a68b764c870c1501(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'POINAME\');};\nfunction onChange_poitype_9e22177d142a45c6a5afe3ff07f36271(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'POITYPE\');};\nfunction onChange_besttime_b746bc37fbd54134b503692f3b28547b(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'BESTTIME\');};\nfunction onChange_region_7f3f989a797e4583b2501ea8a6f1f691(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'REGION\');};\nfunction onChange_comment_903d4e16a04f46849c3a2eb1e8111863(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'COMMENT\');};\nfunction onChange_phoneno_f6c2a46eff68466fb3ce785966df0590(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PHONENO\');};\nfunction onChange_route_1af389844cb24fe285320b9cc50a2af7(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ROUTE\');};\nfunction onChange_Total_Dues_49e5bfe7eca741f88b7cf6abc8d21634(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TOTAL_DUES\');};\nfunction onChange_starttime_95da99f4e23c49348264c9045de33408(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'STARTTIME\');};\nfunction onChange_date_1_a390822e914a46849a7012ec0273d7f3(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DATE_1\');};\nfunction onChange_latitude_2e33a4a079ae4293b949c40dfe008d86(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LATITUDE\');};\nfunction onChange_longitude_0cee84b93606419594ea24147e144393(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LONGITUDE\');};\nfunction onChange_Ditrict1_d01ae67bf5d8406ea19a27175eef7431(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DITRICT1\');};\nfunction onChange_district_id_b8bd3a5fe25d44509d6ab7b0b6f8ca15(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DISTRICT_ID\');};\nfunction onChange_Region1_fbca9409d47b45e296156b10144453c5(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'REGION1\');};\nfunction onChange_Area1_96da435d4df1425f990a0215ea792ca5(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'AREA1\');};\nfunction onChange_posaccuracy_f7b49c0d125f4980ab059d3b5b57a008(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'POSACCURACY\');};\nfunction onChange_posDistance_463b73216598436ab533d89308ced959(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'POSDISTANCE\');};\nfunction onChange_mypin_b26f55ebe539436d8727b3966a9a6564(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MYPIN\');};\nfunction onChange_receivedpin_50259d0e48fa4eb08478012b7a5338df(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'RECEIVEDPIN\');};\nfunction onChange_pinisvalid_a93f4ff9ea914a0081e8251841faac61(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PINISVALID\');};\nfunction onChange_skipreas_80b7ac9640d247008258910d7a7ce761(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SKIPREAS\');};\nfunction onChange_skipcomment_997de16a3e3448eda852ad13f7a1c140(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SKIPCOMMENT\');};\nfunction onChange_vacation_medrep_70c34b7937834ef4b9e7907c72106767(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VACATION_MEDREP\');};\nfunction onChange_vacation_company_id_30e0db0a676d402eb53bf202ed4f5cc5(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VACATION_COMPANY_ID\');};\nfunction onChange_vacation_activity_24c9add5c5b3481888b2491e0f100e13(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VACATION_ACTIVITY\');};\nfunction onChange_reason_dd5ea832a19240189f4958c794495a42(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'REASON\');};\nfunction onChange_vacation_date_4b672b1bc45a45c08e53cb063aa56066(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VACATION_DATE\');};\nfunction onChange_vacation_comment_a5644b2142894d2e90809ccc3b9f2bbb(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VACATION_COMMENT\');};\nfunction onChange_additemwithbonus_33768535af6240b9a76708db6ca6599b(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ADDITEMWITHBONUS\');};\nfunction onChange_flagadditem_7b27b0feea8248f2981609a62053ccb3(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'FLAGADDITEM\');};\nfunction onChange_routeid_44e881804fa547529d69f24df914337b(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ROUTEID\');};\nfunction onChange_medrepid_4eb65a4f64e54ff49864cdc5a622c83b(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MEDREPID\');};\nfunction onChange_endtime_34803759dcd145068715c06dfd26a873(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ENDTIME\');};\nfunction onChange_latx_935287f9b8ef43ed8a4b62f8f02bee68(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LATX\');};\nfunction onChange_laty_3e712370485b4c8d9469922e5c6bc43f(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LATY\');};\nfunction onChange_accuracy_17926b63c0a34638963cc4c37c1d310f(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ACCURACY\');};\nfunction onChange_altitude_3d628ebc22b94d55868ed82dab88b36a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ALTITUDE\');};\nfunction onChange_altitudeaccur_2a81df78ee034521b154eac8ef4f6f22(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ALTITUDEACCUR\');};\nfunction onChange_heading_474524f505f84ea3b67b603f08b6985a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'HEADING\');};\nfunction onChange_speed_daa635e8344a4678a3d77f8cf9856406(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SPEED\');};\nfunction onChange_timestanpd_49c5e185eb5a484dbac4dfa7a3dd265a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TIMESTANPD\');};\nfunction onChange_lat1_9a719938f12c40a58090dd66ae4e9174(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LAT1\');};\nfunction onChange_long1_496edc10a3ad49a8a59a6db7691cff43(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LONG1\');};\nfunction onChange_LSTDISCUSSED_82e0ad4e88084bb9999a1d1a92061208(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTDISCUSSED\');};\nfunction onChange_LSTSAMPLES_729cbc93a49b4c7399edb1910ad2f735(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTSAMPLES\');};\nfunction onChange_lstorders_b514d3c099954bdb9641bee8d25ce3aa(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTORDERS\');};\nfunction onChange_lstinvoices_f8a6a10c8274414788f8d5e0bf6760e8(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTINVOICES\');};\nfunction onChange_LSTRECEIPT_3dfff52303bb4ca690dad0c0c1fac6d3(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTRECEIPT\');};\nfunction onChange_paimenttype_b87c962f834942ffad5279ce33856408(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PAIMENTTYPE\');};\nfunction onChange_txtrecdesc_1695bd3ae0184117a483680e81413253(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TXTRECDESC\');};\nfunction onChange_Currency_03273cf34cf44d00a2ac4dfa5b0ebf75(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'CURRENCY\');};\nfunction onChange_amount_6150bee91694404b8e5ae75930f8ef51(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'AMOUNT\');};\nfunction onChange_OnInvoiceNo_bc6c913ac0ff4a0999a067d731de5ea8(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ONINVOICENO\');};\nfunction onChange_Shipdate_7e226e20a8fa44dd93cd8416daa3bf9f(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SHIPDATE\');};\nfunction onChange_PayMode_4e44e82e7f6742e48e7c911a6de067cd(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PAYMODE\');};\nfunction onChange_DeliveryMode_cd2187bf51454e0d834ed6024c8d3b6f(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DELIVERYMODE\');};\nfunction onChange_LSTUNPAIDINV_255a12977e644844afc8f2427bebd6ab(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTUNPAIDINV\');};\nfunction onChange_signaturecapture1_1b1ff068218245eea588bd3569305772(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SIGNATURECAPTURE1\');};\nfunction onChange_LSTVISITNOTES_85426efe90b7404385f5f798b5316930(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTVISITNOTES\');};\nfunction onChange_imageblob_f77078bc4f884272b7a698be80299945(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'IMAGEBLOB\');};\nfunction onChange_Notes_c125184e7bdc43eeaeccb03c7dfe7dd8(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'NOTES\');};\nfunction onChange_note_compid_82906675996f44c2b2459c741bd8739c(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'NOTE_COMPID\');};\nfunction onChange_id_3_c33f2e84d4b846e1b2adcd067fce732c(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ID_3\');};\nfunction onChange_visitfk_6fe86094678f42caac3e53d4847583a1(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'VISITFK\');};\nfunction onChange_lstMedialFiles_48de3d8328774be4b3260584f7d5db5c(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTMEDIALFILES\');};\nfunction onChange_AVAILABLE_MEDIA1_8b1ff9aa084e4d5c8adbe5799defc85c(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'AVAILABLE_MEDIA1\');};\nfunction onChange_FeedBack_ca22955168a64a33ad84cc30a3c91e27(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'FEEDBACK\');};\nfunction onChange_nbrOf_Samples_610b3688b28d424ca6d1dafadcb67dd6(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'NBROF_SAMPLES\');};\nfunction onChange_nbrOfOrders_96af70976b1a487f848c64ad5e1f93c9(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'NBROFORDERS\');};\nfunction onChange_nbrOfDiscussedProduts_53e2165a4b8e4e9d97d0fd547a2145ff(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'NBROFDISCUSSEDPRODUTS\');};\nfunction onChange_nbrOfInvoices_88fe3d4ceccf4bb885812f503975ef04(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'NBROFINVOICES\');};\nfunction onChange_nbrOfReceipts_6ca900da2fa54b63a767852df71f63b6(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'NBROFRECEIPTS\');};\nfunction onChange_LSTBASKETH_46c8df2af86b4c32953b2b58450d9737(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTBASKETH\');};\nfunction onChange_LSTBASKETDET_7f62a8eefee547f0a8b3a1a83c0d044a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTBASKETDET\');};\nfunction onChange_BASKETNUM_bfe5789908154454a282c42da73cc1b0(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'BASKETNUM\');};\nfunction onChange_basketitem_b3614458fae9498884bbe1875393b0b7(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'BASKETITEM\');};\nfunction onChange_prodcode_02191e7affd340eabc52b13d5ba62fa5(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PRODCODE\');};\nfunction onChange_itemname_f4f102f0b2194c009107404cae5fbf4f(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ITEMNAME\');};\nfunction onChange_lstitems_qty_pac_d65e41bf4a51449c8c17cb066b359682(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTITEMS_QTY_PAC\'); mreturnable =_dlgObj.getValue(\'returnable\'); mqty =_dlgObj.getValue(\'lstitems_qty\'); \tif (mreturnable==1)  { \t\t\t_dlgObj.setValue(\'tmpret\',mqty); \t\t}};\nfunction onChange_lstitems_bonusq_pac_343f5e6e898d4628b1cd050de7c7facf(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTITEMS_BONUSQ_PAC\');};\nfunction onChange_dropsellunit_3b81a4f1bdb64e03bfbe8ae3bd50fed0(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DROPSELLUNIT\'); function getSellingUnitDetails(arr, unit) {   const found = arr.find(o => o.sellingunit === unit);   return found ? { sellingsize: found.sellingsize, moq: found.moq } : null; } const munit = _dlgObj.getValue(\'dropsellunit\'); const munitq = _dlgObj.getValue(\'lstitems_qty_pac\'); const mar = _dlgObj._unitsarray; const details = getSellingUnitDetails(mar, munit); if (details) {   _dlgObj.setValue(\'lstitems_sellsize\', details.sellingsize);   _dlgObj.setValue(\'smoq\', details.moq); }};\nfunction onChange_dropbonusunit_2d250ef731e0410cbaaa16538ca25342(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DROPBONUSUNIT\'); function getSellingUnitDetails(arr, unit) {   const found = arr.find(o => o.sellingunit === unit);   return found ? { sellingsize: found.sellingsize, moq: found.moq } : null; } const munit = _dlgObj.getValue(\'dropbonusunit\'); const munitq = _dlgObj.getValue(\'lstitems_bonusq_pac\'); const mar = _dlgObj._unitsarray; const details = getSellingUnitDetails(mar, munit); if (details) {   _dlgObj.setValue(\'lstitems_bonussize\', details.sellingsize);   _dlgObj.setValue(\'smoq\', details.moq); }};\nfunction onChange_lstitems_sellsize_e2db5f75970247a7bfa1cb764e4627bb(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTITEMS_SELLSIZE\');};\nfunction onChange_lstitems_bonussize_602727207fa947a8878223659067c4cf(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTITEMS_BONUSSIZE\');};\nfunction onChange_qty_92cf6e74cd7948cc9bb2f52e94aabe56(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'QTY\');};\nfunction onChange_bonus_a66fb130a7ad47829587f5620010f741(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'BONUS\');};\nfunction onChange_lstitems_unitpr_0ceb521df3fa4052ac76cbbd0ebc4349(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTITEMS_UNITPR\');};\nfunction onChange_lstitems_discount_9aee24e85bb24ac69ec712d23d379af4(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTITEMS_DISCOUNT\');};\nfunction onChange_Total_Price_78897ab6e06248a0935c4666fce123bd(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TOTAL_PRICE\');};\nfunction onChange_smoq_dbab642e13684f7dab52f3751ae81ff9(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'SMOQ\');};\nfunction onChange_bmoq_c6b7b9f757cd4a0598b39a37cdbff42f(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'BMOQ\');};\nfunction onChange_liteitems_DiscussedType_f52387457aad435d8c70d528ae8ba7af(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LITEITEMS_DISCUSSEDTYPE\');};\nfunction onChange_listitems_DiscussedComent_e6e8815b512c45da98cf899734164e2a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LISTITEMS_DISCUSSEDCOMENT\');};\nfunction onChange_tmpret_1afb4b6185cf48e7a862538f21c26371(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TMPRET\'); mqty=_dlgObj.getValue(\'lstitems_qty\'); mret=_dlgObj.getValue(\'tmpret\'); _dlgObj.setValue(\'returnqty\',mqty-mret);};\nfunction onChange_returnitem_d8c5b1f8632b46cbae0ebd6efd2a784c(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'RETURNITEM\');};\nfunction onChange_returnqty_7ec8ca444a004cc5a87258cf56e271dc(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'RETURNQTY\');};\nfunction onChange_retprice_c6bda7cb1b83470d9174375141e64a89(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'RETPRICE\');};\nfunction onChange_returnable_e438ce889eec4c308c3d9c74a9fc13fc(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'RETURNABLE\');};\nfunction onChange_flagviewbonus_4e9c20000f264745ad8b0d69402584fa(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'FLAGVIEWBONUS\');};\nfunction onChange_LSTITEMS_5ee8dacc7daf4f5fa77acaf6d4fa0fcf(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTITEMS\');};\nfunction onChange_LSTVACATION_954acc09260546f0a79a1686165c62a7(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTVACATION\');};\nfunction onChange_LSTPOI_KEYWORDSEARCH_ea10abf019c3419383bd6b99f9d53691(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTPOI_KEYWORDSEARCH\');};\nfunction onChange_LSTPOI_797babba6dae4d4e925e3bc8e9d24150(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTPOI\');};\nfunction onChange_POINAME_1_1585409d5c134e9885637b8014b1351c(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'POINAME_1\');};\nfunction onChange_COMMENT_1_45235e3582a7401e9c05d1b53e86cd98(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'COMMENT_1\');};\nfunction onChange_CONTACTPERSON_61b69e5990e7419c93bfb10fe898662e(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'CONTACTPERSON\');};\nfunction onChange_PHONENO_1_0dead06369054023b1a0fe5fab57a8b8(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PHONENO_1\');};\nfunction onChange_MOBILE_f7cb7b59a67247b082904b0fa8cd2417(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MOBILE\');};\nfunction onChange_EMAIL_e969b11a2336445d9e97c09d4d9ae677(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'EMAIL\');};\nfunction onChange_ADDRESS_bd3ede2235814ac387aff5d8ee059844(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'ADDRESS\');};\nfunction onChange_STREET_826c11752c774e95b2d9dd80e83abe8c(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'STREET\');};\nfunction onChange_frequency_1b8f730b1ab74f5ea45bd98bc995eed7(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'FREQUENCY\');};\nfunction onChange_medrep_id_b4f2fc2cf2bb4971ac4ea801f9b4ef07(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'MEDREP_ID\');};\nfunction onChange_company_id_9464100e0dd247358e6852cdca5f9dbc(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'COMPANY_ID\');};\nfunction onChange_printername_cf878541c4fd4b2782ba446956381aa6(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'PRINTERNAME\');};\nfunction onChange_textarea1_e27c2b7a77ea452894c52691345ab0fe(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'TEXTAREA1\');};\nfunction onChange_LSTDEALS_5ec224a8016b44c69229746aecf62a95(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTDEALS\');};\nfunction onChange_deal_amount_4952c1fdf3a34d699def392c6d2a52d8(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_AMOUNT\');};\nfunction onChange_deal_startd_87135148b38b471f8ada9b37558f98eb(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_STARTD\');};\nfunction onChange_deal_roi_date_59230c3caebe433093897eb40376825e(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_ROI_DATE\');};\nfunction onChange_deal_type_26352fdee3014a1fa6dfb7d1d6776c5b(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_TYPE\');};\nfunction onChange_deal_source_sale_f0ba0a9864d9419784aea1c54a56e403(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_SOURCE_SALE\');};\nfunction onChange_deal_source_name_7279949fa35f42ccb14476d7e6a9da20(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_SOURCE_NAME\');};\nfunction onChange_deal_phname_82ff383aabfb4f808d44a573af940d9a(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_PHNAME\');};\nfunction onChange_deal_ph_invno_3e2af67a6e684643bb013e74c24e0346(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_PH_INVNO\');};\nfunction onChange_deal_ph_date_361bc74776ae412ba16c19356d0519ed(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_PH_DATE\');};\nfunction onChange_deal_item1_342256ea3d44487482214a99134829aa(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_ITEM1\');};\nfunction onChange_deal_item1q_2b47ede8eaf941cb9a9f62f29642e67f(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_ITEM1Q\');};\nfunction onChange_deal_item2_4cd6087eb11544ae820ed7ebfd39acab(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_ITEM2\');};\nfunction onChange_deal_item2q_c64e2a6fc7af495bb72083d9008d3314(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_ITEM2Q\');};\nfunction onChange_deal_item3_c6d8ae69fe1040ca9841c3292517b8dd(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_ITEM3\');};\nfunction onChange_deal_item3q_09cc3314c3804929ad0ae7f16754ee20(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_ITEM3Q\');};\nfunction onChange_deal_item4_6156a49b00a74bdc9a9464e401bd98e5(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_ITEM4\');};\nfunction onChange_deal_item4q_ddbba59db3c84259b0ee939b37237a84(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_ITEM4Q\');};\nfunction onChange_deal_pay_method_6a819a16d0554f82afdc9fd353f58a0e(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_PAY_METHOD\');};\nfunction onChange_deal_bank_bf641e7d62d74be19fb3a12766a768bc(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_BANK\');};\nfunction onChange_deal_bank_acc_80f00e94ee99498b913646f6847c0bc6(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_BANK_ACC\');};\nfunction onChange_deal_id_9d2f82759e794135ba2f8525b9fbfdc9(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_ID\');};\nfunction onChange_deal_coment_6a4f249118894adf9b7a92d7d8b8c1e9(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_COMENT\');};\nfunction onChange_deal_pay_4fb6c6e924f64200ab74bd2cd3b42bdf(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'DEAL_PAY\');};\nfunction onChange_lstgeoloc_6573153b8041459d88455f060181aeb7(_dlgObj){if(_dlgObj.executeWatchEventForControl) _dlgObj.executeWatchEventForControl(\'LSTGEOLOC\');};\n\n\n;\n',true);
DLG1_DlgObj._controlsThatHaveHiddenProperty = ['medrepcode','saving','changepass','BUTTON_98','test2','starttime','date_1','district_id','Area1','pinisvalid','vacation_medrep','vacation_company_id','BUTTON_40','BUTTON_DVNEWRECORD_LSTRECEIPT','BUTTON_DVDELETERECORD_LSTRECEIPT','id_3','visitfk','AVAILABLE_MEDIA1','BUTTON_DVDELETERECORD_LSTVACATION','BUTTON_DVRESET_LSTVACATION','BUTTON_DVSYNCHRONIZE_LSTVACATION','LSTPOI','medrep_id','company_id','LSTDEALS']
DLG1_DlgObj.fieldHelpers['REPID'] = new A5.EditButtonGroup({theme: 'Alpha-Magenta'});
DLG1_DlgObj.fieldHelpers['REPID_1'] = new A5.EditButtonGroup({theme: 'Alpha-Magenta'});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['DATE']) {  DLG1_DlgObj.fieldHelpers['DATE'] = new A5.EditDateTime({
	theme: 'Alpha-Magenta',
	dateTime: {
		format: 'dd/MM/yyyy',
		datePicker: {
			days: DLG1_DlgObj.datePickerDayNames,
			months: DLG1_DlgObj.datePickerMonthNames,
			startDay: DLG1_DlgObj.datePickerFirstDayOfWeek-1,
			calendar: {
				lockColumnWidth: false,
				daysOfWeek: {
					show: true
				},
				weeksOfYear: {
					show: false
				},
				date: {
					item: {
						style: 'width: 10px; height: 10px;'
					}
				}
			},
			navigator: {
				header: {
					todayButton: {
						show: true,
						html: DLG1_DlgObj.datePickerTodayButton,
						tip: ''
					}
				}
			},
			disabledDates: {
				low: '',
				high: '',
				days: [],
				dates: []
			},
			width: '100%',
			height: ''
		},
		switchYear: 30,
		combinedContainer: {
			display: 'block'
		}
	},
	window: {
		autoGenerateButtons: false,
		buttons: {
			items: [
			{
				html: 'OK',
				action: 'commit'
			},
			{
				html: 'Cancel',
				action: 'close'
			}]
		}
	},
	onSelect: function() {$e.execute(this,'change');} ,
	multiple: {
		allow: false
	},
	selectionRequired: true
});}
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['PASSWORD'])DLG1_DlgObj.fieldHelpers['PASSWORD'] = new A5.Edit({
	watermark: {
		text: 'Password'
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['SAVING'])DLG1_DlgObj.fieldHelpers['SAVING'] = new A5.Edit({
	watermark: {
		text: 'saving'
	}
});
DLG1_DlgObj.fieldHelpers['COMPANYCODE'] = new A5.EditButtonGroup({theme: 'Alpha-Magenta'});
DLG1_DlgObj.fieldHelpers['SEARCH_OFFROUTE'] = new A5.EditButtonGroup({theme: 'Alpha-Magenta'});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['SPECIALREQUEST'])DLG1_DlgObj.fieldHelpers['SPECIALREQUEST'] = new A5.Edit({
	watermark: {
		text: 'Special Request'
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['COMENT'])DLG1_DlgObj.fieldHelpers['COMENT'] = new A5.Edit({
	watermark: {
		text: 'Comment'
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['TXTSEARCHDESC'])DLG1_DlgObj.fieldHelpers['TXTSEARCHDESC'] = new A5.Edit({
	watermark: {
		text: 'Item Description'
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['TOTAL_BEF_ORD'])DLG1_DlgObj.fieldHelpers['TOTAL_BEF_ORD'] = new A5.Edit({
	format: {
		type: 'number',
		number: {
			blank: true,
			blankValue: 0,
			hasMax: false,
			max: 100,
			hasMin: false,
			min: 0,
			round: 2,
			roundDirection: 'up',
			decimal: '.',
			comma: ','
		}
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['TOTAL_VAT_ORDER'])DLG1_DlgObj.fieldHelpers['TOTAL_VAT_ORDER'] = new A5.Edit({
	format: {
		type: 'number',
		number: {
			blank: true,
			blankValue: 0,
			hasMax: false,
			max: 100,
			hasMin: false,
			min: 0,
			round: 2,
			roundDirection: 'up',
			decimal: '.',
			comma: ','
		}
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['TOTAL_ORDER_WITH_VAT'])DLG1_DlgObj.fieldHelpers['TOTAL_ORDER_WITH_VAT'] = new A5.Edit({
	format: {
		type: 'number',
		number: {
			blank: true,
			blankValue: 0,
			hasMax: false,
			max: 100,
			hasMin: false,
			min: 0,
			round: 2,
			roundDirection: 'up',
			decimal: '.',
			comma: ','
		}
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['TOTAL_BEF_INV'])DLG1_DlgObj.fieldHelpers['TOTAL_BEF_INV'] = new A5.Edit({
	format: {
		type: 'number',
		number: {
			blank: true,
			blankValue: 0,
			hasMax: false,
			max: 100,
			hasMin: false,
			min: 0,
			round: 2,
			roundDirection: 'up',
			decimal: '.',
			comma: ','
		}
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['TOTAL_VAT_INV'])DLG1_DlgObj.fieldHelpers['TOTAL_VAT_INV'] = new A5.Edit({
	format: {
		type: 'number',
		number: {
			blank: true,
			blankValue: 0,
			hasMax: false,
			max: 100,
			hasMin: false,
			min: 0,
			round: 2,
			roundDirection: 'up',
			decimal: '.',
			comma: ','
		}
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['TOTAL_INV_WITH_VAT'])DLG1_DlgObj.fieldHelpers['TOTAL_INV_WITH_VAT'] = new A5.Edit({
	format: {
		type: 'number',
		number: {
			blank: true,
			blankValue: 0,
			hasMax: false,
			max: 100,
			hasMin: false,
			min: 0,
			round: 2,
			roundDirection: 'up',
			decimal: '.',
			comma: ','
		}
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['DATE_2']) {  DLG1_DlgObj.fieldHelpers['DATE_2'] = new A5.EditDateTime({
	theme: 'Alpha-Magenta',
	dateTime: {
		format: 'dd/MM/yyyy 0h:0m',
		datePicker: {
			days: DLG1_DlgObj.datePickerDayNames,
			months: DLG1_DlgObj.datePickerMonthNames,
			startDay: DLG1_DlgObj.datePickerFirstDayOfWeek-1,
			calendar: {
				lockColumnWidth: false,
				daysOfWeek: {
					show: true
				},
				weeksOfYear: {
					show: false
				}
			},
			navigator: {
				header: {
					todayButton: {
						show: true,
						html: DLG1_DlgObj.datePickerTodayButton,
						tip: ''
					}
				}
			},
			disabledDates: {
				low: '',
				high: '',
				days: []
			},
			width: '100%',
			height: ''
		},
		switchYear: 20,
		combinedContainer: {
			display: 'block'
		}
	},
	window: {
		autoGenerateButtons: false,
		buttons: {
			items: [
			{
				html: 'OK',
				action: 'commit'
			},
			{
				html: 'Cancel',
				action: 'close'
			}]
		}
	},
	onSelect: function() {$e.execute(this,'change');} ,
	multiple: {
		allow: false
	},
	selectionRequired: false
});}
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['TOTAL_DUES'])DLG1_DlgObj.fieldHelpers['TOTAL_DUES'] = new A5.Edit({
	format: {
		type: 'number',
		number: {
			blank: true,
			blankValue: 0,
			hasMax: false,
			max: 100,
			hasMin: false,
			min: 0,
			round: 2,
			roundDirection: 'up',
			decimal: '.',
			comma: ','
		}
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['STARTTIME']) {  DLG1_DlgObj.fieldHelpers['STARTTIME'] = new A5.EditDateTime({
	theme: 'Alpha-Magenta',
	dateTime: {
		format: 'dd/MM/yyyy 0h:0m',
		datePicker: {
			days: DLG1_DlgObj.datePickerDayNames,
			months: DLG1_DlgObj.datePickerMonthNames,
			startDay: DLG1_DlgObj.datePickerFirstDayOfWeek-1,
			calendar: {
				lockColumnWidth: false,
				daysOfWeek: {
					show: true
				},
				weeksOfYear: {
					show: false
				}
			},
			navigator: {
				header: {
					todayButton: {
						show: true,
						html: DLG1_DlgObj.datePickerTodayButton,
						tip: ''
					}
				}
			},
			disabledDates: {
				low: '',
				high: '',
				days: []
			},
			width: '100%',
			height: ''
		},
		switchYear: 20,
		combinedContainer: {
			display: 'block'
		}
	},
	window: {
		autoGenerateButtons: false,
		buttons: {
			items: [
			{
				html: 'OK',
				action: 'commit'
			},
			{
				html: 'Cancel',
				action: 'close'
			}]
		}
	},
	onSelect: function() {$e.execute(this,'change');} ,
	multiple: {
		allow: false
	},
	selectionRequired: false
});}
/* DIALOG2FieldHelperBegin:DITRICT1 */
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['DITRICT1'])DLG1_DlgObj.fieldHelpers['DITRICT1'] = new A5.EditCombo(function(eleId,keyFilter) {
	if(!this._listbox._window.hidden) return this._data;
	var rowNumber = $u.s.toNum(  $u.s.word($u.s.word(this._targetId,2,'.V.R'),1,'.') );
	;
		var data = DLG1_DlgObj.getData();	
		data = data + '&' + DLG1_DlgObj.getStateInfo();
	data = '__FormID=DLG1&_rowNumber='+rowNumber+'&__FormAction=getEditComboData&_Part=dialog2&_varname=DITRICT1&' + data;
	data = data + '&__editComboId=' + eleId + '&__editComboTextFilter=' + keyFilter;
	data = $u.s.tran(data,'\n','%0D%0A');
	A5.ajax.callback(DLG1_DlgObj.ajaxURL,data);
	return [{'*static' : 'Loading...'}];
}
,{
	theme: 'Alpha-Magenta',
	onBind: function() {  } ,
	window: {
		height: 'max: 3in',
		location: 'dropdown'
	},
	body: {
		style: 'overflow: auto;'
	},
	onSelect:  function(data,classInst) {
	DLG1_DlgObj._batchChange = true;
	var _data = data.ID; if(_data || _data == '' || _data == null) {  if(_data != null) {_data = _data.split('{crlf}').join('\n');} DLG1_DlgObj.setValue('DISTRICT_ID',_data);}
	DLG1_DlgObj._batchChange = false;
	setTimeout(Function('$e.execute(\''+this.id+'\',\'change\');'),0);
	if(this.value == '&nbsp;') this.value = '';;
DLG1_DlgObj._setRowState(1,true);
	classInst.selecting = false;
}
,
	onBeforeSelect:  function(data,classInst) { 
	//console.log('selecting: ' + JSON.stringify(data,'','\t') )
	classInst.selecting = true;
}
,
	listbox: {
		onItemDraw: function(ele,data,indx) {},
		item: {
			columns: [
			{
				name: 'DISTRICT'
			}],
			template: '{DISTRICT}  ',
			calculateValue: function(data) { 
return '' + data.DISTRICT;
}
		}
	},
	selectionRequired: false,
	progressiveFilterMode: 'in-value',
	onNoSelect: function(ci) {
if(ci._initValue != this.value) {
	if(ci.valueInList(this.value)) {
		var data = ci._listbox.getData(this.value);
		DLG1_DlgObj._batchChange = true;
		var _data = data.ID; if(_data || _data == '' || _data == null) {  if(_data != null) {_data = _data.split('{crlf}').join('\n');} DLG1_DlgObj.setValue('DISTRICT_ID',_data);}
		DLG1_DlgObj._batchChange = false;
		setTimeout(Function('$e.execute(\''+this.id+'\',\'change\');'),0);
		if(this.value == '&nbsp;') this.value = '';;
DLG1_DlgObj._setRowState(1,true);
	}
}
},
	selectionRequiredFilterMode: 'default'
});
/* DIALOG2FieldHelperEnd:DITRICT1 */
/* DIALOG2FieldHelperBegin:REGION1 */
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['REGION1'])DLG1_DlgObj.fieldHelpers['REGION1'] = new A5.EditCombo(function(eleId,keyFilter) {
	if(!this._listbox._window.hidden) return this._data;
	var rowNumber = $u.s.toNum(  $u.s.word($u.s.word(this._targetId,2,'.V.R'),1,'.') );
	;
var DISTRICT_ID = DLG1_DlgObj.getValue('DISTRICT_ID',rowNumber);
		var data = DLG1_DlgObj.getData();	
		data = data + '&' + DLG1_DlgObj.getStateInfo();
	data = '__FormID=DLG1&_rowNumber='+rowNumber+'&__FormAction=getEditComboData&_Part=dialog2&_varname=REGION1&' + data;
	data = data + '&__editComboId=' + eleId + '&__editComboTextFilter=' + keyFilter;
	data = $u.s.tran(data,'\n','%0D%0A');
	A5.ajax.callback(DLG1_DlgObj.ajaxURL,data);
	return [{'*static' : 'Loading...'}];
}
,{
	theme: 'Alpha-Magenta',
	onBind: function() {  } ,
	window: {
		height: 'max: 3in',
		location: 'dropdown'
	},
	body: {
		style: 'overflow: auto;'
	},
	onSelect: function(data,classInst) { 
	$e.execute(this,'change');
	if(this.value == '&nbsp;') this.value = '';;
;
	classInst.selecting = false;
}
,
	onBeforeSelect:  function(data,classInst) { 
	//console.log('selecting: ' + JSON.stringify(data,'','\t') )
	classInst.selecting = true;
}
,
	listbox: {
		onItemDraw: function(ele,data,indx) {},
		item: {
			columns: [
			{
				name: 'REGION'
			}],
			template: '{REGION}  ',
			calculateValue: function(data) { 
return '' + data.REGION;
}
		}
	},
	selectionRequired: false,
	progressiveFilterMode: 'in-value',
	_filterState: null,
	selectionRequiredFilterMode: 'default'
});
/* DIALOG2FieldHelperEnd:REGION1 */
/* DIALOG2FieldHelperBegin:AREA1 */
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['AREA1'])DLG1_DlgObj.fieldHelpers['AREA1'] = new A5.EditCombo(function(eleId,keyFilter) {
	var rowNumber = $u.s.toNum(  $u.s.word($u.s.word(this._targetId,2,'.V.R'),1,'.') );
	;
var REGION_ID1 = DLG1_DlgObj.getValue('REGION_ID1',rowNumber);
	var _filterState = REGION_ID1;
	if(this._filterState != _filterState) {
		this._filterState = _filterState;
		var data = DLG1_DlgObj.getData();	
		data = data + '&' + DLG1_DlgObj.getStateInfo();
		data = '__FormID=DLG1&_rowNumber='+rowNumber+'&__FormAction=getEditComboData&_Part=dialog2&_varname=AREA1&' + data;
		data = data + '&__editComboId=' + eleId + '&__editComboTextFilter=' + keyFilter;
		var rsData = DLG1_DlgObj._getRepeatingSectionInfo();
		if(rsData != '') data = data + '&' + rsData; 
		data = $u.s.tran(data,'\n','%0D%0A');
		A5.ajax.callback(DLG1_DlgObj.ajaxURL,data);
		return [{'*static' : 'Loading...'}];
	} else {
		return this._data;
	}	
}
,{
	theme: 'Alpha-Magenta',
	onBind: function() {  } ,
	window: {
		height: 'max: 3in',
		location: 'dropdown'
	},
	body: {
		style: 'overflow: auto;'
	},
	onSelect:  function(data,classInst) {
	DLG1_DlgObj._batchChange = true;
	var _data = data.ID; if(_data || _data == '' || _data == null) {  if(_data != null) {_data = _data.split('{crlf}').join('\n');} DLG1_DlgObj.setValue('AREA_ID1',_data);}
	DLG1_DlgObj._batchChange = false;
	setTimeout(Function('$e.execute(\''+this.id+'\',\'change\');'),0);
	if(this.value == '&nbsp;') this.value = '';;
DLG1_DlgObj._setRowState(1,true);
	classInst.selecting = false;
}
,
	onBeforeSelect:  function(data,classInst) { 
	//console.log('selecting: ' + JSON.stringify(data,'','\t') )
	classInst.selecting = true;
}
,
	listbox: {
		onItemDraw: function(ele,data,indx) {},
		item: {
			columns: [
			{
				name: 'area'
			}],
			template: '{AREA}  ',
			calculateValue: function(data) { 
return '' + data.AREA;
}
		}
	},
	selectionRequired: false,
	progressiveFilterMode: 'in-value',
	onNoSelect: function(ci) {
if(ci._initValue != this.value) {
	if(ci.valueInList(this.value)) {
		var data = ci._listbox.getData(this.value);
		DLG1_DlgObj._batchChange = true;
		var _data = data.ID; if(_data || _data == '' || _data == null) {  if(_data != null) {_data = _data.split('{crlf}').join('\n');} DLG1_DlgObj.setValue('AREA_ID1',_data);}
		DLG1_DlgObj._batchChange = false;
		setTimeout(Function('$e.execute(\''+this.id+'\',\'change\');'),0);
		if(this.value == '&nbsp;') this.value = '';;
DLG1_DlgObj._setRowState(1,true);
	}
}
},
	_filterState: null,
	selectionRequiredFilterMode: 'default'
});
/* DIALOG2FieldHelperEnd:AREA1 */
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['POSACCURACY'])DLG1_DlgObj.fieldHelpers['POSACCURACY'] = new A5.Edit({
	format: {
		type: 'number',
		number: {
			blank: true,
			blankValue: 0,
			hasMax: false,
			max: 100,
			hasMin: false,
			min: 0,
			round: 2,
			decimal: '.',
			comma: ','
		}
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['POSDISTANCE'])DLG1_DlgObj.fieldHelpers['POSDISTANCE'] = new A5.Edit({
	format: {
		type: 'number',
		number: {
			blank: true,
			blankValue: 0,
			hasMax: false,
			max: 100,
			hasMin: false,
			min: 0,
			round: 2,
			decimal: '.',
			comma: ','
		}
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['VACATION_DATE']) {  DLG1_DlgObj.fieldHelpers['VACATION_DATE'] = new A5.EditDateTime({
	theme: 'Alpha-Magenta',
	dateTime: {
		format: 'dd/MM/yyyy',
		datePicker: {
			days: DLG1_DlgObj.datePickerDayNames,
			months: DLG1_DlgObj.datePickerMonthNames,
			startDay: DLG1_DlgObj.datePickerFirstDayOfWeek-1,
			calendar: {
				lockColumnWidth: false,
				daysOfWeek: {
					show: true
				},
				weeksOfYear: {
					show: false
				}
			},
			navigator: {
				header: {
					todayButton: {
						show: true,
						html: DLG1_DlgObj.datePickerTodayButton,
						tip: ''
					}
				}
			},
			disabledDates: {
				low: '',
				high: '',
				days: []
			},
			width: '100%',
			height: ''
		},
		switchYear: 30,
		combinedContainer: {
			display: 'block'
		}
	},
	window: {
		autoGenerateButtons: false,
		buttons: {
			items: [
			{
				html: 'OK',
				action: 'commit'
			},
			{
				html: 'Cancel',
				action: 'close'
			}]
		}
	},
	onSelect: function() {$e.execute(this,'change');} ,
	multiple: {
		allow: false
	},
	selectionRequired: false
});}
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['ENDTIME']) {  DLG1_DlgObj.fieldHelpers['ENDTIME'] = new A5.EditDateTime({
	theme: 'Alpha-Magenta',
	dateTime: {
		format: 'dd/MM/yyyy 0h:0m',
		datePicker: {
			days: DLG1_DlgObj.datePickerDayNames,
			months: DLG1_DlgObj.datePickerMonthNames,
			startDay: DLG1_DlgObj.datePickerFirstDayOfWeek-1,
			calendar: {
				lockColumnWidth: false,
				daysOfWeek: {
					show: true
				},
				weeksOfYear: {
					show: false
				}
			},
			navigator: {
				header: {
					todayButton: {
						show: true,
						html: DLG1_DlgObj.datePickerTodayButton,
						tip: ''
					}
				}
			},
			disabledDates: {
				low: '',
				high: '',
				days: []
			},
			width: '100%',
			height: ''
		},
		switchYear: 20,
		combinedContainer: {
			display: 'block'
		}
	},
	window: {
		autoGenerateButtons: false,
		buttons: {
			items: [
			{
				html: 'OK',
				action: 'commit'
			},
			{
				html: 'Cancel',
				action: 'close'
			}]
		}
	},
	onSelect: function() {$e.execute(this,'change');} ,
	multiple: {
		allow: false
	},
	selectionRequired: false
});}
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['TIMESTANPD']) {  DLG1_DlgObj.fieldHelpers['TIMESTANPD'] = new A5.EditDateTime({
	theme: 'Alpha-Magenta',
	dateTime: {
		format: 'dd/MM/yyyy 0h:0m',
		datePicker: {
			days: DLG1_DlgObj.datePickerDayNames,
			months: DLG1_DlgObj.datePickerMonthNames,
			startDay: DLG1_DlgObj.datePickerFirstDayOfWeek-1,
			calendar: {
				lockColumnWidth: false,
				daysOfWeek: {
					show: true
				},
				weeksOfYear: {
					show: false
				}
			},
			navigator: {
				header: {
					todayButton: {
						show: true,
						html: DLG1_DlgObj.datePickerTodayButton,
						tip: ''
					}
				}
			},
			disabledDates: {
				low: '',
				high: '',
				days: []
			},
			width: '100%',
			height: ''
		},
		switchYear: 20,
		combinedContainer: {
			display: 'block'
		}
	},
	window: {
		autoGenerateButtons: false,
		buttons: {
			items: [
			{
				html: 'OK',
				action: 'commit'
			},
			{
				html: 'Cancel',
				action: 'close'
			}]
		}
	},
	onSelect: function() {$e.execute(this,'change');} ,
	multiple: {
		allow: false
	},
	selectionRequired: false
});}
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['SHIPDATE']) {  DLG1_DlgObj.fieldHelpers['SHIPDATE'] = new A5.EditDateTime({
	theme: 'Alpha-Magenta',
	dateTime: {
		format: 'dd/MM/yyyy',
		datePicker: {
			days: DLG1_DlgObj.datePickerDayNames,
			months: DLG1_DlgObj.datePickerMonthNames,
			startDay: DLG1_DlgObj.datePickerFirstDayOfWeek-1,
			calendar: {
				lockColumnWidth: false,
				daysOfWeek: {
					show: true
				},
				weeksOfYear: {
					show: false
				}
			},
			navigator: {
				header: {
					todayButton: {
						show: true,
						html: DLG1_DlgObj.datePickerTodayButton,
						tip: ''
					}
				}
			},
			disabledDates: {
				low: '',
				high: '',
				days: []
			},
			width: '100%',
			height: ''
		},
		switchYear: 30,
		combinedContainer: {
			display: 'block'
		}
	},
	window: {
		autoGenerateButtons: false,
		buttons: {
			items: [
			{
				html: 'OK',
				action: 'commit'
			},
			{
				html: 'Cancel',
				action: 'close'
			}]
		}
	},
	onSelect: function() {$e.execute(this,'change');} ,
	multiple: {
		allow: false
	},
	selectionRequired: true
});}
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['NOTES'])DLG1_DlgObj.fieldHelpers['NOTES'] = new A5.Edit({
	watermark: {
		text: 'Notes'
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['NOTE_COMPID'])DLG1_DlgObj.fieldHelpers['NOTE_COMPID'] = new A5.Edit({
	watermark: {
		text: 'Textbox2'
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['TOTAL_PRICE'])DLG1_DlgObj.fieldHelpers['TOTAL_PRICE'] = new A5.Edit({
	format: {
		type: 'number',
		number: {
			blank: true,
			blankValue: 0,
			hasMax: false,
			max: 100,
			hasMin: false,
			min: 0,
			round: 2,
			decimal: '.',
			comma: ','
		}
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['PRINTERNAME'])DLG1_DlgObj.fieldHelpers['PRINTERNAME'] = new A5.Edit({
	watermark: {
		text: 'printername'
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['TEXTAREA1'])DLG1_DlgObj.fieldHelpers['TEXTAREA1'] = new A5.Edit({
	watermark: {
		text: 'Textarea1'
	}
});
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['DEAL_STARTD']) {  DLG1_DlgObj.fieldHelpers['DEAL_STARTD'] = new A5.EditDateTime({
	theme: 'Alpha-Magenta',
	dateTime: {
		format: 'dd/MM/yyyy',
		datePicker: {
			days: DLG1_DlgObj.datePickerDayNames,
			months: DLG1_DlgObj.datePickerMonthNames,
			startDay: DLG1_DlgObj.datePickerFirstDayOfWeek-1,
			calendar: {
				lockColumnWidth: false,
				daysOfWeek: {
					show: true
				},
				weeksOfYear: {
					show: false
				}
			},
			navigator: {
				header: {
					todayButton: {
						show: true,
						html: DLG1_DlgObj.datePickerTodayButton,
						tip: ''
					}
				}
			},
			disabledDates: {
				low: '',
				high: '',
				days: []
			},
			width: '100%',
			height: ''
		},
		switchYear: 30,
		combinedContainer: {
			display: 'block'
		}
	},
	window: {
		autoGenerateButtons: false,
		buttons: {
			items: [
			{
				html: 'OK',
				action: 'commit'
			},
			{
				html: 'Cancel',
				action: 'close'
			}]
		}
	},
	onSelect: function() {$e.execute(this,'change');} ,
	multiple: {
		allow: false
	},
	selectionRequired: true
});}
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['DEAL_ROI_DATE']) {  DLG1_DlgObj.fieldHelpers['DEAL_ROI_DATE'] = new A5.EditDateTime({
	theme: 'Alpha-Magenta',
	dateTime: {
		format: 'dd/MM/yyyy',
		datePicker: {
			days: DLG1_DlgObj.datePickerDayNames,
			months: DLG1_DlgObj.datePickerMonthNames,
			startDay: DLG1_DlgObj.datePickerFirstDayOfWeek-1,
			calendar: {
				lockColumnWidth: false,
				daysOfWeek: {
					show: true
				},
				weeksOfYear: {
					show: false
				}
			},
			navigator: {
				header: {
					todayButton: {
						show: true,
						html: DLG1_DlgObj.datePickerTodayButton,
						tip: ''
					}
				}
			},
			disabledDates: {
				low: '',
				high: '',
				days: []
			},
			width: '100%',
			height: ''
		},
		switchYear: 30,
		combinedContainer: {
			display: 'block'
		}
	},
	window: {
		autoGenerateButtons: false,
		buttons: {
			items: [
			{
				html: 'OK',
				action: 'commit'
			},
			{
				html: 'Cancel',
				action: 'close'
			}]
		}
	},
	onSelect: function() {$e.execute(this,'change');} ,
	multiple: {
		allow: false
	},
	selectionRequired: true
});}
if(typeof DLG1_DlgObj !== 'undefined' && typeof DLG1_DlgObj.fieldHelpers!== 'undefined') if(!DLG1_DlgObj.fieldHelpers['DEAL_PH_DATE']) {  DLG1_DlgObj.fieldHelpers['DEAL_PH_DATE'] = new A5.EditDateTime({
	theme: 'Alpha-Magenta',
	dateTime: {
		format: 'dd/MM/yyyy',
		datePicker: {
			days: DLG1_DlgObj.datePickerDayNames,
			months: DLG1_DlgObj.datePickerMonthNames,
			startDay: DLG1_DlgObj.datePickerFirstDayOfWeek-1,
			calendar: {
				lockColumnWidth: false,
				daysOfWeek: {
					show: true
				},
				weeksOfYear: {
					show: false
				}
			},
			navigator: {
				header: {
					todayButton: {
						show: true,
						html: DLG1_DlgObj.datePickerTodayButton,
						tip: ''
					}
				}
			},
			disabledDates: {
				low: '',
				high: '',
				days: []
			},
			width: '100%',
			height: ''
		},
		switchYear: 30,
		combinedContainer: {
			display: 'block'
		}
	},
	window: {
		autoGenerateButtons: false,
		buttons: {
			items: [
			{
				html: 'OK',
				action: 'commit'
			},
			{
				html: 'Cancel',
				action: 'close'
			}]
		}
	},
	onSelect: function() {$e.execute(this,'change');} ,
	multiple: {
		allow: false
	},
	selectionRequired: true
});}
DLG1_DlgObj.lookups = {
};
DLG1_DlgObj.dialogWatches['ENABLE_MEDREP'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.MEDREP'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.MEDREP')];
	var pObj = DLG1_DlgObj.getControl('MedRep'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('MedRep'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['MedRep'] != 'undefined') {
		DLG1_DlgObj._buttons['MedRep'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'MedRep', flag: enable});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_FRAME_2'] = {
		watch: ['REPID'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var REPID = $u.s.toNum(DLG1_DlgObj.getValue('REPID',data.rowNumber));
	var showHide = '';
	if( ((REPID >= 2000000) && (1 == 2)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'FRAME_2'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'FRAME_2'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'FRAME_2', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_REPID_1'] = {
		watch: ['REPID'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var REPID = $u.s.toNum(DLG1_DlgObj.getValue('REPID',data.rowNumber));
	var showHide = '';
	if( (REPID >= 2000000) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'REPID_1'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'REPID_1'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'repid_1', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_MEDREP_1'] = {
		watch: ['REPID'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var REPID = $u.s.toNum(DLG1_DlgObj.getValue('REPID',data.rowNumber));
	var showHide = '';
	if( (REPID >= 2000000) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'MEDREP_1'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'MEDREP_1'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'MedRep_1', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['ENABLE_DATE'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.DATE'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.DATE')];
	var pObj = DLG1_DlgObj.getControl('Date'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('Date'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['Date'] != 'undefined') {
		DLG1_DlgObj._buttons['Date'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'Date', flag: enable});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_TEXTBOX3'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'TEXTBOX3'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'TEXTBOX3'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'textbox3', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_PASSOK'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'PASSOK'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'PASSOK'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'passok', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_VPASSWORD'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'VPASSWORD'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'VPASSWORD'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'vPAssword', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_VSECURITY'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'VSECURITY'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'VSECURITY'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'vSecurity', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_SYNCINPROGRESS'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'SYNCINPROGRESS'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'SYNCINPROGRESS'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'syncinprogress', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_FAILEDSYNC'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'FAILEDSYNC'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'FAILEDSYNC'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'failedsync', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_MEDREPNAME'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'MEDREPNAME'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'MEDREPNAME'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'medrepname', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_30_2'] = {
		watch: ['SYNCINPROGRESS'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var SYNCINPROGRESS = $u.s.toNum(DLG1_DlgObj.getValue('SYNCINPROGRESS',data.rowNumber));
	var enable = (SYNCINPROGRESS == 0);
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_30_2'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_30_2')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_30_2'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_30_2'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_30_2'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_30_2'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_30_2', flag: enable});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_CONTAINER_239'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'CONTAINER_239'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'CONTAINER_239'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'CONTAINER_239', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['ENABLE_COMPANYID'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.COMPANYID'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.COMPANYID')];
	var pObj = DLG1_DlgObj.getControl('COMPANYID'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('COMPANYID'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['COMPANYID'] != 'undefined') {
		DLG1_DlgObj._buttons['COMPANYID'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'COMPANYID', flag: enable});}
}
DLG1_DlgObj.dialogWatches['readonly_COMPANYID'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var readOnly = false;
	if( (1 == 2) == true ) readOnly = true;
	else readOnly = false;	
	var eles = $cetp($n('V.R' + data.rowNumber + '.COMPANYID'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.COMPANYID')];
	var obj = DLG1_DlgObj.getControl('COMPANYID'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['COMPANYID'] != 'undefined') {
		DLG1_DlgObj._buttons['COMPANYID'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].readOnly = readOnly;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'readonly', control: 'COMPANYID', flag: readOnly});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_SAVING'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 0) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'SAVING'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'SAVING'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'saving', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_SLIDER1'] = {
		watch: ['SYNCINPROGRESS'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var SYNCINPROGRESS = $u.s.toNum(DLG1_DlgObj.getValue('SYNCINPROGRESS',data.rowNumber));
	var showHide = '';
	if( (SYNCINPROGRESS == '1') == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'SLIDER1'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'SLIDER1'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'Slider1', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['ENABLE_COMPANYNAME'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.COMPANYNAME'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.COMPANYNAME')];
	var pObj = DLG1_DlgObj.getControl('CompanyName'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('CompanyName'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['CompanyName'] != 'undefined') {
		DLG1_DlgObj._buttons['CompanyName'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'CompanyName', flag: enable});}
}
DLG1_DlgObj.dialogWatches['readonly_COMPANYNAME'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var readOnly = false;
	if( (1 == 2) == true ) readOnly = true;
	else readOnly = false;	
	var eles = $cetp($n('V.R' + data.rowNumber + '.COMPANYNAME'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.COMPANYNAME')];
	var obj = DLG1_DlgObj.getControl('CompanyName'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['CompanyName'] != 'undefined') {
		DLG1_DlgObj._buttons['CompanyName'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].readOnly = readOnly;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'readonly', control: 'CompanyName', flag: readOnly});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_30_1'] = {
		watch: ['SYNCINPROGRESS'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var SYNCINPROGRESS = $u.s.toNum(DLG1_DlgObj.getValue('SYNCINPROGRESS',data.rowNumber));
	var enable = (SYNCINPROGRESS == 0);
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_30_1'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_30_1')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_30_1'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_30_1'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_30_1'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_30_1'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_30_1', flag: enable});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_IMAGE_4'] = {
		watch: ['MESSLOW_'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var MESSLOW_ = $u.s.toNum(DLG1_DlgObj.getValue('MESSLOW_',data.rowNumber));
	var showHide = '';
	if( (MESSLOW_ != 0) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'IMAGE_4'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'IMAGE_4'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'IMAGE_4', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_MESSLOW_'] = {
		watch: ['MESSLOW_'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var MESSLOW_ = $u.s.toNum(DLG1_DlgObj.getValue('MESSLOW_',data.rowNumber));
	var showHide = '';
	if( (MESSLOW_ != 0) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'MESSLOW_'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'MESSLOW_'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'MessLow_', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_IMAGE_3'] = {
		watch: ['MESSMEDIUM_'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var MESSMEDIUM_ = $u.s.toNum(DLG1_DlgObj.getValue('MESSMEDIUM_',data.rowNumber));
	var showHide = '';
	if( (MESSMEDIUM_ != 0) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'IMAGE_3'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'IMAGE_3'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'IMAGE_3', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_MESSMEDIUM_'] = {
		watch: ['MESSMEDIUM_'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var MESSMEDIUM_ = $u.s.toNum(DLG1_DlgObj.getValue('MESSMEDIUM_',data.rowNumber));
	var showHide = '';
	if( (MESSMEDIUM_ != 0) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'MESSMEDIUM_'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'MESSMEDIUM_'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'MessMedium_', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_IMAGE_3_1'] = {
		watch: ['MESSHIGHT_'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var MESSHIGHT_ = $u.s.toNum(DLG1_DlgObj.getValue('MESSHIGHT_',data.rowNumber));
	var showHide = '';
	if( (MESSHIGHT_ != 0) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'IMAGE_3_1'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'IMAGE_3_1'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'IMAGE_3_1', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_MESSHIGHT_'] = {
		watch: ['MESSHIGHT_'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var MESSHIGHT_ = $u.s.toNum(DLG1_DlgObj.getValue('MESSHIGHT_',data.rowNumber));
	var showHide = '';
	if( (MESSHIGHT_ != 0) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'MESSHIGHT_'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'MESSHIGHT_'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'MessHight_', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_IMAGE_2'] = {
		watch: ['MESSALERT_'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var MESSALERT_ = $u.s.toNum(DLG1_DlgObj.getValue('MESSALERT_',data.rowNumber));
	var showHide = '';
	if( (MESSALERT_ != 0) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'IMAGE_2'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'IMAGE_2'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'IMAGE_2', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_MESSALERT_'] = {
		watch: ['MESSALERT_'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var MESSALERT_ = $u.s.toNum(DLG1_DlgObj.getValue('MESSALERT_',data.rowNumber));
	var showHide = '';
	if( (MESSALERT_ != 0) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'MESSALERT_'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'MESSALERT_'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'MessAlert_', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_CONTAINER_246'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( ((isvisitheaddirty()) || (isgeolocdirty())) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'CONTAINER_246'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'CONTAINER_246'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'CONTAINER_246', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_SLIDERSAVING'] = {
		watch: ['SAVING'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var SAVING = $u.s.toNum(DLG1_DlgObj.getValue('SAVING',data.rowNumber));
	var showHide = '';
	if( ((isvisitheaddirty()) && (SAVING == 1)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'SLIDERSAVING'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'SLIDERSAVING'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'SliderSaving', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_STATICTEXT_16'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (isvisitheaddirty() == true) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'STATICTEXT_16'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'STATICTEXT_16'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'STATICTEXT_16', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_STATICTEXT_2'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (isgeolocdirty() == true) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'STATICTEXT_2'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'STATICTEXT_2'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'STATICTEXT_2', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_VISITTYPE'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == '1') || (VSECURITY == '3')) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'VISITTYPE'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'VISITTYPE'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'VisitType', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_STATICTEXT_9'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == '1') || (VSECURITY == '3')) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'STATICTEXT_9'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'STATICTEXT_9'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'STATICTEXT_9', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_VISITOBJECTIVE'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == '1') || (VSECURITY == '3')) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'VISITOBJECTIVE'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'VISITOBJECTIVE'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'VisitObjective', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_STATICTEXT_10'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == '1') || (VSECURITY == '3')) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'STATICTEXT_10'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'STATICTEXT_10'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'STATICTEXT_10', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_SUPERVISOR'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( ((((VSECURITY == '1') || (VSECURITY == '3')) && (DLG1_DlgObj.getValueDisplay('VisitType') == 'Double Visit')) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'SUPERVISOR'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'SUPERVISOR'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'Supervisor', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_SPECIALREQUEST'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == '1') || (VSECURITY == '3')) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'SPECIALREQUEST'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'SPECIALREQUEST'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'SpecialRequest', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_COMENT'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == '1') || (VSECURITY == '3')) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'COMENT'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'COMENT'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'Coment', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_STATICTEXT_12'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == '1') || (VSECURITY == '3')) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'STATICTEXT_12'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'STATICTEXT_12'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'STATICTEXT_12', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BUTTON_9'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == '1') || (VSECURITY == '3')) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_9'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_9'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'BUTTON_9', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BUTTON_8'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == '1') || (VSECURITY == '3')) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_8'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_8'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'BUTTON_8', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BUTTON_11'] = {
		watch: ['VSECURITY'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var showHide = '';
	if( ((VSECURITY == 2) || (VSECURITY == 3)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_11'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_11'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'BUTTON_11', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BUTTON_7'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == '2') || (VSECURITY == '3')) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_7'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_7'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'BUTTON_7', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BUTTON_12'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == 2) || (VSECURITY == 3)) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_12'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_12'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'BUTTON_12', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BUTTON_13'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( ((((VSECURITY == 1) || (VSECURITY == 2)) || (VSECURITY == 3)) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_13'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_13'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'BUTTON_13', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BUTTON_16'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == 1) || (VSECURITY == 3)) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_16'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_16'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'BUTTON_16', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BUTTON_20'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( (((VSECURITY == 1) || (VSECURITY == 3)) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_20'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_20'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'BUTTON_20', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BUTTON_17'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( ((((VSECURITY == 1) || (VSECURITY == 2)) || (VSECURITY == 3)) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_17'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_17'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'BUTTON_17', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BUTTON_14'] = {
		watch: ['VSECURITY','PHONEORDER'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VSECURITY = DLG1_DlgObj.getValue('VSECURITY',data.rowNumber);
	if( A5.isBlank(VSECURITY)) VSECURITY= '';
	var PHONEORDER = $u.s.toNum(DLG1_DlgObj.getValue('PHONEORDER',data.rowNumber));
	var showHide = '';
	if( ((((VSECURITY == 1) || (VSECURITY == 2)) || (VSECURITY == 3)) && (PHONEORDER == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_14'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BUTTON_14'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'BUTTON_14', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['readonly_TOTAL_BEF_INV'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var readOnly = false;
	if( (1 == 2) == true ) readOnly = true;
	else readOnly = false;	
	var eles = $cetp($n('V.R' + data.rowNumber + '.TOTAL_BEF_INV'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.TOTAL_BEF_INV')];
	var obj = DLG1_DlgObj.getControl('total_bef_inv'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['total_bef_inv'] != 'undefined') {
		DLG1_DlgObj._buttons['total_bef_inv'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].readOnly = readOnly;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'readonly', control: 'total_bef_inv', flag: readOnly});}
}
DLG1_DlgObj.dialogWatches['readonly_TOTAL_VAT_INV'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var readOnly = false;
	if( (1 == 2) == true ) readOnly = true;
	else readOnly = false;	
	var eles = $cetp($n('V.R' + data.rowNumber + '.TOTAL_VAT_INV'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.TOTAL_VAT_INV')];
	var obj = DLG1_DlgObj.getControl('total_vat_inv'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['total_vat_inv'] != 'undefined') {
		DLG1_DlgObj._buttons['total_vat_inv'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].readOnly = readOnly;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'readonly', control: 'total_vat_inv', flag: readOnly});}
}
DLG1_DlgObj.dialogWatches['readonly_TOTAL_INV_WITH_VAT'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var readOnly = false;
	if( (1 == 2) == true ) readOnly = true;
	else readOnly = false;	
	var eles = $cetp($n('V.R' + data.rowNumber + '.TOTAL_INV_WITH_VAT'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.TOTAL_INV_WITH_VAT')];
	var obj = DLG1_DlgObj.getControl('total_inv_with_vat'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['total_inv_with_vat'] != 'undefined') {
		DLG1_DlgObj._buttons['total_inv_with_vat'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].readOnly = readOnly;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'readonly', control: 'total_inv_with_vat', flag: readOnly});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.list.LSTVISITHEAD.isDirty == true) && (dialog.listDetailView.LSTVISITHEAD.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVSAVE_LSTVISITHEAD'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTVISITHEAD.isDirty == true) && (dialog.listDetailView.LSTVISITHEAD.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVSAVE_LSTVISITHEAD'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVSAVE_LSTVISITHEAD')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVSAVE_LSTVISITHEAD'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVSAVE_LSTVISITHEAD'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVISITHEAD'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVISITHEAD'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVSAVE_LSTVISITHEAD', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVNEWRECORD_LSTVISITHEAD'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTVISITHEAD.isDirty == false) && (dialog.listDetailView.LSTVISITHEAD.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVNEWRECORD_LSTVISITHEAD'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVNEWRECORD_LSTVISITHEAD')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVNEWRECORD_LSTVISITHEAD'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVNEWRECORD_LSTVISITHEAD'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTVISITHEAD'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTVISITHEAD'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVNEWRECORD_LSTVISITHEAD', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVDELETERECORD_LSTVISITHEAD'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTVISITHEAD.mode != 'search') && (dialog.listRow.LSTVISITHEAD.isRowSelected == true));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVDELETERECORD_LSTVISITHEAD'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVDELETERECORD_LSTVISITHEAD')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVDELETERECORD_LSTVISITHEAD'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVDELETERECORD_LSTVISITHEAD'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTVISITHEAD'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTVISITHEAD'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVDELETERECORD_LSTVISITHEAD', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVRESET_LSTVISITHEAD'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTVISITHEAD.isDirty == true) && (dialog.listDetailView.LSTVISITHEAD.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVRESET_LSTVISITHEAD'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVRESET_LSTVISITHEAD')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVRESET_LSTVISITHEAD'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVRESET_LSTVISITHEAD'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVRESET_LSTVISITHEAD'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVRESET_LSTVISITHEAD'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVRESET_LSTVISITHEAD', flag: enable});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_PRICELIST'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'PRICELIST'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'PRICELIST'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'pricelist', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_TMPPOIID'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'TMPPOIID'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'TMPPOIID'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'tmppoiid', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_POIID'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'POIID'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'POIID'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'poiid', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['ENABLE_POINAME'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.POINAME'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.POINAME')];
	var pObj = DLG1_DlgObj.getControl('poiname'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('poiname'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['poiname'] != 'undefined') {
		DLG1_DlgObj._buttons['poiname'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'poiname', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_POITYPE'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.POITYPE'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.POITYPE')];
	var pObj = DLG1_DlgObj.getControl('poitype'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('poitype'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['poitype'] != 'undefined') {
		DLG1_DlgObj._buttons['poitype'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'poitype', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BESTTIME'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.BESTTIME'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BESTTIME')];
	var pObj = DLG1_DlgObj.getControl('besttime'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('besttime'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['besttime'] != 'undefined') {
		DLG1_DlgObj._buttons['besttime'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'besttime', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_REGION'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.REGION'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.REGION')];
	var pObj = DLG1_DlgObj.getControl('region'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('region'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['region'] != 'undefined') {
		DLG1_DlgObj._buttons['region'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'region', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_COMMENT'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.COMMENT'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.COMMENT')];
	var pObj = DLG1_DlgObj.getControl('comment'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('comment'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['comment'] != 'undefined') {
		DLG1_DlgObj._buttons['comment'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'comment', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_PHONENO'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.PHONENO'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.PHONENO')];
	var pObj = DLG1_DlgObj.getControl('phoneno'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('phoneno'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['phoneno'] != 'undefined') {
		DLG1_DlgObj._buttons['phoneno'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'phoneno', flag: enable});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_ROUTE'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'ROUTE'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'ROUTE'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'route', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_LATITUDE'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'LATITUDE'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'LATITUDE'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'latitude', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_LONGITUDE'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'LONGITUDE'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'LONGITUDE'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'longitude', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['ENABLE_POSACCURACY'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.POSACCURACY'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.POSACCURACY')];
	var pObj = DLG1_DlgObj.getControl('posaccuracy'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('posaccuracy'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['posaccuracy'] != 'undefined') {
		DLG1_DlgObj._buttons['posaccuracy'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'posaccuracy', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_POSDISTANCE'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.POSDISTANCE'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.POSDISTANCE')];
	var pObj = DLG1_DlgObj.getControl('posDistance'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('posDistance'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['posDistance'] != 'undefined') {
		DLG1_DlgObj._buttons['posDistance'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'posDistance', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_MYPIN'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var enable = (1 == 2);
	var eles = $cetp($n('V.R' + data.rowNumber + '.MYPIN'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.MYPIN')];
	var pObj = DLG1_DlgObj.getControl('mypin'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('mypin'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['mypin'] != 'undefined') {
		DLG1_DlgObj._buttons['mypin'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'mypin', flag: enable});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_REASON'] = {
		watch: ['VACATION_ACTIVITY'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var VACATION_ACTIVITY = $u.s.toNum(DLG1_DlgObj.getValue('VACATION_ACTIVITY',data.rowNumber));
	var showHide = '';
	if( (VACATION_ACTIVITY == 1) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'REASON'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'REASON'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'reason', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVSAVE_LSTVACATION'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTVACATION.isDirty == true) && (dialog.listDetailView.LSTVACATION.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVSAVE_LSTVACATION'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVSAVE_LSTVACATION')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVSAVE_LSTVACATION'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVSAVE_LSTVACATION'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVACATION'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVACATION'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVSAVE_LSTVACATION', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVDELETERECORD_LSTSAMPLES'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTSAMPLES.mode != 'search') && (dialog.listRow.LSTSAMPLES.isRowSelected == true));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVDELETERECORD_LSTSAMPLES'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVDELETERECORD_LSTSAMPLES')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVDELETERECORD_LSTSAMPLES'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVDELETERECORD_LSTSAMPLES'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTSAMPLES'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTSAMPLES'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVDELETERECORD_LSTSAMPLES', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVNEWRECORD_LSTRECEIPT'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTRECEIPT.isDirty == false) && (dialog.listDetailView.LSTRECEIPT.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVNEWRECORD_LSTRECEIPT'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVNEWRECORD_LSTRECEIPT')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVNEWRECORD_LSTRECEIPT'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVNEWRECORD_LSTRECEIPT'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTRECEIPT'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTRECEIPT'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVNEWRECORD_LSTRECEIPT', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVDELETERECORD_LSTRECEIPT'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTRECEIPT.mode != 'search') && (dialog.listRow.LSTRECEIPT.isRowSelected == true));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVDELETERECORD_LSTRECEIPT'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVDELETERECORD_LSTRECEIPT')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVDELETERECORD_LSTRECEIPT'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVDELETERECORD_LSTRECEIPT'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTRECEIPT'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTRECEIPT'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVDELETERECORD_LSTRECEIPT', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVSAVE_LSTVISITNOTES'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTVISITNOTES.isDirty == true) && (dialog.listDetailView.LSTVISITNOTES.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVSAVE_LSTVISITNOTES'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVSAVE_LSTVISITNOTES')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVSAVE_LSTVISITNOTES'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVSAVE_LSTVISITNOTES'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVISITNOTES'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVISITNOTES'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVSAVE_LSTVISITNOTES', flag: enable});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_LSTITEMS_QTY_PAC'] = {
		watch: ['FLAGADDITEM'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var FLAGADDITEM = $u.s.toNum(DLG1_DlgObj.getValue('FLAGADDITEM',data.rowNumber));
	var showHide = '';
	if( (FLAGADDITEM != 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_QTY_PAC'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_QTY_PAC'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'lstitems_qty_pac', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_LSTITEMS_BONUSQ_PAC'] = {
		watch: ['FLAGADDITEM','HIDEBONUS'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var FLAGADDITEM = $u.s.toNum(DLG1_DlgObj.getValue('FLAGADDITEM',data.rowNumber));
	var HIDEBONUS = $u.s.toNum(DLG1_DlgObj.getValue('HIDEBONUS',data.rowNumber));
	var showHide = '';
	if( (((FLAGADDITEM != 2) && (FLAGADDITEM != 1)) && (HIDEBONUS == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_BONUSQ_PAC'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_BONUSQ_PAC'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'lstitems_bonusq_pac', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['readonly_LSTITEMS_BONUSQ_PAC'] = {
		watch: ['ALLOWBONUS'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var ALLOWBONUS = $u.s.toNum(DLG1_DlgObj.getValue('ALLOWBONUS',data.rowNumber));
	var readOnly = false;
	if( (ALLOWBONUS == 1) == true ) readOnly = true;
	else readOnly = false;	
	var eles = $cetp($n('V.R' + data.rowNumber + '.LSTITEMS_BONUSQ_PAC'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.LSTITEMS_BONUSQ_PAC')];
	var obj = DLG1_DlgObj.getControl('lstitems_bonusq_pac'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['lstitems_bonusq_pac'] != 'undefined') {
		DLG1_DlgObj._buttons['lstitems_bonusq_pac'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].readOnly = readOnly;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'readonly', control: 'lstitems_bonusq_pac', flag: readOnly});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_DROPBONUSUNIT'] = {
		watch: ['FLAGADDITEM','HIDEBONUS'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var FLAGADDITEM = $u.s.toNum(DLG1_DlgObj.getValue('FLAGADDITEM',data.rowNumber));
	var HIDEBONUS = $u.s.toNum(DLG1_DlgObj.getValue('HIDEBONUS',data.rowNumber));
	var showHide = '';
	if( (((FLAGADDITEM != 2) && (FLAGADDITEM != 1)) && (HIDEBONUS == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'DROPBONUSUNIT'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'DROPBONUSUNIT'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'dropbonusunit', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_LSTITEMS_SELLSIZE'] = {
		watch: ['FLAGADDITEM'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var FLAGADDITEM = $u.s.toNum(DLG1_DlgObj.getValue('FLAGADDITEM',data.rowNumber));
	var showHide = '';
	if( ((FLAGADDITEM != 2) && (FLAGADDITEM != 1)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_SELLSIZE'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_SELLSIZE'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'lstitems_sellsize', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['readonly_LSTITEMS_SELLSIZE'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var readOnly = false;
	if( (1 == 1) == true ) readOnly = true;
	else readOnly = false;	
	var eles = $cetp($n('V.R' + data.rowNumber + '.LSTITEMS_SELLSIZE'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.LSTITEMS_SELLSIZE')];
	var obj = DLG1_DlgObj.getControl('lstitems_sellsize'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['lstitems_sellsize'] != 'undefined') {
		DLG1_DlgObj._buttons['lstitems_sellsize'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].readOnly = readOnly;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'readonly', control: 'lstitems_sellsize', flag: readOnly});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_LSTITEMS_BONUSSIZE'] = {
		watch: ['FLAGADDITEM','HIDEBONUS'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var FLAGADDITEM = $u.s.toNum(DLG1_DlgObj.getValue('FLAGADDITEM',data.rowNumber));
	var HIDEBONUS = $u.s.toNum(DLG1_DlgObj.getValue('HIDEBONUS',data.rowNumber));
	var showHide = '';
	if( (((FLAGADDITEM != 2) && (FLAGADDITEM != 1)) && (HIDEBONUS == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_BONUSSIZE'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_BONUSSIZE'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'lstitems_bonussize', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['readonly_LSTITEMS_BONUSSIZE'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var readOnly = false;
	if( (1 == 1) == true ) readOnly = true;
	else readOnly = false;	
	var eles = $cetp($n('V.R' + data.rowNumber + '.LSTITEMS_BONUSSIZE'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.LSTITEMS_BONUSSIZE')];
	var obj = DLG1_DlgObj.getControl('lstitems_bonussize'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['lstitems_bonussize'] != 'undefined') {
		DLG1_DlgObj._buttons['lstitems_bonussize'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].readOnly = readOnly;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'readonly', control: 'lstitems_bonussize', flag: readOnly});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVSAVE_LSTITEMS1'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTITEMS.isDirty == true) && (dialog.listDetailView.LSTITEMS.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVSAVE_LSTITEMS1'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVSAVE_LSTITEMS1')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVSAVE_LSTITEMS1'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVSAVE_LSTITEMS1'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTITEMS1'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTITEMS1'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVSAVE_LSTITEMS1', flag: enable});}
}
DLG1_DlgObj.dialogWatches['CALC_QTY'] = {
		watch: ['LSTITEMS_QTY_PAC','LSTITEMS_SELLSIZE'],
		variables: [],
		updateColumn: 'QTY',
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var LSTITEMS_QTY_PAC = $u.s.toNum(DLG1_DlgObj.getValue('LSTITEMS_QTY_PAC',data.rowNumber));
	var LSTITEMS_SELLSIZE = $u.s.toNum(DLG1_DlgObj.getValue('LSTITEMS_SELLSIZE',data.rowNumber));
	DLG1_DlgObj.setValue('QTY','' +   ($u.n.toStr(((LSTITEMS_QTY_PAC)*(LSTITEMS_SELLSIZE)))),!data.external);;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'calculatedField', control: 'qty', flag: true});}
}
DLG1_DlgObj.dialogWatches['CALC_BONUS'] = {
		watch: ['LSTITEMS_BONUSSIZE','LSTITEMS_BONUSQ_PAC'],
		variables: [],
		updateColumn: 'BONUS',
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var LSTITEMS_BONUSSIZE = $u.s.toNum(DLG1_DlgObj.getValue('LSTITEMS_BONUSSIZE',data.rowNumber));
	var LSTITEMS_BONUSQ_PAC = $u.s.toNum(DLG1_DlgObj.getValue('LSTITEMS_BONUSQ_PAC',data.rowNumber));
	DLG1_DlgObj.setValue('BONUS','' +   (((LSTITEMS_BONUSSIZE)*(LSTITEMS_BONUSQ_PAC))),!data.external);;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'calculatedField', control: 'bonus', flag: true});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BONUS'] = {
		watch: ['FLAGADDITEM','HIDEBONUS'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var FLAGADDITEM = $u.s.toNum(DLG1_DlgObj.getValue('FLAGADDITEM',data.rowNumber));
	var HIDEBONUS = $u.s.toNum(DLG1_DlgObj.getValue('HIDEBONUS',data.rowNumber));
	var showHide = '';
	if( (((FLAGADDITEM != 2) && (FLAGADDITEM != 1)) && (HIDEBONUS == 0)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BONUS'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BONUS'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'bonus', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_LSTITEMS_UNITPR'] = {
		watch: ['FLAGADDITEM'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var FLAGADDITEM = $u.s.toNum(DLG1_DlgObj.getValue('FLAGADDITEM',data.rowNumber));
	var showHide = '';
	if( ((FLAGADDITEM != 2) && (FLAGADDITEM != 1)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_UNITPR'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_UNITPR'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'lstitems_unitpr', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['readonly_LSTITEMS_UNITPR'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var readOnly = false;
	if( (1 == 1) == true ) readOnly = true;
	else readOnly = false;	
	var eles = $cetp($n('V.R' + data.rowNumber + '.LSTITEMS_UNITPR'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.LSTITEMS_UNITPR')];
	var obj = DLG1_DlgObj.getControl('lstitems_unitpr'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['lstitems_unitpr'] != 'undefined') {
		DLG1_DlgObj._buttons['lstitems_unitpr'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].readOnly = readOnly;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'readonly', control: 'lstitems_unitpr', flag: readOnly});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_LSTITEMS_DISCOUNT'] = {
		watch: ['FLAGADDITEM'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var FLAGADDITEM = $u.s.toNum(DLG1_DlgObj.getValue('FLAGADDITEM',data.rowNumber));
	var showHide = '';
	if( ((FLAGADDITEM != 2) && (FLAGADDITEM != 1)) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_DISCOUNT'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'LSTITEMS_DISCOUNT'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'lstitems_discount', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['readonly_LSTITEMS_DISCOUNT'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var readOnly = false;
	if( (1 == 1) == true ) readOnly = true;
	else readOnly = false;	
	var eles = $cetp($n('V.R' + data.rowNumber + '.LSTITEMS_DISCOUNT'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.LSTITEMS_DISCOUNT')];
	var obj = DLG1_DlgObj.getControl('lstitems_discount'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['lstitems_discount'] != 'undefined') {
		DLG1_DlgObj._buttons['lstitems_discount'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].readOnly = readOnly;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'readonly', control: 'lstitems_discount', flag: readOnly});}
}
DLG1_DlgObj.dialogWatches['CALC_TOTAL_PRICE'] = {
		watch: ['QTY','LSTITEMS_UNITPR','LSTITEMS_DISCOUNT','RETURNQTY','RETPRICE'],
		variables: [],
		updateColumn: 'TOTAL_PRICE',
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var QTY = $u.s.toNum(DLG1_DlgObj.getValue('QTY',data.rowNumber));
	var LSTITEMS_UNITPR = $u.s.toNum(DLG1_DlgObj.getValue('LSTITEMS_UNITPR',data.rowNumber));
	var LSTITEMS_DISCOUNT = $u.s.toNum(DLG1_DlgObj.getValue('LSTITEMS_DISCOUNT',data.rowNumber));
	var RETURNQTY = $u.s.toNum(DLG1_DlgObj.getValue('RETURNQTY',data.rowNumber));
	var RETPRICE = $u.s.toNum(DLG1_DlgObj.getValue('RETPRICE',data.rowNumber));
	DLG1_DlgObj.setValue('TOTAL_PRICE','' +   ($u.n.toStr((((((QTY)*(LSTITEMS_UNITPR)))*((((100-LSTITEMS_DISCOUNT))/(100))))+((RETURNQTY)*(RETPRICE))))),!data.external);;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'calculatedField', control: 'Total_Price', flag: true});}
}
DLG1_DlgObj.dialogWatches['readonly_TOTAL_PRICE'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var readOnly = false;
	if( (1 == 2) == true ) readOnly = true;
	else readOnly = false;	
	var eles = $cetp($n('V.R' + data.rowNumber + '.TOTAL_PRICE'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.TOTAL_PRICE')];
	var obj = DLG1_DlgObj.getControl('Total_Price'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['Total_Price'] != 'undefined') {
		DLG1_DlgObj._buttons['Total_Price'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].readOnly = readOnly;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'readonly', control: 'Total_Price', flag: readOnly});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_SMOQ'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'SMOQ'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'SMOQ'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'smoq', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_BMOQ'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'BMOQ'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'BMOQ'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'bmoq', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_LITEITEMS_DISCUSSEDTYPE'] = {
		watch: ['FLAGADDITEM'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var FLAGADDITEM = $u.s.toNum(DLG1_DlgObj.getValue('FLAGADDITEM',data.rowNumber));
	var showHide = '';
	if( (FLAGADDITEM == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'LITEITEMS_DISCUSSEDTYPE'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'LITEITEMS_DISCUSSEDTYPE'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'liteitems_DiscussedType', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_LISTITEMS_DISCUSSEDCOMENT'] = {
		watch: ['FLAGADDITEM'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var FLAGADDITEM = $u.s.toNum(DLG1_DlgObj.getValue('FLAGADDITEM',data.rowNumber));
	var showHide = '';
	if( (FLAGADDITEM == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'LISTITEMS_DISCUSSEDCOMENT'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'LISTITEMS_DISCUSSEDCOMENT'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'listitems_DiscussedComent', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_CONTAINER_247'] = {
		watch: ['RETURNABLE'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var RETURNABLE = $u.s.toNum(DLG1_DlgObj.getValue('RETURNABLE',data.rowNumber));
	var showHide = '';
	if( (RETURNABLE == 1) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'CONTAINER_247'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'CONTAINER_247'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'CONTAINER_247', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_TMPRET'] = {
		watch: ['RETURNABLE'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var RETURNABLE = $u.s.toNum(DLG1_DlgObj.getValue('RETURNABLE',data.rowNumber));
	var showHide = '';
	if( (RETURNABLE == 1) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'TMPRET'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'TMPRET'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'tmpret', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_RETURNITEM'] = {
		watch: ['RETURNABLE'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var RETURNABLE = $u.s.toNum(DLG1_DlgObj.getValue('RETURNABLE',data.rowNumber));
	var showHide = '';
	if( (RETURNABLE == 1) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'RETURNITEM'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'RETURNITEM'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'returnitem', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_RETURNQTY'] = {
		watch: ['RETURNABLE'],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var RETURNABLE = $u.s.toNum(DLG1_DlgObj.getValue('RETURNABLE',data.rowNumber));
	var showHide = '';
	if( (RETURNABLE == 1) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'RETURNQTY'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'RETURNQTY'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'returnqty', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_RETURNABLE'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'RETURNABLE'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'RETURNABLE'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'returnable', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['SHOWHIDE_FLAGVIEWBONUS'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};;
	;
	var showHide = '';
	if( (1 == 2) == true ) showHide = '';
	else showHide = 'none';	
	if(showHide == 'none') {	
		DLG1_DlgObj.setControlDisplay(''+'FLAGVIEWBONUS'+'',false,'display');
	} else {
		DLG1_DlgObj.setControlDisplay(''+'FLAGVIEWBONUS'+'',true,'display');
	}
	;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'show/hide', control: 'flagviewbonus', flag: $if(showHide == '',true,false)});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVNEWRECORD_LSTVACATION'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTVACATION.isDirty == false) && (dialog.listDetailView.LSTVACATION.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVNEWRECORD_LSTVACATION'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVNEWRECORD_LSTVACATION')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVNEWRECORD_LSTVACATION'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVNEWRECORD_LSTVACATION'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTVACATION'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTVACATION'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVNEWRECORD_LSTVACATION', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVDELETERECORD_LSTVACATION'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTVACATION.mode != 'search') && (dialog.listRow.LSTVACATION.isRowSelected == true));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVDELETERECORD_LSTVACATION'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVDELETERECORD_LSTVACATION')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVDELETERECORD_LSTVACATION'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVDELETERECORD_LSTVACATION'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTVACATION'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTVACATION'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVDELETERECORD_LSTVACATION', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVRESET_LSTVACATION'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTVACATION.isDirty == true) && (dialog.listDetailView.LSTVACATION.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVRESET_LSTVACATION'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVRESET_LSTVACATION')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVRESET_LSTVACATION'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVRESET_LSTVACATION'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVRESET_LSTVACATION'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVRESET_LSTVACATION'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVRESET_LSTVACATION', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVSYNCHRONIZE_LSTVACATION'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.list.LSTVACATION.isDirty == true) && (dialog.listDetailView.LSTVACATION.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVSYNCHRONIZE_LSTVACATION'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVSYNCHRONIZE_LSTVACATION')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVSYNCHRONIZE_LSTVACATION'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVSYNCHRONIZE_LSTVACATION'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVSYNCHRONIZE_LSTVACATION'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVSYNCHRONIZE_LSTVACATION'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVSYNCHRONIZE_LSTVACATION', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_LISTSEARCHCLEAR_LSTPOI'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = (dialog.listDetailView.LSTPOI.isDirty == false);
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_LISTSEARCHCLEAR_LSTPOI'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_LISTSEARCHCLEAR_LSTPOI')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_LISTSEARCHCLEAR_LSTPOI'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_LISTSEARCHCLEAR_LSTPOI'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_LISTSEARCHCLEAR_LSTPOI'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_LISTSEARCHCLEAR_LSTPOI'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_LISTSEARCHCLEAR_LSTPOI', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVNEWRECORD_LSTPOI1'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTPOI.isDirty == false) && (dialog.listDetailView.LSTPOI.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVNEWRECORD_LSTPOI1'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVNEWRECORD_LSTPOI1')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVNEWRECORD_LSTPOI1'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVNEWRECORD_LSTPOI1'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTPOI1'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTPOI1'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVNEWRECORD_LSTPOI1', flag: enable});}
}
DLG1_DlgObj.dialogWatches['ENABLE_BUTTON_DVSAVE_LSTPOI'] = {
		watch: [],
		variables: [],
		onChange: function(data) {
	var dialog = {};
	var summary = {};
	DLG1_DlgObj._getDialogVariables(dialog,summary,data);
	;
	;
	var enable = ((dialog.listDetailView.LSTPOI.isDirty == true) && (dialog.listDetailView.LSTPOI.mode != 'search'));
	var eles = $cetp($n('V.R' + data.rowNumber + '.BUTTON_DVSAVE_LSTPOI'),$('DLG1.R'+data.rowNumber));
	if(typeof eles.length == 'undefined' || eles.length == 0) eles = [$('DLG1.'+'V.R' + data.rowNumber + '.BUTTON_DVSAVE_LSTPOI')];
	var pObj = DLG1_DlgObj.getControl('BUTTON_DVSAVE_LSTPOI'); if(pObj) { if(typeof pObj.setDisabled != 'undefined') {  pObj.setDisabled(!enable,eles); return true;  } }
	var obj = DLG1_DlgObj.getControl('BUTTON_DVSAVE_LSTPOI'); if(obj && typeof readOnly != 'undefined') {obj.readOnly = readOnly}
	if(typeof DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTPOI'] != 'undefined') {
		DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTPOI'].setDisabled(!enable,eles);
	} else {
		for(var i=0; i<eles.length;i++) eles[i].disabled = !enable;
	}
	;;
	DLG1_DlgObj._executeEvent('onWatchEvent',{type: 'enable', control: 'BUTTON_DVSAVE_LSTPOI', flag: enable});}
}
var ele = $('DLG1.V.R1.VISITTYPE');
/*
$e.add(ele,'focus',function(){
	var pEle = this.parentNode;
	var cEle = $(this.id +'.CONTAINER');
	if (cEle) pEle = cEle.parentNode;
	A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
});
$e.add(ele,'blur',function(){
	if(this.value == '') {
		var pEle = this.parentNode;
		var cEle = $(this.id +'.CONTAINER');
		if (cEle) pEle = cEle.parentNode;
		A5.u.element.cls(pEle,'-=A5FloatingLabelFloat');
	}
});
$e.add(ele,'change',function(){
	var pEle = this.parentNode;
	var cEle = $(this.id +'.CONTAINER');
	if (cEle) pEle = cEle.parentNode;
	if(this.value == '') A5.u.element.cls(pEle,'-=A5FloatingLabelFloat');
	else A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
});
if(ele.value != '') {
	var pEle = this.parentNode;
	var cEle = $(this.id +'.CONTAINER');
	if (cEle) pEle = cEle.parentNode;
	A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
}
*/
if(!DLG1_DlgObj._floatingLabels) { 
	DLG1_DlgObj._floatingLabels = {};
}
DLG1_DlgObj._floatingLabels[ele.id] = function(id){
	var ele = $(id);
	if(!ele) return;
	var pEle = ele.parentNode;
	var cEle = $(id +'.CONTAINER');
	if(cEle) pEle = cEle.parentNode;
	if(ele.value == '' && document.activeElement != ele) A5.u.element.cls(pEle,'-=A5FloatingLabelFloat');
	else A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
};
$e.add(ele,'focus',function(){
	DLG1_DlgObj._floatingLabels[this.id](this.id);
});
$e.add(ele,'blur',function(){
	DLG1_DlgObj._floatingLabels[this.id](this.id);
});
$e.add(ele,'change',function(){
	DLG1_DlgObj._floatingLabels[this.id](this.id);
});
DLG1_DlgObj._floatingLabels[ele.id](ele.id);
var ele = $('DLG1.V.R1.VISITOBJECTIVE');
/*
$e.add(ele,'focus',function(){
	var pEle = this.parentNode;
	var cEle = $(this.id +'.CONTAINER');
	if (cEle) pEle = cEle.parentNode;
	A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
});
$e.add(ele,'blur',function(){
	if(this.value == '') {
		var pEle = this.parentNode;
		var cEle = $(this.id +'.CONTAINER');
		if (cEle) pEle = cEle.parentNode;
		A5.u.element.cls(pEle,'-=A5FloatingLabelFloat');
	}
});
$e.add(ele,'change',function(){
	var pEle = this.parentNode;
	var cEle = $(this.id +'.CONTAINER');
	if (cEle) pEle = cEle.parentNode;
	if(this.value == '') A5.u.element.cls(pEle,'-=A5FloatingLabelFloat');
	else A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
});
if(ele.value != '') {
	var pEle = this.parentNode;
	var cEle = $(this.id +'.CONTAINER');
	if (cEle) pEle = cEle.parentNode;
	A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
}
*/
if(!DLG1_DlgObj._floatingLabels) { 
	DLG1_DlgObj._floatingLabels = {};
}
DLG1_DlgObj._floatingLabels[ele.id] = function(id){
	var ele = $(id);
	if(!ele) return;
	var pEle = ele.parentNode;
	var cEle = $(id +'.CONTAINER');
	if(cEle) pEle = cEle.parentNode;
	if(ele.value == '' && document.activeElement != ele) A5.u.element.cls(pEle,'-=A5FloatingLabelFloat');
	else A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
};
$e.add(ele,'focus',function(){
	DLG1_DlgObj._floatingLabels[this.id](this.id);
});
$e.add(ele,'blur',function(){
	DLG1_DlgObj._floatingLabels[this.id](this.id);
});
$e.add(ele,'change',function(){
	DLG1_DlgObj._floatingLabels[this.id](this.id);
});
DLG1_DlgObj._floatingLabels[ele.id](ele.id);
var ele = $('DLG1.V.R1.SUPERVISOR');
/*
$e.add(ele,'focus',function(){
	var pEle = this.parentNode;
	var cEle = $(this.id +'.CONTAINER');
	if (cEle) pEle = cEle.parentNode;
	A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
});
$e.add(ele,'blur',function(){
	if(this.value == '') {
		var pEle = this.parentNode;
		var cEle = $(this.id +'.CONTAINER');
		if (cEle) pEle = cEle.parentNode;
		A5.u.element.cls(pEle,'-=A5FloatingLabelFloat');
	}
});
$e.add(ele,'change',function(){
	var pEle = this.parentNode;
	var cEle = $(this.id +'.CONTAINER');
	if (cEle) pEle = cEle.parentNode;
	if(this.value == '') A5.u.element.cls(pEle,'-=A5FloatingLabelFloat');
	else A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
});
if(ele.value != '') {
	var pEle = this.parentNode;
	var cEle = $(this.id +'.CONTAINER');
	if (cEle) pEle = cEle.parentNode;
	A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
}
*/
if(!DLG1_DlgObj._floatingLabels) { 
	DLG1_DlgObj._floatingLabels = {};
}
DLG1_DlgObj._floatingLabels[ele.id] = function(id){
	var ele = $(id);
	if(!ele) return;
	var pEle = ele.parentNode;
	var cEle = $(id +'.CONTAINER');
	if(cEle) pEle = cEle.parentNode;
	if(ele.value == '' && document.activeElement != ele) A5.u.element.cls(pEle,'-=A5FloatingLabelFloat');
	else A5.u.element.cls(pEle,'+=A5FloatingLabelFloat');
};
$e.add(ele,'focus',function(){
	DLG1_DlgObj._floatingLabels[this.id](this.id);
});
$e.add(ele,'blur',function(){
	DLG1_DlgObj._floatingLabels[this.id](this.id);
});
$e.add(ele,'change',function(){
	DLG1_DlgObj._floatingLabels[this.id](this.id);
});
DLG1_DlgObj._floatingLabels[ele.id](ele.id);
DLG1_DlgObj._functions.imageCapture_b7103bdc9ac94582b275d5b88f05cf2d = function(eleObj){
var options = {
	"storeEXIFInfo": false,
	"controlName": "imageblob",
	"createThumbnail": false,
	"maxImageSizePhoneGap": "1000000000",
	"maxImageSizeHTML5": "100000",
	"resizeImageHTML5": true,
	"resizePolicyHTML5": "Always",
	"imageCompressionHTML5": ".25",
	"imageQualityPhonegap": "50",
	"maxImageHeight": "150",
	"maxImageWidth": "150",
	"allowPictureEditing": false,
	"saveToPhotoAlbum": false,
	"phonegapMoveFileToPermanentStorage": false,
	"phonegapFileSystemType": "private",
	"phonegapPermanentStorageFolder": "__AAFiles",
	"selectType": "Pictures",
	"promptImageSource": false,
	"prompttext": "Image library,Camera",
	"android14mode": "Camera",
	"captureDataMode": "base64",
	"pictureSourceVal": "1",
	"onCaptureJavascript": function(e) { 
},
	"onBeforeCaptureJavascript": function(e) { 
},
	"onCaptureCancel": function(e) { 
},
	"imageSelectionCanceledMessage": "Image Selection Canceled",
	"imageSelectionCanceledButton": "Done",
	"cameraCanceledMessage": "Camera Action Canceled",
	"cameraCanceledButton": "Done",
	"captureMethod": "phonegappreferred",
	"listName": "LSTVISITNOTES",
	"componentAlias": "DLG1",
	"boundFieldName": "imageblob"
};
DLG1_DlgObj.detailViewImageCapture(options);
}
DLG1_DlgObj.setStateInfo({
	"__dialogGuid": "243b85e3-f1be-453b-82ef-bc82c8108ab6",
	"argumentsBoundToCotrols": "MMEDREPID|Numeric={textbox3}\r\nPOIDID|Numeric={poiid}\r\nMPOIID|Numeric={poiid}\r\nMDATE|Date={Date}\r\nLOADTYPE|Numeric={TmpType}\r\nMCOMPID|Numeric={COMPANYID}\r\nSYNCINPROGRESS|Numeric={syncinprogress}\r\nMREPID|Numeric={textbox3}\r\nMTDATE|Date={DISPLAYDATE}\r\nSHOWALLDAYINPLAN|Numeric={viewalldaysinplan}\r\nMREPID_1|Numeric={repid_1}\r\nMMEDREPNAME|Character={medrepname}\r\nMREGIONDESC|Character={Region1}\r\nMCOMPNAME|Character={CompanyName}\r\nMHIDEBONUS|Numeric={hidebonus}\r\n",
	"__sgr": "",
	"__dtfmt": "dd/MM/yyyy 0h:0m",
	"__tfmt": ""
});//ssi3;
DLG1_DlgObj._cascadingControls = [];
DLG1_DlgObj._cascadingControlsChildren = [];
A5.msgBox.theme = 'Alpha-Magenta';
A5.msgBox.buttonWidth = '1in';
DLG1_DlgObj._defaultWindowTitleDirection = 'ltr';
DLG1_DlgObj._controlContainers = {}
DLG1_DlgObj._panelCardControls = {
LANG:'SIGNIN_PANELCARD',
REPID:'SIGNIN_PANELCARD',
MEDREP:'SIGNIN_PANELCARD',
REPID_1:'SIGNIN_PANELCARD',
MEDREP_1:'SIGNIN_PANELCARD',
DATE:'SIGNIN_PANELCARD',
PASSWORD:'SIGNIN_PANELCARD',
TEXTBOX3:'SIGNIN_PANELCARD',
PASSOK:'SIGNIN_PANELCARD',
VPASSWORD:'SIGNIN_PANELCARD',
VSECURITY:'SIGNIN_PANELCARD',
SYNCINPROGRESS:'SIGNIN_PANELCARD',
FAILEDSYNC:'SIGNIN_PANELCARD',
MEDREPCODE:'SIGNIN_PANELCARD',
MEDREPNAME:'SIGNIN_PANELCARD',
AUTOSAVEINV:'SIGNIN_PANELCARD',
HIDEBONUS:'SIGNIN_PANELCARD',
COMPANYID:'SIGNIN_PANELCARD',
SAVING:'SIGNIN_PANELCARD',
CHANGEPASS:'SIGNIN_PANELCARD',
NEWPASSWORD:'SIGNIN_PANELCARD',
SLIDER1:'SIGNIN_PANELCARD',
COMPANYCODE:'PANELCARD_SETTING',
COMPANYNAME:'PANELCARD_SETTING',
MESSLOW_:'PANELCARD_MENU',
MESSMEDIUM_:'PANELCARD_MENU',
MESSHIGHT_:'PANELCARD_MENU',
MESSALERT_:'PANELCARD_MENU',
SLIDERSAVING:'PANELCARD_MENU',
LIST2:'PANELCARD_MENU',
LSTROUTES:'PANELCARD_2',
SEARCH_OFFROUTE:'PANELCARD_16',
LSTOFFROUTE:'PANELCARD_16',
VISITTYPE:'PANELCARD_4',
VISITOBJECTIVE:'PANELCARD_4',
SUPERVISOR:'PANELCARD_4',
SPECIALREQUEST:'PANELCARD_4',
COMENT:'PANELCARD_4',
TEST1:'PANELCARD_5',
TEST2:'PANELCARD_5',
LSTVISITHEAD:'PANELCARD_5',
DEVLAT:'PANELCARD_6',
DEVLONG:'PANELCARD_6',
MAP1:'PANELCARD_6',
DROPGROUP:'PANELCARD_7',
DROPSUBGROUP:'PANELCARD_7',
TXTSEARCHDESC:'PANELCARD_7',
SUBGROUPARRAY:'PANELCARD_7',
TOTAL_BEF_ORD:'PANELCARD_7',
TOTAL_VAT_ORDER:'PANELCARD_7',
TOTAL_ORDER_WITH_VAT:'PANELCARD_7',
TOTAL_BEF_INV:'PANELCARD_7',
TOTAL_VAT_INV:'PANELCARD_7',
TOTAL_INV_WITH_VAT:'PANELCARD_7',
PHONEORDER:'PANELCARD_7',
ALLOWEDDISTANCE:'PANELCARD_7',
TXTPOILAT:'PANELCARD_7',
TXTPOILONG:'PANELCARD_7',
VIEWALLDAYSINPLAN:'PANELCARD_7',
WH1:'PANELCARD_7',
WH2:'PANELCARD_7',
WH3:'PANELCARD_7',
WH4:'PANELCARD_7',
ALLOWBONUS:'PANELCARD_7',
PLANOPPENED:'PANELCARD_7',
VISITSHEAD_ID:'PANELCARD_7',
ID:'PANELCARD_7',
DATE_2:'PANELCARD_7',
VISITHEAD_COMP_ID:'PANELCARD_7',
STARTH:'PANELCARD_7',
STARTM:'PANELCARD_7',
ENDH:'PANELCARD_7',
ENDM:'PANELCARD_7',
DISPLAYMEDREPNAME:'PANELCARD_7',
DISPLAYDATE:'PANELCARD_7',
PRICELIST:'PANELCARD_7',
TMPPOIID:'PANELCARD_7',
POIID:'PANELCARD_7',
POINAME:'PANELCARD_7',
POITYPE:'PANELCARD_7',
BESTTIME:'PANELCARD_7',
REGION:'PANELCARD_7',
COMMENT:'PANELCARD_7',
PHONENO:'PANELCARD_7',
ROUTE:'PANELCARD_7',
TOTAL_DUES:'PANELCARD_7',
STARTTIME:'PANELCARD_7',
DATE_1:'PANELCARD_7',
LATITUDE:'PANELCARD_7',
LONGITUDE:'PANELCARD_7',
DITRICT1:'PANELCARD_7',
DISTRICT_ID:'PANELCARD_7',
REGION1:'PANELCARD_7',
AREA1:'PANELCARD_7',
POSACCURACY:'PANELCARD_7',
POSDISTANCE:'PANELCARD_7',
MYPIN:'PANELCARD_7',
RECEIVEDPIN:'PANELCARD_7',
PINISVALID:'PANELCARD_7',
SKIPREAS:'PANELCARD_7',
SKIPCOMMENT:'PANELCARD_7',
VACATION_MEDREP:'PANELCARD_7',
VACATION_COMPANY_ID:'PANELCARD_7',
VACATION_ACTIVITY:'PANELCARD_7',
REASON:'PANELCARD_7',
VACATION_DATE:'PANELCARD_7',
VACATION_COMMENT:'PANELCARD_7',
ADDITEMWITHBONUS:'PANELCARD_7',
FLAGADDITEM:'PANELCARD_7',
ROUTEID:'PANELCARD_7',
MEDREPID:'PANELCARD_7',
ENDTIME:'PANELCARD_7',
LATX:'PANELCARD_7',
LATY:'PANELCARD_7',
ACCURACY:'PANELCARD_7',
ALTITUDE:'PANELCARD_7',
ALTITUDEACCUR:'PANELCARD_7',
HEADING:'PANELCARD_7',
SPEED:'PANELCARD_7',
TIMESTANPD:'PANELCARD_7',
LAT1:'PANELCARD_7',
LONG1:'PANELCARD_7',
LSTDISCUSSED:'PANELCARD_8',
LSTSAMPLES:'PANELCARD_9',
LSTORDERS:'PANELCARD_13',
LSTINVOICES:'PANELCARD_INVOICES',
LSTRECEIPT:'PANELCARD_18',
PAIMENTTYPE:'PANELCARD_18',
TXTRECDESC:'PANELCARD_18',
CURRENCY:'PANELCARD_18',
AMOUNT:'PANELCARD_18',
ONINVOICENO:'PANELCARD_18',
SHIPDATE:'PANELCARD_18',
PAYMODE:'PANELCARD_18',
DELIVERYMODE:'PANELCARD_18',
LSTUNPAIDINV:'PANELCARD_19',
SIGNATURECAPTURE1:'PANELCARD_20',
LSTVISITNOTES:'PANELCARD_21',
IMAGEBLOB:'PANELCARD_21',
NOTES:'PANELCARD_21',
NOTE_COMPID:'PANELCARD_21',
ID_3:'PANELCARD_21',
VISITFK:'PANELCARD_21',
LSTMEDIALFILES:'PANELCARD_MEDIA',
AVAILABLE_MEDIA1:'PANELCARD_FEEDBACK',
FEEDBACK:'PANELCARD_FEEDBACK',
NBROF_SAMPLES:'PANELCARD_VISITSUMMARY',
NBROFORDERS:'PANELCARD_VISITSUMMARY',
NBROFDISCUSSEDPRODUTS:'PANELCARD_VISITSUMMARY',
NBROFINVOICES:'PANELCARD_VISITSUMMARY',
NBROFRECEIPTS:'PANELCARD_VISITSUMMARY',
LSTBASKETH:'PANELCARD_BASKET',
LSTBASKETDET:'PANELCARD_BASKETDET',
BASKETNUM:'PANEL_CARD_BASKET_VARIABLES',
BASKETITEM:'PANEL_CARD_BASKET_VARIABLES',
PRODCODE:'PANEL_CARD_BASKET_VARIABLES',
ITEMNAME:'PANEL_CARD_BASKET_VARIABLES',
LSTITEMS_QTY_PAC:'PANEL_CARD_BASKET_VARIABLES',
LSTITEMS_BONUSQ_PAC:'PANEL_CARD_BASKET_VARIABLES',
DROPSELLUNIT:'PANEL_CARD_BASKET_VARIABLES',
DROPBONUSUNIT:'PANEL_CARD_BASKET_VARIABLES',
LSTITEMS_SELLSIZE:'PANEL_CARD_BASKET_VARIABLES',
LSTITEMS_BONUSSIZE:'PANEL_CARD_BASKET_VARIABLES',
QTY:'PANEL_CARD_BASKET_VARIABLES',
BONUS:'PANEL_CARD_BASKET_VARIABLES',
LSTITEMS_UNITPR:'PANEL_CARD_BASKET_VARIABLES',
LSTITEMS_DISCOUNT:'PANEL_CARD_BASKET_VARIABLES',
TOTAL_PRICE:'PANEL_CARD_BASKET_VARIABLES',
SMOQ:'PANEL_CARD_BASKET_VARIABLES',
BMOQ:'PANEL_CARD_BASKET_VARIABLES',
LITEITEMS_DISCUSSEDTYPE:'PANEL_CARD_BASKET_VARIABLES',
LISTITEMS_DISCUSSEDCOMENT:'PANEL_CARD_BASKET_VARIABLES',
TMPRET:'PANEL_CARD_BASKET_VARIABLES',
RETURNITEM:'PANEL_CARD_BASKET_VARIABLES',
RETURNQTY:'PANEL_CARD_BASKET_VARIABLES',
RETPRICE:'PANEL_CARD_BASKET_VARIABLES',
RETURNABLE:'PANEL_CARD_BASKET_VARIABLES',
FLAGVIEWBONUS:'PANEL_CARD_BASKET_VARIABLES',
LSTITEMS:'PANELCARD_ITEMS_ALL',
LSTVACATION:'PANELCARD_VACATION',
LSTPOI_KEYWORDSEARCH:'PANELCARD_POI',
LSTPOI:'PANELCARD_POI',
POINAME_1:'PANELCARD_POI_DET',
COMMENT_1:'PANELCARD_POI_DET',
CONTACTPERSON:'PANELCARD_POI_DET',
PHONENO_1:'PANELCARD_POI_DET',
MOBILE:'PANELCARD_POI_DET',
EMAIL:'PANELCARD_POI_DET',
ADDRESS:'PANELCARD_POI_DET',
STREET:'PANELCARD_POI_DET',
FREQUENCY:'PANELCARD_POI_DET',
MEDREP_ID:'PANELCARD_POI_DET',
COMPANY_ID:'PANELCARD_POI_DET',
PRINTERNAME:'PANELCARD_SETTINGS',
TEXTAREA1:'PANELCARD_SETTINGS',
LSTDEALS:'PANELCARD_48',
DEAL_AMOUNT:'PANELCARD_44',
DEAL_STARTD:'PANELCARD_44',
DEAL_ROI_DATE:'PANELCARD_44',
DEAL_TYPE:'PANELCARD_44',
DEAL_SOURCE_SALE:'PANELCARD_44',
DEAL_SOURCE_NAME:'PANELCARD_44',
DEAL_PHNAME:'PANELCARD_44',
DEAL_PH_INVNO:'PANELCARD_44',
DEAL_PH_DATE:'PANELCARD_44',
DEAL_ITEM1:'PANELCARD_45',
DEAL_ITEM1Q:'PANELCARD_45',
DEAL_ITEM2:'PANELCARD_45',
DEAL_ITEM2Q:'PANELCARD_45',
DEAL_ITEM3:'PANELCARD_45',
DEAL_ITEM3Q:'PANELCARD_45',
DEAL_ITEM4:'PANELCARD_45',
DEAL_ITEM4Q:'PANELCARD_45',
DEAL_PAY_METHOD:'PANELCARD_46',
DEAL_BANK:'PANELCARD_46',
DEAL_BANK_ACC:'PANELCARD_46',
DEAL_ID:'PANELCARD_46',
DEAL_COMENT:'PANELCARD_46',
DEAL_PAY:'PANELCARD_46',
LSTGEOLOC:'PANELCARD_47'
}
DLG1_DlgObj._controlsOnPanel = {
	'SIGNIN_PANELCARD' : {controls: ['LANG','REPID','MEDREP','REPID_1','MEDREP_1','DATE','PASSWORD','TEXTBOX3','PASSOK','VPASSWORD','VSECURITY','SYNCINPROGRESS','FAILEDSYNC','MEDREPCODE','MEDREPNAME','AUTOSAVEINV','HIDEBONUS','COMPANYID','SAVING','CHANGEPASS','NEWPASSWORD','SLIDER1']},
	'PANELCARD_SETTING' : {controls: ['COMPANYCODE','COMPANYNAME']},
	'PANELCARD_MENU' : {controls: ['MESSLOW_','MESSMEDIUM_','MESSHIGHT_','MESSALERT_','SLIDERSAVING','LIST2']},
	'PANELCARD_2' : {controls: ['LSTROUTES']},
	'PANELCARD_16' : {controls: ['SEARCH_OFFROUTE','LSTOFFROUTE']},
	'PANELCARD_4' : {controls: ['VISITTYPE','VISITOBJECTIVE','SUPERVISOR','SPECIALREQUEST','COMENT']},
	'PANELCARD_5' : {controls: ['TEST1','TEST2','LSTVISITHEAD']},
	'PANELCARD_6' : {controls: ['DEVLAT','DEVLONG','MAP1']},
	'PANELCARD_7' : {controls: ['DROPGROUP','DROPSUBGROUP','TXTSEARCHDESC','SUBGROUPARRAY','TOTAL_BEF_ORD','TOTAL_VAT_ORDER','TOTAL_ORDER_WITH_VAT','TOTAL_BEF_INV','TOTAL_VAT_INV','TOTAL_INV_WITH_VAT','PHONEORDER','ALLOWEDDISTANCE','TXTPOILAT','TXTPOILONG','VIEWALLDAYSINPLAN','WH1','WH2','WH3','WH4','ALLOWBONUS','PLANOPPENED','VISITSHEAD_ID','ID','DATE_2','VISITHEAD_COMP_ID','STARTH','STARTM','ENDH','ENDM','DISPLAYMEDREPNAME','DISPLAYDATE','PRICELIST','TMPPOIID','POIID','POINAME','POITYPE','BESTTIME','REGION','COMMENT','PHONENO','ROUTE','TOTAL_DUES','STARTTIME','DATE_1','LATITUDE','LONGITUDE','DITRICT1','DISTRICT_ID','REGION1','AREA1','POSACCURACY','POSDISTANCE','MYPIN','RECEIVEDPIN','PINISVALID','SKIPREAS','SKIPCOMMENT','VACATION_MEDREP','VACATION_COMPANY_ID','VACATION_ACTIVITY','REASON','VACATION_DATE','VACATION_COMMENT','ADDITEMWITHBONUS','FLAGADDITEM','ROUTEID','MEDREPID','ENDTIME','LATX','LATY','ACCURACY','ALTITUDE','ALTITUDEACCUR','HEADING','SPEED','TIMESTANPD','LAT1','LONG1']},
	'PANELCARD_8' : {controls: ['LSTDISCUSSED']},
	'PANELCARD_9' : {controls: ['LSTSAMPLES']},
	'PANELCARD_13' : {controls: ['LSTORDERS']},
	'PANELCARD_INVOICES' : {controls: ['LSTINVOICES']},
	'PANELCARD_18' : {controls: ['LSTRECEIPT','PAIMENTTYPE','TXTRECDESC','CURRENCY','AMOUNT','ONINVOICENO','SHIPDATE','PAYMODE','DELIVERYMODE']},
	'PANELCARD_19' : {controls: ['LSTUNPAIDINV']},
	'PANELCARD_20' : {controls: ['SIGNATURECAPTURE1']},
	'PANELCARD_21' : {controls: ['LSTVISITNOTES','IMAGEBLOB','NOTES','NOTE_COMPID','ID_3','VISITFK']},
	'PANELCARD_MEDIA' : {controls: ['LSTMEDIALFILES']},
	'PANELCARD_FEEDBACK' : {controls: ['AVAILABLE_MEDIA1','FEEDBACK']},
	'PANELCARD_VISITSUMMARY' : {controls: ['NBROF_SAMPLES','NBROFORDERS','NBROFDISCUSSEDPRODUTS','NBROFINVOICES','NBROFRECEIPTS']},
	'PANELCARD_BASKET' : {controls: ['LSTBASKETH']},
	'PANELCARD_BASKETDET' : {controls: ['LSTBASKETDET']},
	'PANEL_CARD_BASKET_VARIABLES' : {controls: ['BASKETNUM','BASKETITEM','PRODCODE','ITEMNAME','LSTITEMS_QTY_PAC','LSTITEMS_BONUSQ_PAC','DROPSELLUNIT','DROPBONUSUNIT','LSTITEMS_SELLSIZE','LSTITEMS_BONUSSIZE','QTY','BONUS','LSTITEMS_UNITPR','LSTITEMS_DISCOUNT','TOTAL_PRICE','SMOQ','BMOQ','LITEITEMS_DISCUSSEDTYPE','LISTITEMS_DISCUSSEDCOMENT','TMPRET','RETURNITEM','RETURNQTY','RETPRICE','RETURNABLE','FLAGVIEWBONUS']},
	'PANELCARD_ITEMS_ALL' : {controls: ['LSTITEMS']},
	'PANELCARD_VACATION' : {controls: ['LSTVACATION']},
	'PANELCARD_POI' : {controls: ['LSTPOI_KEYWORDSEARCH','LSTPOI']},
	'PANELCARD_POI_DET' : {controls: ['POINAME_1','COMMENT_1','CONTACTPERSON','PHONENO_1','MOBILE','EMAIL','ADDRESS','STREET','FREQUENCY','MEDREP_ID','COMPANY_ID']},
	'PANELCARD_SETTINGS' : {controls: ['PRINTERNAME','TEXTAREA1']},
	'PANELCARD_48' : {controls: ['LSTDEALS']},
	'PANELCARD_44' : {controls: ['DEAL_AMOUNT','DEAL_STARTD','DEAL_ROI_DATE','DEAL_TYPE','DEAL_SOURCE_SALE','DEAL_SOURCE_NAME','DEAL_PHNAME','DEAL_PH_INVNO','DEAL_PH_DATE']},
	'PANELCARD_45' : {controls: ['DEAL_ITEM1','DEAL_ITEM1Q','DEAL_ITEM2','DEAL_ITEM2Q','DEAL_ITEM3','DEAL_ITEM3Q','DEAL_ITEM4','DEAL_ITEM4Q']},
	'PANELCARD_46' : {controls: ['DEAL_PAY_METHOD','DEAL_BANK','DEAL_BANK_ACC','DEAL_ID','DEAL_COMENT','DEAL_PAY']},
	'PANELCARD_47' : {controls: ['LSTGEOLOC']}
}
DLG1_DlgObj._buttons = {};
DLG1_DlgObj._buttons['BUTTON_30_2'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: '<span id="_language_SIGNIN" class="_language">Sign In</span>',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:capsule'
});
DLG1_DlgObj._buttons['BUTTON_125'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Change Password',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_30_1'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Continue',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:capsule'
});
DLG1_DlgObj._buttons['BUTTON_33'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: '<span id="_language_VIEWOUTOFPLAN" class="_language">View Out of Plan</span>',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_27'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: '<span id="_language_NOTVISITEDTHISCYCLE" class="_language">NOT visited this cyle</span>',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:capsuleRaised'
});
DLG1_DlgObj._buttons['BUTTON_38'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: '<span id="_language_SHOWALL" class="_language">Show ALL</span>',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:capsule'
});
DLG1_DlgObj._buttons['BUTTON_138'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: '<span id="_language_REFRESH" class="_language">Refresh</span>',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_34'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: '<span id="_language_VIEWPLAN" class="_language">View Plan</span>',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_9'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; height: 38px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	className: 'compact',
	html: '<span id="_language_SAMPLES" class="_language">Samples</span>',
	icon: 'svgIcon=#alpha-icon-cartAdd:5,24{ fill: #0899bf; stroke: #15136b;}',
	disabledIcon: 'svgIcon=#alpha-icon-cartAdd:5,24{ fill: #0899bf; stroke: #15136b;}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_8'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; height: 38px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	className: 'compact',
	html: '<span id="_language_PROMOTED_PRODUCTS" class="_language">Promoted Products</span>',
	icon: 'svgIcon=#alpha-icon-commentPerson:20{ fill: #0899bf; stroke: #15136b;}',
	disabledIcon: 'svgIcon=#alpha-icon-commentPerson:20{ fill: #0899bf; stroke: #15136b;}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_11'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; height: 38px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	className: 'compact',
	html: '<span id="_language_ORDER" class="_language">Order</span>',
	icon: 'svgIcon=#alpha-icon-cartRemoveSolid:20{ fill: #0899bf; stroke: #15136b;}',
	disabledIcon: 'svgIcon=#alpha-icon-cartRemoveSolid:20{ fill: #0899bf; stroke: #15136b;}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_7'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; height: 38px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	className: 'compact',
	html: '<span id="_language_INVOICE" class="_language">Invoice</span>',
	icon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	disabledIcon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_12'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; height: 38px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	className: 'compact',
	html: '<span id="_language_RECEIPT" class="_language">Receipt</span>',
	icon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	disabledIcon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_13'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; height: 38px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	className: 'compact',
	html: '<span id="_language_SIGNATURE" class="_language">Signature</span>',
	icon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	disabledIcon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_16'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; height: 38px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	className: 'compact',
	html: '<span id="_language_MEDIAS" class="_language">Medias</span>',
	icon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	disabledIcon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_20'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; height: 38px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	className: 'compact',
	html: '<span id="_language_SURVEY" class="_language">Survey</span>',
	icon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	disabledIcon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_17'] = new A5.Button({
	layout: 'icon text',
	style: 'color: #174491; background-color: #f9f6f6; width: 100%; height: 38px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	className: 'compact',
	html: '<span id="_language_FEEDBACK" class="_language">Feedback</span>',
	icon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	disabledIcon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_14'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; height: 38px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	className: 'compact',
	html: '<span id="_language_IMAGES" class="_language">Images</span>',
	icon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	disabledIcon: 'svgIcon=#alpha-icon-folderEdit:icon,20{ fill: #0899bf; stroke: #15136b;}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_97'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_98'] = new A5.Button({
	layout: 'text',
	html: 'Refresh',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_28'] = new A5.Button({
	layout: 'text icon',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_15'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Save',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_4'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Direction',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_LISTSEARCH_LSTITEMS2'] = new A5.Button({
	layout: 'icon',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Search for matching records.',
	html: 'Shop',
	icon: 'shopping.png',
	disabledIcon: 'shopping.png',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_LISTSEARCH_LSTITEMS'] = new A5.Button({
	layout: 'icon',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Search for matching records.',
	html: 'Search',
	icon: 'searchicon2.png',
	disabledIcon: 'searchicon2.png',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_LISTSEARCH_LSTITEMS1'] = new A5.Button({
	layout: 'icon',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Search for matching records.',
	html: 'clear ',
	icon: 'clearsearch2.png',
	disabledIcon: 'clearsearch2.png',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2'] = new A5.Button({
	layout: 'icon text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	tip: 'Synchronize data - push local edits back to the server',
	html: 'Synchronize',
	icon: 'svgIcon=#alpha-icon-save:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-save:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_96'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'sync',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVISITHEAD'] = new A5.Button({
	layout: 'icon text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	tip: 'Save edits',
	html: 'Save',
	icon: 'svgIcon=#alpha-icon-save:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-save:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTVISITHEAD'] = new A5.Button({
	layout: 'icon text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	tip: 'Enter a new record',
	html: 'New Record',
	icon: 'svgIcon=#alpha-icon-docAdd:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-docAdd:icon iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTVISITHEAD'] = new A5.Button({
	layout: 'icon text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	tip: 'Delete record',
	html: 'Delete Record',
	icon: 'svgIcon=#alpha-icon-removeCircle:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVRESET_LSTVISITHEAD'] = new A5.Button({
	layout: 'icon text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	tip: 'Undo edits to the List Detail View',
	html: 'Reset',
	icon: 'svgIcon=#alpha-icon-undo:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-undo:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_84'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Statement',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:right'
});
DLG1_DlgObj._buttons['BUTTON_139'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Reload',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_130'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Continue',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:primary'
});
DLG1_DlgObj._buttons['BUTTON_102'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Save',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_136'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVACATION'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Save edits',
	html: 'Save',
	icon: 'svgIcon=#alpha-icon-save:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-save:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_22'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Visit Options',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTDISCUSSED'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Delete record',
	html: 'Delete',
	icon: 'svgIcon=#alpha-icon-removeCircle:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTDISCUSSED'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Save edits',
	html: 'Add',
	icon: 'svgIcon=#alpha-icon-save:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-save:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_29'] = new A5.Button({
	layout: 'text icon',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Visit Options',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTSAMPLES'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Delete record',
	html: 'Delete Item',
	icon: 'svgIcon=#alpha-icon-removeCircle:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTSAMPLES1'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Delete record',
	html: 'Add Items',
	icon: 'svgIcon=#alpha-icon-docAdd:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-docAdd:icon iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_35'] = new A5.Button({
	layout: 'text icon',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Visit Options',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_40'] = new A5.Button({
	layout: 'text',
	style: 'width: 50%; ',
	html: 'Select Invoices',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTRECEIPT'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Save edits',
	html: 'Save',
	icon: 'svgIcon=#alpha-icon-save:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-save:icon iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:primary'
});
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTRECEIPT'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 33.33%; ',
	tip: 'Enter a new record',
	html: 'New Record',
	icon: 'svgIcon=#alpha-icon-docAdd:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-docAdd:icon iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTRECEIPT'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 33.33%; ',
	tip: 'Delete record',
	html: 'Delete Record',
	icon: 'svgIcon=#alpha-icon-removeCircle:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_100'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Save',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:base'
});
DLG1_DlgObj._buttons['BUTTON_41'] = new A5.Button({
	layout: 'text icon',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_42'] = new A5.Button({
	layout: 'text icon',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Visit Options',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_43'] = new A5.Button({
	layout: 'text icon',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Visit Options',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVISITNOTES'] = new A5.Button({
	layout: 'icon text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	tip: 'Save edits',
	html: 'Save',
	icon: 'svgIcon=#alpha-icon-save:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-save:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:primary'
});
DLG1_DlgObj._buttons['BUTTON_19'] = new A5.Button({
	layout: 'icon/text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Camera',
	icon: 'svgIcon=#alpha-icon-camera:icon,24',
	disabledIcon: 'svgIcon=#alpha-icon-camera:icon,24',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:primary'
});
DLG1_DlgObj._buttons['BUTTON_55'] = new A5.Button({
	layout: 'text icon',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_3'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Download',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_18'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'View',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_56'] = new A5.Button({
	layout: 'text icon',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Visit Options',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_82'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_81'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'End Visit',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:right'
});
DLG1_DlgObj._buttons['BUTTON_87'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_141'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'reload',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_91'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Add',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:primary'
});
DLG1_DlgObj._buttons['BUTTON_93'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Ok',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTITEMS1'] = new A5.Button({
	layout: 'icon text',
	style: 'margin-top: 4px; width: 100%; height: 30px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Save edits',
	html: 'Save',
	icon: 'svgIcon=#alpha-icon-checkLarge:icon,92{ fill: #f41717;}',
	disabledIcon: 'svgIcon=#alpha-icon-checkCircleBorder:icon,72{ fill: hsl(0,0%,30.2%);}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:iconRaised'
});
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTITEMS1_1'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; height: 30px; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Save edits',
	html: 'Cancel',
	icon: 'svgIcon=#alpha-icon-arrowCounterClockwise:icon,92{ fill: #f41717;}',
	disabledIcon: 'svgIcon=#alpha-icon-arrowCounterClockwise:icon,92{ fill: #f41717;}',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:iconRaised'
});
DLG1_DlgObj._buttons['BUTTON_103'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTVACATION'] = new A5.Button({
	layout: 'icon text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	tip: 'Enter a new record',
	html: 'New Record',
	icon: 'svgIcon=#alpha-icon-docAdd:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-docAdd:icon iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTVACATION'] = new A5.Button({
	layout: 'icon text',
	tip: 'Delete record',
	html: 'Delete Record',
	icon: 'svgIcon=#alpha-icon-removeCircle:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVRESET_LSTVACATION'] = new A5.Button({
	layout: 'icon text',
	tip: 'Undo edits to the List Detail View',
	html: 'Reset',
	icon: 'svgIcon=#alpha-icon-undo:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-undo:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVSYNCHRONIZE_LSTVACATION'] = new A5.Button({
	layout: 'icon text',
	tip: 'Synchronize data - push local edits back to the server',
	html: 'Synchronize',
	icon: 'svgIcon=#alpha-icon-save:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-save:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_114'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_LISTSEARCHCLEAR_LSTPOI'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	tip: 'Remove the List filter.',
	html: 'Clear Filter',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTPOI1'] = new A5.Button({
	layout: 'icon text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	tip: 'Enter a new record',
	html: 'New Record',
	icon: 'svgIcon=#alpha-icon-docAdd:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-docAdd:icon iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTPOI_1'] = new A5.Button({
	layout: 'icon text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	tip: 'Save edits',
	html: 'Back',
	icon: 'svgIcon=#alpha-icon-save:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-save:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTPOI'] = new A5.Button({
	layout: 'icon text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	tip: 'Save edits',
	html: 'Save',
	icon: 'svgIcon=#alpha-icon-save:icon iconButton',
	disabledIcon: 'svgIcon=#alpha-icon-save:icon iconDisabled iconButton',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:iconRaised'
});
DLG1_DlgObj._buttons['BUTTON_121'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'test printer',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_120'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'View BT',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_123'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Clear Data',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_DVDELETESTORAGE_LSTVISITHEAD'] = new A5.Button({
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	tip: 'Delete List Storage (either the localStorage keys for this list, or the files in the filesystem if using PhoneGap and persisting List to filesystem',
	html: 'Delete Storage',
	onClick: function() { 
},
	theme: 'Alpha-Magenta'
});
DLG1_DlgObj._buttons['BUTTON_126'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Close',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_127'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Close',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_129'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_132'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'New Deal',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_134'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Next',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_21'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_21_1'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Next',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_21_2'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_133'] = new A5.Button({
	layout: 'text',
	style: 'width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box; ',
	html: 'Save',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:confirm'
});
DLG1_DlgObj._buttons['BUTTON_10'] = new A5.Button({
	layout: 'text',
	style: 'box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;',
	html: 'Back',
	onClick: function() { 
},
	theme: 'Alpha-Magenta:left'
});
DLG1_DlgObj._buttons['BUTTON_30_2'].bind('DLG1.V.R1.BUTTON_30_2');
DLG1_DlgObj._buttons['BUTTON_125'].bind('DLG1.V.R1.BUTTON_125');
DLG1_DlgObj._buttons['BUTTON_30_1'].bind('DLG1.V.R1.BUTTON_30_1');
DLG1_DlgObj._buttons['BUTTON_33'].bind('DLG1.V.R1.BUTTON_33');
DLG1_DlgObj._buttons['BUTTON_27'].bind('DLG1.V.R1.BUTTON_27');
DLG1_DlgObj._buttons['BUTTON_38'].bind('DLG1.V.R1.BUTTON_38');
DLG1_DlgObj._buttons['BUTTON_138'].bind('DLG1.V.R1.BUTTON_138');
DLG1_DlgObj._buttons['BUTTON_34'].bind('DLG1.V.R1.BUTTON_34');
DLG1_DlgObj._buttons['BUTTON_9'].bind('DLG1.V.R1.BUTTON_9');
DLG1_DlgObj._buttons['BUTTON_8'].bind('DLG1.V.R1.BUTTON_8');
DLG1_DlgObj._buttons['BUTTON_11'].bind('DLG1.V.R1.BUTTON_11');
DLG1_DlgObj._buttons['BUTTON_7'].bind('DLG1.V.R1.BUTTON_7');
DLG1_DlgObj._buttons['BUTTON_12'].bind('DLG1.V.R1.BUTTON_12');
DLG1_DlgObj._buttons['BUTTON_13'].bind('DLG1.V.R1.BUTTON_13');
DLG1_DlgObj._buttons['BUTTON_16'].bind('DLG1.V.R1.BUTTON_16');
DLG1_DlgObj._buttons['BUTTON_20'].bind('DLG1.V.R1.BUTTON_20');
DLG1_DlgObj._buttons['BUTTON_17'].bind('DLG1.V.R1.BUTTON_17');
DLG1_DlgObj._buttons['BUTTON_14'].bind('DLG1.V.R1.BUTTON_14');
DLG1_DlgObj._buttons['BUTTON_97'].bind('DLG1.V.R1.BUTTON_97');
DLG1_DlgObj._buttons['BUTTON_98'].bind('DLG1.V.R1.BUTTON_98');
DLG1_DlgObj._buttons['BUTTON_28'].bind('DLG1.V.R1.BUTTON_28');
DLG1_DlgObj._buttons['BUTTON_15'].bind('DLG1.V.R1.BUTTON_15');
DLG1_DlgObj._buttons['BUTTON_4'].bind('DLG1.V.R1.BUTTON_4');
DLG1_DlgObj._buttons['BUTTON_LISTSEARCH_LSTITEMS2'].bind('DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS2');
DLG1_DlgObj._buttons['BUTTON_LISTSEARCH_LSTITEMS'].bind('DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS');
DLG1_DlgObj._buttons['BUTTON_LISTSEARCH_LSTITEMS1'].bind('DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS1');
DLG1_DlgObj._buttons['BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2'].bind('DLG1.V.R1.BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2');
DLG1_DlgObj._buttons['BUTTON_96'].bind('DLG1.V.R1.BUTTON_96');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVISITHEAD'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTVISITHEAD');
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTVISITHEAD'].bind('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTVISITHEAD');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTVISITHEAD'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTVISITHEAD');
DLG1_DlgObj._buttons['BUTTON_DVRESET_LSTVISITHEAD'].bind('DLG1.V.R1.BUTTON_DVRESET_LSTVISITHEAD');
DLG1_DlgObj._buttons['BUTTON_84'].bind('DLG1.V.R1.BUTTON_84');
DLG1_DlgObj._buttons['BUTTON_139'].bind('DLG1.V.R1.BUTTON_139');
DLG1_DlgObj._buttons['BUTTON_130'].bind('DLG1.V.R1.BUTTON_130');
DLG1_DlgObj._buttons['BUTTON_102'].bind('DLG1.V.R1.BUTTON_102');
DLG1_DlgObj._buttons['BUTTON_136'].bind('DLG1.V.R1.BUTTON_136');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVACATION'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTVACATION');
DLG1_DlgObj._buttons['BUTTON_22'].bind('DLG1.V.R1.BUTTON_22');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTDISCUSSED'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTDISCUSSED');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTDISCUSSED'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTDISCUSSED');
DLG1_DlgObj._buttons['BUTTON_29'].bind('DLG1.V.R1.BUTTON_29');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTSAMPLES'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTSAMPLES');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTSAMPLES1'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTSAMPLES1');
DLG1_DlgObj._buttons['BUTTON_35'].bind('DLG1.V.R1.BUTTON_35');
DLG1_DlgObj._buttons['BUTTON_40'].bind('DLG1.V.R1.BUTTON_40');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTRECEIPT'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTRECEIPT');
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTRECEIPT'].bind('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTRECEIPT');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTRECEIPT'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTRECEIPT');
DLG1_DlgObj._buttons['BUTTON_100'].bind('DLG1.V.R1.BUTTON_100');
DLG1_DlgObj._buttons['BUTTON_41'].bind('DLG1.V.R1.BUTTON_41');
DLG1_DlgObj._buttons['BUTTON_42'].bind('DLG1.V.R1.BUTTON_42');
DLG1_DlgObj._buttons['BUTTON_43'].bind('DLG1.V.R1.BUTTON_43');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVISITNOTES'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTVISITNOTES');
DLG1_DlgObj._buttons['BUTTON_19'].bind('DLG1.V.R1.BUTTON_19');
DLG1_DlgObj._buttons['BUTTON_55'].bind('DLG1.V.R1.BUTTON_55');
DLG1_DlgObj._buttons['BUTTON_3'].bind('DLG1.V.R1.BUTTON_3');
DLG1_DlgObj._buttons['BUTTON_18'].bind('DLG1.V.R1.BUTTON_18');
DLG1_DlgObj._buttons['BUTTON_56'].bind('DLG1.V.R1.BUTTON_56');
DLG1_DlgObj._buttons['BUTTON_82'].bind('DLG1.V.R1.BUTTON_82');
DLG1_DlgObj._buttons['BUTTON_81'].bind('DLG1.V.R1.BUTTON_81');
DLG1_DlgObj._buttons['BUTTON_87'].bind('DLG1.V.R1.BUTTON_87');
DLG1_DlgObj._buttons['BUTTON_141'].bind('DLG1.V.R1.BUTTON_141');
DLG1_DlgObj._buttons['BUTTON_91'].bind('DLG1.V.R1.BUTTON_91');
DLG1_DlgObj._buttons['BUTTON_93'].bind('DLG1.V.R1.BUTTON_93');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTITEMS1'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTITEMS1');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTITEMS1_1'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTITEMS1_1');
DLG1_DlgObj._buttons['BUTTON_103'].bind('DLG1.V.R1.BUTTON_103');
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTVACATION'].bind('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTVACATION');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTVACATION'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTVACATION');
DLG1_DlgObj._buttons['BUTTON_DVRESET_LSTVACATION'].bind('DLG1.V.R1.BUTTON_DVRESET_LSTVACATION');
DLG1_DlgObj._buttons['BUTTON_DVSYNCHRONIZE_LSTVACATION'].bind('DLG1.V.R1.BUTTON_DVSYNCHRONIZE_LSTVACATION');
DLG1_DlgObj._buttons['BUTTON_114'].bind('DLG1.V.R1.BUTTON_114');
DLG1_DlgObj._buttons['BUTTON_LISTSEARCHCLEAR_LSTPOI'].bind('DLG1.V.R1.BUTTON_LISTSEARCHCLEAR_LSTPOI');
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTPOI1'].bind('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTPOI1');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTPOI_1'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTPOI_1');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTPOI'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTPOI');
DLG1_DlgObj._buttons['BUTTON_121'].bind('DLG1.V.R1.BUTTON_121');
DLG1_DlgObj._buttons['BUTTON_120'].bind('DLG1.V.R1.BUTTON_120');
DLG1_DlgObj._buttons['BUTTON_123'].bind('DLG1.V.R1.BUTTON_123');
DLG1_DlgObj._buttons['BUTTON_DVDELETESTORAGE_LSTVISITHEAD'].bind('DLG1.V.R1.BUTTON_DVDELETESTORAGE_LSTVISITHEAD');
DLG1_DlgObj._buttons['BUTTON_126'].bind('DLG1.V.R1.BUTTON_126');
DLG1_DlgObj._buttons['BUTTON_127'].bind('DLG1.V.R1.BUTTON_127');
DLG1_DlgObj._buttons['BUTTON_129'].bind('DLG1.V.R1.BUTTON_129');
DLG1_DlgObj._buttons['BUTTON_132'].bind('DLG1.V.R1.BUTTON_132');
DLG1_DlgObj._buttons['BUTTON_134'].bind('DLG1.V.R1.BUTTON_134');
DLG1_DlgObj._buttons['BUTTON_21'].bind('DLG1.V.R1.BUTTON_21');
DLG1_DlgObj._buttons['BUTTON_21_1'].bind('DLG1.V.R1.BUTTON_21_1');
DLG1_DlgObj._buttons['BUTTON_21_2'].bind('DLG1.V.R1.BUTTON_21_2');
DLG1_DlgObj._buttons['BUTTON_133'].bind('DLG1.V.R1.BUTTON_133');
DLG1_DlgObj._buttons['BUTTON_10'].bind('DLG1.V.R1.BUTTON_10');
DLG1_DlgObj._buttons['BUTTON_30_2'].bind('DLG1.V.R1.BUTTON_30_2');
DLG1_DlgObj._buttons['BUTTON_125'].bind('DLG1.V.R1.BUTTON_125');
DLG1_DlgObj._buttons['BUTTON_30_1'].bind('DLG1.V.R1.BUTTON_30_1');
DLG1_DlgObj._buttons['BUTTON_33'].bind('DLG1.V.R1.BUTTON_33');
DLG1_DlgObj._buttons['BUTTON_27'].bind('DLG1.V.R1.BUTTON_27');
DLG1_DlgObj._buttons['BUTTON_38'].bind('DLG1.V.R1.BUTTON_38');
DLG1_DlgObj._buttons['BUTTON_138'].bind('DLG1.V.R1.BUTTON_138');
DLG1_DlgObj._buttons['BUTTON_34'].bind('DLG1.V.R1.BUTTON_34');
DLG1_DlgObj._buttons['BUTTON_9'].bind('DLG1.V.R1.BUTTON_9');
DLG1_DlgObj._buttons['BUTTON_8'].bind('DLG1.V.R1.BUTTON_8');
DLG1_DlgObj._buttons['BUTTON_11'].bind('DLG1.V.R1.BUTTON_11');
DLG1_DlgObj._buttons['BUTTON_7'].bind('DLG1.V.R1.BUTTON_7');
DLG1_DlgObj._buttons['BUTTON_12'].bind('DLG1.V.R1.BUTTON_12');
DLG1_DlgObj._buttons['BUTTON_13'].bind('DLG1.V.R1.BUTTON_13');
DLG1_DlgObj._buttons['BUTTON_16'].bind('DLG1.V.R1.BUTTON_16');
DLG1_DlgObj._buttons['BUTTON_20'].bind('DLG1.V.R1.BUTTON_20');
DLG1_DlgObj._buttons['BUTTON_17'].bind('DLG1.V.R1.BUTTON_17');
DLG1_DlgObj._buttons['BUTTON_14'].bind('DLG1.V.R1.BUTTON_14');
DLG1_DlgObj._buttons['BUTTON_97'].bind('DLG1.V.R1.BUTTON_97');
DLG1_DlgObj._buttons['BUTTON_98'].bind('DLG1.V.R1.BUTTON_98');
DLG1_DlgObj._buttons['BUTTON_28'].bind('DLG1.V.R1.BUTTON_28');
DLG1_DlgObj._buttons['BUTTON_15'].bind('DLG1.V.R1.BUTTON_15');
DLG1_DlgObj._buttons['BUTTON_4'].bind('DLG1.V.R1.BUTTON_4');
DLG1_DlgObj._buttons['BUTTON_LISTSEARCH_LSTITEMS2'].bind('DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS2');
DLG1_DlgObj._buttons['BUTTON_LISTSEARCH_LSTITEMS'].bind('DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS');
DLG1_DlgObj._buttons['BUTTON_LISTSEARCH_LSTITEMS1'].bind('DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS1');
DLG1_DlgObj._buttons['BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2'].bind('DLG1.V.R1.BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2');
DLG1_DlgObj._buttons['BUTTON_96'].bind('DLG1.V.R1.BUTTON_96');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVISITHEAD'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTVISITHEAD');
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTVISITHEAD'].bind('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTVISITHEAD');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTVISITHEAD'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTVISITHEAD');
DLG1_DlgObj._buttons['BUTTON_DVRESET_LSTVISITHEAD'].bind('DLG1.V.R1.BUTTON_DVRESET_LSTVISITHEAD');
DLG1_DlgObj._buttons['BUTTON_84'].bind('DLG1.V.R1.BUTTON_84');
DLG1_DlgObj._buttons['BUTTON_139'].bind('DLG1.V.R1.BUTTON_139');
DLG1_DlgObj._buttons['BUTTON_130'].bind('DLG1.V.R1.BUTTON_130');
DLG1_DlgObj._buttons['BUTTON_102'].bind('DLG1.V.R1.BUTTON_102');
DLG1_DlgObj._buttons['BUTTON_136'].bind('DLG1.V.R1.BUTTON_136');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVACATION'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTVACATION');
DLG1_DlgObj._buttons['BUTTON_22'].bind('DLG1.V.R1.BUTTON_22');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTDISCUSSED'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTDISCUSSED');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTDISCUSSED'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTDISCUSSED');
DLG1_DlgObj._buttons['BUTTON_29'].bind('DLG1.V.R1.BUTTON_29');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTSAMPLES'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTSAMPLES');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTSAMPLES1'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTSAMPLES1');
DLG1_DlgObj._buttons['BUTTON_35'].bind('DLG1.V.R1.BUTTON_35');
DLG1_DlgObj._buttons['BUTTON_40'].bind('DLG1.V.R1.BUTTON_40');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTRECEIPT'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTRECEIPT');
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTRECEIPT'].bind('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTRECEIPT');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTRECEIPT'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTRECEIPT');
DLG1_DlgObj._buttons['BUTTON_100'].bind('DLG1.V.R1.BUTTON_100');
DLG1_DlgObj._buttons['BUTTON_41'].bind('DLG1.V.R1.BUTTON_41');
DLG1_DlgObj._buttons['BUTTON_42'].bind('DLG1.V.R1.BUTTON_42');
DLG1_DlgObj._buttons['BUTTON_43'].bind('DLG1.V.R1.BUTTON_43');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTVISITNOTES'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTVISITNOTES');
DLG1_DlgObj._buttons['BUTTON_19'].bind('DLG1.V.R1.BUTTON_19');
DLG1_DlgObj._buttons['BUTTON_55'].bind('DLG1.V.R1.BUTTON_55');
DLG1_DlgObj._buttons['BUTTON_3'].bind('DLG1.V.R1.BUTTON_3');
DLG1_DlgObj._buttons['BUTTON_18'].bind('DLG1.V.R1.BUTTON_18');
DLG1_DlgObj._buttons['BUTTON_56'].bind('DLG1.V.R1.BUTTON_56');
DLG1_DlgObj._buttons['BUTTON_82'].bind('DLG1.V.R1.BUTTON_82');
DLG1_DlgObj._buttons['BUTTON_81'].bind('DLG1.V.R1.BUTTON_81');
DLG1_DlgObj._buttons['BUTTON_87'].bind('DLG1.V.R1.BUTTON_87');
DLG1_DlgObj._buttons['BUTTON_141'].bind('DLG1.V.R1.BUTTON_141');
DLG1_DlgObj._buttons['BUTTON_91'].bind('DLG1.V.R1.BUTTON_91');
DLG1_DlgObj._buttons['BUTTON_93'].bind('DLG1.V.R1.BUTTON_93');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTITEMS1'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTITEMS1');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTITEMS1_1'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTITEMS1_1');
DLG1_DlgObj._buttons['BUTTON_103'].bind('DLG1.V.R1.BUTTON_103');
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTVACATION'].bind('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTVACATION');
DLG1_DlgObj._buttons['BUTTON_DVDELETERECORD_LSTVACATION'].bind('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTVACATION');
DLG1_DlgObj._buttons['BUTTON_DVRESET_LSTVACATION'].bind('DLG1.V.R1.BUTTON_DVRESET_LSTVACATION');
DLG1_DlgObj._buttons['BUTTON_DVSYNCHRONIZE_LSTVACATION'].bind('DLG1.V.R1.BUTTON_DVSYNCHRONIZE_LSTVACATION');
DLG1_DlgObj._buttons['BUTTON_114'].bind('DLG1.V.R1.BUTTON_114');
DLG1_DlgObj._buttons['BUTTON_LISTSEARCHCLEAR_LSTPOI'].bind('DLG1.V.R1.BUTTON_LISTSEARCHCLEAR_LSTPOI');
DLG1_DlgObj._buttons['BUTTON_DVNEWRECORD_LSTPOI1'].bind('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTPOI1');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTPOI_1'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTPOI_1');
DLG1_DlgObj._buttons['BUTTON_DVSAVE_LSTPOI'].bind('DLG1.V.R1.BUTTON_DVSAVE_LSTPOI');
DLG1_DlgObj._buttons['BUTTON_121'].bind('DLG1.V.R1.BUTTON_121');
DLG1_DlgObj._buttons['BUTTON_120'].bind('DLG1.V.R1.BUTTON_120');
DLG1_DlgObj._buttons['BUTTON_123'].bind('DLG1.V.R1.BUTTON_123');
DLG1_DlgObj._buttons['BUTTON_DVDELETESTORAGE_LSTVISITHEAD'].bind('DLG1.V.R1.BUTTON_DVDELETESTORAGE_LSTVISITHEAD');
DLG1_DlgObj._buttons['BUTTON_126'].bind('DLG1.V.R1.BUTTON_126');
DLG1_DlgObj._buttons['BUTTON_127'].bind('DLG1.V.R1.BUTTON_127');
DLG1_DlgObj._buttons['BUTTON_129'].bind('DLG1.V.R1.BUTTON_129');
DLG1_DlgObj._buttons['BUTTON_132'].bind('DLG1.V.R1.BUTTON_132');
DLG1_DlgObj._buttons['BUTTON_134'].bind('DLG1.V.R1.BUTTON_134');
DLG1_DlgObj._buttons['BUTTON_21'].bind('DLG1.V.R1.BUTTON_21');
DLG1_DlgObj._buttons['BUTTON_21_1'].bind('DLG1.V.R1.BUTTON_21_1');
DLG1_DlgObj._buttons['BUTTON_21_2'].bind('DLG1.V.R1.BUTTON_21_2');
DLG1_DlgObj._buttons['BUTTON_133'].bind('DLG1.V.R1.BUTTON_133');
DLG1_DlgObj._buttons['BUTTON_10'].bind('DLG1.V.R1.BUTTON_10');
DLG1_DlgObj._listViewSettings['LIST2'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: true,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'company_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'company_id\');'
},
{
	name: 'menutext',
	defaultValue: 'return this._controlDefaultValueForListField(\'menutext\');'
},
{
	name: 'menuicon',
	defaultValue: 'return this._controlDefaultValueForListField(\'menuicon\');',
	image: {
		embedded: true,
		type: 'JPG'
	}
}],
	_delayRenderTillRefresh: true,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LIST2.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LIST2 name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LIST2');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LIST2.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent',
				progress: {
				},
				onProgressEvent: ''
			},
			onErrorFunction: function(e) { }
		}
	},
	_indexdb: {
		mediafiles: {
			download: false,
			showProgress: false,
			progress: {
			},
			downloadHasOnProgressEvent: false,
			upload: {
				showProgress: false
			}
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: false,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	theme: 'Alpha-Magenta',
	className: '',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LIST2',
	listVariableNameTrueCase: 'LIST2',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: true,
	__flagIncrementalRefreshAfterLoad: false,
	__version: 2,
	__persistWhere: 'IndexDB',
	__persistMode: 'full',
	_beforePersistToStorage: function(obj) { 	
	this._executeEvent('onBeforePersistToLocalStorage',obj)
	this.__doPersist = true;
	if(typeof obj.userData == 'undefined') obj.userData = {};
	this.__userData = obj.userData;
	//snapshot the list data in case the persist fails
	this._dataSnapshot = [].concat(this._data);
}
,
	persistToStorage: function(obj) { 	//system generated beforePersistToStorage code here
	var flagSuspendPersist = false;
	if(typeof this.suspendPersist != 'undefined') flagSuspendPersist = this.suspendPersist;
	if(flagSuspendPersist) return true;
	if(typeof obj.submode != 'undefined') {
		if(obj.submode == 'ListViewData') {
			var _wh = DLG1_DlgObj.__persistWhere(this.listVariableName);
			//see comment in a5DialogHelper_ListViewData() line 450
			if(_wh == 'fs') return;
		}
	}
	var result = DLG1_DlgObj.persistListToLocalStorage(this,obj);
	delete this.__userData;
	if(result) {
		delete this._dataSnapshot;
	} else {
		this.populate(this._dataSnapshot,false,false,false);  //need to .populate() without firing events
		delete this._dataSnapshot;
	}
	if(typeof this._pm_persistWhere == 'undefined') this._pm_persistWhere = 'localStorage';
	//the onPersistToLocalStorage event is fired in either the _persistToLocalStorageLow() methdo (for local storage) or _persistListToFile() method
	this._flagPersistDataOK = result;
	if(!result) {
		if(typeof this._tempFlagServerSideSearch != 'undefined') {
			if(this._tempFlagServerSideSearch) {
				this._executeEvent('onSearchResultTooLargeForLocalStorage',obj);
			}
			delete this._tempFlagServerSideSearch;
		}
	}
}
,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;if(!this._isInit && !this._restoringList) this._beforePersistToStorage({mode:'populate', data: data});
},
	onPopulate: function(data) {if(!this._isInit && !this._restoringList) {this.persistToStorage({mode:'populate', data: data}); }; if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){this._beforePersistToStorage({mode:'update', data: data, index: index});},
	onUpdateRow: function(index,data){this.persistToStorage({mode:'update', data: data, index: index});},
	onBeforeAddRows: function(data,info){this._beforePersistToStorage({mode:'add', data: data});},
	onAddRows: function(data,info){this.persistToStorage({mode:'add', data: data});},
	onBeforeRemoveRows: function(rows){this._beforePersistToStorage({mode:'remove', rows: rows});},
	onRemoveRows: function(rows){this.persistToStorage({mode:'remove', data: rows});},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	childLists: [],
	childListEndpoints: ['LIST2'],
	_populateAllChildLists: function() { },
	onSelect: function() {DLG1_DlgObj._listRowSelect('LIST2',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LIST2'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LIST2'];
		var lObj = DLG1_DlgObj.getControl('LIST2');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};;
this._selectedRow = this.selection[0];
;},
	onClick: function() {
setTimeout(function(){
	mainmenu();	
},200)
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'template-flow',
			item: {
				width: '50%',
				height: '',
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: 'padding: 5px;',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; height: 75px; border: 1px solid lightcoral; padding: 0;">',
			'',
			'  <div style="width: 100%; text-align: center;">',
			'    ',
			'    <img src="data:image/jpg;base64,{menuicon}" style="width: 36px; height: 36px;">',
			'',
			'  </div>',
			'',
			'  <div style="position: absolute; bottom: 0; width: 100%; text-align: center;">',
			'    <span id="DLG1.LIST2.MENUTEXT.I.{*dataRow}">{menutext}</span>',
			'  </div>',
			'',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {
},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LIST2',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	detailViewIsDirty: function() { return false; },
	populateUXControls: function() { return true; },
	listIsDirty: function() { return false; },
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LIST2'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LIST2&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'id': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'menutext': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LIST2.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LIST2.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LIST2.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LIST2.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LIST2.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LIST2'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LIST2'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LIST2'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LIST2'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LIST2');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '4bf817f8-70ef-4cb2-8b8a-60c8d940a848'
};
DLG1_DlgObj._listViewSettings['LSTROUTES'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	kanbancolor: function(data) { var _f = '';
try{
 _f = this.layouts[this.layout].kanBan.colorFunction;
}catch(err) { }
if(typeof _f == 'function') var val = _f.call(this,data);
return val;},
	_dataSourceType: 'SQL',
	_menuSettings: {
	'MENU1' : {type: 'Image',imageClosed: 'svgIcon=#alpha-icon-bars:icon,42',image_rotate: true,image_rotate_duration: 200,imageOpen: 'svgIcon=#alpha-icon-xLarge:icon,42',menuType: 'Cascading',menuSettings: {
		"listName": "LSTROUTES",
		"theme": "Alpha-Magenta",
		"style": "background-color: ;",
		"iconColumn": {
			"width": "40px"
		},
		"animation": {
			"show": {
				"type": "slide",
				"duration": "100"
			},
			"hide": {
				"type": "none"
			}
		},
		"onHide": function() { 	
			var lObj = DLG1_DlgObj.getControl('LSTROUTES');
			if(lObj._menuName != '') {
				if(lObj.onMenuClose) lObj.onMenuClose(lObj._menuName,rowNumber,lObj);
				var obj = lObj._menuSettings[lObj._menuName];
				var rowNumber = obj.existingRowNumber;
				var idIcon = 'DLG1.' + lObj.listVariableName + '.' + lObj._menuName + '.MENU.' + rowNumber;
				var ele = $(idIcon);
				obj.isOpen = false;
				obj.closingRowNumber = rowNumber;
				setTimeout(function() {if(obj.closingRowNumber == rowNumber) obj.closingRowNumber = -1; delete obj; } ,600)
				var duration = obj.image_rotate_duration;
				if(typeof duration == 'undefined') duration = 600;
				obj.existingRowNumber = -1
				lObj._menuName = '';
				if (obj.image_rotate) lObj.__list_menu_rotate(ele,90,0,obj.imageClosed,duration);
			}
		}
	}}
},
	__list_menu_show: function(name,rowNumber) {		var flag;
		var lObj = this;
		if(lObj.beforeMenuOpen) flag = lObj.beforeMenuOpen(name,rowNumber,listObj);
		if(typeof flag == 'undefined') flag = true;
		if(!flag) return;
		var obj = lObj._menuSettings[name];
		if(typeof obj == 'undefined') return;
		var idIcon = 'DLG1.' + lObj.listVariableName + '.' + name + '.MENU.' + rowNumber;
		var ele = $(idIcon);
		var menuData = obj.menuData;
		var menuSettings = obj.menuSettings;
		var objMenuObject = obj.menuObject;
		if(typeof objMenuObject == 'undefined') {
			menuSettings.rowNumber = rowNumber;
			obj.menuObject = new A5.Menu(menuData,menuSettings);
			objMenuObject = obj.menuObject
		} else {
			objMenuObject.rowNumber = rowNumber;
			objMenuObject.populate(menuData);
		}
		var flagIsOpen = obj.isOpen;
		var existingRowNumber = obj.existingRowNumber;
		if(typeof existingRowNumber == 'undefined') existingRowNumber = -1;
		var closingRowNumber = obj.closingRowNumber
		if(typeof closingRowNumber == 'undefined') closingRowNumber = -1;
		if(typeof flagIsOpen == 'undefined') flagIsOpen = false;
		if(rowNumber == closingRowNumber) flagIsOpen = true;
		var that = this;
		setTimeout(function() {
			if(!flagIsOpen ) {
				obj.isOpen = true;
				obj.existingRowNumber = rowNumber;
				lObj._menuName = name;
				var duration = obj.image_rotate_duration;
				if(typeof duration == 'undefined') duration = 600
				if (obj.image_rotate) that.__list_menu_rotate(ele,0,90,obj.imageOpen,duration);
				objMenuObject.show('dropdown',ele); return false;
			}
		},0);
	}
,
	__list_menu_rotate: function(ele,from,to,terminalImage,duration) {		if(typeof duration == 'undefined') duration = 300;
		if(terminalImage == 'undefined') terminalImage = '';
		if(terminalImage != '') {
			var _onComplete = function() {
				ele.innerHTML = A5.u.icon.html(terminalImage);
			}
		} else {
			var _onComplete = function() { };
		}
			A5.u.element.transition(ele,{
					from: { transform: 'rotate('+from+'deg)'},
					to: {   transform: 'rotate('+to+'deg)'	},
					duration: duration
				},
				_onComplete)
}
,
	__list_menu_hide: function() { 		//called by the onScroll event
		var obj = lObj._menuSettings
		var isOpen;
		var menuObject
		var imageClosed
		for(var n in obj) {
			isOpen = obj[n].isOpen;
			if(isOpen) {
				imageClosed = obj[n].imageClosed
				menuObject = obj[n].menuObject;
				if(menuObject) menuObject.hide(lObj)
				if(typeof imageClosed == 'undefined') imageClosed = '';
				//if(lObj && lObj.rotate) lObj.rotate(ele,90,0,imageClosed,600);
				if(lObj && lObj.__list_menu_rotate) lObj.__list_menu_rotate(ele,90,0,imageClosed,600);
			}
		}
	}
,
	_listFields: [
{
	name: 'ID',
	defaultValue: 'return this._controlDefaultValueForListField(\'ID\');'
},
{
	name: 'area',
	defaultValue: 'return this._controlDefaultValueForListField(\'area\');'
},
{
	name: 'routedate',
	defaultValue: 'return this._controlDefaultValueForListField(\'routedate\');'
},
{
	name: 'COMMENT',
	defaultValue: 'return this._controlDefaultValueForListField(\'COMMENT\');'
},
{
	name: 'CONTACTPERSON',
	defaultValue: 'return this._controlDefaultValueForListField(\'CONTACTPERSON\');'
},
{
	name: 'PHONENO',
	defaultValue: 'return this._controlDefaultValueForListField(\'PHONENO\');'
},
{
	name: 'poiid',
	defaultValue: 'return this._controlDefaultValueForListField(\'poiid\');'
},
{
	name: 'route_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'route_id\');'
},
{
	name: 'DATES',
	defaultValue: 'return this._controlDefaultValueForListField(\'DATES\');'
},
{
	name: 'medrep_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'medrep_id\');'
},
{
	name: 'POINAME',
	defaultValue: 'return this._controlDefaultValueForListField(\'POINAME\');'
},
{
	name: 'LAT',
	defaultValue: 'return this._controlDefaultValueForListField(\'LAT\');'
},
{
	name: 'LONT',
	defaultValue: 'return this._controlDefaultValueForListField(\'LONT\');'
},
{
	name: 'BESTTIME',
	defaultValue: 'return this._controlDefaultValueForListField(\'BESTTIME\');'
},
{
	name: 'POI_TYPE',
	defaultValue: 'return this._controlDefaultValueForListField(\'POI_TYPE\');'
},
{
	name: 'POTENTIALITY',
	defaultValue: 'return this._controlDefaultValueForListField(\'POTENTIALITY\');'
},
{
	name: 'REGION',
	defaultValue: 'return this._controlDefaultValueForListField(\'REGION\');'
},
{
	name: 'SPECIALITY',
	defaultValue: 'return this._controlDefaultValueForListField(\'SPECIALITY\');'
},
{
	name: 'hasexclloc',
	defaultValue: 'return this._controlDefaultValueForListField(\'hasexclloc\');'
},
{
	name: 'visited',
	defaultValue: 'return this._controlDefaultValueForListField(\'visited\');'
},
{
	name: 'pricelist',
	defaultValue: 'return this._controlDefaultValueForListField(\'pricelist\');'
},
{
	name: 'poi_rout_com',
	defaultValue: 'return this._controlDefaultValueForListField(\'poi_rout_com\');'
},
{
	name: 'vtype',
	defaultValue: 'return this._controlDefaultValueForListField(\'vtype\');'
},
{
	name: 'FormattedDate',
	defaultValue: 'return this._controlDefaultValueForListField(\'FormattedDate\');'
}],
	_delayRenderTillRefresh: true,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTROUTES.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTROUTES name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTROUTES');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTROUTES.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent',
				progress: {
				},
				onProgressEvent: ''
			},
			onErrorFunction: function(e) { }
		}
	},
	_indexdb: {
		mediafiles: {
			download: false,
			showProgress: false,
			progress: {
			},
			downloadHasOnProgressEvent: false,
			upload: {
				showProgress: false
			}
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: false,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: '',
	dirtyControlClassName: '',
	listVariableName: 'LSTROUTES',
	listVariableNameTrueCase: 'LSTROUTES',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: true,
	__flagIncrementalRefreshAfterLoad: false,
	__version: 2,
	__persistWhere: 'IndexDB',
	__persistMode: 'full',
	_beforePersistToStorage: function(obj) { 	
	this._executeEvent('onBeforePersistToLocalStorage',obj)
	this.__doPersist = true;
	if(typeof obj.userData == 'undefined') obj.userData = {};
	this.__userData = obj.userData;
	//snapshot the list data in case the persist fails
	this._dataSnapshot = [].concat(this._data);
}
,
	persistToStorage: function(obj) { 	//system generated beforePersistToStorage code here
	var flagSuspendPersist = false;
	if(typeof this.suspendPersist != 'undefined') flagSuspendPersist = this.suspendPersist;
	if(flagSuspendPersist) return true;
	if(typeof obj.submode != 'undefined') {
		if(obj.submode == 'ListViewData') {
			var _wh = DLG1_DlgObj.__persistWhere(this.listVariableName);
			//see comment in a5DialogHelper_ListViewData() line 450
			if(_wh == 'fs') return;
		}
	}
	var result = DLG1_DlgObj.persistListToLocalStorage(this,obj);
	delete this.__userData;
	if(result) {
		delete this._dataSnapshot;
	} else {
		this.populate(this._dataSnapshot,false,false,false);  //need to .populate() without firing events
		delete this._dataSnapshot;
	}
	if(typeof this._pm_persistWhere == 'undefined') this._pm_persistWhere = 'localStorage';
	//the onPersistToLocalStorage event is fired in either the _persistToLocalStorageLow() methdo (for local storage) or _persistListToFile() method
	this._flagPersistDataOK = result;
	if(!result) {
		if(typeof this._tempFlagServerSideSearch != 'undefined') {
			if(this._tempFlagServerSideSearch) {
				this._executeEvent('onSearchResultTooLargeForLocalStorage',obj);
			}
			delete this._tempFlagServerSideSearch;
		}
	}
}
,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;if(!this._isInit && !this._restoringList) this._beforePersistToStorage({mode:'populate', data: data});
},
	onPopulate: function(data) {if(!this._isInit && !this._restoringList) {this.persistToStorage({mode:'populate', data: data}); }; if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){this._beforePersistToStorage({mode:'update', data: data, index: index});},
	onUpdateRow: function(index,data){this.persistToStorage({mode:'update', data: data, index: index});},
	onBeforeAddRows: function(data,info){this._beforePersistToStorage({mode:'add', data: data});},
	onAddRows: function(data,info){this.persistToStorage({mode:'add', data: data});},
	onBeforeRemoveRows: function(rows){this._beforePersistToStorage({mode:'remove', rows: rows});},
	onRemoveRows: function(rows){this.persistToStorage({mode:'remove', data: rows});},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	onItemDraw: function(ele,data,index) {
if(data.visited >= 1) {$ss(ele,$gs(ele)+';background: Aqua;|#|{text: \'\',function: \'\'}');}
},
	childLists: [],
	childListEndpoints: ['LSTROUTES'],
	_populateAllChildLists: function() { },
	onSelect: function() {DLG1_DlgObj._listRowSelect('LSTROUTES',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTROUTES'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTROUTES'];
		var lObj = DLG1_DlgObj.getControl('LSTROUTES');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};;
this._selectedRow = this.selection[0];
;},
	onClick: function() {},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		},
		auto: [
{
	order: {'FormattedDate' : 1 , 'POI_TYPE' : 1},
	group: function(data) { var txt = data.FormattedDate;  if(txt && typeof txt != 'undefined') { return txt.trim()}; return '';},
	className: '',
	collapseIcon: 'svgIcon=#alpha-icon-chevronRight:icon',
	expandIcon: 'svgIcon=#alpha-icon-chevronDown:icon',
	onCollapse: '',
	onExpand: '',
	header: {
		className: 'A5ListGroupHeaders panelHeader',
		html: function(group,data) { return '<div style="width: 100%;display:inline-block; whitespace:nowrap; ">'+group+' <div style="text-align: right;float: right;">{indicator}</div><br style="clear:both;" />'+'</div></div>'; }
	},
	footer: {
		show: false
	},
	navigate: true,
	collapse: {
		allow: 'title',
		indicator: {
			collapse: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg>',
			expand: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>'
		},
		auto: false
	}
}]
	},
	layouts: {
		Default: {
			group: {
				auto: [
{
	order: {'FormattedDate' : 1 , 'POI_TYPE' : 1},
	group: function(data) { var txt = data.FormattedDate;  if(txt && typeof txt != 'undefined') { return txt.trim()}; return '';},
	className: '',
	collapseIcon: 'svgIcon=#alpha-icon-chevronRight:icon',
	expandIcon: 'svgIcon=#alpha-icon-chevronDown:icon',
	onCollapse: '',
	onExpand: '',
	header: {
		className: 'A5ListGroupHeaders panelHeader',
		html: function(group,data) { return '<div style="width: 100%;display:inline-block; whitespace:nowrap; ">'+group+' <div style="text-align: right;float: right;">{indicator}</div><br style="clear:both;" />'+'</div></div>'; }
	},
	footer: {
		show: false
	},
	navigate: true,
	collapse: {
		allow: 'title',
		indicator: {
			collapse: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg>',
			expand: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>'
		},
		auto: false
	}
}]
			},
			type: 'template',
			item: {
				height: '',
				className: 'listItem',
				hoverClassName: '',
				selectedClassName: 'listItem',
				style: 'margin: 1px; border-bottom-style: groove; border-bottom-width: 1px; border-bottom-color: #5282c8;',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%; ;">',
			'   \t<div style="display: table-cell; width: 40px; text-align: left; vertical-align: middle;">',
			'\t\t<div style="display:inline-block" id="DLG1.LSTROUTES.MENU1.MENU.{*dataRow}" title="" a5-item="_MENU_onClick_menu1">{@A5.u.icon.html(<escape<\'svgIcon=#alpha-icon-bars:icon,42\'>>)}</div> ',
			'\t</div>',
			'',
			'\t<div style="display: table-cell; vertical-align: middle;">',
			'\t<div class="[theme:listBox.base.item.parts.contextClassName|Alpha-MagentaListItemLabelContext]" style="float: right;"><span id="DLG1.LSTROUTES.SPECIALITY.I.{*dataRow}">{SPECIALITY}</span></div>',
			'\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span id="DLG1.LSTROUTES.POINAME.I.{*dataRow}">{POINAME}</span></div>',
			'\t<div class="[theme:listBox.base.item.parts.subClassName|Alpha-MagentaListItemLabelSub]"><span id="DLG1.LSTROUTES.AREA.I.{*dataRow}">{area}</span></div>',
			'\t<div class="[theme:listBox.base.item.parts.contentClassName|Alpha-MagentaListItemContent]">',
			'\t\t<div class="[theme:listBox.base.item.parts.detailClassName|Alpha-MagentaListItemLabelDetail]" style="float: right;"><span id="DLG1.LSTROUTES.BESTTIME.I.{*dataRow}">{BESTTIME}</span></div>',
			'\t\t<span id="DLG1.LSTROUTES.POTENTIALITY.I.{*dataRow}">{POTENTIALITY}</span><br/>',
			'        {vtype}<br/>',
			'        {poi_rout_com}<br/>',
			'\t</div>',
			'\t</div>\t',
			'    <div style="display: table-cell; width: 40px; text-align: left; vertical-align: middle;">',
			'        <span id="DLG1.LSTROUTES.MAKE VISIT.I.{*dataRow}"><button  a5-item="_systemButtononClick_Make Visit"  id="DLG1.LSTROUTES.MAKE VISIT.BTN.{*dataRow}"  class="buttonPrimary" style="cursor:pointer;" title="">Start Visit</button></span>',
			'\t</div>',
			'',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
var id = this.contId +'.NORECORDSINLIST';
var e = $(this.contId + '.CONTENT');
if(data.length == 0) {
	var e = $(this.contId + '.CONTENT');
	var eleHeight = ($(this.contId + '.CONTENTWRAPPER').offsetHeight /2 ) -12;
	var _msg = '</b>No Plan Is Set<b>';
	_msg = '<span onclick="var lObj = DLG1_DlgObj.getControl(\'LSTROUTES\'); lObj.editInplaceAddRow(0);">' + _msg + '</span>'
	e.innerHTML = '<div id="'+id +'" style="text-align: center;padding-top: ' + eleHeight + 'px;">'+_msg+'</div>';
} else {
	var ele = $(id);
	if(ele) {
		e.removeChild(ele);
	}
}
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		if(lObj.__list_menu_hide) lObj.__list_menu_hide(); 
lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTROUTES',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	detailViewIsDirty: function() { return false; },
	populateUXControls: function() { return true; },
	listIsDirty: function() { return false; },
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: false,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTROUTES'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTROUTES&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'ID': RegExp('' + searchFor,'i'), 'area': RegExp('' + searchFor,'i'), 'routedate': RegExp('' + searchFor,'i'), 'COMMENT': RegExp('' + searchFor,'i'), 'CONTACTPERSON': RegExp('' + searchFor,'i'), 'PHONENO': RegExp('' + searchFor,'i'), 'poiid': RegExp('' + searchFor,'i'), 'route_id': RegExp('' + searchFor,'i'), 'DATES': RegExp('' + searchFor,'i'), 'medrep_id': RegExp('' + searchFor,'i'), 'POINAME': RegExp('' + searchFor,'i'), 'LAT': RegExp('' + searchFor,'i'), 'LONT': RegExp('' + searchFor,'i'), 'BESTTIME': RegExp('' + searchFor,'i'), 'POI_TYPE': RegExp('' + searchFor,'i'), 'POTENTIALITY': RegExp('' + searchFor,'i'), 'REGION': RegExp('' + searchFor,'i'), 'SPECIALITY': RegExp('' + searchFor,'i'), 'hasexclloc': RegExp('' + searchFor,'i'), 'visited': RegExp('' + searchFor,'i'), 'pricelist': RegExp('' + searchFor,'i'), 'poi_rout_com': RegExp('' + searchFor,'i'), 'vtype': RegExp('' + searchFor,'i'), 'FormattedDate': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTROUTES.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTROUTES.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTROUTES.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTROUTES.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTROUTES.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTROUTES'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTROUTES'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTROUTES'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTROUTES'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTROUTES');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	view: {
		type: 'dynamic',
		size: 50,
		maxSize: 0,
		offset: 10,
		navigation: {
			pull: {
				allow: true,
				size: 40
			},
			prev: {
				html: 'Previous',
				className: 'listNavButtonPrev ',
				pressedClassName: ''
			},
			next: {
				html: 'Next',
				className: 'listNavButtonNext ',
				pressedClassName: ''
			},
			event: 'navigate'
		}
	},
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
'_systemButtononClick_Make Visit' : {
	"selectable": true,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { setTimeout(function() {
 DLG1_DlgObj.setValue('phoneorder',0);
 DLG1_DlgObj.setValueFrom('poiname','list::LSTROUTES::POINAME') ;
 DLG1_DlgObj.setValueFrom('poitype','list::LSTROUTES::POI_TYPE');
 DLG1_DlgObj.setValueFrom('besttime','list::LSTROUTES::BESTTIME');
 DLG1_DlgObj.setValueFrom('region','list::LSTROUTES::REGION');
 DLG1_DlgObj.setValueFrom('comment','list::LSTROUTES::COMMENT');
 DLG1_DlgObj.setValueFrom('phoneno','list::LSTROUTES::PHONENO');
 DLG1_DlgObj.setValueFrom('route','list::LSTROUTES::route_id');
 DLG1_DlgObj.setValueFrom('poiid','list::LSTROUTES::poiid');
 DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTROUTES::poiid');
 DLG1_DlgObj.setValueFrom('pricelist','list::LSTROUTES::pricelist');
 DLG1_DlgObj.setValueFrom('txtpoilat','list::LSTROUTES::LAT') ;
 DLG1_DlgObj.setValueFrom('txtpoilong','list::LSTROUTES::LONT') ;
 setTimeout(makeVisit,250);
},100); }(index,v,args,data,this,this))
				}
},
'_MENU_onClick_menu1' : {
	"selectable": false,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { listObj.setValue(rowNumber,true);lObj.__list_menu_show('MENU1',rowNumber); }(index,v,args,data,this,this))
				}
}
},
	_searchHighlighting: false,
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: 'caafdd66-9037-4cfe-a583-27f9d519dfe7'
};
DLG1_DlgObj._listViewSettings['LSTOFFROUTE'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: true,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	kanbancolor: function(data) { var _f = '';
try{
 _f = this.layouts[this.layout].kanBan.colorFunction;
}catch(err) { }
if(typeof _f == 'function') var val = _f.call(this,data);
return val;},
	_dataSourceType: 'SQL',
	_menuSettings: {
	'MENU' : {type: 'Image',imageClosed: 'svgIcon=#alpha-icon-bars:icon,24',image_rotate: true,image_rotate_duration: 300,imageOpen: 'svgIcon=#alpha-icon-xLarge:icon,24',menuType: 'Cascading',menuSettings: {
		"listName": "LSTOFFROUTE",
		"theme": "Alpha-Magenta",
		"style": "background-color: ;",
		"iconColumn": {
			"width": "20px"
		},
		"animation": {
			"show": {
				"type": "slide",
				"duration": "fast"
			},
			"hide": {
				"type": "none"
			}
		},
		"onHide": function() { 	
			var lObj = DLG1_DlgObj.getControl('LSTOFFROUTE');
			if(lObj._menuName != '') {
				if(lObj.onMenuClose) lObj.onMenuClose(lObj._menuName,rowNumber,lObj);
				var obj = lObj._menuSettings[lObj._menuName];
				var rowNumber = obj.existingRowNumber;
				var idIcon = 'DLG1.' + lObj.listVariableName + '.' + lObj._menuName + '.MENU.' + rowNumber;
				var ele = $(idIcon);
				obj.isOpen = false;
				obj.closingRowNumber = rowNumber;
				setTimeout(function() {if(obj.closingRowNumber == rowNumber) obj.closingRowNumber = -1; delete obj; } ,600)
				var duration = obj.image_rotate_duration;
				if(typeof duration == 'undefined') duration = 600;
				obj.existingRowNumber = -1
				lObj._menuName = '';
				if (obj.image_rotate) lObj.__list_menu_rotate(ele,90,0,obj.imageClosed,duration);
			}
		}
	}}
},
	__list_menu_show: function(name,rowNumber) {		var flag;
		var lObj = this;
		if(lObj.beforeMenuOpen) flag = lObj.beforeMenuOpen(name,rowNumber,listObj);
		if(typeof flag == 'undefined') flag = true;
		if(!flag) return;
		var obj = lObj._menuSettings[name];
		if(typeof obj == 'undefined') return;
		var idIcon = 'DLG1.' + lObj.listVariableName + '.' + name + '.MENU.' + rowNumber;
		var ele = $(idIcon);
		var menuData = obj.menuData;
		var menuSettings = obj.menuSettings;
		var objMenuObject = obj.menuObject;
		if(typeof objMenuObject == 'undefined') {
			menuSettings.rowNumber = rowNumber;
			obj.menuObject = new A5.Menu(menuData,menuSettings);
			objMenuObject = obj.menuObject
		} else {
			objMenuObject.rowNumber = rowNumber;
			objMenuObject.populate(menuData);
		}
		var flagIsOpen = obj.isOpen;
		var existingRowNumber = obj.existingRowNumber;
		if(typeof existingRowNumber == 'undefined') existingRowNumber = -1;
		var closingRowNumber = obj.closingRowNumber
		if(typeof closingRowNumber == 'undefined') closingRowNumber = -1;
		if(typeof flagIsOpen == 'undefined') flagIsOpen = false;
		if(rowNumber == closingRowNumber) flagIsOpen = true;
		var that = this;
		setTimeout(function() {
			if(!flagIsOpen ) {
				obj.isOpen = true;
				obj.existingRowNumber = rowNumber;
				lObj._menuName = name;
				var duration = obj.image_rotate_duration;
				if(typeof duration == 'undefined') duration = 600
				if (obj.image_rotate) that.__list_menu_rotate(ele,0,90,obj.imageOpen,duration);
				objMenuObject.show('dropdown',ele); return false;
			}
		},0);
	}
,
	__list_menu_rotate: function(ele,from,to,terminalImage,duration) {		if(typeof duration == 'undefined') duration = 300;
		if(terminalImage == 'undefined') terminalImage = '';
		if(terminalImage != '') {
			var _onComplete = function() {
				ele.innerHTML = A5.u.icon.html(terminalImage);
			}
		} else {
			var _onComplete = function() { };
		}
			A5.u.element.transition(ele,{
					from: { transform: 'rotate('+from+'deg)'},
					to: {   transform: 'rotate('+to+'deg)'	},
					duration: duration
				},
				_onComplete)
}
,
	__list_menu_hide: function() { 		//called by the onScroll event
		var obj = lObj._menuSettings
		var isOpen;
		var menuObject
		var imageClosed
		for(var n in obj) {
			isOpen = obj[n].isOpen;
			if(isOpen) {
				imageClosed = obj[n].imageClosed
				menuObject = obj[n].menuObject;
				if(menuObject) menuObject.hide(lObj)
				if(typeof imageClosed == 'undefined') imageClosed = '';
				//if(lObj && lObj.rotate) lObj.rotate(ele,90,0,imageClosed,600);
				if(lObj && lObj.__list_menu_rotate) lObj.__list_menu_rotate(ele,90,0,imageClosed,600);
			}
		}
	}
,
	_listFields: [
{
	name: 'COMMENT',
	defaultValue: 'return this._controlDefaultValueForListField(\'COMMENT\');'
},
{
	name: 'area',
	defaultValue: 'return this._controlDefaultValueForListField(\'area\');'
},
{
	name: 'pricelist',
	defaultValue: 'return this._controlDefaultValueForListField(\'pricelist\');'
},
{
	name: 'CONTACTPERSON',
	defaultValue: 'return this._controlDefaultValueForListField(\'CONTACTPERSON\');'
},
{
	name: 'PHONENO',
	defaultValue: 'return this._controlDefaultValueForListField(\'PHONENO\');'
},
{
	name: 'poiid',
	defaultValue: 'return this._controlDefaultValueForListField(\'poiid\');'
},
{
	name: 'medrep_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'medrep_id\');'
},
{
	name: 'POINAME',
	defaultValue: 'return this._controlDefaultValueForListField(\'POINAME\');'
},
{
	name: 'LAT',
	defaultValue: 'return this._controlDefaultValueForListField(\'LAT\');'
},
{
	name: 'LONT',
	defaultValue: 'return this._controlDefaultValueForListField(\'LONT\');'
},
{
	name: 'BESTTIME',
	defaultValue: 'return this._controlDefaultValueForListField(\'BESTTIME\');'
},
{
	name: 'POI_TYPE',
	defaultValue: 'return this._controlDefaultValueForListField(\'POI_TYPE\');'
},
{
	name: 'POTENTIALITY',
	defaultValue: 'return this._controlDefaultValueForListField(\'POTENTIALITY\');'
},
{
	name: 'REGION',
	defaultValue: 'return this._controlDefaultValueForListField(\'REGION\');'
},
{
	name: 'frequency',
	defaultValue: 'return this._controlDefaultValueForListField(\'frequency\');'
},
{
	name: 'hasexclloc',
	defaultValue: 'return this._controlDefaultValueForListField(\'hasexclloc\');'
},
{
	name: 'SPECIALITY',
	defaultValue: 'return this._controlDefaultValueForListField(\'SPECIALITY\');'
},
{
	name: 'mcycle',
	defaultValue: 'return this._controlDefaultValueForListField(\'mcycle\');'
},
{
	name: 'mvisitcnt',
	defaultValue: 'return this._controlDefaultValueForListField(\'mvisitcnt\');'
},
{
	name: 'mcyclefdat',
	defaultValue: 'return this._controlDefaultValueForListField(\'mcyclefdat\');'
},
{
	name: 'mcycletdat',
	defaultValue: 'return this._controlDefaultValueForListField(\'mcycletdat\');'
}],
	_delayRenderTillRefresh: true,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTOFFROUTE.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTOFFROUTE name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTOFFROUTE');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTOFFROUTE.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent',
				progress: {
				},
				onProgressEvent: ''
			},
			onErrorFunction: function(e) { }
		}
	},
	_indexdb: {
		mediafiles: {
			download: false,
			showProgress: false,
			progress: {
			},
			downloadHasOnProgressEvent: false,
			upload: {
				showProgress: false
			}
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: false,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	theme: 'Alpha-Magenta:subtle',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['poiid']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTOFFROUTE',
	listVariableNameTrueCase: 'LSTOFFROUTE',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: true,
	__flagIncrementalRefreshAfterLoad: false,
	__version: 2,
	__persistWhere: 'IndexDB',
	__persistMode: 'full',
	_beforePersistToStorage: function(obj) { 	
	this._executeEvent('onBeforePersistToLocalStorage',obj)
	this.__doPersist = true;
	if(typeof obj.userData == 'undefined') obj.userData = {};
	this.__userData = obj.userData;
	//snapshot the list data in case the persist fails
	this._dataSnapshot = [].concat(this._data);
}
,
	persistToStorage: function(obj) { 	//system generated beforePersistToStorage code here
	var flagSuspendPersist = false;
	if(typeof this.suspendPersist != 'undefined') flagSuspendPersist = this.suspendPersist;
	if(flagSuspendPersist) return true;
	if(typeof obj.submode != 'undefined') {
		if(obj.submode == 'ListViewData') {
			var _wh = DLG1_DlgObj.__persistWhere(this.listVariableName);
			//see comment in a5DialogHelper_ListViewData() line 450
			if(_wh == 'fs') return;
		}
	}
	var result = DLG1_DlgObj.persistListToLocalStorage(this,obj);
	delete this.__userData;
	if(result) {
		delete this._dataSnapshot;
	} else {
		this.populate(this._dataSnapshot,false,false,false);  //need to .populate() without firing events
		delete this._dataSnapshot;
	}
	if(typeof this._pm_persistWhere == 'undefined') this._pm_persistWhere = 'localStorage';
	//the onPersistToLocalStorage event is fired in either the _persistToLocalStorageLow() methdo (for local storage) or _persistListToFile() method
	this._flagPersistDataOK = result;
	if(!result) {
		if(typeof this._tempFlagServerSideSearch != 'undefined') {
			if(this._tempFlagServerSideSearch) {
				this._executeEvent('onSearchResultTooLargeForLocalStorage',obj);
			}
			delete this._tempFlagServerSideSearch;
		}
	}
}
,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;if(!this._isInit && !this._restoringList) this._beforePersistToStorage({mode:'populate', data: data});
},
	onPopulate: function(data) {if(!this._isInit && !this._restoringList) {this.persistToStorage({mode:'populate', data: data}); }; if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){this._beforePersistToStorage({mode:'update', data: data, index: index});},
	onUpdateRow: function(index,data){this.persistToStorage({mode:'update', data: data, index: index});},
	onBeforeAddRows: function(data,info){this._beforePersistToStorage({mode:'add', data: data});},
	onAddRows: function(data,info){this.persistToStorage({mode:'add', data: data});},
	onBeforeRemoveRows: function(rows){this._beforePersistToStorage({mode:'remove', rows: rows});},
	onRemoveRows: function(rows){this.persistToStorage({mode:'remove', data: rows});},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	onItemDraw: function(ele,data,index) {
if(data.visited==1) {$ss(ele,$gs(ele)+';background: #33cccc;|#|{text: \'\',function: \'\'}');}
if(OffrouteVisited(data.mvisitcnt,data.frequency,data.mcyclefdat,data.mcycletdat) ) {$ss(ele,$gs(ele)+';font-style: italic; background: #cdffcc;|#|{text: \'\',function: \'\'}');}
},
	childLists: [],
	childListEndpoints: ['LSTOFFROUTE'],
	_populateAllChildLists: function() { },
	onSelect: function() {DLG1_DlgObj._listRowSelect('LSTOFFROUTE',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTOFFROUTE'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTOFFROUTE'];
		var lObj = DLG1_DlgObj.getControl('LSTOFFROUTE');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};;
this._selectedRow = this.selection[0];
;},
	onClick: function() {},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: 'listItem',
				hoverClassName: '',
				selectedClassName: 'listItem',
				style: 'margin: 1px; border-bottom-style: groove; border-bottom-width: 1px; border-bottom-color: #5282c8;',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%; ;">',
			'    <div style="display: table-cell; width: 40px; text-align: left; vertical-align: middle;">',
			'\t\t<div style="display:inline-block" id="DLG1.LSTOFFROUTE.MENU.MENU.{*dataRow}" title="" a5-item="_MENU_onClick_Menu">{@A5.u.icon.html(<escape<\'svgIcon=#alpha-icon-bars:icon,24\'>>)}</div>',
			'\t</div>',
			'',
			'\t<div style="display: table-cell; vertical-align: middle;">',
			'\t<div class="[theme:listBox.base.item.parts.contextClassName|Alpha-MagentaListItemLabelContext]" style="float: right;"><span id="DLG1.LSTOFFROUTE.SPECIALITY.I.{*dataRow}">{SPECIALITY}</span></div>',
			'\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span id="DLG1.LSTOFFROUTE.POINAME.I.{*dataRow}">{POINAME}</span></div>',
			'\t<div class="[theme:listBox.base.item.parts.subClassName|Alpha-MagentaListItemLabelSub]"><span id="DLG1.LSTOFFROUTE.AREA.I.{*dataRow}">{area}</span></div>',
			'\t<div class="[theme:listBox.base.item.parts.detailClassName|Alpha-MagentaListItemLabelDetail]" style="float: right;"><span id="DLG1.LSTOFFROUTE.BESTTIME.I.{*dataRow}">{BESTTIME}</span></div>',
			'\t<div class="[theme:listBox.base.item.parts.detailClassName|Alpha-MagentaListItemLabelDetail]" style="float: right;"><span id="DLG1.LSTOFFROUTE.POTENTIALITY.I.{*dataRow}">{POTENTIALITY}</span></div>',
			'    <div class="[theme:listBox.base.item.parts.detailClassName|Alpha-MagentaListItemLabelDetail]" style="float: right;"><span id="DLG1.LSTOFFROUTE.FREQUENCY.I.{*dataRow}">{frequency}</span> &nbsp;\t / &nbsp;\t <span id="DLG1.LSTOFFROUTE.MVISITCNT.I.{*dataRow}">{mvisitcnt}</span></div>',
			'    </div>',
			'\t<div style="display: table-cell; width: 30px; text-align: right; vertical-align: middle;">',
			'\t\t<span id="DLG1.LSTOFFROUTE.MAKEVISIT.I.{*dataRow}"><button  a5-item="_systemButtononClick_MakeVisit"  id="DLG1.LSTOFFROUTE.MAKEVISIT.BTN.{*dataRow}"  class="[class.dialogButton]" style="cursor:pointer;" title="">{@A5.u.icon.html(<escape<\'makevisit.png\'>>)}</button></span>',
			'\t</div>',
			'\t',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		if(lObj.__list_menu_hide) lObj.__list_menu_hide(); 
lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTOFFROUTE',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	detailViewIsDirty: function() { return false; },
	populateUXControls: function() { return true; },
	listIsDirty: function() { return false; },
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: false,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTOFFROUTE'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTOFFROUTE&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'COMMENT': RegExp('' + searchFor,'i'), 'area': RegExp('' + searchFor,'i'), 'pricelist': RegExp('' + searchFor,'i'), 'CONTACTPERSON': RegExp('' + searchFor,'i'), 'PHONENO': RegExp('' + searchFor,'i'), 'poiid': RegExp('' + searchFor,'i'), 'medrep_id': RegExp('' + searchFor,'i'), 'POINAME': RegExp('' + searchFor,'i'), 'LAT': RegExp('' + searchFor,'i'), 'LONT': RegExp('' + searchFor,'i'), 'BESTTIME': RegExp('' + searchFor,'i'), 'POI_TYPE': RegExp('' + searchFor,'i'), 'POTENTIALITY': RegExp('' + searchFor,'i'), 'REGION': RegExp('' + searchFor,'i'), 'frequency': RegExp('' + searchFor,'i'), 'hasexclloc': RegExp('' + searchFor,'i'), 'SPECIALITY': RegExp('' + searchFor,'i'), 'mcycle': RegExp('' + searchFor,'i'), 'mvisitcnt': RegExp('' + searchFor,'i'), 'mcyclefdat': RegExp('' + searchFor,'i'), 'mcycletdat': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTOFFROUTE.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTOFFROUTE.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTOFFROUTE.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTOFFROUTE.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTOFFROUTE.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTOFFROUTE'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTOFFROUTE'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTOFFROUTE'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTOFFROUTE'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTOFFROUTE');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	view: {
		type: 'dynamic',
		size: 35,
		maxSize: 100,
		offset: 10,
		navigation: {
			pull: {
				allow: true,
				size: 40
			},
			prev: {
				html: 'Previous',
				className: 'listNavButtonPrev ',
				pressedClassName: ''
			},
			next: {
				html: 'Next',
				className: 'listNavButtonNext ',
				pressedClassName: ''
			},
			event: 'navigate'
		}
	},
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
'_systemButtononClick_MakeVisit' : {
	"selectable": false,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { listObj.setValue(rowNumber,false);DLG1_DlgObj.runAction('showwait1');
setTimeout(function() {
 DLG1_DlgObj.setValue('phoneorder',0);
 DLG1_DlgObj.setValueFrom('poiname','list::LSTOFFROUTE::POINAME') ;
 DLG1_DlgObj.setValueFrom('poitype','list::LSTOFFROUTE::POI_TYPE');
 DLG1_DlgObj.setValueFrom('besttime','list::LSTOFFROUTE::BESTTIME');
 DLG1_DlgObj.setValueFrom('region','list::LSTOFFROUTE::REGION');
 DLG1_DlgObj.setValueFrom('comment','list::LSTOFFROUTE::COMMENT');
 DLG1_DlgObj.setValueFrom('phoneno','list::LSTOFFROUTE::PHONENO');
 DLG1_DlgObj.setValue('route',0);
 DLG1_DlgObj.setValueFrom('poiid','list::LSTOFFROUTE::poiid');
 DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTOFFROUTE::poiid');
 DLG1_DlgObj.setValueFrom('pricelist','list::LSTOFFROUTE::pricelist');
 DLG1_DlgObj.setValueFrom('txtpoilat','list::LSTOFFROUTE::LAT') ;
 DLG1_DlgObj.setValueFrom('txtpoilong','list::LSTOFFROUTE::LONT') ;
 setTimeout(makeVisit,500);
},100); }(index,v,args,data,this,this))
				}
},
'_MENU_onClick_Menu' : {
	"selectable": false,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { listObj.setValue(rowNumber,true);lObj.__list_menu_show('MENU',rowNumber); }(index,v,args,data,this,this))
				}
}
},
	_searchHighlighting: false,
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '5e9a58e3-969d-4017-807d-ad71e08ebc6e'
};
DLG1_DlgObj._listViewSettings['LSTVISITHEAD'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	kanbancolor: function(data) { var _f = '';
try{
 _f = this.layouts[this.layout].kanBan.colorFunction;
}catch(err) { }
if(typeof _f == 'function') var val = _f.call(this,data);
return val;},
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'paimentmod',
	defaultValue: 'return this._controlDefaultValueForListField(\'paimentmod\');'
},
{
	name: 'Deliverymethod',
	defaultValue: 'return this._controlDefaultValueForListField(\'Deliverymethod\');'
},
{
	name: 'ordshipdate',
	defaultValue: 'return this._controlDefaultValueForListField(\'ordshipdate\');'
},
{
	name: 'visitsuper',
	defaultValue: 'return this._controlDefaultValueForListField(\'visitsuper\');'
},
{
	name: 'date',
	defaultValue: 'return this._controlDefaultValueForListField(\'date\');'
},
{
	name: 'routeid',
	defaultValue: 'return this._controlDefaultValueForListField(\'routeid\');'
},
{
	name: 'poiid',
	decode: true,
	defaultValue: 'return this._controlDefaultValueForListField(\'poiid\');'
},
{
	name: 'medrepid',
	defaultValue: 'return this._controlDefaultValueForListField(\'medrepid\');'
},
{
	name: 'starttime',
	defaultValue: 'return this._controlDefaultValueForListField(\'starttime\');'
},
{
	name: 'endtime',
	defaultValue: 'return this._controlDefaultValueForListField(\'endtime\');'
},
{
	name: 'latx',
	defaultValue: 'return this._controlDefaultValueForListField(\'latx\');'
},
{
	name: 'laty',
	defaultValue: 'return this._controlDefaultValueForListField(\'laty\');'
},
{
	name: 'accuracy',
	defaultValue: 'return this._controlDefaultValueForListField(\'accuracy\');'
},
{
	name: 'altitude',
	defaultValue: 'return this._controlDefaultValueForListField(\'altitude\');'
},
{
	name: 'altitudeaccur',
	defaultValue: 'return this._controlDefaultValueForListField(\'altitudeaccur\');'
},
{
	name: 'heading',
	defaultValue: 'return this._controlDefaultValueForListField(\'heading\');'
},
{
	name: 'speed',
	defaultValue: 'return this._controlDefaultValueForListField(\'speed\');'
},
{
	name: 'timestanpd',
	defaultValue: 'return this._controlDefaultValueForListField(\'timestanpd\');'
},
{
	name: 'VisitType',
	defaultValue: 'return this._controlDefaultValueForListField(\'VisitType\');'
},
{
	name: 'VisitObjective',
	defaultValue: 'return this._controlDefaultValueForListField(\'VisitObjective\');'
},
{
	name: 'Responsible_Availaible',
	defaultValue: 'return this._controlDefaultValueForListField(\'Responsible_Availaible\');'
},
{
	name: 'Wait_Time',
	defaultValue: 'return this._controlDefaultValueForListField(\'Wait_Time\');'
},
{
	name: 'SpecialRequest',
	defaultValue: 'return this._controlDefaultValueForListField(\'SpecialRequest\');'
},
{
	name: 'Coment',
	defaultValue: 'return this._controlDefaultValueForListField(\'Coment\');'
},
{
	name: 'havesample',
	defaultValue: 'return this._controlDefaultValueForListField(\'havesample\');'
},
{
	name: 'Signature',
	defaultValue: 'return this._controlDefaultValueForListField(\'Signature\');'
},
{
	name: 'Feedback',
	defaultValue: 'return this._controlDefaultValueForListField(\'Feedback\');'
},
{
	name: 'Discount',
	defaultValue: 'return this._controlDefaultValueForListField(\'Discount\');'
},
{
	name: 'skipreas',
	defaultValue: 'return this._controlDefaultValueForListField(\'skipreas\');'
},
{
	name: 'skipcomment',
	defaultValue: 'return this._controlDefaultValueForListField(\'skipcomment\');'
},
{
	name: 'company_id',
	defaultValue: 'mcpId = DLG1_DlgObj.getValue(\'COMPANYID\');\r\n\r\nreturn mcpId ;'
},
{
	name: 'starth',
	defaultValue: 'return this._controlDefaultValueForListField(\'starth\');'
},
{
	name: 'startm',
	defaultValue: 'return this._controlDefaultValueForListField(\'startm\');'
},
{
	name: 'endh',
	defaultValue: 'return this._controlDefaultValueForListField(\'endh\');'
},
{
	name: 'endm',
	defaultValue: 'return this._controlDefaultValueForListField(\'endm\');'
},
{
	name: 'deal_amount',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_amount\');'
},
{
	name: 'deal_startd',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_startd\');'
},
{
	name: 'deal_roi_date',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_roi_date\');'
},
{
	name: 'deal_type',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_type\');'
},
{
	name: 'deal_item1',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item1\');'
},
{
	name: 'deal_item1q',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item1q\');'
},
{
	name: 'deal_item2',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item2\');'
},
{
	name: 'deal_item2q',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item2q\');'
},
{
	name: 'deal_item3',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item3\');'
},
{
	name: 'deal_item3q',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item3q\');'
},
{
	name: 'deal_item4',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item4\');'
},
{
	name: 'deal_item4q',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item4q\');'
},
{
	name: 'deal_source_sale',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_source_sale\');'
},
{
	name: 'deal_source_name',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_source_name\');'
},
{
	name: 'deal_phname',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_phname\');'
},
{
	name: 'deal_ph_invno',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_ph_invno\');'
},
{
	name: 'deal_ph_date',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_ph_date\');'
},
{
	name: 'deal_pay_method',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_pay_method\');'
},
{
	name: 'deal_bank',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_bank\');'
},
{
	name: 'deal_bank_acc',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_bank_acc\');'
},
{
	name: 'deal_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_id\');',
	image: {
		embedded: true,
		type: 'JPG'
	}
},
{
	name: 'deal_coment',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_coment\');'
},
{
	name: 'deal_pay',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_pay\');'
}],
	_delayRenderTillRefresh: true,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTVISITHEAD.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTVISITHEAD name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTVISITHEAD.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: true,
			progress: {
				color: '#9fa1e8',
				element: 'DLG1.V.R1.SYNC',
				width: '300px'
			},
			download: {
				autodownloadFilesOnPullSynch: true,
				deleteOrphansAfterSync: true,
				targetFolder: '_AAFiles',
				showProgress: true,
				targetFileSystem: 'persistent',
				progress: {
					color: '#9fa1e8',
					element: 'DLG1.V.R1.LOAD',
					width: '300px'
				},
				onProgressEvent: ''
			},
			onErrorFunction: function(e) { }
		}
	},
	systemEvents: {
		_onListReady: '',
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {var errorCount = e.recordsWithErrors;
    var totalRecords = e.recordsSubmitted;
    var haserror = e.hasErrors ;
 console.log(e);
    if (haserror > 0) {
        var msg = "Sync completed with " + errorCount + " error(s) out of " + totalRecords + " record(s).";
        alert(msg);
    } else {
        console.log("All records synced successfully.");
    }
  DLG1_DlgObj.hideWaitMessage();
  DLG1_DlgObj.setValue('saving',0);
DLG1_DlgObj.hideContainerWindow('WINDOW_PROGRESS');},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);
DLG1_DlgObj.getControl('LSTVISITHEAD')._populateMyChildren();},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	_indexdb: {
		mediafiles: {
			download: true,
			showProgress: true,
			progress: {
				color: '#9fa1e8',
				element: 'DLG1.V.R1.LOAD',
				width: '300px'
			},
			downloadHasOnProgressEvent: false,
			upload: {
				showProgress: true,
				progress: {
					color: '#9fa1e8',
					element: 'DLG1.V.R1.SYNC',
					width: '300px'
				}
			}
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [
{
	field: 'paimentmod',
	control: 'PayMode'
},
{
	field: 'Deliverymethod',
	control: 'DeliveryMode'
},
{
	field: 'ordshipdate',
	control: 'Shipdate'
},
{
	field: 'visitsuper',
	control: 'Supervisor'
},
{
	field: 'date',
	control: 'date_2'
},
{
	field: 'routeid',
	control: 'routeid'
},
{
	field: 'poiid',
	control: 'poiid'
},
{
	field: 'medrepid',
	control: 'medrepid'
},
{
	field: 'starttime',
	control: 'starttime'
},
{
	field: 'endtime',
	control: 'endtime'
},
{
	field: 'latx',
	control: 'latx'
},
{
	field: 'laty',
	control: 'laty'
},
{
	field: 'accuracy',
	control: 'accuracy'
},
{
	field: 'altitude',
	control: 'altitude'
},
{
	field: 'altitudeaccur',
	control: 'altitudeaccur'
},
{
	field: 'heading',
	control: 'heading'
},
{
	field: 'speed',
	control: 'speed'
},
{
	field: 'timestanpd',
	control: 'timestanpd'
},
{
	field: 'VisitType',
	control: 'VisitType'
},
{
	field: 'VisitObjective',
	control: 'VisitObjective'
},
{
	field: 'SpecialRequest',
	control: 'SpecialRequest'
},
{
	field: 'Coment',
	control: 'Coment'
},
{
	field: 'Signature',
	control: 'signaturecapture1'
},
{
	field: 'Feedback',
	control: 'FeedBack'
},
{
	field: 'skipreas',
	control: 'skipreas'
},
{
	field: 'skipcomment',
	control: 'skipcomment'
},
{
	field: 'company_id',
	control: 'visithead_comp_id'
},
{
	field: 'starth',
	control: 'starth'
},
{
	field: 'startm',
	control: 'startm'
},
{
	field: 'endh',
	control: 'endh'
},
{
	field: 'endm',
	control: 'endm'
}],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 10,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTVISITHEAD',
	listVariableNameTrueCase: 'LSTVISITHEAD',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	onBeforeItemDraw: function(data,index) {
var lobj = DLG1_DlgObj.getControl('LSTOFFROUTE');
if(lobj) {
	var lookupData = lobj.lookupValue(['poiid'],'__rowData__',[data.poiid]);
	data.thepoiname = lookupData;
	this._data[this._dataMap[index]].thepoiname = lookupData;
}
;
;
;},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: true,
	__flagIncrementalRefreshAfterLoad: false,
	__version: 1,
	__persistWhere: 'IndexDB',
	__persistMode: 'full',
	_beforePersistToStorage: function(obj) { 	
	this._executeEvent('onBeforePersistToLocalStorage',obj)
	this.__doPersist = true;
	if(typeof obj.userData == 'undefined') obj.userData = {};
	this.__userData = obj.userData;
	//snapshot the list data in case the persist fails
	this._dataSnapshot = [].concat(this._data);
}
,
	persistToStorage: function(obj) { 	//system generated beforePersistToStorage code here
	var flagSuspendPersist = false;
	if(typeof this.suspendPersist != 'undefined') flagSuspendPersist = this.suspendPersist;
	if(flagSuspendPersist) return true;
	if(typeof obj.submode != 'undefined') {
		if(obj.submode == 'ListViewData') {
			var _wh = DLG1_DlgObj.__persistWhere(this.listVariableName);
			//see comment in a5DialogHelper_ListViewData() line 450
			if(_wh == 'fs') return;
		}
	}
	var result = DLG1_DlgObj.persistListToLocalStorage(this,obj);
	delete this.__userData;
	if(result) {
		delete this._dataSnapshot;
	} else {
		this.populate(this._dataSnapshot,false,false,false);  //need to .populate() without firing events
		delete this._dataSnapshot;
	}
	if(typeof this._pm_persistWhere == 'undefined') this._pm_persistWhere = 'localStorage';
	//the onPersistToLocalStorage event is fired in either the _persistToLocalStorageLow() methdo (for local storage) or _persistListToFile() method
	this._flagPersistDataOK = result;
	if(!result) {
		if(typeof this._tempFlagServerSideSearch != 'undefined') {
			if(this._tempFlagServerSideSearch) {
				this._executeEvent('onSearchResultTooLargeForLocalStorage',obj);
			}
			delete this._tempFlagServerSideSearch;
		}
	}
}
,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;if(!this._isInit && !this._restoringList) this._beforePersistToStorage({mode:'populate', data: data});
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit && !this._restoringList) {this.persistToStorage({mode:'populate', data: data}); }; if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){this._beforePersistToStorage({mode:'update', data: data, index: index});},
	onUpdateRow: function(index,data){this.persistToStorage({mode:'update', data: data, index: index});},
	onBeforeAddRows: function(data,info){this._beforePersistToStorage({mode:'add', data: data});},
	onAddRows: function(data,info){this.persistToStorage({mode:'add', data: data});},
	onBeforeRemoveRows: function(rows){this._beforePersistToStorage({mode:'remove', rows: rows});},
	onRemoveRows: function(rows){this.persistToStorage({mode:'remove', data: rows});},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTVISITHEAD_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTVISITHEAD_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTVISITHEAD_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTVISITHEAD_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTVISITHEAD_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTVISITHEAD_hasErrorInherited _DLG1_LSTVISITHEAD_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTVISITHEAD_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTVISITHEAD_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTVISITHEAD_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTVISITHEAD_newRow';
 var _newRowStyle = '_DLG1_LSTVISITHEAD_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTVISITHEAD_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTVISITHEAD_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTVISITHEAD_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: ['LSTDISCUSSED','LSTSAMPLES','LSTORDERS','LSTINVOICES','LSTRECEIPT','LSTVISITNOTES'],
	childListEndpoints: ['LSTDISCUSSED','LSTSAMPLES','LSTORDERS','LSTINVOICES','LSTRECEIPT','LSTVISITNOTES'],
	_populateAllChildLists: function() { this._emptyAllChildLists();
this._populateChildList('LSTDISCUSSED');
this._populateChildList('LSTSAMPLES');
this._populateChildList('LSTORDERS');
this._populateChildList('LSTINVOICES');
this._populateChildList('LSTRECEIPT');
this._populateChildList('LSTVISITNOTES');
 },
	onSelect: function() {var _changeWatchState = true; var _dlgObj = window[this._hostComponentId + '_DlgObj']; if(_dlgObj._fireWatchesFlag == false) { _changeWatchState = false; } 
_dlgObj._fireWatchesFlag = false;
 this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('LSTVISITHEAD',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTVISITHEAD'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTVISITHEAD'];
		var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
this._emptyAllChildLists();
this._populateChildList('LSTDISCUSSED');
this._populateChildList('LSTSAMPLES');
this._populateChildList('LSTORDERS');
this._populateChildList('LSTINVOICES');
this._populateChildList('LSTRECEIPT');
this._populateChildList('LSTVISITNOTES');
if(_changeWatchState) {  _dlgObj._fireWatchesFlag = true;
_dlgObj._fireWatches(1);}
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
DLG1_DlgObj._listSystemOnClick('LSTVISITHEAD',this.selection[0]);
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%;">',
			'\t<div style="display: table-cell; vertical-align: middle;">',
			'\t<div class="[theme:listBox.base.item.parts.contextClassName|Alpha-MagentaListItemLabelContext]" style="float: right;"><span id="DLG1.LSTVISITHEAD.DATE.I.{*dataRow}">{date}</span></div>',
			'\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span id="DLG1.LSTVISITHEAD.POIID.I.{*dataRow}">{@[scope].resolveCodedValue(\'poiid\',poiid)}</span></div>',
			'\t<div class="[theme:listBox.base.item.parts.subClassName|Alpha-MagentaListItemLabelSub]">{thepoiname.POINAME}</div>',
			'\t<div class="[theme:listBox.base.item.parts.contentClassName|Alpha-MagentaListItemContent]">',
			'\t\t<div class="[theme:listBox.base.item.parts.detailClassName|Alpha-MagentaListItemLabelDetail]" style="float: right;"><span id="DLG1.LSTVISITHEAD.COMENT.I.{*dataRow}">{Coment}</span></div>',
			'\t\t<span id="DLG1.LSTVISITHEAD.MEDREPID.I.{*dataRow}">{medrepid}</span><br/>',
			'\t\t',
			'\t</div>',
			'\t</div>',
			'\t<div style="display: table-cell; width: 40px; text-align: right; vertical-align: middle;">',
			'\t\t<span id="DLG1.LSTVISITHEAD.EDIT.I.{*dataRow}"><button  a5-item="_systemButtononClick_Edit"  id="DLG1.LSTVISITHEAD.EDIT.BTN.{*dataRow}"  class="[class.dialogButton]" style="cursor:pointer;" title="">Edit Visit</button></span>',
			'\t</div>',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTVISITHEAD',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.PLACEHOLDER_13');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {var debugObj = this.harvestList();
		var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.PLACEHOLDER_13');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
	},
	_showSQL_CRUD: function(txt) { var ahtml= [];ahtml.push('<a \tclass="Alpha-MagentaLink"');
ahtml.push('href="#"');
ahtml.push('onclick="A5.u.element.toggle($(\'DLG1.LSTVISITHEAD.DISPLAYXBASIC\'),{show: {type: \'slide\',duration: \'fast\'},hide: {type: \'slide\',duration: \'fast\'}} )">');
ahtml.push('Click here to show/hide Server-side commands');
ahtml.push('</a><br>');
ahtml.push('<div id="DLG1.LSTVISITHEAD.DISPLAYXBASIC" style="display:none;"></div>');
ahtml.push('');
var txtHTML = ahtml.join('');			var ele = $('DLG1.V.R1.PLACEHOLDER_13'); if(ele) ele.innerHTML = txtHTML;
			$('DLG1.LSTVISITHEAD.DISPLAYXBASIC').innerHTML = txt;
},
	_globalErrorPlaceHolder: 'PLACEHOLDER_12',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: false,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTVISITHEAD'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTVISITHEAD&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'id': RegExp('' + searchFor,'i'), 'paimentmod': RegExp('' + searchFor,'i'), 'Deliverymethod': RegExp('' + searchFor,'i'), 'ordshipdate': RegExp('' + searchFor,'i'), 'visitsuper': RegExp('' + searchFor,'i'), 'date': RegExp('' + searchFor,'i'), 'routeid': RegExp('' + searchFor,'i'), 'poiid': RegExp('' + searchFor,'i'), 'medrepid': RegExp('' + searchFor,'i'), 'starttime': RegExp('' + searchFor,'i'), 'endtime': RegExp('' + searchFor,'i'), 'latx': RegExp('' + searchFor,'i'), 'laty': RegExp('' + searchFor,'i'), 'accuracy': RegExp('' + searchFor,'i'), 'altitude': RegExp('' + searchFor,'i'), 'altitudeaccur': RegExp('' + searchFor,'i'), 'heading': RegExp('' + searchFor,'i'), 'speed': RegExp('' + searchFor,'i'), 'timestanpd': RegExp('' + searchFor,'i'), 'VisitType': RegExp('' + searchFor,'i'), 'VisitObjective': RegExp('' + searchFor,'i'), 'Responsible_Availaible': RegExp('' + searchFor,'i'), 'Wait_Time': RegExp('' + searchFor,'i'), 'SpecialRequest': RegExp('' + searchFor,'i'), 'Coment': RegExp('' + searchFor,'i'), 'havesample': RegExp('' + searchFor,'i'), 'Signature': RegExp('' + searchFor,'i'), 'Feedback': RegExp('' + searchFor,'i'), 'Discount': RegExp('' + searchFor,'i'), 'skipreas': RegExp('' + searchFor,'i'), 'skipcomment': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'starth': RegExp('' + searchFor,'i'), 'startm': RegExp('' + searchFor,'i'), 'endh': RegExp('' + searchFor,'i'), 'endm': RegExp('' + searchFor,'i'), 'deal_amount': RegExp('' + searchFor,'i'), 'deal_startd': RegExp('' + searchFor,'i'), 'deal_roi_date': RegExp('' + searchFor,'i'), 'deal_type': RegExp('' + searchFor,'i'), 'deal_item1': RegExp('' + searchFor,'i'), 'deal_item1q': RegExp('' + searchFor,'i'), 'deal_item2': RegExp('' + searchFor,'i'), 'deal_item2q': RegExp('' + searchFor,'i'), 'deal_item3': RegExp('' + searchFor,'i'), 'deal_item3q': RegExp('' + searchFor,'i'), 'deal_item4': RegExp('' + searchFor,'i'), 'deal_item4q': RegExp('' + searchFor,'i'), 'deal_source_sale': RegExp('' + searchFor,'i'), 'deal_source_name': RegExp('' + searchFor,'i'), 'deal_phname': RegExp('' + searchFor,'i'), 'deal_ph_invno': RegExp('' + searchFor,'i'), 'deal_ph_date': RegExp('' + searchFor,'i'), 'deal_pay_method': RegExp('' + searchFor,'i'), 'deal_bank': RegExp('' + searchFor,'i'), 'deal_bank_acc': RegExp('' + searchFor,'i'), 'deal_coment': RegExp('' + searchFor,'i'), 'deal_pay': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTVISITHEAD.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTVISITHEAD.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTVISITHEAD.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTVISITHEAD.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTVISITHEAD.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTVISITHEAD'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTVISITHEAD'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTVISITHEAD'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTVISITHEAD'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTVISITHEAD');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: true,
	_clearServerSideSyncLog: false,
	items: {
'_systemButtononClick_Edit' : {
	"selectable": true,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { var listObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
if (listObj) {
    var isDirty = listObj.listRowIsDirty();
    if (isDirty) {
       DLG1_DlgObj.panelSetActive('PANELCARD_4');
    } else {
        alert("This visit cannot be edited");
    }
}
 }(index,v,args,data,this,this))
				}
}
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: 'ceb2ce13-98cc-4503-96ae-4e772afb965a'
};
DLG1_DlgObj._listViewSettings['LSTDISCUSSED'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_emptyListWhenParentChanges: false,
	_hasDependentLists: false,
	kanbancolor: function(data) { var _f = '';
try{
 _f = this.layouts[this.layout].kanBan.colorFunction;
}catch(err) { }
if(typeof _f == 'function') var val = _f.call(this,data);
return val;},
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'discussedtype',
	defaultValue: 'return this._controlDefaultValueForListField(\'discussedtype\');'
},
{
	name: 'product_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'product_id\');'
},
{
	name: 'coment',
	defaultValue: 'return this._controlDefaultValueForListField(\'coment\');'
},
{
	name: 'Visit_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'Visit_id\');'
},
{
	name: 'proddesc',
	defaultValue: 'return this._controlDefaultValueForListField(\'proddesc\');'
},
{
	name: 'itemimage',
	defaultValue: 'return this._controlDefaultValueForListField(\'itemimage\');',
	image: {
		embedded: true,
		type: 'JPG'
	}
},
{
	name: 'company_id',
	defaultValue: 'mCpId = DLG1_DlgObj.getValue(\'COMPANYID\');\r\nreturn mCpId;'
}],
	_delayRenderTillRefresh: true,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTDISCUSSED.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTDISCUSSED name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTDISCUSSED');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTDISCUSSED.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent'
			},
			onErrorFunction: function(e) { }
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTDISCUSSED',
	listVariableNameTrueCase: 'LSTDISCUSSED',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: 'LSTVISITHEAD',
	allParentLists: ['LSTVISITHEAD'],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: false,
	__flagIncrementalRefreshAfterLoad: false,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){;},
	onUpdateRow: function(index,data){;},
	onBeforeAddRows: function(data,info){;},
	onAddRows: function(data,info){;},
	onBeforeRemoveRows: function(rows){;},
	onRemoveRows: function(rows){;},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTDISCUSSED_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTDISCUSSED_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTDISCUSSED_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTDISCUSSED_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTDISCUSSED_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTDISCUSSED_hasErrorInherited _DLG1_LSTDISCUSSED_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTDISCUSSED_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTDISCUSSED_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTDISCUSSED_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTDISCUSSED_newRow';
 var _newRowStyle = '_DLG1_LSTDISCUSSED_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTDISCUSSED_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTDISCUSSED_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTDISCUSSED_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: [],
	childListEndpoints: ['LSTDISCUSSED'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('LSTDISCUSSED',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTDISCUSSED'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTDISCUSSED'];
		var lObj = DLG1_DlgObj.getControl('LSTDISCUSSED');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
DLG1_DlgObj._listSystemOnClick('LSTDISCUSSED',this.selection[0]);
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: '[theme:listBox.base.item.className]',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%;">',
			'\t<div style="display: table-cell;">',
			'\t\t<div class="[theme:listBox.base.item.parts.contextClassName|Alpha-MagentaListItemLabelContext]" style="float: right;"><span id="DLG1.LSTDISCUSSED.ITEMIMAGE.I.{*dataRow}">{*if itemimage == \'\'}{*else}<img  id="DLG1.LSTDISCUSSED.ITEMIMAGE.IMG.{*dataRow}"    src="data:image/jpg;base64,{itemimage}" />{*endif}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span id="DLG1.LSTDISCUSSED.PRODDESC.I.{*dataRow}">{proddesc}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.subClassName|Alpha-MagentaListItemLabelSub]"><span id="DLG1.LSTDISCUSSED.DISCUSSEDTYPE.I.{*dataRow}">{discussedtype}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.contentClassName|Alpha-MagentaListItemContent]">',
			'\t\t\t<span id="DLG1.LSTDISCUSSED.COMENT.I.{*dataRow}">{coment}</span><br/>',
			'\t\t\t',
			'\t\t</div>',
			'\t</div>',
			'\t\t\t',
			'\t',
			'\t<div style="display: table-cell; width: 40px; text-align: right; vertical-align: middle;">',
			'\t\t<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>',
			'\t</div>',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTDISCUSSED',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {},
	_showSQL_CRUD: function(txt) { },
	_globalErrorPlaceHolder: 'LSTDISCUSSED_GLOBALERRORS',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: false,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTDISCUSSED'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTDISCUSSED&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'id': RegExp('' + searchFor,'i'), 'discussedtype': RegExp('' + searchFor,'i'), 'product_id': RegExp('' + searchFor,'i'), 'coment': RegExp('' + searchFor,'i'), 'Visit_id': RegExp('' + searchFor,'i'), 'proddesc': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTDISCUSSED.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTDISCUSSED.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTDISCUSSED.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTDISCUSSED.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTDISCUSSED.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTDISCUSSED'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTDISCUSSED'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTDISCUSSED'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTDISCUSSED'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTDISCUSSED');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '999ae78a-3376-40f3-b40e-361a80680878'
};
DLG1_DlgObj._listViewSettings['LSTSAMPLES'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_emptyListWhenParentChanges: false,
	_hasDependentLists: false,
	kanbancolor: function(data) { var _f = '';
try{
 _f = this.layouts[this.layout].kanBan.colorFunction;
}catch(err) { }
if(typeof _f == 'function') var val = _f.call(this,data);
return val;},
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'company_id',
	defaultValue: 'mCpId = DLG1_DlgObj.getValue(\'COMPANYID\');\r\nreturn mCpId;'
},
{
	name: 'prodid',
	defaultValue: 'return this._controlDefaultValueForListField(\'prodid\');'
},
{
	name: 'visitid',
	defaultValue: 'return this._controlDefaultValueForListField(\'visitid\');'
},
{
	name: 'qty',
	defaultValue: 'return this._controlDefaultValueForListField(\'qty\');'
},
{
	name: 'proddesc',
	defaultValue: 'return this._controlDefaultValueForListField(\'proddesc\');'
},
{
	name: 'prodimg',
	defaultValue: 'return this._controlDefaultValueForListField(\'prodimg\');',
	image: {
		embedded: true,
		type: 'JPG'
	}
}],
	_delayRenderTillRefresh: true,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTSAMPLES.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTSAMPLES name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTSAMPLES');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTSAMPLES.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent'
			},
			onErrorFunction: function(e) { }
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTSAMPLES',
	listVariableNameTrueCase: 'LSTSAMPLES',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: 'LSTVISITHEAD',
	allParentLists: ['LSTVISITHEAD'],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: false,
	__flagIncrementalRefreshAfterLoad: false,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){;},
	onUpdateRow: function(index,data){;},
	onBeforeAddRows: function(data,info){;},
	onAddRows: function(data,info){;},
	onBeforeRemoveRows: function(rows){;},
	onRemoveRows: function(rows){;},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTSAMPLES_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTSAMPLES_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTSAMPLES_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTSAMPLES_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTSAMPLES_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTSAMPLES_hasErrorInherited _DLG1_LSTSAMPLES_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTSAMPLES_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTSAMPLES_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTSAMPLES_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTSAMPLES_newRow';
 var _newRowStyle = '_DLG1_LSTSAMPLES_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTSAMPLES_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTSAMPLES_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTSAMPLES_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: [],
	childListEndpoints: ['LSTSAMPLES'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('LSTSAMPLES',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTSAMPLES'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTSAMPLES'];
		var lObj = DLG1_DlgObj.getControl('LSTSAMPLES');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
DLG1_DlgObj._listSystemOnClick('LSTSAMPLES',this.selection[0]);
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: '[theme:listBox.base.item.className]',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%;">',
			'\t<div style="display: table-cell;">',
			'\t\t<div class="[theme:listBox.base.item.parts.contextClassName|Alpha-MagentaListItemLabelContext]" style="float: right;"><span id="DLG1.LSTSAMPLES.PRODIMG.I.{*dataRow}">{*if prodimg == \'\'}{*else}<img  id="DLG1.LSTSAMPLES.PRODIMG.IMG.{*dataRow}"    src="data:image/jpg;base64,{prodimg}" />{*endif}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span id="DLG1.LSTSAMPLES.PRODDESC.I.{*dataRow}">{proddesc}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.subClassName|Alpha-MagentaListItemLabelSub]"><span id="DLG1.LSTSAMPLES.QTY.I.{*dataRow}">{qty}</span></div>',
			'\t</div>',
			'\t',
			'\t<div style="display: table-cell; width: 40px; text-align: right; vertical-align: middle;">',
			'\t\t<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>',
			'\t</div>',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTSAMPLES',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {},
	_showSQL_CRUD: function(txt) { },
	_globalErrorPlaceHolder: '',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTSAMPLES'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTSAMPLES&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'id': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'prodid': RegExp('' + searchFor,'i'), 'visitid': RegExp('' + searchFor,'i'), 'qty': RegExp('' + searchFor,'i'), 'proddesc': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTSAMPLES.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTSAMPLES.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTSAMPLES.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTSAMPLES.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTSAMPLES.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTSAMPLES'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTSAMPLES'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTSAMPLES'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTSAMPLES'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTSAMPLES');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '3deeb50e-bfc7-43b4-bab6-4a2d46218859'
};
DLG1_DlgObj._listViewSettings['LSTORDERS'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_emptyListWhenParentChanges: false,
	_hasDependentLists: false,
	kanbancolor: function(data) { var _f = '';
try{
 _f = this.layouts[this.layout].kanBan.colorFunction;
}catch(err) { }
if(typeof _f == 'function') var val = _f.call(this,data);
return val;},
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'itemid',
	defaultValue: 'return this._controlDefaultValueForListField(\'itemid\');'
},
{
	name: 'qty',
	defaultValue: 'return this._controlDefaultValueForListField(\'qty\');'
},
{
	name: 'bonusqty',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusqty\');'
},
{
	name: 'price',
	defaultValue: 'return this._controlDefaultValueForListField(\'price\');'
},
{
	name: 'discount',
	defaultValue: 'return this._controlDefaultValueForListField(\'discount\');'
},
{
	name: 'visitid',
	defaultValue: 'return this._controlDefaultValueForListField(\'visitid\');'
},
{
	name: 'vat',
	defaultValue: 'return this._controlDefaultValueForListField(\'vat\');'
},
{
	name: 'product_code',
	defaultValue: 'return this._controlDefaultValueForListField(\'product_code\');'
},
{
	name: 'description',
	defaultValue: 'return this._controlDefaultValueForListField(\'description\');'
},
{
	name: 'price1',
	defaultValue: 'return this._controlDefaultValueForListField(\'price1\');'
},
{
	name: 'ItemImage',
	defaultValue: 'return this._controlDefaultValueForListField(\'ItemImage\');',
	image: {
		embedded: true,
		type: 'JPG'
	}
},
{
	name: 'basketid',
	defaultValue: 'return this._controlDefaultValueForListField(\'basketid\');'
},
{
	name: 'bonusitemid',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusitemid\');'
},
{
	name: 'company_id',
	defaultValue: 'mCpId = DLG1_DlgObj.getValue(\'COMPANYID\');\r\nreturn mCpId;'
},
{
	name: 'totvat',
	defaultValue: 'return this._controlDefaultValueForListField(\'totvat\');'
},
{
	name: 'totline',
	defaultValue: 'return this._controlDefaultValueForListField(\'totline\');'
},
{
	name: 'promotion',
	defaultValue: 'return this._controlDefaultValueForListField(\'promotion\');'
},
{
	name: 'sellunit',
	defaultValue: 'return this._controlDefaultValueForListField(\'sellunit\');'
},
{
	name: 'bonusunit',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusunit\');'
},
{
	name: 'qteinpack',
	defaultValue: 'return this._controlDefaultValueForListField(\'qteinpack\');'
},
{
	name: 'bonusinpack',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusinpack\');'
}],
	_delayRenderTillRefresh: false,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTORDERS.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTORDERS name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTORDERS');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTORDERS.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent'
			},
			onErrorFunction: function(e) { }
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['ordersdet.id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTORDERS',
	listVariableNameTrueCase: 'lstorders',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: 'LSTVISITHEAD',
	allParentLists: ['LSTVISITHEAD'],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: false,
	__flagIncrementalRefreshAfterLoad: false,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){;},
	onUpdateRow: function(index,data){;},
	onBeforeAddRows: function(data,info){;},
	onAddRows: function(data,info){;},
	onBeforeRemoveRows: function(rows){;},
	onRemoveRows: function(rows){;},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTORDERS_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTORDERS_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTORDERS_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTORDERS_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTORDERS_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTORDERS_hasErrorInherited _DLG1_LSTORDERS_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTORDERS_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTORDERS_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTORDERS_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTORDERS_newRow';
 var _newRowStyle = '_DLG1_LSTORDERS_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTORDERS_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTORDERS_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTORDERS_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: [],
	childListEndpoints: ['LSTORDERS'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('lstorders',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTORDERS'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTORDERS'];
		var lObj = DLG1_DlgObj.getControl('LSTORDERS');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
DLG1_DlgObj._listSystemOnClick('LSTORDERS',this.selection[0]);
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		},
		auto: [
{
	order: {'promotion' : 1},
	group: function(data) { var txt = data.promotion;  if(txt && typeof txt != 'undefined') { return txt.trim()}; return '';},
	className: '',
	header: {
		className: 'A5ListGroupHeaders [theme:listBox.base.item.titleClassName]',
		html: function(group,data) { return group; }
	},
	footer: {
		show: false
	},
	navigate: true,
	collapse: {
		allow: 'never',
		indicator: {
			collapse: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg>',
			expand: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>'
		},
		auto: false
	}
}]
	},
	layouts: {
		Default: {
			group: {
				auto: [
{
	order: {'promotion' : 1},
	group: function(data) { var txt = data.promotion;  if(txt && typeof txt != 'undefined') { return txt.trim()}; return '';},
	className: '',
	header: {
		className: 'A5ListGroupHeaders [theme:listBox.base.item.titleClassName]',
		html: function(group,data) { return group; }
	},
	footer: {
		show: false
	},
	navigate: true,
	collapse: {
		allow: 'never',
		indicator: {
			collapse: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg>',
			expand: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>'
		},
		auto: false
	}
}]
			},
			type: 'template',
			item: {
				height: '',
				className: '[theme:listBox.base.item.className]',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div class="listItemLined" style=\'  border-top: 1px solid red;\'>',
			'  <div style=" display: table; width: 100%; margin-bottom: 10px; font-weight: bold;">',
			'    <div style = \'display: table-cell; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; vertical-align: middle; width: 30%\'>',
			'    <span id="DLG1.LSTORDERS.PRODUCT_CODE.I.{*dataRow}">{product_code}</span></div>',
			'    <div style = \'display: table-cell; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; vertical-align: middle; width: 70%\'><span id="DLG1.LSTORDERS.DESCRIPTION.I.{*dataRow}">{description}</span></div>',
			'  </div>',
			'',
			'  <div style=\'display: table; width: 100%; margin-bottom: 10px; table-layout: fixed;\'>',
			'    <div style=\'display: table-cell; vertical-align: top; padding: 0 5px; width:20%\'>',
			'      <div style=\'font-size: 14px; padding-top: 20px;\'>SELL :</div>',
			'      <div style=\'font-size: 14px; padding-top: 20px;\'>BONUS :</div>',
			'    </div>',
			'',
			'    <div style=\'display: table-cell; vertical-align: top; padding: 0 5px; text-align: left; width: 25%;\'>',
			'      <div class="title">QTY</div>',
			'      <div style=\'font-size: 14px; margin-top: 5px;\'><span id="DLG1.LSTORDERS.QTEINPACK.I.{*dataRow}">{qteinpack}</span></div>',
			'      <div style=\'font-size: 14px; margin-top: 5px;\'><span id="DLG1.LSTORDERS.BONUSINPACK.I.{*dataRow}">{bonusinpack}</span></div>',
			'    </div>',
			'',
			'    <div style=\'display: table-cell; vertical-align: top;  padding: 0 5px; text-align: left; width: 25%;\'>',
			'      <div style=\' font-size: 12px; font-weight: bold; color: #000;\'>UNIT</div>',
			'      <div style=\'font-size: 14px; margin-top: 5px;\'><span id="DLG1.LSTORDERS.SELLUNIT.I.{*dataRow}">{sellunit}</span></div>',
			'      <div style=\'font-size: 14px; margin-top: 5px;\'><span id="DLG1.LSTORDERS.BONUSUNIT.I.{*dataRow}">{bonusunit}</span></div>',
			'    </div>',
			'',
			'    <div style= \'display: table-cell; vertical-align: top; padding: 0 5px; text-align: left; width: 30%;\'>',
			'        <span id="DLG1.LSTORDERS.DELETE.I.{*dataRow}"><button  a5-item="_systemButtononClick_Delete"  id="DLG1.LSTORDERS.DELETE.BTN.{*dataRow}"  class="[class.dialogButton]" style="cursor:pointer;" title="">{@A5.u.icon.html(<escape<\'svgIcon=#alpha-icon-xSquareBorder:icon,24{ fill: #f90808;}',
			'\'>>)}Delete</button></span>',
			'    </div>',
			'  </div>',
			'',
			'  <div style=\'display: table; width: 100%; font-weight: bold; table-layout: fixed;\'>',
			'    <div style="display: table-cell; vertical-align: top; padding-right: 10px; width: 30%">qty: <span id="DLG1.LSTORDERS.QTY.I.{*dataRow}">{qty}</span></div>',
			'    <div style="display: table-cell; vertical-align: top; padding-right: 10px; width: 30%">Bonus: <span id="DLG1.LSTORDERS.BONUSQTY.I.{*dataRow}">{bonusqty}</span></div>',
			'    <div style="display: table-cell; vertical-align: top; padding-right: 10px; width: 35%">Unit Pr: <span id="DLG1.LSTORDERS.PRICE.I.{*dataRow}">{price}</span></div>',
			'  </div>',
			'  <div style=\'display: table; width: 100%; font-weight: bold; table-layout: fixed;\'>',
			'    <div style="display: table-cell; vertical-align: top; padding-right: 10px;width: 25%">Disc.: <span id="DLG1.LSTORDERS.DISCOUNT.I.{*dataRow}">{discount}</span></div>',
			'    <div style="display: table-cell; vertical-align: top; padding-right: 10px;width: 40%"><span id="DLG1.LSTORDERS.TOTLINE.I.{*dataRow}">{totline}</span></div>',
			'  </div>',
			'',
			'    ']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
this.computeClientSideSummaryValues(); var cs = this.csSummary; if(this.afterClientSideSummaryCompute) {this.afterClientSideSummaryCompute(cs);}
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: ['totvat','totline'],
	computeClientSideSummaryValues: function(e) {var l = this._clientsideSummary;
var d = this._rData;
this.csSummary = {};
for(var i = 0; i < l.length; i++) {
	this.csSummary[l[i]] = {};
	this.csSummary[l[i]].total = 0;
	this.csSummary[l[i]].count = 0;
	this.csSummary[l[i]].avg = 0;
	this.csSummary[l[i]].minC = 'zzzzzzzzzzzzzzzzzzzz';
	this.csSummary[l[i]].minN = 999999999999999999999;
	this.csSummary[l[i]].maxC = '';
	this.csSummary[l[i]].maxN = -99999999999999999999;
}
var n = '';
var c = '';
var t = ''
for(var r = 0; r < d.length; r++) {
	for(var i = 0; i < l.length; i++) {
		if(typeof d[r][l[i]] != 'undefined') {
			c = d[r][l[i]];
			n = Number(c);
			t = 'n';
			if(isNaN(n)) t = 'c';
			if(t == 'n') {
				this.csSummary[l[i]].total = this.csSummary[l[i]].total + n;
				this.csSummary[l[i]].count = this.csSummary[l[i]].count + 1;
				this.csSummary[l[i]].avg = this.csSummary[l[i]].total / this.csSummary[l[i]].count
				if(n > this.csSummary[l[i]].maxN) this.csSummary[l[i]].maxN = n;
				if(n < this.csSummary[l[i]].minN) this.csSummary[l[i]].minN = n;
				this.csSummary[l[i]].max =  this.csSummary[l[i]].maxN;
				this.csSummary[l[i]].min =  this.csSummary[l[i]].minN;
				this.csSummary[l[i]].average = this.csSummary[l[i]].avg
			} else {
				this.csSummary[l[i]].total = '';
				this.csSummary[l[i]].count = this.csSummary[l[i]].count + 1;
				this.csSummary[l[i]].avg = '';
				if(c > this.csSummary[l[i]].maxC) this.csSummary[l[i]].maxC = c;
				if(c < this.csSummary[l[i]].minC) this.csSummary[l[i]].minC = c;
				this.csSummary[l[i]].max =  this.csSummary[l[i]].maxC
				this.csSummary[l[i]].min =  this.csSummary[l[i]].minC
			}
		}
	}
}
for(var i = 0; i < l.length; i++) {
	delete this.csSummary[l[i]].minC;
	delete this.csSummary[l[i]].minN;
	delete this.csSummary[l[i]].maxC;
	delete this.csSummary[l[i]].maxN;
	if(l[i] != l[i].toUpperCase()) {
		this.csSummary[l[i].toUpperCase()] = {};
		for(var pn in this.csSummary[l[i]]) {
			//need uppercase fieldname in the csSummary object
			this.csSummary[l[i].toUpperCase()][pn] = this.csSummary[l[i]][pn];
		}
	}
}
},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTORDERS',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {},
	_showSQL_CRUD: function(txt) { },
	_globalErrorPlaceHolder: 'LIST4_GLOBALERRORS',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTORDERS'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { mTotal = csSummary['TOTLINE'].total ;
mVat = csSummary['TOTVAT'].total ;
DLG1_DlgObj.setValue('total_order_with_vat',mTotal);
DLG1_DlgObj.setValue('total_vat_order',mVat);
DLG1_DlgObj.setValue('total_bef_ord',mTotal-mVat);},
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTORDERS&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'id': RegExp('' + searchFor,'i'), 'itemid': RegExp('' + searchFor,'i'), 'qty': RegExp('' + searchFor,'i'), 'bonusqty': RegExp('' + searchFor,'i'), 'price': RegExp('' + searchFor,'i'), 'discount': RegExp('' + searchFor,'i'), 'visitid': RegExp('' + searchFor,'i'), 'vat': RegExp('' + searchFor,'i'), 'product_code': RegExp('' + searchFor,'i'), 'description': RegExp('' + searchFor,'i'), 'price1': RegExp('' + searchFor,'i'), 'basketid': RegExp('' + searchFor,'i'), 'bonusitemid': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'totvat': RegExp('' + searchFor,'i'), 'totline': RegExp('' + searchFor,'i'), 'promotion': RegExp('' + searchFor,'i'), 'sellunit': RegExp('' + searchFor,'i'), 'bonusunit': RegExp('' + searchFor,'i'), 'qteinpack': RegExp('' + searchFor,'i'), 'bonusinpack': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.lstorders.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTORDERS.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTORDERS.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTORDERS.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTORDERS.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTORDERS'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTORDERS'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTORDERS'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTORDERS'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTORDERS');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	footer: {
		show: true,
		className: '',
		style: '',
		html: '<div id="DLG1.45278e2a-78a5-4559-84c5-5f73afe20bba"></div>'
	},
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
'_systemButtononClick_Delete' : {
	"selectable": true,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { mBasketId=DLG1_DlgObj.getValue('list::lstorders::basketid');
if(mBasketId==0){
 var lObj = DLG1_DlgObj.getControl('lstorders');
 lObj.deleteRow();
} else {
 var lObj = DLG1_DlgObj.getControl('lstorders');
 mLenght = lObj._data.length
 var ii = mLenght-1;;
 var interval = setInterval(function(){
  mValue = lObj._values[ii] ;
  mBasketData = lObj._data[ii].basketid ;
   if(mBasketData == mBasketId){
     i1=Number(ii);
   lObj.setValue(mValue) ;
    var opts = {};
      opts.prompt = false;
      lObj.deleteRow(opts) ;
   }
      ii--;
     if(ii <= -1) clearInterval(interval);
 }, 750);
} }(index,v,args,data,this,this))
				}
}
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '69787fdf-886d-4021-bbc8-a4ed56f47446'
};
DLG1_DlgObj._listViewSettings['LSTINVOICES'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_emptyListWhenParentChanges: false,
	_hasDependentLists: false,
	kanbancolor: function(data) { var _f = '';
try{
 _f = this.layouts[this.layout].kanBan.colorFunction;
}catch(err) { }
if(typeof _f == 'function') var val = _f.call(this,data);
return val;},
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'itemcode',
	defaultValue: 'return this._controlDefaultValueForListField(\'itemcode\');'
},
{
	name: 'type_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'type_id\');'
},
{
	name: 'visit_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'visit_id\');'
},
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'description',
	defaultValue: 'return this._controlDefaultValueForListField(\'description\');'
},
{
	name: 'qty',
	defaultValue: 'return this._controlDefaultValueForListField(\'qty\');'
},
{
	name: 'Bonusqty',
	defaultValue: 'return this._controlDefaultValueForListField(\'Bonusqty\');'
},
{
	name: 'unitprice',
	defaultValue: 'return this._controlDefaultValueForListField(\'unitprice\');'
},
{
	name: 'discount',
	defaultValue: 'return this._controlDefaultValueForListField(\'discount\');'
},
{
	name: 'ItemImage',
	defaultValue: 'return this._controlDefaultValueForListField(\'ItemImage\');',
	image: {
		embedded: true,
		type: 'JPG'
	}
},
{
	name: 'vat',
	defaultValue: 'return this._controlDefaultValueForListField(\'vat\');'
},
{
	name: 'basketid',
	defaultValue: 'return this._controlDefaultValueForListField(\'basketid\');'
},
{
	name: 'itemid',
	defaultValue: 'return this._controlDefaultValueForListField(\'itemid\');'
},
{
	name: 'bonusitemid',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusitemid\');'
},
{
	name: 'company_id',
	defaultValue: 'mCpId = DLG1_DlgObj.getValue(\'COMPANYID\');\r\nmCpIdalert(mCpId);\r\nreturn mCpId'
},
{
	name: 'linevat',
	defaultValue: 'return this._controlDefaultValueForListField(\'linevat\');'
},
{
	name: 'linetot',
	defaultValue: 'return this._controlDefaultValueForListField(\'linetot\');'
},
{
	name: 'promotion',
	defaultValue: 'return this._controlDefaultValueForListField(\'promotion\');'
},
{
	name: 'sellunit',
	defaultValue: 'return this._controlDefaultValueForListField(\'sellunit\');'
},
{
	name: 'bonusunit',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusunit\');'
}],
	_delayRenderTillRefresh: false,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTINVOICES.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTINVOICES name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTINVOICES');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTINVOICES.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent'
			},
			onErrorFunction: function(e) { }
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['invdetails.id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTINVOICES',
	listVariableNameTrueCase: 'lstinvoices',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: 'LSTVISITHEAD',
	allParentLists: ['LSTVISITHEAD'],
	_inplaceEditing: {
		allow: false
	},
	onBeforeItemDraw: function(data,index) {
data.TOTBVAT = $u.s.toNum(data.qty)*$u.s.toNum(data.unitprice)*((100-$u.s.toNum(data.discount))/100);
;
;
;},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: false,
	__flagIncrementalRefreshAfterLoad: false,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){;},
	onUpdateRow: function(index,data){;},
	onBeforeAddRows: function(data,info){;},
	onAddRows: function(data,info){;},
	onBeforeRemoveRows: function(rows){;},
	onRemoveRows: function(rows){;},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTINVOICES_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTINVOICES_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTINVOICES_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTINVOICES_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTINVOICES_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTINVOICES_hasErrorInherited _DLG1_LSTINVOICES_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTINVOICES_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTINVOICES_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTINVOICES_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTINVOICES_newRow';
 var _newRowStyle = '_DLG1_LSTINVOICES_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTINVOICES_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTINVOICES_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTINVOICES_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: [],
	childListEndpoints: ['LSTINVOICES'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('lstinvoices',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTINVOICES'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTINVOICES'];
		var lObj = DLG1_DlgObj.getControl('LSTINVOICES');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
DLG1_DlgObj._listSystemOnClick('LSTINVOICES',this.selection[0]);
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		},
		auto: [
{
	order: {'promotion' : 1},
	group: function(data) { var txt = data.promotion;  if(txt && typeof txt != 'undefined') { return txt.trim()}; return '';},
	className: '',
	header: {
		className: 'A5ListGroupHeaders [theme:ListBox.Base.Item.TitleClassName]',
		html: function(group,data) { return group; }
	},
	footer: {
		show: false
	},
	navigate: true,
	collapse: {
		allow: 'never',
		indicator: {
			collapse: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg>',
			expand: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>'
		},
		auto: false
	}
}]
	},
	layouts: {
		Default: {
			group: {
				auto: [
{
	order: {'promotion' : 1},
	group: function(data) { var txt = data.promotion;  if(txt && typeof txt != 'undefined') { return txt.trim()}; return '';},
	className: '',
	header: {
		className: 'A5ListGroupHeaders [theme:ListBox.Base.Item.TitleClassName]',
		html: function(group,data) { return group; }
	},
	footer: {
		show: false
	},
	navigate: true,
	collapse: {
		allow: 'never',
		indicator: {
			collapse: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg>',
			expand: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>'
		},
		auto: false
	}
}]
			},
			type: 'template',
			item: {
				height: '',
				className: '[theme:listBox.base.item.className]',
				hoverClassName: '',
				selectedClassName: '',
				style: 'font-size: 10px;',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%; margin: 5px auto; border-bottom: 2px solid red; font-size: 1.3em;">',
			'    <div style="display: table; width: 100%;">',
			'        <div style="display: table-cell; vertical-align: middle; padding: 5px; width: 15%;">',
			'            <strong>Item:</strong> <span id="DLG1.LSTINVOICES.ITEMCODE.I.{*dataRow}">{itemcode}</span>',
			'        </div>',
			'        <div style="display: table-cell; vertical-align: middle; padding: 5px; width: 40%;">',
			'            <strong><span id="DLG1.LSTINVOICES.DESCRIPTION.I.{*dataRow}">{description}</span></strong>',
			'        </div>',
			'        <div style="display: table-cell; vertical-align: middle; padding: 5px; width: 10%; text-align: right;">',
			'            <span id="DLG1.LSTINVOICES.DELETE.I.{*dataRow}"><button  a5-item="_systemButtononClick_Delete"  id="DLG1.LSTINVOICES.DELETE.BTN.{*dataRow}"  class="[class.dialogButton]" style="cursor:pointer;" title="">{@A5.u.icon.html(<escape<\'svgIcon=#alpha-icon-xSquareBorder:icon,24{ fill: #f90808;}\'>>)}Delete</button></span>',
			'        </div>',
			'    </div>',
			'',
			'    <div style="display: table; width: 100%;">',
			'        <div style="display: table-cell; vertical-align: middle; padding: 5px; width: 20%;">',
			'            <strong>Qty:</strong> <span id="DLG1.LSTINVOICES.QTY.I.{*dataRow}">{qty}</span><span id="DLG1.LSTINVOICES.SELLUNIT.I.{*dataRow}">{sellunit}</span>',
			'        </div>',
			'        <div style="display: table-cell; vertical-align: middle; padding: 5px; width: 20%;">',
			'            <strong>Bonus:</strong> <span id="DLG1.LSTINVOICES.BONUSQTY.I.{*dataRow}">{Bonusqty}</span><span id="DLG1.LSTINVOICES.BONUSUNIT.I.{*dataRow}">{bonusunit}</span>',
			'        </div>',
			'        <div style="display: table-cell; vertical-align: middle; padding: 5px; width: 40%;">',
			'            <strong>Price:</strong> <span id="DLG1.LSTINVOICES.UNITPRICE.I.{*dataRow}">{unitprice}</span>',
			'        </div>',
			'        <div style="display: table-cell; vertical-align: middle; padding: 5px; width: 20%;">',
			'            <strong>Disc:</strong> <span id="DLG1.LSTINVOICES.DISCOUNT.I.{*dataRow}">{discount}</span>',
			'        </div>',
			'    </div>',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
this.computeClientSideSummaryValues(); var cs = this.csSummary; if(this.afterClientSideSummaryCompute) {this.afterClientSideSummaryCompute(cs);}
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: ['linevat','linetot'],
	computeClientSideSummaryValues: function(e) {var l = this._clientsideSummary;
var d = this._rData;
this.csSummary = {};
for(var i = 0; i < l.length; i++) {
	this.csSummary[l[i]] = {};
	this.csSummary[l[i]].total = 0;
	this.csSummary[l[i]].count = 0;
	this.csSummary[l[i]].avg = 0;
	this.csSummary[l[i]].minC = 'zzzzzzzzzzzzzzzzzzzz';
	this.csSummary[l[i]].minN = 999999999999999999999;
	this.csSummary[l[i]].maxC = '';
	this.csSummary[l[i]].maxN = -99999999999999999999;
}
var n = '';
var c = '';
var t = ''
for(var r = 0; r < d.length; r++) {
	for(var i = 0; i < l.length; i++) {
		if(typeof d[r][l[i]] != 'undefined') {
			c = d[r][l[i]];
			n = Number(c);
			t = 'n';
			if(isNaN(n)) t = 'c';
			if(t == 'n') {
				this.csSummary[l[i]].total = this.csSummary[l[i]].total + n;
				this.csSummary[l[i]].count = this.csSummary[l[i]].count + 1;
				this.csSummary[l[i]].avg = this.csSummary[l[i]].total / this.csSummary[l[i]].count
				if(n > this.csSummary[l[i]].maxN) this.csSummary[l[i]].maxN = n;
				if(n < this.csSummary[l[i]].minN) this.csSummary[l[i]].minN = n;
				this.csSummary[l[i]].max =  this.csSummary[l[i]].maxN;
				this.csSummary[l[i]].min =  this.csSummary[l[i]].minN;
				this.csSummary[l[i]].average = this.csSummary[l[i]].avg
			} else {
				this.csSummary[l[i]].total = '';
				this.csSummary[l[i]].count = this.csSummary[l[i]].count + 1;
				this.csSummary[l[i]].avg = '';
				if(c > this.csSummary[l[i]].maxC) this.csSummary[l[i]].maxC = c;
				if(c < this.csSummary[l[i]].minC) this.csSummary[l[i]].minC = c;
				this.csSummary[l[i]].max =  this.csSummary[l[i]].maxC
				this.csSummary[l[i]].min =  this.csSummary[l[i]].minC
			}
		}
	}
}
for(var i = 0; i < l.length; i++) {
	delete this.csSummary[l[i]].minC;
	delete this.csSummary[l[i]].minN;
	delete this.csSummary[l[i]].maxC;
	delete this.csSummary[l[i]].maxN;
	if(l[i] != l[i].toUpperCase()) {
		this.csSummary[l[i].toUpperCase()] = {};
		for(var pn in this.csSummary[l[i]]) {
			//need uppercase fieldname in the csSummary object
			this.csSummary[l[i].toUpperCase()][pn] = this.csSummary[l[i]][pn];
		}
	}
}
},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTINVOICES',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.PLACEHOLDER_14');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {var debugObj = this.harvestList();
		var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.PLACEHOLDER_14');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
	},
	_showSQL_CRUD: function(txt) { var ahtml= [];ahtml.push('<a \tclass="Alpha-MagentaLink"');
ahtml.push('href="#"');
ahtml.push('onclick="A5.u.element.toggle($(\'DLG1.LSTINVOICES.DISPLAYXBASIC\'),{show: {type: \'slide\',duration: \'fast\'},hide: {type: \'slide\',duration: \'fast\'}} )">');
ahtml.push('Click here to show/hide Server-side commands');
ahtml.push('</a><br>');
ahtml.push('<div id="DLG1.LSTINVOICES.DISPLAYXBASIC" style="display:none;"></div>');
ahtml.push('');
var txtHTML = ahtml.join('');			var ele = $('DLG1.V.R1.PLACEHOLDER_14'); if(ele) ele.innerHTML = txtHTML;
			$('DLG1.LSTINVOICES.DISPLAYXBASIC').innerHTML = txt;
},
	_globalErrorPlaceHolder: 'PLACEHOLDER_15',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTINVOICES'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { mTotal = csSummary['LINETOT'].total ;
mVat = csSummary['LINEVAT'].total ;
DLG1_DlgObj.setValue('total_inv_with_vat',mTotal);
DLG1_DlgObj.setValue('total_vat_inv',mVat);
DLG1_DlgObj.setValue('total_bef_inv',mTotal-mVat);},
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTINVOICES&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'itemcode': RegExp('' + searchFor,'i'), 'type_id': RegExp('' + searchFor,'i'), 'visit_id': RegExp('' + searchFor,'i'), 'id': RegExp('' + searchFor,'i'), 'description': RegExp('' + searchFor,'i'), 'qty': RegExp('' + searchFor,'i'), 'Bonusqty': RegExp('' + searchFor,'i'), 'unitprice': RegExp('' + searchFor,'i'), 'discount': RegExp('' + searchFor,'i'), 'vat': RegExp('' + searchFor,'i'), 'basketid': RegExp('' + searchFor,'i'), 'itemid': RegExp('' + searchFor,'i'), 'bonusitemid': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'linevat': RegExp('' + searchFor,'i'), 'linetot': RegExp('' + searchFor,'i'), 'promotion': RegExp('' + searchFor,'i'), 'sellunit': RegExp('' + searchFor,'i'), 'bonusunit': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.lstinvoices.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTINVOICES.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTINVOICES.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTINVOICES.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTINVOICES.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTINVOICES'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTINVOICES'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTINVOICES'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTINVOICES'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTINVOICES');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	footer: {
		show: true,
		className: '',
		style: '',
		html: '<div id="DLG1.d4d98a91_8cde_4270_a872_4e632786a946"></div>'
	},
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
'_systemButtononClick_Delete' : {
	"selectable": false,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { listObj.setValue(rowNumber,false);mBasketId=DLG1_DlgObj.getValue('list::lstinvoices::basketid');
if(mBasketId==0){
 var lObj = DLG1_DlgObj.getControl('lstinvoices');
 lObj.deleteRow();
} else {
 var lObj = DLG1_DlgObj.getControl('lstinvoices');
 mLenght = lObj._data.length
 var ii = mLenght-1;;
 var interval = setInterval(function(){
  mValue = lObj._values[ii] ;
  mBasketData = lObj._data[ii].basketid ;
   if(mBasketData == mBasketId){
     i1=Number(ii);
   lObj.setValue(mValue) ;
    var opts = {};
      opts.prompt = false;
      lObj.deleteRow(opts) ;
   mits=DLG1_DlgObj.getValue('list::LSTBASKETDET::qty');
   }
      ii--;
     if(ii <= -1) clearInterval(interval);
 }, 750);
} }(index,v,args,data,this,this))
				}
}
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '355e0e77-1c69-41a1-b2a2-7858c4411c20'
};
DLG1_DlgObj._listViewSettings['LSTRECEIPT'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_emptyListWhenParentChanges: false,
	_hasDependentLists: false,
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'Receipt_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'Receipt_id\');'
},
{
	name: 'company_id',
	defaultValue: 'mCpId = DLG1_DlgObj.getValue(\'COMPANYID\');\r\nreturn mCpId;'
},
{
	name: 'invoiceno',
	defaultValue: 'return this._controlDefaultValueForListField(\'invoiceno\');'
},
{
	name: 'Description',
	defaultValue: 'return this._controlDefaultValueForListField(\'Description\');'
},
{
	name: 'Currency',
	defaultValue: 'return this._controlDefaultValueForListField(\'Currency\');'
},
{
	name: 'amount',
	defaultValue: 'return this._controlDefaultValueForListField(\'amount\');'
},
{
	name: 'Visit_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'Visit_id\');'
},
{
	name: 'date',
	defaultValue: 'return this._controlDefaultValueForListField(\'date\');'
},
{
	name: 'PaimentType',
	defaultValue: 'return this._controlDefaultValueForListField(\'PaimentType\');'
},
{
	name: 'AmountCV',
	defaultValue: 'return this._controlDefaultValueForListField(\'AmountCV\');'
}],
	_delayRenderTillRefresh: false,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTRECEIPT.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTRECEIPT name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTRECEIPT');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTRECEIPT.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent'
			},
			onErrorFunction: function(e) { }
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['Receipt_id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTRECEIPT',
	listVariableNameTrueCase: 'LSTRECEIPT',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: 'LSTVISITHEAD',
	allParentLists: ['LSTVISITHEAD'],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: false,
	__flagIncrementalRefreshAfterLoad: false,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){;},
	onUpdateRow: function(index,data){;},
	onBeforeAddRows: function(data,info){;},
	onAddRows: function(data,info){;},
	onBeforeRemoveRows: function(rows){;},
	onRemoveRows: function(rows){;},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTRECEIPT_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTRECEIPT_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTRECEIPT_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTRECEIPT_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTRECEIPT_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTRECEIPT_hasErrorInherited _DLG1_LSTRECEIPT_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTRECEIPT_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTRECEIPT_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTRECEIPT_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTRECEIPT_newRow';
 var _newRowStyle = '_DLG1_LSTRECEIPT_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTRECEIPT_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTRECEIPT_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTRECEIPT_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: [],
	childListEndpoints: ['LSTRECEIPT'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('LSTRECEIPT',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTRECEIPT'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTRECEIPT'];
		var lObj = DLG1_DlgObj.getControl('LSTRECEIPT');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
DLG1_DlgObj._listSystemOnClick('LSTRECEIPT',this.selection[0]);
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: '[theme:listBox.base.item.className]',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%;">',
			'\t<div style="display: table-cell;">',
			'\t\t<div class="[theme:listBox.base.item.parts.detailClassName|Alpha-MagentaListItemLabelDetail]" style="float: right;"><span id="DLG1.LSTRECEIPT.AMOUNT.I.{*dataRow}">{amount}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span id="DLG1.LSTRECEIPT.INVOICENO.I.{*dataRow}">{invoiceno}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.subClassName|Alpha-MagentaListItemLabelSub]"><span id="DLG1.LSTRECEIPT.DESCRIPTION.I.{*dataRow}">{Description}</span></div>',
			'\t</div>',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTRECEIPT',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {},
	_showSQL_CRUD: function(txt) { },
	_globalErrorPlaceHolder: 'LSTRECEIPT_GLOBALERRORS',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTRECEIPT'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTRECEIPT&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'Receipt_id': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'invoiceno': RegExp('' + searchFor,'i'), 'Description': RegExp('' + searchFor,'i'), 'Currency': RegExp('' + searchFor,'i'), 'amount': RegExp('' + searchFor,'i'), 'Visit_id': RegExp('' + searchFor,'i'), 'date': RegExp('' + searchFor,'i'), 'PaimentType': RegExp('' + searchFor,'i'), 'AmountCV': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTRECEIPT.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTRECEIPT.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTRECEIPT.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTRECEIPT.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTRECEIPT.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTRECEIPT'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTRECEIPT'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTRECEIPT'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTRECEIPT'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTRECEIPT');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '0a479db4-3a00-4afd-b5d0-cabe51c97444'
};
DLG1_DlgObj._listViewSettings['LSTUNPAIDINV'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'invoiceno',
	defaultValue: 'return this._controlDefaultValueForListField(\'invoiceno\');'
},
{
	name: 'POI_ID',
	defaultValue: 'return this._controlDefaultValueForListField(\'POI_ID\');'
},
{
	name: 'invdate',
	defaultValue: 'return this._controlDefaultValueForListField(\'invdate\');'
},
{
	name: 'duedate',
	defaultValue: 'return this._controlDefaultValueForListField(\'duedate\');'
},
{
	name: 'INVOICEAM',
	defaultValue: 'return this._controlDefaultValueForListField(\'INVOICEAM\');'
}],
	_delayRenderTillRefresh: false,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTUNPAIDINV.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTUNPAIDINV name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTUNPAIDINV');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTUNPAIDINV.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent',
				progress: {
				},
				onProgressEvent: ''
			},
			onErrorFunction: function(e) { }
		}
	},
	_indexdb: {
		mediafiles: {
			download: false,
			showProgress: false,
			progress: {
			},
			downloadHasOnProgressEvent: false,
			upload: {
				showProgress: false
			}
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: false,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: '',
	dirtyControlClassName: '',
	listVariableName: 'LSTUNPAIDINV',
	listVariableNameTrueCase: 'LSTUNPAIDINV',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: true,
	__flagIncrementalRefreshAfterLoad: false,
	__version: 1,
	__persistWhere: 'IndexDB',
	__persistMode: 'full',
	_beforePersistToStorage: function(obj) { 	
	this._executeEvent('onBeforePersistToLocalStorage',obj)
	this.__doPersist = true;
	if(typeof obj.userData == 'undefined') obj.userData = {};
	this.__userData = obj.userData;
	//snapshot the list data in case the persist fails
	this._dataSnapshot = [].concat(this._data);
}
,
	persistToStorage: function(obj) { 	//system generated beforePersistToStorage code here
	var flagSuspendPersist = false;
	if(typeof this.suspendPersist != 'undefined') flagSuspendPersist = this.suspendPersist;
	if(flagSuspendPersist) return true;
	if(typeof obj.submode != 'undefined') {
		if(obj.submode == 'ListViewData') {
			var _wh = DLG1_DlgObj.__persistWhere(this.listVariableName);
			//see comment in a5DialogHelper_ListViewData() line 450
			if(_wh == 'fs') return;
		}
	}
	var result = DLG1_DlgObj.persistListToLocalStorage(this,obj);
	delete this.__userData;
	if(result) {
		delete this._dataSnapshot;
	} else {
		this.populate(this._dataSnapshot,false,false,false);  //need to .populate() without firing events
		delete this._dataSnapshot;
	}
	if(typeof this._pm_persistWhere == 'undefined') this._pm_persistWhere = 'localStorage';
	//the onPersistToLocalStorage event is fired in either the _persistToLocalStorageLow() methdo (for local storage) or _persistListToFile() method
	this._flagPersistDataOK = result;
	if(!result) {
		if(typeof this._tempFlagServerSideSearch != 'undefined') {
			if(this._tempFlagServerSideSearch) {
				this._executeEvent('onSearchResultTooLargeForLocalStorage',obj);
			}
			delete this._tempFlagServerSideSearch;
		}
	}
}
,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;if(!this._isInit && !this._restoringList) this._beforePersistToStorage({mode:'populate', data: data});
},
	onPopulate: function(data) {if(!this._isInit && !this._restoringList) {this.persistToStorage({mode:'populate', data: data}); }; if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){this._beforePersistToStorage({mode:'update', data: data, index: index});},
	onUpdateRow: function(index,data){this.persistToStorage({mode:'update', data: data, index: index});},
	onBeforeAddRows: function(data,info){this._beforePersistToStorage({mode:'add', data: data});},
	onAddRows: function(data,info){this.persistToStorage({mode:'add', data: data});},
	onBeforeRemoveRows: function(rows){this._beforePersistToStorage({mode:'remove', rows: rows});},
	onRemoveRows: function(rows){this.persistToStorage({mode:'remove', data: rows});},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	childLists: [],
	childListEndpoints: ['LSTUNPAIDINV'],
	_populateAllChildLists: function() { },
	onSelect: function() {DLG1_DlgObj._listRowSelect('LSTUNPAIDINV',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTUNPAIDINV'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTUNPAIDINV'];
		var lObj = DLG1_DlgObj.getControl('LSTUNPAIDINV');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};;
this._selectedRow = this.selection[0];
;},
	onClick: function() {
mInvNo = DLG1_DlgObj.getValue('list::LSTUNPAIDINV::invoiceno');
DLG1_DlgObj.setValue('OnInvoiceNo',mInvNo);
DLG1_DlgObj.panelSetActive('PANELCARD_18') ;
DLG1_DlgObj.showContainerWindow(this,'WINDOW_14') ;},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%;">',
			'\t<div style="display: table-cell;">',
			'\t\t<div class="[theme:listBox.base.item.parts.contextClassName|Alpha-MagentaListItemLabelContext]" style="float: right;"><span id="DLG1.LSTUNPAIDINV.INVOICEAM.I.{*dataRow}">{INVOICEAM}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span id="DLG1.LSTUNPAIDINV.INVOICENO.I.{*dataRow}">{invoiceno}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.subClassName|Alpha-MagentaListItemLabelSub]"><span id="DLG1.LSTUNPAIDINV.INVDATE.I.{*dataRow}">{invdate}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.contentClassName|Alpha-MagentaListItemContent]">',
			'\t\t\t<span id="DLG1.LSTUNPAIDINV.DUEDATE.I.{*dataRow}">{duedate}</span><br/>',
			'\t\t\t',
			'\t\t</div>',
			'\t</div>',
			'\t\t\t',
			'\t',
			'\t<div style="display: table-cell; width: 40px; text-align: right; vertical-align: middle;">',
			'\t\t<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>',
			'\t</div>',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTUNPAIDINV',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	detailViewIsDirty: function() { return false; },
	populateUXControls: function() { return true; },
	listIsDirty: function() { return false; },
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTUNPAIDINV'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTUNPAIDINV&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'invoiceno': RegExp('' + searchFor,'i'), 'POI_ID': RegExp('' + searchFor,'i'), 'invdate': RegExp('' + searchFor,'i'), 'duedate': RegExp('' + searchFor,'i'), 'INVOICEAM': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTUNPAIDINV.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTUNPAIDINV.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTUNPAIDINV.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTUNPAIDINV.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTUNPAIDINV.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTUNPAIDINV'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTUNPAIDINV'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTUNPAIDINV'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTUNPAIDINV'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTUNPAIDINV');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '66869d81-7746-4e21-806b-6738e63ec612'
};
DLG1_DlgObj._listViewSettings['LSTVISITNOTES'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_emptyListWhenParentChanges: false,
	_hasDependentLists: false,
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'company_id',
	defaultValue: 'mCpId = DLG1_DlgObj.getValue(\'COMPANYID\');\r\nreturn mCpId;'
},
{
	name: 'visitfk',
	defaultValue: 'return this._controlDefaultValueForListField(\'visitfk\');'
},
{
	name: 'notes',
	defaultValue: 'return this._controlDefaultValueForListField(\'notes\');'
},
{
	name: 'imageblob',
	defaultValue: 'return this._controlDefaultValueForListField(\'imageblob\');',
	image: {
		embedded: true,
		type: 'JPG'
	}
}],
	_delayRenderTillRefresh: false,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTVISITNOTES.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTVISITNOTES name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTVISITNOTES.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent'
			},
			onErrorFunction: function(e) { }
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [
{
	field: 'company_id',
	control: 'note_compid'
},
{
	field: 'visitfk',
	control: 'visitfk'
},
{
	field: 'notes',
	control: 'Notes'
},
{
	field: 'imageblob',
	control: 'imageblob'
}],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTVISITNOTES',
	listVariableNameTrueCase: 'LSTVISITNOTES',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: 'LSTVISITHEAD',
	allParentLists: ['LSTVISITHEAD'],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: false,
	__flagIncrementalRefreshAfterLoad: false,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){;},
	onUpdateRow: function(index,data){;},
	onBeforeAddRows: function(data,info){;},
	onAddRows: function(data,info){;},
	onBeforeRemoveRows: function(rows){;},
	onRemoveRows: function(rows){;},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTVISITNOTES_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTVISITNOTES_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTVISITNOTES_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTVISITNOTES_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTVISITNOTES_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTVISITNOTES_hasErrorInherited _DLG1_LSTVISITNOTES_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTVISITNOTES_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTVISITNOTES_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTVISITNOTES_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTVISITNOTES_newRow';
 var _newRowStyle = '_DLG1_LSTVISITNOTES_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTVISITNOTES_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTVISITNOTES_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTVISITNOTES_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: [],
	childListEndpoints: ['LSTVISITNOTES'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('LSTVISITNOTES',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTVISITNOTES'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTVISITNOTES'];
		var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
DLG1_DlgObj._listSystemOnClick('LSTVISITNOTES',this.selection[0]);
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'column',
			showColumnTitles: true,
			item: {
				className: '[theme:listBox.base.item.className]',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			fixedFooterDefinition: '[]',
			fixedFooterJS: '',
			fixedFooterCSJS: '',
			columns: [
			{
				header: {
					html: 'Notes'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'Notes',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTVISITNOTES.NOTES.I.{*dataRow}">{notes}</span>'
				},
				order: 'Notes',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'Imageblob'
				},
				_name: 'imageblob',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTVISITNOTES.IMAGEBLOB.I.{*dataRow}">{*if imageblob == \'\'}{*else}<img  id="DLG1.LSTVISITNOTES.IMAGEBLOB.IMG.{*dataRow}"    src="data:image/jpg;base64,{imageblob}" />{*endif}</span>&nbsp;'
				},
				order: 'imageblob',
				width: 'flex(1)'
			}],
			_hasRCW: false,
			_horizontalScrolling: false,
			_hasColumnSeparators: false
		}
	},
	columnSeparators: function(state) { 				var lyt = this.layouts[this.layout];
				if(lyt.type != 'column') return;
				var c = lyt.columns
				for(var i = 0; i < c.length; i++) {
					if(state == 'off') c[i].separator.location = 'none';
					if(state == 'on') {
						c[i].separator.location = 'right';
					}
				}
				this.refresh();
			}
			,
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTVISITNOTES',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {},
	_showSQL_CRUD: function(txt) { },
	_globalErrorPlaceHolder: 'LSTVISITNOTES_GLOBALERRORS',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTVISITNOTES'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTVISITNOTES&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'id': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'visitfk': RegExp('' + searchFor,'i'), 'notes': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTVISITNOTES.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTVISITNOTES.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTVISITNOTES.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTVISITNOTES.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTVISITNOTES.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTVISITNOTES'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTVISITNOTES'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTVISITNOTES'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTVISITNOTES'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTVISITNOTES');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: 'de715c8b-3ace-4ae8-800c-0515a2b922eb'
};
DLG1_DlgObj._listViewSettings['LSTMEDIALFILES'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'description',
	defaultValue: 'return this._controlDefaultValueForListField(\'description\');'
}],
	_delayRenderTillRefresh: false,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTMEDIALFILES.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTMEDIALFILES name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTMEDIALFILES');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTMEDIALFILES.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent',
				progress: {
				},
				onProgressEvent: ''
			},
			onErrorFunction: function(e) { }
		}
	},
	_indexdb: {
		mediafiles: {
			download: false,
			showProgress: false,
			progress: {
			},
			downloadHasOnProgressEvent: false,
			upload: {
				showProgress: false
			}
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: false,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: '',
	dirtyControlClassName: '',
	listVariableName: 'LSTMEDIALFILES',
	listVariableNameTrueCase: 'lstMedialFiles',
	_hostComponentId: 'DLG1',
	_includeCRC: false,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: true,
	__flagIncrementalRefreshAfterLoad: false,
	__version: 1,
	__persistWhere: 'IndexDB',
	__persistMode: 'full',
	_beforePersistToStorage: function(obj) { 	
	this._executeEvent('onBeforePersistToLocalStorage',obj)
	this.__doPersist = true;
	if(typeof obj.userData == 'undefined') obj.userData = {};
	this.__userData = obj.userData;
	//snapshot the list data in case the persist fails
	this._dataSnapshot = [].concat(this._data);
}
,
	persistToStorage: function(obj) { 	//system generated beforePersistToStorage code here
	var flagSuspendPersist = false;
	if(typeof this.suspendPersist != 'undefined') flagSuspendPersist = this.suspendPersist;
	if(flagSuspendPersist) return true;
	if(typeof obj.submode != 'undefined') {
		if(obj.submode == 'ListViewData') {
			var _wh = DLG1_DlgObj.__persistWhere(this.listVariableName);
			//see comment in a5DialogHelper_ListViewData() line 450
			if(_wh == 'fs') return;
		}
	}
	var result = DLG1_DlgObj.persistListToLocalStorage(this,obj);
	delete this.__userData;
	if(result) {
		delete this._dataSnapshot;
	} else {
		this.populate(this._dataSnapshot,false,false,false);  //need to .populate() without firing events
		delete this._dataSnapshot;
	}
	if(typeof this._pm_persistWhere == 'undefined') this._pm_persistWhere = 'localStorage';
	//the onPersistToLocalStorage event is fired in either the _persistToLocalStorageLow() methdo (for local storage) or _persistListToFile() method
	this._flagPersistDataOK = result;
	if(!result) {
		if(typeof this._tempFlagServerSideSearch != 'undefined') {
			if(this._tempFlagServerSideSearch) {
				this._executeEvent('onSearchResultTooLargeForLocalStorage',obj);
			}
			delete this._tempFlagServerSideSearch;
		}
	}
}
,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;if(!this._isInit && !this._restoringList) this._beforePersistToStorage({mode:'populate', data: data});
},
	onPopulate: function(data) {if(!this._isInit && !this._restoringList) {this.persistToStorage({mode:'populate', data: data}); }; if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){this._beforePersistToStorage({mode:'update', data: data, index: index});},
	onUpdateRow: function(index,data){this.persistToStorage({mode:'update', data: data, index: index});},
	onBeforeAddRows: function(data,info){this._beforePersistToStorage({mode:'add', data: data});},
	onAddRows: function(data,info){this.persistToStorage({mode:'add', data: data});},
	onBeforeRemoveRows: function(rows){this._beforePersistToStorage({mode:'remove', rows: rows});},
	onRemoveRows: function(rows){this.persistToStorage({mode:'remove', data: rows});},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	childLists: [],
	childListEndpoints: ['LSTMEDIALFILES'],
	_populateAllChildLists: function() { },
	onSelect: function() {DLG1_DlgObj._listRowSelect('lstMedialFiles',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTMEDIALFILES'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTMEDIALFILES'];
		var lObj = DLG1_DlgObj.getControl('LSTMEDIALFILES');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};;
this._selectedRow = this.selection[0];
;},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'column',
			showColumnTitles: true,
			item: {
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			fixedFooterDefinition: '[]',
			fixedFooterJS: '',
			fixedFooterCSJS: '',
			columns: [
			{
				header: {
					html: 'Description'
				},
				_name: 'Description',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTMEDIALFILES.DESCRIPTION.I.{*dataRow}">{description}</span>'
				},
				order: 'Description',
				width: 'flex(1)'
			}],
			_hasRCW: false,
			_horizontalScrolling: false,
			_hasColumnSeparators: false
		}
	},
	columnSeparators: function(state) { 				var lyt = this.layouts[this.layout];
				if(lyt.type != 'column') return;
				var c = lyt.columns
				for(var i = 0; i < c.length; i++) {
					if(state == 'off') c[i].separator.location = 'none';
					if(state == 'on') {
						c[i].separator.location = 'right';
					}
				}
				this.refresh();
			}
			,
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTMEDIALFILES',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	detailViewIsDirty: function() { return false; },
	populateUXControls: function() { return true; },
	listIsDirty: function() { return false; },
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: false,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTMEDIALFILES'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTMEDIALFILES&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'description': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.lstMedialFiles.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTMEDIALFILES.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTMEDIALFILES.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTMEDIALFILES.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTMEDIALFILES.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTMEDIALFILES'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTMEDIALFILES'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTMEDIALFILES'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTMEDIALFILES'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTMEDIALFILES');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: 'd090b435-1ae3-4399-b779-40812f1c763a'
};
DLG1_DlgObj._listViewSettings['LSTBASKETH'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'basketdesc',
	defaultValue: 'return this._controlDefaultValueForListField(\'basketdesc\');'
},
{
	name: 'fromdateF',
	defaultValue: 'return this._controlDefaultValueForListField(\'fromdateF\');'
},
{
	name: 'todateF',
	defaultValue: 'return this._controlDefaultValueForListField(\'todateF\');'
},
{
	name: 'poitypeid',
	defaultValue: 'return this._controlDefaultValueForListField(\'poitypeid\');'
},
{
	name: 'company_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'company_id\');'
},
{
	name: 'poiid',
	defaultValue: 'return this._controlDefaultValueForListField(\'poiid\');'
}],
	_delayRenderTillRefresh: true,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTBASKETH.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTBASKETH name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTBASKETH');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTBASKETH.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent',
				progress: {
				},
				onProgressEvent: ''
			},
			onErrorFunction: function(e) { }
		}
	},
	_indexdb: {
		mediafiles: {
			download: false,
			showProgress: false,
			progress: {
			},
			downloadHasOnProgressEvent: false,
			upload: {
				showProgress: false
			}
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: false,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	theme: 'Alpha-Magenta:subtleLined',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: '',
	dirtyControlClassName: '',
	listVariableName: 'LSTBASKETH',
	listVariableNameTrueCase: 'LSTBASKETH',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: true,
	__flagIncrementalRefreshAfterLoad: false,
	__version: 1,
	__persistWhere: 'IndexDB',
	__persistMode: 'full',
	_beforePersistToStorage: function(obj) { 	
	this._executeEvent('onBeforePersistToLocalStorage',obj)
	this.__doPersist = true;
	if(typeof obj.userData == 'undefined') obj.userData = {};
	this.__userData = obj.userData;
	//snapshot the list data in case the persist fails
	this._dataSnapshot = [].concat(this._data);
}
,
	persistToStorage: function(obj) { 	//system generated beforePersistToStorage code here
	var flagSuspendPersist = false;
	if(typeof this.suspendPersist != 'undefined') flagSuspendPersist = this.suspendPersist;
	if(flagSuspendPersist) return true;
	if(typeof obj.submode != 'undefined') {
		if(obj.submode == 'ListViewData') {
			var _wh = DLG1_DlgObj.__persistWhere(this.listVariableName);
			//see comment in a5DialogHelper_ListViewData() line 450
			if(_wh == 'fs') return;
		}
	}
	var result = DLG1_DlgObj.persistListToLocalStorage(this,obj);
	delete this.__userData;
	if(result) {
		delete this._dataSnapshot;
	} else {
		this.populate(this._dataSnapshot,false,false,false);  //need to .populate() without firing events
		delete this._dataSnapshot;
	}
	if(typeof this._pm_persistWhere == 'undefined') this._pm_persistWhere = 'localStorage';
	//the onPersistToLocalStorage event is fired in either the _persistToLocalStorageLow() methdo (for local storage) or _persistListToFile() method
	this._flagPersistDataOK = result;
	if(!result) {
		if(typeof this._tempFlagServerSideSearch != 'undefined') {
			if(this._tempFlagServerSideSearch) {
				this._executeEvent('onSearchResultTooLargeForLocalStorage',obj);
			}
			delete this._tempFlagServerSideSearch;
		}
	}
}
,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;if(!this._isInit && !this._restoringList) this._beforePersistToStorage({mode:'populate', data: data});
},
	onPopulate: function(data) {if(!this._isInit && !this._restoringList) {this.persistToStorage({mode:'populate', data: data}); }; if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){this._beforePersistToStorage({mode:'update', data: data, index: index});},
	onUpdateRow: function(index,data){this.persistToStorage({mode:'update', data: data, index: index});},
	onBeforeAddRows: function(data,info){this._beforePersistToStorage({mode:'add', data: data});},
	onAddRows: function(data,info){this.persistToStorage({mode:'add', data: data});},
	onBeforeRemoveRows: function(rows){this._beforePersistToStorage({mode:'remove', rows: rows});},
	onRemoveRows: function(rows){this.persistToStorage({mode:'remove', data: rows});},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	childLists: ['LSTBASKETDET'],
	childListEndpoints: ['LSTBASKETDET'],
	_populateAllChildLists: function() { this._emptyAllChildLists();
this._populateChildList('LSTBASKETDET');
 },
	onSelect: function() {var _changeWatchState = true; var _dlgObj = window[this._hostComponentId + '_DlgObj']; if(_dlgObj._fireWatchesFlag == false) { _changeWatchState = false; } 
_dlgObj._fireWatchesFlag = false;
DLG1_DlgObj._listRowSelect('LSTBASKETH',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTBASKETH'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTBASKETH'];
		var lObj = DLG1_DlgObj.getControl('LSTBASKETH');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};;
this._selectedRow = this.selection[0];
this._emptyAllChildLists();
this._populateChildList('LSTBASKETDET');
if(_changeWatchState) {  _dlgObj._fireWatchesFlag = true;
_dlgObj._fireWatches(1);}
;},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%;border-bottom: 2px solid red;">',
			'\t<div style="display: table-cell;">',
			'\t\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span id="DLG1.LSTBASKETH.BASKETDESC.I.{*dataRow}">{basketdesc}</span></div>',
			'        \t<div class="[theme:listBox.base.item.parts.contentClassName|Alpha-MagentaListItemContent]"><span id="DLG1.LSTBASKETH.FROMDATEF.I.{*dataRow}">{fromdateF}</span></div>',
			'            <div class="[theme:listBox.base.item.parts.contentClassName|Alpha-MagentaListItemContent]">{todateF}</div>',
			'\t</div>',
			'\t\t\t',
			'\t',
			'\t<div style="display: table-cell; width: 40px; text-align: right; vertical-align: middle;">',
			'        <span id="DLG1.LSTBASKETH.VIEWDETAILS.I.{*dataRow}"><button  a5-item="_systemButtononClick_ViewDetails"  id="DLG1.LSTBASKETH.VIEWDETAILS.BTN.{*dataRow}"  class="[class.dialogButton]" style="cursor:pointer;" title="">{@A5.u.icon.html(<escape<\'svgIcon=#alpha-icon-eyeAdd:icon,24{ fill: #fe0000;}\'>>)}Details</button></span>',
			'\t</div>',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);
DLG1_DlgObj.getControl('LSTBASKETH')._populateMyChildren();},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTBASKETH',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	detailViewIsDirty: function() { return false; },
	populateUXControls: function() { return true; },
	listIsDirty: function() { return false; },
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTBASKETH'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTBASKETH&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'id': RegExp('' + searchFor,'i'), 'basketdesc': RegExp('' + searchFor,'i'), 'fromdateF': RegExp('' + searchFor,'i'), 'todateF': RegExp('' + searchFor,'i'), 'poitypeid': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'poiid': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTBASKETH.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTBASKETH.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTBASKETH.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTBASKETH.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTBASKETH.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTBASKETH'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTBASKETH'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTBASKETH'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTBASKETH'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTBASKETH');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
'_systemButtononClick_ViewDetails' : {
	"selectable": true,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { DLG1_DlgObj.panelSetActive('PANELCARD_BASKETDET'); }(index,v,args,data,this,this))
				}
}
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '82bf1eaa-2d13-477e-af48-17861b339dbd'
};
DLG1_DlgObj._listViewSettings['LSTBASKETDET'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_emptyListWhenParentChanges: false,
	_hasDependentLists: false,
	_dataSourceType: 'sql',
	_listFields: [
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'Basketid',
	defaultValue: 'return this._controlDefaultValueForListField(\'Basketid\');'
},
{
	name: 'itemid',
	defaultValue: 'return this._controlDefaultValueForListField(\'itemid\');'
},
{
	name: 'qty',
	defaultValue: 'return this._controlDefaultValueForListField(\'qty\');'
},
{
	name: 'discount',
	defaultValue: 'return this._controlDefaultValueForListField(\'discount\');'
},
{
	name: 'itemtypeid',
	defaultValue: 'return this._controlDefaultValueForListField(\'itemtypeid\');'
},
{
	name: 'changeit',
	defaultValue: 'return this._controlDefaultValueForListField(\'changeit\');'
},
{
	name: 'company_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'company_id\');'
},
{
	name: 'description',
	defaultValue: 'return this._controlDefaultValueForListField(\'description\');'
},
{
	name: 'ItemImage',
	defaultValue: 'return this._controlDefaultValueForListField(\'ItemImage\');',
	image: {
		embedded: true,
		type: 'JPG'
	}
},
{
	name: 'tva',
	defaultValue: 'return this._controlDefaultValueForListField(\'tva\');'
},
{
	name: 'price',
	defaultValue: 'return this._controlDefaultValueForListField(\'price\');'
},
{
	name: 'bonusqte',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusqte\');'
},
{
	name: 'qteinpack',
	defaultValue: 'return this._controlDefaultValueForListField(\'qteinpack\');'
},
{
	name: 'bonusinpack',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusinpack\');'
},
{
	name: 'sellunit',
	defaultValue: 'return this._controlDefaultValueForListField(\'sellunit\');'
},
{
	name: 'bonusunit',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusunit\');'
},
{
	name: 'bonuspacksize',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonuspacksize\');'
},
{
	name: 'sellpacksize',
	defaultValue: 'return this._controlDefaultValueForListField(\'sellpacksize\');'
}],
	_delayRenderTillRefresh: false,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTBASKETDET.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTBASKETDET name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTBASKETDET');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTBASKETDET.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent'
			},
			onErrorFunction: function(e) { }
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: false,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta:subtleLined',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['basketdet.id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTBASKETDET',
	listVariableNameTrueCase: 'LSTBASKETDET',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: 'LSTBASKETH',
	allParentLists: ['LSTBASKETH'],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: false,
	__flagIncrementalRefreshAfterLoad: false,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;
},
	onPopulate: function(data) {if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){;},
	onUpdateRow: function(index,data){;},
	onBeforeAddRows: function(data,info){;},
	onAddRows: function(data,info){;},
	onBeforeRemoveRows: function(rows){;},
	onRemoveRows: function(rows){;},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTBASKETDET_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTBASKETDET_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTBASKETDET_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTBASKETDET_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTBASKETDET_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTBASKETDET_hasErrorInherited _DLG1_LSTBASKETDET_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTBASKETDET_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTBASKETDET_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTBASKETDET_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTBASKETDET_newRow';
 var _newRowStyle = '_DLG1_LSTBASKETDET_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTBASKETDET_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTBASKETDET_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTBASKETDET_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: [],
	childListEndpoints: ['LSTBASKETDET'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('LSTBASKETDET',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTBASKETDET'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTBASKETDET'];
		var lObj = DLG1_DlgObj.getControl('LSTBASKETDET');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onDblClick: function() {populateBasketDropDown();
DLG1_DlgObj.runAction('showbasketitemwindow');},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<!-- Flexbox Table -->',
			'<div style="display: flex; flex-direction: column; border-bottom: 2px solid red;width: 100%; max-width: 600px; font-family: sans-serif;">',
			'  <!-- Row 1: 2 columns -->',
			'  <div style="display: flex; flex-direction: row; font-weight: bold;">',
			'    <div style="flex: 1; padding: 10px; "><span id="DLG1.LSTBASKETDET.DESCRIPTION.I.{*dataRow}">{description}</span></div>',
			'  </div>',
			'',
			'  <!-- Row 2: 4 columns -->',
			'  <div style="display: flex; flex-direction: row;">',
			'    <div style="flex: 1; padding: 10px; ">Buy: <span id="DLG1.LSTBASKETDET.QTEINPACK.I.{*dataRow}">{qteinpack}</span> <span id="DLG1.LSTBASKETDET.SELLUNIT.I.{*dataRow}">{sellunit}</span></div>',
			'    <div style="flex: 1; padding: 10px; ">Price <span id="DLG1.LSTBASKETDET.PRICE.I.{*dataRow}">{price}</span></div>',
			'    <div style="flex: 1; padding: 10px; border: 1px solid #aaa;">Free:<span id="DLG1.LSTBASKETDET.BONUSINPACK.I.{*dataRow}">{bonusinpack}</span> <span id="DLG1.LSTBASKETDET.BONUSUNIT.I.{*dataRow}">{bonusunit}</span></div>',
			'  </div>',
			'',
			'',
			'  <!-- Row 4: 3 columns -->',
			'  <div style="display: flex; flex-direction: row;">',
			'    <div style="flex: 1; padding: 10px; ">total qty: <span id="DLG1.LSTBASKETDET.QTY.I.{*dataRow}">{qty}</span></div>',
			'    <div style="flex: 1; padding: 10px; ">price: <span id="DLG1.LSTBASKETDET.PRICE.I.{*dataRow}">{price}</span></div>',
			'  </div>',
			'',
			'',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: false,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTBASKETDET',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {},
	_showSQL_CRUD: function(txt) { },
	_globalErrorPlaceHolder: '',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTBASKETDET'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTBASKETDET&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'id': RegExp('' + searchFor,'i'), 'Basketid': RegExp('' + searchFor,'i'), 'itemid': RegExp('' + searchFor,'i'), 'qty': RegExp('' + searchFor,'i'), 'discount': RegExp('' + searchFor,'i'), 'itemtypeid': RegExp('' + searchFor,'i'), 'changeit': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'description': RegExp('' + searchFor,'i'), 'tva': RegExp('' + searchFor,'i'), 'price': RegExp('' + searchFor,'i'), 'bonusqte': RegExp('' + searchFor,'i'), 'qteinpack': RegExp('' + searchFor,'i'), 'bonusinpack': RegExp('' + searchFor,'i'), 'sellunit': RegExp('' + searchFor,'i'), 'bonusunit': RegExp('' + searchFor,'i'), 'bonuspacksize': RegExp('' + searchFor,'i'), 'sellpacksize': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTBASKETDET.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTBASKETDET.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTBASKETDET.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTBASKETDET.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTBASKETDET.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTBASKETDET'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTBASKETDET'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTBASKETDET'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTBASKETDET'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTBASKETDET');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '570c5f70-4b3f-452a-97ba-b8ac4f95d20e'
};
DLG1_DlgObj._listViewSettings['LSTITEMS'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	_dataSourceType: 'Static',
	sortVirtualJavascript_wh4: function(data) {
mwh = DLG1_DlgObj.getValue('wh4');
return mwh;},
	sortVirtualJavascript_totline: function(data) {
mtot = Number(data.qty) * Number(data.price) * ((100-Number(data.discount))/100);
var formattedNumber = mtot.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ","); // Add thousand separator
return  'TOTAL : '+formattedNumber},
	sortVirtualJavascript_wh1: function(data) {
mwh = DLG1_DlgObj.getValue('wh1');
return mwh;},
	sortVirtualJavascript_wh2: function(data) {
mwh = DLG1_DlgObj.getValue('wh2');
return mwh;},
	sortVirtualJavascript_wh3: function(data) {
mwh = DLG1_DlgObj.getValue('wh3');
return mwh;},
	_virtualJavascript: {
		WH4: function(rowNumber,data,lObj) { 
mwh = DLG1_DlgObj.getValue('wh4');
return mwh;},
		TOTLINE: function(rowNumber,data,lObj) { mtot = Number(data.qty) * Number(data.price) * ((100-Number(data.discount))/100);
var formattedNumber = mtot.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
return  'TOTAL : '+formattedNumber},
		WH1: function(rowNumber,data,lObj) { 
mwh = DLG1_DlgObj.getValue('wh1');
return mwh;},
		WH2: function(rowNumber,data,lObj) { 
mwh = DLG1_DlgObj.getValue('wh2');
return mwh;},
		WH3: function(rowNumber,data,lObj) { 
mwh = DLG1_DlgObj.getValue('wh3');
return mwh;}
	},
	_listFields: [
{
	name: 'custid',
	defaultValue: 'return this._controlDefaultValueForListField(\'custid\');'
},
{
	name: 'product_code',
	defaultValue: 'return this._controlDefaultValueForListField(\'product_code\');'
},
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'va',
	defaultValue: 'return this._controlDefaultValueForListField(\'va\');'
},
{
	name: 'itemgroup',
	defaultValue: 'return this._controlDefaultValueForListField(\'itemgroup\');'
},
{
	name: 'description',
	defaultValue: 'return this._controlDefaultValueForListField(\'description\');'
},
{
	name: 'price',
	defaultValue: 'return this._controlDefaultValueForListField(\'price\');'
},
{
	name: 'discusedtype',
	defaultValue: 'return this._controlDefaultValueForListField(\'discusedtype\');'
},
{
	name: 'discusedcoment',
	defaultValue: 'return this._controlDefaultValueForListField(\'discusedcoment\');'
},
{
	name: 'qty',
	defaultValue: 'return this._controlDefaultValueForListField(\'qty\');'
},
{
	name: 'bonus',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonus\');'
},
{
	name: 'bonusitem',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusitem\');'
},
{
	name: 'discount',
	defaultValue: 'return this._controlDefaultValueForListField(\'discount\');'
},
{
	name: 'type',
	defaultValue: 'return this._controlDefaultValueForListField(\'type\');'
},
{
	name: 'subgroup',
	defaultValue: 'return this._controlDefaultValueForListField(\'subgroup\');'
},
{
	name: 'wh1q',
	defaultValue: 'return this._controlDefaultValueForListField(\'wh1q\');'
},
{
	name: 'wh2q',
	defaultValue: 'return this._controlDefaultValueForListField(\'wh2q\');'
},
{
	name: 'wh3q',
	defaultValue: 'return this._controlDefaultValueForListField(\'wh3q\');'
},
{
	name: 'wh4q',
	defaultValue: 'return this._controlDefaultValueForListField(\'wh4q\');'
},
{
	name: 'returnable',
	defaultValue: 'return this._controlDefaultValueForListField(\'returnable\');'
},
{
	name: 'returnitem',
	defaultValue: 'return this._controlDefaultValueForListField(\'returnitem\');'
},
{
	name: 'qtypack',
	defaultValue: 'return this._controlDefaultValueForListField(\'qtypack\');'
},
{
	name: 'moq',
	defaultValue: 'return this._controlDefaultValueForListField(\'moq\');'
},
{
	name: 'qteinpack',
	defaultValue: 'return this._controlDefaultValueForListField(\'qteinpack\');'
},
{
	name: 'bonusinpack',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusinpack\');'
},
{
	name: 'sellunit',
	defaultValue: 'return this._controlDefaultValueForListField(\'sellunit\');'
},
{
	name: 'bonusunit',
	defaultValue: 'return this._controlDefaultValueForListField(\'bonusunit\');'
}],
	_delayRenderTillRefresh: false,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent'
			},
			onErrorFunction: function(e) { }
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [
{
	field: 'product_code',
	control: 'prodcode'
},
{
	field: 'description',
	control: 'itemname'
},
{
	field: 'price',
	control: 'lstitems_unitpr'
},
{
	field: 'discusedtype',
	control: 'liteitems_DiscussedType'
},
{
	field: 'discusedcoment',
	control: 'listitems_DiscussedComent'
},
{
	field: 'qty',
	control: 'qty'
},
{
	field: 'bonus',
	control: 'bonus'
},
{
	field: 'discount',
	control: 'lstitems_discount'
},
{
	field: 'qteinpack',
	control: 'lstitems_qty_pac'
},
{
	field: 'bonusinpack',
	control: 'lstitems_bonusq_pac'
},
{
	field: 'sellunit',
	control: 'dropsellunit'
},
{
	field: 'bonusunit',
	control: 'dropbonusunit'
}],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta:subtleLined',
	className: '',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'default',
	calculateValue: function(data) {  {var _val = '' +A5RemoveHTMLWrapper(data.id); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTITEMS',
	listVariableNameTrueCase: 'LSTITEMS',
	_hostComponentId: 'DLG1',
	_includeCRC: false,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: false,
	__flagIncrementalRefreshAfterLoad: false,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){;},
	onUpdateRow: function(index,data){;},
	onBeforeAddRows: function(data,info){;},
	onAddRows: function(data,info){;},
	onBeforeRemoveRows: function(rows){;},
	onRemoveRows: function(rows){;},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTITEMS_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTITEMS_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTITEMS_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTITEMS_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTITEMS_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTITEMS_hasErrorInherited _DLG1_LSTITEMS_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTITEMS_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTITEMS_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTITEMS_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTITEMS_newRow';
 var _newRowStyle = '_DLG1_LSTITEMS_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTITEMS_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTITEMS_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTITEMS_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }
var dialog = {};
var summary = {};
DLG1_DlgObj._getDialogVariables(dialog,summary,data);
if(data.discount==0) {
var ele2 = $('DLG1.LSTITEMS.BONUSUNIT.I.'+ index);
if(ele2) A5.u.element.style(ele2,'+=display: none ;')
 }
var e = $('DLG1.LSTITEMS.BONUSUNIT.I.'+index); if(e) { var s = ''; if(!(1 == 2)) s = 'none'; e.style.display = s;}},
	childLists: [],
	childListEndpoints: ['LSTITEMS'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('LSTITEMS',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTITEMS'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTITEMS'];
		var lObj = DLG1_DlgObj.getControl('LSTITEMS');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
 var myobj = DLG1_DlgObj.getControl('LSTITEMS');
 console.log(myobj);
 console.log('consit');
 var eleListRow = this.contId + "." + arguments[0];
  setTimeout(function(){
  DLG1_DlgObj.showContainerWindow(eleListRow,'WINDOW_17');
  return false;
 },150)
DLG1_DlgObj._listSystemOnClick('LSTITEMS',this.selection[0]);},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		},
		auto: [
{
	order: {'itemgroup' : 1},
	group: function(data) { var txt = data.itemgroup;  if(txt && typeof txt != 'undefined') { return txt.trim()}; return '';},
	className: '',
	collapseIcon: 'svgIcon=#alpha-icon-chevronRight:icon',
	expandIcon: 'svgIcon=#alpha-icon-chevronDown:icon',
	onCollapse: '',
	onExpand: '',
	header: {
		className: 'A5ListGroupHeaders [theme:ListBox.Base.Item.TitleClassName]',
		html: function(group,data) { return '<div style="width: 100%;display:inline-block; whitespace:nowrap; ">'+group+' <div style="text-align: right;float: right;">{indicator}</div><br style="clear:both;" />'+'</div></div>'; }
	},
	footer: {
		show: false
	},
	navigate: true,
	collapse: {
		allow: 'title',
		indicator: {
			collapse: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg>',
			expand: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>'
		},
		auto: false
	}
},
{
	order: {'subgroup' : 1},
	group: function(data) { var txt = data.subgroup;  if(txt && typeof txt != 'undefined') { return txt.trim()}; return '';},
	className: '',
	collapseIcon: 'svgIcon=#alpha-icon-chevronRight:icon',
	expandIcon: 'svgIcon=#alpha-icon-chevronDown:icon',
	onCollapse: '',
	onExpand: '',
	header: {
		className: 'A5ListGroupHeaders [theme:ListBox.Base.Item.TitleClassName]',
		html: function(group,data) { return '<div style="width: 100%;display:inline-block; whitespace:nowrap; ">'+group+' <div style="text-align: right;float: right;">{indicator}</div><br style="clear:both;" />'+'</div></div>'; }
	},
	footer: {
		show: false
	},
	navigate: true,
	collapse: {
		allow: 'title',
		indicator: {
			collapse: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronDown"  pointer-events="none" /></svg>',
			expand: '<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>'
		},
		auto: false
	}
}]
	},
	layouts: {
		default: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '180px',
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div class="listItemLined" style="border-top: 1px solid red; padding: 10px; overflow-x: hidden;">',
			'  <!-- Top Section: Code + Description -->',
			'  <div style="display: table; width: 100%; font-weight: bold; margin-bottom: 10px; table-layout: fixed;">',
			'    <div style="display: table-cell; width: 30%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; vertical-align: middle;">',
			'      <span a5-item="_a5FieldEvent:product_code" ><span id="DLG1.LSTITEMS.PRODUCT_CODE.I.{*dataRow}">{product_code}</span></span>',
			'    </div>',
			'    <div style="display: table-cell; width: 70%; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; vertical-align: middle;">',
			'      <span a5-item="_a5FieldEvent:description" ><span id="DLG1.LSTITEMS.DESCRIPTION.I.{*dataRow}">{description}</span></span>',
			'    </div>',
			'  </div>',
			'',
			'  <!-- Mid Section: Labels + Quantities -->',
			'  <div style="display: table; width: 100%; margin-bottom: 10px; table-layout: fixed;">',
			'    <div style="display: table-cell; width: 20%; vertical-align: top; padding: 0 5px;">',
			'      <div style="font-size: 14px; padding-top: 20px;">SELL :</div>',
			'      <div class=\'_bonus\' style="font-size: 14px; padding-top: 20px;">BONUS :</div>',
			'    </div>',
			'',
			'    <div style="display: table-cell; width: 25%; vertical-align: top; padding: 0 5px; text-align: left;">',
			'      <div class="title">QTY</div>',
			'      <div style="font-size: 14px; margin-top: 5px;"><span a5-item="_a5FieldEvent:qteinpack" ><span class="qty-bonus-display" style=""><span id="DLG1.LSTITEMS.QTEINPACK.I.{*dataRow}">{qteinpack}</span></span></span></div>',
			'      <div class=\'_bonus\' style="font-size: 14px; margin-top: 5px;"><span a5-item="_a5FieldEvent:bonusinpack" ><span class="qty-bonus-display" style=""><span id="DLG1.LSTITEMS.BONUSINPACK.I.{*dataRow}">{bonusinpack}</span></span></span></div>',
			'    </div>',
			'',
			'    <div style="display: table-cell; width: 25%; vertical-align: top; padding: 0 5px; text-align: left;">',
			'      <div style="font-size: 12px; font-weight: bold;">UNIT</div>',
			'      <div style="font-size: 14px; margin-top: 5px;"><span a5-item="_a5FieldEvent:sellunit" ><span class="qty-bonus-display" style="width: 80%;"><span id="DLG1.LSTITEMS.SELLUNIT.I.{*dataRow}">{sellunit}</span></span></span></div>',
			'      <div class=\'_bonus\' style="font-size: 14px; margin-top: 5px;"> <span a5-item="_a5FieldEvent:bonusunit" ><span class="qty-bonus-display" style=""><span id="DLG1.LSTITEMS.BONUSUNIT.I.{*dataRow}">{bonusunit}</span></span></span></div>',
			'    </div>',
			'',
			'    <div style="display: table-cell; width: 30%; vertical-align: top; padding: 0 5px;">',
			'      <!-- Optional empty space or future data -->',
			'    </div>',
			'  </div>',
			'',
			'  <!-- Bottom Section 1: QTY + Bonus + Price -->',
			'  <div style="display: table; width: 100%; font-weight: bold; table-layout: fixed; margin-bottom: 5px;">',
			'    <div style="display: table-cell; width: 33.33%; padding-right: 10px;">qty: <span a5-item="_a5FieldEvent:qty" ><span id="DLG1.LSTITEMS.QTY.I.{*dataRow}">{qty}</span></span></div>',
			'    <div class=\'_bonus\' style="display: table-cell; width: 33.33%; padding-right: 10px;">Bonus: <span a5-item="_a5FieldEvent:bonus" ><span id="DLG1.LSTITEMS.BONUS.I.{*dataRow}">{bonus}</span></span></div>',
			'    <div style="display: table-cell; width: 33.33%; padding-right: 10px;">Unit Pr: <span a5-item="_a5FieldEvent:price" ><span id="DLG1.LSTITEMS.PRICE.I.{*dataRow}">{price}</span></span></div>',
			'  </div>',
			'',
			'  <!-- Bottom Section 2: Discount + Total -->',
			'  <div style="display: table; width: 100%; font-weight: bold; table-layout: fixed;">',
			'    <div style="display: table-cell; width: 30%; padding-right: 10px;">Disc.: <span a5-item="_a5FieldEvent:discount" ><span id="DLG1.LSTITEMS.DISCOUNT.I.{*dataRow}">{discount}</span></span></div>',
			'    <div style="display: table-cell; width: 70%; padding-right: 10px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">',
			'      {*ensure __edit}',
			'{*if __edit}',
			'\t<input value="{[scope]._virtualJavascript[\'TOTLINE\']([temp].info.index,[root],[scope])}"  class="[theme:edit.base.className]" readonly="readonly" style="width: 100%" />',
			'{*else}',
			'\t<span id="DLG1.LSTITEMS.TOTLINE.I.{*dataRow}">{[scope]._virtualJavascript[\'TOTLINE\']([temp].info.index,[root],[scope])}</span>',
			'{*endif}',
			'\t\t\t',
			'    </div>',
			'  </div>',
			'</div>']
		},
		sample: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%;">',
			'\t<div style="display: table-cell;">',
			'\t\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]" style="float: right;"><span a5-item="_a5FieldEvent:qty" ><span id="DLG1.LSTITEMS.QTY.I.{*dataRow}">{qty}</span></span></div>',
			'        <span a5-item="_a5FieldEvent:custid" ><span id="DLG1.LSTITEMS.CUSTID.I.{*dataRow}">{custid}</span></span>',
			'\t\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span a5-item="_a5FieldEvent:description" ><span id="DLG1.LSTITEMS.DESCRIPTION.I.{*dataRow}">{description}</span></span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.subClassName|Alpha-MagentaListItemLabelSub]"><span a5-item="_a5FieldEvent:product_code" ><span id="DLG1.LSTITEMS.PRODUCT_CODE.I.{*dataRow}">{product_code}</span></span></div>',
			'\t</div>',
			'\t\t\t',
			'\t<div style="display: table-cell; width: 60px; text-align: left; vertical-align: top;">\t',
			'        <span id="DLG1.LSTITEMS.EDIT.I.{*dataRow}"><button  a5-item="_systemButtononClick_Edit"  id="DLG1.LSTITEMS.EDIT.BTN.{*dataRow}"  class="[class.dialogButton]" style="padding: 0px; cursor: pointer; " title="">{@A5.u.icon.html(<escape<\'svgIcon=#alpha-icon-docEditSolid:icon,200{ fill: #f14242;}\'>>)}</button></span>',
			'\t</div>',
			'\t',
			'</div>']
		},
		discus: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%;">',
			'\t<div style="display: table-cell;">',
			'\t\t<div class="[theme:listBox.base.item.parts.contextClassName|Alpha-MagentaListItemLabelContext]" style="float: right;"><span a5-item="_a5FieldEvent:discusedcoment" ><span id="DLG1.LSTITEMS.DISCUSEDCOMENT.I.{*dataRow}">{discusedcoment}</span></span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span a5-item="_a5FieldEvent:description" ><span id="DLG1.LSTITEMS.DESCRIPTION.I.{*dataRow}">{description}</span></span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.subClassName|Alpha-MagentaListItemLabelSub]"><span a5-item="_a5FieldEvent:product_code" ><span id="DLG1.LSTITEMS.PRODUCT_CODE.I.{*dataRow}">{product_code}</span></span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.contentClassName|Alpha-MagentaListItemContent]">',
			'\t\t\t<span a5-item="_a5FieldEvent:discusedtype" ><span id="DLG1.LSTITEMS.DISCUSEDTYPE.I.{*dataRow}">{discusedtype}</span></span><br/>',
			'\t\t\t',
			'\t\t</div>',
			'\t</div>',
			'\t\t\t',
			'\t<div style="display: table-cell; width: 60px; text-align: left; vertical-align: top;">\t',
			'        <span id="DLG1.LSTITEMS.EDIT.I.{*dataRow}"><button  a5-item="_systemButtononClick_Edit"  id="DLG1.LSTITEMS.EDIT.BTN.{*dataRow}"  class="[class.dialogButton]" style="padding: 0px; cursor: pointer; " title="">{@A5.u.icon.html(<escape<\'svgIcon=#alpha-icon-docEditSolid:icon,200{ fill: #f14242;}\'>>)}</button></span>',
			'\t</div>',
			'\t',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {
return;
doTranslateits();
var mhideBonus =DLG1_DlgObj.getValue('hidebonus');
 if (mhideBonus==1)  {
  var arr = document.getElementsByClassName('_bonus');
  for (i = 0; i < arr.length; i++) {
      arr[i].style.display =  'none' ;
  }
}
if(A5.flags.isMobile)  {
 $e.add(this.contId+'.CONTENT','abstractdown',function(e) {
  var ele = e.target;
  var tag = '';
  if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
  if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
 });
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
 if(!d[i].__selected) {
  this._allrowschecked = false;
  break;
 }
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
 h = A5.u.icon.html(this.__checkedImage);
} else {
 h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h},
	captureFocus: false,
	content: {
		header: {
			show: false
		},
		footer: {
			show: true,
			html: '',
			style: ''
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		detailView: {
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTITEMS',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '||',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {},
	_showSQL_CRUD: function(txt) { },
	_globalErrorPlaceHolder: '',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTITEMS'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTITEMS&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'custid': RegExp('' + searchFor,'i'), 'product_code': RegExp('' + searchFor,'i'), 'id': RegExp('' + searchFor,'i'), 'va': RegExp('' + searchFor,'i'), 'itemgroup': RegExp('' + searchFor,'i'), 'description': RegExp('' + searchFor,'i'), 'price': RegExp('' + searchFor,'i'), 'discusedtype': RegExp('' + searchFor,'i'), 'discusedcoment': RegExp('' + searchFor,'i'), 'qty': RegExp('' + searchFor,'i'), 'bonus': RegExp('' + searchFor,'i'), 'bonusitem': RegExp('' + searchFor,'i'), 'discount': RegExp('' + searchFor,'i'), 'type': RegExp('' + searchFor,'i'), 'subgroup': RegExp('' + searchFor,'i'), 'wh1q': RegExp('' + searchFor,'i'), 'wh2q': RegExp('' + searchFor,'i'), 'wh3q': RegExp('' + searchFor,'i'), 'wh4q': RegExp('' + searchFor,'i'), 'returnable': RegExp('' + searchFor,'i'), 'returnitem': RegExp('' + searchFor,'i'), 'qtypack': RegExp('' + searchFor,'i'), 'moq': RegExp('' + searchFor,'i'), 'qteinpack': RegExp('' + searchFor,'i'), 'bonusinpack': RegExp('' + searchFor,'i'), 'sellunit': RegExp('' + searchFor,'i'), 'bonusunit': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTITEMS.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTITEMS.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTITEMS.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTITEMS.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTITEMS.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTITEMS'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTITEMS'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTITEMS'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTITEMS'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTITEMS');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	view: {
		type: 'dynamic',
		size: 25,
		maxSize: 70,
		offset: 20,
		navigation: {
			pull: {
				allow: true,
				size: 40
			},
			prev: {
				html: 'Previous',
				className: 'listNavButtonPrev ',
				pressedClassName: ''
			},
			next: {
				html: 'Next',
				className: 'listNavButtonNext ',
				pressedClassName: ''
			},
			event: 'navigate'
		}
	},
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
'_systemButtononClick_minusb' : {
	"selectable": false,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { listObj.setValue(rowNumber,false);var listObj = DLG1_DlgObj.getControl('LSTITEMS');
    var rowNum = rowNumber
    if (rowNum !== -1) {
     console.log('here');
        var currentQty = data.bonus
        var newQty = (parseInt(currentQty) || 0) - 1;
        listObj.updateTableRow(rowNum, { bonus: newQty });
    } else {
        alert("Please select a row first.");
    } }(index,v,args,data,this,this))
				}
},
'_systemButtononClick_plusb' : {
	"selectable": false,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { listObj.setValue(rowNumber,false);var listObj = DLG1_DlgObj.getControl('LSTITEMS');
    var rowNum = rowNumber
    if (rowNum !== -1) {
     console.log('here');
        var currentQty = data.bonus
        var newQty = (parseInt(currentQty) || 0) + 1;
        listObj.updateTableRow(rowNum, { bonus: newQty });
    } else {
        alert("Please select a row first.");
    } }(index,v,args,data,this,this))
				}
},
'_systemButtononClick_minus' : {
	"selectable": false,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { listObj.setValue(rowNumber,false);var listObj = DLG1_DlgObj.getControl('LSTITEMS');
    var rowNum = rowNumber
    if (rowNum !== -1) {
     console.log('here');
        var currentQty = data.qty;
        var newQty = (parseInt(currentQty) || 0) - 1;
        listObj.updateTableRow(rowNum, { qty: newQty });
    } else {
        alert("Please select a row first.");
    } }(index,v,args,data,this,this))
				}
},
'_systemButtononClick_Edit' : {
	"selectable": false,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { listObj.setValue(rowNumber,false);setTimeout(sf,150);
function sf(){
	DLG1_DlgObj.showContainerWindow(this,'WINDOW_17');
	var mFlag = DLG1_DlgObj.getValue('flagadditem');	
	if(mFlag == 2){
		DLG1_DlgObj.setFocus('liteitems_DiscussedType');
		return ;
	} else {
		DLG1_DlgObj.setFocus('lstitems_qty');
		return ;
	}
} }(index,v,args,data,this,this))
				}
},
'_systemButtononClick_plus' : {
	"selectable": false,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { listObj.setValue(rowNumber,false);var listObj = DLG1_DlgObj.getControl('LSTITEMS');
    var rowNum = rowNumber
    if (rowNum !== -1) {
     console.log('here');
        var currentQty = data.qty;
        var newQty = (parseInt(currentQty) || 0) + 1;
        listObj.updateTableRow(rowNum, { qty: newQty });
    } else {
        alert("Please select a row first.");
    } }(index,v,args,data,this,this))
				}
},
'_a5FieldEvent' : {
	"selectable": true
}
},
	_searchHighlighting: false,
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '9bec8afd-6125-4696-aca9-b53268dde663'
};
DLG1_DlgObj._listViewSettings['LSTVACATION'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'medred_id',
	defaultValue: 'return DLG1_DlgObj.getValue(\'medrepcode\');'
},
{
	name: 'date',
	defaultValue: 'return this._controlDefaultValueForListField(\'date\');'
},
{
	name: 'comment',
	defaultValue: 'return this._controlDefaultValueForListField(\'comment\');'
},
{
	name: 'approved',
	defaultValue: 'return this._controlDefaultValueForListField(\'approved\');'
},
{
	name: 'company_id',
	defaultValue: 'return DLG1_DlgObj.getValue(\'COMPANYID\');'
},
{
	name: 'vacation_activity',
	decode: true,
	defaultValue: 'return this._controlDefaultValueForListField(\'vacation_activity\');'
},
{
	name: 'reason',
	defaultValue: 'return this._controlDefaultValueForListField(\'reason\');'
}],
	_delayRenderTillRefresh: false,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTVACATION.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTVACATION name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTVACATION');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTVACATION.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent',
				progress: {
				},
				onProgressEvent: ''
			},
			onErrorFunction: function(e) { }
		}
	},
	_indexdb: {
		mediafiles: {
			download: false,
			showProgress: false,
			progress: {
			},
			downloadHasOnProgressEvent: false,
			upload: {
				showProgress: false
			}
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [
{
	field: 'medred_id',
	control: 'vacation_medrep'
},
{
	field: 'date',
	control: 'vacation_date'
},
{
	field: 'comment',
	control: 'vacation_comment'
},
{
	field: 'company_id',
	control: 'vacation_company_id'
},
{
	field: 'vacation_activity',
	control: 'vacation_activity'
},
{
	field: 'reason',
	control: 'reason'
}],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTVACATION',
	listVariableNameTrueCase: 'LSTVACATION',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: true,
	__flagIncrementalRefreshAfterLoad: false,
	__version: 1,
	__persistWhere: 'IndexDB',
	__persistMode: 'full',
	_beforePersistToStorage: function(obj) { 	
	this._executeEvent('onBeforePersistToLocalStorage',obj)
	this.__doPersist = true;
	if(typeof obj.userData == 'undefined') obj.userData = {};
	this.__userData = obj.userData;
	//snapshot the list data in case the persist fails
	this._dataSnapshot = [].concat(this._data);
}
,
	persistToStorage: function(obj) { 	//system generated beforePersistToStorage code here
	var flagSuspendPersist = false;
	if(typeof this.suspendPersist != 'undefined') flagSuspendPersist = this.suspendPersist;
	if(flagSuspendPersist) return true;
	if(typeof obj.submode != 'undefined') {
		if(obj.submode == 'ListViewData') {
			var _wh = DLG1_DlgObj.__persistWhere(this.listVariableName);
			//see comment in a5DialogHelper_ListViewData() line 450
			if(_wh == 'fs') return;
		}
	}
	var result = DLG1_DlgObj.persistListToLocalStorage(this,obj);
	delete this.__userData;
	if(result) {
		delete this._dataSnapshot;
	} else {
		this.populate(this._dataSnapshot,false,false,false);  //need to .populate() without firing events
		delete this._dataSnapshot;
	}
	if(typeof this._pm_persistWhere == 'undefined') this._pm_persistWhere = 'localStorage';
	//the onPersistToLocalStorage event is fired in either the _persistToLocalStorageLow() methdo (for local storage) or _persistListToFile() method
	this._flagPersistDataOK = result;
	if(!result) {
		if(typeof this._tempFlagServerSideSearch != 'undefined') {
			if(this._tempFlagServerSideSearch) {
				this._executeEvent('onSearchResultTooLargeForLocalStorage',obj);
			}
			delete this._tempFlagServerSideSearch;
		}
	}
}
,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;if(!this._isInit && !this._restoringList) this._beforePersistToStorage({mode:'populate', data: data});
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit && !this._restoringList) {this.persistToStorage({mode:'populate', data: data}); }; if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){this._beforePersistToStorage({mode:'update', data: data, index: index});},
	onUpdateRow: function(index,data){this.persistToStorage({mode:'update', data: data, index: index});},
	onBeforeAddRows: function(data,info){this._beforePersistToStorage({mode:'add', data: data});},
	onAddRows: function(data,info){this.persistToStorage({mode:'add', data: data});},
	onBeforeRemoveRows: function(rows){this._beforePersistToStorage({mode:'remove', rows: rows});},
	onRemoveRows: function(rows){this.persistToStorage({mode:'remove', data: rows});},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTVACATION_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTVACATION_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTVACATION_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTVACATION_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTVACATION_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTVACATION_hasErrorInherited _DLG1_LSTVACATION_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTVACATION_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTVACATION_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTVACATION_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTVACATION_newRow';
 var _newRowStyle = '_DLG1_LSTVACATION_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTVACATION_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTVACATION_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTVACATION_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: [],
	childListEndpoints: ['LSTVACATION'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('LSTVACATION',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTVACATION'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTVACATION'];
		var lObj = DLG1_DlgObj.getControl('LSTVACATION');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
DLG1_DlgObj._listSystemOnClick('LSTVACATION',this.selection[0]);
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div style="display: table; width: 100%;">',
			'\t<div style="display: table-cell;">',
			'\t\t<div class="[theme:listBox.base.item.parts.contextClassName|Alpha-MagentaListItemLabelContext]" style="float: right;"><span id="DLG1.LSTVACATION.DATE.I.{*dataRow}">{date}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span id="DLG1.LSTVACATION.VACATION_ACTIVITY.I.{*dataRow}">{@[scope].resolveCodedValue(\'vacation_activity\',vacation_activity)}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.subClassName|Alpha-MagentaListItemLabelSub]"><span id="DLG1.LSTVACATION.REASON.I.{*dataRow}">{reason}</span></div>',
			'\t\t<div class="[theme:listBox.base.item.parts.contentClassName|Alpha-MagentaListItemContent]">',
			'\t\t\t<span id="DLG1.LSTVACATION.COMMENT.I.{*dataRow}">{comment}</span><br/>',
			'\t\t\t',
			'\t\t</div>',
			'\t</div>',
			'\t\t\t',
			'\t',
			'\t<div style="display: table-cell; width: 40px; text-align: right; vertical-align: middle;">',
			'\t\t<svg     class="icon"><use x="0" y="0" width="100%" height="100%" xlink:href="#alpha-icon-chevronRight"  pointer-events="none" /></svg>',
			'\t</div>',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: false,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTVACATION',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {},
	_showSQL_CRUD: function(txt) { },
	_globalErrorPlaceHolder: 'LSTVACATION_GLOBALERRORS',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTVACATION'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTVACATION&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'id': RegExp('' + searchFor,'i'), 'medred_id': RegExp('' + searchFor,'i'), 'date': RegExp('' + searchFor,'i'), 'comment': RegExp('' + searchFor,'i'), 'approved': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'vacation_activity': RegExp('' + searchFor,'i'), 'reason': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTVACATION.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTVACATION.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTVACATION.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTVACATION.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTVACATION.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTVACATION'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTVACATION'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTVACATION'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTVACATION'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTVACATION');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: 'c43e9608-38c9-462a-959d-211f93328e3a'
};
DLG1_DlgObj._listViewSettings['LSTPOI'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'ID',
	defaultValue: 'return this._controlDefaultValueForListField(\'ID\');'
},
{
	name: 'frequency',
	defaultValue: 'return this._controlDefaultValueForListField(\'frequency\');'
},
{
	name: 'POINAME',
	defaultValue: 'return this._controlDefaultValueForListField(\'POINAME\');'
},
{
	name: 'POITYPE',
	defaultValue: 'return this._controlDefaultValueForListField(\'POITYPE\');'
},
{
	name: 'POISPECIALITY',
	defaultValue: 'return this._controlDefaultValueForListField(\'POISPECIALITY\');'
},
{
	name: 'POIDISTRICT',
	defaultValue: 'return this._controlDefaultValueForListField(\'POIDISTRICT\');'
},
{
	name: 'POIREGION',
	defaultValue: 'return this._controlDefaultValueForListField(\'POIREGION\');'
},
{
	name: 'POTENTIALITY',
	defaultValue: 'return this._controlDefaultValueForListField(\'POTENTIALITY\');'
},
{
	name: 'LAT',
	defaultValue: 'return this._controlDefaultValueForListField(\'LAT\');'
},
{
	name: 'LONT',
	defaultValue: 'return this._controlDefaultValueForListField(\'LONT\');'
},
{
	name: 'BESTTIME',
	defaultValue: 'return this._controlDefaultValueForListField(\'BESTTIME\');'
},
{
	name: 'CLASS',
	defaultValue: 'return this._controlDefaultValueForListField(\'CLASS\');'
},
{
	name: 'COMMENT',
	defaultValue: 'return this._controlDefaultValueForListField(\'COMMENT\');'
},
{
	name: 'CONTACTPERSON',
	defaultValue: 'return this._controlDefaultValueForListField(\'CONTACTPERSON\');'
},
{
	name: 'PHONENO',
	defaultValue: 'return this._controlDefaultValueForListField(\'PHONENO\');'
},
{
	name: 'MOBILE',
	defaultValue: 'return this._controlDefaultValueForListField(\'MOBILE\');'
},
{
	name: 'EMAIL',
	defaultValue: 'return this._controlDefaultValueForListField(\'EMAIL\');'
},
{
	name: 'ADDRESS',
	defaultValue: 'return this._controlDefaultValueForListField(\'ADDRESS\');'
},
{
	name: 'STREET',
	defaultValue: 'return this._controlDefaultValueForListField(\'STREET\');'
},
{
	name: 'account_type',
	defaultValue: 'return this._controlDefaultValueForListField(\'account_type\');'
},
{
	name: 'medrep_id',
	defaultValue: 'return DLG1_DlgObj.getValue(\'medrepcode\');'
},
{
	name: 'company_id',
	defaultValue: 'return DLG1_DlgObj.getValue(\'COMPANYID\');'
},
{
	name: 'areaid',
	defaultValue: 'return this._controlDefaultValueForListField(\'areaid\');'
},
{
	name: 'poiorcust',
	defaultValue: 'return this._controlDefaultValueForListField(\'poiorcust\');'
},
{
	name: 'pricelist',
	defaultValue: 'return this._controlDefaultValueForListField(\'pricelist\');'
},
{
	name: 'poicode',
	defaultValue: 'return this._controlDefaultValueForListField(\'poicode\');'
},
{
	name: 'POICATEGORY',
	defaultValue: 'return this._controlDefaultValueForListField(\'POICATEGORY\');'
},
{
	name: 'POISTATUS',
	defaultValue: 'return this._controlDefaultValueForListField(\'POISTATUS\');'
},
{
	name: 'POICREDITLIMIT',
	defaultValue: 'return this._controlDefaultValueForListField(\'POICREDITLIMIT\');'
},
{
	name: 'AMOUNTLIMIT',
	defaultValue: 'return this._controlDefaultValueForListField(\'AMOUNTLIMIT\');'
},
{
	name: 'DAYLIMIT',
	defaultValue: 'return this._controlDefaultValueForListField(\'DAYLIMIT\');'
},
{
	name: 'PAYMENTMODEID',
	defaultValue: 'return this._controlDefaultValueForListField(\'PAYMENTMODEID\');'
}],
	_delayRenderTillRefresh: true,
	_searchPartHas: true,
	_searchPart: {
		fieldMap: []
	},
	_searchPartStyle: 'singlekeywordcontrol',
	_keywordSearchFields: ['POINAME','ADDRESS','STREET','MOBILE','CONTACTPERSON','COMMENT','PHONENO'],
	_keywordSearchControl: 'LSTPOI_KEYWORDSEARCH',
	_searchFieldOptions: {
"ID" : {option: 2,qbf: true,type: 'n',searchField: 'ID'},
"FREQUENCY" : {option: 2,qbf: true,type: 'n',searchField: 'frequency'},
"POINAME" : {option: 2,qbf: true,type: 'c',searchField: 'POINAME'},
"POITYPE" : {option: 2,qbf: true,type: 'n',searchField: 'POITYPE'},
"POISPECIALITY" : {option: 2,qbf: true,type: 'n',searchField: 'POISPECIALITY'},
"POIDISTRICT" : {option: 2,qbf: true,type: 'n',searchField: 'POIDISTRICT'},
"POIREGION" : {option: 2,qbf: true,type: 'n',searchField: 'POIREGION'},
"POTENTIALITY" : {option: 2,qbf: true,type: 'n',searchField: 'POTENTIALITY'},
"LAT" : {option: 2,qbf: true,type: 'c',searchField: 'LAT'},
"LONT" : {option: 2,qbf: true,type: 'c',searchField: 'LONT'},
"BESTTIME" : {option: 2,qbf: true,type: 'c',searchField: 'BESTTIME'},
"[CLASS]" : {option: 2,qbf: true,type: 'n',searchField: 'CLASS'},
"[COMMENT]" : {option: 2,qbf: true,type: 'c',searchField: 'COMMENT'},
"CONTACTPERSON" : {option: 2,qbf: true,type: 'c',searchField: 'CONTACTPERSON'},
"PHONENO" : {option: 2,qbf: true,type: 'c',searchField: 'PHONENO'},
"MOBILE" : {option: 2,qbf: true,type: 'c',searchField: 'MOBILE'},
"EMAIL" : {option: 2,qbf: true,type: 'c',searchField: 'EMAIL'},
"ADDRESS" : {option: 2,qbf: true,type: 'c',searchField: 'ADDRESS'},
"STREET" : {option: 2,qbf: true,type: 'c',searchField: 'STREET'},
"ACCOUNT_TYPE" : {option: 2,qbf: true,type: 'n',searchField: 'account_type'},
"MEDREP_ID" : {option: 2,qbf: true,type: 'n',searchField: 'medrep_id'},
"COMPANY_ID" : {option: 2,qbf: true,type: 'n',searchField: 'company_id'},
"AREAID" : {option: 2,qbf: true,type: 'n',searchField: 'areaid'},
"POIORCUST" : {option: 2,qbf: true,type: 'n',searchField: 'poiorcust'},
"PRICELIST" : {option: 2,qbf: true,type: 'n',searchField: 'pricelist'},
"POICODE" : {option: 2,qbf: true,type: 'c',searchField: 'poicode'},
"POICATEGORY" : {option: 2,qbf: true,type: 'n',searchField: 'POICATEGORY'},
"POISTATUS" : {option: 2,qbf: true,type: 'n',searchField: 'POISTATUS'},
"POICREDITLIMIT" : {option: 2,qbf: true,type: 'n',searchField: 'POICREDITLIMIT'},
"AMOUNTLIMIT" : {option: 2,qbf: true,type: 'n',searchField: 'AMOUNTLIMIT'},
"DAYLIMIT" : {option: 2,qbf: true,type: 'n',searchField: 'DAYLIMIT'},
"PAYMENTMODEID" : {option: 2,qbf: true,type: 'n',searchField: 'PAYMENTMODEID'}
},
	_showSearchDebugInfo: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent'
			},
			onErrorFunction: function(e) { }
		}
	},
	_incrementalRefreshAfterLoad: function() { 	var lObjTop = this;
	var dataIsEmpty = false;
	if(typeof arguments[0] != 'undefined') {
		dataIsEmpty = arguments[0].length == 0;
	}
	var listName = this.listVariableName;
	var that = this;
	var _ok = function() {
		//alert('server is on line - do incremental refresh -- incremental refresh must trigger fetchMediaFiles')
		var options = {
			keepFocusOnCurrentSelection: true,
			setFocusToValue: '',
			refreshDependentLists: true,
			onlyRefreshDependentLists: false,
			mode: 'incremental'
		};
		var lObj = DLG1_DlgObj.getControl(listName);
		DLG1_DlgObj.refreshListData(listName,options);
	}
	var _notOnline = function() {
		DLG1_DlgObj._delayTillPhoneGapReady(lObjTop._fetchMediaFiles,lObjTop);
	}
	DLG1_DlgObj.serverIsAvailable(500,_ok,_notOnline);
	 },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [
{
	field: 'frequency',
	control: 'frequency'
},
{
	field: 'POINAME',
	control: 'POINAME_1'
},
{
	field: 'COMMENT',
	control: 'COMMENT_1'
},
{
	field: 'CONTACTPERSON',
	control: 'CONTACTPERSON'
},
{
	field: 'PHONENO',
	control: 'PHONENO_1'
},
{
	field: 'MOBILE',
	control: 'MOBILE'
},
{
	field: 'EMAIL',
	control: 'EMAIL'
},
{
	field: 'ADDRESS',
	control: 'ADDRESS'
},
{
	field: 'STREET',
	control: 'STREET'
},
{
	field: 'medrep_id',
	control: 'medrep_id'
},
{
	field: 'company_id',
	control: 'company_id'
}],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['ID']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTPOI',
	listVariableNameTrueCase: 'LSTPOI',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: false,
	__flagIncrementalRefreshAfterLoad: true,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){;},
	onUpdateRow: function(index,data){;},
	onBeforeAddRows: function(data,info){;},
	onAddRows: function(data,info){;},
	onBeforeRemoveRows: function(rows){;},
	onRemoveRows: function(rows){;},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTPOI_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTPOI_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTPOI_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTPOI_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTPOI_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTPOI_hasErrorInherited _DLG1_LSTPOI_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTPOI_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTPOI_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTPOI_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTPOI_newRow';
 var _newRowStyle = '_DLG1_LSTPOI_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTPOI_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTPOI_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTPOI_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: [],
	childListEndpoints: ['LSTPOI'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('LSTPOI',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTPOI'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTPOI'];
		var lObj = DLG1_DlgObj.getControl('LSTPOI');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
DLG1_DlgObj._listSystemOnClick('LSTPOI',this.selection[0]);
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'template',
			item: {
				height: '',
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			template: [
			'<div class="[theme:listBox.base.item.parts.contextClassName|Alpha-MagentaListItemLabelContext]" style="float: right;"><span id="DLG1.LSTPOI.ID.I.{*dataRow}">{ID}</span></div>',
			'<div class="[theme:listBox.base.item.parts.mainClassName|Alpha-MagentaListItemLabelMain]"><span id="DLG1.LSTPOI.POINAME.I.{*dataRow}">{POINAME}</span></div>',
			'<div class="[theme:listBox.base.item.parts.subClassName|Alpha-MagentaListItemLabelSub]"><span id="DLG1.LSTPOI.ADDRESS.I.{*dataRow}">{ADDRESS}</span></div>',
			'<div class="[theme:listBox.base.item.parts.contentClassName|Alpha-MagentaListItemContent]">',
			'\t<div class="[theme:listBox.base.item.parts.detailClassName|Alpha-MagentaListItemLabelDetail]" style="float: right;"><span id="DLG1.LSTPOI.PHONENO.I.{*dataRow}">{PHONENO}</span></div>',
			'\t<span id="DLG1.LSTPOI.CONTACTPERSON.I.{*dataRow}">{CONTACTPERSON}</span><br/>',
			'\t',
			'</div>']
		}
	},
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		detailView: {
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {alert("Customer has been added");
},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTPOI',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {},
	_showSQL_CRUD: function(txt) { },
	_globalErrorPlaceHolder: 'LSTPOI_GLOBALERRORS',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTPOI'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTPOI&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'ID': RegExp('' + searchFor,'i'), 'frequency': RegExp('' + searchFor,'i'), 'POINAME': RegExp('' + searchFor,'i'), 'POITYPE': RegExp('' + searchFor,'i'), 'POISPECIALITY': RegExp('' + searchFor,'i'), 'POIDISTRICT': RegExp('' + searchFor,'i'), 'POIREGION': RegExp('' + searchFor,'i'), 'POTENTIALITY': RegExp('' + searchFor,'i'), 'LAT': RegExp('' + searchFor,'i'), 'LONT': RegExp('' + searchFor,'i'), 'BESTTIME': RegExp('' + searchFor,'i'), 'CLASS': RegExp('' + searchFor,'i'), 'COMMENT': RegExp('' + searchFor,'i'), 'CONTACTPERSON': RegExp('' + searchFor,'i'), 'PHONENO': RegExp('' + searchFor,'i'), 'MOBILE': RegExp('' + searchFor,'i'), 'EMAIL': RegExp('' + searchFor,'i'), 'ADDRESS': RegExp('' + searchFor,'i'), 'STREET': RegExp('' + searchFor,'i'), 'account_type': RegExp('' + searchFor,'i'), 'medrep_id': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'areaid': RegExp('' + searchFor,'i'), 'poiorcust': RegExp('' + searchFor,'i'), 'pricelist': RegExp('' + searchFor,'i'), 'poicode': RegExp('' + searchFor,'i'), 'POICATEGORY': RegExp('' + searchFor,'i'), 'POISTATUS': RegExp('' + searchFor,'i'), 'POICREDITLIMIT': RegExp('' + searchFor,'i'), 'AMOUNTLIMIT': RegExp('' + searchFor,'i'), 'DAYLIMIT': RegExp('' + searchFor,'i'), 'PAYMENTMODEID': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTPOI.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTPOI.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTPOI.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTPOI.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTPOI.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTPOI'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTPOI'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTPOI'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTPOI'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTPOI');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '602674a7-5cfe-4186-98c3-4dbecfc3dafe'
};
DLG1_DlgObj._listViewSettings['LSTDEALS'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	_dataSourceType: 'SQL',
	_listFields: [
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'date',
	defaultValue: 'return this._controlDefaultValueForListField(\'date\');'
},
{
	name: 'poiid',
	defaultValue: 'return this._controlDefaultValueForListField(\'poiid\');'
},
{
	name: 'medrepid',
	defaultValue: 'return this._controlDefaultValueForListField(\'medrepid\');'
},
{
	name: 'company_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'company_id\');'
},
{
	name: 'timestampd',
	defaultValue: 'return this._controlDefaultValueForListField(\'timestampd\');'
},
{
	name: 'deal_amount',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_amount\');'
},
{
	name: 'deal_startd',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_startd\');'
},
{
	name: 'deal_roi_date',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_roi_date\');'
},
{
	name: 'deal_type',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_type\');'
},
{
	name: 'deal_item1',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item1\');'
},
{
	name: 'deal_item1q',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item1q\');'
},
{
	name: 'deal_item2',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item2\');'
},
{
	name: 'deal_item2q',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item2q\');'
},
{
	name: 'deal_item3',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item3\');'
},
{
	name: 'deal_item3q',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item3q\');'
},
{
	name: 'deal_item4',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item4\');'
},
{
	name: 'deal_item4q',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_item4q\');'
},
{
	name: 'deal_source_sale',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_source_sale\');'
},
{
	name: 'deal_source_name',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_source_name\');'
},
{
	name: 'deal_phname',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_phname\');'
},
{
	name: 'deal_ph_invno',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_ph_invno\');'
},
{
	name: 'deal_ph_date',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_ph_date\');'
},
{
	name: 'deal_pay_method',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_pay_method\');'
},
{
	name: 'deal_bank',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_bank\');'
},
{
	name: 'deal_bank_acc',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_bank_acc\');'
},
{
	name: 'deal_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_id\');'
},
{
	name: 'deal_coment',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_coment\');'
},
{
	name: 'deal_pay',
	defaultValue: 'return this._controlDefaultValueForListField(\'deal_pay\');'
},
{
	name: 'tmp_poiid',
	defaultValue: 'return this._controlDefaultValueForListField(\'tmp_poiid\');'
},
{
	name: 'tmp_repid',
	defaultValue: 'return this._controlDefaultValueForListField(\'tmp_repid\');'
},
{
	name: 'tmp_visitid',
	defaultValue: 'return this._controlDefaultValueForListField(\'tmp_visitid\');'
}],
	_delayRenderTillRefresh: false,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTDEALS.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTDEALS name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTDEALS');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTDEALS.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent',
				progress: {
				},
				onProgressEvent: ''
			},
			onErrorFunction: function(e) { }
		}
	},
	_indexdb: {
		mediafiles: {
			download: false,
			showProgress: false,
			progress: {
			},
			downloadHasOnProgressEvent: false,
			upload: {
				showProgress: false
			}
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTDEALS',
	listVariableNameTrueCase: 'LSTDEALS',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: true,
	__flagIncrementalRefreshAfterLoad: false,
	__version: 1,
	__persistWhere: 'IndexDB',
	__persistMode: 'full',
	_beforePersistToStorage: function(obj) { 	
	this._executeEvent('onBeforePersistToLocalStorage',obj)
	this.__doPersist = true;
	if(typeof obj.userData == 'undefined') obj.userData = {};
	this.__userData = obj.userData;
	//snapshot the list data in case the persist fails
	this._dataSnapshot = [].concat(this._data);
}
,
	persistToStorage: function(obj) { 	//system generated beforePersistToStorage code here
	var flagSuspendPersist = false;
	if(typeof this.suspendPersist != 'undefined') flagSuspendPersist = this.suspendPersist;
	if(flagSuspendPersist) return true;
	if(typeof obj.submode != 'undefined') {
		if(obj.submode == 'ListViewData') {
			var _wh = DLG1_DlgObj.__persistWhere(this.listVariableName);
			//see comment in a5DialogHelper_ListViewData() line 450
			if(_wh == 'fs') return;
		}
	}
	var result = DLG1_DlgObj.persistListToLocalStorage(this,obj);
	delete this.__userData;
	if(result) {
		delete this._dataSnapshot;
	} else {
		this.populate(this._dataSnapshot,false,false,false);  //need to .populate() without firing events
		delete this._dataSnapshot;
	}
	if(typeof this._pm_persistWhere == 'undefined') this._pm_persistWhere = 'localStorage';
	//the onPersistToLocalStorage event is fired in either the _persistToLocalStorageLow() methdo (for local storage) or _persistListToFile() method
	this._flagPersistDataOK = result;
	if(!result) {
		if(typeof this._tempFlagServerSideSearch != 'undefined') {
			if(this._tempFlagServerSideSearch) {
				this._executeEvent('onSearchResultTooLargeForLocalStorage',obj);
			}
			delete this._tempFlagServerSideSearch;
		}
	}
}
,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;if(!this._isInit && !this._restoringList) this._beforePersistToStorage({mode:'populate', data: data});
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit && !this._restoringList) {this.persistToStorage({mode:'populate', data: data}); }; if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){this._beforePersistToStorage({mode:'update', data: data, index: index});},
	onUpdateRow: function(index,data){this.persistToStorage({mode:'update', data: data, index: index});},
	onBeforeAddRows: function(data,info){this._beforePersistToStorage({mode:'add', data: data});},
	onAddRows: function(data,info){this.persistToStorage({mode:'add', data: data});},
	onBeforeRemoveRows: function(rows){this._beforePersistToStorage({mode:'remove', rows: rows});},
	onRemoveRows: function(rows){this.persistToStorage({mode:'remove', data: rows});},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: false,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTDEALS_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTDEALS_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTDEALS_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTDEALS_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTDEALS_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTDEALS_hasErrorInherited _DLG1_LSTDEALS_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTDEALS_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTDEALS_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTDEALS_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTDEALS_newRow';
 var _newRowStyle = '_DLG1_LSTDEALS_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTDEALS_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTDEALS_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTDEALS_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: [],
	childListEndpoints: ['LSTDEALS'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('LSTDEALS',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTDEALS'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTDEALS'];
		var lObj = DLG1_DlgObj.getControl('LSTDEALS');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
DLG1_DlgObj._listSystemOnClick('LSTDEALS',this.selection[0]);
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'column',
			showColumnTitles: true,
			item: {
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			fixedFooterDefinition: '[]',
			fixedFooterJS: '',
			fixedFooterCSJS: '',
			columns: [
			{
				header: {
					html: 'id'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'id',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.ID.I.{*dataRow}">{id}</span>'
				},
				order: 'id',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'date'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'date',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DATE.I.{*dataRow}">{date}</span>'
				},
				order: 'date',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'poiid'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'poiid',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.POIID.I.{*dataRow}">{poiid}</span>'
				},
				order: 'poiid',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'medrepid'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'medrepid',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.MEDREPID.I.{*dataRow}">{medrepid}</span>'
				},
				order: 'medrepid',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'company id'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'company_id',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.COMPANY_ID.I.{*dataRow}">{company_id}</span>'
				},
				order: 'company_id',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'timestampd'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'timestampd',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.TIMESTAMPD.I.{*dataRow}">{timestampd}</span>'
				},
				order: 'timestampd',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'uuid'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'uuid',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '{uuid}'
				},
				order: 'uuid',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal amount'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_amount',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_AMOUNT.I.{*dataRow}">{deal_amount}</span>'
				},
				order: 'deal_amount',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal startd'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_startd',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_STARTD.I.{*dataRow}">{deal_startd}</span>'
				},
				order: 'deal_startd',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal roi date'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_roi_date',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_ROI_DATE.I.{*dataRow}">{deal_roi_date}</span>'
				},
				order: 'deal_roi_date',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal type'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_type',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_TYPE.I.{*dataRow}">{deal_type}</span>'
				},
				order: 'deal_type',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal item1'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_item1',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_ITEM1.I.{*dataRow}">{deal_item1}</span>'
				},
				order: 'deal_item1',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal item1q'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_item1q',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_ITEM1Q.I.{*dataRow}">{deal_item1q}</span>'
				},
				order: 'deal_item1q',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal item2'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_item2',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_ITEM2.I.{*dataRow}">{deal_item2}</span>'
				},
				order: 'deal_item2',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal item2q'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_item2q',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_ITEM2Q.I.{*dataRow}">{deal_item2q}</span>'
				},
				order: 'deal_item2q',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal item3'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_item3',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_ITEM3.I.{*dataRow}">{deal_item3}</span>'
				},
				order: 'deal_item3',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal item3q'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_item3q',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_ITEM3Q.I.{*dataRow}">{deal_item3q}</span>'
				},
				order: 'deal_item3q',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal item4'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_item4',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_ITEM4.I.{*dataRow}">{deal_item4}</span>'
				},
				order: 'deal_item4',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal item4q'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_item4q',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_ITEM4Q.I.{*dataRow}">{deal_item4q}</span>'
				},
				order: 'deal_item4q',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal source sale'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_source_sale',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_SOURCE_SALE.I.{*dataRow}">{deal_source_sale}</span>'
				},
				order: 'deal_source_sale',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal source name'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_source_name',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_SOURCE_NAME.I.{*dataRow}">{deal_source_name}</span>'
				},
				order: 'deal_source_name',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal phname'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_phname',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_PHNAME.I.{*dataRow}">{deal_phname}</span>'
				},
				order: 'deal_phname',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal ph invno'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_ph_invno',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_PH_INVNO.I.{*dataRow}">{deal_ph_invno}</span>'
				},
				order: 'deal_ph_invno',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal ph date'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_ph_date',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_PH_DATE.I.{*dataRow}">{deal_ph_date}</span>'
				},
				order: 'deal_ph_date',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal pay method'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_pay_method',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_PAY_METHOD.I.{*dataRow}">{deal_pay_method}</span>'
				},
				order: 'deal_pay_method',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal bank'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_bank',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_BANK.I.{*dataRow}">{deal_bank}</span>'
				},
				order: 'deal_bank',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal bank acc'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_bank_acc',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_BANK_ACC.I.{*dataRow}">{deal_bank_acc}</span>'
				},
				order: 'deal_bank_acc',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal id'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_id',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_ID.I.{*dataRow}">{deal_id}</span>'
				},
				order: 'deal_id',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal coment'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_coment',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_COMENT.I.{*dataRow}">{deal_coment}</span>'
				},
				order: 'deal_coment',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'deal pay'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'deal_pay',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.DEAL_PAY.I.{*dataRow}">{deal_pay}</span>'
				},
				order: 'deal_pay',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'tmp poiid'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'tmp_poiid',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.TMP_POIID.I.{*dataRow}">{tmp_poiid}</span>'
				},
				order: 'tmp_poiid',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'tmp repid'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'tmp_repid',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.TMP_REPID.I.{*dataRow}">{tmp_repid}</span>'
				},
				order: 'tmp_repid',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'tmp visitid'
				},
				_name: 'tmp_visitid',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTDEALS.TMP_VISITID.I.{*dataRow}">{tmp_visitid}</span>'
				},
				order: 'tmp_visitid',
				width: 'flex(1)'
			}],
			_hasRCW: false,
			_horizontalScrolling: false,
			_hasColumnSeparators: false
		}
	},
	columnSeparators: function(state) { 				var lyt = this.layouts[this.layout];
				if(lyt.type != 'column') return;
				var c = lyt.columns
				for(var i = 0; i < c.length; i++) {
					if(state == 'off') c[i].separator.location = 'none';
					if(state == 'on') {
						c[i].separator.location = 'right';
					}
				}
				this.refresh();
			}
			,
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: false
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add('DLG1.V.R1.LSTDEALS.CONTROL.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTDEALS',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {},
	_showSQL_CRUD: function(txt) { },
	_globalErrorPlaceHolder: '',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTDEALS'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTDEALS&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'id': RegExp('' + searchFor,'i'), 'date': RegExp('' + searchFor,'i'), 'poiid': RegExp('' + searchFor,'i'), 'medrepid': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'timestampd': RegExp('' + searchFor,'i'), 'deal_amount': RegExp('' + searchFor,'i'), 'deal_startd': RegExp('' + searchFor,'i'), 'deal_roi_date': RegExp('' + searchFor,'i'), 'deal_type': RegExp('' + searchFor,'i'), 'deal_item1': RegExp('' + searchFor,'i'), 'deal_item1q': RegExp('' + searchFor,'i'), 'deal_item2': RegExp('' + searchFor,'i'), 'deal_item2q': RegExp('' + searchFor,'i'), 'deal_item3': RegExp('' + searchFor,'i'), 'deal_item3q': RegExp('' + searchFor,'i'), 'deal_item4': RegExp('' + searchFor,'i'), 'deal_item4q': RegExp('' + searchFor,'i'), 'deal_source_sale': RegExp('' + searchFor,'i'), 'deal_source_name': RegExp('' + searchFor,'i'), 'deal_phname': RegExp('' + searchFor,'i'), 'deal_ph_invno': RegExp('' + searchFor,'i'), 'deal_ph_date': RegExp('' + searchFor,'i'), 'deal_pay_method': RegExp('' + searchFor,'i'), 'deal_bank': RegExp('' + searchFor,'i'), 'deal_bank_acc': RegExp('' + searchFor,'i'), 'deal_id': RegExp('' + searchFor,'i'), 'deal_coment': RegExp('' + searchFor,'i'), 'deal_pay': RegExp('' + searchFor,'i'), 'tmp_poiid': RegExp('' + searchFor,'i'), 'tmp_repid': RegExp('' + searchFor,'i'), 'tmp_visitid': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.LSTDEALS.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTDEALS.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTDEALS.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTDEALS.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTDEALS.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTDEALS'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTDEALS'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTDEALS'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTDEALS'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTDEALS');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: '2382965b-a729-4617-997d-6e3cb09eb99c'
};
DLG1_DlgObj._listViewSettings['LSTGEOLOC'] = {
	__pkisguid: false,
	_switchInfo: {
},
	_setupAlphabetSearch: function() { },
	__parentWindowContainerId: '',
	getMapObject: function() { 	return this.layouts[this.layout].map;
}
,
	__applyIncrementRefreshUpdates: function(listId) { 	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	var lObj = _dlgObj.getControl(listId);
	var countU = 0;
	var countA = 0;
	var newData = lObj.__incrementalRefreshData;
	var getRowState = function (listObj) {
		var d = listObj._data;
		var dObj = {};
		for(var i = 0; i < d.length; i++) {
			dObj[d[i].__primaryKey] = {};
			if(typeof d[i]._isDirty == 'undefined') flag = false
			else flag = d[i]._isDirty;
			dObj[d[i].__primaryKey].dirty = flag;
			//dObj[d[i].__primaryKey].__rowNumber= i;
			//*renderIndex is not unique after a client side filter has been done
			//dObj[d[i].__primaryKey].__rowNumber= d[i]['*renderIndex'];
			dObj[d[i].__primaryKey].__rowNumber= d[i]['*value'];
		}
		return dObj;
	}
	var dObj = getRowState(lObj);
	var _obj = {};
	var __row;
	var flagDirty;
	function pkExists(d,pk) { 
		for(var i = 0; i < d.length; i++) { 
		if(d[i].__primaryKey == pk) return true;
	}
		return false;
	}
	for(var i = 0; i < newData.length; i++) {
		_obj = dObj[newData[i].__primaryKey];
		if(typeof _obj != 'undefined') {
			__row = _obj['__rowNumber'];
			if(typeof __row != 'undefined') {
				flagDirty = _obj['dirty'];
				if(!flagDirty) {
					//clear out all child arrays since the new data has the child arrays in it.
					var currentData = lObj.getData(__row);
					for(var n in currentData) { 
						if(n.indexOf('__LIST__') ==  0) { 
							currentData[n] = [];
						}
					}
					lObj.updateRow(__row,newData[i]);
					countU++;
				} else { 
					//row is dirty
					//lObj.appendRows([ newData[i]]);
					//countA++;
				}
			} else {
				//__row is undefined
				//alert('__row is undefined');
				//lObj.appendRows([ newData[i]]);
				//countA++;
			}
		} else {
			//check to see if the row is already in the list
			if(!pkExists(lObj._data,newData[i].__primaryKey)) {
				lObj.appendRows([ newData[i]]);
				countA++;
			}
		}
	}
	//delete newData; //user might find this helpful. so keep it
	var name = this.listVariableName;
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	//put in timeout to give list time to refresh before the event fires
	if(lObj._hasDetailView) { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'detailView.afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},0);
	} else { 
		setTimeout(function() { 
			_dlgObj._list_executeEvent(name,'afterRefreshListIncremental',{ rowsUpdated: countU, rowsInserted: countA, rowsDeleted: 0, listId: name});
		},100);
	}
}
,
	_flagAutoFetchMore: false,
	firestoreLogin: function(uid,pw) { alert('List is not configured to use Firestore as the data source') } ,
	firestoreLogout: function() { alert('List is not configured to use Firestore as the data source') } ,
	_persistListLayout: false,
	_loadPersistedLayout: false,
	saveLayoutSettings: function() {
		var s = localStorage.listSettings;
		if(typeof s == 'undefined' || s == null) s = {};
		if(typeof s == 'string') {
			try{s = JSON.parse(s);}catch(err) {return false;}
		}
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') sl = {};
		sl.listVariableName = this.listVariableName;
		sl.layouts = this.layouts;
		sl.layout = this.layout;
		s[this._listGUID] = sl ;
		var str = JSON.stringify(s,'','\t')
		localStorage.listSettings = str;
	}
	,
	onLayoutUpdate: function(type,args,layoutName) {if(this.saveLayoutSettings) this.saveLayoutSettings();},
	restoreLayoutSettings: function(dlgObj,mode) { 
		var str = localStorage.listSettings;
		if(typeof str == 'undefined' || str == null) {return false;}
		try{var s = JSON.parse(str);}catch(err) {return false;};
		var sl = s[this._listGUID];
		if(typeof sl == 'undefined') {return false;}
		if(mode == 'delete') {
			delete s[this._listGUID];
			var str = JSON.stringify(s,'','\t')
			localStorage.listSettings = str;
			return;
		}
		if(mode == 'get') {
			return JSON.stringify(sl);
		}
		this.layouts = sl.layouts;
		this.layout = sl.layout;
		var listSelector = 'listSelector_' + sl.listVariableName ;
		var that = this;
		setTimeout(function() {
			dlgObj.setValue(listSelector,that.layout);
			delete that;
		},0);
		this.refresh();
		this._flagRestoringLayoutSettings = true;
	}
,
	_childListsAjax: [],
	_hasDependentLists: false,
	_dataSourceType: 'SQL',
	twoStateImageSet: function(fieldName,state,row) { 
	if(fieldName == '' || typeof fieldName == 'undefined') fieldName = 'OPENCLOSEINDICATOR'
	var fieldName = fieldName.toUpperCase();
	if(typeof row == 'undefined') row = 'all';
	if(typeof state == 'undefined') state = '';
	var lObj = this;
	var d = lObj._data;
	var ele;
	var _s = state;
	if(_s == 'on') _s = 'on';
	if(typeof _s == 'undefined' || _s == 'off') _s = '';
	var ele;
	if(row == 'all') {
		for(var i = 0; i < d.length; i++) {
			ele = $('DLG1.' + 	lObj.listVariableName + '.' +fieldName + '.TWOSTATE.' + i);
			if(state == 'toggle' && ele) {
				_s = $ga(ele,'a5-checked');
				if(_s == 'undefined' || _s == '' || _s == null) _s = 'off';
				if(_s == 'off') _s = 'on';
				else _s = 'off';
			}
			if(ele) $sa(ele,'a5-checked',_s);
		}
	} else {
		ele = $('DLG1.' + 	lObj.listVariableName + '.' +fieldName + '.TWOSTATE.' + row);
		if(_s == 'toggle' && ele) {
				_s = $ga(ele,'a5-checked');
				if(_s == 'undefined' || _s == '' || _s == null) _s = 'off';
				if(_s == 'off') _s = 'on';
				else _s = 'off';
			}
		if(ele) $sa(ele,'a5-checked',_s);
	}
}
,
	_listFields: [
{
	name: 'id',
	defaultValue: 'return this._controlDefaultValueForListField(\'id\');'
},
{
	name: 'company_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'company_id\');'
},
{
	name: 'poi_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'poi_id\');'
},
{
	name: 'lat',
	defaultValue: 'return this._controlDefaultValueForListField(\'lat\');'
},
{
	name: 'lng',
	defaultValue: 'return this._controlDefaultValueForListField(\'lng\');'
},
{
	name: 'usern',
	defaultValue: 'return this._controlDefaultValueForListField(\'usern\');'
},
{
	name: 'user_id',
	defaultValue: 'return this._controlDefaultValueForListField(\'user_id\');'
}],
	_delayRenderTillRefresh: false,
	_searchPartHas: false,
	_mediaFields: [],
	_mediaTypes: {
},
	_mediaFieldReadOnly: [],
	__getImage: function(data,rowIndex,name,style) {
if(name) name = name.toUpperCase();
var id = 'DLG1.LSTGEOLOC.'+name+'.IMG.' + rowIndex;
//console.log('line10: list' + 'LSTGEOLOC name: '  + name + data);
if(data == null) {
	//alert('data is null');
	return ''
}
//console.log('getImage: ' + Date.now());
//if(A5.debug) { 
//	debugger;
//}
if(data.indexOf('INDEXDB_') == -1) {
	if(data.indexOf('http://') > -1 || data.indexOf('https://') > -1 || data.indexOf('data:image') > -1) { 
		found = true;
		var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+data+'" />';
		return html;
	}
}
var lObj = DLG1_DlgObj.getControl('LSTGEOLOC');
var topList = lObj._getTopParentList();
lObj = DLG1_DlgObj.getControl(topList);
var dataCache = lObj._imageCache;
if(typeof dataCache != 'undefined'){ 
	var k = Object.keys(dataCache);
	//console.log(k.length);
}
var url = '';
var found = false;
if(typeof dataCache != 'undefined') { 
	url = dataCache[data];
	if(url) { 
		found = true;
		var prefix = 'data:image/png;base64,';
		url = prefix + url;
	} else { 
		url = '';
	}
}
var html = '<img style="'+style+'" a5-image-loaded="'+found+'" id="'+id+'" src="'+url+'" />';
return html;
},
	__loadImages: function(initial,forceLoad) {
if(typeof forceLoad == 'undefined') forceLoad = false;
var obj = this.indexVisible();
var mediaFields = this._mediaFields;
var id = '';
var ele = '';
var data = [];
for(var i = obj.start; i <=obj.end; i++) { 
	for(var j = 0; j < mediaFields.length; j++) {
		id = 'DLG1.LSTGEOLOC.'+mediaFields[j].toUpperCase()+'.IMG.' + i;
		ele = $(id);
		if(!ele || ele.getAttribute('a5-image-loaded') == 'false' || forceLoad) { 
			data.push([this._rData[i][mediaFields[j]],id ]);
		}
	}
}
if(!this._getTopParentList) return;
var topList = this._getTopParentList();
var lObj = DLG1_DlgObj.getControl(topList);
for(var i = 0; i < data.length; i++){ 
	var itemName = data[i][0];
	var itemId = data[i][1];
	function getGotData(itemName,itemId){ 
		var itemName = itemName;
		var itemId = itemId;
		var gotData = function(data) {
			if(data == null) {
				return;
			}
			//console.log('gotdata: ' +itemName);
			var prefix = 'data:image/png;base64,';
			lObj._imageCache[itemName] = data;
			var ele = $(itemId);
			ele.src = prefix + data;
			//console.log('ele: ' + ele,'Itemid: ' + itemId);
			ele.setAttribute('a5-image-loaded','true');
			//console.log('loaded ' + itemId);	
		}
		return gotData;
	}
	gotData = getGotData(itemName,itemId);
	//console.log(itemName);
	if(itemName != null) { 
		DLG1_DlgObj.idbGetItem(itemName,gotData);
	}
}
},
	_ignoreMediaFieldsInWWWSubFolder: false,
	_mediaFieldFolderInWWW: '',
	_phoneGap: {
		mediaFiles: {
			mediaFileUploadBatchSize: '-1',
			fireMediaFileCleanup: false,
			protectedRead: false,
			template: '',
			target: 'server',
			targetFilenameFunction: 'return \'<DeviceId>_\' +e.object.listFieldName + \'_\' + A5.ts() + \'_\' +e.name',
			showProgress: false,
			download: {
				autodownloadFilesOnPullSynch: false,
				deleteOrphansAfterSync: false,
				targetFolder: '_AAFiles',
				showProgress: false,
				targetFileSystem: 'persistent',
				progress: {
				},
				onProgressEvent: ''
			},
			onErrorFunction: function(e) { }
		}
	},
	_indexdb: {
		mediafiles: {
			download: false,
			showProgress: false,
			progress: {
			},
			downloadHasOnProgressEvent: false,
			upload: {
				showProgress: false
			}
		}
	},
	_incrementalRefreshAfterLoad: function() { },
	_dvmode: 'enter',
	_hasDetailView: true,
	_optimizeSync: false,
	deselectAll: function() { 
	var _dlgObj = window[this._hostComponentId + '_DlgObj'];
	_dlgObj.setValue(this.listVariableName,'',true);
	this._deselectAll();
	if(this.nullOutDetailViewRecord) {
		this.nullOutDetailViewRecord();
		for(var i = 0; i < this.childLists.length; i++) {
			var lname = this.childLists[i];
			var lobjC = DLG1_DlgObj.getControl(lname);
			lobjC.nullOutDetailViewRecord();
		}
		if(this._noRecordInListIsSelectedSettingForDetailView ==  'disabledetailview') {
			this.disableDetailView()
			for(var i = 0; i < this.childLists.length; i++) {
				var lname = this.childLists[i];
				var lobjC = DLG1_DlgObj.getControl(lname);
				lobjC.disableDetailView();
			}
		}
	}
}
,
	showHideColumn: function(columnNumber,flagShow,layoutName,flagSetShowState) { 	if(typeof flagSetShowState == 'undefined') flagSetShowState  = false; //set when this function called from listColumnSelector()
	if(typeof layoutName == 'undefined') layoutName = this.layout;
	if(this.layouts[layoutName].columns[columnNumber].show != flagShow) {
		this.layouts[layoutName].columns[columnNumber].show = flagShow;
		if(flagSetShowState) this.layouts[layoutName].columns[columnNumber]._showState = flagShow;
		this.refresh();
	}
}
,
	showAllColumns: function() { 
	var l = this.layouts
	var c = '';
	var flagRefresh = false;
	for(var n in l) {
		c = l[n].columns;
		if(typeof c != 'undefined') {
			for(var i = 0; i < c.length; i++) {
				if(!c[i].initialStateHidden) {
					var flag = true
					if(typeof c[i]._showState != 'undefined') {
						if(!c[i]._showState) flag = false;
					}
					if(flag && !c[i].show) {
						c[i].show = true;
						flagRefresh = true;
					}
				}
			}
		}
	}
	if(flagRefresh) {
		this.refresh();
	}
}
,
	_hideColumns: function() { 
}
,
	_noRecordInListIsSelectedSettingForDetailView: 'none',
	_captureLocation: false,
	_detailViewHas: true,
	_submitLocationInfo: false,
	_detailView: {
		fieldMap: [],
		method: 'fieldMap',
		jsonformstoWatch: ''
	},
	_detailViewGlobalErrorStyle: 'font-family: Arial; font-size: 10pt; color: red; border: solid 1px red; width: 100%;',
	_autoCommitDetailView: true,
	_synchBatchSize: 0,
	_resetMediaFileUploadErrorsFlag: function(data) {
var r = A5.u.object.each(data,function(name,value,path,result){
	if(name == '_flagMediaFileUploadError') {
		result.push({value: false, path: path})
	}
});
for(var i = 0; i < r.length; i++) {
	A5.u.object.set(data,r[i].path,r[i].value);
}
},
	theme: 'Alpha-Magenta',
	scroll: {
		axis: 'both',
		indicator: {
			show: true,
			h: {
				show: true,
				location: 'top',
				offset: '0px',
				left: '0px',
				right: '0px'
			},
			v: {
				show: true,
				location: 'right',
				offset: '0px',
				top: '0px',
				bottom: '0px'
			}
		},
		momentum: {
			allow: true,
			friction: 4,
			duration: 1000
		},
		pull: {
			y: 'auto',
			x: 'auto'
		}
	},
	layout: 'Default',
	calculateValue: function(data) {  {var _val = '' +(function(data) {if(typeof data.__primaryKey != 'undefined') {return data.__primaryKey;} else { 
try{var _pkArr = [];
_pkArr.push('' + data['id']);
			var pk = _pkArr.join('|||');
			return pk;
		} catch(err) { return undefined }
}})(data); if((_val == '' ||  _val == 'undefined'  )&& typeof data['*rowGUID'] != 'undefined') _val = '_temporaryValue_' + data['*rowGUID']; return _val;}},
	dirtyControlClassName: '',
	listVariableName: 'LSTGEOLOC',
	listVariableNameTrueCase: 'lstgeoloc',
	_hostComponentId: 'DLG1',
	_includeCRC: true,
	parentList: '',
	allParentLists: [],
	_inplaceEditing: {
		allow: false
	},
	__hasEmbeddedDetailView: false,
	onBeforeListClear: function() {},
	__flagPersist: true,
	__flagIncrementalRefreshAfterLoad: false,
	__version: 1,
	__persistWhere: 'IndexDB',
	__persistMode: 'full',
	_beforePersistToStorage: function(obj) { 	
	this._executeEvent('onBeforePersistToLocalStorage',obj)
	this.__doPersist = true;
	if(typeof obj.userData == 'undefined') obj.userData = {};
	this.__userData = obj.userData;
	//snapshot the list data in case the persist fails
	this._dataSnapshot = [].concat(this._data);
}
,
	persistToStorage: function(obj) { 	//system generated beforePersistToStorage code here
	var flagSuspendPersist = false;
	if(typeof this.suspendPersist != 'undefined') flagSuspendPersist = this.suspendPersist;
	if(flagSuspendPersist) return true;
	if(typeof obj.submode != 'undefined') {
		if(obj.submode == 'ListViewData') {
			var _wh = DLG1_DlgObj.__persistWhere(this.listVariableName);
			//see comment in a5DialogHelper_ListViewData() line 450
			if(_wh == 'fs') return;
		}
	}
	var result = DLG1_DlgObj.persistListToLocalStorage(this,obj);
	delete this.__userData;
	if(result) {
		delete this._dataSnapshot;
	} else {
		this.populate(this._dataSnapshot,false,false,false);  //need to .populate() without firing events
		delete this._dataSnapshot;
	}
	if(typeof this._pm_persistWhere == 'undefined') this._pm_persistWhere = 'localStorage';
	//the onPersistToLocalStorage event is fired in either the _persistToLocalStorageLow() methdo (for local storage) or _persistListToFile() method
	this._flagPersistDataOK = result;
	if(!result) {
		if(typeof this._tempFlagServerSideSearch != 'undefined') {
			if(this._tempFlagServerSideSearch) {
				this._executeEvent('onSearchResultTooLargeForLocalStorage',obj);
			}
			delete this._tempFlagServerSideSearch;
		}
	}
}
,
	onBeforePopulate: function(data) {this.__onPopulateHasFired = false;if(!this._isInit && !this._restoringList) this._beforePersistToStorage({mode:'populate', data: data});
},
	onPopulate: function(data) {
	var ls = DLG1_DlgObj._localStorageSettings;
	if(typeof ls == 'object') {
		var lsr = ls.restore;
		if(typeof lsr != 'undefined') {
			if(!lsr.data) {
				//since ux does not restore from storage (which would have fired _fetchMediaFiles(), we fire it here
				var lObj = this;
				//sr 2-28-19 turned off because was casing the _fetchMediaFiles to get executed twice.
				//should be no need to do this because the UX issues a _fetchMediaFiles call when the UX is rendered and when a List is refreshed.
				//DLG1_DlgObj._delayTillPhoneGapReady(lObj._fetchMediaFiles,lObj);
			}
		}
	}
if(!this._isInit && !this._restoringList) {this.persistToStorage({mode:'populate', data: data}); }; if(!this._isInit) {if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'fullRefresh' });
}
};},
	onBeforeUpdateRow: function(index,data){this._beforePersistToStorage({mode:'update', data: data, index: index});},
	onUpdateRow: function(index,data){this.persistToStorage({mode:'update', data: data, index: index});},
	onBeforeAddRows: function(data,info){this._beforePersistToStorage({mode:'add', data: data});},
	onAddRows: function(data,info){this.persistToStorage({mode:'add', data: data});},
	onBeforeRemoveRows: function(rows){this._beforePersistToStorage({mode:'remove', rows: rows});},
	onRemoveRows: function(rows){this.persistToStorage({mode:'remove', data: rows});},
	onResize: function(){var l = this.layout;
if(this.layouts[l].type == 'column') {
	var flagRefresh = false; //prevent multiple refreshes from being done
	if(this.layouts[l]._hasRCW) {
		var w = $(this.contId).offsetWidth;
		if(typeof this._w == 'undefined') {
			flagRefresh = true;
			this._w = w;
		} else {
			if(this._w != w) flagRefresh = true;
			this._w = w;
		}
		var _c = this.layouts[l].columns;
		for(var i = 0; i < _c.length; i++) {
			if(_c[i].rcw) {
				if(_c[i].rcw != '' && Number(_c[i].rcw) > 0) {
					if(typeof _c[i]._show == 'undefined') _c[i]._show = _c[i].show;
					if(_c[i]._show == _c[i].show) {
						if(Number(_c[i].rcw) >= w) {
							_c[i].show = false;
						} else {
							_c[i].show = true;
						}
						_c[i]._show = _c[i].show;
					}
				}
			}
		}
		var that = this;
		setTimeout(function() {
			if(flagRefresh) that.refresh();
			console.log('refresh');
		},0);
	}
}
;},
	synchronizeImmediately: true,
	pushServerEditsToClient: false,
	customization: {
		dv: {
			clientSideErrorWarning: 'Cannot save because there are validation errors.',
			dirtyDetailViewRecord: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'You must first save or undo the changes you have made to the List\'s Detail View.'
			},
			confirmFormResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to the List\'s Detail View?'
			},
			confirmRowResetWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to undo changes made to this record?'
			},
			confirmDeleteWarning: {
				title: 'Warning',
				icon: 'svgIcon=#alpha-icon-questionCircle:icon',
				message: 'Are you sure you want to delete this record?'
			},
			writeConflict: {
				useMineMessage: 'Use mine (\'{myvalue}\')',
				useTheirsMessage: 'Use theirs (\'{theirvalue}\')',
				useMineAll: 'Use mine for all fields',
				useTheirsAll: 'Use theirs for all fields'
			},
			databaseError: {
				update: 'Record was not updated.|More...|Less',
				insert: 'Record was not inserted.|More...|Less',
				delete: 'Record was not deleted.|More...|Less'
			},
			useCustomClasses: false,
			customClasses: '',
			setClassonEditedRows: true,
			css: {
				dirtyRecord: '',
				newRecord: '',
				serverSideError: '',
				deletedRecord: '',
				dirtyRecordRow: '',
				newRecordRow: '',
				serverSideErrorRow: '',
				deletedRecordRow: '',
				hasUnSyncedMediaFiles: ''
			}
		}
	},
	onItemDraw: function(ele,data,index) {
 var _dirtyRowClassName = '_DLG1_LSTGEOLOC_dirtyRow';
 var _dirtyRowClassNameInherited = '_DLG1_LSTGEOLOC_dirtyRowInherited';
 var _dirtyRowStyle = '_DLG1_LSTGEOLOC_dirtyRowStyle';
 var _hasUnsyncedMediaFilesClassName = '_DLG1_LSTGEOLOC_hasUnsyncedMediaFiles';
 var _errorRowClassName = '_DLG1_LSTGEOLOC_hasError';
 var _errorRowClassNameInherited = '_DLG1_LSTGEOLOC_hasErrorInherited _DLG1_LSTGEOLOC_dirtyRowInherited';
 var _errorRowClassNameInherited_1 = '_DLG1_LSTGEOLOC_hasErrorInherited';
 var _errorRowClassNameInherited_2 = '_DLG1_LSTGEOLOC_dirtyRowInherited';
 var _errorRowStyle = '_DLG1_LSTGEOLOC_hasErrorStyle';
 var _newRowClassName = '_DLG1_LSTGEOLOC_newRow';
 var _newRowStyle = '_DLG1_LSTGEOLOC_newRowStyle';
 var _deletedRowClassName = '_DLG1_LSTGEOLOC_deletedRow';
 var _deletedRowStyle = '_DLG1_LSTGEOLOC_deletedRowStyle';
 var _deletedRowClassNameInherited = '_DLG1_LSTGEOLOC_deletedRowInherited';
 var __d = this._rData[index];
 $rcn(ele,_dirtyRowClassName);
 $rcn(ele,_dirtyRowClassNameInherited);
 $rcn(ele,_dirtyRowStyle);
 $rcn(ele,_errorRowClassName);
 $rcn(ele,_errorRowClassNameInherited);
 $rcn(ele,_errorRowClassNameInherited_1);
 $rcn(ele,_errorRowClassNameInherited_2);
 $rcn(ele,_errorRowStyle);
 $rcn(ele,_newRowClassName);
 $rcn(ele,_newRowStyle);
 $rcn(ele,_deletedRowClassName);
 $rcn(ele,_deletedRowStyle);
 $rcn(ele,_hasUnsyncedMediaFilesClassName);
 if(data._isDirty && typeof data._isDeleted != 'undefined' && data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 } else if ( (data._isDirty && typeof data._oldData != 'undefined' && !data._isNewRow) ) {
  $acn(ele,_dirtyRowClassName);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRow';
 }
 if(data._isDirty && typeof data._oldData == 'undefined' && ! (data._isNewRow || data._isDeleted) ) {
  $acn(ele,_dirtyRowClassNameInherited);
  $acn(ele,_dirtyRowStyle);
  __d.__displayStyle = 'dirtyRowInherited';
 }
 if(data._isDeleted) {
  $acn(ele,_deletedRowClassName);
  $acn(ele,_deletedRowStyle);
  __d.__displayStyle = 'deletedRow';
 }
 if(data._isNewRow) {
  $acn(ele,_newRowClassName);
  $acn(ele,_newRowStyle);
  __d.__displayStyle = 'newRow';
 }
 var flagHasGlobalErrors = false;
 if(typeof data._globalErrors != 'undefined') {
  if( data._globalErrors != '')  flagHasGlobalErrors = true;
 }
 var flagHasWriteConflictErrors = false;
 if(typeof data._hasWriteConflictErrors) flagHasWriteConflictErrors = data._hasWriteConflictErrors
 if(data._hasServerSideError || flagHasGlobalErrors || flagHasWriteConflictErrors) {
  $acn(ele,_errorRowClassName);
  $acn(ele,_errorRowStyle);
  __d.__displayStyle = 'errorRow';
 } else {
  if(data._flagServerSideErrorInChild || data._flagWriteConflictErrorInChild || data._flagGlobalErrorInChild ){
    if(!data._isNewRow) {
     $acn(ele,_errorRowClassNameInherited);
     __d.__displayStyle = 'errorRowInherited';
   } else {
    __d.__displayStyle = 'newRow errorRowInherited';
    $acn(ele, _errorRowClassNameInherited_1);
   }
  }
 }
  if (data._hasUnsyncedMediaFiles && data._isDirty  ) {
  $acn(ele,_hasUnsyncedMediaFilesClassName);
 }},
	childLists: [],
	childListEndpoints: ['LSTGEOLOC'],
	_populateAllChildLists: function() { },
	onSelect: function() { this.populateUXControls();
this._selectedRow = this.selection[0];
DLG1_DlgObj._listRowSelect('lstgeoloc',this);
 this._selectedRow = this.selection[0];if(typeof this._selectedRow != 'undefined') { var that = this; setTimeout(function() { if(typeof DLG1_DlgObj.__listsWithChildLWL != 'undefined') { 
	if(typeof DLG1_DlgObj.__listsWithChildLWL['LSTGEOLOC'] != 'undefined') {
		var obj = DLG1_DlgObj.__listsWithChildLWL['LSTGEOLOC'];
		var lObj = DLG1_DlgObj.getControl('LSTGEOLOC');
		var r = lObj.selection[0];
		var _d = lObj._data[r];
		var linkValue = _d[obj.listPrimaryKey];
		var id = obj.lwlName;
		var linkField = obj.listPrimaryKey
		DLG1_DlgObj.refreshLinkedSpreadsheet(id,linkValue,linkField)
	}
}
},50);};
;},
	onBeforeSelect: function() {
 var c = this.childLists;
 var lObj = '';
 if(typeof c != 'undefined') {
  for(var i = 0; i < c.length; i++) {
   lObj = DLG1_DlgObj.getControl(c[i]);
   if(lObj) {
    var flag = lObj.onBeforeSelect();
    if(typeof flag != 'undefined') {
     if(!flag) return false;
    }
   }
  }
 }
 if(this._dvmode == 'search') return true;
 if(!this._autoCommitDetailView) {
  return this._showDirtyDetailViewWarning();
 } else {
  if(this.detailViewIsDirty && this.detailViewIsDirty(true)) {
   var result =  this.updateListFromUXControls();
   return result;
  }
 }},
	onClick: function() {
DLG1_DlgObj._listSystemOnClick('LSTGEOLOC',this.selection[0]);
},
	onFirestoreAuthStatechanged: function(e) {if(e.isLoggedIn) { 
	var lObj = this.dialogObject.getControl(this.listName)
	lObj.onFirestoreLogin(e)
}
},
	group: {
		continued: {
			wrap: false
		}
	},
	layouts: {
		Default: {
			group: {
				auto: false
			},
			type: 'column',
			showColumnTitles: true,
			item: {
				className: '',
				hoverClassName: '',
				selectedClassName: '',
				style: '',
				titleClassName: '',
				separatorClassName: ''
			},
			fixedFooterDefinition: '[]',
			fixedFooterJS: '',
			fixedFooterCSJS: '',
			columns: [
			{
				header: {
					html: 'Id',
					style: 'text-align: right;'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'id',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTGEOLOC.ID.I.{*dataRow}">{id}</span>',
					style: 'text-align: right; padding-right:10px;'
				},
				order: 'id',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'Company id',
					style: 'text-align: right;'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'company_id',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTGEOLOC.COMPANY_ID.I.{*dataRow}">{company_id}</span>',
					style: 'text-align: right; padding-right:10px;'
				},
				order: 'company_id',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'Poi id',
					style: 'text-align: right;'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'poi_id',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTGEOLOC.POI_ID.I.{*dataRow}">{poi_id}</span>',
					style: 'text-align: right; padding-right:10px;'
				},
				order: 'poi_id',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'Lat'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'lat',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTGEOLOC.LAT.I.{*dataRow}">{lat}</span>'
				},
				order: 'lat',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'Lng'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'lng',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTGEOLOC.LNG.I.{*dataRow}">{lng}</span>'
				},
				order: 'lng',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'Usern'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'usern',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTGEOLOC.USERN.I.{*dataRow}">{usern}</span>'
				},
				order: 'usern',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'User id',
					style: 'text-align: right;'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'user_id',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '<span id="DLG1.LSTGEOLOC.USER_ID.I.{*dataRow}">{user_id}</span>',
					style: 'text-align: right; padding-right:10px;'
				},
				order: 'user_id',
				width: 'flex(1)'
			},
			{
				header: {
					html: 'Timestampd'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: 'timestampd',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '{timestampd}'
				},
				order: 'timestampd',
				width: 'flex(1)'
			},
			{
				header: {
					html: '#'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: '<LogicalRowNumber>',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '{*dataRowOneBased}'
				},
				order: false,
				width: 'flex(1)'
			},
			{
				header: {
					html: '#'
				},
				separator: {
					location: 'none',
					style: 'background-color: gray;',
					width: '1px'
				},
				_name: '<ZeroBasedRowNumber>',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '{*dataRow}'
				},
				order: false,
				width: 'flex(1)'
			},
			{
				header: {
					html: '#'
				},
				_name: '<RowKeyNumber>',
				_type: '',
				resize: false,
				rcw: 0,
				data: {
					template: '{*key}'
				},
				order: false,
				width: 'flex(1)'
			}],
			_hasRCW: false,
			_horizontalScrolling: false,
			_hasColumnSeparators: false
		}
	},
	columnSeparators: function(state) { 				var lyt = this.layouts[this.layout];
				if(lyt.type != 'column') return;
				var c = lyt.columns
				for(var i = 0; i < c.length; i++) {
					if(state == 'off') c[i].separator.location = 'none';
					if(state == 'on') {
						c[i].separator.location = 'right';
					}
				}
				this.refresh();
			}
			,
	__checkedImage: 'svgIcon=#alpha-icon-checkCircle:icon,24',
	__uncheckedImage: 'svgIcon=#alpha-icon-circle:icon,24',
	onListDraw: function(data,startIndex) {if(this.__loadImages) this.__loadImages(true);
if(A5.flags.isMobile)  {
	$e.add(this.contId+'.CONTENT','abstractdown',function(e) {
		var ele = e.target;
		var tag = '';
		if(ele && typeof ele.tagName == 'string') tag = ele.tagName.toLowerCase();
		if(tag != 'input' && tag != 'textarea') $e.preventDefault(e);
	});
}
this._hasrun = true;
 this._allrowschecked = true;
var d = this._rData;
for(var i = 0; i < d.length; i++) {
	if(!d[i].__selected) {
		this._allrowschecked = false;
		break;
	}
}
if (d.length == 0) this._allrowschecked = false;
var h ;
if(this._allrowschecked) {
	h = A5.u.icon.html(this.__checkedImage);
} else {
	h = A5.u.icon.html(this.__uncheckedImage);
}
var _id = 'DLG1.' + this.listVariableName + '.CHECKBOXALL';
var ele = $(_id)
ele.innerHTML = h
},
	captureFocus: true,
	content: {
		header: {
			show: false
		},
		footer: {
			show: true,
			html: '<div style="text-align: center;"><button class="[class.dialogButton]" style="cursor: pointer;" a5-item="__fetchMore">More records...</button></div>'
		}
	},
	systemEvents: {
		onBeforeDestroy: function(e) {},
		onTap: function(e) {},
		afterAjaxCallback: function(e) {},
		afterClientSideFilter: function(e) {},
		beforeServerSideSort: function(e) {},
		afterServerSideSort: function(e) {},
		onSwipe: function(e) {},
		onScroll: function(e) {},
		onPullRelease: function(e) {},
		onPull: function(e) {},
		onPullEnd: function(e) {},
		afterSearchComplete: function(e) {},
		beforeSearch: function(e) {},
		onSearchResultTooLarge: function(e) {},
		onSearchResultTooLargeForLocalStorage: function(e) {},
		onBeforePersistToLocalStorage: function(e) {},
		onPersistToLocalStorage: function(e) {},
		onRestoreFromLocalStorage: function(e) {},
		onListReady: function(e) {setTimeout(function() { DLG1_DlgObj._restoreVariablesFromLocalStorage()},100);
},
		afterRenderComplete: function(e) {},
		beforeFetchMore: function(e) {},
		afterFetchMore: function(e) {},
		beforePageNavigate: function(e) {},
		afterPageNavigate: function(e) {},
		beforeRefreshRow: function(e) {},
		afterRefreshRow: function(e) {},
		afterRefreshData: function(e) {},
		afterServerSideSummaryCompute: function(summary) {},
		afterRefreshListIncremental: function(e) {},
		onNamedQuerySelect: function(e) {},
		onFirestoreLoaded: function(e) {},
		onFirestoreAuthStateChanged: function(e) {},
		onFirestoreLogin: function(e) {},
		onFirestoreLogout: function(e) {},
		_afterRefreshData: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshRow: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		_afterRefreshListIncremental: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
		detailView: {
			_afterSynchronizeListCompleted: function(e) { var flagGetBase64Data = false;
try{
	flagGetBase64Data = this._indexdb.mediafiles.download;
}catch(e) { }
if(flagGetBase64Data) { 
	//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
	var flagRefreshMode = true;
	this._getBase64Data(flagRefreshMode)
}
/*
var flagDeleteOrphans = false;
try{
	var lTemp = lObj._getTopParentListObject();
	flagDeleteOrphans = lTemp._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
}catch(e) { }
//alert('flagDeleteOrphans:' + flagDeleteOrphans)
if(flagDeleteOrphans) lObj._deleteOrphanIndexDBImages();
*/
},
			canUpdateList: function(e) {},
			hasClientSideValidationErrors: function(e) {},
			afterUpdateList: function(e) {},
			canSynchronizeList: function(e) {},
			afterSynchronizeListBatch: function(e) {},
			canCancelBatch: function(e) {},
			afterCancelBatch: function(e) {},
			afterSynchronizeList: function(e) {},
			afterSynchronizeListCompleted: function(e) {},
			beforeSynchronizeListBatchStart: function(e) {},
			afterSynchronizeListBatchEnd: function(e) {},
			afterRefreshListIncremental: function(e) {},
			canResetRow: function(e) {},
			canDeleteRow: function(e) {},
			canUndoEdits: function(e) {},
			afterResetRow: function(e) {},
			afterDeleteRow: function(e) {},
			afterUndoEdits: function(e) {},
			canNewRecord: function(e) {},
			afterNewRecord: function(e) {},
			beforeDetailViewPopulate: function(e) {},
			afterDetailViewPopulate: function(e) {},
			afterDetailViewSave: function(e) {},
			afterListRowSelectCancelled: function(e) {},
			modeChanged: function(e) {},
			onStateChanged: function(e) {},
			beforeMediaFilesUploaded: function(e) {},
			afterMediaFilesUploaded: function(e) {},
			onMediaFilesUploadErrors: function(e) {},
			onNoMediaFilesToFetch: function(e) {},
			beforeMediaFilesDownloaded: function(e) {},
			afterMediaFilesDownloaded: function(e) {},
			beforeDeleteOrphanMediaFiles: function(e) {},
			afterDeleteOrphanMediaFiles: function(e) {},
			listReadyToPersist: function(e) {},
			beforeCRUDExecute: function(e) {},
			_afterRefreshListIncremental: function() { 
if (typeof window['cordova'] == 'undefined') {
	DLG1_DlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: 'incrementalRefresh' });
}
}
		},
		_afterRenderComplete: function(e) {
var flagGetBase64Data = false;
	try{
		flagGetBase64Data = this._indexdb.mediafiles.download;
	}catch(e) { }
	if(flagGetBase64Data) { 
		//alert('get base64 data - after render complete') -- don't show alert - it breaks stuff;
		this._getBase64Data()
	}
$e.add(this.contId + '.CONTENTWRAPPER','scroll',function(evnt,lObj) {
		lObj.__loadImages();
		},this
	);},
		_afterAjaxCallback: function() {this._refreshStateMessages();}
	},
	onBeforeDestroy: function() {if(this._transient) { 
	this._transient.destroy()
	delete this._transient;
}
},
	_clientsideSummary: [],
	computeClientSideSummaryValues: function(e) {},
	_executeEvent: function(event,obj) { 
	return DLG1_DlgObj._list_executeEvent('LSTGEOLOC',event,obj);
}
,
	_selectAll: function() {
	var v = this._values;
	var v2 = [].concat(v);
	this.setValue(v2,false);
}
,
	searchList: function() { 
	if(this._searchPartStyle == 'querybyform') {
		if(this._dvmode != 'search') return false;
	}
	if(typeof this.detailViewIsDirty == 'function') {
		if(this.detailViewIsDirty()) {
				if(this._autoCommitDetailView) {
					//this.updateListFromUXControls(); ?why was this on? it saves the qbf def as a new record
				}
		}
	}
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		var flagCS = false;
		if(typeof this.detailViewIsDirty == 'function') {
			if(this.listIsDirty() || this.detailViewIsDirty()) flagCS = true;
		} else {
			if(this.listIsDirty()) flagCS = true;
		}
		if(flagCS) mode = 'clientside';
		else {
			if(this._dataSourceType.toLowerCase() == 'sql' || this._dataSourceType.toLowerCase() == 'dbf' || this._dataSourceType.toLowerCase() == 'firestore' || this._dataSourceType.toLowerCase() == 'mongodb' ) {
				mode = 'serverside';
			} else {
				mode = 'clientside';
			}
		}
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'search', searchWhere: mode, listIsDirty: flagDirty});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._searchListServerSide(obj);
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilter();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'search', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_searchListServerSide: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var _d={};
	var flagDirty = false;
	if(this.listIsDirty) flagDirty = this.listIsDirty();
	if(flagDirty) {
		alert('Can\'t execute server-side search because List has edits that have not yet been synchronized.');
		return false;
	}
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	_data = _data + '&' + A5.ajax.buildURLParam('__searchOptions',JSON.stringify(obj));
	this.filter = false;
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPart','',_data);
}
,
	setListSize: function(height,width) {
	var l = $(this.contId);
	if(typeof height != 'undefined') l.style.height = ''+ height;
	if(typeof width != 'undefined') l.style.width = '' + width;
	this.resize();
}
,
	clearSearchList: function() { 
	var obj = typeof arguments[0] != 'undefined' ? arguments[0] : {};
	var mode = 'serverSide';
	if(typeof obj.searchMode != 'undefined') mode = obj.searchMode;
	mode = mode.toLowerCase();
	if(mode.indexOf('auto') == 0) {
		if(this.listIsDirty()) mode = 'clientside';
		else mode = 'serverside';
	}
	if(this._dataSourceType.toLowerCase() == 'static') mode = 'clientside';
	var parentList = this.parentList;
	if(typeof parentList != 'undefined') {
		if(parentList != '') mode = 'clientside';
	}
	var flagResult = DLG1_DlgObj._list_executeEvent(this.listVariableName,'beforeSearch',{searchMode: 'clear', searchWhere: mode});
	if(!flagResult) return false;
	if(mode == 'serverside') {
		this._clearSearchListServerSide();
	} else if(mode == 'clientside') {
		this._searchPartSubmit_clientSideFilterClear();
		var rowCount = this._rData.length;
		DLG1_DlgObj._list_executeEvent(this.listVariableName,'afterSearchComplete',{searchMode: 'clear', searchWhere: mode, recordsInQuery: rowCount});
	}
}
,
	_clearSearchListServerSide: function() { 
	var _d={};
	_d.listId = this.listVariableName
	var _data = A5.ajax.buildURLParam('__searchInfo',JSON.stringify(_d));
	DLG1_DlgObj.ajaxCallback('','','system:ListSearchPartClear','',_data);
}
,
	_str: function(txt) {
	txt = txt.replace("'","\\'");
	txt = '\'' + txt + '\'';
	return txt;
}
,
	_QBF: function(txt) { 
	var o = {};
	o.v2 = '';
	o.v1 = txt;
	o.flag = false;
	if(txt.indexOf('>=') >= 0) {
		o.op = '>=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('<=') >= 0 ) {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if (txt.indexOf('>') >= 0 ) {
		o.op = '>';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('<') >= 0)  {
		o.op = '<';
		o.v1 = txt.substr(1);
		o.flag = true;
	} else if (txt.indexOf('..') == 0)  {
		o.op = '<=';
		o.v1 = txt.substr(2);
		o.flag = true;
	} else if ( txt.indexOf('..', txt.length - '..'.length) !== -1 ) {
		//ends with ..
		o.op = '>=';
		txt = txt.split('..')
		o.v1 = txt[0];
		o.flag = true;
	} else if (txt.indexOf('..') > 0 ) {
		o.op = 'between'
		txt = txt.split('..');
		o.v1 = txt[0];
		o.v2 = txt[1];
		o.flag = true;
	}
	return o;
}
,
	_match: function(data,field,val,obj) { 
	if(obj.qbf && obj.type == 'c') val = $u.s.rTrim(val,',');
	var flagKeyword = false;
	if(typeof obj.flagKeyword != 'undefined') flagKeyword = obj.flagKeyword;
	if(flagKeyword) {
		var _field = field
		//if(_field.indexOf('.') > -1) _field = _field.split('.')[1]
		_field = _field.toUpperCase()
		var obj_i = this._searchFieldOptions[_field];
		this._setSearchOps(obj,obj_i);
		field = obj_i.searchField
		console.log(field)
	}
	var _d = '';
	var _v = val;
	var flagC = false;
	if(obj.type == 'c') {
		flagC = true;
		if(!obj.caseSensitive) _v = _v.toLowerCase();
	} else {
		//non mumeric searches are only mode 1 or -1
		if(obj.mode > 1) obj.mode = 1;
		if(obj.mode < -1) obj.mode = -1;
	}
	var flag = false;
	obj.usesQBFOperator = false;
	if(obj.qbf) {
		_v = _v.split(',');
	} else {
		_v = [_v];
	}
	var o = {}
	var r = '';
	var _vals = [];
	for(var i = 0; i < _v.length; i++) {
		if(obj.qbf) {
			o = this._QBF(_v[i]);
		} else {
			o.flag = false;
			o.v1 = _v[i];
			o.v2 = '';
		}
		if(typeof data[field] != 'undefined') {
			if(data[field] != null) {
				_d = '' + data[field];
				if(obj.type == 'n') {
					o.v1 = Number(o.v1);
					o.v2 = Number(o.v2);
					_d = Number(_d);
				} else if (obj.type == 'l') {
					o.v1 = $u.s.toBool(o.v1);
					o.v2 = $u.s.toBool(o.v2);
					_d = $u.s.toBool(_d);
				} else if (obj.type == 'd') {
					o.v1 = A5.stringToDate(o.v1,obj.dateFormat);
					o.v2 = A5.stringToDate(o.v2,obj.dateFormat);
					if(typeof _d == 'string') _d = A5.stringToDate(_d,obj.dateFormat);
					if(o.v1 != '' && o.v1 != null ) o.v1 = o.v1.getTime();
					if(o.v2 != '' && o.v2 != null ) o.v2 = o.v2.getTime();
					if(_d != '' && _d != null ) _d = _d.getTime();
				}
				if(flagC) {if(!obj.caseSensitive && typeof _d == 'string') _d = _d.toLowerCase();}
				if(o.flag) {
					//has qbf operators
					if(o.op == 'between') {
						if(flagC) {
							if(_d.substr(0,o.v1.length) >= o.v1 && _d.substr(0,o.v2.length) <= o.v2 ) flag = true;
						} else {
							if(_d >= o.v1 && _d <= o.v2 && (typeof _d == typeof o.v1)  ) flag = true;
						}
					} else {
						if(flagC) _d = _d.substr(0,o.v1.length)
						if(o.op == '>=') if( _d >= o.v1) flag = true;
						if(o.op == '<=') if( _d <= o.v1) flag = true;
						if(o.op == '>') if(_d > o.v1) flag = true;
						if(o.op == '<') if(_d < o.v1) flag = true;
					}
				} else {
					if(obj.mode == 1 || obj.mode == -1 ) {
						if(obj.mode == 1) if(_d == o.v1) flag = true;; //match
						if(obj.mode == -1) if(!(_d == o.v1)) flag = true;; //match
					} else if (obj.mode == 2 || obj.mode == -2) {
						if(obj.mode == 2) if(_d.indexOf(o.v1) > -1) flag = true; //contains
						if(obj.mode == -2) if(!(_d.indexOf(o.v1) > -1)) flag = true;
					} else if (obj.mode == 3 || obj.mode == -3) {
						if(obj.mode == 3) if(_d.indexOf(o.v1) == 0) flag = true; //starts with
						if(obj.mode == -3) if(!(_d.indexOf(o.v1) == 0)) flag = true; //starts with
					}
				}
				if(o.v1 != '') {
					if(_vals.indexOf(o.v1) == -1) {
						_vals.push(o.v1);
					}
				}
				if(o.v2 != '') {
					if(_vals.indexOf(o.v2) == -1) {
						_vals.push(o.v2);
					}
				}
			}
		}
	}
	if(flag) {
		if(typeof this._state.highlight == 'undefined') this._state.highlight = {};
		this._state.highlight[field.toUpperCase()] = _vals;
	} else {
		//this._state.highlight[field.toUpperCase()] = [];
	}
	return flag;
}
,
	_setSearchOps: function(obj,obj_i) { 
	obj.mode = obj_i.option;
	obj.qbf = obj_i.qbf;
	obj.type = obj_i.type;
	//obj.treatAs = obj_i.treatAs;
}
,
	_searchPartOperator: '&&',
	_searchPartSubmit_clientSideFilter: function() { 
	if(!this._searchPartHas) return true;
	//_searchPartStyle: 'individualcontrols'
	this._state.highlight = {};
	if(this._searchPartStyle == 'singlekeywordcontrol') {
		var searchFor = DLG1_DlgObj.getValue(this._keywordSearchControl);
		var arr = this._keywordSearchFields;
		var expn = [];
		var expn_i = '';
		var obj = {};
		//obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 1;
		obj.flagKeyword = true;
		var objStr = JSON.stringify(obj)
		for(var i = 0; i < arr.length; i++) {
			expn_i = 'this._match(data,' +this._str(arr[i]) + ',' + this._str(searchFor) + ','+objStr+')';
			expn.push(expn_i);
		}
		expn = expn.join('||');
		//alert(expn);
	} else if ( this._searchPartStyle == 'individualcontrols' || this._searchPartStyle == 'querybyform'  ) {
		var map = this._searchPart.fieldMap;
		var val = '';
		var expn = [];
		var expn_i = '';
		var obj = {};
		obj.caseSensitive = false;
		//obj.qbf = true;
		//obj.mode = 2;
		//var objStr = JSON.stringify(obj)
		var ac = [];
		var aco = {};
		var _highlight = {};
		if(this._searchPartStyle == 'individualcontrols') {
			for(var i = 0; i < map.length; i++) {
				val = DLG1_DlgObj.getValue(map[i].control);
				if(val != '') {
					obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
					this._setSearchOps(obj,obj_i);
					expn_i = 'this._match(data,' +this._str(map[i].field) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
					expn.push(expn_i);
				}
			}
		} else if (this._searchPartStyle == 'querybyform' ) {
			var controlName = '';
			for(var i = 0; i < this._listFields.length; i++) {
				controlName = this._getUXDetailViewControlName(this._listFields[i].name);
				if(controlName != '') {
					val = DLG1_DlgObj.getValue(controlName);
					if(val != '') {
						//obj_i = this._searchFieldOptions[map[i].field.toUpperCase()];
						obj_i = this._searchFieldOptions[this._listFields[i].name.toUpperCase()];
						this._setSearchOps(obj,obj_i);
						expn_i = 'this._match(data,' +this._str(this._listFields[i].name) + ',' + this._str(val) + ','+JSON.stringify(obj)+')';
						expn.push(expn_i);
						aco.control = controlName;
						aco.value = val;
						ac.push(aco);
					}
				}
			}
			this.__queryByFormValues = ac;
			DLG1_DlgObj._setDVClean(this);
		}
		var operator = '&&';
		if(typeof this._searchPartOperator != 'undefined') operator = this._searchPartOperator;
		expn = expn.join(' '+operator+' ');
	}
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = expn;
	}
	//user did not fill in any search fields
	if(expn == '') return true;
	var fnTxt = 'if(' + expn + ') {return true;} else { return false;}'
	var searchFunction = new Function('data',fnTxt);
	this.setFilter(searchFunction);
	if(this._rData.length > 0) this.setValue(0);
}
,
	_searchPartSubmit_clientSideFilterClear: function() { 
if(!this._searchPartHas) return true;
	this._state.highlight = {};
	this.setFilter(false);
	var map = this._searchPart.fieldMap;
	var val = '';
	var od = DLG1_DlgObj.originalValues[0];
	for(var i = 0; i < map.length; i++) {
		var val = od[map[i].control.toUpperCase()];
		//selwyn 8/6/20 -- used to be false, but then the floating label is not resotred to its initial position when the form is cleared
		if(typeof val != 'undefined') DLG1_DlgObj.setValue(map[i].control,val,false);
	}
	this.setFilter(false);
	delete this.__queryByFormValues;
	DLG1_DlgObj._setDVClean(this);
	if(this._data.length > 0) this.setValue(0);
	if (this._showSearchDebugInfo) {
		var ele = $('DLG1.V.R1.' + this._searchDebugPH);
		if(ele) ele.innerHTML = '';
	}
}
,
	_debugListData: function() { 		var debugObj = this._data[this.selection[0]];
		if(typeof debugObj == 'undefined') {alert('no active row'); return false;}
			var debugTxt = JSON.stringify(debugObj,'','\t');
		debugTxt = debugTxt.split('\t').join('    ');
		var ele = $('DLG1.V.R1.');
		if(ele) {
			ele.innerHTML = '<div style="color: blue;width: 100%; height: 100%;white-space: pre;border: solid 1px blue; padding: 2px;"></div>';
			ele.firstChild.innerText = debugTxt;
			if(ele.firstChild.innerHTML == '')  { ele.firstChild.innerHTML = debugTxt }
		}
},
	_refreshDebugInfo: function() {},
	_showSQL_CRUD: function(txt) { },
	_globalErrorPlaceHolder: '',
	flagShowAlerts: true,
	lookupValue: function(key,name,keyValue) {
	var _d = this._data;
	var indx = A5FindPropInArray(_d,key,keyValue);
	var rv = '';
	if(indx >=0) {
		if(name == '__rowData__') return _d[indx];
		rv =  _d[indx][name];
	} else {
		//null out all properties in row
		var _d2 = {};
		if(typeof _d[0] == 'undefined') { return {}} ;
		for(var n in _d[0]) {
			_d2[n] = '&nbsp;';
		}
		rv = _d2;
	}
	return rv;
}
,
	allowNullSelection: true,
	allowTextSelection: false,
	allowAnyValue: false,
	allowNullDeselection: false,
	loopNavigate: false,
	loopNavigateNullSelection: false,
	refreshChildLists: function() {DLG1_DlgObj._listRefreshCascadingLists('LSTGEOLOC'); },
	rowExpander: function(rowNumber) { 
	var mode = typeof arguments[2] != 'undefined' ? arguments[2] : 'toggle';
	if(typeof rowNumber === 'undefined' || rowNumber === '' ) {
		rowNumber = this.selection[0];
		if(typeof rowNumber == 'undefined') return false;
	}
	var animObj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
	var ele = $(this._hostComponentId + '.' + this.listVariableName + '.ROWEXPANDER.' + rowNumber);
	if(ele) {
		if(mode == 'toggle') A5.u.element.toggle(ele,animObj);
		if(mode == 'show') A5.u.element.show(ele,animObj);
		if(mode == 'hide') A5.u.element.hide(ele,animObj);
	}
}
,
	afterClientSideSummaryCompute: function(csSummary) { },
	selectCurrentLayout: function(name) {
if(this._flagRestoringLayoutSettings) {
	this._flagRestoringLayoutSettings = false;
	return;
}
var pl = this.layouts[name];
if(typeof pl == 'undefined') return false;
this.setLayout(name);
if(pl.type == 'column') {
	this.columnLayout.header.show = this.layouts[name].showColumnTitles;
	this.refresh();
}
var flagPersist = this._persistListLayout;
if(flagPersist && this.saveLayoutSettings ) this.saveLayoutSettings()
},
	onFilter: function() { 	var e = {};
	e.rowCount = this._values.length;
	var ele = $('DLG1.__listId__.RECORDCOUNT');
	if(ele) {ele.innerHTML = e.rowCount;};
	if(this.persistToStorage) { this.persistToStorage({});}
	(function(e) {   })(e);
}
,
	serverSideSort: function(column,initialDirection) {
var e = {};
this.setOrder(false);
e.column = column;
var result = this.systemEvents.beforeServerSideSort(e);
if(result == false) return false;
var obj = {};
obj.cmd = 'sort';
obj.column = column;
obj.layoutName = this.layout;
obj.listState = this._state;
obj.initialDirection = initialDirection;
var data = '_listId=LSTGEOLOC&' + A5.ajax.buildURLParam('_cmdObj',$u.o.toJSON(obj));
DLG1_DlgObj.ajaxCallback('','','system:listServerSideSort','',data);
},
	filterListClientSide: function(searchFor) {
searchFor =  searchFor.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, "\\$&");
//var result = this.systemEvents.beforeClientSideFilter();
//if(result == false) return false;
if(searchFor != '') {
	//fixes bug in Chrome when searching on dates strings that use forward slashes
	searchFor = searchFor.replace(/\//g,'\\/');
	this.setFilter({'id': RegExp('' + searchFor,'i'), 'company_id': RegExp('' + searchFor,'i'), 'poi_id': RegExp('' + searchFor,'i'), 'lat': RegExp('' + searchFor,'i'), 'lng': RegExp('' + searchFor,'i'), 'usern': RegExp('' + searchFor,'i'), 'user_id': RegExp('' + searchFor,'i')});
} else this.setFilter(false);
var rowCount = this._values.length;
//var e = {};
//e.rowCount = rowCount;
//this.systemEvents.afterClientSideFilter(e);
var ele = $('DLG1.lstgeoloc.RECORDCOUNT');
if(ele) ele.innerHTML = rowCount;
if(this._showHideFetchMoreSpinner) this._showHideFetchMoreSpinner();
}
,
	scrollToClosestValue: function(val) { 
	if(typeof val != 'string') val = val.join('');
	var flagCI = typeof arguments[1] != 'undefined' ? arguments[1] : false;
	var pos = typeof arguments[2] != 'undefined' ? arguments[2] : 'top';
	var anim = typeof arguments[3] != 'undefined' ? arguments[3] : {}
	var _d = this._rData;
	var len = val.length;
	var _d2;
	var i2 = -1;
	if(flagCI) val = val.toLowerCase();
	for(var i = 0 ; i < _d.length; i++) {
		i2 = i;
		_d2 = String(_d[i]['*value']);
		_d2 = _d2.substr(0,len);
		_d2 = $u.s.pad(_d2,len,' ','l');
		if(flagCI) _d2 = _d2.toLowerCase();
		if(val <= _d2){
			 break;
		}
	}
	if(i2 > -1) {
		this.scrollToItem(i2,{mode: pos, animation: anim});
	}
}
,
	_setPageSize: function(pageSize) {
	this._state.pageSize = pageSize;
	var options = {
		keepFocusOnCurrentSelection: true,
		preserveCurrentFilterOrder: true,
	};
	DLG1_DlgObj._refreshListData(this.listVariableName,options);
}
,
	_refreshStateMessages: function() {
	if(DLG1_DlgObj._listStateChange) DLG1_DlgObj._listStateChange(this.listVariableName);
	var ele = '';
	ele = $('DLG1.LSTGEOLOC.PAGENUMBER');
	if(ele) ele.innerHTML = this._state.page;
	ele = $('DLG1.LSTGEOLOC.PAGECOUNT');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTGEOLOC.PAGECOUNT.PAGESELECTOR');
	if(ele) ele.innerHTML = this._state.pageCount;
	ele = $('DLG1.LSTGEOLOC.LISTSTATE');
	if(ele) {
		var listState = $u.o.toJSON(this._state);
		ele.innerHTML = listState;
	}
	if(this._hasNavigationBar) {
		var nObj = this._listNavigator;
		if(!nObj) {
			this._listNavigator = DLG1_DlgObj._navigationBar(this._navBarId);
		}
		if(nObj) {
			var obj = nObj.data;
			obj.settings = this._navigationBar;
			obj.pageNumber = this._state.page;
			obj.totalPages = this._state.pageCount;
			obj.totalRecords = this._state.recordCount;
			obj.listName = this.listVariableName;
			nObj.populate(obj);
			this.refresh();
			this.resize(); //needed if the list has a fixed size and the style is gr*
		}
	}
	//navigation buttons
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_NEXT.LSTGEOLOC'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_LAST.LSTGEOLOC'];
	if(ele) {
		if(this._state.page == this._state.pageCount || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_FIRST.LSTGEOLOC'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = DLG1_DlgObj._buttons['BUTTON_LISTNAV_PREV.LSTGEOLOC'];
	if(ele) {
		if(this._state.page == 1 || this._state.pageCount == 0 ) ele.setDisabled(true);
		else ele.setDisabled(false);
	}
	ele = $('DLG1.V.R1.A5SYSTEM_LIST_PAGESELECTOR_LSTGEOLOC');
	if(ele) {
		var data = this._recordNavigatorLinks;
		if(data) {
			A5.form.populateSelect(ele,'' + this._state.page,data,true);
			//alert('page: ' + this._state.page);
			//ele.value = this._state.page;
		}
	}
}
,
	header: {
		html: ''
	},
	__flagHasFixedColumnFooters: false,
	_getRoute: function() { 
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == '*key') {
		//leave as *key
	} else {
		if(mode != 'rowNumber') {
			var _d = this.getData(this.selection[0]);
			if(typeof _d.__primaryKey == 'undefined') {
				mode = 'rowNumber';
			}
		}
	}
	var endPoint = typeof arguments[2] != 'undefined' ? arguments[2]: '';
	if(endPoint != '') {
		//if you have sibling children _getRoute() is returning wrong route -- it is including the siblings in the route.
		//route should only include parents
		//by passing in the listName to the function we get the route from the top parent to the 'endPoint' list (ignoring siblings)
		var _dlgObj = window[this._hostComponentId + '_DlgObj'];
		var ra2 = [];
		var lObj = _dlgObj.getControl(endPoint);
		var parentList = lObj.parentList;
		while(typeof parentList != 'undefined' && parentList != '') {
			var l2 = _dlgObj.getControl(parentList);
			var row = '';
			if(mode == 'rowNumber') {
				row = l2.selection[0]
			} else {row = l2.getData(l2.selection[0])['*key'] }
			ra2.push({list: parentList.toUpperCase(), row: row});
			parentList = l2.parentList;
		}
		return ra2.reverse();
	}
	if(mode == 'rowNumber' || mode == '*key') {
		obj.push({list: this.listVariableName.toUpperCase(), row: this.getData(this.selection[0])['*key'], mode: mode});
	} else {
		var _d = this.getData(this.selection[0]);
		var _pk = _d.__primaryKey;
		if(typeof _d.__primaryKey == 'undefined') {
			_pk = _d['*rowGUID'];
		}
		obj.push({list: this.listVariableName.toUpperCase(), row: _pk, mode: mode});
	}
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_getRouteOLD: function() { 
	var obj  = typeof arguments[1] != 'undefined' ? arguments[1] : [];
	var mode = typeof arguments[0] != 'undefined' ? arguments[0] : 'rowNumber'; //
	if(typeof this.selection == 'undefined') return false;
	if(typeof this.selection[0] == 'undefined') return false;
	if(typeof this.getData(this.selection[0]) == 'undefined') return false;
	if(mode == 'rowNumber') obj.push({list: this.listVariableName, row: this.getData(this.selection[0])['*key']});
	else obj.push({list: this.listVariableName, row: this.getData(this.selection[0]).__primaryKey});
	for(var i = 0; i < this.childLists.length; i++) {
		var lname = this.childLists[i];
		var lObj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
		if(lObj) lObj._getRoute(mode,obj);
	}
	return obj;
}
,
	_setRoute: function(route) { 
if(this.multiple ) return;
	if(typeof route == 'undefined') {
		route = this.__currentRoute;
		if(typeof route == 'undefined') return false;
	}
	var mode = typeof arguments[1] != 'undefined' ? arguments[1] : 'rowNumber'; //
	if(mode == 'primaryKey') {
		if(typeof this._data != 'undefined') {
			var _d = this._data;
			if(typeof _d[0] != 'undefined') {
				if(typeof _d[0].__primaryKey == 'undefined') {
					mode = 'rowNumber';
				}
			}
		}
	}
	var lObj = '';
	var row = '';
	var _pk = '';
	for(var i = 0; i < route.length; i++) {
		lObj = window[this._hostComponentId + '_DlgObj'].getControl(route[i].list);
		row = route[i].row;
		if(typeof route[i].mode != 'undefined') {
			mode = route[i].mode
		}
		if(mode == 'primaryKey') _pk = row;
		/*
		if(mode != 'rowNumber') {
			var _d = lObj._rData;
			var _i2 = -1;
			for(var j = 0; j < _d.length; j++) {
				if(_d[j].__primaryKey == row) {
					_i2 = j;
					break;
				}
			}
			row = _i2
		}
		*/
		var flag = typeof this._restoringList != 'undefined' ? !this._restoringList : true;
		if(mode == 'rowNumber') {
			if(typeof row != 'undefined') {
				var rowFixed = '';
				if(typeof lObj._dataMap == 'undefined') return false;
				if(mode != 'rowNumber')  {
					rowFixed = row;
					} else {
				rowFixed = lObj._dataMap.indexOf(route[i].row);
				}
				lObj.setValue(rowFixed,flag);
				if(this._clearServerSideErrors) this._clearServerSideErrors();
				if(this._showServerSideErrors) this._showServerSideErrors();
				if(this._showWriteConflictErrors) this._showWriteConflictErrors();
			}
		} else {
			lObj.setValue(''+_pk,flag);
			if(this._clearServerSideErrors) this._clearServerSideErrors();
			if(this._showServerSideErrors) this._showServerSideErrors();
			if(this._showWriteConflictErrors) this._showWriteConflictErrors();
		}
	}
}
,
	_useServerSideSyncLog: false,
	items: {
'__fetchMore' : {
	"selectable": false,
	"onClick": function(index,v,args) { 					var data = this._data[this._dataMap[index]];
					(function(rowNumber,value,ia,data,lObj,listObj) { DLG1_DlgObj._listMethod('LSTGEOLOC',{cmd: 'fetchMore'}); }(index,v,args,data,this,this))
				}
}
},
	_searchHighlighting: false,
	view: {
		navigation: {
			next: {
				className: 'listNavButtonNext'
			},
			prev: {
				className: 'listNavButtonPrev'
			}
		}
	},
	_incrementalRefreshTimestampField: '',
	_hasNavigationBar: false,
	_listGUID: 'd774a31f-0cb8-44aa-939e-6606234688a0'
};
DLG1_DlgObj._listViewData['LIST2'] = []; 
DLG1_DlgObj._listViewData['LSTROUTES'] = []; 
DLG1_DlgObj._listViewData['LSTOFFROUTE'] = []; 
DLG1_DlgObj._listViewData['LSTVISITHEAD'] = []; 
DLG1_DlgObj._listViewData['LSTDISCUSSED'] = []; 
DLG1_DlgObj._listViewData['LSTSAMPLES'] = []; 
DLG1_DlgObj._listViewData['LSTORDERS'] = []; 
DLG1_DlgObj._listViewData['LSTINVOICES'] = []; 
DLG1_DlgObj._listViewData['LSTRECEIPT'] = []; 
DLG1_DlgObj._listViewData['LSTUNPAIDINV'] = []; 
DLG1_DlgObj._listViewData['LSTVISITNOTES'] = []; 
DLG1_DlgObj._listViewData['LSTMEDIALFILES'] = []; 
DLG1_DlgObj._listViewData['LSTBASKETH'] = []; 
DLG1_DlgObj._listViewData['LSTBASKETDET'] = []; 
DLG1_DlgObj._listViewData['LSTITEMS'] = A5DataArrayToObject(['custid','product_code','id','va','itemgroup','description','price','discusedtype','discusedcoment','qty','bonus','bonusitem','discount','type','subgroup','wh1q','wh2q','wh3q','wh4q','returnable','returnitem','qtypack','moq','qteinpack','bonusinpack','sellunit','bonusunit'],[]); 
DLG1_DlgObj._listViewData['LSTVACATION'] = []; 
DLG1_DlgObj._listViewData['LSTPOI'] = []; 
DLG1_DlgObj._listViewData['LSTDEALS'] = []; 
DLG1_DlgObj._listViewData['LSTGEOLOC'] = A5DataArrayToObject(['id','company_id','poi_id','lat','lng','usern','user_id','__primaryKey','__a5crc'],[]);
;
DLG1_DlgObj.setStateInfo({ 	"__dialogGuid": "", 	"argumentsBoundToCotrols": "", 	"__sgr": "", 	"__dtfmt": "", 	"__tfmt": "" });;DLG1_DlgObj.setStateInfo({ 	"__dialogGuid": "243b85e3-f1be-453b-82ef-bc82c8108ab6", 	"argumentsBoundToCotrols": "MMEDREPID|Numeric={textbox3}\r\nPOIDID|Numeric={poiid}\r\nMPOIID|Numeric={poiid}\r\nMDATE|Date={Date}\r\nLOADTYPE|Numeric={TmpType}\r\nMCOMPID|Numeric={COMPANYID}\r\nSYNCINPROGRESS|Numeric={syncinprogress}\r\nMREPID|Numeric={textbox3}\r\nMTDATE|Date={DISPLAYDATE}\r\nSHOWALLDAYINPLAN|Numeric={viewalldaysinplan}\r\nMREPID_1|Numeric={repid_1}\r\nMMEDREPNAME|Character={medrepname}\r\nMREGIONDESC|Character={Region1}\r\nMCOMPNAME|Character={CompanyName}\r\nMHIDEBONUS|Numeric={hidebonus}\r\n", 	"__sgr": "", 	"__dtfmt": "dd/MM/yyyy 0h:0m", 	"__tfmt": "" });//ssi13;
DLG1_DlgObj._dataBoundCustomControlSettings['BASKETNUM'] = {
	inputId: 'BASKETNUM',
	theme: 'Alpha-Magenta',
	multiple: false,
	separator: '\\n',
	loopNavigate: false,
	loopNavigateNullSelection: true,
	allowNullSelecttion: true,
	allowNullDeselection: true,
	allowAnyValue: true,
	autoRefresh: true,
	scroll: false,
	layout: 'default',
	layouts: {
		default: {
			type: 'template',
			template: '<div>\r\n<button class="[theme:button.base.className]" a5-item="op" a5-value="-10">-10</button>\r\n<button class="[theme:button.base.className]" a5-item="op" a5-value="-1">-1</button>\r\n<div class="[theme:button.base.className]" style="padding 4px; width: 50px; display: inline-block; text-align: center; border: solid 1px;">{[temp].value}&nbsp;</div>\r\n<button class="[theme:button.base.className]" a5-item="op" a5-value="+1">+1</button>\r\n<button class="[theme:button.base.className]" a5-item="op" a5-value="+10">+10</button>\r\n</div>'
		}
	},
	items: {
		op: {
			selectable: false,
			selectedClassName: '',
			itemname: 'op',
			onClick: function(v,ia,i,ele) {	
	var maxValue = 100;
	var minValue = 0;
	var val = this.value[0] || 0;
	val = eval(val + v);
	if(val > maxValue) val = maxValue;
	if(val < minValue) val = minValue;
	this.value = [''+val] ;
	this.refresh(false);
	this.setValue(''+val);
}
		}
	}
}
DLG1_DlgObj._dataBoundCustomControlData['BASKETNUM'] = {}
DLG1_DlgObj._controls['BASKETNUM'] =  { type: 'dataBoundCustomControl',  data: DLG1_DlgObj._dataBoundCustomControlData['BASKETNUM'],  onInitialize: function() { if(this._onInitialize) {this._onInitialize();} },  settings: DLG1_DlgObj._dataBoundCustomControlSettings['BASKETNUM'] }
DLG1_DlgObj._inkSettings = {};
DLG1_DlgObj._inkSettings['SIGNATURECAPTURE1'] = {
	theme: 'Alpha-Magenta',
	autoCommit: false,
	layout: 'editor',
	previewSize: 512,
	split: {
		layout: 'v-view-editor',
		size: '300px'
	},
	page: {
		width: 5,
		height: 3,
		unit: 'in',
		dpu: 300,
		background: {
		}
	},
	view: {
		detached: {
		},
		scale: {
			fit: 'both',
			margin: 10,
			lock: true
		},
		overlay: {
			show: true,
			html: '<div style="position: absolute; bottom: -1px; right: 0px; left: 0px; text-align: center;">\r\n\t<div class="inkPopup" style="display: inline-block; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;">\r\n\t\t<div a5-item="sign" class="inkPopupButton" style="display: inline-block;">Sign</div>\r\n\t</div>\r\n</div>\r\n'
		},
		zoomBox: {
			className: 'null',
			navigateClassName: 'null',
			scale: {
				allow: false
			}
		}
	},
	editor: {
		scale: {
			fit: 'both',
			margin: 10,
			lock: false
		},
		page: {
			className: 'inkSigActivePage',
			offset: 0
		},
		overlay: {
			show: true,
			html: '<div style="position: absolute; bottom: -1px; right: 0px; left: 0px; text-align: center;">\r\n\t<div class="inkPopup" style="display: inline-block; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;">\r\n\t\t<div a5-item="clear" class="inkPopupButton" style="display: inline-block;">Clear</div>\r\n\t\t<div a5-item="cancel" class="inkPopupButton" style="display: inline-block;">Cancel</div>\r\n\t\t<div a5-item="accept" class="inkPopupButton" style="display: inline-block;">Accept</div>\r\n\t</div>\r\n</div>\r\n\r\n<div a5-item="hidePenPicker" id="{id}.PENPICKER" class="inkPopupLock" style="display: none; position: absolute; top: 0px; left: 0px; right: 0px; bottom: 0px;">\r\n\t<div class="inkPopup" style="position: absolute; white-space: nowrap; stroke: #000;">\r\n\t\t<div class="inkPopupGroup">\r\n\t\t\t<div a5-item="setPen:#000;3" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: #000; stroke-width: 3; stroke-linecap: round;"/></svg></div>\r\n\t\t\t<div a5-item="setPen:#F00;3" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: #F00; stroke-width: 3; stroke-linecap: round;"/></svg></div>\r\n\t\t\t<div a5-item="setPen:#00F;3" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: #00F; stroke-width: 3; stroke-linecap: round;"/></svg></div>\r\n\t\t\t<div a5-item="setPen:rgb(255,230,15);3" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: rgb(255,230,15); stroke-width: 3; stroke-linecap: round;"/></svg></div><br />\r\n\t\t\t\r\n\t\t\t<div a5-item="setPen:#000;6" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: #000; stroke-width: 6; stroke-linecap: round;"/></svg></div>\r\n\t\t\t<div a5-item="setPen:#F00;6" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: #F00; stroke-width: 6; stroke-linecap: round;"/></svg></div>\r\n\t\t\t<div a5-item="setPen:#00F;6" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: #00F; stroke-width: 6; stroke-linecap: round;"/></svg></div>\r\n\t\t\t<div a5-item="setPen:rgb(255,230,15);6" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: rgb(255,230,15); stroke-width: 6; stroke-linecap: round;"/></svg></div><br />\r\n\t\t\t\r\n\t\t\t<div a5-item="setPen:#000;9" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: #000; stroke-width: 9; stroke-linecap: round;"/></svg></div>\r\n\t\t\t<div a5-item="setPen:#F00;9" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: #F00; stroke-width: 9; stroke-linecap: round;"/></svg></div>\r\n\t\t\t<div a5-item="setPen:#00F;9" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: #00F; stroke-width: 9; stroke-linecap: round;"/></svg></div>\r\n\t\t\t<div a5-item="setPen:rgb(255,230,15);9" class="inkPopupSwatch"><svg width="38" height="38"><path d="m 6,19 c 13,-13 13,13 26,0" style="fill: none; stroke: rgb(255,230,15); stroke-width: 9; stroke-linecap: round;"/></svg></div><br />\r\n\t\t\t\r\n\t\t\t<div a5-item="setPen:rgba(0,0,0,.5);30;square" class="inkPopupSwatch"><svg width="38" height="38"><defs><clipPath id="A5InkStrokePreviewClip38"><circle cx="19" cy="19" r="16" /></clipPath></defs><line x1="19" y1="19" x2="19" y2="19" style="fill: none; stroke: rgba(0,0,0,.5); stroke-width: 30; stroke-linecap: round;" clip-path="url(#A5InkStrokePreviewClip38)" /><g style="opacity: .5;"></g></svg></div>\r\n\t\t\t<div a5-item="setPen:rgba(255,0,0,.5);30;square" class="inkPopupSwatch"><svg width="38" height="38"><defs><clipPath id="A5InkStrokePreviewClip38"><circle cx="19" cy="19" r="16" /></clipPath></defs><line x1="19" y1="19" x2="19" y2="19" style="fill: none; stroke: rgba(255,0,0,.5); stroke-width: 30; stroke-linecap: round;" clip-path="url(#A5InkStrokePreviewClip38)" /><g style="opacity: .5;"></g></svg></div>\r\n\t\t\t<div a5-item="setPen:rgba(0,0,255,.5);30;square" class="inkPopupSwatch"><svg width="38" height="38"><defs><clipPath id="A5InkStrokePreviewClip38"><circle cx="19" cy="19" r="16" /></clipPath></defs><line x1="19" y1="19" x2="19" y2="19" style="fill: none; stroke: rgba(0,0,255,.5); stroke-width: 30; stroke-linecap: round;" clip-path="url(#A5InkStrokePreviewClip38)" /><g style="opacity: .5;"></g></svg></div>\r\n\t\t\t<div a5-item="setPen:rgba(255,230,15,.5);30;square" class="inkPopupSwatch"><svg width="38" height="38"><defs><clipPath id="A5InkStrokePreviewClip38"><circle cx="19" cy="19" r="16" /></clipPath></defs><line x1="19" y1="19" x2="19" y2="19" style="fill: none; stroke: rgba(255,230,15,.5); stroke-width: 30; stroke-linecap: round;" clip-path="url(#A5InkStrokePreviewClip38)" /><g style="opacity: .5;"></g></svg></div>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n'
		}
	},
	items: {clear: {onClick: function(ele,part,data){
this.clear()
}},cancel: {onClick: function(ele,part,data){
if(this.oldValue){
	this.setValue(this.oldValue);
} else{
	this.clear();
}
this.layout = 'view';
this.refresh();
}},accept: {onClick: function(ele,part,data){
this.commit();
this.layout = 'view';
this.refresh();
}},sign: {onClick: function(ele,part,data){
this.oldValue = this.value;
this.clear();
this.layout = 'editor';
this.refresh();
}},setPen: {onClick: function(ele,part,data){
var d = arguments[1].split(';');
var p = {color: d[0], width: Number(d[1])};
if(d.length > 2) p.lineCap = d[2];
this.setPen(p);
$(this.contId+'.PENPICKER').style.display = 'none';
}}},
	tools: {
		pen: {
			smooth: 2,
			base: {
				color: '#000',
				width: 3,
				lineCap: 'round'
			},
			preview: {
				size: 38,
				width: {
					show: 'never'
				},
				clip: {
					shape: 'circle'
				}
			},
			memory: {
				load: 'current',
				clear: 'current'
			}
		},
		eraser: {
			size: 50
		}
	},
	status: {
		messages: {
			'tool:pen': '',
			'tool:eraser': 'Eraser',
			'tool:pan': 'Drag to pan',
			'item:naviagte': 'Drag to pan',
			'item:naviagte:new-line': 'Drag to move between lines'
		}
	},
	onChange: function(){
if(arguments[0].type == 'setValue') { 
	if(this.data.pts.length  == 0) { 
		this.layout = 'editor';
	} else { 
		this.layout = 'view';
	}
	this.refresh();
}
}
}
DLG1_DlgObj._controls['SIGNATURECAPTURE1'] = { type: 'ink',   settings:  DLG1_DlgObj._inkSettings['SIGNATURECAPTURE1']    }
DLG1_DlgObj._controlBars = {}; 
DLG1_DlgObj._controlBars['CONTROLBAR_28'] = {
	"settings": {
    "_name": "CONTROLBAR_28",
    "className": "DLG1_CONTROLBAR_28",
    "disclosuresClassName": "DLG1_CONTROLBAR_28",
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) { 
	txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) { 
	txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') { 
	if(txt == '__zero') { txt = '0'}
	else if(txt == false) txt = '';
	else if(txt == 0) txt = '0';
	else txt = '';
}
return txt
},
    "theme": "Alpha-Magenta",
    "edge": "top",
    "items": {
        "mainmenu": {
            "type": "disclosure-button",
            "disclosure": {
                "name": "Disclosure2",
                "type": "flyout-element",
                "size": "none",
                "animation": {
                    "duration": 200,
                    "tween": "ease-in-out"
                },
                "autoHide": true
            },
            "autoHideDisclosure": "always",
            "settings": {
                "show": {
                    "theme": "Alpha-Magenta",
                    "layout": "icon",
                    "html": "Button",
                    "icon": "svgIcon=#alpha-icon-bars:icon,24{ stroke: #fffefe;}"
                },
                "hide": {
                    "theme": "Alpha-Magenta",
                    "layout": "icon",
                    "html": "Button",
                    "icon": "svgIcon=#alpha-icon-bars:icon,24{ stroke: #fffefe;}"
                }
            }
        },
        "Plan": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Plan_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Plan"
            }
        },
        "Out Of Plan": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Out Of Plan_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Out Of Plan"
            }
        },
        "Log Out": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Log Out_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Log Out"
            }
        },
        "Syncronize": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Syncronize_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Syncronize"
            }
        },
        "Invoice List": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Invoice List_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Invoice List"
            }
        },
        "Receipt List": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Receipt List_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Receipt List"
            }
        },
        "Call Cycle": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Call Cycle_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Call Cycle"
            }
        },
        "Visit History": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Visit History_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Visit History"
            }
        },
        "Orders List": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Orders List_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Orders List"
            }
        },
        "Messages": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Messages_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Messages"
            }
        },
        "Vacation": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Vacation_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Vacation"
            }
        },
        "Create POI": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_dad0b4ef347548cdbe1fcba8c8336020"
            },
            "settings": {
                "layout": "text",
                "html": "Create POI"
            }
        },
        "Media": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_8cb65c1fae6347f99bf63ec6373b24ab"
            },
            "settings": {
                "layout": "text",
                "html": "Media"
            }
        },
        "Offline Visits": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_55a82a1ce1564cb8bfff7425f68049da"
            },
            "settings": {
                "layout": "text",
                "html": "Offline Visits"
            }
        },
        "syncvisitdata": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "syncvisitdata_onClick"
            },
            "settings": {
                "layout": "icon",
                "icon": "svgIcon=#alpha-icon-sync:icon,24",
                "html": "syncvisitdata"
            }
        },
        "Back": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_3f848a587a6d4f779de31d4219871ea3"
            },
            "settings": {
                "layout": "text",
                "html": "Back"
            }
        }
    },
    "actions": {
        "Plan_onClick": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_2') ;},
        "Out Of Plan_onClick": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_16');},
        "Log Out_onClick": function(data) {DLG1_DlgObj.panelSetActive('SIGNIN_PANELCARD');},
        "Syncronize_onClick": function(data) {var _ok = function() {
 DLG1_DlgObj.runAction('setsessionid');
 DLG1_DlgObj.synchronizeLists();
 var err = lObj.getAllErrors();
 console.log(err) ;
 mx =JSON.stringify(err);
 console.log(err) ;
};
var _err = function() {
    alert('you need an internet connection to syncronize the data');
};
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);},
        "Invoice List_onClick": function(data) {var _ok = function() {
 alert('pp') ;
 DLG1_DlgObj.runAction('Open_Invoice_List');
 DLG1_DlgObj.panelSetActive('PANELCARD_42');
};
var _err = function() {
    alert('you need an internet connection to Open the invoice list');
};
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);},
        "Receipt List_onClick": function(data) {var _ok = function() {
 DLG1_DlgObj.panelSetActive('PANELCARD_42');
 DLG1_DlgObj.runAction('Open_Receipt_List');
};
var _err = function() {
    alert('you need an internet connection to Open the Receipt List');
};
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);},
        "Call Cycle_onClick": function(data) {var _ok = function() {
	DLG1_DlgObj.runAction('setsessionid');
	DLG1_DlgObj.runAction('open_Cylcle');
};
var _err = function() {
    alert('you need an internet connection to open the call cycle');
}; 
DLG1_DlgObj.serverIsAvailable(3000,_ok,_err);
},
        "Visit History_onClick": function(data) {var _ok = function() {
 DLG1_DlgObj.panelSetActive('PANELCARD_42');
 DLG1_DlgObj.runAction('Open_VisitHistoryD');
};
var _err = function() {
    alert('you need an internet connection to Open The visit History');
};
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);},
        "Orders List_onClick": function(data) {var _ok = function() {
	DLG1_DlgObj.panelSetActive('PANELCARD_42');
	DLG1_DlgObj.runAction('Open_ListOfOrders');
};
var _err = function() {
    alert('you need an internet connection to Open the Order List');
}; 
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);
},
        "Messages_onClick": function(data) {var _ok = function() {
	DLG1_DlgObj.panelSetActive('PANELCARD_42');
	DLG1_DlgObj.runAction('Open_Message');
};
var _err = function() {
    alert('you need an internet connection to Open Messaging');
}; 
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);
},
        "Vacation_onClick": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_VACATION');},
        "Create POI_onClick": function(data) {alert('this action not yet defined');},
        "Media_onClick": function(data) {alert('this action not yet defined');},
        "Offline Visits_onClick": function(data) {alert('this action not yet defined');},
        "syncvisitdata_onClick": function(data) {syncData() ;},
        "Back_onClick": function(data) {alert('this action not yet defined');},
        "SystemAction_dad0b4ef347548cdbe1fcba8c8336020": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_POI');},
        "SystemAction_8cb65c1fae6347f99bf63ec6373b24ab": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_MEDIA');},
        "SystemAction_55a82a1ce1564cb8bfff7425f68049da": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_5');},
        "SystemAction_3f848a587a6d4f779de31d4219871ea3": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_MENU');}
    },
    "layout": "Default",
    "layouts": {
        "Default": {
            "lines": [
                {
                    "before": {
                        "items": [
                            "Back"
                        ]
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": [
                            "syncvisitdata"
                        ]
                    }
                }
            ]
        }
    },
    "disclosures": {
        "Disclosure2": {
            "html": "[Plan] [Out Of Plan] [Syncronize] [Invoice List] [Receipt List] [Call Cycle] [Visit History] [Orders List] [Messages] [Vacation] [Create POI] [Offline Visits] [Log Out]",
            "type": "template"
        }
    }
},
	"data": {
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_28"
}
DLG1_DlgObj._controlBars['CONTROLBAR_30'] = {
	"settings": {
    "_name": "CONTROLBAR_30",
    "className": "DLG1_CONTROLBAR_30",
    "disclosuresClassName": "DLG1_CONTROLBAR_30",
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) { 
	txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) { 
	txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') { 
	if(txt == '__zero') { txt = '0'}
	else if(txt == false) txt = '';
	else if(txt == 0) txt = '0';
	else txt = '';
}
return txt
},
    "theme": "Alpha-Magenta",
    "edge": "top",
    "items": {
        "mainmenu": {
            "type": "disclosure-button",
            "disclosure": {
                "name": "Disclosure2",
                "type": "flyout-element",
                "size": "none",
                "animation": {
                    "duration": 200,
                    "tween": "ease-in-out"
                },
                "autoHide": true
            },
            "autoHideDisclosure": "always",
            "settings": {
                "show": {
                    "theme": "Alpha-Magenta",
                    "layout": "icon",
                    "html": "Button",
                    "icon": "svgIcon=#alpha-icon-bars:icon,24{ stroke: #fffefe;}"
                },
                "hide": {
                    "theme": "Alpha-Magenta",
                    "layout": "icon",
                    "html": "Button",
                    "icon": "svgIcon=#alpha-icon-bars:icon,24{ stroke: #fffefe;}"
                }
            }
        },
        "Plan": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Plan_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Plan"
            }
        },
        "Out Of Plan": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Out Of Plan_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Out Of Plan"
            }
        },
        "Log Out": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Log Out_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Log Out"
            }
        },
        "Syncronize": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Syncronize_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Syncronize"
            }
        },
        "Invoice List": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Invoice List_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Invoice List"
            }
        },
        "Receipt List": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Receipt List_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Receipt List"
            }
        },
        "Call Cycle": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Call Cycle_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Call Cycle"
            }
        },
        "Visit History": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Visit History_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Visit History"
            }
        },
        "Orders List": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Orders List_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Orders List"
            }
        },
        "Messages": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Messages_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Messages"
            }
        },
        "Vacation": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Vacation_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Vacation"
            }
        },
        "Create POI": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_1a88c57e_961c_4fb7_8283_d5cf50563814"
            },
            "settings": {
                "layout": "text",
                "html": "Create POI"
            }
        },
        "Media": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_c301027e_79ad_405a_a2e1_377bd9348255"
            },
            "settings": {
                "layout": "text",
                "html": "Media"
            }
        },
        "Offline Visits": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_61d120f3_199c_4c12_89f4_1f7de24ac8af"
            },
            "settings": {
                "layout": "text",
                "html": "Offline Visits"
            }
        },
        "syncvisitdata": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "syncvisitdata_onClick"
            },
            "settings": {
                "layout": "icon",
                "icon": "svgIcon=#alpha-icon-sync:icon,24",
                "html": "syncvisitdata"
            }
        },
        "Back": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_35ea1392_e5ea_432d_9e78_e58e6d563ebe"
            },
            "settings": {
                "layout": "text",
                "html": "<span id=\"_language_BACK\" class=\"_language\">Back</span>"
            }
        }
    },
    "actions": {
        "Plan_onClick": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_2') ;},
        "Out_Of_Plan_onClick": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_16');},
        "Log_Out_onClick": function(data) {DLG1_DlgObj.panelSetActive('SIGNIN_PANELCARD');},
        "Syncronize_onClick": function(data) {var _ok = function() {
 DLG1_DlgObj.runAction('setsessionid');
 DLG1_DlgObj.synchronizeLists();
 var err = lObj.getAllErrors();
 console.log(err) ;
 mx =JSON.stringify(err);
 console.log(err) ;
};
var _err = function() {
    alert('you need an internet connection to syncronize the data');
};
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);},
        "Invoice_List_onClick": function(data) {var _ok = function() {
	DLG1_DlgObj.panelSetActive('PANELCARD_36');
};
var _err = function() {
    alert('you need an internet connection to syncronize the data');
}; 
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);
},
        "Receipt_List_onClick": function(data) {var _ok = function() {
 DLG1_DlgObj.panelSetActive('PANELCARD_37');
};
var _err = function() {
    alert('you need an internet connection to syncronize the data');
};
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);},
        "Call_Cycle_onClick": function(data) {var _ok = function() {
	DLG1_DlgObj.runAction('setsessionid');
	DLG1_DlgObj.panelSetActive('PANELCARD_CYCLE');
};
var _err = function() {
    alert('you need an internet connection to open the call cycle');
}; 
DLG1_DlgObj.serverIsAvailable(3000,_ok,_err);
},
        "Visit_History_onClick": function(data) {var _ok = function() {
 DLG1_DlgObj.panelSetActive('PANEL_VISITHISTORYD');
};
var _err = function() {
    alert('you need an internet connection to syncronize the data');
};
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);},
        "Orders_List_onClick": function(data) {var _ok = function() {
	DLG1_DlgObj.panelSetActive('PANELCARD_LISTORDERS');
};
var _err = function() {
    alert('you need an internet connection to syncronize the data');
}; 
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);
},
        "Messages_onClick": function(data) {var _ok = function() {
	DLG1_DlgObj.panelSetActive('PANELCARD_MESSAGE');
};
var _err = function() {
    alert('you need an internet connection to syncronize the data');
}; 
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err);
},
        "Vacation_onClick": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_VACATION');},
        "Create_POI_onClick": function(data) {alert('this action not yet defined');},
        "Media_onClick": function(data) {alert('this action not yet defined');},
        "Offline_Visits_onClick": function(data) {alert('this action not yet defined');},
        "syncvisitdata_onClick": function(data) {syncData() ;},
        "Back_onClick": function(data) {alert('this action not yet defined');},
        "SystemAction_1a88c57e_961c_4fb7_8283_d5cf50563814": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_POI');},
        "SystemAction_c301027e_79ad_405a_a2e1_377bd9348255": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_MEDIA');},
        "SystemAction_61d120f3_199c_4c12_89f4_1f7de24ac8af": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_5');},
        "SystemAction_35ea1392_e5ea_432d_9e78_e58e6d563ebe": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_MENU');}
    },
    "layout": "Default",
    "layouts": {
        "Default": {
            "lines": [
                {
                    "before": {
                        "items": [
                            "Back"
                        ]
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": [
                            "syncvisitdata"
                        ]
                    }
                }
            ]
        }
    },
    "disclosures": {
        "Disclosure2": {
            "html": "[Plan] [Out Of Plan] [Syncronize] [Invoice List] [Receipt List] [Call Cycle] [Visit History] [Orders List] [Messages] [Vacation] [Create POI] [Offline Visits] [Log Out]",
            "type": "template"
        }
    }
},
	"data": {
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_30"
}
DLG1_DlgObj._controlBars['CONTROLBAR_20'] = {
	"settings": {
    "_name": "CONTROLBAR_20",
    "className": "DLG1_CONTROLBAR_20",
    "disclosuresClassName": "DLG1_CONTROLBAR_20",
    "__listNavigationState": function(listName) {var lObj = DLG1_DlgObj.getControl(listName);
if(!lObj) return false;
var ls = lObj._state;
var flagFirst = true;
var flagPrev = true; 
var flagNext = true; 
var flagLast = true; 
if(ls.pageCount == 1) { 
	flagFirst = false;
	flagPrev = false;
	flagNext = false;
	flagLast = false;
} else { 
	if(ls.page ==1) { 
		flagFirst = false;
		flagPrev = false;
	} else if (ls.page == ls.pageCount) { 
		flagNext = false;
		flagLast = false;
	}
};
var txtPageNumber = '' + ls.page + '/' + ls.pageCount;
var _d = this.data;
var name;
name = 'LISTNAV_' + listName.toUpperCase() + '_first';
if(typeof _d[name] != 'undefined') _d[name] = !flagFirst;	
name = 'LISTNAV_' + listName.toUpperCase() + '_prev';
if(typeof _d[name] != 'undefined') _d[name] = !flagPrev;	
name = 'LISTNAV_' + listName.toUpperCase() + '_next';
if(typeof _d[name] != 'undefined') _d[name] = !flagNext;	
name = 'LISTNAV_' + listName.toUpperCase() + '_last';
if(typeof _d[name] != 'undefined') _d[name] = !flagLast;	
name = 'LISTNAV_' + listName.toUpperCase() + '_pageNumber';
if(typeof _d[name] != 'undefined') _d[name] = txtPageNumber;	
this.refresh();
},
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) { 
	txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) { 
	txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') { 
	if(txt == '__zero') { txt = '0'}
	else if(txt == false) txt = '';
	else if(txt == 0) txt = '0';
	else txt = '';
}
return txt
},
    "theme": "Alpha-Magenta",
    "edge": "top",
    "items": {
        "Visit Summary": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "EndVisit_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Visit Summary"
            }
        },
        "Htmltitle1": {
            "type": "html",
            "size": "100%",
            "html": "<div style=\"margin-left: 75px; margin-right: 75px; overflow: hidden; text-overflow: ellipsis; white-space:nowrap;\">{custvisited}</div> "
        },
        "Cancelvisit": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Cancelvisit_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Cancel"
            }
        }
    },
    "actions": {
        "EndVisit_onClick": function(data) {var x = DLG1_DlgObj.getValue('VisitType');
var ele = DLG1_DlgObj.getPointer('VisitType');
var e2 = ele.children;
var arr = [];
for(var i = 0; i < e2.length; i++) {
     delete obj;
     obj = {};
     obj.text = e2[i].text;
     obj.value = e2[i].value;
     arr.push(obj);
}
var indx = DLG1_DlgObj._findArrayProp(arr, 'value',x);
var display = arr[indx].text;
msuper = DLG1_DlgObj.getValue('Supervisor')
mvtype=DLG1_DlgObj.getValue('VisitType');
mobjective=DLG1_DlgObj.getValue('VisitObjective');
mcoment=DLG1_DlgObj.getValue('Coment');
mvSecurity = DLG1_DlgObj.getValue('vSecurity');
mPhonerder = DLG1_DlgObj.getValue('phoneorder');
if((mvSecurity == "1" || mvSecurity == "3") && mPhonerder == 0) {
 if(mvtype==0 || mvtype=='' || mobjective==0 ||  mobjective=='' || mcoment==''){
  alert('make sure all mandatory fields are filled');
  return;
 }
 if(display=='Double Visit'){
  if(msuper=='' || msuper==0) {
   alert('you have chosen a double visit please fill the supervisor name');
   return;
  }
 }
 if(display != 'Double Visit'){
  if(msuper=='' || msuper==0) {
  } else {
   alert('you have not chosen a double visit please leave the supervisor empty');
   return;
  }
 }
}
var now = new Date()
DLG1_DlgObj.panelSetActive('PANELCARD_VISITSUMMARY');},
        "Cancelvisit_onClick": function(data) {var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
lObj.resetRow();
DLG1_DlgObj.panelSetActive('PANELCARD_MENU');},
        "Button5_onClick": function(data) {alert('this action not yet defined');},
        "Statement": function(data) {},
        "Forecast_onClick": function(data) {alert('this action not yet defined');}
    },
    "layout": "Layout1",
    "layouts": {
        "Layout1": {
            "lines": [
                {
                    "before": {
                        "items": [
                            "Visit Summary"
                        ]
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": [
                            "Cancelvisit"
                        ]
                    }
                },
                {
                    "before": {
                        "items": []
                    },
                    "middle": {
                        "items": [
                            "Htmltitle1"
                        ]
                    },
                    "after": {
                        "items": []
                    }
                }
            ]
        }
    },
    "disclosures": {
        "menucli": {}
    }
},
	"data": {
	"custvisited": "",
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_20"
}
DLG1_DlgObj._controlBars['CONTROLBAR_26'] = {
	"settings": {
    "_name": "CONTROLBAR_26",
    "className": "DLG1_CONTROLBAR_26",
    "disclosuresClassName": "DLG1_CONTROLBAR_26",
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) { 
	txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) { 
	txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') { 
	if(txt == '__zero') { txt = '0'}
	else if(txt == false) txt = '';
	else if(txt == 0) txt = '0';
	else txt = '';
}
return txt
},
    "theme": "Alpha-Magenta",
    "edge": "bottom",
    "items": {
        "Menu": {
            "type": "disclosure-button",
            "disclosure": {
                "name": "Disclosure1",
                "type": "flyout",
                "size": "none",
                "animation": {
                    "duration": 200,
                    "tween": "ease-in-out"
                },
                "autoHide": true
            },
            "autoHideDisclosure": "always",
            "settings": {
                "show": {
                    "theme": "Alpha-Magenta",
                    "layout": "icon",
                    "html": "Button",
                    "icon": "svgIcon=#alpha-icon-bars:icon,24"
                },
                "hide": {
                    "theme": "Alpha-Magenta",
                    "layout": "icon",
                    "html": "Button",
                    "icon": "svgIcon=#alpha-icon-bars:icon,24"
                }
            },
            "actions": {}
        },
        "Add Multiple": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Add Multiple_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Add Multiple"
            }
        },
        "Other": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Shipwind_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Other"
            }
        },
        "AddBasket": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "AddBasket_onClick"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-basketRemoveSolid:icon,24{ fill: #ed1313;}",
                "html": "AddBasket"
            }
        },
        "DeleteItem": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "DeleteItem_onClick"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-xLarge:icon,24{ fill: #ee0a0a;}",
                "html": "DeleteItem"
            }
        },
        "Add": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Add_onClick"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-addCircleBorder:icon,24",
                "html": "Add"
            }
        }
    },
    "actions": {
        "Add_Multiple_onClick": function(data) {var lObj = DLG1_DlgObj.getControl('LSTITEMS');
var i;
for (i = 0; i < lObj._data.length; i++) {
	lObj._data[i].qty = 0 ;
	lObj._data[i].bonus = 0 ;
};
var listObj = DLG1_DlgObj.getControl('LSTITEMS');
listObj.refresh();
DLG1_DlgObj.panelSetActive('PANELCARD_ITEMS_ALL');},
        "Shipwind_onClick": function(data) {DLG1_DlgObj.runAction('openshipwindow');},
        "AddBasket_onClick": function(data) {DLG1_DlgObj.setValue('flagadditem',3);
DLG1_DlgObj.panelSetActive('PANELCARD_BASKET');
},
        "DeleteItem_onClick": function(data) {alert('this action not yet defined');},
        "Add_onClick": function(data) {var lObj = DLG1_DlgObj.getControl('LSTITEMS');
var i;
for (i = 0; i < lObj._data.length; i++) {
	lObj._data[i].qty = 0 ;
	lObj._data[i].bonus = 0 ;
};
var listObj = DLG1_DlgObj.getControl('LSTITEMS');
listObj.refresh();
DLG1_DlgObj.panelSetActive('PANELCARD_ITEMS_ALL');}
    },
    "layout": "Default",
    "layouts": {
        "Default": {
            "lines": [
                {
                    "before": {
                        "items": []
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": [
                            "Menu"
                        ]
                    }
                }
            ]
        }
    },
    "disclosures": {
        "Disclosure1": {
            "html": "[Add] [DeleteItem] [AddBasket]",
            "type": "template"
        }
    }
},
	"data": {
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_26"
}
DLG1_DlgObj._controlBars['CONTROLBAR_2'] = {
	"settings": {
    "_name": "CONTROLBAR_2",
    "className": "DLG1_CONTROLBAR_2",
    "disclosuresClassName": "DLG1_CONTROLBAR_2",
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) { 
	txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) { 
	txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') { 
	if(txt == '__zero') { txt = '0'}
	else if(txt == false) txt = '';
	else if(txt == 0) txt = '0';
	else txt = '';
}
return txt
},
    "theme": "Alpha-Magenta",
    "edge": "top",
    "items": {
        "Back": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_67b2b8799547494483a5c56e9b9173f1"
            },
            "settings": {
                "layout": "icon text",
                "theme": "Alpha-Magenta:left",
                "html": "Visit Options"
            }
        },
        "Html1": {
            "size": "",
            "type": "html",
            "html": "<font face=\"Sakkal Majalla\">Invoiced Items</font><font face=\"Ebrima\"></font><font face=\"Sakkal Majalla\"></font><font face=\"Samsung Sans\"></font><font face=\"Samsung Sans Num35\"></font><font face=\"Samsung Sans Num45\"></font><font face=\"SamsungBengali\"></font><font face=\"SamsungDevanagari\"></font><font face=\"SamsungEmoji\"></font><font face=\"SamsungGujarathi\"></font><font face=\"SamsungKannada\"></font><font face=\"SamsungMalayalam\"></font><font face=\"SamsungOriya\"></font><font face=\"SamsungPunjabi\"></font><font face=\"SamsungSinhala\"></font><font face=\"SamsungTamil\"></font><font face=\"SamsungTelugu\"></font><font face=\"SamsungThai(test)\"></font><font face=\"Script\"></font><font face=\"Script MT Bold\"></font><font face=\"Segoe MDL2 Assets\"></font><font face=\"Segoe Print\"></font><font face=\"Segoe Script\"></font><font face=\"Segoe UI\"></font><font face=\"Segoe UI Black\"></font>",
            "bind": {
                "show": ""
            },
            "actions": {}
        }
    },
    "actions": {
        "Back_onClick": function(data) {alert('this action not yet defined');},
        "SystemAction_67b2b8799547494483a5c56e9b9173f1": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_4');}
    },
    "layout": "Default",
    "layouts": {
        "Default": {
            "lines": [
                {
                    "before": {
                        "items": [
                            "Back"
                        ]
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": [
                            "Html1"
                        ]
                    }
                }
            ]
        }
    },
    "disclosures": {}
},
	"data": {
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_2"
}
DLG1_DlgObj._controlBars['CONTROLBAR_27_1'] = {
	"settings": {
    "_name": "CONTROLBAR_27_1",
    "className": "DLG1_CONTROLBAR_27_1",
    "disclosuresClassName": "DLG1_CONTROLBAR_27_1",
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) { 
	txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) { 
	txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') { 
	if(txt == '__zero') { txt = '0'}
	else if(txt == false) txt = '';
	else if(txt == 0) txt = '0';
	else txt = '';
}
return txt
},
    "theme": "Alpha-Magenta",
    "edge": "bottom",
    "items": {
        "Menu": {
            "type": "disclosure-button",
            "disclosure": {
                "name": "Disclosure1",
                "type": "flyout",
                "size": "none",
                "animation": {
                    "duration": 200,
                    "tween": "ease-in-out"
                },
                "autoHide": true
            },
            "autoHideDisclosure": "always",
            "settings": {
                "show": {
                    "theme": "Alpha-Magenta",
                    "layout": "icon",
                    "html": "Button",
                    "icon": "svgIcon=#alpha-icon-bars:icon,24"
                },
                "hide": {
                    "theme": "Alpha-Magenta",
                    "layout": "icon",
                    "html": "Button",
                    "icon": "svgIcon=#alpha-icon-bars:icon,24"
                }
            }
        },
        "AddBasket": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "AddBasket_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "AddBasket"
            }
        },
        "deleteitem": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "deleteitem_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "deleteitem"
            }
        },
        "additems": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "additems_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "additems"
            }
        }
    },
    "actions": {
        "AddBasket_onClick": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_BASKET');},
        "deleteitem_onClick": function(data) {mBasketId=DLG1_DlgObj.getValue('list::lstinvoices::basketid');
if(mBasketId==0){
 var lObj = DLG1_DlgObj.getControl('lstinvoices');
 lObj.deleteRow();
} else {
 var lObj = DLG1_DlgObj.getControl('lstinvoices');
 mLenght = lObj._data.length
 var ii = mLenght-1;;
 var interval = setInterval(function(){
  mValue = lObj._values[ii] ;
  mBasketData = lObj._data[ii].basketid ;
   if(mBasketData == mBasketId){
     i1=Number(ii);
   lObj.setValue(mValue) ;
    var opts = {};
      opts.prompt = false;
      lObj.deleteRow(opts) ;
   mits=DLG1_DlgObj.getValue('list::LSTBASKETDET::qty');
   }
      ii--;
     if(ii <= -1) clearInterval(interval);
 }, 2000);
}
mTotalBeforeVat = 0
var listObj = DLG1_DlgObj.getControl('lstinvoices');
listObj.refresh();},
        "additems_onClick": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_ITEMS_ALL');}
    },
    "layout": "Default",
    "layouts": {
        "Default": {
            "lines": [
                {
                    "before": {
                        "items": []
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": [
                            "Menu"
                        ]
                    }
                }
            ]
        }
    },
    "disclosures": {
        "Disclosure1": {
            "html": "[AddBasket] [deleteitem] [additems]",
            "type": "template"
        }
    }
},
	"data": {
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_27_1"
}
DLG1_DlgObj._controlBars['CONTROLBAR_3'] = {
	"settings": {
    "_name": "CONTROLBAR_3",
    "className": "DLG1_CONTROLBAR_3",
    "disclosuresClassName": "DLG1_CONTROLBAR_3",
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) { 
	txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) { 
	txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') { 
	if(txt == '__zero') { txt = '0'}
	else if(txt == false) txt = '';
	else if(txt == 0) txt = '0';
	else txt = '';
}
return txt
},
    "theme": "Alpha-Magenta",
    "edge": "top",
    "items": {
        "Visit Options": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_78292ae5f42242b9aa02fd3c80bc10c7"
            },
            "settings": {
                "layout": "icon text",
                "theme": "Alpha-Magenta:left",
                "html": "Visit Options"
            }
        },
        "Html1": {
            "type": "html",
            "html": "<font face=\"Sakkal Majalla\">Receipt</font><font face=\"Ebrima\"></font><font face=\"Sakkal Majalla\"></font><font face=\"Samsung Sans\"></font><font face=\"Samsung Sans Num35\"></font><font face=\"Samsung Sans Num45\"></font><font face=\"SamsungBengali\"></font><font face=\"SamsungDevanagari\"></font><font face=\"SamsungEmoji\"></font><font face=\"SamsungGujarathi\"></font><font face=\"SamsungKannada\"></font><font face=\"SamsungMalayalam\"></font><font face=\"SamsungOriya\"></font><font face=\"SamsungPunjabi\"></font><font face=\"SamsungSinhala\"></font><font face=\"SamsungTamil\"></font><font face=\"SamsungTelugu\"></font><font face=\"SamsungThai(test)\"></font><font face=\"Script\"></font><font face=\"Script MT Bold\"></font><font face=\"Segoe MDL2 Assets\"></font><font face=\"Segoe Print\"></font><font face=\"Segoe Script\"></font><font face=\"Segoe UI\"></font><font face=\"Segoe UI Black\"></font>"
        }
    },
    "actions": {
        "Back_onClick": function(data) {alert('this action not yet defined');},
        "SystemAction_78292ae5f42242b9aa02fd3c80bc10c7": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_4');}
    },
    "layout": "Default",
    "layouts": {
        "Default": {
            "lines": [
                {
                    "before": {
                        "items": [
                            "Visit Options"
                        ]
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": [
                            "Html1"
                        ]
                    }
                }
            ]
        }
    },
    "disclosures": {}
},
	"data": {
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_3"
}
DLG1_DlgObj._controlBars['CONTROLBAR_17'] = {
	"cb": {
		"controlBarProperties": {
			"edge": "bottom",
			"javascript": {
			},
			"disclosure": {
				"animation": {
					"duration": 300
				}
			},
			"selectActiveLayoutDynamically": false,
			"refreshOnContainerResize": true,
			"animateRefresh": false,
			"animationType": "slide-left",
			"animationDuration": "200",
			"animationTween": "ease-in-out",
			"showSystemCommentsInJavascript": true
		},
		"actions": [
		{
			"name": "Save_LSTRECEIPT",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTRECEIPT');\r\n\r\n\r\nif(lObj.selection[0] != 'undefined') { \r\n\tlObj._selectedRow = lObj.selection[0];\r\n}\r\n\r\nlObj.updateListFromUXControls();"
		},
		{
			"name": "NewRecord_LSTRECEIPT",
			"javascript": "//var lObj = DLG1_DlgObj.getControl('LSTRECEIPT');\r\n//lObj.newDetailViewRecord();\r\n\r\nDLG1_DlgObj.setValue('paimenttype',0);\r\nDLG1_DlgObj.setValue('txtrecdesc','');\r\nDLG1_DlgObj.setValue('Currency',0);\r\nDLG1_DlgObj.setValue('amount',0);\r\nDLG1_DlgObj.setValue('OnInvoiceNo','');\r\nDLG1_DlgObj.showContainerWindow(this,'WINDOW_14');",
			"editorstatejson": "{\r\n\t\"start\": 854,\r\n\t\"end\": 854\r\n}"
		},
		{
			"name": "DeleteRecord_LSTRECEIPT",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTRECEIPT');\r\nlObj.deleteRow();"
		},
		{
			"name": "Synchronize_LSTRECEIPT",
			"javascript": "//DLG1_DlgObj.saveListEdits('LSTRECEIPT',{rows: 'allRows'});\r\n  DLG1_DlgObj.saveListEdits('LSTRECEIPT',{rows: 'allRows', ajax: { timeOut: 15000, onAjaxFail: function() { } , onDeviceOffline: function() { } } });",
			"editorstatejson": "{\r\n\t\"start\": 1,\r\n\t\"end\": 1\r\n}"
		}],
		"items": [
		{
			"name": "Save_LSTRECEIPT",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Save",
					"bind": {
						"disabled": "Save_LSTRECEIPT_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Save_LSTRECEIPT"
			}
		},
		{
			"name": "NewRecord_LSTRECEIPT",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"html": "New",
					"bind": {
						"disabled": "NewRecord_LSTRECEIPT_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "NewRecord_LSTRECEIPT"
			}
		},
		{
			"name": "DeleteRecord_LSTRECEIPT",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-removeCircle:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton",
					"html": "Delete",
					"bind": {
						"disabled": "DeleteRecord_LSTRECEIPT_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DeleteRecord_LSTRECEIPT"
			}
		},
		{
			"name": "Synchronize_LSTRECEIPT",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Sync",
					"bind": {
						"disabled": "Synchronize_LSTRECEIPT_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto",
					"hasBadge": false,
					"showdropdownicon": true,
					"showdropdowniconPosition": "Right",
					"dropdownicon": "<Specified by Style>"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				},
				"buttondropdown": {
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"layout": "Text only",
					"html": "Button",
					"autoHideDisclosure": "auto",
					"showdropdownicon": true,
					"showdropdowniconPosition": "Right",
					"dropdownicon": "<Specified by Style>",
					"bind": {
					}
				}
			},
			"itemAction": {
				"click": "Synchronize_LSTRECEIPT"
			}
		}],
		"javascriptLocal": [],
		"data": [
		{
			"name": "Save_LSTRECEIPT_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTRECEIPT.isDirty == true) && (dialog.listDetailView.LSTRECEIPT.mode != \\'search\\'));'}"
		},
		{
			"name": "NewRecord_LSTRECEIPT_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTRECEIPT.isDirty == false)  && (dialog.listDetailView.LSTRECEIPT.mode != \\'search\\'));'}"
		},
		{
			"name": "DeleteRecord_LSTRECEIPT_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTRECEIPT.mode != \\'search\\') && (dialog.listRow.LSTRECEIPT.isRowSelected == true));'}"
		},
		{
			"name": "Synchronize_LSTRECEIPT_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.list.LSTRECEIPT.isDirty == true)  && (dialog.listDetailView.LSTRECEIPT.mode != \\'search\\'));'}"
		}],
		"layouts": [
		{
			"name": "Layout1",
			"default": false,
			"lines": [
			{
				"before": "NewRecord_LSTRECEIPT",
				"middle": "Synchronize_LSTRECEIPT",
				"after": "DeleteRecord_LSTRECEIPT",
				"linetype": "Default"
			}]
		}],
		"disclosures": []
	},
	"_state": {
		"showPane": {
			"css": true,
			"javascript": true,
			"items": true,
			"preview": true
		},
		"selected_action_C": "2\r\n",
		"selected_item_C": "4\r\n",
		"selected_layout_C": "1\r\n",
		"selected_layoutLine_c": "1",
		"cssMode": 1,
		"jsMode": 1,
		"mode_items": "Filter",
		"mode_actions": "Filter",
		"mode_Layouts": "Filter",
		"mode_disclosures": "Filter",
		"previewSize": "433px",
		"tabPage": "Actions"
	},
	"settings": {
    "_name": "CONTROLBAR_17",
    "className": "DLG1_CONTROLBAR_17",
    "disclosuresClassName": "DLG1_CONTROLBAR_17",
    "__listNavigationState": function(listName) {var lObj = DLG1_DlgObj.getControl(listName);
if(!lObj) return false;
var ls = lObj._state;
var flagFirst = true;
var flagPrev = true;
var flagNext = true;
var flagLast = true;
if(ls.pageCount == 1) {
 flagFirst = false;
 flagPrev = false;
 flagNext = false;
 flagLast = false;
} else {
 if(ls.page ==1) {
  flagFirst = false;
  flagPrev = false;
 } else if (ls.page == ls.pageCount) {
  flagNext = false;
  flagLast = false;
 }
};
var txtPageNumber = '' + ls.page + '/' + ls.pageCount;
var _d = this.data;
var name;
name = 'LISTNAV_' + listName.toUpperCase() + '_first';
if(typeof _d[name] != 'undefined') _d[name] = !flagFirst;
name = 'LISTNAV_' + listName.toUpperCase() + '_prev';
if(typeof _d[name] != 'undefined') _d[name] = !flagPrev;
name = 'LISTNAV_' + listName.toUpperCase() + '_next';
if(typeof _d[name] != 'undefined') _d[name] = !flagNext;
name = 'LISTNAV_' + listName.toUpperCase() + '_last';
if(typeof _d[name] != 'undefined') _d[name] = !flagLast;
name = 'LISTNAV_' + listName.toUpperCase() + '_pageNumber';
if(typeof _d[name] != 'undefined') _d[name] = txtPageNumber;
this.refresh();},
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) {
 txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) {
 txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') {
 if(txt == '__zero') { txt = '0'}
 else if(txt == false) txt = '';
 else if(txt == 0) txt = '0';
 else txt = '';
}
return txt},
    "theme": "Alpha-Magenta",
    "edge": "bottom",
    "items": {
        "Save_LSTRECEIPT": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "Save_LSTRECEIPT_disabled"
            },
            "actions": {
                "click": "Save_LSTRECEIPT"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-save:icon iconButton",
                "disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
                "html": "Save"
            }
        },
        "NewRecord_LSTRECEIPT": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "NewRecord_LSTRECEIPT_disabled"
            },
            "actions": {
                "click": "NewRecord_LSTRECEIPT"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
                "disabledIcon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
                "html": "New"
            }
        },
        "DeleteRecord_LSTRECEIPT": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "DeleteRecord_LSTRECEIPT_disabled"
            },
            "actions": {
                "click": "DeleteRecord_LSTRECEIPT"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-removeCircle:icon iconButton",
                "disabledIcon": "svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton",
                "html": "Delete"
            }
        },
        "Synchronize_LSTRECEIPT": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "Synchronize_LSTRECEIPT_disabled"
            },
            "actions": {
                "click": "Synchronize_LSTRECEIPT"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-save:icon iconButton",
                "disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
                "html": "Sync"
            }
        }
    },
    "actions": {
        "Save_LSTRECEIPT": function(data) {var lObj = DLG1_DlgObj.getControl('LSTRECEIPT');
if(lObj.selection[0] != 'undefined') {
 lObj._selectedRow = lObj.selection[0];
}
lObj.updateListFromUXControls();},
        "NewRecord_LSTRECEIPT": function(data) {DLG1_DlgObj.setValue('paimenttype',0);
DLG1_DlgObj.setValue('txtrecdesc','');
DLG1_DlgObj.setValue('Currency',0);
DLG1_DlgObj.setValue('amount',0);
DLG1_DlgObj.setValue('OnInvoiceNo','');
DLG1_DlgObj.showContainerWindow(this,'WINDOW_14');},
        "DeleteRecord_LSTRECEIPT": function(data) {var lObj = DLG1_DlgObj.getControl('LSTRECEIPT');
lObj.deleteRow();},
        "Synchronize_LSTRECEIPT": function(data) {  DLG1_DlgObj.saveListEdits('LSTRECEIPT',{rows: 'allRows', ajax: { timeOut: 15000, onAjaxFail: function() { } , onDeviceOffline: function() { } } });}
    },
    "layout": "Layout1",
    "layouts": {
        "Layout1": {
            "lines": [
                {
                    "before": {
                        "items": [
                            "NewRecord_LSTRECEIPT"
                        ]
                    },
                    "middle": {
                        "items": [
                            "Synchronize_LSTRECEIPT"
                        ]
                    },
                    "after": {
                        "items": [
                            "DeleteRecord_LSTRECEIPT"
                        ]
                    }
                }
            ]
        }
    },
    "disclosures": {}
},
	"data": {
	"Save_LSTRECEIPT_disabled": "",
	"NewRecord_LSTRECEIPT_disabled": "",
	"DeleteRecord_LSTRECEIPT_disabled": "",
	"Synchronize_LSTRECEIPT_disabled": "",
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_17"
}
DLG1_DlgObj._controlBars['CONTROLBAR_16'] = {
	"cb": {
		"controlBarProperties": {
			"edge": "bottom",
			"javascript": {
			},
			"disclosure": {
				"animation": {
					"duration": 300
				}
			},
			"selectActiveLayoutDynamically": false,
			"refreshOnContainerResize": true,
			"animateRefresh": false,
			"animationType": "slide-left",
			"animationDuration": "200",
			"animationTween": "ease-in-out",
			"showSystemCommentsInJavascript": true
		},
		"actions": [
		{
			"name": "Save_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\n\r\n\r\nif(lObj.selection[0] != 'undefined') { \r\n\tlObj._selectedRow = lObj.selection[0];\r\n}\r\n\r\nlObj.updateListFromUXControls();"
		},
		{
			"name": "NewRecord_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.newDetailViewRecord();\r\n\r\nDLG1_DlgObj.showContainerWindow(this,'WINDOW_13');",
			"editorstatejson": "{\r\n\t\"start\": 590,\r\n\t\"end\": 645\r\n}"
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.deleteRow();"
		},
		{
			"name": "Reset_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.resetForm({prompt: true});"
		},
		{
			"name": "Synchronize_LSTVISITNOTES",
			"javascript": "//DLG1_DlgObj.saveListEdits('LSTVISITNOTES',{rows: 'allRows'});\r\n  DLG1_DlgObj.saveListEdits('LSTVISITNOTES',{rows: 'allRows', ajax: { timeOut: 15000, onAjaxFail: function() { } , onDeviceOffline: function() { } } });"
		},
		{
			"name": "RefreshList_LSTVISITNOTES",
			"javascript": "DLG1_DlgObj.refreshListData('LSTVISITNOTES');"
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES",
			"javascript": "var ls = DLG1_DlgObj._localStorageSettings;\r\nDLG1_DlgObj._persistToLocalStorageInitializeKeys(ls,'LSTVISITNOTES',true);\r\n\r\nvar obj = DLG1_DlgObj._ls_getData('lists:t');\r\nDLG1_DlgObj._ls_deleteKeys(obj);"
		},
		{
			"name": "DumpStorage_LSTVISITNOTES",
			"javascript": "DLG1_DlgObj.__dumpListStorage('LSTVISITNOTES','dsdas',false,'DLG1.V.R1.',false);"
		}],
		"items": [
		{
			"name": "Save_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image only",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Save",
					"bind": {
						"disabled": "Save_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Save_LSTVISITNOTES"
			}
		},
		{
			"name": "NewRecord_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"html": "New",
					"bind": {
						"disabled": "NewRecord_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "NewRecord_LSTVISITNOTES"
			}
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-removeCircle:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton",
					"html": "Delete",
					"bind": {
						"disabled": "DeleteRecord_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DeleteRecord_LSTVISITNOTES"
			}
		},
		{
			"name": "Reset_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-undo:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-undo:icon iconDisabled iconButton",
					"html": "Reset",
					"bind": {
						"disabled": "Reset_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Reset_LSTVISITNOTES"
			}
		},
		{
			"name": "Synchronize_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Sync",
					"bind": {
						"disabled": "Synchronize_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Synchronize_LSTVISITNOTES"
			}
		},
		{
			"name": "RefreshList_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image only",
					"icon": "svgIcon=#alpha-icon-refresh:icon",
					"disabledIcon": "svgIcon=#alpha-icon-refresh:icon iconDisabled",
					"html": "Refresh List",
					"bind": {
						"disabled": "RefreshList_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "RefreshList_LSTVISITNOTES"
			}
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"html": "Delete Storage",
					"bind": {
						"disabled": "DeleteStorage_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DeleteStorage_LSTVISITNOTES"
			}
		},
		{
			"name": "DumpStorage_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"html": "Dump Storage",
					"bind": {
						"disabled": "DumpStorage_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DumpStorage_LSTVISITNOTES"
			}
		}],
		"javascriptLocal": [],
		"data": [
		{
			"name": "Save_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true) && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "NewRecord_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\') && (dialog.listRow.LSTVISITNOTES.isRowSelected == true));'}"
		},
		{
			"name": "Reset_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "Synchronize_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.list.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "RefreshList_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.list.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return ;'}"
		},
		{
			"name": "DumpStorage_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return ;'}"
		}],
		"layouts": [
		{
			"name": "Layout1",
			"default": false,
			"lines": [
			{
				"before": "NewRecord_LSTVISITNOTES,Save_LSTVISITNOTES",
				"middle": "Reset_LSTVISITNOTES,DeleteRecord_LSTVISITNOTES",
				"after": "Synchronize_LSTVISITNOTES",
				"linetype": "Default"
			}]
		}],
		"disclosures": []
	},
	"_state": {
		"showPane": {
			"css": true,
			"javascript": true,
			"items": true,
			"preview": true
		},
		"selected_item_C": "2\r\n",
		"selected_layout_C": "1\r\n",
		"selected_layoutLine_c": "1",
		"cssMode": 1,
		"jsMode": 1,
		"mode_items": "Filter",
		"mode_actions": "Filter",
		"mode_Layouts": "Filter",
		"mode_disclosures": "Filter",
		"previewSize": "433px",
		"tabPage": "Actions",
		"selected_action_C": "2\r\n"
	},
	"settings": {
    "className": "DLG1_CONTROLBAR_16",
    "disclosuresClassName": "DLG1_CONTROLBAR_16",
    "__listNavigationState": function(listName) {var lObj = DLG1_DlgObj.getControl(listName);
if(!lObj) return false;
var ls = lObj._state;
var flagFirst = true;
var flagPrev = true; 
var flagNext = true; 
var flagLast = true; 
if(ls.pageCount == 1) { 
	flagFirst = false;
	flagPrev = false;
	flagNext = false;
	flagLast = false;
} else { 
	if(ls.page ==1) { 
		flagFirst = false;
		flagPrev = false;
	} else if (ls.page == ls.pageCount) { 
		flagNext = false;
		flagLast = false;
	}
};
var txtPageNumber = '' + ls.page + '/' + ls.pageCount;
var _d = this.data;
var name;
name = 'LISTNAV_' + listName.toUpperCase() + '_first';
if(typeof _d[name] != 'undefined') _d[name] = !flagFirst;	
name = 'LISTNAV_' + listName.toUpperCase() + '_prev';
if(typeof _d[name] != 'undefined') _d[name] = !flagPrev;	
name = 'LISTNAV_' + listName.toUpperCase() + '_next';
if(typeof _d[name] != 'undefined') _d[name] = !flagNext;	
name = 'LISTNAV_' + listName.toUpperCase() + '_last';
if(typeof _d[name] != 'undefined') _d[name] = !flagLast;	
name = 'LISTNAV_' + listName.toUpperCase() + '_pageNumber';
if(typeof _d[name] != 'undefined') _d[name] = txtPageNumber;	
this.refresh();},
    "theme": "Alpha-Magenta",
    "edge": "bottom",
    "items": {
        "Save_LSTVISITNOTES": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "Save_LSTVISITNOTES_disabled"
            },
            "actions": {
                "click": "Save_LSTVISITNOTES"
            },
            "settings": {
                "layout": "icon",
                "icon": "svgIcon=#alpha-icon-save:icon iconButton",
                "disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
                "html": "Save"
            }
        },
        "NewRecord_LSTVISITNOTES": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "NewRecord_LSTVISITNOTES_disabled"
            },
            "actions": {
                "click": "NewRecord_LSTVISITNOTES"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
                "disabledIcon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
                "html": "New"
            }
        },
        "DeleteRecord_LSTVISITNOTES": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "DeleteRecord_LSTVISITNOTES_disabled"
            },
            "actions": {
                "click": "DeleteRecord_LSTVISITNOTES"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-removeCircle:icon iconButton",
                "disabledIcon": "svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton",
                "html": "Delete"
            }
        },
        "Reset_LSTVISITNOTES": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "Reset_LSTVISITNOTES_disabled"
            },
            "actions": {
                "click": "Reset_LSTVISITNOTES"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-undo:icon iconButton",
                "disabledIcon": "svgIcon=#alpha-icon-undo:icon iconDisabled iconButton",
                "html": "Reset"
            }
        },
        "Synchronize_LSTVISITNOTES": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "Synchronize_LSTVISITNOTES_disabled"
            },
            "actions": {
                "click": "Synchronize_LSTVISITNOTES"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-save:icon iconButton",
                "disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
                "html": "Sync"
            }
        },
        "RefreshList_LSTVISITNOTES": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "RefreshList_LSTVISITNOTES_disabled"
            },
            "actions": {
                "click": "RefreshList_LSTVISITNOTES"
            },
            "settings": {
                "layout": "icon",
                "icon": "svgIcon=#alpha-icon-refresh:icon",
                "disabledIcon": "svgIcon=#alpha-icon-refresh:icon iconDisabled",
                "html": "Refresh List"
            }
        },
        "DeleteStorage_LSTVISITNOTES": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "DeleteStorage_LSTVISITNOTES_disabled"
            },
            "actions": {
                "click": "DeleteStorage_LSTVISITNOTES"
            },
            "settings": {
                "layout": "icon text",
                "html": "Delete Storage"
            }
        },
        "DumpStorage_LSTVISITNOTES": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {
                "disabled": "DumpStorage_LSTVISITNOTES_disabled"
            },
            "actions": {
                "click": "DumpStorage_LSTVISITNOTES"
            },
            "settings": {
                "layout": "icon text",
                "html": "Dump Storage"
            }
        }
    },
    "actions": {
        "Save_LSTVISITNOTES": function(data) {var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');
if(lObj.selection[0] != 'undefined') { 
	lObj._selectedRow = lObj.selection[0];
}
lObj.updateListFromUXControls();},
        "NewRecord_LSTVISITNOTES": function(data) {var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');
lObj.newDetailViewRecord();
DLG1_DlgObj.showContainerWindow(this,'WINDOW_13');},
        "DeleteRecord_LSTVISITNOTES": function(data) {var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');
lObj.deleteRow();},
        "Reset_LSTVISITNOTES": function(data) {var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');
lObj.resetForm({prompt: true});},
        "Synchronize_LSTVISITNOTES": function(data) {DLG1_DlgObj.saveListEdits('LSTVISITNOTES',{rows: 'allRows', ajax: { timeOut: 15000, onAjaxFail: function() { } , onDeviceOffline: function() { } } });},
        "RefreshList_LSTVISITNOTES": function(data) {DLG1_DlgObj.refreshListData('LSTVISITNOTES');},
        "DeleteStorage_LSTVISITNOTES": function(data) {var ls = DLG1_DlgObj._localStorageSettings;
DLG1_DlgObj._persistToLocalStorageInitializeKeys(ls,'LSTVISITNOTES',true);
var obj = DLG1_DlgObj._ls_getData('lists:t');
DLG1_DlgObj._ls_deleteKeys(obj);},
        "DumpStorage_LSTVISITNOTES": function(data) {DLG1_DlgObj.__dumpListStorage('LSTVISITNOTES','dsdas',false,'DLG1.V.R1.',false);}
    },
    "layout": "Layout1",
    "layouts": {
        "Layout1": {
            "lines": [
                {
                    "before": {
                        "items": [
                            "NewRecord_LSTVISITNOTES",
                            "Save_LSTVISITNOTES"
                        ]
                    },
                    "middle": {
                        "items": [
                            "Reset_LSTVISITNOTES",
                            "DeleteRecord_LSTVISITNOTES"
                        ]
                    },
                    "after": {
                        "items": [
                            "Synchronize_LSTVISITNOTES"
                        ]
                    }
                }
            ]
        }
    },
    "disclosures": {}
},
	"data": {
	"Save_LSTVISITNOTES_disabled": "",
	"NewRecord_LSTVISITNOTES_disabled": "",
	"DeleteRecord_LSTVISITNOTES_disabled": "",
	"Reset_LSTVISITNOTES_disabled": "",
	"Synchronize_LSTVISITNOTES_disabled": "",
	"RefreshList_LSTVISITNOTES_disabled": "",
	"DeleteStorage_LSTVISITNOTES_disabled": "",
	"DumpStorage_LSTVISITNOTES_disabled": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_16"
}
DLG1_DlgObj._controlBars['CONTROLBAR_23'] = {
	"cb": {
		"controlBarProperties": {
			"edge": "bottom",
			"javascript": {
			},
			"disclosure": {
				"animation": {
					"duration": 300
				}
			},
			"selectActiveLayoutDynamically": false,
			"refreshOnContainerResize": true,
			"animateRefresh": false,
			"animationType": "slide-left",
			"animationDuration": "200",
			"animationTween": "ease-in-out",
			"showSystemCommentsInJavascript": true
		},
		"actions": [
		{
			"name": "Save_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\n\r\n\r\nif(lObj.selection[0] != 'undefined') { \r\n\tlObj._selectedRow = lObj.selection[0];\r\n}\r\n\r\nlObj.updateListFromUXControls();"
		},
		{
			"name": "NewRecord_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.newDetailViewRecord();\r\n\r\nDLG1_DlgObj.showContainerWindow(this,'WINDOW_13');",
			"editorstatejson": "{\r\n\t\"start\": 590,\r\n\t\"end\": 645\r\n}"
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.deleteRow();"
		},
		{
			"name": "Reset_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.resetForm({prompt: true});"
		},
		{
			"name": "Synchronize_LSTVISITNOTES",
			"javascript": "//DLG1_DlgObj.saveListEdits('LSTVISITNOTES',{rows: 'allRows'});\r\n  DLG1_DlgObj.saveListEdits('LSTVISITNOTES',{rows: 'allRows', ajax: { timeOut: 15000, onAjaxFail: function() { } , onDeviceOffline: function() { } } });"
		},
		{
			"name": "RefreshList_LSTVISITNOTES",
			"javascript": "DLG1_DlgObj.refreshListData('LSTVISITNOTES');"
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES",
			"javascript": "var ls = DLG1_DlgObj._localStorageSettings;\r\nDLG1_DlgObj._persistToLocalStorageInitializeKeys(ls,'LSTVISITNOTES',true);\r\n\r\nvar obj = DLG1_DlgObj._ls_getData('lists:t');\r\nDLG1_DlgObj._ls_deleteKeys(obj);"
		},
		{
			"name": "DumpStorage_LSTVISITNOTES",
			"javascript": "DLG1_DlgObj.__dumpListStorage('LSTVISITNOTES','dsdas',false,'DLG1.V.R1.',false);"
		}],
		"items": [
		{
			"name": "Save_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image only",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Save",
					"bind": {
						"disabled": "Save_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Save_LSTVISITNOTES"
			}
		},
		{
			"name": "NewRecord_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"html": "New",
					"bind": {
						"disabled": "NewRecord_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "NewRecord_LSTVISITNOTES"
			}
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-removeCircle:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton",
					"html": "Delete",
					"bind": {
						"disabled": "DeleteRecord_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DeleteRecord_LSTVISITNOTES"
			}
		},
		{
			"name": "Reset_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-undo:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-undo:icon iconDisabled iconButton",
					"html": "Reset",
					"bind": {
						"disabled": "Reset_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Reset_LSTVISITNOTES"
			}
		},
		{
			"name": "Synchronize_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Sync",
					"bind": {
						"disabled": "Synchronize_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Synchronize_LSTVISITNOTES"
			}
		},
		{
			"name": "RefreshList_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image only",
					"icon": "svgIcon=#alpha-icon-refresh:icon",
					"disabledIcon": "svgIcon=#alpha-icon-refresh:icon iconDisabled",
					"html": "Refresh List",
					"bind": {
						"disabled": "RefreshList_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "RefreshList_LSTVISITNOTES"
			}
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"html": "Delete Storage",
					"bind": {
						"disabled": "DeleteStorage_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DeleteStorage_LSTVISITNOTES"
			}
		},
		{
			"name": "DumpStorage_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"html": "Dump Storage",
					"bind": {
						"disabled": "DumpStorage_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DumpStorage_LSTVISITNOTES"
			}
		}],
		"javascriptLocal": [],
		"data": [
		{
			"name": "Save_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true) && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "NewRecord_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\') && (dialog.listRow.LSTVISITNOTES.isRowSelected == true));'}"
		},
		{
			"name": "Reset_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "Synchronize_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.list.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "RefreshList_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.list.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return ;'}"
		},
		{
			"name": "DumpStorage_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return ;'}"
		}],
		"layouts": [
		{
			"name": "Layout1",
			"default": false,
			"lines": [
			{
				"before": "NewRecord_LSTVISITNOTES,Save_LSTVISITNOTES",
				"middle": "Reset_LSTVISITNOTES,DeleteRecord_LSTVISITNOTES",
				"after": "Synchronize_LSTVISITNOTES",
				"linetype": "Default"
			}]
		}],
		"disclosures": []
	},
	"_state": {
		"showPane": {
			"css": true,
			"javascript": true,
			"items": true,
			"preview": true
		},
		"selected_item_C": "2\r\n",
		"selected_layout_C": "1\r\n",
		"selected_layoutLine_c": "1",
		"cssMode": 1,
		"jsMode": 1,
		"mode_items": "Filter",
		"mode_actions": "Filter",
		"mode_Layouts": "Filter",
		"mode_disclosures": "Filter",
		"previewSize": "433px",
		"tabPage": "Actions",
		"selected_action_C": "2\r\n"
	},
	"settings": {
    "_name": "CONTROLBAR_23",
    "className": "DLG1_CONTROLBAR_23",
    "disclosuresClassName": "DLG1_CONTROLBAR_23",
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) { 
	txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) { 
	txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') { 
	if(txt == '__zero') { txt = '0'}
	else if(txt == false) txt = '';
	else if(txt == 0) txt = '0';
	else txt = '';
}
return txt
},
    "theme": "Alpha-Magenta",
    "edge": "bottom",
    "items": {
        "View BAsket": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_c89e0486_5ff0_48f7_91e4_8ea26907b4b3"
            },
            "settings": {
                "layout": "text icon",
                "theme": "Alpha-Magenta:right",
                "html": "View BAsket"
            }
        }
    },
    "actions": {
        "View_BAsket_onClick": function(data) {alert('this action not yet defined');},
        "SystemAction_c89e0486_5ff0_48f7_91e4_8ea26907b4b3": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_BASKETDET');}
    },
    "layout": "Default",
    "layouts": {
        "Default": {
            "lines": [
                {
                    "before": {
                        "items": []
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": [
                            "View BAsket"
                        ]
                    }
                }
            ]
        }
    },
    "disclosures": {}
},
	"data": {
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_23"
}
DLG1_DlgObj._controlBars['CONTROLBAR_24'] = {
	"cb": {
		"controlBarProperties": {
			"edge": "bottom",
			"javascript": {
			},
			"disclosure": {
				"animation": {
					"duration": 300
				}
			},
			"selectActiveLayoutDynamically": false,
			"refreshOnContainerResize": true,
			"animateRefresh": false,
			"animationType": "slide-left",
			"animationDuration": "200",
			"animationTween": "ease-in-out",
			"showSystemCommentsInJavascript": true
		},
		"actions": [
		{
			"name": "Save_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\n\r\n\r\nif(lObj.selection[0] != 'undefined') { \r\n\tlObj._selectedRow = lObj.selection[0];\r\n}\r\n\r\nlObj.updateListFromUXControls();"
		},
		{
			"name": "NewRecord_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.newDetailViewRecord();\r\n\r\nDLG1_DlgObj.showContainerWindow(this,'WINDOW_13');",
			"editorstatejson": "{\r\n\t\"start\": 590,\r\n\t\"end\": 645\r\n}"
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.deleteRow();"
		},
		{
			"name": "Reset_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.resetForm({prompt: true});"
		},
		{
			"name": "Synchronize_LSTVISITNOTES",
			"javascript": "//DLG1_DlgObj.saveListEdits('LSTVISITNOTES',{rows: 'allRows'});\r\n  DLG1_DlgObj.saveListEdits('LSTVISITNOTES',{rows: 'allRows', ajax: { timeOut: 15000, onAjaxFail: function() { } , onDeviceOffline: function() { } } });"
		},
		{
			"name": "RefreshList_LSTVISITNOTES",
			"javascript": "DLG1_DlgObj.refreshListData('LSTVISITNOTES');"
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES",
			"javascript": "var ls = DLG1_DlgObj._localStorageSettings;\r\nDLG1_DlgObj._persistToLocalStorageInitializeKeys(ls,'LSTVISITNOTES',true);\r\n\r\nvar obj = DLG1_DlgObj._ls_getData('lists:t');\r\nDLG1_DlgObj._ls_deleteKeys(obj);"
		},
		{
			"name": "DumpStorage_LSTVISITNOTES",
			"javascript": "DLG1_DlgObj.__dumpListStorage('LSTVISITNOTES','dsdas',false,'DLG1.V.R1.',false);"
		}],
		"items": [
		{
			"name": "Save_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image only",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Save",
					"bind": {
						"disabled": "Save_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Save_LSTVISITNOTES"
			}
		},
		{
			"name": "NewRecord_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"html": "New",
					"bind": {
						"disabled": "NewRecord_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "NewRecord_LSTVISITNOTES"
			}
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-removeCircle:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton",
					"html": "Delete",
					"bind": {
						"disabled": "DeleteRecord_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DeleteRecord_LSTVISITNOTES"
			}
		},
		{
			"name": "Reset_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-undo:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-undo:icon iconDisabled iconButton",
					"html": "Reset",
					"bind": {
						"disabled": "Reset_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Reset_LSTVISITNOTES"
			}
		},
		{
			"name": "Synchronize_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Sync",
					"bind": {
						"disabled": "Synchronize_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Synchronize_LSTVISITNOTES"
			}
		},
		{
			"name": "RefreshList_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image only",
					"icon": "svgIcon=#alpha-icon-refresh:icon",
					"disabledIcon": "svgIcon=#alpha-icon-refresh:icon iconDisabled",
					"html": "Refresh List",
					"bind": {
						"disabled": "RefreshList_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "RefreshList_LSTVISITNOTES"
			}
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"html": "Delete Storage",
					"bind": {
						"disabled": "DeleteStorage_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DeleteStorage_LSTVISITNOTES"
			}
		},
		{
			"name": "DumpStorage_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"html": "Dump Storage",
					"bind": {
						"disabled": "DumpStorage_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DumpStorage_LSTVISITNOTES"
			}
		}],
		"javascriptLocal": [],
		"data": [
		{
			"name": "Save_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true) && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "NewRecord_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\') && (dialog.listRow.LSTVISITNOTES.isRowSelected == true));'}"
		},
		{
			"name": "Reset_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "Synchronize_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.list.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "RefreshList_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.list.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return ;'}"
		},
		{
			"name": "DumpStorage_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return ;'}"
		}],
		"layouts": [
		{
			"name": "Layout1",
			"default": false,
			"lines": [
			{
				"before": "NewRecord_LSTVISITNOTES,Save_LSTVISITNOTES",
				"middle": "Reset_LSTVISITNOTES,DeleteRecord_LSTVISITNOTES",
				"after": "Synchronize_LSTVISITNOTES",
				"linetype": "Default"
			}]
		}],
		"disclosures": []
	},
	"_state": {
		"showPane": {
			"css": true,
			"javascript": true,
			"items": true,
			"preview": true
		},
		"selected_item_C": "2\r\n",
		"selected_layout_C": "1\r\n",
		"selected_layoutLine_c": "1",
		"cssMode": 1,
		"jsMode": 1,
		"mode_items": "Filter",
		"mode_actions": "Filter",
		"mode_Layouts": "Filter",
		"mode_disclosures": "Filter",
		"previewSize": "433px",
		"tabPage": "Actions",
		"selected_action_C": "2\r\n"
	},
	"settings": {
    "_name": "CONTROLBAR_24",
    "className": "DLG1_CONTROLBAR_24",
    "disclosuresClassName": "DLG1_CONTROLBAR_24",
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) { 
	txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) { 
	txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') { 
	if(txt == '__zero') { txt = '0'}
	else if(txt == false) txt = '';
	else if(txt == 0) txt = '0';
	else txt = '';
}
return txt
},
    "theme": "Alpha-Magenta",
    "edge": "top",
    "items": {
        "Back": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_4d6ec944_3761_41e9_99cc_e86d1c0db8a8"
            },
            "settings": {
                "layout": "icon text",
                "theme": "Alpha-Magenta:left",
                "html": "Back"
            }
        },
        "Add_Basket": {
            "size": "",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Add_Basket_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Add_Basket"
            }
        }
    },
    "actions": {
        "Back_onClick": function(data) {alert('this action not yet defined');},
        "Add_Basket_onClick": function(data) {DLG1_DlgObj.showContainerWindow(this,'WINDOW_BASKET');},
        "SystemAction_4d6ec944_3761_41e9_99cc_e86d1c0db8a8": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_BASKET');}
    },
    "layout": "Default",
    "layouts": {
        "Default": {
            "lines": [
                {
                    "before": {
                        "items": [
                            "Back"
                        ]
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": [
                            "Add_Basket"
                        ]
                    }
                }
            ]
        }
    },
    "disclosures": {}
},
	"data": {
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_24"
}
DLG1_DlgObj._controlBars['CONTROLBAR_31'] = {
	"cb": {
		"controlBarProperties": {
			"edge": "bottom",
			"javascript": {
			},
			"disclosure": {
				"animation": {
					"duration": 300
				}
			},
			"selectActiveLayoutDynamically": false,
			"refreshOnContainerResize": true,
			"animateRefresh": false,
			"animationType": "slide-left",
			"animationDuration": "200",
			"animationTween": "ease-in-out",
			"showSystemCommentsInJavascript": true
		},
		"actions": [
		{
			"name": "Save_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\n\r\n\r\nif(lObj.selection[0] != 'undefined') { \r\n\tlObj._selectedRow = lObj.selection[0];\r\n}\r\n\r\nlObj.updateListFromUXControls();"
		},
		{
			"name": "NewRecord_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.newDetailViewRecord();\r\n\r\nDLG1_DlgObj.showContainerWindow(this,'WINDOW_13');",
			"editorstatejson": "{\r\n\t\"start\": 590,\r\n\t\"end\": 645\r\n}"
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.deleteRow();"
		},
		{
			"name": "Reset_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.resetForm({prompt: true});"
		},
		{
			"name": "Synchronize_LSTVISITNOTES",
			"javascript": "//DLG1_DlgObj.saveListEdits('LSTVISITNOTES',{rows: 'allRows'});\r\n  DLG1_DlgObj.saveListEdits('LSTVISITNOTES',{rows: 'allRows', ajax: { timeOut: 15000, onAjaxFail: function() { } , onDeviceOffline: function() { } } });"
		},
		{
			"name": "RefreshList_LSTVISITNOTES",
			"javascript": "DLG1_DlgObj.refreshListData('LSTVISITNOTES');"
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES",
			"javascript": "var ls = DLG1_DlgObj._localStorageSettings;\r\nDLG1_DlgObj._persistToLocalStorageInitializeKeys(ls,'LSTVISITNOTES',true);\r\n\r\nvar obj = DLG1_DlgObj._ls_getData('lists:t');\r\nDLG1_DlgObj._ls_deleteKeys(obj);"
		},
		{
			"name": "DumpStorage_LSTVISITNOTES",
			"javascript": "DLG1_DlgObj.__dumpListStorage('LSTVISITNOTES','dsdas',false,'DLG1.V.R1.',false);"
		}],
		"items": [
		{
			"name": "Save_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image only",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Save",
					"bind": {
						"disabled": "Save_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Save_LSTVISITNOTES"
			}
		},
		{
			"name": "NewRecord_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"html": "New",
					"bind": {
						"disabled": "NewRecord_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "NewRecord_LSTVISITNOTES"
			}
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-removeCircle:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton",
					"html": "Delete",
					"bind": {
						"disabled": "DeleteRecord_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DeleteRecord_LSTVISITNOTES"
			}
		},
		{
			"name": "Reset_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-undo:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-undo:icon iconDisabled iconButton",
					"html": "Reset",
					"bind": {
						"disabled": "Reset_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Reset_LSTVISITNOTES"
			}
		},
		{
			"name": "Synchronize_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Sync",
					"bind": {
						"disabled": "Synchronize_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Synchronize_LSTVISITNOTES"
			}
		},
		{
			"name": "RefreshList_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image only",
					"icon": "svgIcon=#alpha-icon-refresh:icon",
					"disabledIcon": "svgIcon=#alpha-icon-refresh:icon iconDisabled",
					"html": "Refresh List",
					"bind": {
						"disabled": "RefreshList_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "RefreshList_LSTVISITNOTES"
			}
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"html": "Delete Storage",
					"bind": {
						"disabled": "DeleteStorage_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DeleteStorage_LSTVISITNOTES"
			}
		},
		{
			"name": "DumpStorage_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"html": "Dump Storage",
					"bind": {
						"disabled": "DumpStorage_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DumpStorage_LSTVISITNOTES"
			}
		}],
		"javascriptLocal": [],
		"data": [
		{
			"name": "Save_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true) && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "NewRecord_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\') && (dialog.listRow.LSTVISITNOTES.isRowSelected == true));'}"
		},
		{
			"name": "Reset_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "Synchronize_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.list.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "RefreshList_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.list.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return ;'}"
		},
		{
			"name": "DumpStorage_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return ;'}"
		}],
		"layouts": [
		{
			"name": "Layout1",
			"default": false,
			"lines": [
			{
				"before": "NewRecord_LSTVISITNOTES,Save_LSTVISITNOTES",
				"middle": "Reset_LSTVISITNOTES,DeleteRecord_LSTVISITNOTES",
				"after": "Synchronize_LSTVISITNOTES",
				"linetype": "Default"
			}]
		}],
		"disclosures": []
	},
	"_state": {
		"showPane": {
			"css": true,
			"javascript": true,
			"items": true,
			"preview": true
		},
		"selected_item_C": "2\r\n",
		"selected_layout_C": "1\r\n",
		"selected_layoutLine_c": "1",
		"cssMode": 1,
		"jsMode": 1,
		"mode_items": "Filter",
		"mode_actions": "Filter",
		"mode_Layouts": "Filter",
		"mode_disclosures": "Filter",
		"previewSize": "433px",
		"tabPage": "Actions",
		"selected_action_C": "2\r\n"
	},
	"settings": {
    "_name": "CONTROLBAR_31",
    "className": "DLG1_CONTROLBAR_31",
    "disclosuresClassName": "DLG1_CONTROLBAR_31",
    "__listNavigationState": function(listName) {var lObj = DLG1_DlgObj.getControl(listName);
if(!lObj) return false;
var ls = lObj._state;
var flagFirst = true;
var flagPrev = true; 
var flagNext = true; 
var flagLast = true; 
if(ls.pageCount == 1) { 
	flagFirst = false;
	flagPrev = false;
	flagNext = false;
	flagLast = false;
} else { 
	if(ls.page ==1) { 
		flagFirst = false;
		flagPrev = false;
	} else if (ls.page == ls.pageCount) { 
		flagNext = false;
		flagLast = false;
	}
};
var txtPageNumber = '' + ls.page + '/' + ls.pageCount;
var _d = this.data;
var name;
name = 'LISTNAV_' + listName.toUpperCase() + '_first';
if(typeof _d[name] != 'undefined') _d[name] = !flagFirst;	
name = 'LISTNAV_' + listName.toUpperCase() + '_prev';
if(typeof _d[name] != 'undefined') _d[name] = !flagPrev;	
name = 'LISTNAV_' + listName.toUpperCase() + '_next';
if(typeof _d[name] != 'undefined') _d[name] = !flagNext;	
name = 'LISTNAV_' + listName.toUpperCase() + '_last';
if(typeof _d[name] != 'undefined') _d[name] = !flagLast;	
name = 'LISTNAV_' + listName.toUpperCase() + '_pageNumber';
if(typeof _d[name] != 'undefined') _d[name] = txtPageNumber;	
this.refresh();
},
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) { 
	txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) { 
	txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') { 
	if(txt == '__zero') { txt = '0'}
	else if(txt == false) txt = '';
	else if(txt == 0) txt = '0';
	else txt = '';
}
return txt
},
    "theme": "Alpha-Magenta",
    "edge": "top",
    "items": {
        "Receipts": {
            "size": "150px",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Receipts_onClick"
            },
            "settings": {
                "layout": "icon text",
                "theme": "Alpha-Magenta:base",
                "icon": "svgIcon=#alpha-icon-books:icon,24{ fill: #f11313;}",
                "style": "text-align: left;",
                "html": "Receipts"
            }
        },
        "Baskets": {
            "size": "150px",
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Baskets_onClick"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-basketFullSolid:icon,24{ fill: #f31515;}",
                "style": "text-align: left;",
                "html": "Bundles"
            }
        },
        "menu": {
            "type": "disclosure-button",
            "disclosure": {
                "name": "Disclosure1",
                "type": "flyout-element",
                "size": "none",
                "animation": {
                    "duration": 200,
                    "tween": "ease-in-out"
                },
                "autoHide": true
            },
            "autoHideDisclosure": "always",
            "settings": {
                "show": {
                    "theme": "Alpha-Magenta:confirm",
                    "layout": "icon",
                    "html": "Button",
                    "icon": "svgIcon=#alpha-icon-bars:icon,24{ fill: #f21111;}"
                },
                "hide": {
                    "theme": "Alpha-Magenta:confirm",
                    "layout": "icon",
                    "html": "Button",
                    "icon": "svgIcon=#alpha-icon-bars:icon,24{ fill: #f21111;}"
                }
            }
        },
        "Disclosure_button1": {
            "type": "disclosure-button",
            "disclosure": {
                "name": "injectiblesearch",
                "type": "flyout-element",
                "size": "none",
                "animation": {
                    "duration": 200,
                    "tween": "ease-in-out"
                },
                "autoHide": true
            },
            "autoHideDisclosure": "always",
            "settings": {
                "show": {
                    "theme": "Alpha-Magenta",
                    "layout": "icon text",
                    "style": "text-align: left;",
                    "html": "Filter",
                    "icon": "svgIcon=#alpha-icon-filterFull:icon,24{ fill: #f21010;}"
                },
                "hide": {
                    "theme": "Alpha-Magenta",
                    "layout": "icon text",
                    "style": "text-align: left;",
                    "html": "Filter",
                    "icon": "svgIcon=#alpha-icon-filterFull:icon,24{ fill: #f21010;}"
                }
            }
        },
        "Add_Items": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Add_Items_onClick"
            },
            "settings": {
                "layout": "icon text",
                "icon": "svgIcon=#alpha-icon-bagCheckSolid:icon,24{ fill: #f50d0d;}",
                "html": "Cart Items"
            }
        },
        "Cancel": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "Cancel_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "Cancel"
            }
        },
        "test": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "test_onClick"
            },
            "settings": {
                "layout": "text",
                "html": "test"
            }
        }
    },
    "actions": {
        "Receipts_onClick": function(data) {var mmdata = DLG1_DlgObj.getListDataAll();
console.log(mmdata);
function s0(obj){
 DLG1_DlgObj.runAction('showwait1');
 var lObj = DLG1_DlgObj.getControl('LSTITEMS');
 lObj.setFilter(false);
 lObj._selectedRow = lObj.selection[0];
 lObj._selectedRow = lObj.selection[1];
 obj.next()
}
function s1(obj) {
 var lObj = DLG1_DlgObj.getControl('LSTITEMS');
 mMedrep = DLG1_DlgObj.argumentValue('mMedrepId');
 mmpoiid = DLG1_DlgObj.argumentValue('MPOIID');
 mCmpId = DLG1_DlgObj.getValue('COMPANYID') ;
 mVisitid = DLG1_DlgObj.getValue('list::LSTVISITHEAD::id') ;
 var now = new Date();
 var mFlag = DLG1_DlgObj.getValue('flagadditem');
 if(mFlag == 1){
  DLG1_DlgObj._listRemoveAllRows('LSTSAMPLES');
 }
 if(mFlag == 4){
  DLG1_DlgObj._listRemoveAllRows('lstinvoices');
 }
 if(mFlag == 3){
  DLG1_DlgObj._listRemoveAllRows('lstorders');
 }
 if(mFlag == 2){
  DLG1_DlgObj._listRemoveAllRows('LSTDISCUSSED');
  }
 const filteredData = lObj._data.filter(item => Number(item.qty) > 0 || Number(item.bonus) > 0 || item.discusedtype !== '' || item.discusedcoment !== 0);
 console.log('filtered');
 console.log(filteredData);
 var i;
 for (i = 0; i < filteredData.length; i++) {
  mLstid = filteredData[i].id;
  mFreeProdid = filteredData[i].bonusitem;
  mQty = filteredData[i].qty;
  if(mQty === null) mQty = '' ;
  mBonus = filteredData[i].bonus;
  if(mBonus === null) mBonus = '' ;
  mTotq = Number(mBonus) + Number(mQty)
  if(mTotq>0){
   if(mFreeProdid === null) mFreeProdid="";
   mProdid = filteredData[i].id;
   if(mProdid === null) mProdid="";
   mProductCode = '';
   mDescription = filteredData[i].description;
   if(mDescription === null) mDescription = '' ;
   mPrice = filteredData[i].price ;
   if(mPrice===null) mPrice='' ;
   mUnitPrice = filteredData[i].price;
   if(mUnitPrice === null) mUnitPrice='' ;
   mDiscount = lObj._data[i].discount;
   if(mDiscount === null) mDiscount='' ;
   mVat =  lObj._data[i].tva;
   if(mVat===null) mVat='';
  if(mFlag == 1){
   var listObj = DLG1_DlgObj.getControl('LSTSAMPLES');
   var data =  {prodid: mProdid, visitid: mVisitid, qty: mQty, proddesc: mDescription,company_id: mCmpId} ;
    listObj.addTableRow(data);
  }
   if(mFlag == 4){
    var listObj = DLG1_DlgObj.getControl('lstinvoices');
    var data =  {bonusitemid: mFreeProdid, itemid: mProdid, itemcode: mProdid, Visit_id: mVisitid, description: mDescription,qty: mQty,Bonusqty: mBonus,unitprice :mUnitPrice,discount :mDiscount ,vat :mVat,company_id: mCmpId} ;
     listObj.addTableRow(data);
   }
   if(mFlag == 3){
    var listObj = DLG1_DlgObj.getControl('lstorders');
    var data =  {bonusitemid: mFreeProdid, itemid: mProdid, visitid: mVisitid, description: mDescription, discount: mDiscount, qty: mQty,price :mPrice, vat: mVat,bonusqty: mBonus,company_id: mCmpId} ;
     listObj.addTableRow(data);
   }
  }
  if (mFlag == 2) {
   mProdid = lObj._data[i].id;
   if(mProdid === null) mProdid="";
   mProductCode = '';
   mDescription = lObj._data[i].description;
   if(mDescription === null) mDescription = '' ;
   mDiscussedtype= lObj._data[i].discusedtype ;
   mDiscussedComent=lObj._data[i].discusedcoment ;
   if(mDiscussedComent === null) mDiscussedComent = '' ;
   if(mDiscussedComent != '' || Number(mDiscussedtype) !=0 ) {
    var listObj = DLG1_DlgObj.getControl('LSTDISCUSSED');
    var data =  {product_id: mProdid, Visit_id: mVisitid, proddesc: mDescription,discussedtype: mDiscussedtype,coment: mDiscussedComent,company_id: mCmpId} ;
     listObj.addTableRow(data);
    }
  }
 };
 obj.next()
}
function s2(obj){
 var mFlag = DLG1_DlgObj.getValue('flagadditem');
 if(mFlag == 1){
  DLG1_DlgObj.panelSetActive('PANELCARD_18');
 }
 if(mFlag == 4){
  DLG1_DlgObj.panelSetActive('PANELCARD_18');
 }
 if(mFlag == 3){
  DLG1_DlgObj.panelSetActive('PANELCARD_18');
 }
 if(mFlag == 2){
  DLG1_DlgObj.panelSetActive('PANELCARD_18');
 }
 obj.next()
}
function s3(obj) {
 obj.next()
}
var actions  = [s0,s1,s2,s3] ;
var done = function() {
 alert('Items Added') ;
 var mmdata = DLG1_DlgObj.getListDataAll();
 console.log(mmdata);
 setTimeout(function(){
  DLG1_DlgObj.hideWaitMessage();
  },500)
 } ;
var stopped = function() { alert('execution was stopped') } ;
A5.runChain(actions,done,stopped);},
        "Baskets_onClick": function(data) {DLG1_DlgObj.panelSetActive('PANELCARD_BASKET');},
        "Add_Items_onClick": function(data) {additems() ;
return;
var myobj = DLG1_DlgObj.getControl('LSTVISITHEAD');
console.log('visit head control');
console.log(myobj);
var data = DLG1_DlgObj.getListData('LSTVISITHEAD');
console.log('header data');
console.log(data);
  var lObjV = DLG1_DlgObj.getControl('LSTVISITHEAD');
  console.log('selected row num');
console.log(lObjV.selection[0])
function s0(obj){
 DLG1_DlgObj.runAction('showwait1');
 var lObj = DLG1_DlgObj.getControl('LSTITEMS');
 lObj.setFilter(false);
 lObj._selectedRow = lObj.selection[0];
 lObj._selectedRow = lObj.selection[1];
 obj.next()
}
function s1(obj) {
 var lObj = DLG1_DlgObj.getControl('LSTITEMS');
 mMedrep = DLG1_DlgObj.argumentValue('mMedrepId');
 mmpoiid = DLG1_DlgObj.argumentValue('MPOIID');
 mCmpId = DLG1_DlgObj.getValue('COMPANYID') ;
 mVisitid = DLG1_DlgObj.getValue('list::LSTVISITHEAD::id') ;
 var now = new Date();
 var mFlag = DLG1_DlgObj.getValue('flagadditem');
 if(mFlag == 1){
  DLG1_DlgObj._listRemoveAllRows('LSTSAMPLES');
 }
 if(mFlag == 4){
 }
 if(mFlag == 3){
 }
 if(mFlag == 2){
  DLG1_DlgObj._listRemoveAllRows('LSTDISCUSSED');
  }
 const filteredData = lObj._data.filter(item => Number(item.qty) > 0 || Number(item.bonus) > 0 || item.discusedtype !== '' || item.discusedcoment !== 0);
 console.log('filtered');
 console.log(filteredData);
 var i;
 for (i = 0; i < filteredData.length; i++) {
  mLstid = filteredData[i].id;
  mFreeProdid = filteredData[i].bonusitem;
  msellunit = filteredData[i].sellunit;
  if(msellunit === null) msellunit = '' ;
  mbonusunit= filteredData[i].bonusunit;
  if(mbonusunit === null) mbonusunit = '' ;
  mQty = filteredData[i].qty;
  if(mQty === null) mQty = '' ;
  mBonus = filteredData[i].bonus;
  if(mBonus === null) mBonus = '' ;
  mqteinpack = filteredData[i].qteinpack;
  if(mqteinpack === null) mqteinpack = '' ;
  mbonusinpack =  filteredData[i].bonusinpack;
  if(mbonusinpack === null) mbonusinpack = '' ;
  mTotq = Number(mBonus) + Number(mQty)
  if(mTotq>0){
   if(mFreeProdid === null) mFreeProdid="";
   mProdid = filteredData[i].id;
   if(mProdid === null) mProdid="";
   mProductCode = filteredData[i].product_code;
   if(mProductCode === null) mProductCode="";
   mDescription = filteredData[i].description;
   if(mDescription === null) mDescription = '' ;
   mPrice = filteredData[i].price ;
   if(mPrice===null) mPrice='' ;
   mUnitPrice = filteredData[i].price;
   if(mUnitPrice === null) mUnitPrice='' ;
   mDiscount = lObj._data[i].discount;
   if(mDiscount === null) mDiscount='' ;
   mVat =  lObj._data[i].tva;
   if(mVat===null) mVat='';
   mlinetot = mQty*mUnitPrice*((100-mDiscount)/100);
   mlinevat = (mQty*mUnitPrice*((100-mDiscount)/100))*mVat/100
  if(mFlag == 1){
   var listObj = DLG1_DlgObj.getControl('LSTSAMPLES');
   var data =  {prodid: mProdid, visitid: mVisitid, qty: mQty, proddesc: mDescription,company_id: mCmpId} ;
    listObj.addTableRow(data);
  }
   if(mFlag == 4){
    var listObj = DLG1_DlgObj.getControl('lstinvoices');
    var data =  {bonusitemid: mFreeProdid, itemid: mProdid, itemcode: mProdid, Visit_id: mVisitid, description: mDescription,qty: mQty,Bonusqty: mBonus,unitprice :mUnitPrice,discount :mDiscount ,vat :mVat,company_id: mCmpId,linetot: mlinetot,linevat :mlinevat,sellunit: msellunit, bonusunit: mbonusunit} ;
     listObj.addTableRow(data);
   }
   if(mFlag == 3){
    var listObj = DLG1_DlgObj.getControl('lstorders');
    var data =  {bonusitemid: mFreeProdid, itemid: mProdid, visitid: mVisitid, description: mDescription, discount: mDiscount, qty: mQty,price :mPrice, vat: mVat,bonusqty: mBonus,company_id: mCmpId,totvat: mlinevat,totline: mlinetot,sellunit: msellunit,bonusunit: mbonusunit ,qteinpack: mqteinpack ,bonusinpack: mbonusinpack , product_code: mProductCode} ;
     listObj.addTableRow(data);
   }
  }
  if (mFlag == 2) {
   mProdid = lObj._data[i].id;
   if(mProdid === null) mProdid="";
   mProductCode = '';
   mDescription = lObj._data[i].description;
   if(mDescription === null) mDescription = '' ;
   mDiscussedtype= lObj._data[i].discusedtype ;
   mDiscussedComent=lObj._data[i].discusedcoment ;
   if(mDiscussedComent === null) mDiscussedComent = '' ;
   if(mDiscussedComent != '' || Number(mDiscussedtype) !=0 ) {
    var listObj = DLG1_DlgObj.getControl('LSTDISCUSSED');
    var data =  {product_id: mProdid, Visit_id: mVisitid, proddesc: mDescription,discussedtype: mDiscussedtype,coment: mDiscussedComent,company_id: mCmpId} ;
     listObj.addTableRow(data);
    }
  }
 };
 obj.next()
}
function s2(obj){
 var mFlag = DLG1_DlgObj.getValue('flagadditem');
 if(mFlag == 1){
  DLG1_DlgObj.panelSetActive('PANELCARD_4');
 }
 if(mFlag == 4){
  DLG1_DlgObj.panelSetActive('PANELCARD_INVOICES');
 }
 if(mFlag == 3){
  DLG1_DlgObj.panelSetActive('PANELCARD_13');
 }
 if(mFlag == 2){
  DLG1_DlgObj.panelSetActive('PANELCARD_4');
 }
 obj.next()
}
function s3(obj) {
 obj.next()
}
var actions  = [s0,s1,s2,s3] ;
var done = function() {
 alert('Items Added') ;
 setTimeout(function(){
  DLG1_DlgObj.hideWaitMessage();
  },500)
 } ;
var stopped = function() { alert('execution was stopped') } ;
A5.runChain(actions,done,stopped);},
        "Cancel_onClick": function(data) {var answer = confirm("Do you want to return without saving?");
if (answer) {
    DLG1_DlgObj.panelSetActive('PANELCARD_4');
} else {
}},
        "test_onClick": function(data) {console.log(this.data);
alert('this action not yet defined');}
    },
    "layout": "Default",
    "layouts": {
        "Default": {
            "lines": [
                {
                    "before": {
                        "items": [
                            "Add_Items"
                        ]
                    },
                    "middle": {
                        "items": [
                            "Cancel"
                        ]
                    },
                    "after": {
                        "items": [
                            "menu"
                        ]
                    }
                },
                {
                    "before": {
                        "items": [
                            "test"
                        ]
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": []
                    }
                }
            ]
        },
        "searchlayout": {
            "lines": [
                {
                    "before": {
                        "items": [
                            "Receipts"
                        ]
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": []
                    }
                }
            ]
        }
    },
    "disclosures": {
        "Disclosure1": {
            "html": "[Receipts] [Disclosure_button1]",
            "type": "template"
        },
        "injectiblesearch": {}
    }
},
	"data": {
	"msubgrp": "",
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_31"
}
DLG1_DlgObj._controlBars['CONTROLBAR_29'] = {
	"cb": {
		"controlBarProperties": {
			"edge": "bottom",
			"javascript": {
			},
			"disclosure": {
				"animation": {
					"duration": 300
				}
			},
			"selectActiveLayoutDynamically": false,
			"refreshOnContainerResize": true,
			"animateRefresh": false,
			"animationType": "slide-left",
			"animationDuration": "200",
			"animationTween": "ease-in-out",
			"showSystemCommentsInJavascript": true
		},
		"actions": [
		{
			"name": "Save_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\n\r\n\r\nif(lObj.selection[0] != 'undefined') { \r\n\tlObj._selectedRow = lObj.selection[0];\r\n}\r\n\r\nlObj.updateListFromUXControls();"
		},
		{
			"name": "NewRecord_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.newDetailViewRecord();\r\n\r\nDLG1_DlgObj.showContainerWindow(this,'WINDOW_13');",
			"editorstatejson": "{\r\n\t\"start\": 590,\r\n\t\"end\": 645\r\n}"
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.deleteRow();"
		},
		{
			"name": "Reset_LSTVISITNOTES",
			"javascript": "var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');\r\nlObj.resetForm({prompt: true});"
		},
		{
			"name": "Synchronize_LSTVISITNOTES",
			"javascript": "//DLG1_DlgObj.saveListEdits('LSTVISITNOTES',{rows: 'allRows'});\r\n  DLG1_DlgObj.saveListEdits('LSTVISITNOTES',{rows: 'allRows', ajax: { timeOut: 15000, onAjaxFail: function() { } , onDeviceOffline: function() { } } });"
		},
		{
			"name": "RefreshList_LSTVISITNOTES",
			"javascript": "DLG1_DlgObj.refreshListData('LSTVISITNOTES');"
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES",
			"javascript": "var ls = DLG1_DlgObj._localStorageSettings;\r\nDLG1_DlgObj._persistToLocalStorageInitializeKeys(ls,'LSTVISITNOTES',true);\r\n\r\nvar obj = DLG1_DlgObj._ls_getData('lists:t');\r\nDLG1_DlgObj._ls_deleteKeys(obj);"
		},
		{
			"name": "DumpStorage_LSTVISITNOTES",
			"javascript": "DLG1_DlgObj.__dumpListStorage('LSTVISITNOTES','dsdas',false,'DLG1.V.R1.',false);"
		}],
		"items": [
		{
			"name": "Save_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image only",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Save",
					"bind": {
						"disabled": "Save_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Save_LSTVISITNOTES"
			}
		},
		{
			"name": "NewRecord_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-docAdd:icon iconButton",
					"html": "New",
					"bind": {
						"disabled": "NewRecord_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "NewRecord_LSTVISITNOTES"
			}
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-removeCircle:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-removeCircle:icon iconDisabled iconButton",
					"html": "Delete",
					"bind": {
						"disabled": "DeleteRecord_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DeleteRecord_LSTVISITNOTES"
			}
		},
		{
			"name": "Reset_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-undo:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-undo:icon iconDisabled iconButton",
					"html": "Reset",
					"bind": {
						"disabled": "Reset_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Reset_LSTVISITNOTES"
			}
		},
		{
			"name": "Synchronize_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"icon": "svgIcon=#alpha-icon-save:icon iconButton",
					"disabledIcon": "svgIcon=#alpha-icon-save:icon iconDisabled iconButton",
					"html": "Sync",
					"bind": {
						"disabled": "Synchronize_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "Synchronize_LSTVISITNOTES"
			}
		},
		{
			"name": "RefreshList_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image only",
					"icon": "svgIcon=#alpha-icon-refresh:icon",
					"disabledIcon": "svgIcon=#alpha-icon-refresh:icon iconDisabled",
					"html": "Refresh List",
					"bind": {
						"disabled": "RefreshList_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "RefreshList_LSTVISITNOTES"
			}
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"html": "Delete Storage",
					"bind": {
						"disabled": "DeleteStorage_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DeleteStorage_LSTVISITNOTES"
			}
		},
		{
			"name": "DumpStorage_LSTVISITNOTES",
			"itemType": "button",
			"item": {
				"button": {
					"layout": "Image followed by text",
					"html": "Dump Storage",
					"bind": {
						"disabled": "DumpStorage_LSTVISITNOTES_disabled"
					},
					"specialType": "None",
					"special": {
						"setActivePanel": {
						}
					},
					"autoHideDisclosure": "auto"
				},
				"htmltitle": {
					"bind": {
					},
					"leftOffset": "75px",
					"rightOffset": "75px"
				},
				"edit": {
					"update": "default",
					"bind": {
					},
					"settings": {
						"watermark": {
						}
					}
				}
			},
			"itemAction": {
				"click": "DumpStorage_LSTVISITNOTES"
			}
		}],
		"javascriptLocal": [],
		"data": [
		{
			"name": "Save_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true) && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "NewRecord_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "DeleteRecord_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\') && (dialog.listRow.LSTVISITNOTES.isRowSelected == true));'}"
		},
		{
			"name": "Reset_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "Synchronize_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.list.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "RefreshList_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return !((dialog.list.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != \\'search\\'));'}"
		},
		{
			"name": "DeleteStorage_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return ;'}"
		},
		{
			"name": "DumpStorage_LSTVISITNOTES_disabled",
			"datavalue": "watch:{controlsToWatch: '', initial: '{javascript}true', javascript: ' return ;'}"
		}],
		"layouts": [
		{
			"name": "Layout1",
			"default": false,
			"lines": [
			{
				"before": "NewRecord_LSTVISITNOTES,Save_LSTVISITNOTES",
				"middle": "Reset_LSTVISITNOTES,DeleteRecord_LSTVISITNOTES",
				"after": "Synchronize_LSTVISITNOTES",
				"linetype": "Default"
			}]
		}],
		"disclosures": []
	},
	"_state": {
		"showPane": {
			"css": true,
			"javascript": true,
			"items": true,
			"preview": true
		},
		"selected_item_C": "2\r\n",
		"selected_layout_C": "1\r\n",
		"selected_layoutLine_c": "1",
		"cssMode": 1,
		"jsMode": 1,
		"mode_items": "Filter",
		"mode_actions": "Filter",
		"mode_Layouts": "Filter",
		"mode_disclosures": "Filter",
		"previewSize": "433px",
		"tabPage": "Actions",
		"selected_action_C": "2\r\n"
	},
	"settings": {
    "_name": "CONTROLBAR_29",
    "className": "DLG1_CONTROLBAR_29",
    "disclosuresClassName": "DLG1_CONTROLBAR_29",
    "__badgeText": function(txt,max) {if( (typeof txt == 'string' && txt.toNumber() == txt) ) { 
	txt = txt.toNumber()
}
if(typeof txt == 'number' && txt > max) { 
	txt = max + '+';
}
if(txt == 0 || !txt || txt == 'false' || txt == '__zero') { 
	if(txt == '__zero') { txt = '0'}
	else if(txt == false) txt = '';
	else if(txt == 0) txt = '0';
	else txt = '';
}
return txt
},
    "theme": "Alpha-Magenta",
    "edge": "top",
    "items": {
        "Back": {
            "type": "button",
            "autoHideDisclosure": "auto",
            "bind": {},
            "actions": {
                "click": "SystemAction_196f6ae959bb49f9bbcc7ff73cfa12e9"
            },
            "settings": {
                "layout": "text",
                "theme": "Alpha-Magenta:left",
                "html": "Back "
            }
        }
    },
    "actions": {
        "Button1_onClick": function(data) {alert('this action not yet defined');},
        "SystemAction_196f6ae959bb49f9bbcc7ff73cfa12e9": function(data) {DLG1_DlgObj.panelSetActive('SIGNIN_PANELCARD');}
    },
    "layout": "Default",
    "layouts": {
        "Default": {
            "lines": [
                {
                    "before": {
                        "items": [
                            "Back"
                        ]
                    },
                    "middle": {
                        "items": []
                    },
                    "after": {
                        "items": []
                    }
                }
            ]
        }
    },
    "disclosures": {}
},
	"data": {
	"__systemIsDirty": "",
	"__systemDirty": ""
},
	"id": "DLG1.V.R1.CONTROLBAR_29"
}
DLG1_DlgObj._mapSettings['MAP1'] = {theme: 'Alpha-Magenta',ui: {overviewMap: false,draggable: true,zoomOnDblClick: true,preventPanelScroll: true,panControl: false,scale: true,streetViewControl: true,zoomControl: true,mapTypeControl: true},route: {draggable: true,avoid: {highways: false,tolls: false},travelMode: 'Driving',units: 'Metric',optimizeOrder: true,directionsPanel: 'ROUTE_PANEL_ID'},type: 'ROADMAP',onZoomChange: function(data) { },onInitialize: function(data) { ;
if(typeof DLG1_DlgObj._googlePlacesLoaded != 'undefined') {
 if(typeof DLG1_DlgObj._googlePlacesLoadedHasRun == 'undefined') {
  DLG1_DlgObj._googlePlacesLoaded();
  DLG1_DlgObj._googlePlacesLoadedHasRun = true;
 }
}}};
DLG1_DlgObj._controls['LIST2'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LIST2'],  onInitialize: function() {
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var lObj = this;
  setTimeout(function() {
   if(typeof lObj._imageCache == 'undefined') lObj._imageCache = {};
   if(lObj.__loadImages) lObj.__loadImages(true);
  },100);
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
 var flagCordova = false;
}
if(flagCordova) {
 if(this.__flagPersist) {
  if(this.__persistWhere.toLowerCase() == 'indexdb') {
   alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
  }
 }
}
;var that = this;
try{
 if(this._hasDetailView) {
  if(this._JSONForm) {
   setTimeout(function() {
   that.resize();
   },10);
  }
 }
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LIST2'] }
DLG1_DlgObj._controls['LSTROUTES'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTROUTES'],  onInitialize: function() {
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var lObj = this;
  setTimeout(function() {
   if(typeof lObj._imageCache == 'undefined') lObj._imageCache = {};
   if(lObj.__loadImages) lObj.__loadImages(true);
  },100);
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
 var flagCordova = false;
}
if(flagCordova) {
 if(this.__flagPersist) {
  if(this.__persistWhere.toLowerCase() == 'indexdb') {
   alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
  }
 }
}
;var that = this;
try{
 if(this._hasDetailView) {
  if(this._JSONForm) {
   setTimeout(function() {
   that.resize();
   },10);
  }
 }
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTROUTES'] }
DLG1_DlgObj._controls['LSTOFFROUTE'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTOFFROUTE'],  onInitialize: function() {
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var lObj = this;
  setTimeout(function() {
   if(typeof lObj._imageCache == 'undefined') lObj._imageCache = {};
   if(lObj.__loadImages) lObj.__loadImages(true);
  },100);
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
 var flagCordova = false;
}
if(flagCordova) {
 if(this.__flagPersist) {
  if(this.__persistWhere.toLowerCase() == 'indexdb') {
   alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
  }
 }
}
;var that = this;
try{
 if(this._hasDetailView) {
  if(this._JSONForm) {
   setTimeout(function() {
   that.resize();
   },10);
  }
 }
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTOFFROUTE'] }
DLG1_DlgObj._controls['LSTVISITHEAD'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTVISITHEAD'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var lObj = this;
  setTimeout(function() {
   if(typeof lObj._imageCache == 'undefined') lObj._imageCache = {};
   if(lObj.__loadImages) lObj.__loadImages(true);
  },100);
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
 var flagCordova = false;
}
if(flagCordova) {
 if(this.__flagPersist) {
  if(this.__persistWhere.toLowerCase() == 'indexdb') {
   alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
  }
 }
}
;var that = this;
try{
 if(this._hasDetailView) {
  if(this._JSONForm) {
   setTimeout(function() {
   that.resize();
   },10);
  }
 }
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTVISITHEAD'] }
DLG1_DlgObj._controls['LSTDISCUSSED'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTDISCUSSED'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
	var flagCordova = false;
}
if(flagCordova) { 
	if(this.__flagPersist) { 
		if(this.__persistWhere.toLowerCase() == 'indexdb') { 
			alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
		}
	}
}
;var that = this;
try{
	if(this._hasDetailView) { 
		if(this._JSONForm) { 
			setTimeout(function() { 
			that.resize();
			},10);
		}
	}
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTDISCUSSED'] }
DLG1_DlgObj._controls['LSTSAMPLES'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTSAMPLES'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
	var flagCordova = false;
}
if(flagCordova) { 
	if(this.__flagPersist) { 
		if(this.__persistWhere.toLowerCase() == 'indexdb') { 
			alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
		}
	}
}
;var that = this;
try{
	if(this._hasDetailView) { 
		if(this._JSONForm) { 
			setTimeout(function() { 
			that.resize();
			},10);
		}
	}
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTSAMPLES'] }
DLG1_DlgObj._controls['LSTORDERS'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTORDERS'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
	var flagCordova = false;
}
if(flagCordova) { 
	if(this.__flagPersist) { 
		if(this.__persistWhere.toLowerCase() == 'indexdb') { 
			alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
		}
	}
}
;var that = this;
try{
	if(this._hasDetailView) { 
		if(this._JSONForm) { 
			setTimeout(function() { 
			that.resize();
			},10);
		}
	}
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTORDERS'] }
DLG1_DlgObj._controls['LSTINVOICES'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTINVOICES'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
	var flagCordova = false;
}
if(flagCordova) { 
	if(this.__flagPersist) { 
		if(this.__persistWhere.toLowerCase() == 'indexdb') { 
			alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
		}
	}
}
;var that = this;
try{
	if(this._hasDetailView) { 
		if(this._JSONForm) { 
			setTimeout(function() { 
			that.resize();
			},10);
		}
	}
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTINVOICES'] }
DLG1_DlgObj._controls['LSTRECEIPT'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTRECEIPT'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
	var flagCordova = false;
}
if(flagCordova) { 
	if(this.__flagPersist) { 
		if(this.__persistWhere.toLowerCase() == 'indexdb') { 
			alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
		}
	}
}
;var that = this;
try{
	if(this._hasDetailView) { 
		if(this._JSONForm) { 
			setTimeout(function() { 
			that.resize();
			},10);
		}
	}
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTRECEIPT'] }
DLG1_DlgObj._controls['LSTUNPAIDINV'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTUNPAIDINV'],  onInitialize: function() {
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var lObj = this;
  setTimeout(function() {
   if(typeof lObj._imageCache == 'undefined') lObj._imageCache = {};
   if(lObj.__loadImages) lObj.__loadImages(true);
  },100);
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
 var flagCordova = false;
}
if(flagCordova) {
 if(this.__flagPersist) {
  if(this.__persistWhere.toLowerCase() == 'indexdb') {
   alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
  }
 }
}
;var that = this;
try{
 if(this._hasDetailView) {
  if(this._JSONForm) {
   setTimeout(function() {
   that.resize();
   },10);
  }
 }
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTUNPAIDINV'] }
DLG1_DlgObj._controls['LSTVISITNOTES'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTVISITNOTES'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
	var flagCordova = false;
}
if(flagCordova) { 
	if(this.__flagPersist) { 
		if(this.__persistWhere.toLowerCase() == 'indexdb') { 
			alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
		}
	}
}
;var that = this;
try{
	if(this._hasDetailView) { 
		if(this._JSONForm) { 
			setTimeout(function() { 
			that.resize();
			},10);
		}
	}
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTVISITNOTES'] }
DLG1_DlgObj._controls['LSTMEDIALFILES'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTMEDIALFILES'],  onInitialize: function() {
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var lObj = this;
  setTimeout(function() {
   if(typeof lObj._imageCache == 'undefined') lObj._imageCache = {};
   if(lObj.__loadImages) lObj.__loadImages(true);
  },100);
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
 var flagCordova = false;
}
if(flagCordova) {
 if(this.__flagPersist) {
  if(this.__persistWhere.toLowerCase() == 'indexdb') {
   alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
  }
 }
}
;var that = this;
try{
 if(this._hasDetailView) {
  if(this._JSONForm) {
   setTimeout(function() {
   that.resize();
   },10);
  }
 }
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTMEDIALFILES'] }
DLG1_DlgObj._controls['LSTBASKETH'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTBASKETH'],  onInitialize: function() {
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var lObj = this;
  setTimeout(function() {
   if(typeof lObj._imageCache == 'undefined') lObj._imageCache = {};
   if(lObj.__loadImages) lObj.__loadImages(true);
  },100);
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
 var flagCordova = false;
}
if(flagCordova) {
 if(this.__flagPersist) {
  if(this.__persistWhere.toLowerCase() == 'indexdb') {
   alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
  }
 }
}
;var that = this;
try{
 if(this._hasDetailView) {
  if(this._JSONForm) {
   setTimeout(function() {
   that.resize();
   },10);
  }
 }
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTBASKETH'] }
DLG1_DlgObj._controls['LSTBASKETDET'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTBASKETDET'],  onInitialize: function() {
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
	var flagCordova = false;
}
if(flagCordova) { 
	if(this.__flagPersist) { 
		if(this.__persistWhere.toLowerCase() == 'indexdb') { 
			alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
		}
	}
}
;var that = this;
try{
	if(this._hasDetailView) { 
		if(this._JSONForm) { 
			setTimeout(function() { 
			that.resize();
			},10);
		}
	}
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTBASKETDET'] }
DLG1_DlgObj._controls['LSTITEMS'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTITEMS'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
	var flagCordova = false;
}
if(flagCordova) { 
	if(this.__flagPersist) { 
		if(this.__persistWhere.toLowerCase() == 'indexdb') { 
			alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
		}
	}
}
;var that = this;
try{
	if(this._hasDetailView) { 
		if(this._JSONForm) { 
			setTimeout(function() { 
			that.resize();
			},10);
		}
	}
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTITEMS'] }
DLG1_DlgObj._controls['LSTVACATION'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTVACATION'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var lObj = this;
  setTimeout(function() {
   if(typeof lObj._imageCache == 'undefined') lObj._imageCache = {};
   if(lObj.__loadImages) lObj.__loadImages(true);
  },100);
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
 var flagCordova = false;
}
if(flagCordova) {
 if(this.__flagPersist) {
  if(this.__persistWhere.toLowerCase() == 'indexdb') {
   alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
  }
 }
}
;var that = this;
try{
 if(this._hasDetailView) {
  if(this._JSONForm) {
   setTimeout(function() {
   that.resize();
   },10);
  }
 }
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTVACATION'] }
DLG1_DlgObj._controls['LSTPOI'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTPOI'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
	var flagCordova = false;
}
if(flagCordova) { 
	if(this.__flagPersist) { 
		if(this.__persistWhere.toLowerCase() == 'indexdb') { 
			alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
		}
	}
}
;var that = this;
try{
	if(this._hasDetailView) { 
		if(this._JSONForm) { 
			setTimeout(function() { 
			that.resize();
			},10);
		}
	}
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTPOI'] }
DLG1_DlgObj._controls['LSTDEALS'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTDEALS'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var lObj = this;
  setTimeout(function() {
   if(typeof lObj._imageCache == 'undefined') lObj._imageCache = {};
   if(lObj.__loadImages) lObj.__loadImages(true);
  },100);
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
 var flagCordova = false;
}
if(flagCordova) {
 if(this.__flagPersist) {
  if(this.__persistWhere.toLowerCase() == 'indexdb') {
   alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
  }
 }
}
;var that = this;
try{
 if(this._hasDetailView) {
  if(this._JSONForm) {
   setTimeout(function() {
   that.resize();
   },10);
  }
 }
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTDEALS'] }
DLG1_DlgObj._controls['LSTGEOLOC'] =  { type: 'list',  data: DLG1_DlgObj._listViewData['LSTGEOLOC'],  onInitialize: function() {;if (!this.allowNullSelection){ var that = this; setTimeout(function() {that._onSelect(); delete that; },10);};
		var pe = $(this.contId).parentElement;
		if(typeof this.listVariableName != 'undefined') { 
			var _cn = 'DLG1_' + this.listVariableName.toUpperCase() + '_2';
			$acn(pe,_cn);
		}
var lObj = this;
  setTimeout(function() {
   if(typeof lObj._imageCache == 'undefined') lObj._imageCache = {};
   if(lObj.__loadImages) lObj.__loadImages(true);
  },100);
var flagCordova = true;
if (typeof window['cordova'] == 'undefined') {
 var flagCordova = false;
}
if(flagCordova) {
 if(this.__flagPersist) {
  if(this.__persistWhere.toLowerCase() == 'indexdb') {
   alert('Error. App is running as a Cordova app. You cannot set the persist location to \'IndexedDB\' for Cordova applications. You must set the persist location to \'FileSystem\'');
  }
 }
}
;var that = this;
try{
 if(this._hasDetailView) {
  if(this._JSONForm) {
   setTimeout(function() {
   that.resize();
   },10);
  }
 }
}catch(e){};
;this._host = DLG1_DlgObj.dialogId;
if(typeof this.__flagHasFixedColumnFooters != 'undefined') { 
	if(this.__flagHasFixedColumnFooters) { 
		this.refresh();
	}
}
; if(this.initializeVirtualizedColumns) this.initializeVirtualizedColumns(); if(this._setupAlphabetSearch) this._setupAlphabetSearch.call(this)},  settings: DLG1_DlgObj._listViewSettings['LSTGEOLOC'] }
DLG1_DlgObj._controls['SLIDER1'] = { type: 'slider',  settings:  {theme: 'Alpha-Magenta',handle: {show: false},min: 0,max: 110,onChange: function(e) { var id = 'SLIDER1';if(DLG1_DlgObj.executeWatchEventForControl) DLG1_DlgObj.executeWatchEventForControl('SLIDER1');
},step: 1} }
DLG1_DlgObj._controls['SLIDERSAVING'] = { type: 'slider',  settings:  {theme: 'Alpha-Magenta',handle: {show: false},min: 0,max: 100,onChange: function(e) { var id = 'SLIDERSAVING';DLG1_DlgObj._paintSliderMessage(e,'SLIDERSAVING','\'Saving \'+value+\' %\'');;if(DLG1_DlgObj.executeWatchEventForControl) DLG1_DlgObj.executeWatchEventForControl('SLIDERSAVING');
},_sliderMessageTemplate: '\'Saving \'+value+\' %\'',onSlide: function(e) {var id = 'SLIDERSAVING';   DLG1_DlgObj._paintSliderMessage(e,'SLIDERSAVING','\'Saving \'+value+\' %\'');;(e,id);   },step: 1} }
DLG1_DlgObj._controls['MAP1'] = { type: 'map', onInitialize: function() {  var mapObj = DLG1_DlgObj.getControl('MAP1');
mapObj.setZoom(13);;} ,   settings:  DLG1_DlgObj._mapSettings['MAP1'] }
DLG1_DlgObj.setVariables({ });
DLG1_DlgObj._dataBoundControls = [];
DLG1_DlgObj._primaryTableAlias = '';
DLG1_DlgObj._actions = {};
DLG1_DlgObj._actions['Getcoord'] = '/* actionJavascript:257be7dd-fd5a-4dd1-9bda-59578ac47261      */\nnavigator.geolocation.getAccuratePosition(DLG1_DlgObj.geoLocateSuccess_599456d1eb5d464386e0de36cfaf28bc,DLG1_DlgObj.geoLocateFailed_599456d1eb5d464386e0de36cfaf28bc,{desiredAccuracy:100, maxWait:15000, ignoreResultCount:1, timeout:200000});';
DLG1_DlgObj._actions['AddMarker'] = '/* actionJavascript:4626749f-c333-4a3d-9ad8-fadb4a1fb73b */\nvar mapObj = DLG1_DlgObj.getControl(\'map1\');\nvar settings = {\n\ticon: {\n\t\tanchor: {\n\t\t}\n\t},\n\tdetail: {\n\t\thas: true\n\t},\n\toverlay: {\n\t\thas: false,\n\t\tdata: \'1mi\',\n\t\tfill: {\n\t\t\topacity: 1\n\t\t},\n\t\tstroke: {\n\t\t\twidth: 1,\n\t\t\topacity: 1\n\t\t}\n\t},\n\tdraggable: false,\n\temphasis: true,\n\tanimation: \'bounce\',\n\temphasize: 1000,\n\tonAddComplete: function(markerSettings,markerObject) { this.viewMarkers(\'MYMARKER_1\'); }\n};\nvar arr = [];\nvar col_LAT = DLG1_DlgObj.getValue(\'list::LSTROUTES::LAT\');\narr.push(col_LAT);\nvar col_LONT = DLG1_DlgObj.getValue(\'list::LSTROUTES::LONT\');\narr.push(col_LONT);\nvar loc = arr;\n;\nif(loc) mapObj.addMarker(\'MYMARKER_1\',loc,settings);';
DLG1_DlgObj._actions['PlotRoute'] = 'var mapObj = DLG1_DlgObj.getControl(\'map1\');\nconsole.log(mapObj)\n\t//capture current settings so you can restore them later\n\tvar currentSettings = {\n\t\tavoid: mapObj.route.avoid, \n\t\tdirectionsPanel: mapObj.route.directionsPanel, \n\t\tdraggable: mapObj.route.draggable, \n\t\toptimizeOrder: mapObj.route.optimizeOrder, \n\t\ttravelMode: mapObj.route.travelMode, \n\t\tunits: mapObj.route.units\n\t};\n\t\n\tmapObj.route.avoid.highways = false;\n\tmapObj.route.avoid.tolls = true;\n\tmapObj.route.draggable = true;\n\tmapObj.route.travelMode = \'DRIVING\';\n\tmapObj.route.units = \'METRIC\';\n\tmapObj.route.directionsPanel = \'DLG1.V.R1.PLACEHOLDER_2\';\n\t\n\tvar startAddress = startadd();\nvar endAddress = endadd();\nmapObj.plotRoute(startAddress,endAddress);\n\n\n\t\n\t//restore settings\n\tmapObj.route.avoid.highways = currentSettings.highways;\n\tmapObj.route.avoid.tolls = currentSettings.tolls;\n\tmapObj.route.draggable = currentSettings.draggable;\n\tmapObj.route.travelMode = currentSettings.travelMode;\n\tmapObj.route.units = currentSettings.units;\n\tmapObj.route.directionsPanel = currentSettings.directionsPanel;';
DLG1_DlgObj._actions['getcurcoord'] = '/* actionJavascript:8a506b21-a9ab-495b-bd60-d1e8f91cc3fb          */\nnavigator.geolocation.getAccuratePosition(DLG1_DlgObj.geoLocateSuccess_e53ef2c19a3242b6a53b4c288189d536,DLG1_DlgObj.geoLocateFailed_e53ef2c19a3242b6a53b4c288189d536,{desiredAccuracy:20, maxWait:10000, ignoreResultCount:0, timeout:15000});';
DLG1_DlgObj._actions['removemarker'] = '/* actionJavascript:f4a4036c-4156-422b-99d1-aad8b8b6de9d */\nvar mapObj = DLG1_DlgObj.getControl(\'map1\');\nmapObj.setMarkerDisplay(\'MYMARKER_1\',false);';
DLG1_DlgObj._actions['refreshlists'] = '/* actionJavascript:e2bac2a2-e9c0-4e30-b842-5cb737e9e23a                                                     */\nfunction tempfunction_66504037_c21f_4db9_98d4_62f8f4c32826() {\n/*\nTIP: For lists based on TransForm you can set these properties in the object that is passed in: \n- transFormMetaDataFilter, \n- transFormMetaDataFilterParameters (a crlf string with format: value|||type|argumentName)\n- transFormFormDataFilterJavascript\n- transFormAPIKey\n\n*/\nvar lObj = DLG1_DlgObj.getControl(\'LSTROUTES\');\nvar _flagCSFirestore = false;\n\tif(lObj) { \n\t\tif(lObj._dataSourceType.toLowerCase() == \'firestore\' && lObj._firestore.executeWhere.toLowerCase() == \'client\') { \n\t\t\t//alert(\'Firestore: must do a cient side refresh\');\n\t\t\tlObj.__csRefresh();\n\t\t\tlObj.refresh();\n\t\t\t_flagCSFirestore = true;\n\t\t}\n\t}\n\nvar callbackId = \'\';\nvar options = {\n\tkeepFocusOnCurrentSelection: false,\n\tsetFocusToValue: \'\',\n\trefreshDependentLists: true,\n\tonlyRefreshDependentLists: false,\n\tpreserveCurrentFilterOrder: false,\n\tajaxFailed: function() { \nDLG1_DlgObj.setValue(\'failedsync\',1);\n},\n\toffline: function() { \nDLG1_DlgObj.setValue(\'failedsync\',1);\n},\n\tcheckIfServerAvailable: false,\n\tserverAvailableTimeout: 9000,\n\tonServerNoAvailable: function() { \nalert(\'The server is not available\');\n},\n\tperformSpeedTest: true,\n\tamountOfDataToSend: \'.1MB\',\n\tmaxSpeedTestDuration: 12000,\n\tonPoorConnection: function() { \nalert(\'Slow Internet Detected, Route Not Updated\');\n},\n\tajaxcallbacktimeout: 30000,\n\tcallbackId: callbackId\n};\nif(typeof _flagCSFirestore == \'undefined\') _flagCSFirestore = false; \nif(!_flagCSFirestore) DLG1_DlgObj.refreshListData(\'LSTROUTES\',options);\n\n}\n\nfunction tempfunction_9dd965d7_7a34_43dd_ac72_57d5fc9c7c90() {\n/*\nTIP: For lists based on TransForm you can set these properties in the object that is passed in: \n- transFormMetaDataFilter, \n- transFormMetaDataFilterParameters (a crlf string with format: value|||type|argumentName)\n- transFormFormDataFilterJavascript\n- transFormAPIKey\n\n*/\nvar lObj = DLG1_DlgObj.getControl(\'LSTBASKETH\');\nvar _flagCSFirestore = false;\n\tif(lObj) { \n\t\tif(lObj._dataSourceType.toLowerCase() == \'firestore\' && lObj._firestore.executeWhere.toLowerCase() == \'client\') { \n\t\t\t//alert(\'Firestore: must do a cient side refresh\');\n\t\t\tlObj.__csRefresh();\n\t\t\tlObj.refresh();\n\t\t\t_flagCSFirestore = true;\n\t\t}\n\t}\n\nvar onCompleteCode = function() { console.log(\'basket refreshed\');};\nvar callbackId = A5.UUID();\nvar objx = DLG1_DlgObj._ajaxCallbackCompleteCode;\nobjx[callbackId] = onCompleteCode;\n\t\t\t\n\n\nvar options = {\n\tkeepFocusOnCurrentSelection: true,\n\tsetFocusToValue: \'\',\n\trefreshDependentLists: true,\n\tonlyRefreshDependentLists: false,\n\tpreserveCurrentFilterOrder: false,\n\tajaxFailed: function() { \n\n},\n\toffline: function() { \n\n},\n\tcheckIfServerAvailable: false,\n\tserverAvailableTimeout: 2000,\n\tonServerNoAvailable: function() { \nalert(\'The server is not available\');\n},\n\tperformSpeedTest: false,\n\tamountOfDataToSend: \'.1MB\',\n\tmaxSpeedTestDuration: 300,\n\tonPoorConnection: function() { \n\n},\n\tajaxcallbacktimeout: 10000,\n\tcallbackId: callbackId\n};\nif(typeof _flagCSFirestore == \'undefined\') _flagCSFirestore = false; \nif(!_flagCSFirestore) DLG1_DlgObj.refreshListData(\'LSTBASKETH\',options);\n\n}\n\nfunction tempfunction_68e2de4d_024d_4445_a718_b9bceb6f4498() {\nDLG1_DlgObj.setValue(\'Slider1\',75);\n\n}\n\nfunction tempfunction_1f0f2aa6_bd70_4194_bc1a_60f3473a3b46() {\n/*\nTIP: For lists based on TransForm you can set these properties in the object that is passed in: \n- transFormMetaDataFilter, \n- transFormMetaDataFilterParameters (a crlf string with format: value|||type|argumentName)\n- transFormFormDataFilterJavascript\n- transFormAPIKey\n\n*/\nvar lObj = DLG1_DlgObj.getControl(\'LSTOFFROUTE\');\nvar _flagCSFirestore = false;\n\tif(lObj) { \n\t\tif(lObj._dataSourceType.toLowerCase() == \'firestore\' && lObj._firestore.executeWhere.toLowerCase() == \'client\') { \n\t\t\t//alert(\'Firestore: must do a cient side refresh\');\n\t\t\tlObj.__csRefresh();\n\t\t\tlObj.refresh();\n\t\t\t_flagCSFirestore = true;\n\t\t}\n\t}\n\nvar callbackId = \'\';\nvar options = {\n\tkeepFocusOnCurrentSelection: false,\n\tsetFocusToValue: \'\',\n\trefreshDependentLists: true,\n\tonlyRefreshDependentLists: false,\n\tpreserveCurrentFilterOrder: false,\n\tajaxFailed: function() { \nDLG1_DlgObj.setValue(\'failedsync\',1);\n},\n\toffline: function() { \nDLG1_DlgObj.setValue(\'failedsync\',1);\n},\n\tcheckIfServerAvailable: false,\n\tserverAvailableTimeout: 9000,\n\tonServerNoAvailable: function() { \nalert(\'The server is not available\');\n},\n\tperformSpeedTest: false,\n\tamountOfDataToSend: \'.1MB\',\n\tmaxSpeedTestDuration: 12000,\n\tonPoorConnection: function() { \nalert(\'Slow Internet Detected, Out of route not updated!\');\n},\n\tajaxcallbacktimeout: 30000,\n\tcallbackId: callbackId\n};\nif(typeof _flagCSFirestore == \'undefined\') _flagCSFirestore = false; \nif(!_flagCSFirestore) DLG1_DlgObj.refreshListData(\'LSTOFFROUTE\',options);\n\n}\n\nfunction tempfunction_d41e1505_3f16_4638_bb02_45893c46fab3() {\nDLG1_DlgObj.setValue(\'Slider1\',80);\n\n}\n\nfunction tempfunction_7a930b4a_eaa8_468b_a918_d8be322a5e15() {\nDLG1_DlgObj.setValue(\'Slider1\',85);\n}\n\nfunction tempfunction_0c6bf2fc_1c5c_46f4_aca2_d902b208cf45() {\n/*\nTIP: For lists based on TransForm you can set these properties in the object that is passed in: \n- transFormMetaDataFilter, \n- transFormMetaDataFilterParameters (a crlf string with format: value|||type|argumentName)\n- transFormFormDataFilterJavascript\n- transFormAPIKey\n\n*/\nvar lObj = DLG1_DlgObj.getControl(\'LIST2\');\nvar _flagCSFirestore = false;\n\tif(lObj) { \n\t\tif(lObj._dataSourceType.toLowerCase() == \'firestore\' && lObj._firestore.executeWhere.toLowerCase() == \'client\') { \n\t\t\t//alert(\'Firestore: must do a cient side refresh\');\n\t\t\tlObj.__csRefresh();\n\t\t\tlObj.refresh();\n\t\t\t_flagCSFirestore = true;\n\t\t}\n\t}\n\nvar callbackId = \'\';\nvar options = {\n\tkeepFocusOnCurrentSelection: true,\n\tsetFocusToValue: \'\',\n\trefreshDependentLists: true,\n\tonlyRefreshDependentLists: false,\n\tpreserveCurrentFilterOrder: false,\n\tajaxFailed: function() { \nDLG1_DlgObj.setValue(\'failedsync\',1);\n},\n\toffline: function() { \nDLG1_DlgObj.setValue(\'failedsync\',1);\n},\n\tcheckIfServerAvailable: false,\n\tserverAvailableTimeout: 5000,\n\tonServerNoAvailable: function() { \nalert(\'The server is not available\');\n},\n\tperformSpeedTest: false,\n\tamountOfDataToSend: \'.1MB\',\n\tmaxSpeedTestDuration: 300,\n\tonPoorConnection: function() { \n\n},\n\tajaxcallbacktimeout: 20000,\n\tcallbackId: callbackId\n};\nif(typeof _flagCSFirestore == \'undefined\') _flagCSFirestore = false; \nif(!_flagCSFirestore) DLG1_DlgObj.refreshListData(\'LIST2\',options);\n\n}\n\nfunction tempfunction_2cade394_444e_4048_9870_88686b54ddf0() {\nDLG1_DlgObj.setValue(\'Slider1\',90);\n\n}\n\nfunction tempfunction_310cbd8f_dc85_4679_9722_ee13a2e72730() {\n/*\nTIP: For lists based on TransForm you can set these properties in the object that is passed in: \n- transFormMetaDataFilter, \n- transFormMetaDataFilterParameters (a crlf string with format: value|||type|argumentName)\n- transFormFormDataFilterJavascript\n- transFormAPIKey\n\n*/\nvar lObj = DLG1_DlgObj.getControl(\'LSTBASKETH\');\nvar _flagCSFirestore = false;\n\tif(lObj) { \n\t\tif(lObj._dataSourceType.toLowerCase() == \'firestore\' && lObj._firestore.executeWhere.toLowerCase() == \'client\') { \n\t\t\t//alert(\'Firestore: must do a cient side refresh\');\n\t\t\tlObj.__csRefresh();\n\t\t\tlObj.refresh();\n\t\t\t_flagCSFirestore = true;\n\t\t}\n\t}\n\nvar callbackId = \'\';\nvar options = {\n\tkeepFocusOnCurrentSelection: true,\n\tsetFocusToValue: \'\',\n\trefreshDependentLists: true,\n\tonlyRefreshDependentLists: false,\n\tpreserveCurrentFilterOrder: false,\n\tajaxFailed: function() { \nDLG1_DlgObj.setValue(\'failedsync\',1);\n},\n\toffline: function() { \n\n},\n\tcheckIfServerAvailable: false,\n\tserverAvailableTimeout: 2000,\n\tonServerNoAvailable: function() { \nalert(\'The server is not available\');\n},\n\tperformSpeedTest: true,\n\tamountOfDataToSend: \'.1MB\',\n\tmaxSpeedTestDuration: 1200,\n\tonPoorConnection: function() { \nalert(\'Slow Internet Detected,Basked not updated\');\n},\n\tajaxcallbacktimeout: 30000,\n\tcallbackId: callbackId\n};\nif(typeof _flagCSFirestore == \'undefined\') _flagCSFirestore = false; \nif(!_flagCSFirestore) DLG1_DlgObj.refreshListData(\'LSTBASKETH\',options);\n\n}\n\nfunction tempfunction_cac3bb68_de29_452f_ac62_289c6a95e568() {\nDLG1_DlgObj.setValue(\'Slider1\',95);\n}\n\nfunction tempfunction_4fa854db_8ebe_40c5_93ea_de04ae10788b() {\nDLG1_DlgObj.setValue(\'Slider1\',100);\n}\n\nfunction tempfunction_873cffb6_913b_4e8a_acd7_e17d92424093() {\nDLG1_DlgObj.setValue(\'Slider1\',105);\n\n}\n\nfunction tempfunction_c81277a2_65d6_425a_bf06_9de3b8e4eb4b() {\n/*\nTIP: For lists based on TransForm you can set these properties in the object that is passed in: \n- transFormMetaDataFilter, \n- transFormMetaDataFilterParameters (a crlf string with format: value|||type|argumentName)\n- transFormFormDataFilterJavascript\n- transFormAPIKey\n\n*/\nvar lObj = DLG1_DlgObj.getControl(\'LSTVISITHEAD\');\nvar _flagCSFirestore = false;\n\tif(lObj) { \n\t\tif(lObj._dataSourceType.toLowerCase() == \'firestore\' && lObj._firestore.executeWhere.toLowerCase() == \'client\') { \n\t\t\t//alert(\'Firestore: must do a cient side refresh\');\n\t\t\tlObj.__csRefresh();\n\t\t\tlObj.refresh();\n\t\t\t_flagCSFirestore = true;\n\t\t}\n\t}\n\nvar callbackId = \'\';\nvar options = {\n\tkeepFocusOnCurrentSelection: true,\n\tsetFocusToValue: \'\',\n\trefreshDependentLists: true,\n\tonlyRefreshDependentLists: false,\n\tpreserveCurrentFilterOrder: false,\n\tajaxFailed: function() { \nDLG1_DlgObj.setValue(\'failedsync\',1);\n},\n\toffline: function() { \nDLG1_DlgObj.setValue(\'failedsync\',1);\n},\n\tcheckIfServerAvailable: false,\n\tserverAvailableTimeout: 9000,\n\tonServerNoAvailable: function() { \nalert(\'The server is not available\');\n},\n\tperformSpeedTest: true,\n\tamountOfDataToSend: \'.1MB\',\n\tmaxSpeedTestDuration: 5200,\n\tonPoorConnection: function() { \n\n},\n\tajaxcallbacktimeout: 30000,\n\tcallbackId: callbackId\n};\nif(typeof _flagCSFirestore == \'undefined\') _flagCSFirestore = false; \nif(!_flagCSFirestore) DLG1_DlgObj.refreshListData(\'LSTVISITHEAD\',options);\n\n}\n\nfunction tempfunction_70ed0ed9_5a9f_49f7_ab08_cc90d37c1391() {\nDLG1_DlgObj.setValue(\'Slider1\',110);\n}\n\nfunction tempfunction_ddb44677_1f39_4bd0_87af_cdd1bb8ec914() {\n/*\nTIP: For lists based on TransForm you can set these properties in the object that is passed in: \n- transFormMetaDataFilter, \n- transFormMetaDataFilterParameters (a crlf string with format: value|||type|argumentName)\n- transFormFormDataFilterJavascript\n- transFormAPIKey\n\n*/\nvar lObj = DLG1_DlgObj.getControl(\'LSTUNPAIDINV\');\nvar _flagCSFirestore = false;\n\tif(lObj) { \n\t\tif(lObj._dataSourceType.toLowerCase() == \'firestore\' && lObj._firestore.executeWhere.toLowerCase() == \'client\') { \n\t\t\t//alert(\'Firestore: must do a cient side refresh\');\n\t\t\tlObj.__csRefresh();\n\t\t\tlObj.refresh();\n\t\t\t_flagCSFirestore = true;\n\t\t}\n\t}\n\nvar callbackId = \'\';\nvar options = {\n\tkeepFocusOnCurrentSelection: true,\n\tsetFocusToValue: \'\',\n\trefreshDependentLists: true,\n\tonlyRefreshDependentLists: false,\n\tpreserveCurrentFilterOrder: false,\n\tajaxFailed: function() { \nDLG1_DlgObj.setValue(\'failedsync\',1);\n},\n\toffline: function() { \nDLG1_DlgObj.setValue(\'failedsync\',1);\n},\n\tcheckIfServerAvailable: false,\n\tserverAvailableTimeout: 2000,\n\tonServerNoAvailable: function() { \nalert(\'The server is not available\');\n},\n\tperformSpeedTest: true,\n\tamountOfDataToSend: \'.1MB\',\n\tmaxSpeedTestDuration: 1200,\n\tonPoorConnection: function() { \n\n},\n\tajaxcallbacktimeout: 30000,\n\tcallbackId: callbackId\n};\nif(typeof _flagCSFirestore == \'undefined\') _flagCSFirestore = false; \nif(!_flagCSFirestore) DLG1_DlgObj.refreshListData(\'LSTUNPAIDINV\',options);\n\n}\n\nfunction tempfunction_4fe9eca6_17a0_4329_97cf_02ce749aa98e() {\nDLG1_DlgObj.setValue(\'syncinprogress\',0);\n\n}\n\nfunction tempfunction_7f5bb6e1_718a_4e34_bf6b_b3814d1f91a5() {\nvar _html = \'<div style="display:inline-block;">Data Loaded</div>\';\nvar _options = {\n\t"className": "",\n\t"style": "box-shadow: 0px 2px 6px 2px rgba(0,0,0,.25);background: rgba(0,0,0,.8);color: #fff;border: 1px solid rgba(0,0,0,.8);border-radius: 4px;",\n\t"close": {\n\t\t"show": true,\n\t\t"icon": "svgIcon=#alpha-icon-x:icon{fill: #fff}",\n\t\t"iconHover": "svgIcon=#alpha-icon-xCircle:icon{fill: #fff}"\n\t},\n\t"duration": 2000,\n\t"animation": {\n\t\t"show": {\n\t\t\t"type": "auto",\n\t\t\t"duration": 600\n\t\t},\n\t\t"hide": {\n\t\t\t"type": "auto",\n\t\t\t"duration": 600\n\t\t}\n\t}\n};\nDLG1_DlgObj.transientMessage(\'center\',_html,_options);\n}\n\n\nA5.executeThisThenThat(tempfunction_66504037_c21f_4db9_98d4_62f8f4c32826,tempfunction_9dd965d7_7a34_43dd_ac72_57d5fc9c7c90,tempfunction_68e2de4d_024d_4445_a718_b9bceb6f4498,tempfunction_1f0f2aa6_bd70_4194_bc1a_60f3473a3b46,tempfunction_d41e1505_3f16_4638_bb02_45893c46fab3,tempfunction_7a930b4a_eaa8_468b_a918_d8be322a5e15,tempfunction_0c6bf2fc_1c5c_46f4_aca2_d902b208cf45,tempfunction_2cade394_444e_4048_9870_88686b54ddf0,tempfunction_310cbd8f_dc85_4679_9722_ee13a2e72730,tempfunction_cac3bb68_de29_452f_ac62_289c6a95e568,tempfunction_4fa854db_8ebe_40c5_93ea_de04ae10788b,tempfunction_873cffb6_913b_4e8a_acd7_e17d92424093,tempfunction_c81277a2_65d6_425a_bf06_9de3b8e4eb4b,tempfunction_70ed0ed9_5a9f_49f7_ab08_cc90d37c1391,tempfunction_ddb44677_1f39_4bd0_87af_cdd1bb8ec914,tempfunction_4fe9eca6_17a0_4329_97cf_02ce749aa98e,tempfunction_7f5bb6e1_718a_4e34_bf6b_b3814d1f91a5);';
DLG1_DlgObj._actions['updatecbdata'] = '/* actionJavascript:b9cff089-fe47-444f-819e-9d6cb48452a2 */\nvar cbObj = DLG1_DlgObj.getControl(\'CONTROLBAR_20\');\nif(cbObj) {\n\tvar varNames = [\'custvisited\'];\n\tvar dataValues = [DLG1_DlgObj.getValue(\'customer\')];\n\tcbObj.update(varNames,dataValues,false,true,false);\n};';
DLG1_DlgObj._actions['GoToVisitPanel'] = '/* actionJavascript:9b28cda6-fa49-470c-a3d6-53a4a2c31879 */\nDLG1_DlgObj.panelSetActive(\'PANELCARD_4\',false);';
DLG1_DlgObj._actions['updatepoiloc'] = '/* actionJavascript:6efa3b0b-cb59-42c0-87ee-48020a537629                     */\nDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'Wait...\',icon: \'css/A5System/Images/wait.gif\',waitMessageAutoCloseDelay: 20000});\nvar mapObj = DLG1_DlgObj.getControl(\'map1\');\nnavigator.geolocation.getCurrentPosition(function(pos) {\n\tvar loc = pos.coords.latitude+\',\'+pos.coords.longitude;\n\tvar mapObj = DLG1_DlgObj.getControl(\'map1\');\n\tvar settings = {\n\ticon: {\n\t\tanchor: {\n\t\t}\n\t},\n\tdetail: {\n\t\thas: false\n\t},\n\toverlay: {\n\t\thas: false,\n\t\tdata: \'1mi\',\n\t\tfill: {\n\t\t\topacity: 1\n\t\t},\n\t\tstroke: {\n\t\t\twidth: 1,\n\t\t\topacity: 1\n\t\t}\n\t},\n\tdraggable: true,\n\temphasis: false,\n\temphasize: false,\n\tanimation: \'drop\',\n\tonDragEnd: function(data) { var lat = data.latLng.lat();\nvar lng = data.latLng.lng();\nDLG1_DlgObj.setValue(\'DEVLAT\',lat);\nDLG1_DlgObj.setValue(\'DEVLONG\',lng); },\n\tonAddComplete: function(markerSettings,markerObject) { this.viewMarkers(\'MYLOC\');  console.log(markerSettings);\nconsole.log(markerObject);\nvar marker = markerObject;\nvar position = marker.getPosition();\nvar latitude = position.lat();\nvar longitude = position.lng();\nconsole.log("Marker Latitude: " + latitude);\nconsole.log("Marker Longitude: " + longitude);\nDLG1_DlgObj.setValue(\'DEVLAT\',latitude);\nDLG1_DlgObj.setValue(\'DEVLONG\',longitude); }\n};\n\tif(loc) mapObj.addMarker(\'MYLOC\',loc,settings);\n},function() { \n\t//failed to get location\n } ,\n{enableHighAccuracy : true, timeout: 15000, maximumAge: 30000});\n\nDLG1_DlgObj.panelSetActive(\'PANELCARD_6\',true);\nDLG1_DlgObj.hideWaitMessage();';
DLG1_DlgObj._actions['savepoiloc'] = '/* actionJavascript:2901b4d2-764a-4f58-b157-3c60666d6c1c   */\nDLG1_DlgObj.ajaxCallback(\'\',\'\',\'UpdatePoi\',\'\',\'\',{onComplete: function() { alert(\'poi location updated\'); DLG1_DlgObj.refreshListData(\'LSTROUTES\'); DLG1_DlgObj.refreshListData(\'LSTOFFROUTE\'); DLG1_DlgObj.hideWaitMessage();},chunkedResponses: {allow: false},deviceOfflineFunction: function() { alert(\'No internet connection\');  },checkifserveravailable: true,serveravailabletimeout: 2000,onServerNotAvailable: function() { alert(\'The server is not available\');}});';
DLG1_DlgObj._actions['hidewait'] = '/* actionJavascript:ac7d1f10-f6d0-4181-b15a-aa92bb11e2d1 */\nDLG1_DlgObj.hideWaitMessage();';
DLG1_DlgObj._actions['setsessionid'] = '/* actionJavascript:30a101ce-77af-43ac-95af-389d47b1d9ae         */\nDLG1_DlgObj.ajaxCallback(\'\',\'\',\'ajaxsetsession\',\'\',\'\',{errorFunction: function() { DLG1_DlgObj.setValue(\'failedsync\',1);  },chunkedResponses: {allow: false},deviceOfflineFunction: function() { DLG1_DlgObj.setValue(\'failedsync\',1);  }});';
DLG1_DlgObj._actions['refreshboundcombo'] = '/* actionJavascript:0b154926-ead9-47dc-a839-e7535ccea246   */\nif(DLG1_DlgObj._refreshControlsBasedOnClientSideDataCache) DLG1_DlgObj._refreshControlsBasedOnClientSideDataCache();';
DLG1_DlgObj._actions['showwait1'] = '/* actionJavascript:e5e91e96-d314-4df3-9873-647739d07fc3   */\nDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'Wait...\',icon: \'css/A5System/Images/wait.gif\',waitMessageAutoCloseDelay: 5000});';
DLG1_DlgObj._actions['cbsetsession'] = '/* actionJavascript:5074621b-c12a-4be9-996e-d1e75407e2bf          */\nDLG1_DlgObj.ajaxCallback(\'\',\'\',\'ajaxsetsession\',\'\',\'\',{onComplete: function() { function f1(){\n\tDLG1_DlgObj.runAction(\'RefreshDatas\');\n}\nsetTimeout(f1,750);},chunkedResponses: {allow: false},deviceOfflineFunction: function() {   },checkifserveravailable: true,serveravailabletimeout: 9000,onServerNotAvailable: function() { alert(\'The server is not available\');},performspeedtest: true,amountofdatatosend: \'.1MB\',maxspeedtestduration: 1300,onPoorConnection: function() { }});';
DLG1_DlgObj._actions['refreshedmess'] = '/* actionJavascript:8cd08ab2-e916-4d18-b502-5d70783e994d */\nvar _html = \'<div style="display:inline-block;">Data Refreshed()</div>\';\nvar _options = {\n\t"className": "",\n\t"style": "box-shadow: 0px 2px 6px 2px rgba(0,0,0,.25);background: rgba(0,0,0,.8);color: #fff;border: 1px solid rgba(0,0,0,.8);border-radius: 4px;",\n\t"close": {\n\t\t"show": true,\n\t\t"icon": "svgIcon=#alpha-icon-x:icon{fill: #fff}",\n\t\t"iconHover": "svgIcon=#alpha-icon-xCircle:icon{fill: #fff}"\n\t},\n\t"duration": 5000,\n\t"animation": {\n\t\t"show": {\n\t\t\t"type": "auto",\n\t\t\t"duration": 600\n\t\t},\n\t\t"hide": {\n\t\t\t"type": "auto",\n\t\t\t"duration": 600\n\t\t}\n\t}\n};\nDLG1_DlgObj.transientMessage(\'center\',_html,_options);';
DLG1_DlgObj._actions['fillcompanyinfo'] = '/* actionJavascript:445cf201-c3c7-48d6-8be3-e10dea3c206b        */\nvar rowNum = 1;\nDLG1_DlgObj.ajaxCallback(\'\',rowNum,\'__system__6d876f0b266a4bc8ba1cbfd136cf1c8e\');';
DLG1_DlgObj._actions['refreshplan'] = '/* actionJavascript:91217195-73c8-423e-a0ab-3deea9fc76ec */\n/*\nTIP: For lists based on TransForm you can set these properties in the object that is passed in: \n- transFormMetaDataFilter, \n- transFormMetaDataFilterParameters (a crlf string with format: value|||type|argumentName)\n- transFormFormDataFilterJavascript\n- transFormAPIKey\n\n*/\nvar options = {\n\tkeepFocusOnCurrentSelection: true,\n\tsetFocusToValue: \'\',\n\trefreshDependentLists: true,\n\tonlyRefreshDependentLists: false,\n\tpreserveCurrentFilterOrder: true,\n\tmode: \'incremental\',\n\tajaxFailed: function() { \n\n},\n\toffline: function() { \n\n}\n};\nDLG1_DlgObj.refreshListData(\'LSTROUTES\',options);';
DLG1_DlgObj._actions['RefreshDatas'] = 'function _onOffline(){\n\talert(\'data could not be loaded completely, please try with a better connection\');\n}\n\n\nfunction ff1(obj) {\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'1\',icon: \'css/A5System/Images/wait.gif\'});\n\tvar _onOffline = function() { \n\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\t\tobj.stop();\n\t};\n\tvar _onServerNotAvailable = function() { \n\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\t\tobj.stop();\n\t};\n\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\tif(!flagOnline) _onOffline();\n\telse {\n\t\tvar _onServerIsAvailable = function() { \t\tvar _onRefreshOK = function() {\n\t\t\tobj.next();\n\t\t\t}\n\t\t\tDLG1_DlgObj.refreshDataCacheItem(\'items\',_onRefreshOK);\n\t\t}\n\tDLG1_DlgObj.serverIsAvailable(9000,_onServerIsAvailable,_onServerNotAvailable);\n\t}\n}\n\n\n\nfunction ff2(obj) {\n\n\tDLG1_DlgObj.hideWaitMessage();\n\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'2\',icon: \'css/A5System/Images/wait.gif\'});\n\tvar _onOffline = function() { \n\t\tobj.stop();\n\t};\n\tvar _onServerNotAvailable = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\t\tobj.stop();\n\t};\n\t\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\t\tif(!flagOnline) _onOffline();\n\t\telse {\n\t\t\tvar _onServerIsAvailable = function() { \t\tvar _onRefreshOK = function() {\n\t\t\tobj.next();\n\t\t\t\n\t\t}\n\t\tDLG1_DlgObj.refreshDataCacheItem(\'discussedtypes\',_onRefreshOK);\n\t\t\t\n\n\t}\n\tDLG1_DlgObj.serverIsAvailable(9000,_onServerIsAvailable,_onServerNotAvailable);\n\t}\n}\n\n\nfunction ff3(obj) {\n\tDLG1_DlgObj.hideWaitMessage();\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'3\',icon: \'css/A5System/Images/wait.gif\'});\n\tvar _onOffline = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\t\tobj.stop();\n\t};\n\tvar _onServerNotAvailable = function() { \n\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\t\tobj.stop();\n\t};\n\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\tif(!flagOnline) _onOffline();\n\telse {\n\t\tvar _onServerIsAvailable = function() { var _onRefreshOK = function() {\n\t\t\tobj.next();\n\t}\n\t\tDLG1_DlgObj.refreshDataCacheItem(\'medreps\',_onRefreshOK);\n\t}\n\tDLG1_DlgObj.serverIsAvailable(9000,_onServerIsAvailable,_onServerNotAvailable);\n\t}\n\n}\n\n\n\nfunction ff4(obj) {\n\tDLG1_DlgObj.hideWaitMessage();\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'4\',icon: \'css/A5System/Images/wait.gif\'});\n\tvar _onOffline = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\tobj.stop();\n\t};\n\tvar _onServerNotAvailable = function() { \n\t\tobj.stop();\n\t};\n\t\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\t\tif(!flagOnline) _onOffline();\n\t\telse {\n\t\t\tvar _onServerIsAvailable = function() { \t\tvar _onRefreshOK = function() {\n\t\t\tobj.next();\n\t\t}\n\t\tDLG1_DlgObj.refreshDataCacheItem(\'currencies\',_onRefreshOK);\n\t}\n\tDLG1_DlgObj.serverIsAvailable(9000,_onServerIsAvailable,_onServerNotAvailable);\n}\n\n}\n\n\n\nfunction ff5(obj) {\n\tDLG1_DlgObj.hideWaitMessage();\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'5\',icon: \'css/A5System/Images/wait.gif\'});\n\tvar _onOffline = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\tobj.stop();\n\t};\n\tvar _onServerNotAvailable = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\tobj.stop();\n\t};\n\t\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\t\tif(!flagOnline) _onOffline();\n\t\telse {\n\tvar _onServerIsAvailable = function() { \t\tvar _onRefreshOK = function() {\n\t\t\tobj.next();\n\t\t}\n\t\tDLG1_DlgObj.refreshDataCacheItem(\'paytypes\',_onRefreshOK);\n\t}\n\tDLG1_DlgObj.serverIsAvailable(9000,_onServerIsAvailable,_onServerNotAvailable);\n\t}\n\t\n\n}\n\n\n\n\nfunction ff6(obj) {\n\tDLG1_DlgObj.hideWaitMessage();\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'6\',icon: \'css/A5System/Images/wait.gif\'});\n\tvar _onOffline = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\tobj.stop();\t\n\t};\n\tvar _onServerNotAvailable = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\talert(\'media server not available\');\n\t};\n\t\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\t\tif(!flagOnline) _onOffline();\n\t\telse {\n\tvar _onServerIsAvailable = function() { \t\tvar _onRefreshOK = function() {\n\t\t\tobj.next();\n\t\t}\n\t\tDLG1_DlgObj.refreshDataCacheItem(\'medias\',_onRefreshOK);\n\t}\n\tDLG1_DlgObj.serverIsAvailable(9000,_onServerIsAvailable,_onServerNotAvailable);\n\t}\n\t\n\n}\n\n\t\nfunction ff7(obj) {\n\tDLG1_DlgObj.hideWaitMessage();\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'7\',icon: \'css/A5System/Images/wait.gif\'});\n\tvar _onOffline = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\tobj.stop();\t\n\t};\n\tvar _onServerNotAvailable = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\tobj.stop();\t\n\t};\n\t\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\t\tif(!flagOnline) _onOffline();\n\t\telse {\n\tvar _onServerIsAvailable = function() { \t\tvar _onRefreshOK = function() {\n\t\t\tobj.next();\n\t\t}\n\t\tDLG1_DlgObj.refreshDataCacheItem(\'listofinvoices\',_onRefreshOK);\n\t}\n\tDLG1_DlgObj.serverIsAvailable(9000,_onServerIsAvailable,_onServerNotAvailable);\n\t}\n\n\n}\n\n\nfunction ff8(obj) {\n\tDLG1_DlgObj.hideWaitMessage();\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'Wait...\',icon: \'css/A5System/Images/wait.gif\',waitMessageAutoCloseDelay: 8});\n\n\tvar _onOffline = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\talert(\'objectives offline\');\n\t};\n\tvar _onServerNotAvailable = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\talert(\'objectives server not available\');\n\t};\n\t\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\t\tif(!flagOnline) _onOffline();\n\t\telse {\n\tvar _onServerIsAvailable = function() { \t\tvar _onRefreshOK = function() {\n\t\t\tobj.next();\n\t\t}\n\t\tDLG1_DlgObj.refreshDataCacheItem(\'visitobj\',_onRefreshOK);\n\t}\n\tDLG1_DlgObj.serverIsAvailable(9000,_onServerIsAvailable,_onServerNotAvailable);\n\t}\n\n}\n\t\nfunction ff9(obj) {\n\tDLG1_DlgObj.hideWaitMessage();\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'9\',icon: \'css/A5System/Images/wait.gif\'});\n\n\tvar _onOffline = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\tobj.stop();\t\n\t};\n\tvar _onServerNotAvailable = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\tobj.stop();\t\n\t};\n\t\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\t\tif(!flagOnline) _onOffline();\n\t\telse {\n\tvar _onServerIsAvailable = function() { \t\tvar _onRefreshOK = function() {\n\t\t\tobj.next();\n\t\t}\n\t\tDLG1_DlgObj.refreshDataCacheItem(\'visittypedata\',_onRefreshOK);\n\t}\n\tDLG1_DlgObj.serverIsAvailable(9000,_onServerIsAvailable,_onServerNotAvailable);\n\t}\n\n}\n\n\nfunction ff10(obj) {\n\tDLG1_DlgObj.hideWaitMessage();\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'10\',icon: \'css/A5System/Images/wait.gif\'});\n\tvar _onOffline = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\tobj.stop();\t\n\t};\n\tvar _onServerNotAvailable = function() { \n\tDLG1_DlgObj.runAction(\'hidewait\');\n\tobj.stop();\t\n\t};\n\t\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\t\tif(!flagOnline) _onOffline();\n\t\telse {\n\tvar _onServerIsAvailable = function() { \t\tvar _onRefreshOK = function() {\n\t\tobj.next();\n\t\t\t;\n\t\t}\n\t\tDLG1_DlgObj.refreshDataCacheItem(\'supervisors\',_onRefreshOK);\n\t}\n\tDLG1_DlgObj.serverIsAvailable(9000,_onServerIsAvailable,_onServerNotAvailable);\n\t}\n\n}\n\n\n\n\nfunction ff11(obj) {\n\tDLG1_DlgObj.hideWaitMessage();\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'11\',icon: \'css/A5System/Images/wait.gif\'});\n\tif(DLG1_DlgObj._refreshControlsBasedOnClientSideDataCache) {\n\t\tDLG1_DlgObj._refreshControlsBasedOnClientSideDataCache();\t\n\t\tDLG1_DlgObj.hideWaitMessage();\n\t\tobj.next();\n\t\t}\n\t\telse {\n\t\t\tobj.stop();\n\t\t}\n\t\n\n};\n\n\n\nfunction ff12(obj) {\n\tDLG1_DlgObj.hideWaitMessage();\n\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'12\',icon: \'css/A5System/Images/wait.gif\'});\n\n\tvar _onOffline = function() { \n\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\t\tobj.stop();\t\n\t\t};\n\tvar _onServerNotAvailable = function() { \n\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\t\tobj.stop();\t\n\t\t};\n\tvar flagOnline = DLG1_DlgObj._getOnlineStatus();\n\t\tif(!flagOnline) _onOffline();\n\t\telse {\n\t\t\tvar _onServerIsAvailable = function() { \t\t\n\t\t\t\tDLG1_DlgObj.refreshDataCacheItem(\'poibal\',_onRefreshOK);\n\t\t\t}\n\t\t\tvar _onRefreshOK = function() {\n\t\t\tobj.next();\n\t\t}\n\n\t}\n\t\tDLG1_DlgObj.serverIsAvailable(9000,_onServerIsAvailable,_onServerNotAvailable);\t\n\n}\n\n\n\nfunction ff13(objj){\n\tDLG1_DlgObj.hideWaitMessage();\n//\tDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'13\',icon: \'css/A5System/Images/wait.gif\'});\n//\tvar _data=\'_seriesNames=products\';\n//\tvar _onAjaxError = function() {objj.stop(); };\n//\tvar _onOffline = function() {objj.stop();};\n//\tvar _onComplete = function() {\tobjj.next();}; \n//\tvar obj = {errorFunction: _onAjaxError, onComplete: _onComplete, deviceOfflineFunction: _onOffline};\n//\tvar _seriesNames = \'products\';\n//\tDLG1_DlgObj.refreshDataSeries(_seriesNames,obj);\n\n}\n\nfunction ff14(obj){\n\tDLG1_DlgObj.hideWaitMessage();\n\tobj.next();\n}\n\n//assume you have the 3 asynchronous functions that you want to run synchronously\nvar actions  = [ff1,ff2,ff3,ff4,ff5,ff6,ff7,ff8,ff9,ff10,ff11,ff12,ff13,ff14]; //an array of functions to execute\nvar done = function() { alert(\'Sync Completed\') } ; //function to call when done\nvar stopped = function() { alert(\'Try again with a better internet connection\') } ;//function to call if execution was stopped.\nA5.runChain(actions,\n\tfunction() { alert(\'Sync Completed\'); },\n\tstopped);\n/*\nEach of the functions that are added to the actions array must:\n1. take a single input parameter.\nFor example: function function1(obj) { ....}\n2. call either the .next() or .stop() method of the object passed into the function.\nFor example, if the function has an onSuccess callback, the onSuccess will execute: obj.next()\nIf the function has an onError callback, the onError will execute: obj.stop(\'Reason for stopping\').\nThis will stop the execution of the functions in the array.\n3. functions can pass values onto the subsequent function by setting values in the obj.parameters object.\nFor example: obj.parameters.value1 = \'value1\'\n4. inside each function the \'this\' scope is the same as the optional \'context\' that is passed in when A5.runChain() is called\nif a function sets a property on \'this\', subsequent functions will be able to see that property.\n(this is another way to pass data from one function to another. the advantage of this method over using \'parameters\'\ndescribed in the previous point is that you can use the context object to pass values to the first function in the chain)\nHere is an example of how the function must be defined:\nfunction function1(obj) {\n\tvar onSuccess = function() { obj.parameters.param1 = \'somevalue\'; obj.next() }\n\tvar onError = function() { obj.stop() }\n\tSomeAsyncFunction(onSuccess,onError);\n}\n*/';
DLG1_DlgObj._actions['readprice'] = '/* actionJavascript:cd39ddb1-e28a-43cb-8b65-82601647e5a2    */\nvar _onOffline = function() { \n\n};\nvar _onServerNotAvailable = function() { \n;\n};\nvar _onSuccess = function(data) { \nalert(\'read\');\nconsole.log(data);\nmprice = data[0].price ;\n;\n};\nvar _onFail = function() { \n;\n};\nvar _filter = \'data.PRICELISTID == 3 && data.itemid ==315\';\nvar _order = \'\';\nDLG1_DlgObj.getFromDataCache(\'prices\',_onSuccess,_onFail,_filter,_order,_onOffline,_onServerNotAvailable);';
DLG1_DlgObj._actions['refreshMedRepData'] = 'DLG1_DlgObj.runAction(\'refreshmedrepcombo\');';
DLG1_DlgObj._actions['refreshmedrepcombo'] = 'var _onComplete = function(obj) {\n\n\nvar _d = \'\';\n _d = [[\'\',\'\']];\n for(var i = 0; i < obj.medreps.length; i++) {\n  _d.push( [obj.medreps[i].MEDREPNAME, obj.medreps[i].ID]);\n }\n DLG1_DlgObj.populateDropdownBox(\'MEDREP\',_d,true);;\n}\nDLG1_DlgObj.readDataCacheItems(\'medreps\',_onComplete);';
DLG1_DlgObj._actions['showskipwindow'] = '/* actionJavascript:d4356f06-cf7c-4798-ab97-620c3ca490b8  */\nDLG1_DlgObj.showContainerWindow(this,\'WINDOW_SKIPREAS\');';
DLG1_DlgObj._actions['SkipStop'] = '/* actionJavascript:2d636a91-3f17-4a92-957e-89d7d2810ab0    */\nvar _html = \'<div style="display:inline-block;">Do You want to skip this stop?</div>\';\nvar _options = {\n\t"className": "",\n\t"style": "box-shadow: 0px 2px 6px 2px rgba(0,0,0,.25);background: rgba(0,0,0,.8);color: #fff;border: 1px solid rgba(0,0,0,.8);border-radius: 4px;",\n\t"buttons": [{"html": "Yes","onClick": function() { DLG1_DlgObj.runAction(\'showskipwindow\');},"style": ""},{"html": "No","onClick": function() { },"style": ""}],\n\t"close": {\n\t\t"show": true,\n\t\t"icon": "svgIcon=#alpha-icon-x:icon{fill: #fff}",\n\t\t"iconHover": "svgIcon=#alpha-icon-xCircle:icon{fill: #fff}"\n\t},\n\t"duration": 5000,\n\t"animation": {\n\t\t"show": {\n\t\t\t"type": "auto",\n\t\t\t"duration": 600\n\t\t},\n\t\t"hide": {\n\t\t\t"type": "auto",\n\t\t\t"duration": 600\n\t\t}\n\t}\n};\nDLG1_DlgObj.transientMessage(\'bottom-left\',_html,_options);';
DLG1_DlgObj._actions['REFRESHVACATIONLIST'] = '/* actionJavascript:9f3cbeec-21bd-402d-8142-2d0f4a8ea1a3 */\n/*\nTIP: For lists based on TransForm you can set these properties in the object that is passed in: \n- transFormMetaDataFilter, \n- transFormMetaDataFilterParameters (a crlf string with format: value|||type|argumentName)\n- transFormFormDataFilterJavascript\n- transFormAPIKey\n\n*/\nvar lObj = DLG1_DlgObj.getControl(\'LSTVACATION\');\nvar _flagCSFirestore = false;\n\tif(lObj) { \n\t\tif(lObj._dataSourceType.toLowerCase() == \'firestore\' && lObj._firestore.executeWhere.toLowerCase() == \'client\') { \n\t\t\t//alert(\'Firestore: must do a cient side refresh\');\n\t\t\tlObj.__csRefresh();\n\t\t\t_flagCSFirestore = true;\n\t\t}\n\t}\n\nvar options = {\n\tkeepFocusOnCurrentSelection: true,\n\tsetFocusToValue: \'\',\n\trefreshDependentLists: true,\n\tonlyRefreshDependentLists: false,\n\tpreserveCurrentFilterOrder: false,\n\tmode: \'incremental\',\n\tajaxFailed: function() { \n\n},\n\toffline: function() { \n\n},\n\tcheckIfServerAvailable: true,\n\tserverAvailableTimeout: 9000,\n\tonServerNoAvailable: function() { \nalert(\'The server is not available\');\n},\n\tperformSpeedTest: false,\n\tamountOfDataToSend: \'.1MB\',\n\tmaxSpeedTestDuration: 300,\n\tonPoorConnection: function() { \n\n},\n\tajaxcallbacktimeout: 10000\n};\nif(typeof _flagCSFirestore == \'undefined\') _flagCSFirestore = false; \nif(!_flagCSFirestore) DLG1_DlgObj.refreshListData(\'LSTVACATION\',options);';
DLG1_DlgObj._actions['refreshpoilist'] = '/* actionJavascript:abb44de5-55a9-4c02-a078-b1347e80172d */\n/*\nTIP: For lists based on TransForm you can set these properties in the object that is passed in: \n- transFormMetaDataFilter, \n- transFormMetaDataFilterParameters (a crlf string with format: value|||type|argumentName)\n- transFormFormDataFilterJavascript\n- transFormAPIKey\n\n*/\nvar lObj = DLG1_DlgObj.getControl(\'LSTPOI\');\nvar _flagCSFirestore = false;\n\tif(lObj) { \n\t\tif(lObj._dataSourceType.toLowerCase() == \'firestore\' && lObj._firestore.executeWhere.toLowerCase() == \'client\') { \n\t\t\t//alert(\'Firestore: must do a cient side refresh\');\n\t\t\tlObj.__csRefresh();\n\t\t\t_flagCSFirestore = true;\n\t\t}\n\t}\n\nvar options = {\n\tkeepFocusOnCurrentSelection: true,\n\tsetFocusToValue: \'\',\n\trefreshDependentLists: true,\n\tonlyRefreshDependentLists: false,\n\tpreserveCurrentFilterOrder: false,\n\tmode: \'incremental\',\n\tajaxFailed: function() { \n\n},\n\toffline: function() { \n\n},\n\tcheckIfServerAvailable: true,\n\tserverAvailableTimeout: 9000,\n\tonServerNoAvailable: function() { \nalert(\'The server is not available\');\n},\n\tperformSpeedTest: false,\n\tamountOfDataToSend: \'.1MB\',\n\tmaxSpeedTestDuration: 300,\n\tonPoorConnection: function() { \n\n},\n\tajaxcallbacktimeout: 10000\n};\nif(typeof _flagCSFirestore == \'undefined\') _flagCSFirestore = false; \nif(!_flagCSFirestore) DLG1_DlgObj.refreshListData(\'LSTPOI\',options);';
DLG1_DlgObj._actions['waitsaving'] = '/* actionJavascript:02065e2a-5fc2-4888-afd3-66f9ad29cadc */\nDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'Saving...\',icon: \'css/A5System/Images/wait.gif\',waitMessageAutoCloseDelay: 100000});';
DLG1_DlgObj._actions['refreshvisithead'] = '/* actionJavascript:75002506-52d2-4b9f-a267-161e38abec4f    */\n/*\nTIP: For lists based on TransForm you can set these properties in the object that is passed in: \n- transFormMetaDataFilter, \n- transFormMetaDataFilterParameters (a crlf string with format: value|||type|argumentName)\n- transFormFormDataFilterJavascript\n- transFormAPIKey\n\n*/\nvar lObj = DLG1_DlgObj.getControl(\'LSTVISITHEAD\');\nvar _flagCSFirestore = false;\n\tif(lObj) { \n\t\tif(lObj._dataSourceType.toLowerCase() == \'firestore\' && lObj._firestore.executeWhere.toLowerCase() == \'client\') { \n\t\t\t//alert(\'Firestore: must do a cient side refresh\');\n\t\t\tlObj.__csRefresh();\n\t\t\tlObj.refresh();\n\t\t\t_flagCSFirestore = true;\n\t\t}\n\t}\n\nvar onCompleteCode = function() { //alert("visithead refresh check action refresh visihead to remove");};\nvar callbackId = A5.UUID();\nvar objx = DLG1_DlgObj._ajaxCallbackCompleteCode;\nobjx[callbackId] = onCompleteCode;\n\t\t\t\n\n\nvar options = {\n\tkeepFocusOnCurrentSelection: true,\n\tsetFocusToValue: \'\',\n\trefreshDependentLists: true,\n\tonlyRefreshDependentLists: false,\n\tpreserveCurrentFilterOrder: true,\n\tmode: \'incremental\',\n\tajaxFailed: function() { \n\n},\n\toffline: function() { \n\n},\n\tcheckIfServerAvailable: false,\n\tserverAvailableTimeout: 2000,\n\tonServerNoAvailable: function() { \nalert(\'The server is not available\');\n},\n\tperformSpeedTest: false,\n\tamountOfDataToSend: \'.1MB\',\n\tmaxSpeedTestDuration: 300,\n\tonPoorConnection: function() { \n\n},\n\tajaxcallbacktimeout: 10000,\n\tcallbackId: callbackId\n};\nif(typeof _flagCSFirestore == \'undefined\') _flagCSFirestore = false; \nif(!_flagCSFirestore) DLG1_DlgObj.refreshListData(\'LSTVISITHEAD\',options);';
DLG1_DlgObj._actions['fillitemslist'] = '// Offline and server unavailability callbacks (empty by default)\n\n// Success callback: process the returned data\nvar _onSuccess = function(data) { \n\tconsole.log(\'data casche\');\n\tconsole.log(data);\n\n\t// Populate list items shortly after data is returned\n\tsetTimeout(function() {\n\t\tvar listObj = DLG1_DlgObj.getControl(\'LSTITEMS\');\n\t\tlistObj.populate(data);\n\n\t}, 150);\n\n\t// Process list items further after a short delay\n\tsetTimeout(function() {\n\t\tvar lObj = DLG1_DlgObj.getControl(\'LSTITEMS\');\n\t\tvar mFlag = DLG1_DlgObj.getValue(\'flagadditem\');\n\t\tvar data = DLG1_DlgObj.getListData(\'LSTITEMS\');\n\n\t\t// Process items based on flag value\n\t\tif (mFlag == 1) {\n\t\t\t// Update quantity from sample list\n\t\t\tfunction fillqty(obj) {\n\t\t\t\tvar lObjitems = DLG1_DlgObj.getControl(\'LSTITEMS\');\n\t\t\t\tvar lobjsamp = DLG1_DlgObj.getControl(\'LSTSAMPLES\');\n\t\t\t\tconsole.log(lObjitems);\n\t\t\t\tconsole.log(lobjsamp._data);\n\n\t\t\t\tfor (var i = 0; i < lObjitems._data.length; i++) {\n\t\t\t\t\tvar mProdId = lObjitems._data[i].id;\n\t\t\t\t\tfor (var s = 0; s < lobjsamp._data.length; s++) {\n\t\t\t\t\t\tvar msampprod = lobjsamp._data[s].prodid;\n\t\t\t\t\t\tif (mProdId == msampprod) {\n\t\t\t\t\t\t\tvar msampqty = lobjsamp._data[s].qty;\n\t\t\t\t\t\t\tlObjitems._data[i].qty = msampqty;\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj.next();\n\t\t\t}\n\n\t\t\t// Change list layout to \'sample\'\n\t\t\tfunction chl(obj) {\t\t\n\t\t\t\tDLG1_DlgObj.getControl(\'LSTITEMS\').selectCurrentLayout(\'sample\');\n\t\t\t\tconsole.log(DLG1_DlgObj.getControl(\'LSTITEMS\'));\n\t\t\t\tobj.next();\n\t\t\t}\n\n\t\t\tvar actions = [fillqty, chl];\n\t\t\tA5.runChain(actions, function() { }, function() { alert(\'execution was stopped\'); });\n\t\t}\n\n\t\telse if (mFlag == 2) {\n\t\t\t// Update items with discussed values\n\t\t\tfunction fillqty(obj) {\n\t\t\t\tvar lObjitems = DLG1_DlgObj.getControl(\'LSTITEMS\');\n\t\t\t\tvar lobjdisc = DLG1_DlgObj.getControl(\'LSTDISCUSSED\');\n\n\t\t\t\tfor (var i = 0; i < lObjitems._data.length; i++) {\n\t\t\t\t\tvar mProdId = lObjitems._data[i].id;\n\t\t\t\t\tfor (var s = 0; s < lobjdisc._data.length; s++) {\n\t\t\t\t\t\tvar mdiscprod = lobjdisc._data[s].product_id;\n\t\t\t\t\t\tif (mProdId == mdiscprod) {\n\t\t\t\t\t\t\tlObjitems._data[i].discusedtype = lobjdisc._data[s].discussedtype;\n\t\t\t\t\t\t\tlObjitems._data[i].discusedcoment = lobjdisc._data[s].coment;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj.next();\n\t\t\t}\n\n\t\t\t// Change list layout to \'discus\'\n\t\t\tfunction chl(obj) {\n\t\t\t\tDLG1_DlgObj.getControl(\'LSTITEMS\').selectCurrentLayout(\'discus\');\n\t\t\t\tconsole.log(DLG1_DlgObj.getControl(\'LSTITEMS\'));\n\t\t\t\tobj.next();\n\t\t\t}\n\n\t\t\tvar actions = [fillqty, chl];\n\t\t\tA5.runChain(actions, function() { }, function() { alert(\'execution was stopped\'); });\n\t\t}\n\n\t\telse if (mFlag == 3) {\n\t\t\t// Update items from orders list\n\t\t\tfunction fillqty(obj) {\n\t\t\t\tvar lObjitems = DLG1_DlgObj.getControl(\'LSTITEMS\');\n\t\t\t\tvar lobjord = DLG1_DlgObj.getControl(\'lstorders\');\n\n\t\t\t\tfor (var i = 0; i < lObjitems._data.length; i++) {\n\t\t\t\t\tvar mProdId = lObjitems._data[i].id;\n\t\t\t\t\tfor (var s = 0; s < lobjord._data.length; s++) {\n\t\t\t\t\t\tvar mordprodid = lobjord._data[s].itemid;\n\t\t\t\t\t\tif (mProdId == mordprodid) {\n\t\t\t\t\t\t\tvar data = {\n\t\t\t\t\t\t\t\tqty: lobjord._data[s].qty,\n\t\t\t\t\t\t\t\tbonus: lobjord._data[s].bonusqty,\n\t\t\t\t\t\t\t\tprice: lobjord._data[s].price,\n\t\t\t\t\t\t\t\tdiscount: lobjord._data[s].discount,\n\t\t\t\t\t\t\t\tbonusitemid: lobjord._data[s].bonusitemid\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tDLG1_DlgObj.getControl(\'LSTITEMS\').updateTableRow(i, data);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj.next();\n\t\t\t}\n\n\t\t\t// Change list layout to \'default\'\n\t\t\tfunction chl(obj) {\n\t\t\t\tDLG1_DlgObj.getControl(\'LSTITEMS\').selectCurrentLayout(\'default\');\n\t\t\t\tconsole.log(DLG1_DlgObj.getControl(\'LSTITEMS\'));\n\t\t\t\tobj.next();\n\t\t\t}\n\n\t\t\tvar actions = [ chl];\n\t\t\tA5.runChain(actions, function() { }, function() { alert(\'execution was stopped\'); });\n\t\t}\n\n\t\telse if (mFlag == 4) {\n\t\t\t// Update items from invoices list\n\t\t\tfunction fillqty(obj) {\n\t\t\t\tvar lObjitems = DLG1_DlgObj.getControl(\'LSTITEMS\');\n\t\t\t\tvar lobjinv = DLG1_DlgObj.getControl(\'lstinvoices\');\n\n\t\t\t\tfor (var i = 0; i < lObjitems._data.length; i++) {\n\t\t\t\t\tvar mProdId = lObjitems._data[i].id;\n\t\t\t\t\tfor (var s = 0; s < lobjinv._data.length; s++) {\n\t\t\t\t\t\tvar mordprodid = lobjinv._data[s].itemcode;\n\t\t\t\t\t\tif (mProdId == mordprodid) {\n\t\t\t\t\t\t\tlObjitems._data[i].qty = lobjinv._data[s].qty;\n\t\t\t\t\t\t\tlObjitems._data[i].bonus = lobjinv._data[s].Bonusqty;\n\t\t\t\t\t\t\tlObjitems._data[i].price = lobjinv._data[s].unitprice;\n\t\t\t\t\t\t\tlObjitems._data[i].discount = lobjinv._data[s].discount;\n\t\t\t\t\t\t\tlObjitems._data[i].bonusitemid = lobjinv._data[s].bonusitemid;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tobj.next();\n\t\t\t}\n\n\t\t\t// Change list layout to \'default\'\n\t\t\tfunction chl(obj) {\n\t\t\t\tDLG1_DlgObj.getControl(\'LSTITEMS\').selectCurrentLayout(\'default\');\n\t\t\t\tconsole.log(DLG1_DlgObj.getControl(\'LSTITEMS\'));\n\t\t\t\tobj.next();\n\t\t\t}\n\n\t\t\tvar actions = [chl];\n\t\t\tA5.runChain(actions, function() { }, function() { alert(\'execution was stopped\'); });\n\t\t}\n\n\t\t// Hide wait indicator after processing is complete\n\t\tsetTimeout(function() {\n\t\t\tDLG1_DlgObj.runAction(\'hidewait\');\n\t\t}, 350);\n\n\t}, 500);\n};\n\nvar _onFail = function() { };\n\nvar _filter = \'data.custid == 0 || data.custid == \' + DLG1_DlgObj.getValue(\'tmppoiid\');\nvar _order = \'\';\n\n// Refresh then read items from data cache or server\n\nDLG1_DlgObj.getFromDataCache(\'items\',_onSuccess,_onFail,_filter,_order);';
DLG1_DlgObj._actions['Open_Invoice_List'] = 'DLG1_ACTION_OpenInvoiceList(1,\'1\',this);';
DLG1_DlgObj._actions['Open_Receipt_List'] = 'DLG1_ACTION_OpenReceiptList(1,\'1\',this);';
DLG1_DlgObj._actions['open_Cylcle'] = 'DLG1_ACTION_openCylcle(1,\'1\',this);';
DLG1_DlgObj._actions['Open_VisitHistoryD'] = 'DLG1_ACTION_OpenVisitHistoryD(1,\'1\',this);';
DLG1_DlgObj._actions['Open_ListOfOrders'] = 'DLG1_ACTION_OpenListOfOrders(1,\'1\',this);';
DLG1_DlgObj._actions['Open_Message'] = 'DLG1_ACTION_OpenMessage(1,\'1\',this);';
DLG1_DlgObj._actions['Open_Questionaire'] = 'DLG1_ACTION_OpenQuestionaire(1,\'1\',this);';
DLG1_DlgObj._actions['open_visitHistory'] = 'DLG1_ACTION_openvisitHistory(1,\'1\',this);';
DLG1_DlgObj._actions['AddMarkerOr'] = '/* actionJavascript:016ea8e3-d6c6-4d1a-a111-d1ec0f832032  */\nvar mapObj = DLG1_DlgObj.getControl(\'map1\');\nvar settings = {\n\ticon: {\n\t\tanchor: {\n\t\t}\n\t},\n\tdetail: {\n\t\thas: true\n\t},\n\toverlay: {\n\t\thas: false,\n\t\tdata: \'1mi\',\n\t\tfill: {\n\t\t\topacity: 1\n\t\t},\n\t\tstroke: {\n\t\t\twidth: 1,\n\t\t\topacity: 1\n\t\t}\n\t},\n\tdraggable: false,\n\temphasis: true,\n\tanimation: \'bounce\',\n\temphasize: 1000,\n\tonAddComplete: function(markerSettings,markerObject) { this.viewMarkers(\'MYMARKER_1\');   }\n};\nvar arr = [];\nvar col_LAT = DLG1_DlgObj.getValue(\'list::LSTOFFROUTE::LAT\');\narr.push(col_LAT);\nvar col_LONT = DLG1_DlgObj.getValue(\'list::LSTOFFROUTE::LONT\');\narr.push(col_LONT);\nvar loc = arr;\n;\nif(loc) mapObj.addMarker(\'MYMARKER_1\',loc,settings);';
DLG1_DlgObj._actions['Open_Dashboard'] = 'DLG1_ACTION_OpenDashboard(1,\'1\',this);';
DLG1_DlgObj._actions['Open_Message2'] = 'DLG1_ACTION_OpenMessage2(1,\'1\',this);';
DLG1_DlgObj._actions['updatepoiloc_existing'] = '/* actionJavascript:347ae10a-ee94-45ab-baa4-7052b0f1dec7                      */\nDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'Wait...\',icon: \'css/A5System/Images/wait.gif\',waitMessageAutoCloseDelay: 20000});\nvar mapObj = DLG1_DlgObj.getControl(\'map1\');\nvar settings = {\n\ticon: {\n\t\tanchor: {\n\t\t}\n\t},\n\tdetail: {\n\t\thas: false\n\t},\n\toverlay: {\n\t\thas: false,\n\t\tdata: \'1mi\',\n\t\tfill: {\n\t\t\topacity: 1\n\t\t},\n\t\tstroke: {\n\t\t\twidth: 1,\n\t\t\topacity: 1\n\t\t}\n\t},\n\tdraggable: true,\n\temphasis: false,\n\temphasize: false,\n\tanimation: \'drop\',\n\tonDragEnd: function(data) { var lat = data.latLng.lat();\nvar lng = data.latLng.lng();\nDLG1_DlgObj.setValue(\'DEVLAT\',lat);\nDLG1_DlgObj.setValue(\'DEVLONG\',lng); },\n\tonAddComplete: function(markerSettings,markerObject) { this.viewMarkers(\'MYLOC\');  console.log(markerSettings);\nconsole.log(markerObject);\nvar marker = markerObject;\nvar position = marker.getPosition();\nvar latitude = position.lat();\nvar longitude = position.lng();\nconsole.log("Marker Latitude: " + latitude);\nconsole.log("Marker Longitude: " + longitude);\nDLG1_DlgObj.setValue(\'DEVLAT\',latitude);\nDLG1_DlgObj.setValue(\'DEVLONG\',longitude); }\n};\nvar arr = [];\nvar col_DEVLAT = DLG1_DlgObj.getValue(\'DEVLAT\');\narr.push(col_DEVLAT);\nvar col_DEVLONG = DLG1_DlgObj.getValue(\'DEVLONG\');\narr.push(col_DEVLONG);\nvar loc = arr;\n;\nif(loc) mapObj.addMarker(\'MYLOC\',loc,settings);\n\nDLG1_DlgObj.panelSetActive(\'PANELCARD_6\',true);\nDLG1_DlgObj.hideWaitMessage();';
DLG1_DlgObj._actions['updatemedreppass'] = '/* actionJavascript:3ccd964a-9f97-4057-aa49-dcf83f2422d2          */\nfunction tempfunction_24152180_af88_4af8_a852_406730c18275() {\nDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'Wait...\',icon: \'css/A5System/Images/wait.gif\',waitMessageAutoCloseDelay: 10000});\n}\n\nfunction tempfunction_9d6bf4f1_8e32_4785_a914_be74878d9e0c() {\n\nDLG1_DlgObj.ajaxCallback(\'\',\'\',\'system:CRUDaction\',\'\',\'_xbfunction=CRUDAction_465fb0d4870a48599f8e24e25dcf902f\');\n}\n\nfunction tempfunction_8b5198b3_232c_44d3_b654_d4222321dbb6() {\nsynccompanyinfo();\n\n}\n\nfunction tempfunction_f8112ffe_afe5_4e47_9b4a_66e74933b8b5() {\nDLG1_DlgObj.hideWaitMessage();\n}\n\nfunction tempfunction_bb77e0e5_77b1_4aeb_9425_2eaef1b48806() {\nsetTimeout(function(){\n\n//A button on the UX will close the window in which the UX is hosted.\nDLG1_DlgObj.closeContainerWindow(\'WINDOW_16\');\n\n},1500)\n}\n\n\nA5.executeThisThenThat(tempfunction_24152180_af88_4af8_a852_406730c18275,tempfunction_9d6bf4f1_8e32_4785_a914_be74878d9e0c,tempfunction_8b5198b3_232c_44d3_b654_d4222321dbb6,tempfunction_f8112ffe_afe5_4e47_9b4a_66e74933b8b5,tempfunction_bb77e0e5_77b1_4aeb_9425_2eaef1b48806);';
DLG1_DlgObj._actions['updateexcellenceppass'] = '/* actionJavascript:0eab03aa-86a8-4859-b70e-006809eaa31a              */\nfunction tempfunction_cdffd3ec_59ee_4f70_b851_1eb8e69ac700() {\nDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'Wait...\',icon: \'css/A5System/Images/wait.gif\',waitMessageAutoCloseDelay: 10000});\n}\n\nfunction tempfunction_50b7c745_444e_4ab5_8cb6_50a3c1026e81() {\n\nDLG1_DlgObj.ajaxCallback(\'\',\'\',\'system:CRUDaction\',\'\',\'_xbfunction=CRUDAction_f7c505a4e80c405c842d1648502f9363\');\n}\n\nfunction tempfunction_15383b2b_3176_4c7f_8c6c_34725099f6a1() {\nsynccompanyinfo()\n}\n\nfunction tempfunction_fd8ba039_cc2a_4ff6_b224_c7d34b97337e() {\nDLG1_DlgObj.hideWaitMessage();\n}\n\nfunction tempfunction_a40bee0c_7b86_401a_8392_445eb4006193() {\nsetTimeout(function(){\n\n//A button on the UX will close the window in which the UX is hosted.\nDLG1_DlgObj.closeContainerWindow(\'WINDOW_16\');\n\n},1500)\n}\n\n\nA5.executeThisThenThat(tempfunction_cdffd3ec_59ee_4f70_b851_1eb8e69ac700,tempfunction_50b7c745_444e_4ab5_8cb6_50a3c1026e81,tempfunction_15383b2b_3176_4c7f_8c6c_34725099f6a1,tempfunction_fd8ba039_cc2a_4ff6_b224_c7d34b97337e,tempfunction_a40bee0c_7b86_401a_8392_445eb4006193);';
DLG1_DlgObj._actions['updatesuppass'] = '/* actionJavascript:d63793f0-0ca4-459a-8bc9-c014b33634fc           */\nfunction tempfunction_75f9b15d_f8fe_45f8_8cd2_0bd6e6434d56() {\nDLG1_DlgObj.showWaitMessage(\'panel:PANELNAVIGATOR_1\',{useCSSAnimation: false,message: \'Wait...\',icon: \'css/A5System/Images/wait.gif\',waitMessageAutoCloseDelay: 10000});\n}\n\nfunction tempfunction_550ada8f_7e79_4c03_ada2_f0bf15c73ca1() {\n\nDLG1_DlgObj.ajaxCallback(\'\',\'\',\'system:CRUDaction\',\'\',\'_xbfunction=CRUDAction_43db5571510b4a9b9747437f96a70009\');\n}\n\nfunction tempfunction_f3b074ea_0c36_4c33_a85c_1cb2bf7189f1() {\nsynccompanyinfo();\n\n}\n\nfunction tempfunction_8e76a01a_4814_405c_8d9e_7068826152ab() {\nDLG1_DlgObj.hideWaitMessage();\n}\n\nfunction tempfunction_881ec09a_4527_4002_8abe_9f77fc9417c2() {\nsetTimeout(function(){\n\n//A button on the UX will close the window in which the UX is hosted.\nDLG1_DlgObj.closeContainerWindow(\'WINDOW_16\');\n\n},1500)\n}\n\n\nA5.executeThisThenThat(tempfunction_75f9b15d_f8fe_45f8_8cd2_0bd6e6434d56,tempfunction_550ada8f_7e79_4c03_ada2_f0bf15c73ca1,tempfunction_f3b074ea_0c36_4c33_a85c_1cb2bf7189f1,tempfunction_8e76a01a_4814_405c_8d9e_7068826152ab,tempfunction_881ec09a_4527_4002_8abe_9f77fc9417c2);';
DLG1_DlgObj._actions['fillmessages'] = '/* actionJavascript:13d9ea60-6b17-40e1-b9f2-a8cc0565ef50   */\nvar rowNum = 1;\nDLG1_DlgObj.ajaxCallback(\'\',rowNum,\'__system__5840c8c16220403ca1f84cc114a7555b\');';
DLG1_DlgObj._actions['savedsuccessfully'] = '/* actionJavascript:d53d0b3d-0e33-4c42-8c9b-c3a6b57e2e57 */\nvar _html = \'<div style="display:inline-block;">Saved successfully</div>\';\nvar _options = {\n\t"className": "",\n\t"style": "box-shadow: 0px 2px 6px 2px rgba(0,0,0,.25);background: rgba(0,0,0,.8);color: #fff;border: 1px solid rgba(0,0,0,.8);border-radius: 4px;",\n\t"close": {\n\t\t"show": true,\n\t\t"icon": "svgIcon=#alpha-icon-x:icon{fill: #fff}",\n\t\t"iconHover": "svgIcon=#alpha-icon-xCircle:icon{fill: #fff}"\n\t},\n\t"duration": 5000,\n\t"animation": {\n\t\t"show": {\n\t\t\t"type": "auto",\n\t\t\t"duration": 600\n\t\t},\n\t\t"hide": {\n\t\t\t"type": "auto",\n\t\t\t"duration": 600\n\t\t}\n\t}\n};\nDLG1_DlgObj.transientMessage(\'center\',_html,_options);';
DLG1_DlgObj._actions['Open_Loading'] = 'DLG1_ACTION_OpenLoading(1,\'1\',this);';
;
DLG1_DlgObj._ajs = {};
if (typeof DLG1_DlgObj.geolocation == 'undefined') {
	DLG1_DlgObj.geolocation={};
	DLG1_DlgObj.geolocation.accuracy = null;
	DLG1_DlgObj.geolocation.altitude = null;
	DLG1_DlgObj.geolocation.altitudeAccuracy = null;
	DLG1_DlgObj.geolocation.heading = null;
	DLG1_DlgObj.geolocation.latitude = null;
	DLG1_DlgObj.geolocation.longitude = null;
	DLG1_DlgObj.geolocation.speed = null;
	DLG1_DlgObj.geolocation.timestamp = null;
	DLG1_DlgObj.getGeolocation = function() {
		return DLG1_DlgObj.geolocation;
	}
}
DLG1_DlgObj.geoLocateSuccess_599456d1eb5d464386e0de36cfaf28bc =function(pos){
	DLG1_DlgObj.geolocation.accuracy = pos.coords.accuracy;
	DLG1_DlgObj.geolocation.altitude = pos.coords.altitude;
	DLG1_DlgObj.geolocation.altitudeAccuracy = pos.coords.altitudeAccuracy;
	DLG1_DlgObj.geolocation.heading = pos.coords.heading;
	DLG1_DlgObj.geolocation.latitude = pos.coords.latitude;
	DLG1_DlgObj.geolocation.longitude = pos.coords.longitude;
	DLG1_DlgObj.geolocation.speed = pos.coords.speed;
	DLG1_DlgObj.geolocation.timestamp = pos.timestamp;
	try{
		DLG1_DlgObj.populateControls_fireCallback_599456d1eb5d464386e0de36cfaf28bc();
	}
	catch(e){
		alert('Callback function error : ' + e.message);
	}	
}
DLG1_DlgObj.geoLocateFailed_599456d1eb5d464386e0de36cfaf28bc = function(error){
	switch(error.code){
		case 0: 
			alert('Geolocation error : An unknown error occured.');
			break;
		case 1: 
			alert('Geolocation error : Permission to use GeoLocation Service denied by user');
			break;
		case 2: 
			alert('Geolocation error : Position not available');
			break;
		case 3: 
			alert('Geolocation error : Timeout');
			break;		
	}
}
// not currently in use but was previously defined as {dilaog.object}.geolocation.clearWatch
DLG1_DlgObj.geolocation.clearWatch_599456d1eb5d464386e0de36cfaf28bc = function(){
	if (typeof DLG1_DlgObj._watchID_599456d1eb5d464386e0de36cfaf28bc != 'undefined'){
		navigator.geolocation.clearWatch(DLG1_DlgObj._watchID_599456d1eb5d464386e0de36cfaf28bc);
		delete DLG1_DlgObj._watchID_599456d1eb5d464386e0de36cfaf28bc;	
	}
}
DLG1_DlgObj.populateControls_fireCallback_599456d1eb5d464386e0de36cfaf28bc = function(){
DLG1_DlgObj.setValue('ACCURACY',DLG1_DlgObj.geolocation.accuracy );
DLG1_DlgObj.setValue('ALTITUDE',DLG1_DlgObj.geolocation.altitude );
DLG1_DlgObj.setValue('ALTITUDEACCUR',DLG1_DlgObj.geolocation.altitudeAccuracy );
DLG1_DlgObj.setValue('HEADING',DLG1_DlgObj.geolocation.heading );
DLG1_DlgObj.setValue('LATX',DLG1_DlgObj.geolocation.latitude );
DLG1_DlgObj.setValue('LATY',DLG1_DlgObj.geolocation.longitude );
DLG1_DlgObj.setValue('SPEED',DLG1_DlgObj.geolocation.speed );
DLG1_DlgObj.setValue('TIMESTANPD',DLG1_DlgObj.geolocation.timestamp );
checkloc();}
DLG1_DlgObj._ajs = {};
if (typeof DLG1_DlgObj.geolocation == 'undefined') {
	DLG1_DlgObj.geolocation={};
	DLG1_DlgObj.geolocation.accuracy = null;
	DLG1_DlgObj.geolocation.altitude = null;
	DLG1_DlgObj.geolocation.altitudeAccuracy = null;
	DLG1_DlgObj.geolocation.heading = null;
	DLG1_DlgObj.geolocation.latitude = null;
	DLG1_DlgObj.geolocation.longitude = null;
	DLG1_DlgObj.geolocation.speed = null;
	DLG1_DlgObj.geolocation.timestamp = null;
	DLG1_DlgObj.getGeolocation = function() {
		return DLG1_DlgObj.geolocation;
	}
}
DLG1_DlgObj.geoLocateSuccess_e53ef2c19a3242b6a53b4c288189d536 =function(pos){
	DLG1_DlgObj.geolocation.accuracy = pos.coords.accuracy;
	DLG1_DlgObj.geolocation.altitude = pos.coords.altitude;
	DLG1_DlgObj.geolocation.altitudeAccuracy = pos.coords.altitudeAccuracy;
	DLG1_DlgObj.geolocation.heading = pos.coords.heading;
	DLG1_DlgObj.geolocation.latitude = pos.coords.latitude;
	DLG1_DlgObj.geolocation.longitude = pos.coords.longitude;
	DLG1_DlgObj.geolocation.speed = pos.coords.speed;
	DLG1_DlgObj.geolocation.timestamp = pos.timestamp;
	try{
		DLG1_DlgObj.populateControls_fireCallback_e53ef2c19a3242b6a53b4c288189d536();
	}
	catch(e){
		alert('Callback function error : ' + e.message);
	}	
}
DLG1_DlgObj.geoLocateFailed_e53ef2c19a3242b6a53b4c288189d536 = function(error){
	switch(error.code){
		case 0: 
			alert('Geolocation error : An unknown error occured.');
			break;
		case 1: 
			alert('Geolocation error : Permission to use GeoLocation Service denied by user');
			break;
		case 2: 
			alert('Geolocation error : Position not available');
			break;
		case 3: 
			alert('Geolocation error : Timeout');
			break;		
	}
}
// not currently in use but was previously defined as {dilaog.object}.geolocation.clearWatch
DLG1_DlgObj.geolocation.clearWatch_e53ef2c19a3242b6a53b4c288189d536 = function(){
	if (typeof DLG1_DlgObj._watchID_e53ef2c19a3242b6a53b4c288189d536 != 'undefined'){
		navigator.geolocation.clearWatch(DLG1_DlgObj._watchID_e53ef2c19a3242b6a53b4c288189d536);
		delete DLG1_DlgObj._watchID_e53ef2c19a3242b6a53b4c288189d536;	
	}
}
DLG1_DlgObj.populateControls_fireCallback_e53ef2c19a3242b6a53b4c288189d536 = function(){
DLG1_DlgObj.setValue('LATITUDE',DLG1_DlgObj.geolocation.latitude );
DLG1_DlgObj.setValue('LONGITUDE',DLG1_DlgObj.geolocation.longitude );
}
window['DLG1_ACTION_OpenInvoiceList'] = function(rowNum,rowId,objEle) {
var runMethod = 'ajax';
if(runMethod == 'ajax') {
if(typeof DLG1_DlgObj._onlineStatus != 'undefined') { 
	if(DLG1_DlgObj._onlineStatus == 'offline') { 
		( function() {  }() );
		DLG1_DlgObj._executeEvent('onAjaxCallbackNotAvailable', {xbasicFunctionName: '', ajaxEvent: 'OpenComponent'})
		return false;
	}
}		
};
var go = new Object();
go.ajaxFailedMessage = '';
go.ajaxCallbackTimeout = DLG1_DlgObj.ajaxCallbackTimeout;
go.objectId = objEle.id;
go.dialog2Name = 'ux_InvoiceList_Parameter';
go.type = 'dialog2';
go.alias = 'DLG1_UX_INVOICE_DICG';;
go.submitCurrentFieldValues = true;
go.sourceGridPart = 'O';
go.sourceGridRowNumber = '1';
go.workingMessage = '<img src=\'css/A5System/Images/wait.gif\' />Working...';
go.placeholderValues = 'COMPANYID='+DLG1_DlgObj.getValueNOCRLF('COMPANYID')+'||'+'String_2='+'__defaultArgValue'+'||'+'String_3='+'__defaultArgValue'+'||'+'MEDREPNAME='+DLG1_DlgObj.getValueNOCRLF('MEDREPNAME');
go.argumentBinding = 'COMPID=COMPANYID||MDAT1=String_2||MDAT2=String_3||MMEDREPN=MEDREPNAME';
go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.gridId != 'undefined') go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.dialogId != 'undefined') {
	go._thisGridAlias = DLG1_DlgObj.dialogId;
}
go._thisGridGUID = DLG1_DlgObj.componentGUID;
go._gridCurrentFilter = DLG1_DlgObj._gridFilter;
go._gridCurrentOrder = DLG1_DlgObj._gridOrder;
go._gridCurrentArguments = DLG1_DlgObj._gridArguments;
go._gridCurrentDBType = DLG1_DlgObj._gridDBType;
go.overrideSettings = 'Style_name = `Alpha-Magenta`||Style_name = `Alpha-Magenta`'+'||';
go.a5_default_path = 'C_colon_|A5Webroot|livepreview';
var panelId = DLG1_DlgObj.panelGetId('PANELCARD_42','body');
go.dialog2Div = panelId;
var obj = window[go.alias.toUpperCase() + '_DlgObj'];
if(typeof DLG1_DlgObj._embeddedUX == 'undefined') { 
	DLG1_DlgObj._embeddedUX = [];
}
if(DLG1_DlgObj._embeddedUX.indexOf(go.alias.toUpperCase()) == -1) { 
	DLG1_DlgObj._embeddedUX.push(go.alias.toUpperCase());
}
var flagCachedUX = false
if(!obj || !flagCachedUX ) { 
	//alert('initial render');
	$('panelId').innerHTML = '<div style=\'\'  id=\'GRIDDIV_panelId\'></div>'; 
	A5.component.runGenericComponent(go);if(typeof __showWaitMessage != 'undefined') __showWaitMessage.call();;
}else { 
	//alert('refresh');
	if(typeof go.specialDialogMode == 'undefined') go.specialDialogMode = 'refreshUX'
	obj.synchronizeDialog(go);
}
}
window['DLG1_ACTION_OpenReceiptList'] = function(rowNum,rowId,objEle) {
var runMethod = 'precomputed';
if(DLG1_DlgObj._embeddedMode) runMethod = 'ajax';
if(DLG1_DlgObj._staticHTMLMode) runMethod = 'precomputed';
if(runMethod == 'ajax') {
if(typeof DLG1_DlgObj._onlineStatus != 'undefined') { 
	if(DLG1_DlgObj._onlineStatus == 'offline') { 
		( function() {  }() );
		DLG1_DlgObj._executeEvent('onAjaxCallbackNotAvailable', {xbasicFunctionName: '', ajaxEvent: 'OpenComponent'})
		return false;
	}
}		
};
var go = new Object();
go.ajaxFailedMessage = '';
go.ajaxCallbackTimeout = DLG1_DlgObj.ajaxCallbackTimeout;
go.objectId = objEle.id;
go.dialog2Name = 'listofreceipts';
go.type = 'dialog2';
go.alias = 'DLG1_LISTOFRECE_HIGG';;
go.submitCurrentFieldValues = true;
go.sourceGridPart = 'O';
go.sourceGridRowNumber = '1';
go.workingMessage = '<img src=\'css/A5System/Images/wait.gif\' />Working...';
go.placeholderValues = 'MEDREPNAME='+DLG1_DlgObj.getValueNOCRLF('MEDREPNAME');
go.argumentBinding = 'MUSERNAME=MEDREPNAME';
go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.gridId != 'undefined') go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.dialogId != 'undefined') {
	go._thisGridAlias = DLG1_DlgObj.dialogId;
}
go._thisGridGUID = DLG1_DlgObj.componentGUID;
go._gridCurrentFilter = DLG1_DlgObj._gridFilter;
go._gridCurrentOrder = DLG1_DlgObj._gridOrder;
go._gridCurrentArguments = DLG1_DlgObj._gridArguments;
go._gridCurrentDBType = DLG1_DlgObj._gridDBType;
go.overrideSettings = 'Style_name = `Alpha-Magenta`||Style_name = `Alpha-Magenta`'+'||';
go.a5_default_path = 'C_colon_|A5Webroot|livepreview';
var panelId = DLG1_DlgObj.panelGetId('PANELCARD_42','body');
go.dialog2Div = panelId;
var obj = window[go.alias.toUpperCase() + '_DlgObj'];
if(typeof DLG1_DlgObj._embeddedUX == 'undefined') { 
	DLG1_DlgObj._embeddedUX = [];
}
if(DLG1_DlgObj._embeddedUX.indexOf(go.alias.toUpperCase()) == -1) { 
	DLG1_DlgObj._embeddedUX.push(go.alias.toUpperCase());
}
var flagCachedUX = false
if(!obj || !flagCachedUX ) { 
	//alert('initial render');
	$('panelId').innerHTML = '<div style=\'\'  id=\'GRIDDIV_panelId\'></div>'; 
	var runMethod = 'precomputed';
if(DLG1_DlgObj._embeddedMode) runMethod = 'ajax';
if(DLG1_DlgObj._staticHTMLMode) runMethod = 'precomputed';
if(runMethod == 'ajax')if(typeof __showWaitMessage != 'undefined') __showWaitMessage.call()
if(runMethod.toLowerCase() != 'ajax'  && typeof window['PRECOMPUTEDUX_2dd2f631bf924252925d9adc2a7e4fed_listofreceipts'] == 'function') { 
	//PRECOMPUTED_UX_COMPONENT: {functionName: 'PRECOMPUTEDUX_2dd2f631bf924252925d9adc2a7e4fed_listofreceipts', uxname: 'listofreceipts', alias: 'DLG1_LISTOFRECE_HIGG'}
	var jsToRun = PRECOMPUTEDUX_2dd2f631bf924252925d9adc2a7e4fed_listofreceipts(go);
	eval(jsToRun);
	//must run code to initialize values
	try{
		var objx = window[go.alias.toUpperCase() + '_DlgObj'];
		objx.populate(objx.originalValues[0]);
	}catch(e) {};
	if(typeof go.onLoadCompleteJavascript != 'undefined') { 
		var txt = go.onLoadCompleteJavascript.split(':')[1];
		if(typeof txt != 'undefined') { 
			if(typeof DLG1_DlgObj._ajaxCallbackCompleteCode != 'undefined') { 
				setTimeout(function() { 
					DLG1_DlgObj._ajaxCallbackCompleteCode[txt].call();
				},500);
			}
		}
	}
} else {
	A5.component.runGenericComponent(go)
}
;
}else { 
	//alert('refresh');
	if(typeof go.specialDialogMode == 'undefined') go.specialDialogMode = 'refreshUX'
	obj.synchronizeDialog(go);
}
}
window['DLG1_ACTION_openCylcle'] = function(rowNum,rowId,objEle) {
var runMethod = 'ajax';
if(runMethod == 'ajax') {
if(typeof DLG1_DlgObj._onlineStatus != 'undefined') { 
	if(DLG1_DlgObj._onlineStatus == 'offline') { 
		( function() {  }() );
		DLG1_DlgObj._executeEvent('onAjaxCallbackNotAvailable', {xbasicFunctionName: '', ajaxEvent: 'OpenComponent'})
		return false;
	}
}		
};
var go = new Object();
go.ajaxFailedMessage = '';
go.ajaxCallbackTimeout = DLG1_DlgObj.ajaxCallbackTimeout;
go.objectId = objEle.id;
go.dialog2Name = 'CyclePlan';
go.type = 'dialog2';
go.alias = 'DLG1_CYCLEPLAN_BCEB';;
go.submitCurrentFieldValues = true;
go.sourceGridPart = 'O';
go.sourceGridRowNumber = '1';
go.workingMessage = '<img src=\'css/A5System/Images/wait.gif\' />Working...';
go.placeholderValues = 'MEDREPNAME='+DLG1_DlgObj.getValueNOCRLF('MEDREPNAME')+'||'+'String_2='+'__defaultArgValue'+'||'+'String_3='+'__defaultArgValue'+'||'+'MEDREPNAME='+DLG1_DlgObj.getValueNOCRLF('MEDREPNAME')+'||'+'COMPANYID='+DLG1_DlgObj.getValueNOCRLF('COMPANYID')+'||'+'String_6='+'__defaultArgValue';
go.argumentBinding = 'MMEDREP=MEDREPNAME||MROUTE=String_2||MMCYCELID=String_3||MUSERNAME=MEDREPNAME||MSESSIONID=COMPANYID||MROUTEID=String_6';
go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.gridId != 'undefined') go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.dialogId != 'undefined') {
	go._thisGridAlias = DLG1_DlgObj.dialogId;
}
go._thisGridGUID = DLG1_DlgObj.componentGUID;
go._gridCurrentFilter = DLG1_DlgObj._gridFilter;
go._gridCurrentOrder = DLG1_DlgObj._gridOrder;
go._gridCurrentArguments = DLG1_DlgObj._gridArguments;
go._gridCurrentDBType = DLG1_DlgObj._gridDBType;
go.overrideSettings = 'Style_name = `Alpha-Magenta`||Style_name = `Alpha-Magenta`'+'||';
go.a5_default_path = 'C_colon_|A5Webroot|livepreview';
var panelId = DLG1_DlgObj.panelGetId('PANELCARD_42','body');
go.dialog2Div = panelId;
var obj = window[go.alias.toUpperCase() + '_DlgObj'];
if(typeof DLG1_DlgObj._embeddedUX == 'undefined') { 
	DLG1_DlgObj._embeddedUX = [];
}
if(DLG1_DlgObj._embeddedUX.indexOf(go.alias.toUpperCase()) == -1) { 
	DLG1_DlgObj._embeddedUX.push(go.alias.toUpperCase());
}
var flagCachedUX = false
if(!obj || !flagCachedUX ) { 
	//alert('initial render');
	$('panelId').innerHTML = '<div style=\'\'  id=\'GRIDDIV_panelId\'></div>'; 
	A5.component.runGenericComponent(go);if(typeof __showWaitMessage != 'undefined') __showWaitMessage.call();;
}else { 
	//alert('refresh');
	if(typeof go.specialDialogMode == 'undefined') go.specialDialogMode = 'refreshUX'
	obj.synchronizeDialog(go);
}
}
window['DLG1_ACTION_OpenVisitHistoryD'] = function(rowNum,rowId,objEle) {
var runMethod = 'ajax';
if(runMethod == 'ajax') {
if(typeof DLG1_DlgObj._onlineStatus != 'undefined') { 
	if(DLG1_DlgObj._onlineStatus == 'offline') { 
		( function() {  }() );
		DLG1_DlgObj._executeEvent('onAjaxCallbackNotAvailable', {xbasicFunctionName: '', ajaxEvent: 'OpenComponent'})
		return false;
	}
}		
};
var go = new Object();
go.ajaxFailedMessage = '';
go.ajaxCallbackTimeout = DLG1_DlgObj.ajaxCallbackTimeout;
go.objectId = objEle.id;
go.dialog2Name = 'VisitHistoryD';
go.type = 'dialog2';
go.alias = 'DLG1_VISITHISTO_ACEH';;
go.submitCurrentFieldValues = true;
go.sourceGridPart = 'O';
go.sourceGridRowNumber = '1';
go.workingMessage = '<img src=\'css/A5System/Images/wait.gif\' />Working...';
go.placeholderValues = 'MEDREPNAME='+DLG1_DlgObj.getValueNOCRLF('MEDREPNAME')+'||'+'COMPANYID='+DLG1_DlgObj.getValueNOCRLF('COMPANYID')+'||'+'String_3='+'__defaultArgValue'+'||'+'String_4='+'__defaultArgValue';
go.argumentBinding = 'MEDREPVISIT=MEDREPNAME||COMPID=COMPANYID||MVISITID=String_3||MDATE=String_4';
go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.gridId != 'undefined') go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.dialogId != 'undefined') {
	go._thisGridAlias = DLG1_DlgObj.dialogId;
}
go._thisGridGUID = DLG1_DlgObj.componentGUID;
go._gridCurrentFilter = DLG1_DlgObj._gridFilter;
go._gridCurrentOrder = DLG1_DlgObj._gridOrder;
go._gridCurrentArguments = DLG1_DlgObj._gridArguments;
go._gridCurrentDBType = DLG1_DlgObj._gridDBType;
go.overrideSettings = 'Style_name = `Alpha-Magenta`||Style_name = `Alpha-Magenta`'+'||';
go.a5_default_path = 'C_colon_|A5Webroot|livepreview';
var panelId = DLG1_DlgObj.panelGetId('PANELCARD_42','body');
go.dialog2Div = panelId;
var obj = window[go.alias.toUpperCase() + '_DlgObj'];
if(typeof DLG1_DlgObj._embeddedUX == 'undefined') { 
	DLG1_DlgObj._embeddedUX = [];
}
if(DLG1_DlgObj._embeddedUX.indexOf(go.alias.toUpperCase()) == -1) { 
	DLG1_DlgObj._embeddedUX.push(go.alias.toUpperCase());
}
var flagCachedUX = false
if(!obj || !flagCachedUX ) { 
	//alert('initial render');
	$('panelId').innerHTML = '<div style=\'\'  id=\'GRIDDIV_panelId\'></div>'; 
	A5.component.runGenericComponent(go);if(typeof __showWaitMessage != 'undefined') __showWaitMessage.call();;
	if(DLG1_DlgObj.panelSetActive) DLG1_DlgObj.panelSetActive('PANELCARD_42');
}else { 
	//alert('refresh');
	if(typeof go.specialDialogMode == 'undefined') go.specialDialogMode = 'refreshUX'
	obj.synchronizeDialog(go);
	if(DLG1_DlgObj.panelSetActive) DLG1_DlgObj.panelSetActive('PANELCARD_42');
}
}
window['DLG1_ACTION_OpenListOfOrders'] = function(rowNum,rowId,objEle) {
var runMethod = 'precomputed';
if(DLG1_DlgObj._embeddedMode) runMethod = 'ajax';
if(DLG1_DlgObj._staticHTMLMode) runMethod = 'precomputed';
if(runMethod == 'ajax') {
if(typeof DLG1_DlgObj._onlineStatus != 'undefined') { 
	if(DLG1_DlgObj._onlineStatus == 'offline') { 
		( function() {  }() );
		DLG1_DlgObj._executeEvent('onAjaxCallbackNotAvailable', {xbasicFunctionName: '', ajaxEvent: 'OpenComponent'})
		return false;
	}
}		
};
var go = new Object();
go.ajaxFailedMessage = '';
go.ajaxCallbackTimeout = DLG1_DlgObj.ajaxCallbackTimeout;
go.objectId = objEle.id;
go.dialog2Name = 'listofOrders';
go.type = 'dialog2';
go.alias = 'DLG1_LISTOFORDE_IAHB';;
go.submitCurrentFieldValues = true;
go.sourceGridPart = 'O';
go.sourceGridRowNumber = '1';
go.workingMessage = '<img src=\'css/A5System/Images/wait.gif\' />Working...';
go.placeholderValues = 'String_1='+'__defaultArgValue'+'||'+'COMPANYID='+DLG1_DlgObj.getValueNOCRLF('COMPANYID')+'||'+'String_3='+'__defaultArgValue'+'||'+'String_4='+'__defaultArgValue'+'||'+'MEDREPNAME='+DLG1_DlgObj.getValueNOCRLF('MEDREPNAME')+'||'+'String_6='+'__defaultArgValue';
go.argumentBinding = 'MUSERNAME=String_1||COMPID=COMPANYID||MDAT1=String_3||MDAT2=String_4||MMEDREPN=MEDREPNAME||SELECTEDREP=String_6';
go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.gridId != 'undefined') go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.dialogId != 'undefined') {
	go._thisGridAlias = DLG1_DlgObj.dialogId;
}
go._thisGridGUID = DLG1_DlgObj.componentGUID;
go._gridCurrentFilter = DLG1_DlgObj._gridFilter;
go._gridCurrentOrder = DLG1_DlgObj._gridOrder;
go._gridCurrentArguments = DLG1_DlgObj._gridArguments;
go._gridCurrentDBType = DLG1_DlgObj._gridDBType;
go.overrideSettings = 'Style_name = `Alpha-Magenta`||Style_name = `Alpha-Magenta`'+'||';
go.a5_default_path = 'C_colon_|A5Webroot|livepreview';
var panelId = DLG1_DlgObj.panelGetId('PANELCARD_42','body');
go.dialog2Div = panelId;
var obj = window[go.alias.toUpperCase() + '_DlgObj'];
if(typeof DLG1_DlgObj._embeddedUX == 'undefined') { 
	DLG1_DlgObj._embeddedUX = [];
}
if(DLG1_DlgObj._embeddedUX.indexOf(go.alias.toUpperCase()) == -1) { 
	DLG1_DlgObj._embeddedUX.push(go.alias.toUpperCase());
}
var flagCachedUX = false
if(!obj || !flagCachedUX ) { 
	//alert('initial render');
	$('panelId').innerHTML = '<div style=\'\'  id=\'GRIDDIV_panelId\'></div>'; 
	var runMethod = 'precomputed';
if(DLG1_DlgObj._embeddedMode) runMethod = 'ajax';
if(DLG1_DlgObj._staticHTMLMode) runMethod = 'precomputed';
if(runMethod == 'ajax')if(typeof __showWaitMessage != 'undefined') __showWaitMessage.call()
if(runMethod.toLowerCase() != 'ajax'  && typeof window['PRECOMPUTEDUX_fd3dee7450534156acd56e812951dd97_listofOrders'] == 'function') { 
	//PRECOMPUTED_UX_COMPONENT: {functionName: 'PRECOMPUTEDUX_fd3dee7450534156acd56e812951dd97_listofOrders', uxname: 'listofOrders', alias: 'DLG1_LISTOFORDE_IAHB'}
	var jsToRun = PRECOMPUTEDUX_fd3dee7450534156acd56e812951dd97_listofOrders(go);
	eval(jsToRun);
	//must run code to initialize values
	try{
		var objx = window[go.alias.toUpperCase() + '_DlgObj'];
		objx.populate(objx.originalValues[0]);
	}catch(e) {};
	if(typeof go.onLoadCompleteJavascript != 'undefined') { 
		var txt = go.onLoadCompleteJavascript.split(':')[1];
		if(typeof txt != 'undefined') { 
			if(typeof DLG1_DlgObj._ajaxCallbackCompleteCode != 'undefined') { 
				setTimeout(function() { 
					DLG1_DlgObj._ajaxCallbackCompleteCode[txt].call();
				},500);
			}
		}
	}
} else {
	A5.component.runGenericComponent(go)
}
;
}else { 
	//alert('refresh');
	if(typeof go.specialDialogMode == 'undefined') go.specialDialogMode = 'refreshUX'
	obj.synchronizeDialog(go);
}
}
window['DLG1_ACTION_OpenMessage'] = function(rowNum,rowId,objEle) {
var runMethod = 'ajax';
if(runMethod == 'ajax') {
if(typeof DLG1_DlgObj._onlineStatus != 'undefined') { 
	if(DLG1_DlgObj._onlineStatus == 'offline') { 
		( function() {  }() );
		DLG1_DlgObj._executeEvent('onAjaxCallbackNotAvailable', {xbasicFunctionName: '', ajaxEvent: 'OpenComponent'})
		return false;
	}
}		
};
var go = new Object();
go.ajaxFailedMessage = '';
go.ajaxCallbackTimeout = DLG1_DlgObj.ajaxCallbackTimeout;
go.objectId = objEle.id;
go.dialog2Name = 'MessagesMobile';
go.type = 'dialog2';
go.alias = 'DLG1_MESSAGESMO_JDFI';;
go.submitCurrentFieldValues = true;
go.sourceGridPart = 'O';
go.sourceGridRowNumber = '1';
go.workingMessage = '<img src=\'css/A5System/Images/wait.gif\' />Working...';
go.placeholderValues = 'MEDREPNAME='+DLG1_DlgObj.getValueNOCRLF('MEDREPNAME');
go.argumentBinding = 'MYUSERNAME=MEDREPNAME';
go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.gridId != 'undefined') go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.dialogId != 'undefined') {
	go._thisGridAlias = DLG1_DlgObj.dialogId;
}
go._thisGridGUID = DLG1_DlgObj.componentGUID;
go._gridCurrentFilter = DLG1_DlgObj._gridFilter;
go._gridCurrentOrder = DLG1_DlgObj._gridOrder;
go._gridCurrentArguments = DLG1_DlgObj._gridArguments;
go._gridCurrentDBType = DLG1_DlgObj._gridDBType;
go.overrideSettings = 'Style_name = `Alpha-Magenta`||Style_name = `Alpha-Magenta`'+'||';
go.a5_default_path = 'C_colon_|A5Webroot|livepreview';
var panelId = DLG1_DlgObj.panelGetId('PANELCARD_42','body');
go.dialog2Div = panelId;
var obj = window[go.alias.toUpperCase() + '_DlgObj'];
if(typeof DLG1_DlgObj._embeddedUX == 'undefined') { 
	DLG1_DlgObj._embeddedUX = [];
}
if(DLG1_DlgObj._embeddedUX.indexOf(go.alias.toUpperCase()) == -1) { 
	DLG1_DlgObj._embeddedUX.push(go.alias.toUpperCase());
}
var flagCachedUX = false
if(!obj || !flagCachedUX ) { 
	//alert('initial render');
	$('panelId').innerHTML = '<div style=\'\'  id=\'GRIDDIV_panelId\'></div>'; 
	A5.component.runGenericComponent(go);if(typeof __showWaitMessage != 'undefined') __showWaitMessage.call();;
}else { 
	//alert('refresh');
	if(typeof go.specialDialogMode == 'undefined') go.specialDialogMode = 'refreshUX'
	obj.synchronizeDialog(go);
}
}
window['DLG1_ACTION_OpenQuestionaire'] = function(rowNum,rowId,objEle) {
var runMethod = 'ajax';
if(runMethod == 'ajax') {
if(typeof DLG1_DlgObj._onlineStatus != 'undefined') { 
	if(DLG1_DlgObj._onlineStatus == 'offline') { 
		( function() {  }() );
		DLG1_DlgObj._executeEvent('onAjaxCallbackNotAvailable', {xbasicFunctionName: '', ajaxEvent: 'OpenComponent'})
		return false;
	}
}		
};
var go = new Object();
go.ajaxFailedMessage = '';
go.ajaxCallbackTimeout = DLG1_DlgObj.ajaxCallbackTimeout;
go.objectId = objEle.id;
go.dialog2Name = 'Answers';
go.type = 'dialog2';
go.alias = 'DLG1_ANSWERS_ADHB';;
go.submitCurrentFieldValues = true;
go.sourceGridPart = 'O';
go.sourceGridRowNumber = '1';
go.workingMessage = '<img src=\'css/A5System/Images/wait.gif\' />Working...';
go.placeholderValues = 'MEDREP='+DLG1_DlgObj.getValueNOCRLF('MEDREP')+'||'+'TMPPOIID='+DLG1_DlgObj.getValueNOCRLF('TMPPOIID')+'||'+'String_3='+'__defaultArgValue'+'||'+'String_4='+'__defaultArgValue'+'||'+'String_5='+'__defaultArgValue';
go.argumentBinding = 'MMEDREPID=MEDREP||MPOIID=TMPPOIID||MQUESTIONID=String_3||MCAMPAINID=String_4||ARGITEMID=String_5';
go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.gridId != 'undefined') go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.dialogId != 'undefined') {
	go._thisGridAlias = DLG1_DlgObj.dialogId;
}
go._thisGridGUID = DLG1_DlgObj.componentGUID;
go._gridCurrentFilter = DLG1_DlgObj._gridFilter;
go._gridCurrentOrder = DLG1_DlgObj._gridOrder;
go._gridCurrentArguments = DLG1_DlgObj._gridArguments;
go._gridCurrentDBType = DLG1_DlgObj._gridDBType;
go.overrideSettings = 'Style_name = `Alpha-Magenta`||Style_name = `Alpha-Magenta`'+'||';
go.a5_default_path = 'C_colon_|A5Webroot|livepreview';
var panelId = DLG1_DlgObj.panelGetId('PANELCARD_42','body');
go.dialog2Div = panelId;
var obj = window[go.alias.toUpperCase() + '_DlgObj'];
if(typeof DLG1_DlgObj._embeddedUX == 'undefined') { 
	DLG1_DlgObj._embeddedUX = [];
}
if(DLG1_DlgObj._embeddedUX.indexOf(go.alias.toUpperCase()) == -1) { 
	DLG1_DlgObj._embeddedUX.push(go.alias.toUpperCase());
}
var flagCachedUX = false
if(!obj || !flagCachedUX ) { 
	//alert('initial render');
	$('panelId').innerHTML = '<div style=\'\'  id=\'GRIDDIV_panelId\'></div>'; 
	A5.component.runGenericComponent(go);if(typeof __showWaitMessage != 'undefined') __showWaitMessage.call();;
}else { 
	//alert('refresh');
	if(typeof go.specialDialogMode == 'undefined') go.specialDialogMode = 'refreshUX'
	obj.synchronizeDialog(go);
}
}
window['DLG1_ACTION_openvisitHistory'] = function(rowNum,rowId,objEle) {
var runMethod = 'precomputed';
if(DLG1_DlgObj._embeddedMode) runMethod = 'ajax';
if(DLG1_DlgObj._staticHTMLMode) runMethod = 'precomputed';
if(runMethod == 'ajax') {
if(typeof DLG1_DlgObj._onlineStatus != 'undefined') { 
	if(DLG1_DlgObj._onlineStatus == 'offline') { 
		( function() {  }() );
		DLG1_DlgObj._executeEvent('onAjaxCallbackNotAvailable', {xbasicFunctionName: '', ajaxEvent: 'OpenComponent'})
		return false;
	}
}		
};
var go = new Object();
go.ajaxFailedMessage = '';
go.ajaxCallbackTimeout = DLG1_DlgObj.ajaxCallbackTimeout;
go.objectId = objEle.id;
go.dialog2Name = 'VisitHistory';
go.type = 'dialog2';
go.alias = 'DLG1_VISITHISTO_ABJH';;
go.submitCurrentFieldValues = true;
go.sourceGridPart = 'O';
go.sourceGridRowNumber = '1';
go.workingMessage = '<img src=\'css/A5System/Images/wait.gif\' />Working...';
go.placeholderValues = 'TMPPOIID='+DLG1_DlgObj.getValueNOCRLF('TMPPOIID');
go.argumentBinding = 'MPOIIF=TMPPOIID';
go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.gridId != 'undefined') go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.dialogId != 'undefined') {
	go._thisGridAlias = DLG1_DlgObj.dialogId;
}
go._thisGridGUID = DLG1_DlgObj.componentGUID;
go._gridCurrentFilter = DLG1_DlgObj._gridFilter;
go._gridCurrentOrder = DLG1_DlgObj._gridOrder;
go._gridCurrentArguments = DLG1_DlgObj._gridArguments;
go._gridCurrentDBType = DLG1_DlgObj._gridDBType;
go.overrideSettings = 'Style_name = `Alpha-Magenta`||Style_name = `Alpha-Magenta`'+'||';
go.a5_default_path = 'C_colon_|A5Webroot|livepreview';
var panelId = DLG1_DlgObj.panelGetId('PANELCARD_42','body');
go.dialog2Div = panelId;
var obj = window[go.alias.toUpperCase() + '_DlgObj'];
if(typeof DLG1_DlgObj._embeddedUX == 'undefined') { 
	DLG1_DlgObj._embeddedUX = [];
}
if(DLG1_DlgObj._embeddedUX.indexOf(go.alias.toUpperCase()) == -1) { 
	DLG1_DlgObj._embeddedUX.push(go.alias.toUpperCase());
}
var flagCachedUX = false
if(!obj || !flagCachedUX ) { 
	//alert('initial render');
	$('panelId').innerHTML = '<div style=\'\'  id=\'GRIDDIV_panelId\'></div>'; 
	var runMethod = 'precomputed';
if(DLG1_DlgObj._embeddedMode) runMethod = 'ajax';
if(DLG1_DlgObj._staticHTMLMode) runMethod = 'precomputed';
if(runMethod == 'ajax')if(typeof __showWaitMessage != 'undefined') __showWaitMessage.call()
if(runMethod.toLowerCase() != 'ajax'  && typeof window['PRECOMPUTEDUX_7974a449cc3f4d9796ead9b62bb867d8_VisitHistory'] == 'function') { 
	//PRECOMPUTED_UX_COMPONENT: {functionName: 'PRECOMPUTEDUX_7974a449cc3f4d9796ead9b62bb867d8_VisitHistory', uxname: 'VisitHistory', alias: 'DLG1_VISITHISTO_ABJH'}
	var jsToRun = PRECOMPUTEDUX_7974a449cc3f4d9796ead9b62bb867d8_VisitHistory(go);
	eval(jsToRun);
	//must run code to initialize values
	try{
		var objx = window[go.alias.toUpperCase() + '_DlgObj'];
		objx.populate(objx.originalValues[0]);
	}catch(e) {};
	if(typeof go.onLoadCompleteJavascript != 'undefined') { 
		var txt = go.onLoadCompleteJavascript.split(':')[1];
		if(typeof txt != 'undefined') { 
			if(typeof DLG1_DlgObj._ajaxCallbackCompleteCode != 'undefined') { 
				setTimeout(function() { 
					DLG1_DlgObj._ajaxCallbackCompleteCode[txt].call();
				},500);
			}
		}
	}
} else {
	A5.component.runGenericComponent(go)
}
;
}else { 
	//alert('refresh');
	if(typeof go.specialDialogMode == 'undefined') go.specialDialogMode = 'refreshUX'
	obj.synchronizeDialog(go);
}
}
window['DLG1_ACTION_OpenDashboard'] = function(rowNum,rowId,objEle) {
var runMethod = 'ajax';
if(runMethod == 'ajax') {
if(typeof DLG1_DlgObj._onlineStatus != 'undefined') { 
	if(DLG1_DlgObj._onlineStatus == 'offline') { 
		( function() {  }() );
		DLG1_DlgObj._executeEvent('onAjaxCallbackNotAvailable', {xbasicFunctionName: '', ajaxEvent: 'OpenComponent'})
		return false;
	}
}		
};
var go = new Object();
go.ajaxFailedMessage = '';
go.ajaxCallbackTimeout = DLG1_DlgObj.ajaxCallbackTimeout;
go.objectId = objEle.id;
go.dialog2Name = 'MobileDashboard';
go.type = 'dialog2';
go.alias = 'DLG1_MOBILEDASH_GJJF';;
go.submitCurrentFieldValues = true;
go.sourceGridPart = 'O';
go.sourceGridRowNumber = '1';
go.workingMessage = '<img src=\'css/A5System/Images/wait.gif\' />Working...';
go.placeholderValues = 'COMPANYID='+DLG1_DlgObj.getValueNOCRLF('COMPANYID')+'||'+'MEDREPCODE='+DLG1_DlgObj.getValueNOCRLF('MEDREPCODE')+'||'+'DATE='+DLG1_DlgObj.getValueNOCRLF('DATE');
go.argumentBinding = 'MCOMPID=COMPANYID||MREPID=MEDREPCODE||MDATE1=DATE';
go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.gridId != 'undefined') go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.dialogId != 'undefined') {
	go._thisGridAlias = DLG1_DlgObj.dialogId;
}
go._thisGridGUID = DLG1_DlgObj.componentGUID;
go._gridCurrentFilter = DLG1_DlgObj._gridFilter;
go._gridCurrentOrder = DLG1_DlgObj._gridOrder;
go._gridCurrentArguments = DLG1_DlgObj._gridArguments;
go._gridCurrentDBType = DLG1_DlgObj._gridDBType;
go.overrideSettings = 'Style_name = `Alpha-Magenta`||Style_name = `Alpha-Magenta`'+'||';
go.a5_default_path = 'C_colon_|A5Webroot|livepreview';
var panelId = DLG1_DlgObj.panelGetId('PANELCARD_42','body');
go.dialog2Div = panelId;
var obj = window[go.alias.toUpperCase() + '_DlgObj'];
if(typeof DLG1_DlgObj._embeddedUX == 'undefined') { 
	DLG1_DlgObj._embeddedUX = [];
}
if(DLG1_DlgObj._embeddedUX.indexOf(go.alias.toUpperCase()) == -1) { 
	DLG1_DlgObj._embeddedUX.push(go.alias.toUpperCase());
}
var flagCachedUX = false
if(!obj || !flagCachedUX ) { 
	//alert('initial render');
	$('panelId').innerHTML = '<div style=\'\'  id=\'GRIDDIV_panelId\'></div>'; 
	A5.component.runGenericComponent(go);if(typeof __showWaitMessage != 'undefined') __showWaitMessage.call();;
}else { 
	//alert('refresh');
	if(typeof go.specialDialogMode == 'undefined') go.specialDialogMode = 'refreshUX'
	obj.synchronizeDialog(go);
}
}
window['DLG1_ACTION_OpenMessage2'] = function(rowNum,rowId,objEle) {
var runMethod = 'precomputed';
if(DLG1_DlgObj._embeddedMode) runMethod = 'ajax';
if(DLG1_DlgObj._staticHTMLMode) runMethod = 'precomputed';
if(runMethod == 'ajax') {
if(typeof DLG1_DlgObj._onlineStatus != 'undefined') { 
	if(DLG1_DlgObj._onlineStatus == 'offline') { 
		( function() {  }() );
		DLG1_DlgObj._executeEvent('onAjaxCallbackNotAvailable', {xbasicFunctionName: '', ajaxEvent: 'OpenComponent'})
		return false;
	}
}		
};
var go = new Object();
go.ajaxFailedMessage = '';
go.ajaxCallbackTimeout = DLG1_DlgObj.ajaxCallbackTimeout;
go.objectId = objEle.id;
go.dialog2Name = 'MessagesMobile';
go.type = 'dialog2';
go.alias = 'DLG1_MESSAGESMO_JIAE';;
go.submitCurrentFieldValues = true;
go.sourceGridPart = 'O';
go.sourceGridRowNumber = '1';
go.workingMessage = '<img src=\'css/A5System/Images/wait.gif\' />Working...';
go.placeholderValues = 'MEDREPNAME='+DLG1_DlgObj.getValueNOCRLF('MEDREPNAME')+'||'+'COMPANYID='+DLG1_DlgObj.getValueNOCRLF('COMPANYID')+'||'+'TMPPOIID='+DLG1_DlgObj.getValueNOCRLF('TMPPOIID');
go.argumentBinding = 'MYUSERNAME=MEDREPNAME||COMPID=COMPANYID||TPOIID=TMPPOIID';
go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.gridId != 'undefined') go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.dialogId != 'undefined') {
	go._thisGridAlias = DLG1_DlgObj.dialogId;
}
go._thisGridGUID = DLG1_DlgObj.componentGUID;
go._gridCurrentFilter = DLG1_DlgObj._gridFilter;
go._gridCurrentOrder = DLG1_DlgObj._gridOrder;
go._gridCurrentArguments = DLG1_DlgObj._gridArguments;
go._gridCurrentDBType = DLG1_DlgObj._gridDBType;
go.overrideSettings = 'Style_name = `Alpha-Magenta`||Style_name = `Alpha-Magenta`'+'||';
go.a5_default_path = 'C_colon_|A5Webroot|livepreview';
var panelId = DLG1_DlgObj.panelGetId('PANELCARD_42','body');
go.dialog2Div = panelId;
var obj = window[go.alias.toUpperCase() + '_DlgObj'];
if(typeof DLG1_DlgObj._embeddedUX == 'undefined') { 
	DLG1_DlgObj._embeddedUX = [];
}
if(DLG1_DlgObj._embeddedUX.indexOf(go.alias.toUpperCase()) == -1) { 
	DLG1_DlgObj._embeddedUX.push(go.alias.toUpperCase());
}
var flagCachedUX = false
if(!obj || !flagCachedUX ) { 
	//alert('initial render');
	$('panelId').innerHTML = '<div style=\'\'  id=\'GRIDDIV_panelId\'></div>'; 
	var runMethod = 'precomputed';
if(DLG1_DlgObj._embeddedMode) runMethod = 'ajax';
if(DLG1_DlgObj._staticHTMLMode) runMethod = 'precomputed';
if(runMethod == 'ajax')if(typeof __showWaitMessage != 'undefined') __showWaitMessage.call()
if(runMethod.toLowerCase() != 'ajax'  && typeof window['PRECOMPUTEDUX_f893cadd071642ecb30a586c2775a9ce_MessagesMobile'] == 'function') { 
	//PRECOMPUTED_UX_COMPONENT: {functionName: 'PRECOMPUTEDUX_f893cadd071642ecb30a586c2775a9ce_MessagesMobile', uxname: 'MessagesMobile', alias: 'DLG1_MESSAGESMO_JIAE'}
	var jsToRun = PRECOMPUTEDUX_f893cadd071642ecb30a586c2775a9ce_MessagesMobile(go);
	eval(jsToRun);
	//must run code to initialize values
	try{
		var objx = window[go.alias.toUpperCase() + '_DlgObj'];
		objx.populate(objx.originalValues[0]);
	}catch(e) {};
	if(typeof go.onLoadCompleteJavascript != 'undefined') { 
		var txt = go.onLoadCompleteJavascript.split(':')[1];
		if(typeof txt != 'undefined') { 
			if(typeof DLG1_DlgObj._ajaxCallbackCompleteCode != 'undefined') { 
				setTimeout(function() { 
					DLG1_DlgObj._ajaxCallbackCompleteCode[txt].call();
				},500);
			}
		}
	}
} else {
	A5.component.runGenericComponent(go)
}
;
	if(DLG1_DlgObj.panelSetActive) DLG1_DlgObj.panelSetActive('PANELCARD_42');
}else { 
	//alert('refresh');
	if(typeof go.specialDialogMode == 'undefined') go.specialDialogMode = 'refreshUX'
	obj.synchronizeDialog(go);
	if(DLG1_DlgObj.panelSetActive) DLG1_DlgObj.panelSetActive('PANELCARD_42');
}
}
window['DLG1_ACTION_OpenLoading'] = function(rowNum,rowId,objEle) {
var runMethod = 'ajax';
if(runMethod == 'ajax') {
if(typeof DLG1_DlgObj._onlineStatus != 'undefined') { 
	if(DLG1_DlgObj._onlineStatus == 'offline') { 
		( function() {  }() );
		DLG1_DlgObj._executeEvent('onAjaxCallbackNotAvailable', {xbasicFunctionName: '', ajaxEvent: 'OpenComponent'})
		return false;
	}
}		
};
var go = new Object();
go.ajaxFailedMessage = '';
go.ajaxCallbackTimeout = DLG1_DlgObj.ajaxCallbackTimeout;
go.objectId = objEle.id;
go.dialog2Name = 'loadings';
go.type = 'dialog2';
go.alias = 'DLG1_LOADINGS_FEDB';;
go.submitCurrentFieldValues = true;
go.sourceGridPart = 'O';
go.sourceGridRowNumber = '1';
go.workingMessage = '<img src=\'css/A5System/Images/wait.gif\' />Working...';
go.placeholderValues = '';
go.argumentBinding = '';
go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.gridId != 'undefined') go._thisGridAlias = DLG1_DlgObj.gridId;
if(typeof DLG1_DlgObj.dialogId != 'undefined') {
	go._thisGridAlias = DLG1_DlgObj.dialogId;
}
go._thisGridGUID = DLG1_DlgObj.componentGUID;
go._gridCurrentFilter = DLG1_DlgObj._gridFilter;
go._gridCurrentOrder = DLG1_DlgObj._gridOrder;
go._gridCurrentArguments = DLG1_DlgObj._gridArguments;
go._gridCurrentDBType = DLG1_DlgObj._gridDBType;
go.overrideSettings = 'Style_name = `Alpha-Magenta`||Style_name = `Alpha-Magenta`'+'||';
go.a5_default_path = 'C_colon_|A5Webroot|livepreview';
var panelId = DLG1_DlgObj.panelGetId('PANELCARD_42','body');
go.dialog2Div = panelId;
var obj = window[go.alias.toUpperCase() + '_DlgObj'];
if(typeof DLG1_DlgObj._embeddedUX == 'undefined') { 
	DLG1_DlgObj._embeddedUX = [];
}
if(DLG1_DlgObj._embeddedUX.indexOf(go.alias.toUpperCase()) == -1) { 
	DLG1_DlgObj._embeddedUX.push(go.alias.toUpperCase());
}
var flagCachedUX = false
if(!obj || !flagCachedUX ) { 
	//alert('initial render');
	$('panelId').innerHTML = '<div style=\'\'  id=\'GRIDDIV_panelId\'></div>'; 
	A5.component.runGenericComponent(go);if(typeof __showWaitMessage != 'undefined') __showWaitMessage.call();;
	if(DLG1_DlgObj.panelSetActive) DLG1_DlgObj.panelSetActive('PANELCARD_42');
}else { 
	//alert('refresh');
	if(typeof go.specialDialogMode == 'undefined') go.specialDialogMode = 'refreshUX'
	obj.synchronizeDialog(go);
	if(DLG1_DlgObj.panelSetActive) DLG1_DlgObj.panelSetActive('PANELCARD_42');
}
}
DLG1_DlgObj._listControlsInfo = {};
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_WINDOW_PROGRESS','modal-resizable',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.WINDOW_PROGRESS'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				duration: 1000,
				y: 'auto',
				x: 'auto'
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		},
		style: ''
	},
	height: '1in',
	width: '3in',
	title: {
		html: 'Window',
		show: true,
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta'
}
	);
DLG1_DlgObj._functions._showContainerWindow_WINDOW_PROGRESS = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_WINDOW_PROGRESS');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['WINDOW_PROGRESS'] = currWindow;
	currWindow.show();
	}	
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_WINDOW_16','modal-resizable',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.WINDOW_16'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				duration: 1000,
				y: 'auto',
				x: 'auto'
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		},
		style: ''
	},
	height: '2in',
	width: '3in',
	title: {
		html: 'Change Password',
		show: true,
		tools: {
			items: false
		},
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta',
	onShow: function() {setTimeout(f,750);
function f(){
	mChp = DLG1_DlgObj.getValue('changepass');
	if(mChp==1){
		alert('password needs to be changed');
	}
	DLG1_DlgObj.setValue('changepass',0);
}}
}
	);
DLG1_DlgObj._functions._showContainerWindow_WINDOW_16 = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_WINDOW_16');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['WINDOW_16'] = currWindow;
	currWindow.show();
	}	
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_WINDOW_18','modal-resizable',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.WINDOW_18'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				duration: 1000,
				y: 'auto',
				x: 'auto'
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		},
		style: ''
	},
	height: '5in',
	width: '100%',
	title: {
		html: 'Window',
		show: true,
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta'
}
	);
DLG1_DlgObj._functions._showContainerWindow_WINDOW_18 = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_WINDOW_18');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['WINDOW_18'] = currWindow;
	currWindow.show();
	}	
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_GETPASS','modal-resizable',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.GETPASS'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				duration: 1000,
				y: 'auto',
				x: 'auto'
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		},
		style: ''
	},
	height: '4.5in',
	width: '100%',
	title: {
		html: 'Access key',
		show: true,
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta',
	onFocus: function() {const originalCode = generateRandomCode();
DLG1_DlgObj.setValue('mypin',originalCode);
DLG1_DlgObj.setValue('pinisvalid',0);}
}
	);
DLG1_DlgObj._functions._showContainerWindow_GETPASS = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_GETPASS');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['GETPASS'] = currWindow;
	currWindow.show();
	}	
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_WINDOW_SKIPREAS','modal-resizable',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.WINDOW_SKIPREAS'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				duration: 1000,
				y: 'auto',
				x: 'auto'
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		},
		style: ''
	},
	height: '3in',
	width: '100%',
	title: {
		html: 'Skip Reason',
		show: true,
		tools: {
			items: false
		},
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta'
}
	);
DLG1_DlgObj._functions._showContainerWindow_WINDOW_SKIPREAS = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_WINDOW_SKIPREAS');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['WINDOW_SKIPREAS'] = currWindow;
	currWindow.show();
	}	
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_WINDOW_VACATION','modal',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.WINDOW_VACATION'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				duration: 1000,
				y: 'auto',
				x: 'auto'
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		},
		style: ''
	},
	height: '4in',
	width: '100%',
	title: {
		html: 'Window',
		show: true,
		tools: {
			items: false
		},
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta'
}
	);
DLG1_DlgObj._functions._showContainerWindow_WINDOW_VACATION = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_WINDOW_VACATION');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['WINDOW_VACATION'] = currWindow;
	currWindow.show('dock','top');
	}	
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_WINDOW_14','modal-resizable',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.WINDOW_14'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				duration: 1000,
				y: 'auto',
				x: 'auto'
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		},
		style: 'background-color: rgba(82,130,200,0.48);'
	},
	height: '5in',
	width: '100%',
	title: {
		html: 'Paiment Detail',
		show: true,
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta:base'
}
	);
DLG1_DlgObj._functions._showContainerWindow_WINDOW_14 = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_WINDOW_14');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['WINDOW_14'] = currWindow;
	currWindow.show('0px','0px');
	}	
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_WINDOW_SHIP','modal-resizable',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.WINDOW_SHIP'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				duration: 1000,
				y: 'auto',
				x: 'auto'
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		},
		style: ''
	},
	height: '3in',
	width: '100%',
	title: {
		html: 'Window',
		show: false,
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta:base'
}
	);
DLG1_DlgObj._functions._showContainerWindow_WINDOW_SHIP = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_WINDOW_SHIP');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['WINDOW_SHIP'] = currWindow;
	currWindow.show('0px','0px');
	}	
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_WINDOW_13','modal-resizable',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.WINDOW_13'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				duration: 1000,
				y: 'auto',
				x: 'auto'
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		},
		style: 'background-color: rgba(82,130,200,0.48);'
	},
	height: '6in',
	width: '100%',
	title: {
		html: 'Image and Notes',
		show: true,
		tools: {
			items: false
		},
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta:base'
}
	);
DLG1_DlgObj._functions._showContainerWindow_WINDOW_13 = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_WINDOW_13');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['WINDOW_13'] = currWindow;
	currWindow.show('center');
	}	
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_WINDOW_BASKET','modal-resizable',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.WINDOW_BASKET'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				duration: 1000,
				y: 'auto',
				x: 'auto'
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		},
		style: ''
	},
	height: '2in',
	width: '100%',
	title: {
		html: 'How many baskets you want to add',
		show: true,
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta'
}
	);
DLG1_DlgObj._functions._showContainerWindow_WINDOW_BASKET = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_WINDOW_BASKET');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['WINDOW_BASKET'] = currWindow;
	currWindow.show();
	}	
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_WINDOW_15','modal-resizable',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.WINDOW_15'
		},
		scroll: {
			axis: 'both',
			stopPropogation: false,
			pull: {
				duration: 1000,
				y: 'auto',
				x: 'auto'
			},
			indicator: {
				show: true,
				h: {
					show: true,
					location: 'top',
					offset: '0px',
					left: '0px',
					right: '0px'
				},
				v: {
					show: true,
					location: 'right',
					offset: '0px',
					top: '0px',
					bottom: '0px'
				}
			}
		},
		style: ''
	},
	height: '2in',
	width: '100%',
	title: {
		html: 'Window',
		show: true,
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta'
}
	);
DLG1_DlgObj._functions._showContainerWindow_WINDOW_15 = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_WINDOW_15');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['WINDOW_15'] = currWindow;
	currWindow.show('dock','top');
	}	
DLG1_DlgObj.createWindow('DLG1_CONTAINERWINDOW_WINDOW_17','modal',
	{
	body: {
		content: {
			type: 'element',
			elementId: 'DLG1.V.R1.WINDOW_17'
		},
		scroll: false,
		style: 'padding: 0px;',
		className: 'listItemLined'
	},
	height: '180px',
	width: '100%',
	title: {
		html: '&nbsp;',
		show: false,
		location: 'top',
		direction: 'ltr'
	},
	disableMove: false,
	theme: 'Alpha-Magenta',
	onBeforeShow: function() {mreturnable = DLG1_DlgObj.getValue('list::LSTITEMS::returnable');
mretitem = DLG1_DlgObj.getValue('list::LSTITEMS::returnitem');
if (mreturnable==1)  {
 DLG1_DlgObj.setValue('returnable',1);
 DLG1_DlgObj.setValue('returnitem',mretitem);
 DLG1_DlgObj.setValue('tmpret',0);
 DLG1_DlgObj.setValue('returnqty',0);
 mQty = 1;
 mPriceList = DLG1_DlgObj.getValue('pricelist');
 var _onOffline = function() {
 };
 var _onServerNotAvailable = function() {
  ;
 };
 var _onSuccess = function(data) {
  if(data.length == 0){
   return;
  }
  mPrice= data[0].price ;
  DLG1_DlgObj.setValue('retprice',mPrice);
 };
 var _onFail = function() {
 ;
 };
 var _filter = 'data.PRICELISTID == '+mPriceList+' && data.itemid == ' + mretitem + ' && data.fromqty <= '+mQty+' && data.toqty >= '+mQty;
 var _order = '';
 console.log(_filter);
 if(mPriceList != ''){
  DLG1_DlgObj.getFromDataCache('prices',_onSuccess,_onFail,_filter,_order,_onOffline,_onServerNotAvailable);
 }
}
else {
  DLG1_DlgObj.setValue('returnable',0)
 DLG1_DlgObj.setValue('tmpret',0);
 DLG1_DlgObj.setValue('returnqty',0);
  }},
	onShow: function() {mItem = DLG1_DlgObj.getValue('list::LSTITEMS::id');
 var _onSuccess = function(data) {
    var _d = [['', '']];
   for (var i = 0; i < data.length; i++) {
    _d.push([data[i].sellingunit]);
   }
   DLG1_DlgObj.populateDropdownBox('dropsellunit', _d, true);
   DLG1_DlgObj.populateDropdownBox('dropbonusunit', _d, true);
   DLG1_DlgObj._unitsarray = data;
  };
 var _onFail = function() {
 };
 var _filter = 'data.item_id == '+ mItem;
 var _order = '';
 DLG1_DlgObj.getFromDataCache('itemunits',_onSuccess,_onFail,_filter,_order);}
}
	);
DLG1_DlgObj._functions._showContainerWindow_WINDOW_17 = function(objEle) {
	var currWindow = DLG1_DlgObj.getWindow('DLG1_CONTAINERWINDOW_WINDOW_17');
	if(typeof DLG1_DlgObj._openWindows == 'undefined') DLG1_DlgObj._openWindows = {};
	DLG1_DlgObj._openWindows['WINDOW_17'] = currWindow;
	currWindow.show('popup',objEle);
	}
DLG1_DlgObj._functions.__fillContainer_LIST2 = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_MENU'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LIST2'].containerId = id;
	DLG1_DlgObj._listViewSettings['LIST2'].className = '';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LIST2();
DLG1_DlgObj._functions.__fillContainer_LSTROUTES = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_2'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTROUTES'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTROUTES'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTROUTES();
DLG1_DlgObj._functions.__fillContainer_LSTOFFROUTE = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_16'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTOFFROUTE'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTOFFROUTE'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTOFFROUTE();
DLG1_DlgObj._functions.__fillContainer_LSTVISITHEAD = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_5'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTVISITHEAD'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTVISITHEAD'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTVISITHEAD();
DLG1_DlgObj._functions.__fillContainer_LSTDISCUSSED = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_8'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTDISCUSSED'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTDISCUSSED'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTDISCUSSED();
DLG1_DlgObj._functions.__fillContainer_LSTSAMPLES = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_9'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTSAMPLES'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTSAMPLES'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTSAMPLES();
DLG1_DlgObj._functions.__fillContainer_LSTORDERS = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_13'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTORDERS'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTORDERS'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTORDERS();
DLG1_DlgObj._functions.__fillContainer_LSTINVOICES = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_INVOICES'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTINVOICES'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTINVOICES'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTINVOICES();
DLG1_DlgObj._functions.__fillContainer_LSTRECEIPT = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_18'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTRECEIPT'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTRECEIPT'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTRECEIPT();
DLG1_DlgObj._functions.__fillContainer_LSTUNPAIDINV = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_19'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTUNPAIDINV'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTUNPAIDINV'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTUNPAIDINV();
DLG1_DlgObj._functions.__fillContainer_LSTVISITNOTES = function() {
	var rExp = new RegExp('^A5dlg[0-9]*\.BODY');
	var cEle = $('DLG1.V.R1.CONTAINER_226');
	//test to see if the container parent node is a window body. if so, then set the container to the window
	if(rExp.test(cEle.parentNode.id)) {
		var pEle = cEle.parentNode;
		DLG1_DlgObj._listViewSettings['LSTVISITNOTES'].containerId = pEle.id;
		pEle.innerHTML = '';
	} else {
		DLG1_DlgObj._listViewSettings['LSTVISITNOTES'].containerId = cEle.id;
		//blow away any existing content in the container
		cEle.innerHTML = '';
	}
}
DLG1_DlgObj._functions.__fillContainer_LSTVISITNOTES();
DLG1_DlgObj._functions.__fillContainer_LSTMEDIALFILES = function() {
	var rExp = new RegExp('^A5dlg[0-9]*\.BODY');
	var cEle = $('DLG1.V.R1.CONTAINER_2');
	//test to see if the container parent node is a window body. if so, then set the container to the window
	if(rExp.test(cEle.parentNode.id)) {
		var pEle = cEle.parentNode;
		DLG1_DlgObj._listViewSettings['LSTMEDIALFILES'].containerId = pEle.id;
		pEle.innerHTML = '';
	} else {
		DLG1_DlgObj._listViewSettings['LSTMEDIALFILES'].containerId = cEle.id;
		//blow away any existing content in the container
		cEle.innerHTML = '';
	}
}
DLG1_DlgObj._functions.__fillContainer_LSTMEDIALFILES();
DLG1_DlgObj._functions.__fillContainer_LSTBASKETH = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_BASKET'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTBASKETH'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTBASKETH'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTBASKETH();
DLG1_DlgObj._functions.__fillContainer_LSTBASKETDET = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_BASKETDET'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTBASKETDET'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTBASKETDET'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTBASKETDET();
DLG1_DlgObj._functions.__fillContainer_LSTITEMS = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_ITEMS_ALL'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTITEMS'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTITEMS'].className = '';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTITEMS();
DLG1_DlgObj._functions.__fillContainer_LSTVACATION = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_VACATION'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTVACATION'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTVACATION'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTVACATION();
DLG1_DlgObj._functions.__fillContainer_LSTPOI = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_POI'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTPOI'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTPOI'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTPOI();
DLG1_DlgObj._functions.__fillContainer_LSTGEOLOC = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_47'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._listViewSettings['LSTGEOLOC'].containerId = id;
	DLG1_DlgObj._listViewSettings['LSTGEOLOC'].className = '<Default>';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_LSTGEOLOC();
DLG1_DlgObj._functions.__fillContainer_MAP1 = function() {
	var path = DLG1_PanelObj._panelPath['PANELCARD_6'];
	if(typeof path != 'undefined') {
		var panel = DLG1_PanelObj.getPanel(path);
		var id = panel.src.getPanelId('body');
	} else {
		var id = DLG1_PanelObj.getPanelId('body');
	}
	//removing scrolling from the PanelBody since we will be obliterating the Panel with a control that fills the body
	if($(id + '.SCROLLWRAPPER')) {
		A5.u.drag.remove(id,'scroll');
	}
	DLG1_DlgObj._controls['MAP1'].containerId = id;
	DLG1_DlgObj._controls['MAP1'].className = '';
	//blow away any existing content in the panel
	$(id).innerHTML = '';
}
DLG1_DlgObj._functions.__fillContainer_MAP1();
DLG1_DlgObj._hasPanels = true;
var varId = '';
varId = DLG1_DlgObj.panelGetId('PANELCARD_6','body');
A5.u.drag.add(varId,'prevent');
DLG1_DlgObj._hasOnSynchronizeEvent = true;
DLG1_DlgObj._functions.calcOrientation = function() {
	if(typeof DLG1_DlgObj == 'undefined') return '';
	var orientation = DLG1_DlgObj.getOrientation();
	if( orientation == 'landscape') {
			//landscape
			if(DLG1_DlgObj._orientation != 'landscape') {
				DLG1_DlgObj._fireWatches(1);
				DLG1_DlgObj._orientation = 'landscape';
				DLG1_DlgObj._executeEvent('onOrientationChange',{orientation: 'landscape'});
				DLG1_DlgObj._functions.listControlOrientationChange();
			}
	} else {
		//portrait
		if(DLG1_DlgObj._orientation != 'portrait') {
				DLG1_DlgObj._fireWatches(1);
				DLG1_DlgObj._orientation = 'portrait';
				DLG1_DlgObj._executeEvent('onOrientationChange',{orientation: 'portrait'});
				DLG1_DlgObj._functions.listControlOrientationChange();
			}
	}
}
	A5.flags.cordovaLoaded = true;
	try {
		document.addEventListener('deviceready', function() {
			DLG1_DlgObj._cordovaReady = true;
			//alert('fire on cordova ready 2')
			DLG1_DlgObj._executeEvent('onCordovaReady',{});
			DLG1_DlgObj._executeEvent('onPhoneGapReady',{});
			navigator.geolocation.getAccuratePosition = function(geolocationSuccess, geolocationError, options) {
 var _lastCheckedPosition = null;
 var _locationEventCount = 0;
 options = options || {};
 options.context = this;
    function _checkLocation(pos) {
        _lastCheckedPosition = pos;
        _locationEventCount++;
        if ((pos.coords.accuracy <= options.desiredAccuracy) && (_locationEventCount > options.ignoreResultCount)) {
            clearTimeout(_timerID);
            navigator.geolocation.clearWatch(_watchID);
            _foundPosition(pos);
        }
    }
    function _stopLocationCheck() {
      var error = {};
      error.code = 0;
      error.message = 'Timeout: No results';
        navigator.geolocation.clearWatch(_watchID);
        _lastCheckedPosition ? _foundPosition(_lastCheckedPosition) : geolocationError.call(options.context,error);
    }
    function _onError(error) {
        clearTimeout(_timerID);
        navigator.geolocation.clearWatch(_watchID);
        geolocationError.call(options.context,error);
    }
    function _foundPosition(pos) {
        geolocationSuccess.call(options.context,pos);
    }
    if (!options.maxWait) {
     options.maxWait = 10000;
    }
    if (!options.desiredAccuracy) {
       options.desiredAccuracy = 20;
    }
    if (!options.timeout) {
        options.timeout = options.maxWait;
  }
  if (!options.ignoreResultCount) {
    options.ignoreResultCount = 1;
  }
    options.maximumAge = 0;
    options.enableHighAccuracy = true;
    var _watchID = navigator.geolocation.watchPosition(_checkLocation, _onError, options);
    var _timerID = setTimeout(_stopLocationCheck, options.maxWait);
}
DLG1_DlgObj._functions._handleBackButton = function(e) {
	DLG1_DlgObj._executeEvent('onAndroidBackButton',{event:e})
}
if(typeof device != 'undefined') {
	if(device.platform == 'Android') {
		if(typeof window._androidBack == 'undefined') {
			document.addEventListener('backbutton', DLG1_DlgObj._functions._handleBackButton , false);
			window._androidBack = true;
		}
	}
}
		} , false);
		DLG1_DlgObj._onPhoneGapReady = function() {
			DLG1_DlgObj._executePhoneGapDelayed();
			if(DLG1_DlgObj) {
				var obj = DLG1_DlgObj.getPanelObject();
				if(obj) obj.resize();
				if(DLG1_DlgObj.instantUpdateOnRenderComplete) DLG1_DlgObj.instantUpdateOnRenderComplete()
			};
		}
	}
	catch(err) {}
DLG1_DlgObj._waitGif = 'css/A5System/Images/wait.gif';
var EXIF=(function(){var debug=false;var ExifTags={0x9000:"ExifVersion",0xA000:"FlashpixVersion",0xA001:"ColorSpace",0xA002:"PixelXDimension",0xA003:"PixelYDimension",0x9101:"ComponentsConfiguration",0x9102:"CompressedBitsPerPixel",0x927C:"MakerNote",0x9286:"UserComment",0xA004:"RelatedSoundFile",0x9003:"DateTimeOriginal",0x9004:"DateTimeDigitized",0x9290:"SubsecTime",0x9291:"SubsecTimeOriginal",0x9292:"SubsecTimeDigitized",0x829A:"ExposureTime",0x829D:"FNumber",0x8822:"ExposureProgram",0x8824:"SpectralSensitivity",0x8827:"ISOSpeedRatings",0x8828:"OECF",0x9201:"ShutterSpeedValue",0x9202:"ApertureValue",0x9203:"BrightnessValue",0x9204:"ExposureBias",0x9205:"MaxApertureValue",0x9206:"SubjectDistance",0x9207:"MeteringMode",0x9208:"LightSource",0x9209:"Flash",0x9214:"SubjectArea",0x920A:"FocalLength",0xA20B:"FlashEnergy",0xA20C:"SpatialFrequencyResponse",0xA20E:"FocalPlaneXResolution",0xA20F:"FocalPlaneYResolution",0xA210:"FocalPlaneResolutionUnit",0xA214:"SubjectLocation",0xA215:"ExposureIndex",0xA217:"SensingMethod",0xA300:"FileSource",0xA301:"SceneType",0xA302:"CFAPattern",0xA401:"CustomRendered",0xA402:"ExposureMode",0xA403:"WhiteBalance",0xA404:"DigitalZoomRation",0xA405:"FocalLengthIn35mmFilm",0xA406:"SceneCaptureType",0xA407:"GainControl",0xA408:"Contrast",0xA409:"Saturation",0xA40A:"Sharpness",0xA40B:"DeviceSettingDescription",0xA40C:"SubjectDistanceRange",0xA005:"InteroperabilityIFDPointer",0xA420:"ImageUniqueID"};var TiffTags={0x0100:"ImageWidth",0x0101:"ImageHeight",0x8769:"ExifIFDPointer",0x8825:"GPSInfoIFDPointer",0xA005:"InteroperabilityIFDPointer",0x0102:"BitsPerSample",0x0103:"Compression",0x0106:"PhotometricInterpretation",0x0112:"Orientation",0x0115:"SamplesPerPixel",0x011C:"PlanarConfiguration",0x0212:"YCbCrSubSampling",0x0213:"YCbCrPositioning",0x011A:"XResolution",0x011B:"YResolution",0x0128:"ResolutionUnit",0x0111:"StripOffsets",0x0116:"RowsPerStrip",0x0117:"StripByteCounts",0x0201:"JPEGInterchangeFormat",0x0202:"JPEGInterchangeFormatLength",0x012D:"TransferFunction",0x013E:"WhitePoint",0x013F:"PrimaryChromaticities",0x0211:"YCbCrCoefficients",0x0214:"ReferenceBlackWhite",0x0132:"DateTime",0x010E:"ImageDescription",0x010F:"Make",0x0110:"Model",0x0131:"Software",0x013B:"Artist",0x8298:"Copyright"};var GPSTags={0x0000:"GPSVersionID",0x0001:"GPSLatitudeRef",0x0002:"GPSLatitude",0x0003:"GPSLongitudeRef",0x0004:"GPSLongitude",0x0005:"GPSAltitudeRef",0x0006:"GPSAltitude",0x0007:"GPSTimeStamp",0x0008:"GPSSatellites",0x0009:"GPSStatus",0x000A:"GPSMeasureMode",0x000B:"GPSDOP",0x000C:"GPSSpeedRef",0x000D:"GPSSpeed",0x000E:"GPSTrackRef",0x000F:"GPSTrack",0x0010:"GPSImgDirectionRef",0x0011:"GPSImgDirection",0x0012:"GPSMapDatum",0x0013:"GPSDestLatitudeRef",0x0014:"GPSDestLatitude",0x0015:"GPSDestLongitudeRef",0x0016:"GPSDestLongitude",0x0017:"GPSDestBearingRef",0x0018:"GPSDestBearing",0x0019:"GPSDestDistanceRef",0x001A:"GPSDestDistance",0x001B:"GPSProcessingMethod",0x001C:"GPSAreaInformation",0x001D:"GPSDateStamp",0x001E:"GPSDifferential"};var StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0x0000:"Flash did not fire",0x0001:"Flash fired",0x0005:"Strobe return light not detected",0x0007:"Strobe return light detected",0x0009:"Flash fired, compulsory flash mode",0x000D:"Flash fired, compulsory flash mode, return light not detected",0x000F:"Flash fired, compulsory flash mode, return light detected",0x0010:"Flash did not fire, compulsory flash mode",0x0018:"Flash did not fire, auto mode",0x0019:"Flash fired, auto mode",0x001D:"Flash fired, auto mode, return light not detected",0x001F:"Flash fired, auto mode, return light detected",0x0020:"No flash function",0x0041:"Flash fired, red-eye reduction mode",0x0045:"Flash fired, red-eye reduction mode, return light not detected",0x0047:"Flash fired, red-eye reduction mode, return light detected",0x0049:"Flash fired, compulsory flash mode, red-eye reduction mode",0x004D:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",0x004F:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",0x0059:"Flash fired, auto mode, red-eye reduction mode",0x005D:"Flash fired, auto mode, return light not detected, red-eye reduction mode",0x005F:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}};function imageHasData(img){return!!(img.exifdata)}function findEXIFinJPEG(file){if(file.getByteAt(0)!=0xFF||file.getByteAt(1)!=0xD8){return false}var offset=2,length=file.getLength(),marker;while(offset<length){if(file.getByteAt(offset)!=0xFF){if(debug)console.log("Not a valid marker at offset "+offset+", found: "+file.getByteAt(offset));return false}marker=file.getByteAt(offset+1);if(marker==22400){if(debug)console.log("Found 0xFFE1 marker");return readEXIFData(file,offset+4,file.getShortAt(offset+2,true)-2)}else if(marker==225){if(debug)console.log("Found 0xFFE1 marker");return readEXIFData(file,offset+4,file.getShortAt(offset+2,true)-2)}else{offset+=2+file.getShortAt(offset+2,true)}}}function readTags(file,tiffStart,dirStart,strings,bigEnd){var entries=file.getShortAt(dirStart,bigEnd),tags={},entryOffset,tag,i;for(i=0;i<entries;i++){entryOffset=dirStart+i*12+2;tag=strings[file.getShortAt(entryOffset,bigEnd)];if(!tag&&debug)console.log("Unknown tag: "+file.getShortAt(entryOffset,bigEnd));tags[tag]=readTagValue(file,entryOffset,tiffStart,dirStart,bigEnd)}return tags}function readTagValue(file,entryOffset,tiffStart,dirStart,bigEnd){var type=file.getShortAt(entryOffset+2,bigEnd),numValues=file.getLongAt(entryOffset+4,bigEnd),valueOffset=file.getLongAt(entryOffset+8,bigEnd)+tiffStart,offset,vals,val,n,numerator,denominator;switch(type){case 1:case 7:if(numValues==1){return file.getByteAt(entryOffset+8,bigEnd)}else{offset=numValues>4?valueOffset:(entryOffset+8);vals=[];for(n=0;n<numValues;n++){vals[n]=file.getByteAt(offset+n)}return vals}case 2:offset=numValues>4?valueOffset:(entryOffset+8);return file.getStringAt(offset,numValues-1);case 3:if(numValues==1){return file.getShortAt(entryOffset+8,bigEnd)}else{offset=numValues>2?valueOffset:(entryOffset+8);vals=[];for(n=0;n<numValues;n++){vals[n]=file.getShortAt(offset+2*n,bigEnd)}return vals}case 4:if(numValues==1){return file.getLongAt(entryOffset+8,bigEnd)}else{vals=[];for(var n=0;n<numValues;n++){vals[n]=file.getLongAt(valueOffset+4*n,bigEnd)}return vals}case 5:if(numValues==1){numerator=file.getLongAt(valueOffset,bigEnd);denominator=file.getLongAt(valueOffset+4,bigEnd);val=new Number(numerator/denominator);val.numerator=numerator;val.denominator=denominator;return val}else{vals=[];for(n=0;n<numValues;n++){numerator=file.getLongAt(valueOffset+8*n,bigEnd);denominator=file.getLongAt(valueOffset+4+8*n,bigEnd);vals[n]=new Number(numerator/denominator);vals[n].numerator=numerator;vals[n].denominator=denominator}return vals}case 9:if(numValues==1){return file.getSLongAt(entryOffset+8,bigEnd)}else{vals=[];for(n=0;n<numValues;n++){vals[n]=file.getSLongAt(valueOffset+4*n,bigEnd)}return vals}case 10:if(numValues==1){return file.getSLongAt(valueOffset,bigEnd)/file.getSLongAt(valueOffset+4,bigEnd)}else{vals=[];for(n=0;n<numValues;n++){vals[n]=file.getSLongAt(valueOffset+8*n,bigEnd)/file.getSLongAt(valueOffset+4+8*n,bigEnd)}return vals}}}function readEXIFData(file,start){if(file.getStringAt(start,4)!="Exif"){if(debug)console.log("Not valid EXIF data! "+file.getStringAt(start,4));return false}var bigEnd,tags,tag,exifData,gpsData,tiffOffset=start+6;if(file.getShortAt(tiffOffset)==0x4949){bigEnd=false}else if(file.getShortAt(tiffOffset)==0x4D4D){bigEnd=true}else{if(debug)console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)");return false}if(file.getShortAt(tiffOffset+2,bigEnd)!=0x002A){if(debug)console.log("Not valid TIFF data! (no 0x002A)");return false}if(file.getLongAt(tiffOffset+4,bigEnd)!=0x00000008){if(debug)console.log("Not valid TIFF data! (First offset not 8)",file.getShortAt(tiffOffset+4,bigEnd));return false}tags=readTags(file,tiffOffset,tiffOffset+8,TiffTags,bigEnd);if(tags.ExifIFDPointer){exifData=readTags(file,tiffOffset,tiffOffset+tags.ExifIFDPointer,ExifTags,bigEnd);for(tag in exifData){switch(tag){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":exifData[tag]=StringValues[tag][exifData[tag]];break;case"ExifVersion":case"FlashpixVersion":exifData[tag]=String.fromCharCode(exifData[tag][0],exifData[tag][1],exifData[tag][2],exifData[tag][3]);break;case"ComponentsConfiguration":exifData[tag]=StringValues.Components[exifData[tag][0]]+StringValues.Components[exifData[tag][1]]+StringValues.Components[exifData[tag][2]]+StringValues.Components[exifData[tag][3]];break}tags[tag]=exifData[tag]}}if(tags.GPSInfoIFDPointer){gpsData=readTags(file,tiffOffset,tiffOffset+tags.GPSInfoIFDPointer,GPSTags,bigEnd);for(tag in gpsData){switch(tag){case"GPSVersionID":gpsData[tag]=gpsData[tag][0]+"."+gpsData[tag][1]+"."+gpsData[tag][2]+"."+gpsData[tag][3];break}tags[tag]=gpsData[tag]}}return tags}function getData(img,callback){if(!img.complete)return false;if(!imageHasData(img)){getImageData(img,callback)}else{if(callback){callback.call(img)}}return true}function getTag(img,tag){if(!imageHasData(img))return;return img.exifdata[tag]}function getAllTags(img){if(!imageHasData(img))return{};var a,data=img.exifdata,tags={};for(a in data){if(data.hasOwnProperty(a)){tags[a]=data[a]}}return tags}function pretty(img){if(!imageHasData(img))return"";var a,data=img.exifdata,strPretty="";for(a in data){if(data.hasOwnProperty(a)){if(typeof data[a]=="object"){if(data[a]instanceof Number){strPretty+=a+" : "+data[a]+" ["+data[a].numerator+"/"+data[a].denominator+"]\r\n"}else{strPretty+=a+" : ["+data[a].length+" values]\r\n"}}else{strPretty+=a+" : "+data[a]+"\r\n"}}}return strPretty}function readFromBinaryFile(file){return findEXIFinJPEG(file)}function BinaryFile(strData,iDataOffset,iDataLength){var data=strData;var dataOffset=iDataOffset||0;var dataLength=0;this.getRawData=function(){return data};if(typeof strData=="string"){dataLength=iDataLength||data.length;this.getByteAt=function(iOffset){return data.charCodeAt(iOffset+dataOffset)&0xFF};this.getBytesAt=function(iOffset,iLength){var aBytes=[];for(var i=0;i<iLength;i++){aBytes[i]=data.charCodeAt((iOffset+i)+dataOffset)&0xFF}return aBytes}}else if(typeof strData=="unknown"){dataLength=iDataLength||IEBinary_getLength(data);this.getByteAt=function(iOffset){return IEBinary_getByteAt(data,iOffset+dataOffset)};this.getBytesAt=function(iOffset,iLength){return new VBArray(IEBinary_getBytesAt(data,iOffset+dataOffset,iLength)).toArray()}}this.getLength=function(){return dataLength};this.getSByteAt=function(iOffset){var iByte=this.getByteAt(iOffset);if(iByte>127)return iByte-256;else return iByte};this.getShortAt=function(iOffset,bBigEndian){var iShort=bBigEndian?(this.getByteAt(iOffset)<<8)+this.getByteAt(iOffset+1):(this.getByteAt(iOffset+1)<<8)+this.getByteAt(iOffset);if(iShort<0)iShort+=65536;return iShort};this.getSShortAt=function(iOffset,bBigEndian){var iUShort=this.getShortAt(iOffset,bBigEndian);if(iUShort>32767)return iUShort-65536;else return iUShort};this.getLongAt=function(iOffset,bBigEndian){var iByte1=this.getByteAt(iOffset),iByte2=this.getByteAt(iOffset+1),iByte3=this.getByteAt(iOffset+2),iByte4=this.getByteAt(iOffset+3);var iLong=bBigEndian?(((((iByte1<<8)+iByte2)<<8)+iByte3)<<8)+iByte4:(((((iByte4<<8)+iByte3)<<8)+iByte2)<<8)+iByte1;if(iLong<0)iLong+=4294967296;return iLong};this.getSLongAt=function(iOffset,bBigEndian){var iULong=this.getLongAt(iOffset,bBigEndian);if(iULong>2147483647)return iULong-4294967296;else return iULong};this.getStringAt=function(iOffset,iLength){var aStr=[];var aBytes=this.getBytesAt(iOffset,iLength);for(var j=0;j<iLength;j++){aStr[j]=String.fromCharCode(aBytes[j])}return aStr.join("")};this.getCharAt=function(iOffset){return String.fromCharCode(this.getByteAt(iOffset))};this.toBase64=function(){return window.btoa(data)};this.fromBase64=function(strBase64){data=window.atob(strBase64)}}return{findEXIFinJPEG:findEXIFinJPEG,pretty:pretty,getTag:getTag,getAllTags:getAllTags,getData:getData,Tags:ExifTags,TiffTags:TiffTags,GPSTags:GPSTags,StringValues:StringValues,BinaryFile:BinaryFile}})();
(function(){function detectSubsampling(img){var iw=img.naturalWidth,ih=img.naturalHeight;if(iw*ih>1024*1024){var canvas=document.createElement('canvas');canvas.width=canvas.height=1;var ctx=canvas.getContext('2d');ctx.drawImage(img,-iw+1,0);return ctx.getImageData(0,0,1,1).data[3]===0}else{return false}}function detectVerticalSquash(img,iw,ih){var canvas=document.createElement('canvas');canvas.width=1;canvas.height=ih;var ctx=canvas.getContext('2d');ctx.drawImage(img,0,0);var data=ctx.getImageData(0,0,1,ih).data;var sy=0;var ey=ih;var py=ih;while(py>sy){var alpha=data[(py-1)*4+3];if(alpha===0){ey=py}else{sy=py}py=(ey+sy)>>1}var ratio=(py/ih);return(ratio===0)?1:ratio}function renderImageToDataURL(img,options){var canvas=document.createElement('canvas');renderImageToCanvas(img,canvas,options);return canvas.toDataURL("image/jpeg",options.quality||0.8)}function renderImageToCanvas(img,canvas,options){var iw=img.naturalWidth,ih=img.naturalHeight;var width=options.width,height=options.height;var ctx=canvas.getContext('2d');ctx.save();transformCoordinate(canvas,width,height,options.orientation);var subsampled=detectSubsampling(img);if(subsampled){iw/=2;ih/=2}var d=1024;var tmpCanvas=document.createElement('canvas');tmpCanvas.width=tmpCanvas.height=d;var tmpCtx=tmpCanvas.getContext('2d');var vertSquashRatio=detectVerticalSquash(img,iw,ih);var dw=Math.ceil(d*width/iw);var dh=Math.ceil(d*height/ih/vertSquashRatio);var sy=0;var dy=0;while(sy<ih){var sx=0;var dx=0;while(sx<iw){tmpCtx.clearRect(0,0,d,d);tmpCtx.drawImage(img,-sx,-sy);ctx.drawImage(tmpCanvas,0,0,d,d,dx,dy,dw,dh);sx+=d;dx+=dw}sy+=d;dy+=dh}ctx.restore();tmpCanvas=tmpCtx=null}function transformCoordinate(canvas,width,height,orientation){switch(orientation){case 5:case 6:case 7:case 8:canvas.width=height;canvas.height=width;break;default:canvas.width=width;canvas.height=height}var ctx=canvas.getContext('2d');switch(orientation){case 2:ctx.translate(width,0);ctx.scale(-1,1);break;case 3:ctx.translate(width,height);ctx.rotate(Math.PI);break;case 4:ctx.translate(0,height);ctx.scale(1,-1);break;case 5:ctx.rotate(0.5*Math.PI);ctx.scale(1,-1);break;case 6:ctx.rotate(0.5*Math.PI);ctx.translate(0,-height);break;case 7:ctx.rotate(0.5*Math.PI);ctx.translate(width,-height);ctx.scale(-1,1);break;case 8:ctx.rotate(-0.5*Math.PI);ctx.translate(-width,0);break;default:break}}function MegaPixImage(srcImage){if(srcImage instanceof Blob){var img=new Image();var URL=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!URL){throw Error("No createObjectURL function found to create blob url");}img.src=URL.createObjectURL(srcImage);srcImage=img}if(!srcImage.naturalWidth&&!srcImage.naturalHeight){var _this=this;srcImage.onload=function(){var listeners=_this.imageLoadListeners;if(listeners){_this.imageLoadListeners=null;for(var i=0,len=listeners.length;i<len;i++){listeners[i]()}}};this.imageLoadListeners=[]}this.srcImage=srcImage}MegaPixImage.prototype.render=function(target,options){if(this.imageLoadListeners){var _this=this;this.imageLoadListeners.push(function(){_this.render(target,options)});return}options=options||{};var imgWidth=this.srcImage.naturalWidth,imgHeight=this.srcImage.naturalHeight,width=options.width,height=options.height,maxWidth=options.maxWidth,maxHeight=options.maxHeight;if(width&&!height){height=(imgHeight*width/imgWidth)<<0}else if(height&&!width){width=(imgWidth*height/imgHeight)<<0}else{width=imgWidth;height=imgHeight}if(maxWidth&&width>maxWidth){width=maxWidth;height=(imgHeight*width/imgWidth)<<0}if(maxHeight&&height>maxHeight){height=maxHeight;width=(imgWidth*height/imgHeight)<<0}var opt={width:width,height:height};for(var k in options)opt[k]=options[k];var tagName=target.tagName.toLowerCase();if(tagName==='img'){target.src=renderImageToDataURL(this.srcImage,opt)}else if(tagName==='canvas'){renderImageToCanvas(this.srcImage,target,opt)}if(typeof this.onrender==='function'){this.onrender(target)}};if(typeof define==='function'&&define.amd){define([],function(){return MegaPixImage})}else{this.MegaPixImage=MegaPixImage}})();
/*
Copyright (c) 2001, 2019 Alpha Software Corporation
All Rights Reserved.
This Javascript library is licensed exclusively for use with Alpha Anywhere, Alpha Five,
Alpha Five Application Server, Alpha Anywhere Application Server,
Alpha Five Run Engine, and Alpha Anywhere Run Engine. It is specifically
not licensed for use on a server that does not have installed on it a
licensed copy of the Alpha Five Application Server or the Alpha Anywhere Application Server.
*/
	DLG1_DlgObj.imageCaptureUsingCamera = function(options) {
		options.specialMode = 'callback';
		try{
			if(options.pictureSourceVal == '0') options.phonegapMoveFileToPermanentStorage = false;
		}catch(e) { };
		this.detailViewImageCapture(options);
	}
	DLG1_DlgObj.detailViewImageCapture = function(options) {
		if(typeof options.specialMode == 'undefined') options.specialMode = 'detailview';
		var flagPhoneGapLoaded = false;
		var flagUseCordova = false;
		if (typeof window['cordova'] != 'undefined') {
			flagPhoneGapLoaded = true;
			if(options.captureMethod == 'phonegappreferred' || options.captureMethod == 'phonegap') {
				flagUseCordova = true;
			}
		}
		if(options.captureMethod == 'phonegap' && flagPhoneGapLoaded == false) {
			alert('PhoneGap not available'); return false;
		}
		if(!flagUseCordova) {
			this.detailViewImageCaptureHTML5(options);
		} else {
			this.detailViewImageCapturePhoneGap(options);
		}
	}
	DLG1_DlgObj.detailViewImageCaptureHTML5 = function(options) {
		if(typeof options.specialMode == 'undefined') options.specialMode = 'detailview';
		if(options.onBeforeCaptureJavascript) {
			var result = options.onBeforeCaptureJavascript.call();
			if(typeof result != 'undefined') {
				if(!result) return false;
			}
		}
		if(A5.flags.isAndroid == false) {
			if(A5.flags.isIPhone || A5.flags.isIPad){
				if (typeof A5.flags.iOSVersion != 'undefined') {
					var majorNum = A5.flags.iOSVersion.split('.')[0];
					if(parseInt(majorNum) < 6) {
						alert('HTML5 camera access not supported on this version of iOS');
						return false;
					}
				}
			}
		}
		if(A5.u.css.supportsTransition == false) {
			alert('Browser does not support HTML5 camera access');
			return false;
		}
		if(typeof options.resizePolicyHTML5 == 'undefined') options.resizePolicyHTML5 = 'Always';
		options.resizePolicyHTML5 = options.resizePolicyHTML5.toLowerCase();
		if(options.resizePolicyHTML5 != 'always') {
			var maxSize = 99999999999;
			if(typeof options.maxImageSizeHTML5 != 'undefined') maxSize = Number(options.maxImageSizeHTML5);
		}
		//if(typeof options.resizeImageHTML5 == 'undefined') options.resizeImageHTML5 = true;
		var ops = {};
		ops.dialogObj = this;
		if(options.specialMode == 'callback' ) {
			options.controlName = '';
		}
		if(typeof options.android14mode == 'undefined') options.android14mode = 'Camera'
	 	ops.targetImage = options.controlName;
	 	ops.targetImage = ops.targetImage.toUpperCase();
	 	ops.html5 = {};
	 	ops.html5.resizeFlag = options.resizeImageHTML5;
	 	ops.html5.compressionFactor = options.imageCompressionHTML5;
	 	ops.html5.maxWidth = options.maxImageWidth;
	 	ops.html5.maxHeight = options.maxImageHeight;
	 	ops.fieldPrefix = this.dialogId + '.V.R1';
	 	ops.imageFieldName = (ops.fieldPrefix + '.' + ops.targetImage).toUpperCase();
	 	ops.hiddenFileName =  (ops.fieldPrefix + '.' + ops.targetImage + '_HIDDENA5FN').toUpperCase();
	 	ops.android14mode = options.android14mode;
 		ops.handleFileSelect = function(evt) {
			// creates a FileList object
			var files = evt.target.files;
			// Even if multiple files are presented, only the first file will be uploaded.
			if (!files.length){
				// alerts should be ok here when fired by a timer
				setTimeout(function(){
					//alert('<a5:r>No files selected.</a5:r>');
				},50);
				return false;
			} else {
				// we're processing only 1 file at this point
				var f = files[0];
				ops.updateImage(f);
			}
		}
		if(ops.android14mode.toLowerCase() == 'library') {
			var ele = $(this.dialogId + '._GETPHOTO');
			ele.removeAttribute('capture');
		}
		$e.removeGroup('__detailViewImageCapture')
		$e.add($(this.dialogId + '._GETPHOTO'),'change',ops.handleFileSelect,'','','__detailViewImageCapture');
		ops.updateImage = function(_thisFile) {
			var _sourceFileName = _thisFile.name;
			var _thisImageName = ops.imageFieldName;
			var _thisImage = $(_thisImageName);
			var reader = new FileReader();
			reader.onload = function(e) {
				var flagResize = false;
				if(options.resizePolicyHTML5 == 'always') {
					flagResize = true;
				} else {
					if(e.target.result.length > maxSize) {
						flagResize = true;
					}
				}
				if(!flagResize) {
					//not resizing
					if(options.specialMode == 'detailview') {
						_thisImage.src = e.target.result;
						var eleH = $(ops.hiddenFileName);
						if(eleH) eleH.src = _thisImage.src;
						$sa(eleH,'a5isdirty','true');
						$sa(eleH,'a5imageSourceName',_sourceFileName);
						ops.dialogObj.refreshClientSideComputations();
						if(options.onCaptureJavascript) options.onCaptureJavascript.call(this, {data : e.target.result});
					} else {
						if(options.onCaptureJavascript) options.onCaptureJavascript.call(this, {data : e.target.result});
					}
				} else {
					//resizing
					if(options.displaySpinnerWhileResizingImage) {
						_thisImage.src = options.spinnerURI.replace(/\|/gi,'/');
					}
					var _orientation = ops.parseExifOrientation(e.target.result);
					ops.renderImgToCanvas(_thisFile,_orientation,_sourceFileName);
				}
			}
			reader.onerror = function(e) {
				setTimeout(function(){
				alert('<a5:r>Error reading file.</a5:r>');
				},0);
			}
			reader.readAsDataURL(_thisFile);
		}
		ops.parseExifOrientation = function(dataUrl) {
			try {
				// Some of the more current browsers set the default image_orientation property to from-image
				// It was previously always set to none. This check insures that the image is not rotated twice.
				/* -----------------
				* // 8-13-2020: modified to return null for all iOS browsers
				* if (parseFloat(A5.flags.iOSVersion)>= 13.2) {
				* // if running on an iOS device then check version, do not rotate for versions 13.2 snd greater
				* return null;
				* ------------------
				*/
				if (A5.flags.browserSpecs.name == "Safari") {
					return null;
				} else if ((A5.flags.browserSpecs.name == "Chrome") && (parseFloat(A5.flags.browserSpecs.version) >= 83)) {
					//if running on Chrome version 81 or greater, do not rotate
					return null;
				} else if ((A5.flags.browserSpecs.name == "Firefox") && (parseFloat(A5.flags.browserSpecs.version) >= 75)) {
					//if running on Firefox version 75 or greater, do not rotate
					return null;
				}
				// This universal check should work with all modern browsers (Opera, etc.) that set the default value of imageOrientation to "from-image"
				var _obj = getComputedStyle(document.body);
				if (obj.imageOrientation == "from-image") {
					return null;
				}
				var _byteString = atob(dataUrl.split(',')[1]);
				var _binaryFile = new EXIF.BinaryFile(_byteString, 0, _byteString.length);
				var _exif = EXIF.findEXIFinJPEG(_binaryFile);
				// Store EXIF orientation (if available) in data property.
				if (_exif && _exif['Orientation']) {
					return _exif['Orientation'];
				} else {
					return null;
				}
			} catch (e) {
				// Error parsing EXIF data.
				console.log('Error loading EXIF data', e);
				return null;
			}
		}
		ops.renderImgToCanvas = function(_file,_orientation,_sourceFileName) {
			// using megapix-image.js here which handles(?) sub-sampling issue with large images and Canvas on iOS6 Safari
			var mpImg = new MegaPixImage(_file);
			mpImg.onrender = function(){
				// this timeout required to ensure _thisCanvas render complete
				setTimeout(function(){
					var dataURL = _thisCanvas.toDataURL('image/jpeg', ops.html5.compressionFactor);
					//alert('html5 size after resizing image:' + dataURL.length);
					if(options.specialMode == 'detailview') {
						var ele = $(ops.imageFieldName);
						//put the scaled image in the element
						ele.src = dataURL;
						var eleH = $(ops.hiddenFileName);
						if(eleH) eleH.src = dataURL;
						$sa(eleH,'a5isdirty','true');
						$sa(eleH,'a5imageSourceName',_sourceFileName);
						ops.dialogObj.refreshClientSideComputations();
						if(options.onCaptureJavascript) options.onCaptureJavascript.call(this, {data : dataURL, sourceFileName: _sourceFileName});
					} else {
						if(options.onCaptureJavascript) options.onCaptureJavascript.call(this, {data : dataURL, sourceFileName: _sourceFileName});
					}
				},0);
			}
			var _thisCanvas = document.createElement('canvas');
			var ctx = _thisCanvas.getContext('2d');
			// adjust based on extracted _orientation
			if (_orientation) {
				mpImg.render(_thisCanvas,{maxWidth: ops.html5.maxWidth, maxHeight:ops.html5.maxHeight, orientation:_orientation});
			} else {
				mpImg.render(_thisCanvas,{maxWidth: ops.html5.maxWidth, maxHeight:ops.html5.maxHeight});
			}
		}
		//click the hidden image control
		var ele = $(this.dialogId + '._GETPHOTO');
		if (ele) {
			ele.value = '';
			ele.click();
		}
	}
	/////\\\\\
	DLG1_DlgObj.detailViewVideoCapturePhoneGap = function(opsIn) {
		//ops.fieldPrefix = this.dialogId + '.V.R1';
		//ops.videoFieldName = (ops.fieldPrefix + '.' + ops.controlName).toUpperCase();
		opsIn.dialogObj = this;
		var options = opsIn.options;
		var onSuccess = function(mediaFiles) { var e = {filename: mediaFiles[0].fullPath};
			var e_filename = e.filename;
			if(e_filename.indexOf('file:') != 0) {
				e_filename = e_filename.replace('/private','file:\/\/');
			}
			if(e_filename.indexOf('file:') != 0 && e_filename.indexOf('.wav') > 0) {
				e_filename = 'file:\/\/' + e_filename;
				//alert(e_filename);
			}
			opsIn.dialogObj.setValue(opsIn.controlName,e_filename);
			//var ele = $(ops.imageFieldName);
			//if(ele) ele.src = thisImageURL;
			//var eleH = $(ops.hiddenFileName);
			//if(eleH) eleH.src = thisImageURL;
			//$sa(eleH,'a5isdirty','true');
			opsIn.dialogObj.refreshClientSideComputations();
		};
		var onFailed = function() {
		};
		var flagAudio = false;
		if(typeof opsIn.audio != 'undefined') flagAudio = opsIn.audio;
		if(!flagAudio) {
			navigator.device.capture.captureVideo(onSuccess,onFailed,options);
		} else {
			//alert('audio');
			//debugger;
			var options = { limit: 1, duration: 10 };
			//navigator.device.capture.captureAudio(captureSuccess, captureError, options);
			//navigator.device.capture.captureAudio(onSuccess,onFailed,options);
			var _media = {
				recorder: null,
				recFile: 'myaudio/myrecording3.amr'  //if device.platform is 'Android' then use .amr, otherwise .wav
			}
			function captureStatus(e) {
				console.log('status....' + JSON.stringify(e));
			}
			var onSuccessAudio = function() {
				console.log('try to play it now');
				setTimeout(function() { _media.recorder.play(); },1000);
				//var e_filename = _media.recFile;
				//opsIn.dialogObj.setValue(opsIn.controlName,e_filename);
				//opsIn.dialogObj.refreshClientSideComputations();
			};
			_media.recorder = new Media(_media.recFile,onSuccessAudio,onFailed,captureStatus);
			console.log('about to record');
			_media.recorder.startRecord();
			console.log('start');
			setTimeout(function() { console.log('stop'); _media.recorder.stopRecord();  },5000);
			//_media.recorder.play();
		}
	}
	DLG1_DlgObj.detailViewImageCapturePhoneGap =  function(options) {
		var flagCustomOnError = false;
		if(typeof DLG1_DlgObj.customWindowErrorEvents != 'undefined') flagCustomOnError = DLG1_DlgObj.customWindowErrorEvents;
		//if(!flagCustomOnError) window.onerror = function(err) { alert('Unhandled Javascript Error - phoneGapImageCapture:  ' + JSON.stringify(err));}
		if(options.onBeforeCaptureJavascript) {
			var result = options.onBeforeCaptureJavascript.call();
			if(typeof result != 'undefined') {
				if(!result) return false;
			}
		}
		if (typeof window['cordova'] == 'undefined') {
			alert('PhoneGap not loaded');
			return false;
		}
		if(typeof options.imageSelectionCanceledMessage == 'undefined') options.imageSelectionCanceledMessage = 'Image Selection Canceled';
		if(typeof options.imageSelectionCanceledButton == 'undefined') options.imageSelectionCanceledButton = 'Done';
		if(typeof options.cameraCanceledMessage == 'undefined') options.cameraCanceledMessage = 'Camera Action Canceled';
		if(typeof options.cameraCanceledButton == 'undefined') options.cameraCanceledButton = 'Done';
		var maxSize = -1;
		if(typeof options.maxImageSizePhoneGap != 'undefined') maxSize = Number(options.maxImageSizePhoneGap);
		if(maxSize == -1) maxSize = 9999999999;
		if(typeof options.specialMode == 'undefined') options.specialMode = 'detailview';
		var ops = {};
		ops.dialogObj = this;
		if(options.specialMode == 'callback') {
			options.controlName = '';
		}
		ops.targetImage = options.controlName.toUpperCase();
		ops.cordova = {};
		ops.cordova.pictureSourceVal = options.pictureSourceVal;
		ops.cordova.imageQuality = options.imageQualityPhonegap;
		ops.cordova.allowEdit = options.allowPictureEditing
		ops.cordova.targetWidth = options.maxImageWidth;
		ops.cordova.targetHeight = options.maxImageHeight;
		ops.cordova.saveToPhotoAlbum = options.saveToPhotoAlbum
		ops.cordova.iPadEleId = '';
		ops.fieldPrefix = this.dialogId + '.V.R1';
		ops.imageFieldName = (ops.fieldPrefix + '.' + ops.targetImage).toUpperCase();
		ops.hiddenFileName = (ops.fieldPrefix + '.' + ops.targetImage + '_HIDDENA5FN').toUpperCase();
		ops.onCameraSuccess = function(imageURI) {
			if(typeof options.captureDataMode == 'undefined') options.captureDataMode = 'base64';
			try {
			    var iOps = JSON.parse(imageURI);
			    var filename = iOps.filename;
			    var metadata = iOps.json_metadata;
			    var iMD = JSON.parse(metadata);
			    if(typeof iMD.GPS != 'undefined') {
			    	//running on iOS
			    	var gpsObj = {};
			    	gpsObj.latitude = iMD.GPS.Latitude;
			    	gpsObj.longitude = iMD.GPS.Longitude;
			    	if(iMD.GPS.LongitudeRef == 'W') gpsObj.longitude = Number(gpsObj.longitude) * -1;
			    	if(iMD.GPS.LatitudeRef == 'S') gpsObj.latitude = Number(gpsObj.latitude) * -1;
			    	gpsObj.altitude = iMD.GPS.Altitude;
			    	gpsObj.dateTime = iMD.GPS.DateStamp + ' ' + iMD.GPS.TimeStamp;
			    	gpsObj.ExifJSON = metadata;
			    } else {
			    	//android
			    	var latRaw = iMD.gpsLatitude;   //":"42/1,28/1,50093/1000",
			    	var latRef = iMD.gpsLatitudeRef;  //":"N",
			    	var lngRaw = iMD.gpsLongitude; //":"71/1,12/1,16183/1000",
			    	var lngRef = iMD.gpsLongitudeRef; //":"W",
			    	var altRaw = iMD.gpsAltitude;
			    	var altRef = iMD.gpsAltitudeRef;
			    	ops.fixGPS = function(raw,ref) {
			    		//alert( ' raw: ' + raw + ' ref: ' + ref);
			    		if(raw == null) return null;
						var lat_d, lat_m, lat_s, lat;
						lat_d = eval(raw.split(',')[0]);
						lat_m = eval(raw.split(',')[1]) * ( 1/60);
						lat_s = eval(raw.split(',')[2]) * ( 1/60);
						lat = Number(lat_d) + Number(lat_m) + Number(lat_s);
						if(ref != null) {
							if(ref.toUpperCase() == 'S') lat = Number(lat) * -1;
							if(ref.toUpperCase() == 'W') lat = Number(lat) * -1;
						}
						return lat;
			    	}
			    	var lat = ops.fixGPS(latRaw,latRef);
			    	var lng = ops.fixGPS(lngRaw,lngRef);
			    	var alt = ops.fixGPS(altRaw,altRef);
			    	var gpsObj = {};
					gpsObj.latitude = lat;
					gpsObj.longitude = lng;
					gpsObj.altitude = alt;
					gpsObj.dateTime = iMD.datetime;
					gpsObj.ExifJSON = metadata;
			    }
			    options.EXIF = gpsObj;
			    ops._moveFile(filename);
				//do not call onCaptureJavascript() here ... it gets called by ops._move() ....window.resolveLocalFileSystemURL(imageURI,ops.fsOK,ops.fsError);
			    //if(options.onCaptureJavascript) options.onCaptureJavascript.call(this, {data : imageURI});
			} catch(err) {
				//if you get here then you were not using the AA camera plugin, so EXIF info is not available
				ops._moveFile(imageURI);
				//do not call onCaptureJavascript() here ... it gets called by ops._move() ....window.resolveLocalFileSystemURL(imageURI,ops.fsOK,ops.fsError);
				//if(options.onCaptureJavascript) options.onCaptureJavascript.call(this, {data : imageURI});
			}
		}
		ops._moveFile = function(filename) {
			var flagMove = false;
			if(typeof options.phonegapMoveFileToPermanentStorage != 'undefined') flagMove = options.phonegapMoveFileToPermanentStorage;
			if(flagMove) {
				if(typeof device == 'undefined') {
					alert('ERROR The PhoneGap \'device\' plugin is not installed.');
				}
				var _dir = DLG1_DlgObj.phoneGapGetLocalDirURL(options.phonegapFileSystemType);
				var _onFolderEnsured = function() {
					var pos = filename.indexOf('?'); // look for ?, not part of a filename when moving files
					if (pos>=0) filename = filename.substring(0,pos); // remove query parts if present
					var objFn = A5.parseFilename(filename);
					var extension = objFn.name.split('.');
					extension = extension[extension.length-1];
					var targetName = A5.UUID() + '.' + extension;
					var subfolder = '';
					if(options.phonegapPermanentStorageFolder != '') {
						subfolder = options.phonegapPermanentStorageFolder + '/';
					}
					var _moveOK = function() {
						var fn = _dir + subfolder + targetName;
						window.resolveLocalFileSystemURL(fn,ops.fsOK,ops.fsError);
					}
					var _moveFail = function(e) {
						alert('Move error: '+e.code);
					}
					DLG1_DlgObj.phoneGapMoveFileURL(filename,_dir, subfolder + targetName,_moveOK,_moveFail)
				}
				var _onError = function() {
					alert('could not create folder');
				}
				if(options.phonegapPermanentStorageFolder != '') {
					DLG1_DlgObj.phoneGapEnsureDirPathURL(_dir, options.phonegapPermanentStorageFolder, _onFolderEnsured, _onError)
				} else {
					//storing in the root of the requested filesystem --
					_onFolderEnsured();
				}
			} else {
				//do not need to move the file
				window.resolveLocalFileSystemURL(filename,ops.fsOK,ops.fsError);
			}
		}
		ops.onImageSelectFail = function(msg) {
			if(typeof options.onCaptureCancel == 'function') {
				options.onCaptureCancel.call();
			} else {
				navigator.notification.alert(msg,null,options.imageSelectionCanceledMessage,options.imageSelectionCanceledButton);
			}
		}
		ops.onCameraCaptureFail = function(msg) {
			if(typeof options.onCaptureCancel == 'function') {
					options.onCaptureCancel.call(this,msg);
			} else {
				navigator.notification.alert(msg,null,options.cameraCanceledMessage,options.cameraCanceledButton);
			}
		}
		ops.fsOK = function(fileEntry) {
			// HTML5 File system available as fileEntry
			// Using standard HTML5 file handling here
			// get fileEntry URL for upload
			var thisImageURL = fileEntry.toURL();
			if(options.captureDataMode == 'filename') {
				if(options.specialMode == 'detailview') {
					//better be - only mode we are supporting for 'filename'
					var ele = $(ops.imageFieldName);
					if(ele) ele.src = DLG1_DlgObj.addCustomSchemeForAlphaWkWebView(thisImageURL);
					var eleH = $(ops.hiddenFileName);
					if(eleH) eleH.src = thisImageURL;
					$sa(eleH,'a5isdirty','true');
					var exifData = '';
					if(typeof options.EXIF != 'undefined') exifData = JSON.stringify(options.EXIF);
					$sa(eleH,'a5EXIF',exifData);
					ops.dialogObj.refreshClientSideComputations();
					if(options.onCaptureJavascript) options.onCaptureJavascript.call(this, {data : thisImageURL, options: options.EXIF});
				}
			} else {
				fileEntry.file(function(file){
					var reader = new FileReader();
					reader.onloadend = function(e) {
						// this is Base64 encoded
						if(options.specialMode == 'detailview') {
							var ele = $(ops.imageFieldName);
							if(ele) ele.src = e.target.result;
							var eleH = $(ops.hiddenFileName);
							if(eleH) eleH.src = e.target.result;
							$sa(eleH,'a5isdirty','true');
							ops.dialogObj.refreshClientSideComputations();
							if(options.onCaptureJavascript) options.onCaptureJavascript.call(this, {data : e.target.result, fileSystemURL: fileEntry.nativeURL, options: options});
						} else {
							if(options.onCaptureJavascript) options.onCaptureJavascript.call(this, {data : e.target.result, fileSystemURL: fileEntry.nativeURL, options: options});  //pass in options so that the user defined callback js can reference options (which has the exif data in it)
						}
					};
					reader.onerror = function(e) {
						navigator.notification.alert('<a5:r>File reader error</a5:r>');
					};
					reader.readAsDataURL(file);
				},function(error) {
					navigator.notification.alert('<a5:r>Image file read error</a5:r>');
				});
			}
		}
		ops.fsError = function() {
			navigator.notification.alert('<a5:r>Local File system unavailable.</a5:r>');
		}
		// Calculate positioning for iPad popup menu if applicable
		var cordovaPopoverOptions = null;
			if (ops.cordova.iPadEleId.length > 0) {
			var ele = $(ops.cordova.iPadEleId);
			if (ele) {
				var rect = ele.getBoundingClientRect();
				var x = rect.left;
				var y = rect.top;
				var w = rect.right - rect.left;
				var h = rect.bottom - rect.top;
				cordovaPopoverOptions = new CameraPopoverOptions(x,y,w,h,15);
			}
		}
		// These options define all of the objects functionality
		var cordovaOptions = {
			quality: Number(ops.cordova.imageQuality),
			allowEdit: ops.cordova.allowEdit,
			sourceType: Number(ops.cordova.pictureSourceVal),
			correctOrientation: true,
			destinationType: 1,
			targetWidth: Number(ops.cordova.targetWidth),
			targetHeight: Number(ops.cordova.targetHeight),
			saveToPhotoAlbum: ops.cordova.saveToPhotoAlbum,
			popoverOptions: cordovaPopoverOptions,
			encodingType: Camera.EncodingType.JPEG
		}
		/*
		var options = {
				destinationType: Camera.DestinationType.FILE_URI,
				sourceType: Camera.PictureSourceType.PHOTOLIBRARY,
				mediaType: Camera.MediaType.VIDEO
				//getting error: destination file type unavailable
			};
		*/
		if (cordovaOptions.sourceType != 1) {
			cordovaOptions.saveToPhotoAlbum = false;
			navigator.camera.getPicture(ops.onCameraSuccess, ops.onImageSelectFail,cordovaOptions);
		} else {
			navigator.camera.getPicture(ops.onCameraSuccess, ops.onCameraCaptureFail,cordovaOptions);
		}
	}
DLG1_DlgObj.stripCustomSchemeForAlphaWkWebView = function(fileURL) {
	if(fileURL.indexOf('alpha-local://') == 0 && fileURL.indexOf('_app_file_') >-1) {
		var name = fileURL.split('alpha-local://localhost/_app_file_/')[1];
		//file: protocol requires 3 forward slashes
		name = 'file:///'+ name ;
		return name;
	}
	try{
		if(fileURL.toLowerCase().indexOf('alpha-local') == -1) return fileURL;
		return fileURL.split('url=')[1]
	}catch(e) { return fileURL}
}
//////////
DLG1_DlgObj.addCustomSchemeForAlphaWkWebView = function(fileURL) {
	if (typeof fileURL != 'string') return fileURL; //only process strings
	// catch null fileURL
	if (!fileURL) {
		return fileURL;
	}
	function getExt(path){
    	var ext = (path.match(/(?:.+..+[^\/]+$)/ig) != null) ? path.split('.').slice(-1): ['dir'];
    	return ext[0].toLowerCase();
	}
	// set default
	var modifiedFileURL = fileURL;
	const alphaJpgScheme   = 'alpha-local://jpg?url=';
	const alphaSvgScheme   = 'alpha-local://svg?url=';
	const alphaPngScheme   = 'alpha-local://png?url=';
	const alphaAudioScheme = 'alpha-local://audio?url=';
	const alphaVideoScheme = 'alpha-local://video?url=';
	const alphaHtmlScheme  = 'alpha-local://html?url=';
	const alphaViewScheme  = 'alpha-local://view?url=';
	const alphaViewDirScheme = 'alpha-local://viewdir?url=';
	// Is Alpha's WkWebView plugin installed?
	if (typeof WkWebView == 'object' && WkWebView != null) {
		if (typeof WkWebView.convertFilePath == 'function') {
			//using Cordova 6.2
			var modifiedFileURL = WkWebView.convertFilePath(fileURL);
		} else {
			if (typeof WkWebView.isAlphaWkWebView == 'function') {
				if (fileURL.startsWith('file://')) {
					var ext = getExt(fileURL);
					switch(ext) {
						case "jpg":
							modifiedFileURL = alphaJpgScheme + fileURL;
							break;
						case "png":
							modifiedFileURL = alphaPngScheme + fileURL;
							break;
						case "svg":
							modifiedFileURL = alphaSvgScheme + fileURL;
							break;
						case "m4a":
						case "mp3":
						case "wav":
							modifiedFileURL = alphaAudioScheme + fileURL;
							break;
						case "mp4":
						case "m4v":
						case "mov":
							modifiedFileURL = alphaVideoScheme + fileURL;
							break;
						case "html":
							modifiedFileURL = alphaHtmlScheme + fileURL;
							break;
						// for viewing files in iOS QuickLook viewer
						case "pdf":
						case "doc":
						case "xlsx":
						case "rtf":
						case "csv":
						case "ppt":
						case "txt":
						case "zip":
							modifiedFileURL = alphaViewScheme + fileURL;
							break;
						// for viewing a directory of files in iOS QuickLook viewer
						case "dir":
							modifiedFileURL = alphaViewDirScheme + fileURL;
							break;
					}
				}
			}
		}
	}
	return modifiedFileURL;
}
//////////////
	DLG1_DlgObj._abortS3Upload = function(__guid,number,rowId) {
		var arrS3 = DLG1_DlgObj.__CORSUploads[__guid]['arrS3'];
		var options = DLG1_DlgObj.__CORSUploads[__guid]['options'];
		var _dlgObj = DLG1_DlgObj;
		var _xhr = arrS3[number].xhr;
		_xhr.abort();
		arrS3[number].aborted = true;
		if(typeof rowId != 'undefined') {
			var ele = $(rowId);
			if(ele) ele.style.display = 'none';
		}
		//uploadCompleteFunction
		var ops = DLG1_DlgObj.__CORSUploads[__guid]['ops'];
		//fire the onComplete events
		var flagAllCompleted = false;
		var c = 0;
		for(var i = 0; i < arrS3.length; i++) {
			if(arrS3[i].completed == true || arrS3[i].aborted == true) c = c+1;
		}
		if(c == arrS3.length) flagAllCompleted = true;
		var f = arrS3[number];
		var e = {
			name: f.name,
			type: f.type,
			size: f.size,
			aborted: f.aborted,
			number: number,
			fileArray: arrS3,
			targetName: arrS3[number].targetName
		}
		options.onCompleteFile(e);
		if(flagAllCompleted) {
			options.onCompleteAllFiles(e);
			if(options.displayProgress) {
				var eleP = $(_dlgObj.dialogId + '.V.R1.' + options.progressDisplayPlaceholder);
				if(eleP) eleP.style.display = 'none';
			}
			delete DLG1_DlgObj.__CORSUploads[__guid];
		}
		//end onComplete events
	}
	/////////////////////////////////////////////////////////////////////////
DLG1_DlgObj.fileUploadAmazonS3 = function(options) {
if( typeof options.maxActiveUploads == 'undefined') options.maxActiveUploads = 10;
		if(typeof options.target != 'undefined') {
			if(options.target.toLowerCase() == 'server') {
				if(DLG1_DlgObj._embeddedMode) {
					alert('This action cannot be perfomed in Working Preview.');
					return;
				}
			}
		}
		var eleB = '';
		var _dlgObj = this;
		var _part = options.part;
		delete ops;
		var ops = {};
		if(typeof options.onBeforeFileSelect == 'function') {
			var result = options.onBeforeFileSelect();
			if(typeof result != 'undefined') {
				if(!result) return false;
			}
		}
		ops.formatNum = function(num) {
			var suffix = 'Kb';
		 	if(num >= 1000000) {
		 		num = num/1000000;
		 		suffix = 'Mb';
			} else if(num >= 1000) {
			 	num = num / 1000;
			 	suffix = 'Kb';
			} else {
			   suffix = 'bytes'
			  }
			num = Math.round(num * 100) / 100;
			num = Number(num);
			return (num).toLocaleString() + suffix;
		}
		ops.setProgress = function(percent,message,objS3) {
			//fire system onProgress events
			if(options.displayProgress) {
				var i = objS3.number;
				//id_i = _dlgObj.dialogId + '.V.R1.' + options.progressDisplayPlaceholder + '.' + (i+1);
				id_i = options.resolvedProgressPlaceholder + '.' + (i+1);
				var ep = $(id_i);
				if(ep) {
					if(options.progressStyle == 'text') ep.innerHTML = percent + '%';
					else ep.style.width = percent + '%';
				}
			}
			var e = {
				percent: percent,
				message: message,
				name: objS3.name,
				targetName: objS3.targetName,
				number: objS3.number,
				size: objS3.size,
				type: objS3.type
			}
			if(typeof objS3.userProgressFunction == 'function') objS3.userProgressFunction(e);;
		}
		ops.createCORSRequest = function(method, url) {
			var left = url.split('?')[0];
			var right = url.split('?')[1];
			right = right.split('/').join('%2F');
			right = right.replace('host;x-amz-acl','host%3Bx-amz-acl')
			url = left + '?' + right;
  			var xhr = new XMLHttpRequest();
  			//alert(method)
  			//alert(url);
			 // "withCredentials" only exists on XHR2 objects
  			if ("withCredentials" in xhr) {
  				try {
    				xhr.open(method, url, true);
    			} catch(err) {
    				alert('XHR error - could not open XHR object. This action is not supported in Working Preview if you are using Internet Explorer. Try using Chrome Working Preview.');
    				return false;
    			}
			} else if (typeof XDomainRequest != "undefined") {
			    // XDomainRequest only exists in IE
    			xhr = new XDomainRequest();
			    xhr.open(method, url);
  			} else {
			  	// CORS not supported by this browser
    			xhr = null;
			  }
		  return xhr;
		}
		ops.uploadToS3 = function(file, url, objS3) {
			var targetServer = objS3.targetServer;
			if(typeof targetServer == 'undefined') targetServer = 'S3';
			if(targetServer.toUpperCase() == 'S3') {
				var xhr = ops.createCORSRequest('PUT', url);
			} else {
				//alpha server
				var additionalInfo = '';
				if(typeof options.additionalInfo == 'function') {
					additionalInfo = options.additionalInfo.call();
				}
				var s3Indirect = '';
				if(typeof options.xbasicFunctionNameS3Indirect !='undefined') s3Indirect = options.xbasicFunctionNameS3Indirect;
				additionalInfo = A5.ajax.buildURLParam('__additionalInfo',additionalInfo);
				var AAURI = encodeURI(DLG1_DlgObj.ajaxURL + '&' + additionalInfo + '&__Ajax=true&__FormAction=GenericAjaxCallback&_XbasicFunction=system:multifileupload&_xbasic=' + options.xbasicFunction + '&_s3indirect=' + s3Indirect );
				var xhr = new XMLHttpRequest();
				xhr.open('POST',AAURI,true);
			}
			if (!xhr) {
				//ops.setProgress(0, 'CORS not supported',objS3);
				if(typeof objS3.onError == 'function') objS3.onError({errorText: 'CORS not supported', errorCode: -1, fileObject: objS3});
			  	else alert('CORS not supported');
			} else {
			//capture the xhr object so you can call cancel
			objS3.arrS3[objS3.number].xhr = xhr;
			xhr.onreadystatechange = function() {
				//this.readyState == 4 & this.status == 200 -- success
				//this.readyState == 4 && this.status = 408 - timeout
				//anything else is an error
			}
			xhr.onload = function() {
			  if(xhr.status == 200) {
				ops.setProgress(100, 'Upload completed.',objS3);
				//file number is available in objS3.number
				objS3.uploadCompleteFunction.call(objS3);
				var txt = this.responseText;
				if(txt.indexOf('Eval:') == 0) {
					txt = txt.substring(5);
					eval(txt);
				}
			  } else {
				//ops.setProgress(0, 'Upload error: ' + xhr.status);
				var responseText = '';
				if(typeof xhr.responseText != 'undefined') responseText = xhr.responseText;
				if(typeof objS3.onError == 'function') objS3.onError({errorText: 'Upload error', errorCode: xhr.status, fileObject: objS3, errorText: responseText});
			  	else alert('XHR error. Reported error:' + responseText);
			  }
			};
			xhr.onerror = function() {
			  //ops.setProgress(0, 'XHR error.');
			  if(typeof objS3.onError == 'function') objS3.onError({errorText: 'XHR Error', errorCode: xhr.status, fileObject: objS3});
			  else alert('XHR error');
			};
			xhr.upload.onprogress = function(e) {
			  if (e.lengthComputable) {
				var percentLoaded = Math.round((e.loaded / e.total) * 100);
				ops.setProgress(percentLoaded, percentLoaded == 100 ? 'Finalizing.' : 'Uploading.',objS3);
			  }
			};
			if(!options.target) options.target = 'S3';
			if(options.target.toUpperCase() == 'S3') {
				if(typeof options.tags == 'undefined') options.tags = '';
				xhr.setRequestHeader('Content-Type', file.type);
				if(typeof _dlgObj._authenticatedRead == 'boolean') {
					objS3.authenticatedRead = _dlgObj._authenticatedRead  //set in a5DialogHelper_signAmazonS3FileUploadURL()
				}
				if(!objS3.authenticatedRead) {
					xhr.setRequestHeader('x-amz-acl', 'public-read');
				} else {
					xhr.setRequestHeader('x-amz-acl', 'authenticated-read');
				}
				if(options.tags != '') {
					options.tags = decodeURIComponent(options.tags);
					options.tags = atob(options.tags);
					xhr.setRequestHeader('x-amz-tagging', options.tags);
				}
			} else {
				//don't bother with headers. they will get set automatically becuase we will be .send()ing a FormData() object
			}
			if(targetServer.toUpperCase() == 'S3') {
				if (typeof window['cordova'] != 'undefined') {
				}
				//alert(typeof options);
				//alert(1);
				//
				//var options = new FileUploadOptions();
				xhr.send(file);
			} else {
				//uploading to alpha server - by using a FormData() object, the content-type headers get set correctly
				var formData = new FormData();
				formData.append('file',file);
				xhr.send(formData);
			}
			}
		}
		ops.handleFileSelect = function(evt) {
			delete arrS3;
			var arrS3 = [];
			ops.__guid = Number(new Date());
			var __guid = ops.__guid;
			DLG1_DlgObj.__CORSUploads = {};
			DLG1_DlgObj.__CORSUploads[__guid] = {};
			DLG1_DlgObj.__CORSUploads[__guid]['arrS3'] = arrS3;
			DLG1_DlgObj.__CORSUploads[__guid]['ops'] = ops;
			DLG1_DlgObj.__CORSUploads[__guid]['options'] = options;
			var files = evt.target.files;
			var f = '';
			var data = '';
			var targetName = '';
			var newTargetName = '';
			arrS3.length = 0;
			for(var i = 0; i < files.length; i++) {
				f = files[i];
				if(typeof f.name == 'undefined') {
					var localFileName = 'blobfile.jpg';
					if(typeof options.localFileName != 'undefined') localFileName = options.localFileName;
					f.name = localFileName;
				}
				delete obji;
				var obji = {
					number: i,
					name: f.name,
					size: f.size,
					type: f.type,
					file: f,
					completed: false,
					aborted: false,
					lastModified: f.lastModified
				}
				arrS3.push(obji)
			}
			var __guid = ops.__guid;
			//validate file selection -------------------------------------
			var totalSize = 0;
			if(typeof options.maxFileSize == 'undefined') options.maxFileSize = -1;
			var maxSize = options.maxFileSize;
			if(maxSize == -1) maxSize = 999999999999999;
			if(typeof options.maxFileSizeTotal == 'undefined') options.maxFileSizeTotal = -1;
			var maxSizeTotal = options.maxFileSizeTotal;
			if(maxSizeTotal == -1) maxSizeTotal = 999999999999999;
			if(typeof options.allowedFileTypes == 'undefined') options.allowedFileTypes = '';
			var fileMsg = options.customization.maxFileSize;
			var fileTotalMsg = options.customization.totalFileSize;
			var typeMsg = options.customization.fileType;
			var flagHasValidationFunction = false;
			if(typeof options.onValidationError == 'function') flagHasValidationFunction = true;
			for(var i = 0; i < arrS3.length; i++) {
				totalSize = totalSize + arrS3[i].size;
				//check size
				if(arrS3[i].size > maxSize) {
					if(flagHasValidationFunction) {
						options.onValidationError({violationType: 'size', name: arrS3[i].name, size: arrS3[i].size, type: arrS3[i].type});
					} else {
						if(typeof fileMsg != 'undefined' && fileMsg != '') {
							var msg = fileMsg;
							var e = arrS3[i];
							msg = msg.replace('[filename]',e.name);
							msg = msg.replace('[filesize]','' + e.size);
							msg = msg.replace('[maxfilesize]','' + maxSize);
							alert(msg);
						} else {
							alert('File exceeds maximum allowed size of ' + maxSize);
						}
					}
					return false;
				}
				//check type
				if(options.allowedFileTypes != '') {
					var arrT = options.allowedFileTypes.split(',');
					for(var i2 = 0; i2 < arrT.length; i2++ ) {
						arrT[i2] =   $u.s.aTrim(arrT[i2].toLowerCase());
						arrT[i2] = arrT[i2].replace('.','');
					}
					var ext = arrS3[i].name.split('.');
					ext = ext[ext.length -1];
					ext = ext.toLowerCase();
					var ia = $u.a.find(arrT,ext);
					if(ia == -1) {
						if(flagHasValidationFunction) {
							options.onValidationError({violationType: 'type', name: arrS3[i].name, size: arrS3[i].size, type: arrS3[i].type});
						} else {
							if(typeof typeMsg != 'undefined' && typeMsg != '') {
								var msg = typeMsg;
								var e = arrS3[i];
								msg = msg.replace('[filename]',e.name);
								msg = msg.replace('[filetype]',ext);
								alert(msg);
							} else {
								alert('Invalid file type ' + ext);
							}
						}
						return false;
					}
				}
			}
			//check total size
			if(totalSize > maxSizeTotal) {
				//Selected files ([filecount] files, total size [totalfilesize]) exceed the maximum allowed total file size of [maxtotalfilesize].
				if(flagHasValidationFunction) {
					options.onValidationError({violationType: 'totalSize', totalSize: totalSize, maxSizeTotal: maxSizeTotal});
				} else {
					if(typeof fileTotalMsg != 'undefined' && fileTotalMsg != '') {
						var msg = fileTotalMsg;
						var e = arrS3[i];
						msg = msg.replace('[filecount]',arrS3.length);
						msg = msg.replace('[totalfilesize]','' + totalSize);
						msg = msg.replace('[maxtotalfilesize]','' + maxSizeTotal);
						alert(msg);
					} else {
						alert('Files exceeds maximum allowed size of ' + maxSizeTotal);
					}
				}
				return false;
			}
			//end validate file selection
			if(typeof options.onAfterFilesSelect == 'function') {
				var result = options.onAfterFilesSelect(arrS3);
				if(typeof result != 'undefined') {
					if(!result) return false;
				}
			}
			ops.__handleFileSelectLow(files,__guid,arrS3)
		}
		ops._generatePlaceholderId = function() {
			var txt = options.progressDisplayPlaceholder;
			var flagDV = false;
			if(typeof options.__dv != 'undefined') flagDV = options.__dv;
			var num = txt.split('.')[1];
			if(!flagDV) {
				var eleId = _dlgObj.gridId + '.V.R'+options.rowNumber+'._UNBOUND_STATICTEXT_' + num;
			} else {
				var eleId = _dlgObj.gridId + '.D.V.R'+options.rowNumber+'._UNBOUND_STATICTEXT_' + num;
			}
			return eleId;
		}
		ops.__handleFileSelectLow = function(files,__guid,arrS3) {
			if(options.displayProgress) {
				var nn = options.progressDisplayPlaceholder.indexOf('[');
				if(options.progressDisplayPlaceholder.indexOf('ELEMENT:') == 0) {
					options.resolvedProgressPlaceholder = options.progressDisplayPlaceholder.split(':')[1];
				} else {
					options.resolvedProgressPlaceholder = _dlgObj.dialogId + '.V.R1.' + options.progressDisplayPlaceholder
				}
				var eleP = $(options.resolvedProgressPlaceholder);
				if(options.part == 'grid') {
					options.resolvedProgressPlaceholder = this._generatePlaceholderId()
					var eleP = $(options.resolvedProgressPlaceholder);
				}
				if(eleP) {
					eleP.style.display = '';
					var arrH = [];
					var id_i = '';
					var id_row_i = '';
					var html = '';
					var html_i = '';
					var spanTxt = '';
					var flagAllowCancel = options.allowCancel;
					if(typeof flagAllowCancel == 'undefined') flagAllowCancel = false;
					if(typeof options.progressStyle == 'undefined') options.progressStyle = 'bar';
					if(options.progressStyle == 'text') {
						for(var i = 0; i < arrS3.length; i++) {
							//id_i = _dlgObj.dialogId + '.V.R1.' + options.progressDisplayPlaceholder + '.' + (i+1);
							id_i = options.resolvedProgressPlaceholder + '.' + (i+1);
							id_row_i = id_i + '.ROW';
							html_i = '';
							html_i += '<tr id="'+id_row_i+'">';
							if(flagAllowCancel) {
								html_i += '<td><div style="cursor:pointer;padding: 5px;" title="Cancel upload" onclick="DLG1_DlgObj._abortS3Upload(\''+__guid+'\','+i+',\''+id_row_i+'\');">X</div></td>';
							}
							html_i +='<td><div>' + arrS3[i].name + ' (' + ops.formatNum(arrS3[i].size) + ') <span id='+id_i+'></span> </div></td>';
							html_i +='</tr>'
							arrH.push(html_i)
						}
						html = arrH.join('');
						html = '<table>' + html + '</table>'
					} else if (options.progressStyle == 'bar') {
						var flagShowFilename = options.showFileNameInProgressBar;
						if(typeof flagShowFilename == 'undefined') flagShowFilename = true;
						var flagMobile = false;
						if(typeof options._flagMobile != 'undefined') flagMobile = options._flagMobile;
						html_i = '';
						if(typeof options.progressBarColor == 'undefined') options.progressBarColor = '#9fa1e8';
						if(typeof options.progressBarWidth == 'undefined') options.progressBarWidth = '1.5in';
						var color = options.progressBarColor
						var width = options.progressBarWidth;
						for(var i = 0; i < arrS3.length; i++) {
							//id_i = _dlgObj.dialogId + '.V.R1.' + options.progressDisplayPlaceholder + '.' + (i+1);
							id_i = options.resolvedProgressPlaceholder + '.' + (i+1);
							id_row_i = id_i + '.ROW';
							html_i = '';
							html_i += '<tr id="'+id_row_i+'">';
							if(flagShowFilename) {
								html_i += '<td>' + arrS3[i].name + ' (' + ops.formatNum(arrS3[i].size) + ')</td>';
							} else {
								html_i += '<td>(' + ops.formatNum(arrS3[i].size) + ')</td>';
							}
							html_i += '<td><div style="border: solid 1px '+color+'; width: '+width+';">';
							html_i += '<div id="'+id_i+'"style="width: 0%; height: .05in;  background-color:'+color+';"></div></div></td>';
							if(flagAllowCancel) {
								html_i += '<td><div style="cursor:pointer;padding: 5px;" title="Cancel upload" onclick="DLG1_DlgObj._abortS3Upload(\''+__guid+'\','+i+',\''+id_row_i+'\');">X</div></td>';
							}
							html_i += '</tr>';
							arrH.push(html_i);
						}
						html = arrH.join('');
						//for some reason in ie, this function is getting called a second time and if we don't exit here when .length == 0, it will overwrite the progress bar with a null string
						if(arrH.length == 0) return true;
						html = '<table>' + html + '</table>'
						if(flagMobile) {
							//mobile upload limited to 1 file and don't wrap in table
							//id_i = options.resolvedProgressPlaceholder + '.' + (1);
							html = '';
						}
					}
					eleP.innerHTML = html;
				}
			}
			function onCompleteFile(e) {
				throttleRequests({finishedRequest: e});
				if (onCompleteFile.origOnCompleteFile !== undefined && onCompleteFile.origOnCompleteFile !== null) {
					onCompleteFile.origOnCompleteFile(e);
				}
			}
			if (options.onCompleteFile !== onCompleteFile) {
				onCompleteFile.origOnCompleteFile = options.onCompleteFile;
				options.onCompleteFile = onCompleteFile;
			}
			function sendRequest(i) {
				var f = files[i];
				var dataA = [];
				dataA.push('_mimeType=' + f.type);
				targetName = f.name;
				if(typeof options.targetName == 'function') {
					newTargetName = options.targetName( f  );
					if(typeof newTargetName != 'undefined') {
						if(newTargetName != '') targetName = newTargetName;
					}
				}
				arrS3[i].targetName = targetName;
				var targetServer = options.target;
				if(!options.target) targetServer = 'S3';
				arrS3[i].targetServer = targetServer;
				dataA.push('_name=' + urlencode(targetName));  //name of object in S3
				dataA.push('_number=' + i);
				if(options.specifyCredentials == 'Explicit') {
					dataA.push('_xbasicFunctionNameForPropertyValues=' + options.xbasicFunctionName);
					dataA.push('_method=explicit');
				} else {
					dataA.push('_namedStorageConnectionString=' + options.connectionString);
					dataA.push('_method=connectionString');
				}
				dataA.push('_authenticatedRead=' + options.authenticatedRead);
				dataA.push('_part=' + options.part);
				dataA.push('_s3timeout='+ options.s3timeout);
				if(typeof options.tags != 'undefined') {
					var tags = options.tags;
				} else {
					var tags = '';
				}
				dataA.push('_tags='+ encodeURIComponent(tags));
				data = dataA.join('&');
				//alert(data);
				if(typeof options.userProgressFunction == 'undefined') options.userProgressFunction = function(e) {};
				if(typeof options.onCompleteAllFiles == 'undefined') options.onCompleteAllFiles = function(e) {};
				var obj = {
					//ajax callback to sign url onComplete
					onComplete: function() {
						var signedURL = decodeURIComponent(_dlgObj._fileCodedURL);
						//attempt to fix a problem uploading to s3 when object name has ( )
						//signedURL = signedURL.replace('(','%28')
						//signedURL = signedURL.replace(')','%29')
						//signedURL = signedURL.replace(' ','%20')
						var num = _dlgObj._fileCodedURLNum;
						var fi = arrS3[num].file;
						var targetServer = arrS3[num].targetServer;
						delete objS3;
						var objS3 = {
							uploadCompleteFunction: function() {
								this.arrS3[this.number].completed = true;
								var flagAllCompleted = false;
								var c = 0;
								for(var i = 0; i < this.arrS3.length; i++) {
									if(this.arrS3[i].completed == true || this.arrS3[i].aborted == true) c = c+1;
								}
								if(c == this.arrS3.length) flagAllCompleted = true;
								var e = {
									name: this.name,
									type: this.type,
									size: this.size,
									number: this.number,
									fileArray: this.arrS3,
									targetName: arrS3[this.number].targetName
								}
								options.onCompleteFile(e);
								if(flagAllCompleted) {
									options.onCompleteAllFiles(e);
									if(options.displayProgress) {
										//var eleP = $(_dlgObj.dialogId + '.V.R1.' + options.progressDisplayPlaceholder);
										var eleP = $(options.resolvedProgressPlaceholder);
										if(eleP) eleP.style.display = 'none';
									}
									delete DLG1_DlgObj.__CORSUploads[__guid];
								}
							},
							userProgressFunction: options.userProgressFunction,
							onError: options.onError,
							name: fi.name,
							size: fi.size,
							type: fi.type,
							number: num,
							arrS3: arrS3,
							targetName: arrS3[num].targetName,
							__guid: __guid,
							authenticatedRead: options.authenticatedRead
						}
						objS3.targetServer = targetServer;
						ops.uploadToS3(fi,signedURL,objS3);
					}
				}
				ops.obj = obj;
				var reader = new FileReader();
				reader.onload = function(e) {
					var eleId = '';
					var ele = '';
					if(typeof options.imageControl != 'undefined' && options.part == 'ux') {
						eleId = options.__alias + '.V.R1.' + options.imageControl.toUpperCase();
						ele = $(eleId);
						if(ele) ele.src = e.target.result;
					} else {
						var flagDV = false;
						if(typeof options.__dv != 'undefined') flagDV = options.__dv
						if(flagDV) {
							eleId = options.__alias + '.D.V.R'+options.rowNumber+'.' + options.imageControl.toUpperCase();
						} else {
							eleId = options.__alias + '.V.R'+options.rowNumber+'.' + options.imageControl.toUpperCase();
						}
						ele = $(eleId);
						if(ele) {
							var oldSrc = ele.src;
							_dlgObj.__oldImage = oldSrc;
							ele.src = e.target.result;
						}
					}
				}
				reader.onerror = function(e) {
					alert('error in reader 123');
				}
				if(typeof options.imageControl != 'undefined') reader.readAsDataURL(f);
				var flagTargetIsServer = false;
				if(typeof options.target != 'undefined') {
					if(options.target.toLowerCase() == 'server') flagTargetIsServer = true;
				}
				if(!flagTargetIsServer) {
					_dlgObj.ajaxCallback('','','a5DialogHelper_signAmazonS3FileUploadURL','',data,obj);
				} else {
					//no need to sign the url for target = 'alpha'
					_dlgObj._fileCodedURLNum = i;
					obj.onComplete();
				}
			}
			var throttleRequests = function (requestsMax) {
				var activeRequests = 0;
				var maxRequests = requestsMax;
				var sentRequests = 0;
				var finishedRequests = 0;
				return function throttleRequestActual(options) {
					if (options !== undefined && options !== null) {
						if (options.finishedRequest !== undefined && options.finishedRequest !== null) {
							activeRequests--;
							finishedRequests++;
						}
					}
					while (sentRequests < files.length && activeRequests < maxRequests) {
						activeRequests++;
						sendRequest(sentRequests);
						sentRequests++
					}
				};
			}(options.maxActiveUploads); // <---- This is the max number of requests to have active at one time.
			// Kickoff the requests.
			throttleRequests({});
		}
		//$e.add($(this.dialogId + '._GETFILEMULTI'),'change',ops.handleFileSelect,'','','__amazonS3fileupload');
		$e.removeGroup('__amazonS3fileupload')
		//bind the change event to the file selector
		if(options.allowMultipleFiles) {
			if(typeof this._getFileMultiListenerLoaded == 'undefined') {
				//this._getFileMultiListenerLoaded = true;
				//$(this.dialogId + '._GETFILEMULTI').addEventListener('change',ops.handleFileSelect,false);
				$e.add($(this.dialogId + '._GETFILEMULTI'),'change',ops.handleFileSelect,'','','__amazonS3fileupload');
			}
			eleB = $(this.dialogId + '._GETFILEMULTI');
		} else {
			if(typeof this._getFileListenerLoaded == 'undefined') {
				//this._getFileListenerLoaded = true;
				//$(this.dialogId + '._GETFILE').addEventListener('change',ops.handleFileSelect,false);
				$e.add($(this.dialogId + '._GETFILE'),'change',ops.handleFileSelect,'','','__amazonS3fileupload');
			}
			eleB = $(this.dialogId + '._GETFILE');
		}
		var flagFilePassedIn = false;
		if(typeof options.flagFilePassedIn != 'undefined') {
			flagFilePassedIn = options.flagFilePassedIn
		}
		if(!flagFilePassedIn) {
			eleB.value = '';
			eleB.click();
			eleB.value = '';
		} else {
			//options.filePassedIn
			var evt = {};
			evt.target = {};
			evt.target.files = [];
			if(options.filePassedIn.constructor == FileList) {
				evt.target.files = options.filePassedIn;
			} else {
				evt.target.files[0] = options.filePassedIn;
			}
			ops.handleFileSelect(evt);
		}
	}
	////==== upload PhoneGap /////////////////////////////////////////////////////
	DLG1_DlgObj.phoneGapFileUpload = function(arr,options) {
		var _dlgObj = this;
		//arr is an array of files to  upload. arr must have a .filename property in each item
		if(typeof LocalFileSystem == 'undefined') {
			if(typeof cordova == 'undefined') {
				alert('Method not supported when not running in PhoneGap');
			} else {
				alert('Required PhoneGap plugins (\'LocalFileSystem 2\')not loaded.');
			}
			return false;
		}
		//initialize variables
		for(var i = 0; i < arr.length; i++) {
			arr[i].name = arr[i].filename;
			arr[i].number = i;
			arr[i].completed = false;
			arr[i].aborted = false;
			arr[i].succeeded = false;
		}
		///define local function for phoneGapFileUpload: generateProgressBarsHTML -------------
		var generateProgressBarsHTML = function (ops,count) {
			var eleTarget = ops.progressElement;
			if(typeof eleTarget != 'undefined') eleTarget = eleTarget.toUpperCase();
			var html = '';
			var html_i = '';
			var name_i = '';
			var progress_i = '';
			var idName = '';
			var idProgress = '';
			if(ops.individualProgress) {
				for(var  i = 0; i < count; i++) {
					name_i = 'Name: ' + i;
					progress_i = 'Progress...' + i;
					idProgress = eleTarget + '.PROGRESS.' + i;
					idName = eleTarget + '.NAME.' + i;
					progress_i = '<div style="border: solid 1px '+ops.color+'; width: '+ops.width+';">';
					progress_i += '<div id="'+idProgress+'"style="width: 0%; height: .05in;  background-color:'+ops.color+';"></div></div></td>';
					html_i = '<td id="'+idName+'">name '+name_i+'</td><td>'+progress_i+'</td>';
					html_i = '<tr>' + html_i + '</tr>';
					html = html + html_i;
				}
			}
			if(ops.showTotalProgress) {
				idProgress = eleTarget + '.PROGRESS.TOTAL';
				idName = eleTarget + '.NAME.TOTAL';
				progress_i = '<div style="border: solid 1px '+ops.color+'; width: '+ops.width+';">';
				progress_i += '<div id="'+idProgress+'"style="width: 0%; height: .05in;  background-color:'+ops.color+';"></div></div></td>';
				html_i = '<td id="'+idName+'"></td><td>'+progress_i+'</td>';
				html_i = '<tr>' + html_i + '</tr>';
				html = html + html_i
			}
			var idProgress = eleTarget + '.PROGRESSDISPLAY';
			html = '<div id="'+idProgress+'"><table>' + html + '</table><div>';
			$(eleTarget).innerHTML = html;
		}
		///define local function for phoneGapFileUpload: phoneGapUploadDoWork -------------
		var phoneGapUploadDoWork = function(arr,options) {
			if(options.target.toLowerCase() == 's3') {
				//s3
				var xbasicFunction = 'a5dialogHelper_systemSignS3Policy';
				var o2 = {};
				$u.o.assign(o2,options);
				/////compute localTargetName before making the callback
				var filenameURI;
				var actionOptions = options;
				for(var i = 0; i < arr.length; i++) {
					filenameURI = arr[i].filename;
					var fileName = filenameURI.substr(filenameURI.lastIndexOf('/')+1);
					var targetName = fileName;
					if(typeof actionOptions.onComputeS3Filename == 'function') {
						var e = {name: targetName, object: arr[i]};
						var newTargetName = actionOptions.onComputeS3Filename(e);
						if(typeof newTargetName == 'undefined') newTargetName = targetName;
						if(newTargetName == '') newTargetName = targetName;
						targetName = newTargetName;
					}
					//on iphone video name is always 'capturedvideo.mov' (in a unique subfolder)
					if(targetName.toLowerCase() == 'capturedvideo.mov') {
						targetName = A5.UUID() + '_video.MOV';
					}
					arr[i].targetName = targetName;
				}
				///--------end compute s3 target name
				o2.arr = arr;
				var data = A5.ajax.buildURLParam('_jsonOptions',JSON.stringify(o2));
				var ajaxObj = {
					errorFunction: function() {
						if(typeof options.onAjaxFailed == 'function') options.onAjaxFailed();
					},
					onComplete: function() {
						var startUploadLocal = function() {
							var totalSize = 0;
							for(var i = 0; i < arr.length; i++) {
								totalSize = totalSize + Number(arr[i].size);
							}
							var _sysObj = {};
							_sysObj.totalBytesToUpload = totalSize;
							var flagMobile = false;
							if(typeof options._flagMobile != 'undefined') flagMobile = options._flagMobile;
							options._flagMobile = flagMobile;
							if(options.showProgress && !flagMobile) generateProgressBarsHTML(options.progress,arr.length);
							//alert('ready to start uploading files: total ' + totalSize);
							startUploadFilesToS3(_sysObj,options);
						}
						var _sTop = {};
						getFileSizesForAllItemsInArray(startUploadLocal,_sTop);
					},
					deviceOfflineFunction: function() {
						if(typeof options.onDeviceOffline == 'function') options.onDeviceOffline();
					}
				}
				//alert('ajax callback');
				DLG1_DlgObj.ajaxCallback('','',xbasicFunction,'',data,ajaxObj);
			} else {
				//alpha server
				var startUploadLocal = function() {
					var totalSize = 0;
					for(var i = 0; i < arr.length; i++) {
						totalSize = totalSize + Number(arr[i].size);
					}
					var _sysObj = {};
					_sysObj.totalBytesToUpload = totalSize;
					if(options.showProgress) generateProgressBarsHTML(options.progress,arr.length);
					startUploadFilesToS3(_sysObj,options);
				}
				var _sTop = {};
				getFileSizesForAllItemsInArray(startUploadLocal,_sTop);
			}
		}
		///define local function for phoneGapFileUpload: getFileSizesForAllItemsInList
		var getFileSizesForAllItemsInArray = function(allDone_GotAllFileSizes_Callback, _sTop)  {
			var _s = {count: 0};
			var getFileSizesForAllItemsInArrayLow = function (arr,r,count,callback,_s,_sTop) {
				var rowNumber = r;
				var url = arr[r].filename;
				var resolveLocalFileURL_SUCCESS = function(fileEntry) {
					var file_SUCCESS = function(f) {
						arr[r].size = f.size;
						_s.count = _s.count + 1;
						if(_s.count == count) {
							callback(_sTop);
						}
					}
					fileEntry.file(file_SUCCESS);
				}
				var resolveLocalFileURL_fail = function() {
					arr[r].size = 0
					_s.count = _s.count + 1;
					if(_s.count == count) {
						callback(_sTop);
					}
				}
				//on  iphone, video capture does not return a file with the file:// prefix
				var urlToResolve = url;
				if(url.indexOf('file:') != 0) {
					urlToResolve = urlToResolve.replace('/private','file:\/\/');
				}
				//window.resolveLocalFileSystemURL(urlToResolve, resolveLocalFileURL_SUCCESS, function() { } );
				window.resolveLocalFileSystemURL(urlToResolve, resolveLocalFileURL_SUCCESS, resolveLocalFileURL_fail );
			}
			for(var i = 0; i < arr.length; i++) {
				getFileSizesForAllItemsInArrayLow(arr,i,arr.length,allDone_GotAllFileSizes_Callback,_s,_sTop)
			}
		}
		///define local function for phoneGapFileUpload: startUploadFilesToS3
		var startUploadFilesToS3 = function(_sysObj,options) {
			//_sysObj.totalBytesToUpload;
			for(var i = 0; i < arr.length; i++) {
				upLoadFilesToS3Work(arr[i].filename,arr,i,_sysObj,options)
			}
		}
		///define local function for phoneGapFileUpload: s3SignedPolicy
		var s3SignedPolicy = function() {
			var obj = {};
			obj.hasError = DLG1_DlgObj._pgS3.hasError;
			obj.policyBase64 = DLG1_DlgObj._pgS3.policyBase64;
			obj.signature = DLG1_DlgObj._pgS3.signature;
			obj.userKey = DLG1_DlgObj._pgS3.accessKey;
			obj.acl = DLG1_DlgObj._pgS3.acl;
			obj.bucket = DLG1_DlgObj._pgS3.bucket;
			return obj;
		}
		///define local function for phoneGapFileUpload: uploadFilesToS3Work
		var upLoadFilesToS3Work = function(filenameURI,arr,fileNumber,_sysObj, actionOptions) {
			//this code to compute the targetName now gets run before the ajax callback to sign the url is made because the v4 amz signing method
			//needs to include the s3 object name in the url that gets signed
			var fileName = filenameURI.substr(filenameURI.lastIndexOf('/')+1);
			var targetName = fileName;
			if(typeof actionOptions.onComputeS3Filename == 'function') {
				var e = {name: targetName, object: arr[fileNumber]};
				var newTargetName = actionOptions.onComputeS3Filename(e);
				if(typeof newTargetName == 'undefined') newTargetName = targetName;
				if(newTargetName == '') newTargetName = targetName;
				targetName = newTargetName;
			}
			//on iphone video name is always 'capturedvideo.mov' (in a unique subfolder)
			if(targetName.toLowerCase() == 'capturedvideo.mov') {
				targetName = A5.UUID() + '_video.MOV';
			}
			if(typeof actionOptions.target != 'undefined') {
				if(actionOptions.target == 'alphaanywhere') {
					arr[fileNumber].targetName = targetName
				}
			}
			//
			//do not do this here when target is S3. it has already been done before the ajax callback.
			//arr[fileNumber].targetName = targetName; //use name that event returned
			var ft = new FileTransfer();
			var options = new FileUploadOptions();
			options.fileKey = "file";
			options.fileName = targetName;
			options.mimeType = "image/jpeg";
			options.chunkedMode = false;
			if(actionOptions.target == 'alphaanywhere') {
				var s3URI = encodeURI( $u.s.aTrim(DLG1_DlgObj.ajaxURL));
				//s3URI = 'junk'; //force a file upload error
				//alert('remember to turn this off');
				var xbasicAfterUpload = actionOptions.xbasicAfterFileUploaded
				var specialMode = '';
				if(typeof actionOptions.specialMode != 'undefined') specialMode = actionOptions.specialMode;
				options.params = {
					"_XbasicFunction" : "system:phonegapfileupload",
					"__Ajax" : "true",
					"__FormAction" : "GenericAjaxCallback",
					"__FormID" : "",
					"__xbasicAfterUpload" : xbasicAfterUpload,
					"__arrayIndex" : fileNumber,
					"__actionOptions" : JSON.stringify(actionOptions),
					"__specialMode" : specialMode,
					"__targetName" : targetName,
					"__arrayItem" : JSON.stringify(arr[fileNumber]),
					"__ajaxURL" : $u.s.aTrim(DLG1_DlgObj.ajaxURL)
				}
			} else {
				//s3
				var obj = s3SignedPolicy();
				var s3URI = encodeURI('https://' + obj.bucket + '.s3.amazonaws.com/'),
					policyBase64 = obj.policyBase64,
					signature = obj.signature,
					awsKey = obj.userKey,
					acl = obj.acl;
				//this is computed on the server
				s3URI = DLG1_DlgObj._pgS3.signedURI;
				var arr2 = JSON.parse(DLG1_DlgObj._pgS3.signedURIArrayJSON);
				var _uri = arr2[fileNumber].uri;
				var _mime = arr2[fileNumber].mimeType;
				s3URI = _uri;
				//alert('s3URI: ' + s3URI);
				options.params = {
					"key": targetName,
					"AWSAccessKeyId": awsKey,
					"acl": acl,
					"policy": policyBase64,
					"signature": signature,
					"Content-Type": "image/jpeg"
				};
			}
			var setProgress = function(progressId,fileNumber,pctComplete) {
				var id = '';
				var countCompleted = 0;
				if(fileNumber == 'total') {
					id = progressId + '.PROGRESS.TOTAL';
					for(var i = 0; i < arr.length; i++) {
						if(arr[i].completed) countCompleted = countCompleted + 1;
					}
					var idN = progressId + '.NAME.TOTAL';
					var ele = $(idN);
					//if(ele) ele.innerHTML = 'Completed: ' + countCompleted +  ' of ' + arr.length;
				} else {
					id = progressId + '.PROGRESS.' + fileNumber;
				}
				var ele = $(id);
				if(ele) ele.style.width = pctComplete + '%';
				var idP = progressId + '.PROGRESSDISPLAY';
				ele = $(idP);
				if(ele) ele.style.display = '';
			}
			ft.onprogress = function(progressEvent) {
				var totalBytesToTransfer = _sysObj.totalBytesToUpload
				if(typeof _sysObj.workDone == 'undefined') {
					_sysObj.workDone = [];
					for(var i = 0; i < arr.length; i++) {
						_sysObj.workDone[i] = 0;
					}
				 };
				_sysObj.workDone[fileNumber] = progressEvent.loaded;
				var gTotal = 0;
				for(var i = 0; i < _sysObj.workDone.length; i++) {
					if(typeof _sysObj.workDone[i] != 'undefined') {
						gTotal = gTotal + _sysObj.workDone[i];
					}
				}
				var progressId = actionOptions.progress.progressElement;
				if (progressEvent.lengthComputable) {
					var pctComplete = (progressEvent.loaded / progressEvent.total)*100;
					if(pctComplete > 100) pctComplete = 100;
					pctComplete = $u.n.round(pctComplete,4);
					if(actionOptions.showProgress) setProgress(progressId,fileNumber,pctComplete);
					if(typeof actionOptions.onProgressEvent == 'function') {
						actionOptions.onProgressEvent(arr, fileNumber, pctComplete, progressEvent.loaded, progressEvent.total);
					}
					var pctCompleteTotal = (gTotal / totalBytesToTransfer) * 100;
					if(pctCompleteTotal > 100) pctCompleteTotal = 100;
					pctCompleteTotal = $u.n.round( pctCompleteTotal,4);
					if(actionOptions.showProgress) setProgress(progressId,'total',pctCompleteTotal);
					if(typeof actionOptions.onProgressEvent == 'function') {
						actionOptions.onProgressEvent(arr, 'total', pctCompleteTotal, gTotal, totalBytesToTransfer);
					}
					if(actionOptions._flagMobile) {
						if($('MOBILEUPLOADPROGRESS.1')) $('MOBILEUPLOADPROGRESS.1').style.width = pctCompleteTotal + '%';
					}
				} else {
					//progress messages not possible -- should never happen
				}
			};
			var _hasCompleted = function() {
				var flagAllDone = true;
				for(var i = 0; i < arr.length; i ++) {
					if(arr[i].completed == false) {
						flagAllDone = false;
						break;
					}
				}
				return flagAllDone;
			}
			var fileUploadSuccess = function(r) {
				arr[fileNumber].completed = true;
				arr[fileNumber].succeeded = true;
				arr[fileNumber].remoteName = arr[fileNumber].targetName;
				//for uploads to AlphaAnywhere, the Xbasic function that is called can send a response
				if(r.response != 'undefined') {
					if(r.response != '') eval(r.response);
				};
				//if the targer is the Alpha server and the Xbasic handler sent a response that set the 'targetFileName' property
				var target = actionOptions.target.toLowerCase();
				if(target == 's3') {
					if(typeof actionOptions.s3.template != 'undefined') {
						arr[fileNumber].remoteName = actionOptions.s3.template.replace('__name__',arr[fileNumber].targetName);
					}
				} else {
					if(typeof arr[fileNumber].targetFileName != 'undefined') {
						arr[fileNumber].remoteName = arr[fileNumber].targetFileName;
					}
				}
				if(typeof actionOptions.onCompleteIndividualFile == 'function') {
					actionOptions.onCompleteIndividualFile(arr,fileNumber);
				}
				var flagAllDone = _hasCompleted();
				if(flagAllDone) {
					var progressId = actionOptions.progress.progressElement;
					var idP = progressId + '.PROGRESSDISPLAY';
					var ele = $(idP);
					if(ele) ele.style.display = 'none';
					if(typeof actionOptions.onComplete == 'function') {
						actionOptions.onComplete(arr);
					};
				}
			}
			var _hideProgress = function() {
				var progressId = actionOptions.progress.progressElement;
				var idP = progressId + '.PROGRESSDISPLAY';
				var ele = $(idP);
				if(ele) ele.style.display = 'none';
			}
			var fileUploadFailed = function(error) {
				arr[fileNumber].failed = true;
				arr[fileNumber].completed = true;
				if(typeof actionOptions.onError == 'function') {
					actionOptions.onError(arr,fileNumber,error);
				}
				if(typeof actionOptions.onCompleteIndividualFile == 'function') {
					actionOptions.onCompleteIndividualFile(arr,fileNumber);
				}
				var flagAllDone = _hasCompleted();
				if(flagAllDone) {
					_hideProgress();
					if(typeof actionOptions.onComplete == 'function') {
						actionOptions.onComplete(arr);
					}
				};
			}
			var flagOK = true;
			if(typeof actionOptions.onValidate == 'function') {
				var result = actionOptions.onValidate(arr,fileNumber);
				if(typeof result != 'undefined') flagOK = result;
			}
			//do the upload
			if(flagOK) {
				var flagTrustAllHosts = false;
				if(typeof _dlgObj != 'undefined') {
					if(typeof _dlgObj._phoneGapTrustAllHosts != 'undefined') {
						flagTrustAllHosts = _dlgObj._phoneGapTrustAllHosts;
					}
				}
				if(actionOptions.target == 'alphaanywhere') {
					options.httpMethod = 'POST';
				} else {
					options.httpMethod = 'PUT';
					options.headers = {'Content-Type': 'image/jpeg','x-amz-acl': acl };
					options.multipartMode = false;
				}
				ft.upload(filenameURI, s3URI, fileUploadSuccess, fileUploadFailed, options,flagTrustAllHosts);
			} else {
				arr[fileNumber].aborted = true;
				arr[fileNumber].completed = true;
			}
		}
		phoneGapUploadDoWork(arr,options);
	}
	DLG1_DlgObj.phoneGapCreateDirectory = function(dirName, onComplete, onError) {
		if(typeof onError == 'undefined') onError = function(err) { };
		var onFSSuccess = function(fs) {
			//got the filesystem
			var onDirCreateSuccess = function(dirEntry) {
				if(typeof onComplete == 'function') {
					onComplete();
				}
			}
			fs.root.getDirectory(dirName, {create: true},onDirCreateSuccess, onError);
		}
		if(!DLG1_DlgObj._isPGFileLoaded(true)) return false;
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, onError );
	}
	DLG1_DlgObj.phoneGapCreateDirectoryRecurse = function(dirName, onComplete, onError) {
		if(typeof onError == 'undefined') onError = function(err) { };
		var prepareWork = function(dir) {
			var arr = dir.split('/');
			var arr3 = [];
			for(var i = 0; i < arr.length; i++) {
				var arr2 = [];
				for(var k = 0; k < i + 1; k++) {
					arr2.push(arr[k]);
				}
				arr3.push(arr2.join('/'));
			}
			return arr3;
		}
		var arr = prepareWork(dirName);
		var count = 0;
		var onCompleteLocal = function() {
			if(count == arr.length) {
				onComplete();
			} else {
				DLG1_DlgObj.phoneGapCreateDirectory(arr[count],onCompleteLocal,onError);
				++count;
			}
		}
		DLG1_DlgObj.phoneGapCreateDirectory(arr[count],onCompleteLocal,onError);
	}
	DLG1_DlgObj.phoneGapGetDirectory = function(dirName, onComplete, onError) {
		//calls onComplete with an array of files in the directory
		if(typeof onError == 'undefined') onError = function(err) { };
		//got filesystem event handler
		var onFSSuccess = function(fs) {
			if(dirName.indexOf('/') == 0) dirName = dirName.substring(1);
			//got the fileSystem
			//alert('got fs - dirName:  ' + dirName);
			fs.root.getDirectory(dirName,{},function(e) {
			var dirReader = e.createReader();
			var listFiles = function(entries) {
				var fileCount = entries.length;
				var arr = [];
				var displayName = '';
				for(var i = 0; i < fileCount ; i++) {
					if(entries[i].isFile) displayName = entries[i].fullPath + ' [F]';
					else displayName = entries[i].fullPath + ' [D]';
					arr.push( {fullPath: entries[i].fullPath, isFile: entries[i].isFile, display: displayName } );
				}
				if(typeof onComplete == 'function') {
					onComplete(arr);
				}
			}
			dirReader.readEntries(listFiles,onError);
		},onError);
		}
		if(!DLG1_DlgObj._isPGFileLoaded(true)) return false;
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, onError );
	}
	DLG1_DlgObj.phoneGapGetDirectoryRecurse = function(folder, onDirComplete, onDirError) {
		//onDirComplete gets called with files, an array of all files. each array entry has a 'fileName' property.
		var files = [];
		var pending = 0;
		var onComplete = function(array) {
			for(var i = 0; i < array.length; i++) {
				if(array[i].isFile) {
					files.push({fullPath: array[i].fullPath, isFile: true, display: array[i].fullPath + ' [F]'})
				} else {
					++pending;
					files.push({fullPath: array[i].fullPath, isFile: false, display: array[i].fullPath + ' [D]'})
					DLG1_DlgObj.phoneGapGetDirectory(array[i].fullPath,onComplete,onError)
				}
			}
			--pending;
			if(pending == 0) {
				onDirComplete(files);
			}
		}
		var onError = function(err) {
			if(typeof onDirError == 'function') {
				onDirError(err);
				onDirComplete = function() { } //prevent the all complete from firing
			}
			else alert('Error');
		}
		++pending;
		DLG1_DlgObj.phoneGapGetDirectory(folder,onComplete,onError);
	}
	DLG1_DlgObj.phoneGapRemoveDirectory = function(dirName,onSuccess,onError,flagRecursive) {
		if(typeof flagRecursive == 'undefined') flagRecursive = false;
		if(typeof onError == 'undefined') onError = function(err) { };
		var onFSSuccess = function(fs) {
			var gotDirectory = function(dirEntry) {
				if(flagRecursive) {
					dirEntry.removeRecursively(function() {
						if(typeof onSuccess == 'function') onSuccess();
					},onError);
				} else {
					dirEntry.remove(function() {
						if(typeof onSuccess == 'function') onSuccess();
					},onError);
				}
			}
			//if you cant find the dir then it is effectively removed, so call onSuccess
			fs.root.getDirectory(dirName, {}, gotDirectory, onSuccess);
		}
		if(!DLG1_DlgObj._isPGFileLoaded(true)) return false;
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, onError );
	}
	DLG1_DlgObj.phoneGapRemoveDirectoryRecurse = function(dirName,onSuccess,onError) {
		DLG1_DlgObj.phoneGapRemoveDirectory(dirName,onSuccess,onError,true);
	}
	DLG1_DlgObj.phoneGapDeleteFile = function(fileName,onSuccess,onError) {
		var onFSSuccess = function(fs) {
			fs.root.getFile(fileName, {create: false}, function(f) {
				f.remove( function() {
					if(typeof onSuccess == 'function') {
						onSuccess();
					}
				}, onError );
			}, onError);
		}
		if(!DLG1_DlgObj._isPGFileLoaded(true)) return false;
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, onError );
	}
	DLG1_DlgObj.phoneGapFileExists = function(fileName,onResult,onFailed) {
		var onFSSuccess = function(fs) {
			var gotFile = function(f) {
				if(typeof onResult == 'function') onResult(true);
			}
			var didNotGetFile = function() {
				if(typeof onResult == 'function') onResult(false);
			}
			fs.root.getFile(fileName, {create: false}, gotFile,didNotGetFile);
		}
		if(!DLG1_DlgObj._isPGFileLoaded(true)) return false;
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, onFailed );
	}
	DLG1_DlgObj.phoneGapReadFile = function(fileName,onReadFile,onReadFileERROR,startAt,endAt) {
		if(typeof fileName == 'object') {
			var fnObj = fileName;
			var _success = onReadFile
			if(typeof onReadFileERROR == 'undefined') onReadFileERROR = function(err) { };
			var _error = onReadFileERROR;
			if(fnObj._strip) {
				var _filePath = this.phoneGapGetLocalDirURL(fnObj._fs) + fnObj._dir + '/' + fnObj.fileNameShort;
			} else {
				var _filePath = this.phoneGapGetLocalDirURL(fnObj._fs) + fnObj._dir + '/' + 'A5SessionFile/' + fnObj.fileNameShort;
			}
			if(typeof startAt == 'undefined') {
				this.phoneGapReadFileURL(_filePath, _success,_error);
			} else {
				this.phoneGapReadFileURL(_filePath, _success,_error,startAt,endAt);
			}
			return true;
		}
		var onFSSuccess = function(fs) {
			var readFile = function(f) {
				f.file( function(e) {
					reader = new FileReader();
					reader.onloadend = function(e) {
						if(typeof onReadFile == 'function') {
							onReadFile(e.target.result);
						}
					}
					if(typeof startAt == 'undefined' || typeof endAt == 'undefined') {
						reader.readAsText(e);
					} else {
						var blob = e.slice(startAt,endAt);
						reader.readAsText(blob);
					}
				});
			}
			fs.root.getFile(fileName, {create: false}, readFile, onReadFileERROR);
		}
		if(!DLG1_DlgObj._isPGFileLoaded(true)) return false;
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, onReadFileERROR );
	}
	DLG1_DlgObj._phoneGapCreateFile_low = function(fileName,text,onCreatedFile,onCreateFileERROR) {
		var onFSSuccess = function(fs) {
			var writeFileData = function(f) {
				var doFileWrite = function(writerObject) {
					writerObject.onwrite = function() {
						if(typeof onCreatedFile == 'function') onCreatedFile();
					}
					writerObject.seek(writerObject.length);
					var blob = new Blob([text], {type: 'text/plain'});
					writerObject.write(blob);
				}
				f.createWriter(doFileWrite);
			}
			fs.root.getFile(fileName, {create:true}, writeFileData, onCreateFileERROR);
		}
		if(!DLG1_DlgObj._isPGFileLoaded(true)) return false;
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, onCreateFileERROR );
	}
	DLG1_DlgObj.phoneGapCreateFile = function(fileName,text,onCreatedFile,onCreateFileERROR,flagAppend) {
		if(fileName == '') {if(typeof onCreateFileERROR == 'function') onCreateFileERROR(); return false;}
		var onFSSuccess = function(fs) {
			if(!flagAppend) {
				var onDelete = function() {
					DLG1_DlgObj._phoneGapCreateFile_low(fileName,text,onCreatedFile,onCreateFileERROR);
				}
				DLG1_DlgObj.phoneGapDeleteFile(fileName,onDelete,onDelete)
			} else {
				DLG1_DlgObj._phoneGapCreateFile_low(fileName,text,onCreatedFile,onCreateFileERROR)
			}
		}
		if(!DLG1_DlgObj._isPGFileLoaded(true)) return false;
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, onCreateFileERROR );
	}
	DLG1_DlgObj.phoneGapFileDownload = function(arr,options) {
		var totalSizePassedIn = 0;
		for(var i = 0; i < arr.length; i++) {
			if(typeof arr[i].size != 'undefined') totalSizePassedIn = totalSizePassedIn + arr[i].size;
		}
		options.totalSizePassedIn = totalSizePassedIn
		if(totalSizePassedIn > 0) options.totalFileSize = totalSizePassedIn;
		if(typeof options.targetFolder == 'undefined') {
			var _baseURI = this.phoneGapGetLocalDirURL(options.filesystem);; //sr2
			var _dirName = options.directory;;
			if(_dirName == '') {
				var _dirPath = _baseURI;
			} else {
				var _dirPath = _baseURI + _dirName + '/';
			}
			options.fullyQualifiedPath = _dirPath;
		}
		var _countDone = 0;
		var flagCustomOnError = false;
		if(typeof DLG1_DlgObj.customWindowErrorEvents != 'undefined') flagCustomOnError = DLG1_DlgObj.customWindowErrorEvents;
		//if(!flagCustomOnError) window.onerror = function(err) { alert('Unhandled Javascript Error - phoneGapFileDownload:  ' + JSON.stringify(err));}
		var _dlgObj = this;
		if(typeof LocalFileSystem == 'undefined') {
			if(typeof cordova == 'undefined') {
				alert('Method not supported when not running in PhoneGap');
			} else {
				alert('Required PhoneGap plugins (\'LocalFileSystem\') not loaded.');
			}
			return false;
		}
		if(typeof onError == 'undefined') onError = function(err) { };
		//got filesystem event handler
		for(var i = 0; i < arr.length; i++) {
			arr[i].handled = false;
			arr[i].downloaded = false;
			arr[i].sourceType = 'server';
			if(arr[i].filename.toLowerCase().indexOf('http://') == 0) arr[i].sourceType = 'url';
			if(arr[i].filename.toLowerCase().indexOf('https://') == 0) arr[i].sourceType = 'url';
			if(arr[i].sourceType == 'url') {
				arr[i].sourceFilename = arr[i].filename.split('/').pop().split('?')[0];
			}
		}
		var onFSSuccess = function(fs) {
			var baseDirectory = fs.root.toURL();
			options._baseDirectory = baseDirectory; //sr 99
			var url = DLG1_DlgObj.ajaxURL;
			;
			url = url.split('?')[0];
			url = url.split('/');
			url.pop();
			url = url.join('/') + '/';
			options._serverURL = url;
			for(var i = 0; i < arr.length; i++) {
				//arr[i].localFileName = false;
			}
			if(options.showProgress) {
				var eleTarget = options.progress.progressElement;
				if(typeof eleTarget != 'undefined'){
					if(eleTarget != eleTarget.toUpperCase() ) {
						alert('error: PROGRESS WILL NOT BE SHOWN. target div name MUST be uppercase. you have specified :' + eleTarget);
					}
					eleTarget = eleTarget.toUpperCase();
				}
				var idProgress = eleTarget;
				var ele = $(idProgress);
				if(!ele) options.showProgress = false; //set to false or else you will hang iOS
			}
			if(options.showProgress) {
				var ops = options.progress;
				ops.totalFileSize = options.totalFileSize;
				var eleTarget = ops.progressElement;
				if(typeof eleTarget != 'undefined') eleTarget = eleTarget.toUpperCase();
				var html = '';
				var html_i = '';
				var name_i = '';
				var progress_i = '';
				var idName = '';
				var idProgress = '';
				idProgress = eleTarget + '.PROGRESS.TOTAL';
				idName = eleTarget + '.NAME.TOTAL';
				progress_i = '<div style="background-color: #f3f0ef; border: solid 1px gray; border-radius: 5px; width: '+ops.width+'; ">';
				progress_i += '<div id="'+idProgress+'"style="width: 0%; height: .05in;  background-color:'+ops.color+';border-radius: 5px; border: solid .5px '+ops.color+';"></div></div>';
				html_i = '<div id="'+idName+'" ></div>'+progress_i;
				html = html + html_i
				var idProgress = eleTarget + '.PROGRESSDISPLAY';
				html = '<div id="'+idProgress+'"  style="width: 100%" >' + html + '</div>';
				if ($(eleTarget)) $(eleTarget).innerHTML = html;
				var msg = 'eleTarget: ' + eleTarget + '\n' + html
				var showProgress = function(pct,arr,fileNumber,loaded,totalBytes, onProgressEvent,completedFiles) {
					var eleTarget = options.progress.progressElement
					if(typeof eleTarget != 'undefined') eleTarget = eleTarget.toUpperCase();
					var idProgress = eleTarget + '.PROGRESS.TOTAL';
					var ele = $(idProgress);
					if(ele) {
						if(pct >=100) pct = 100;
						ele.style.width = pct + '%';
						ele.style.borderRadius = '5px';
					}
					if(typeof onProgressEvent == 'function') {
						//match the prototype of the function: array, arrayIndex, pctComplete, bytesCompleted, bytesTotal, completedFiles
						onProgressEvent(arr,fileNumber,pct,loaded,totalBytes,completedFiles)
					}
				}
			} else {
				var showProgress = function(pct) { };
				//this is wrong. if the user has turned showprogress off, then the showProgress() function must still be defined, passsing in the user defined onProgress event
			}
			var phoneGapFileDownload_low = function(arr,iIn,options) {
				var i = Number(iIn);
				if(typeof options.targetFolder != 'undefined') {
					var targetFolder = options.targetFolder;
					if(targetFolder != '') targetFolder = targetFolder + '/';
					if(typeof options._baseDirectory != 'undefined') {
						var fnLocal = options._baseDirectory + targetFolder + A5.parseFilename(arr[i].filename).name;
					} else {
						var fnLocal = targetFolder + A5.parseFilename(arr[i].filename).name; //sr99
					}
				} else {
					var flagStrip = false;
					if(typeof options.strip != 'undefined') flagStrip = options.strip;
					var flagHasA5SessionFilePrefix = false
					if(arr[i].filename.indexOf('A5SessionFile/') >=0) flagHasA5SessionFilePrefix = true;
					if(flagStrip) {
						var _fn = (A5.parseFilename(arr[i].filename).name).replace('A5SessionFile/','');
					} else {
						var _fn = A5.parseFilename(arr[i].filename).name;
						if(flagHasA5SessionFilePrefix) _fn = 'A5SessionFile/' + _fn;
					}
					var fnLocal = options.fullyQualifiedPath + _fn;
				}
				//alert(fnLocal); //could strip off /A5SessionFile
				/*
				not sure why this is being done, but wrong
				if(arr[i].sourceType == 'url') {
					if(typeof targetFolder == 'undefined') {
						targetFolder = options.directory + '/';
					} else {
						targetFolder = options.targetFolder + '/';
					}
					fnLocal = options._baseDirectory + targetFolder +arr[i].sourceFilename;
				}
				*/
				if(A5.log) A5.log('fnLocal: ' + fnLocal);
				//if the targetFolder is <SQLite>|localdbname.db user is doing a special download to the SQL database folder
				var flagSQLite = false;
				/*
				if(targetFolder.indexOf('<SQLite>') == 0) {
					var localDBName = targetFolder.split('|')[1];
					localDBName = localDBName.split('/')[0];
					flagSQLite = true;
					var thisPackageName = '';
					thisPackageName = _phoneGapSettings().appId ;
					var localDbFileUrl = 	{
							android: '/data/data/' + thisPackageName + '/databases/' + localDBName,
							ios: 'cdvfile://localhost/persistent/' + localDBName
							//cdvfile://localhost/persistent/sqlite/' + localDBName
						};
					if(typeof device == 'undefined') {
						alert('PhoneGap required plugin not loaded: device');
					}
					var thisDevice = device.platform;
					var fileUrl = thisDevice == "Android" ? localDbFileUrl.android : localDbFileUrl.ios;
					console.log('database location: ' + fileUrl);
					fnLocal = fileUrl;
				}
				*/
				if(typeof options.targetFolder != 'undefined') {
					if(targetFolder.indexOf('<SQLite>') == 0) {
						var localDBName = targetFolder.split('|')[1];
						localDBName = localDBName.split('/')[0];
						flagSQLite = true;
						var thisPackageName = '';
						thisPackageName = _phoneGapSettings().appId ;
						var localDbFileUrl = {
							// Android note: This entry was tested and works on Android 6.01, 5.5.1, 4.4.2
							androidx: '/data/data/' + thisPackageName + '/databases/' + localDBName,
							android: cordova.file.applicationStorageDirectory.substr(7) + 'databases/' + localDBName,
							// iOS Note: dataDirectory will point to ..appid/Library/NoCloud
							// This is not exposed to iTunes or iCloud
							ios: cordova.file.dataDirectory + localDBName
						};
						if(typeof device == 'undefined') {
							alert('PhoneGap required plugin not loaded: device');
						}
						var thisDevice = device.platform;
						var fileUrl = thisDevice == "Android" ? localDbFileUrl.android : localDbFileUrl.ios;
						console.log('.phoneGapFileDownload reports fileUrl: ' + fileUrl);
						fnLocal = fileUrl;
					}
				}
				var fileFound = function() {
					var forceDownload = false;
					forceDownload = options.forceDownloadIfFileExists;
					if(typeof forceDownload == 'undefined') forceDownload = false;
					if(forceDownload) {
						fileNotFound();
						return true;
					}
					arr[i].handled = true;
					arr[i].found = true;
					arr[i].localFilename = fnLocal;
					arr[i].success = true;
					var allHandled = true;
					////
					var totalBytes = 0;
					var loaded = 0;
					var pctCompleteTotal = 0;
					var flagStartShowingProgress = true;
					var completedFiles = 0;
					var totalSize = 0;
					var _pctMethod = 'auto' //base on filesLoadedCount if array size > 10
					if(typeof options != 'undefined') {
						if(typeof options.pctMethod != 'undefined') _pctMethod = options.pctMethod
					}
					if(arr.length == 1) _pctMethod = 'auto';
					pctCompleteTotal = $u.n.round(pctCompleteTotal,1);
					for(var k = 0; k < arr.length; k++) {
						if(typeof arr[k].totalBytes != 'undefined') {
							totalBytes = totalBytes + arr[k].totalBytes;
							loaded = loaded + arr[k].bytesLoaded;
						}
						if(arr[k].handled) completedFiles++;
						pctCompleteTotal = (loaded/totalBytes) * 100;
						if(totalSize > 0) {
							pctCompleteTotal = (loaded/totalSize) * 100;
						}
						if(_pctMethod == 'auto') {
							if(arr.length >= 10) _pctMethod = 'fileCount';
						}
						if(_pctMethod == 'fileCount') {
							pctCompleteTotal = (completedFiles/ arr.length) * 100;
						}
						pctCompleteTotal = $u.n.round(pctCompleteTotal,1);
					}
					if(flagStartShowingProgress || true ) showProgress(pctCompleteTotal,arr,i,loaded,totalBytes, options.onProgressEvent,completedFiles);
					for(var k = 0; k < arr.length; k++) {
						if(!arr[k].handled) {
							allHandled = false;
							break;
						}
					}
					if(allHandled) {
						if(typeof options.onComplete == 'function') options.onComplete(arr);
						var eleTarget = options.progress.progressElement;
						if(typeof eleTarget != 'undefined') eleTarget = eleTarget.toUpperCase();
						var idProgress = eleTarget + '.PROGRESSDISPLAY';
						var ele = $(idProgress);
						if(ele) ele.style.display = 'none';
					}
				}
				var fileNotFound = function() {
					//file was not in the local filesystem so must download it.
					arr[i].found = false;
					arr[i].localFilename = fnLocal;
					var url2 = options._serverURL + arr[i].filename;
					if(arr[i].sourceType == 'url') {
						url2 = arr[i].filename;
					}
					var ft = new FileTransfer();
					ft.onprogress = function(progressEvent) {
						if (progressEvent.lengthComputable) {
							arr[i].totalBytes = progressEvent.total;
							arr[i].bytesLoaded = progressEvent.loaded;
							var totalSize = -1;
							_pctMethod = 'auto' //base on filesLoadedCount if array size > 10
							if(typeof options != 'undefined') {
								totalSize = options.totalFileSize;
								if(typeof options.pctMethod != 'undefined') _pctMethod = options.pctMethod
							}
							if(arr.length == 1) _pctMethod = 'auto';
							//alert(_pctMethod);
							if(typeof totalSize == 'undefined') totalSize = -1;
							if(totalSize == -1) {
								var pctComplete = (progressEvent.loaded / progressEvent.total)*100;
							} else {
								var pctComplete = (progressEvent.loaded / totalSize)*100;
							}
							if(pctComplete > 100) pctComplete = 100;
							pctComplete = $u.n.round(pctComplete,4);
							arr[i].pctComplete = pctComplete;
							var totalBytes = 0;
							var loaded = 0;
							var pctCompleteTotal = 0;
							var flagStartShowingProgress = true;
							var completedFiles = 0;
							for(var k = 0; k < arr.length; k++) {
								if(typeof arr[k].totalBytes != 'undefined') {
									totalBytes = totalBytes + arr[k].totalBytes;
									loaded = loaded + arr[k].bytesLoaded;
									if(arr[k].handled) completedFiles++;
									pctCompleteTotal = (loaded/totalBytes) * 100;
									if(typeof options.totalSizePassedIn > 0) {
										totalSize = options.totalSizePassedIn;
									}
									if(totalSize > 0) {
										pctCompleteTotal = (loaded/totalSize) * 100;
									}
									if(_pctMethod == 'auto') {
										if(arr.length >= 10) _pctMethod = 'fileCount';
									}
									if(_pctMethod == 'fileCount') {
										pctCompleteTotal = (completedFiles/ arr.length) * 100;
									}
									pctCompleteTotal = $u.n.round(pctCompleteTotal,1);
								}
							}
							if(flagStartShowingProgress || true ) showProgress(pctCompleteTotal,arr,i,loaded,totalBytes, options.onProgressEvent,completedFiles); //sr55
						} else {
							//alert('length NOT computable: ' + arr[i].filename);
							console.log('PhoneGap fileTransfer event. onProgress. length NOT computable: ' + arr[i].filename)
							//alert('progressevent: ' + JSON.stringify(progressEvent));
						}
					}
					var flagTrustAllHosts = false;
					if(typeof _dlgObj._phoneGapTrustAllHosts != 'undefined') {
						flagTrustAllHosts = _dlgObj._phoneGapTrustAllHosts;
					}
					//had a url like this: https://aapdf.s3.amazonaws.com/651 - 2015007 - HL072 - Summary P&L.PDF
					//need to urlencode the url and the fnLocal to get this
					//https://aapdf.s3.amazonaws.com/651%20-%202015007%20-%20HL072%20-%20Summary%20P%26L.PDF
					//first decode, then encode again to make sure we don't double encode
					//the fix the encoded '&' - %2526 to change to %26
					var testString1 = url2.toLowerCase();
					var testString2 = decodeURI(url2).toLowerCase();
					var search = 'X-Amz-'.toLowerCase();
					var flagDoEncode = true;
					if(testString1.indexOf(search) > -1 || testString2.indexOf(search) > -1) flagDoEncode = false;
					//if the url to download from S3 is signed then the urlencode() will break the download
					if(flagDoEncode) {
						url2 = encodeURI(decodeURI(url2));
						url2 = url2.replace(/%2526/g,'%26');
					}
					fnLocal = encodeURI(decodeURI(fnLocal));
					fnLocal = fnLocal.replace(/%2526/g,'%26');
					if(A5.log) A5.log('Inside PhoneGap file transfer url2: ' + url2);
					if(A5.log) A5.log('Inside PhoneGap file transfer fnLocal: ' + fnLocal);
					var sessionId = 'unknown';
					if(typeof DLG1_DlgObj.__sessionId != 'undefined') sessionId = DLG1_DlgObj.__sessionId;
					var FToptions = {
						headers: {'X-A5WSessionId':sessionId }
					}
					ft.download(url2, fnLocal,
							function(entry) {
								arr[i].success = true;
								arr[i].handled = true;
								arr[i].downloaded = true;
								//fileAllDone();
								var allHandled = true;
								for(var k = 0; k < arr.length; k++) {
									if(!arr[k].handled) {
										allHandled = false;
										break;
									}
								}
								_countDone++;
								if(allHandled) {
									showProgress(100,arr,1,-1,-1, options.onProgressEvent,arr.length); //sr55
									if(typeof options.onComplete == 'function') options.onComplete(arr);
									if(options.showProgress) {
										var eleTarget = options.progress.progressElement;
										if(typeof eleTarget != 'undefined') eleTarget = eleTarget.toUpperCase()
										var idProgress = eleTarget + '.PROGRESSDISPLAY';
										if($(idProgress)) $(idProgress).style.display = 'none';
									}
								}
							},
							function(err) {
								arr[i].success = false;
								arr[i].errorText = JSON.stringify(err);
								arr[i].handled = true;
								if(A5.log) A5.log('Error in .download() function: ' + arr[i].errorText);
								var allHandled = true;
								for(var k = 0; k < arr.length; k++) {
									if(!arr[k].handled) {
										allHandled = false;
										break;
									}
								}
								if(allHandled) {
									if(typeof options.onComplete == 'function') options.onComplete(arr);
									if(options.showProgress) {
										var eleTarget = options.progress.progressElement;
										if(typeof eleTarget != 'undefined') eleTarget = eleTarget.toUpperCase()
										var idProgress = eleTarget + '.PROGRESSDISPLAY';
										if($(idProgress)) $(idProgress).style.display = 'none';
									}
								}
							},
							flagTrustAllHosts, FToptions
					);
					//end fetch file  ---------------------------------------
					//true/false -- trustAllHosts parameter
				}
				window.resolveLocalFileSystemURL(fnLocal, fileFound, fileNotFound);
			}
			if(A5.log) A5.log('Call phoneGapFileDownload_low');
			if(A5.log) A5.log(JSON.stringify(arr,'','\t'));
			for(var i = 0; i < arr.length; i++) {
				phoneGapFileDownload_low(arr,i,options)
			}
		}
		if(!DLG1_DlgObj._isPGFileLoaded(true)) return false;
		window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, onError );
	}
	A5.ts = function() {
		var d = new Date()
		return d.getTime().toString(36);
}
DLG1_DlgObj.phoneGapGetFileSystemURIForLegacyPersistentStorage = function(ok,fail) {
	var _ok = ok;
	var onFSSuccess = function(fs) {
		var uri = fs.root.filesystem.root.nativeURL;
		_ok(uri);
	}
	if(!DLG1_DlgObj._isPGFileLoaded(true)) return false;
	window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, onFSSuccess, fail );
}
DLG1_DlgObj._isPGFileLoaded = function(flagShowAlert) {
	var flag = true;
	if(typeof window.requestFileSystem == 'undefined') flag =  false;
	if(typeof window.resolveLocalFileSystemURL == 'undefined') flag =  false;
	if(typeof LocalFileSystem == 'undefined') flag =  false;
	if(typeof flagShowAlert != 'undefined' && flagShowAlert && !flag) {
		alert('PhoneGap File plugin is not loaded');
	}
	return flag;
}
DLG1_DlgObj.base64DataToBlob = function(dataURI) {
	//data:image/jpeg;base64,/
	// convert base64/URLEncoded data component to raw binary data held in a string
    var byteString;
    if (dataURI.split(',')[0].indexOf('base64') >= 0)
        byteString = atob(dataURI.split(',')[1]);
    else
        byteString = unescape(dataURI.split(',')[1]);
        if(typeof byteString == 'undefined') byteString = dataURI;
    // separate out the mime component
    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];
    // write the bytes of the string to a typed array
    var ia = new Uint8Array(byteString.length);
    for (var i = 0; i < byteString.length; i++) {
        ia[i] = byteString.charCodeAt(i);
    }
    return new Blob([ia], {type:mimeString});
}
DLG1_DlgObj.SQLiteDownloadDatabase = function(SQLiteDBURL,localDBName,onComplete,onError,optionsIn) {
	if(SQLiteDBURL.indexOf('http://') == 0 || SQLiteDBURL.indexOf('https://') == 0) {
		//don't need to add the baseURL
	} else {
		var url = DLG1_DlgObj.ajaxURL;
		url = url.split('?')[0];
		url = url.split('/');
		url.pop();
		url = url.join('/') + '/';
		SQLiteDBURL =  url + SQLiteDBURL;
	}
	if(typeof onError != 'function') {
		onError = function(error) {
			alert('Database Download Failed. File transfer error: '+error);
		}
	}
	if(typeof _phoneGapSettings == 'undefined') {
		alert('PhoneGap not loaded');
		return false;
	}
	var flagSQL = _phoneGapSettings().plugins['cordova-sqlite-ext'];   //com.brodysoft.sqliteplugin
	flagSQL = true;
	if(typeof flagSQL == 'undefined') flagSQL = false;
	if(!flagSQL) {
		alert('SQLitePluginExt not loaded');
		return false;
	}
	////////////////////
	if(typeof optionsIn == 'undefined') {
		var ops = {
			showProgress : false,
			forceDownloadIfFileExists : true
			}
	} else {
		var ops = optionsIn
	}
	var arr = [];
	arr.push({filename: SQLiteDBURL});
	var options = {};
	options.targetFolder = '<SQLite>|' + localDBName;
	options.onComplete = function() {
		onComplete.call();
	}
	options.onError = function() { onError.call() };
	options.showProgress = ops.showProgress;
	options.forceDownloadIfFileExists = ops.forceDownloadIfFileExists;
	if(options.showProgress) {
		options.progress = ops.progress;
	}
	DLG1_DlgObj.phoneGapFileDownload(arr,options);
	///////////////////////////////////
	/*
	var thisPackageName = '';
	thisPackageName = _phoneGapSettings().appId ;
	//alert(thisPackageName)
	var localDbFileUrl = 	{
								android: '/data/data/' + thisPackageName + '/databases/' + localDBName,
								ios: 'cdvfile://localhost/persistent/' + localDBName
							};
	if(typeof device == 'undefined') {
		alert('PhoneGap required plugin not loaded: device');
	}
	var thisDevice = device.platform;
	var fileUrl = thisDevice == "Android" ? localDbFileUrl.android : localDbFileUrl.ios;
	var fileTransfer = new FileTransfer();
	var uri = encodeURI(SQLiteDBURL);
	var options = {};
	fileTransfer.download(uri,fileUrl,onComplete,onError,false,options);
	*/
}
DLG1_DlgObj.SQLiteExecuteSQLPromise = function(dbName,sql,argumentsIn) {
	var f = function(resolve,reject) {
		var obj = {};
		var _ok = function(tx,result,resultArray) {
			obj.result = result;
			obj.resultArray = resultArray;
			obj.tx = tx
			//resolve(obj);
		}
		var _fail = function(e) { };
		var _txOk = function() {
			resolve(obj)
		}
		var _txFail = function(e) {
			reject(e);
		}
		setTimeout(function() {
			DLG1_DlgObj.SQLiteExecuteSQL(dbName,sql,argumentsIn,_ok,_fail,_txOk,_txFail);
		},50);
	}
	return new Promise(f)
}
DLG1_DlgObj.SQLiteExecuteSQL = function(dbName,sql,argumentsIn,onSuccess,onError, onTransactionSuccess, onTransactionError, flagCloseDB,transObj) {
	if(typeof transObj == 'undefined') {
		transObj = {};
	}
	var flagSQLisArray = false;
	if(sql.constructor == Array) flagSQLisArray = true;
	if(typeof flagCloseDB == 'undefined') flagCloseDB = true;
	var flagCustomOnError = false;
	if(typeof DLG1_DlgObj.customWindowErrorEvents != 'undefined') flagCustomOnError = DLG1_DlgObj.customWindowErrorEvents;
	var flagSQL = _phoneGapSettings().plugins['cordova-sqlite-ext'];   //com.brodysoft.sqliteplugin
		flagSQL = true;
		if(typeof flagSQL == 'undefined') flagSQL = false;
		if(!flagSQL) {
			alert('SQLitePluginExt not loaded');
			return false;
	}
	if(typeof onSuccess == 'undefined') onSuccess = false;
	if(typeof onError == 'undefined') onError = false;
	if(typeof argumentsIn == 'undefined' || argumentsIn.constructor != Array) argumentsIn = [];
	if(onSuccess.constructor != Array)  {
		if(typeof onSuccess != 'function') {
			onSuccess = function(tx,result) {
			}
		}
	}
	if(onError.constructor != Array)  {
		if(typeof onError != 'function') {
				onError = function(e) {
				}
		}
	}
	if(typeof device == 'undefined') {
			alert('PhoneGap required plugin not loaded: device');
	}
	var flagArrayOfObjects = false;
	if(sql.constructor == Array) {
		if(sql[0].constructor == Object) {
			flagArrayOfObjects = true;
		}
	}
	if(flagArrayOfObjects == false && flagSQLisArray) {
		//convert to array of objects
 		var obj2 = [];
 		for(var i = 0; i <sql.length; i++) {
 			obj2.push({'sql': sql[i], 'arguments': argumentsIn[i], 'onSuccess': onSuccess[i], 'onError':onError[i]});
		}
 		argumentsIn = false;
		 onSuccess = false;
		 onError = false;
		 sql = obj2
		flagArrayOfObjects = true;
	}
	if(flagArrayOfObjects) {
		var a = sql;
		delete sql;
		delete sqlObject;
		sql = [];
		sqlObject = [];
		argumentsIn = [];
		onSuccess = [];
		onError = [];
		for(var i = 0; i < a.length; i++) {
			sql[i] = a[i].sql;
			sqlObject[i] = a[i];
			if(typeof a[i].arguments != 'undefined') {
				argumentsIn[i] = a[i].arguments;
			} else {
				argumentsIn[i] = [];
			}
			if(typeof a[i].onSuccess != 'undefined') {
				onSuccess[i] = a[i].onSuccess;
			} else {
				onSuccess[i] = function() { };
			}
			if(typeof a[i].onError != 'undefined') {
				onError[i] = a[i].onError;
			} else {
				onError[i] = function() { };
			}
		}
	}
	/*
	var thisDevice = device.platform;
	//var dbFilename = thisDevice == 'Android' ? dbName:'files/' + dbName;
	var thisPackageName = '';
	thisPackageName = _phoneGapSettings().appId ;
	var localDbFileUrl = 	{
		android: '/data/data/' + thisPackageName + '/databases/' + dbName,
		ios: 'cdvfile://localhost/persistent/' + dbName
		//cdvfile://localhost/persistent/sqlite/' + localDBName
	};
	var dbFilename = thisDevice == "Android" ? localDbFileUrl.android : localDbFileUrl.ios;
	console.log('database location: ' + dbFilename);
	delete db;
	if(typeof window.sqlitePlugin == 'undefined') {
		alert('Error: PhoneGap SQLite plugin not loaded.');
	}
	var db = window.sqlitePlugin.openDatabase({name:dbFilename,location:2});
	*/
	///////////////// new code starts here/////////////
	//start here........
	var thisDevice = device.platform;
	var dbFilename = thisDevice == 'Android' ? dbName:'NoCloud/' + dbName;   //NoCloud -- no exposed to iTunes and not backed up to iCloud
	console.log('.SQLiteExecuteSQL: database location = ' + dbFilename);
	if(typeof window.sqlitePlugin == 'undefined') {
		alert('Error: PhoneGap SQLite plugin not loaded.');
	}
	var location = 'download';
	if( dbName.indexOf('root:') == 0) {
		location = 'root';
		dbName = dbName.split('root:')[1];
	}
	//this is for a db that is downloaded from the server
	if(location == 'download') {
		var db = window.sqlitePlugin.openDatabase({name:dbFilename,location:1});
	} else {
		//if the db is in the webroot (pre-populated), then use this code
		var db = window.sqlitePlugin.openDatabase({name: dbName , location: 2, createFromLocation: 1});
	}
	///// end here.....
	///////////////////new code ends here ////////////////
	db.transaction(
		function(tx) {
			if(flagSQLisArray) {
			}
			var flagArrayOfArrays = false;
			try{if(argumentsIn[0].constructor == Array) flagArrayOfArrays = true;} catch(e) {}
			if(sql.constructor == Array || flagArrayOfArrays) {
				if(sql.constructor == Array) {
					var sql_length = sql.length;
				} else {
					var sql_length = argumentsIn.length;
				}
				var i = 0;
				function _lowSQL(transObj) {
					if(sql.constructor == Array) {
						var sql_i = sql[i];
						var sqlObject_i = sqlObject[i];
					} else {
						var sql_i = sql;
					}
					var args_i = argumentsIn[i];
					if(typeof args_i != 'undefined') {
						for(var j = 0; j < args_i.length; j++) {
							if(typeof args_i[j] == 'function') {
								var result = args_i[j].call(this,transObj);
								args_i[j] = result;
							}
						}
					}
					var success_i = function(tx2,result) {
						var resultArray = DLG1_DlgObj.SQLiteResultSetToArray(result);
						if(onSuccess.constructor == Array) {
							onSuccess[i].call(this,tx2,result,resultArray,transObj);
						} else {
							onSuccess.call(this,tx2,result,resultArray,transObj);
						}
						i++;
						if(i < sql_length) {
							transObj.i = i;
							_lowSQL(transObj);
						}
					}
					var error_i = function(e) {
						if(onError.constructor == Array) {
							onError[i].call(this,e);
						} else {
							onError.call(this,e);
						}
					}
					tx.sql = sql_i;
					tx.arguments = args_i;
					tx.sqlObject = sqlObject_i;
					tx.executeSql(sql_i,args_i,success_i,error_i);
				}
				_lowSQL(transObj);
			} else {
				//single sql statement
				tx.executeSql(sql,argumentsIn,function(tx,result) {
					var resultArray = DLG1_DlgObj.SQLiteResultSetToArray(result);
					onSuccess.call(this,tx,result,resultArray);
				}, function(e) {onError.call(this,e); });
			}
		},
		function(e) { /*transaction failure*/ if(typeof onTransactionError == 'function') { onTransactionError.call(this);}; if(flagCloseDB) db.close(); },
		function() { /*transaction success*/ if(typeof onTransactionSuccess == 'function') { onTransactionSuccess.call(this);} if(flagCloseDB) db.close();  }
		//function(e) {alert('close the db1'); db.close(); /*transaction failure*/ if(typeof onTransactionError == 'function') { onTransactionError.call(this);}  },
		//function() { alert('close the db2'); db.close(function() { alert('done closing')} ); /*transaction success*/ if(typeof onTransactionSuccess == 'function') { onTransactionSuccess.call(this);}   }
		//function(e) { db.close(); /*transaction failure*/ if(typeof onTransactionError == 'function') { onTransactionError.call(this);}  },
		//function() { db.close(function() { if(typeof onTransactionSuccess == 'function') { onTransactionSuccess.call(this);}; alert('done closing')} ); /*transaction success*/   }
	);
}
////////////////////////sqlite incremental refresh
DLG1_DlgObj._sqliteApplyIncrementalUpdates = function(cbId,_onErrorFunction) {
	var obj = DLG1_DlgObj._sqliteIncrementalRefreshData;
	var sqlObj = DLG1_DlgObj.__sqliteIncrementalUpdate_computeSQL(obj);
	DLG1_DlgObj._sqliteIncrementalRefreshRowsToUpdate = sqlObj.length;
	if(sqlObj.length > 0) {
		var _dbName = DLG1_DlgObj._sqliteIncrementalRefreshDBName;
		var _sql = sqlObj;
		var _args = false;
		var _success = false;
		var _error = false;
		var _onTxSuccess = function() {
			if(transObj.insert.length == 0) {
				DLG1_DlgObj._sqliteIncrementalRefreshUpdateMetadata(cbId,true)
			} else {
				//run the inserts
				var sql2 = [];
				var sqlObj = transObj.insert;
				for(var i = 0; i < sqlObj.length; i++) {
					sql2.push({sql: sqlObj[i].sql2, arguments: sqlObj[i].arguments2});
				}
				DLG1_DlgObj._sqliteIncrementalRefreshRowsToInsert = sql2.length
				//get the sql to update the __metaData table, but don't run it.
				var metaDataSQL = DLG1_DlgObj._sqliteIncrementalRefreshUpdateMetadata(cbId,false);
				//add the metadata sql to the sql2 object
				for(var i = 0; i < metaDataSQL.length; i++) {
					sql2.push(metaDataSQL[i])
				}
				//var msg6 = JSON.stringify(sql2,'','\t')
				//$('pre1').innerHTML = 'combined insert and meta data sql: ' + msg6;
				//make a closure that captures the cbId
				var _generate_txOK = function(cbId) {
					var _txOK = function() {
						var cbid = cbId;
						DLG1_DlgObj._executeAjaxCallbackCompleteCode(cbid);
					}
					return _txOK
				}
				var _txOK = _generate_txOK(cbId)
				DLG1_DlgObj._sqliteIncrementalRefresh_ExecuteSQLCommands(_dbName,sql2,_txOK)
			}
		};
		_error = _onErrorFunction
		var _onTxError = function() {
			//alert('tx error');
			//alert('Failed to update SQLite database2')
			_onErrorFunction.call()
		};
		/*
		var _onTxError = function() {
			alert('Failed to update SQLite database')
		};
		*/
		var transObj = {};
		transObj.insert = [];
		DLG1_DlgObj.SQLiteExecuteSQL(_dbName,_sql,_args,_success,_error,_onTxSuccess,_onTxError,false,transObj);
	} else {
		//there was no work to do
		DLG1_DlgObj._sqliteIncrementalRefreshRowsToUpdate = 0;
		DLG1_DlgObj._executeAjaxCallbackCompleteCode(cbId);
	}
}
DLG1_DlgObj.__sqliteIncrementalUpdate_computeSQL = function(d) {
	var obj2 = [];
	for (var i = 0; i < d.length; i++) {
		var rows = d[i].data.length;
		if(rows > 0) {
			var rows = d[i].data.length;
			if(rows > 0) {
			    for(var j = 0; j < rows; j++) {
			        var fields = [];
			        var fieldsInsert = [];
			        var fieldsInsertNotNull = [];
			        var argsInsert = [];
			        var args = [];
			        var argsInsert = [];
			        var argsInsertNotNull = [];
			        var argsNotNull = [];
			        var _d = d[i].data[j];
			        for(var n in _d) {
			            fields.push(n  + ' = ?');
			            fieldsInsert.push(n );
			            argsInsert.push('?');
			            args.push(_d[n]);
			            if(_d[n] != null) {
			            	fieldsInsertNotNull.push(n);
			            	argsNotNull.push(_d[n]);
			            	argsInsertNotNull.push('?');
			            }
			        }
			        var fieldList = fields.join(',')
			        var pk = d[i].primaryKey.split(',');
			        for(var k = 0; k < pk.length; k++) {
			            args.push(_d[pk[k]]);
			            pk[k] = pk[k] + ' = ?';
			        }
			        var pkwhere = pk.join(' and ')
			        var sql = 'UPDATE ' +  d[i].SQLiteTableName + ' SET ' + fieldList + ' WHERE ' + pkwhere;
			        var sqlInsert = 'INSERT INTO '  + d[i].SQLiteTableName + ' (' + fieldsInsert.join(',') + ' ) VALUES (' + argsInsert.join(',') + ')';
			        var sqlInsertNotNull = 'INSERT INTO '  + d[i].SQLiteTableName + ' (' + fieldsInsertNotNull.join(',') + ' ) VALUES (' + argsInsertNotNull.join(',') + ')';
//alert('sqlInsertNotNull:' + sqlInsertNotNull);
			        obj2.push(
			            {
			                sql: sql,
			                sqlInsert: sqlInsert,
			                sqlInsertNotNull: sqlInsertNotNull,
			                arguments: args,
			                argumentsNotNull: argsNotNull,
			                onSuccess: function(tx,result,resultArray, transObj) {
			                    if(result.rowsAffected == 0) {
			                    	//alert('push on tx');
			                    	//transObj.insert.push({sql2:  tx.sqlObject['sqlInsert'], arguments2: tx.arguments})
			                    	//transObj.insert.push({sql2:  tx.sqlObject['sqlInsertNotNull'], arguments2: tx.argsNotNull})
			                    	transObj.insert.push({sql2:  tx.sqlObject['sqlInsertNotNull'], arguments2: tx.sqlObject['argumentsNotNull']})
			                    	//alert('push done');
			                    }
			                },
			                onError: function(e) {
			                	//don't emit this error as the _sqliteApplyIncrementalUpdates() function will emit the user defined error
			                    //alert('error22222: ' );
			                }
			            }
			        )
			    }
			}
		}
	}
	return obj2;
}
DLG1_DlgObj._sqliteIncrementalRefreshUpdateMetadata = function(cbid, flagExecute) {
	var md = DLG1_DlgObj._sqliteIncrementalRefreshMetaData;
	var mdstring = JSON.stringify(md);
	var _dbName = DLG1_DlgObj._sqliteIncrementalRefreshDBName;
	var _obj = [];
	_obj.push( { sql: 'DELETE FROM __metaData'}  );
	_obj.push( { sql: 'insert into __metaData (metadata) VALUES (?)', arguments: [mdstring]}  );
	var _sql = _obj;
	var _args = false;
	var _success = false;
	var _error = false;
	var _onTxSuccess = function() {
		DLG1_DlgObj._executeAjaxCallbackCompleteCode(cbid);
	};
	var _onTxError = function() {alert('Failed to update __metaDataTable')};
	if(flagExecute) {
		DLG1_DlgObj.SQLiteExecuteSQL(_dbName,_sql,_args,_success,_error,_onTxSuccess,_onTxError);
	} else {
		return _sql;
	}
}
DLG1_DlgObj._sqliteIncrementalRefresh_ExecuteSQLCommands = function(dbName,sql,_txOK, _txFailed, obj) {
	//alert('execute sql commands');
	if(typeof _txOK == 'function') { _onTxSuccess = _txOK;} else { 	_onTxSuccess = function() { alert('txok'); }};
	if(typeof _txFailed == 'function') {  _onTxError = _txFailed;} else { _onTxError = function() {
		alert('txfailed');
		//alert('sql to execute: ' + JSON.stringify(sql));
	}};
	DLG1_DlgObj.SQLiteExecuteSQL(dbName,sql,false,false,false,_onTxSuccess,_onTxError);
}
//////////////////////end sqlite incrmental refresh
DLG1_DlgObj.SQLiteResultSetToArray = function(result) {
	var array = [];
	if (result !=null && result.rows != null){
		for (var i = 0; i < result.rows.length; i++) {
			array.push(result.rows.item(i));
		}
	}
	return array;
}
DLG1_DlgObj.SQLiteDeleteDatabase = function(dbName,successCB,errorCB,location) {
	var flagSQL = _phoneGapSettings().plugins['cordova-sqlite-ext'];   //com.brodysoft.sqliteplugin
		flagSQL = true;
		if(typeof flagSQL == 'undefined') flagSQL = false;
		if(!flagSQL) {
			alert('SQLitePluginExt not loaded');
			return false;
	}
	/*
	if(typeof location == 'undefined') location = 2;
	*/
	///// new code /////
	if(typeof location == 'undefined') location = 1;
	///// end new code /////
	window.sqlitePlugin.deleteDatabase({name: dbName, location: location}, successCB, errorCB);
}
////////////////////////////////////////
DLG1_DlgObj.submitListDataAndMediaFiles = function(listName,xbCallbackFunction,ajaxObject,mediaFileUploadObject) {
	//first, upload media files, then upload dirty records in a list and then call xbCallbackFunction on the server side. Uploaded data will be in e._listData in the Xbasic function
	/*
	Example syntax:
	var ajaxObject = {
		errorFunction: function() { alert('failed ajax'); },
		onComplete: function() { alert('ajax done');},
		deviceOfflineFunction: function() { alert('offline ');  }
	}
	var objUpload = {
		target: 'alphaanywhere',
		showProgress: true,
		onComplete: function(array) {},
		onMediaUploadErrors: function(array) { alert('there were media upload errors');},
		xbasicAfterFileUploaded: 'xbAfterUpload',
		progress: {
			color: '#9fa1e8',
			width: '300px',
			individualProgress: false,
			showTotalProgress: true,
			allowCancel: false,
			progressElement: 'DLG1.V.R1.PLACEHOLDER_2'
		}
	}
	//to upload to s3
	target: 's3',
		s3: {
			connectionString: 'alphamediacapture',
			protectedRead: false,
			template: 'https://alphamediacapture.s3.amazonaws.com/__name__'
	},
	///////
	DLG1_DlgObj.submitListDataAndMediaFiles('list1',xbName,ajaxObject,objUpload);
	*/
	var lObj = DLG1_DlgObj.getControl(listName);
	if(!lObj) return false;
	var objAjax = {};
	if(typeof arguments[2] == 'object') objAjax = arguments[2];
	var objUpload = {};
	if(typeof arguments[3] == 'object') objUpload = arguments[3]; //this is the object that defines the upload target (s3/alphaanywhere), showProgress, etc
	var _userOnComplete = objUpload.onComplete;
	objUpload.onComplete = function(array) {
		_userOnComplete.call(this,array)
		pushRemoteMediaNamesToArray(array,_data);
	}
	var xbasicFunction = xbCallbackFunction;
	//define local functions
	var _ajaxUpload = function(data,xbasicFunction,objAjax) {
		var listData = JSON.stringify(data,'','\t');
		listData = A5.ajax.buildURLParam('_listData',listData);
		DLG1_DlgObj.ajaxCallback('','',xbasicFunction,'',listData, objAjax);
	}
	var pushRemoteMediaNamesToArray = function(mediaFiles,_data) {
		var _data2 = [];
		$u.o.assign(_data2,_data);
		//media files have been uploaded and the mediaFiles[] array has these properties of interest
		//listFieldName -- name of the field in the data array that had the media field
		//route -- an array that looks like [{table: '_top_', row: 1}]
		//remoteName -- the name of the alpha server or s3
		//succeeded
		var r = '';
		var table = '';
		var _di = '';
		var _diTop = '';
		for(var i = 0; i < mediaFiles.length; i++) {
			mediaFiles[i].routeObj = JSON.parse(mediaFiles[i].route);
			r = mediaFiles[i].routeObj[0].row
			for(var j = 0; j < mediaFiles[i].routeObj.length; j ++) {
				table = mediaFiles[i].routeObj[j].table;
				r = mediaFiles[i].routeObj[j].row
				if(table == '_top_') {
					_di = _data2[r];
					_diTop = _di;
				} else {
					_di = _di[table][r];
				}
			}
			if(typeof _di != 'undefined') {
				//need to add a check to see if the success flag is true
				if(mediaFiles[i].succeeded) {
					 _di[mediaFiles[i].listFieldName] = mediaFiles[i].remoteName;
				} else {
					_diTop.__flagHasMediaFileUploadError = true;
				}
			}
		}
		//harvest rows that are dirty and also do not have media upload errors - these rows will be pushed to the server
		var _data3 = [];
		var _mErr = [];
		var flagPush = false;
		var flagHasMediaUploadError = false;
		for(var i = 0; i < _data2.length; i++) {
			flagPush = true;
			if(typeof _data2[i].__flagHasMediaFileUploadError != 'undefined' && _data2[i].__flagHasMediaFileUploadError) {
				flagPush = false;
				flagHasMediaUploadError = true;
				_mErr.push(_data2[i]);
			}
			if(flagPush) {
				if(typeof _data2[i]._isDirty == 'undefined') {
					flagPush = false;
				} else if(_data2[i]._isDirty == false) {
					flagPush = false;
				}
			}
			if(flagPush) {
				_data3.push(_data2[i]);
			}
		}
		if(flagHasMediaUploadError) {
			if(typeof objUpload.onMediaUploadErrors == 'function') {
				objUpload.onMediaUploadErrors.call(this,_mErr);
			}
		}
		_ajaxUpload(_data3,xbasicFunction,objAjax) //do the ajax callback to upload the fixed data array
	}
	//end local functions
	var _data = lObj.harvestList();
	if(_data.length == 0) {
		return false;
	}
	var arr = lObj._harvestMediaFields();
	if(arr.length == 0) {
		//no media fields -- just make the ajax callback
		_ajaxUpload(_data,xbasicFunction,objAjax);
		return true;
	} else {
		//upload the media files -- the onComplete event will make the ajax callback
		//objUpload._dataToUpload = _data;
		_data = lObj._data;
		DLG1_DlgObj.phoneGapFileUpload(arr,objUpload);
	}
}
// File manipulation
//
// DLG1_DlgObj.phoneGapFilesAvailable()
//
// Returns true if there is a local file system and PhoneGap is running.
//
DLG1_DlgObj.phoneGapFilesAvailable = function() {
   if(typeof LocalFileSystem == 'undefined') {
      if(typeof cordova == 'undefined') {
         return false;
      }
      return false;
   }
   return true;
}
//
// DLG1_DlgObj.phoneGapGetLocalDirURL(type)
//
// type: "temp", "private", "saved", "public"
// On iOS, saved and public may be backed up to iCloud
//
// Returns URL of base for the requested part of the file system.
//
DLG1_DlgObj.phoneGapGetLocalDirURL = function(type) {
   var dir = "";
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) return dir;
   if (type.toLowerCase().indexOf('explicit:') == 0) {
   		var dir = type.substring('explicit:'.length)
   		return dir;
   }
   if (device.platform == 'iOS') {
      switch (type) {
         case "temp":
            dir = cordova.file.tempDirectory;
            break;
         case "private":
            dir = cordova.file.dataDirectory;
            break;
         case "saved":
            dir = cordova.file.syncedDataDirectory;
            break;
         case "public":
            dir = cordova.file.documentsDirectory;
            break;
         case "persistent": //original file system actions
          	dir = cordova.file.dataDirectory.replace('NoCloud','files');
          	break;
      }
   }
   else {
      switch (type) {
         case "temp":
            dir = cordova.file.externalCacheDirectory || cordova.file.cacheDirectory;
            break;
         case "private":
            dir = cordova.file.externalDataDirectory || cordova.file.dataDirectory;
            break;
         case "saved":
            dir = cordova.file.externalDataDirectory || cordova.file.dataDirectory;
            break;
         case "public":
            dir = cordova.file.externalDataDirectory || cordova.file.dataDirectory;
            break;
         case "persistent":
          	dir = 'file:///data/user/0/'+_phoneGapSettings().appId+'/files/files/';
          	break;
      }
   }
   return dir;
}
//
// DLG1_DlgObj.phoneGapReadFileURL(filepath, onReadSuccess, onError, startAt, endAt)
//
// filepath is the local file URL of the desired file.
// If startAt and endAt are present, returns just those positions in the file.
//
// onReadSuccess(result) returns the contents read.
//
DLG1_DlgObj.phoneGapReadFileURL = function(filepath, onReadSuccess, onError, startAt, endAt) {
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) {
      onError();
      return;
   }
   var pos = filepath.lastIndexOf("/");
   var dirpath = filepath.substring(0,pos);
   var filename = filepath.slice(pos+1);
   var onResolvedURL =
      function(fsEntry) {
         var onGotFile =
            function(fileEntry) {
               var doReadFunction =
                  function(file) {
                     var reader = new FileReader();
                     reader.onloadend =
                        function(e) {
                           onReadSuccess(this.result);
                        };
                     if (typeof startAt=='undefined' || typeof endAt=='undefined') {
                        reader.readAsText(file);
                     }
                     else {
                        var blob = file.slice(startAt, endAt);
                        reader.readAsText(blob);
                     }
                  };
               fileEntry.file(doReadFunction);
            };
         fsEntry.getFile(filename, {}, onGotFile, onError);
      };
   window.resolveLocalFileSystemURL(dirpath, onResolvedURL, onError);
}
//
// DLG1_DlgObj.phoneGapWriteFileURL(filepath, text, onWriteSuccess, onError, append)
//
// filepath is the local file URL of the desired file. The directory must
// exist, but the file need not.
// If append is true, appends to current contents.
// Truncates (if file existed) to end of what is written.
//
DLG1_DlgObj.phoneGapWriteFileURL = function(filepath, text, onWriteSuccess, onError, append) {
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) {
      onError();
      return;
   }
   var pos = filepath.lastIndexOf("/");
   var dirpath = filepath.substring(0,pos);
   var filename = filepath.slice(pos+1);
   var onResolvedURL =
      function(fsEntry) {
         var onGotFile =
            function(fileEntry) {
               var writerFunction =
                  function(fileWriter) {
                     fileWriter.onwriteend =
                        function(e) {
                           onWriteSuccess();
                        };
                     fileWriter.onerror = onError;
                     if (append) {
                        fileWriter.seek(fileWriter.length);
                     }
                     var blob = new Blob([text], {type:'text/plain'});
                     fileWriter.write(blob);
                  };
               fileEntry.createWriter(writerFunction, onError);
            };
         fsEntry.getFile(filename, {create: true}, onGotFile, onError);
      };
   window.resolveLocalFileSystemURL(dirpath, onResolvedURL, onError);
}
//
// DLG1_DlgObj.phoneGapFileExistsURLfilepath, onResult, onError)
//
// filepath is the local file URL of the desired file.
// onResult(properties) will be called with false if file does not exist.
// If file does exist, properties will be:
//
//    {
//       name:file's name,
//       lastModifiedDate:lastModifiedDate object,
//       size:size in bytes,
//       type:MIME type if known(not on iOS now, but yes on Android)
//    }
//
DLG1_DlgObj.phoneGapFileExistsURL = function(filepath, onResult, onError) {
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) {
      onError();
      return;
   }
   var pos = filepath.lastIndexOf("/");
   var dirpath = filepath.substring(0,pos);
   var filename = filepath.slice(pos+1);
   var onResolvedURL =
      function(fsEntry) {
         var onGotFile =
            function(fileEntry) {
               fileEntry.file(function(fileObj) {
                  onResult({name:fileObj.name, lastModifiedDate:fileObj.lastModifiedDate,
                     size:fileObj.size, type:fileObj.type});
                  },
                  onError);
            };
         var onDidNotGetFile =
            function() {
               onResult(false);
            };
         fsEntry.getFile(filename, {create: false}, onGotFile, onDidNotGetFile);
      };
   window.resolveLocalFileSystemURL(dirpath, onResolvedURL, onError);
}
//
// DLG1_DlgObj.phoneGapDeleteFileURL(filepath, onDeleteSuccess, onError)
//
// filepath is the local file URL of the file to be deleted.
//
DLG1_DlgObj.phoneGapDeleteFileURL = function(filepath, onDeleteSuccess, onError) {
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) {
      onError();
      return;
   }
   var pos = filepath.lastIndexOf("/");
   var dirpath = filepath.substring(0,pos);
   var filename = filepath.slice(pos+1);
   var onResolvedURL =
      function(fsEntry) {
         var onGotFile =
            function(fileEntry) {
               fileEntry.remove(onDeleteSuccess, onError);
            };
         fsEntry.getFile(filename, {create: false}, onGotFile, onError);
      };
   window.resolveLocalFileSystemURL(dirpath, onResolvedURL, onError);
}
//
// DLG1_DlgObj.phoneGapCopyFileURL(srcpath, destdirpath, destname, onCopySuccess, onError)
//
// srcpath is the local file URL of the file to be copied.
// destdirpath is the URL of the directory into which to copy the file.
// destname is the name to be given to the copied file. If null, the source filename will be used.
//
DLG1_DlgObj.phoneGapCopyFileURL = function(srcpath, destdirpath, destname, onCopySuccess, onError) {
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) {
      onError();
      return;
   }
   var pos = srcpath.lastIndexOf("/");
   var dirpath = srcpath.substring(0,pos);
   var filename = srcpath.slice(pos+1);
   var onResolvedURL =
      function(fsEntry) {
         var onGotFile =
            function(fileEntry) {
               window.resolveLocalFileSystemURL(destdirpath,
                  function(destDirEntry) {
                     fileEntry.copyTo(destDirEntry, destname, onCopySuccess, onError);
                  },
                  onError);
            };
         fsEntry.getFile(filename, {}, onGotFile, onError);
      };
   window.resolveLocalFileSystemURL(dirpath, onResolvedURL, onError);
}
//
// DLG1_DlgObj.phoneGapMoveFileURL(srcpath, destdirpath, destname, onMoveSuccess, onError)
//
// srcpath is the local file URL of the file to be moved.
// destdirpath is the URL of the directory into which to move the file, replacing any existing file with the name.
// destname is the name to be given to the copied file. If null, the source filename will be used.
// If moved into the same directory, the file will be renamed.
// A move of a directory on top of an existing empty directory replaces that directory.
//
DLG1_DlgObj.phoneGapMoveFileURL = function(srcpath, destdirpath, destname, onMoveSuccess, onError) {
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) {
      onError();
      return;
   }
   var pos = srcpath.lastIndexOf("/");
   var dirpath = srcpath.substring(0,pos);
   var filename = srcpath.slice(pos+1);
   var onResolvedURL =
      function(fsEntry) {
         var onGotFile =
            function(fileEntry) {
               window.resolveLocalFileSystemURL(destdirpath,
                  function(destDirEntry) {
                     fileEntry.moveTo(destDirEntry, destname, onMoveSuccess, onError);
                  },
                  onError);
            };
         fsEntry.getFile(filename, {}, onGotFile, onError); //does not work on moving directories
      };
   window.resolveLocalFileSystemURL(dirpath, onResolvedURL, onError);
}
//
// DLG1_DlgObj.phoneGapRemoveDirectoryRecurseURL(dirpath, onRemoveSuccess, onError)
//
// dirpath is the file URL of the directory to be deleted.
// Deletes the specified directory and all of its contents, including other directories and
// their contents.
//
DLG1_DlgObj.phoneGapRemoveDirectoryRecurseURL = function(dirpath, onRemoveSuccess, onError) {
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) {
      onError();
      return;
   }
   var onResolvedURL =
      function(dirEntry) {
         dirEntry.removeRecursively(onRemoveSuccess, onError);
      };
   window.resolveLocalFileSystemURL(dirpath, onResolvedURL, onError);
}
//
// DLG1_DlgObj.phoneGapEnsureDirPathURL(rootpath, subdirpath, onCompletion, onError)
//
// rootpath is the file URL of the existing directory that will contain the directories that are needed.
// subdirpath is a path of directories to ensure exist below rootpath. They will be created
// if they don't exist.
//
// For example, if rootpath is "file://root/public/", subdirpath may be "toplevel/subdir1".
//
DLG1_DlgObj.phoneGapEnsureDirPathURL = function(rootpath, subdirpath, onCompletion, onError) {
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) {
      onError();
      return;
   }
   var dirs = subdirpath.split('/') || [];
   var onResolvedURL =
      function(fsEntry) {
         var ensureDirFunction =
            function(dirEntry) { // function to recurse
               if (dirs.length>0) {
                  if (dirs[0]=='.' || dirs[0]=='') {
                     dirs = dirs.slice(1); // remove null dir
                  }
               }
               if (dirs.length==0) {
                  onCompletion();
                  return;
               }
               dirEntry.getDirectory(dirs[0], {create: true},
                  function(subdirEntry) {
                     dirs = dirs.slice(1); // do next
                     ensureDirFunction(subdirEntry);
                  },
                  onError);
               };
         ensureDirFunction(fsEntry); // do first
      };
   window.resolveLocalFileSystemURL(rootpath, onResolvedURL, onError);
}
//
// DLG1_DlgObj.phoneGapListFilesRecurseURL(rootpath, onCompletion, onError)
//
// rootpath is the file URL of the directory whose contents will be listed.
// onCompletion(filelist) will contain an array of strings representing each file
// and directory down the hierarchy. Directories end in "/".
//
DLG1_DlgObj.phoneGapListFilesRecurseURL = function(rootpath, onCompletion, onError) {
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) {
      onError();
      return;
   }
   var filelist = [];
   var pathprefix = "";
   var pending = 0;
   var onResolvedURL =
      function(fsEntry) {
         var processDirFunction =
            function(subdirpath, listingObj) {
               var files = listingObj.files;
               var i;
               var fpath;
               var prefix = subdirpath.slice(pathprefix.length);
               for (i=0; i<files.length; i++) {
                  fpath = prefix+files[i];
                  filelist.push(fpath);
               }
               var dirs = listingObj.dirs;
               if (dirs.length==0) {
                  if (pending==0) {
                     onCompletion(filelist);
                  }
                  return;
               }
               for (i=0; i<dirs.length; i++) {
                  fpath = dirs[i].fullPath.slice(pathprefix.length);
                  filelist.push(fpath);
                  pending++;
                  dirs[i].filesystem.root.getDirectory(dirs[i].fullPath, {create: false},
                     function(dirEntry) {
                        listDirFunction(dirEntry);
                     },
                     function(e){pending--;onError(e);});
               }
            };
         var listDirFunction =
            function(dirEntry) { // function to recurse on subdirs
               var dirReader = dirEntry.createReader();
               var listingObj = {files:[], dirs:[]};
               var readDirEntries = function() {
                  dirReader.readEntries( // start an async reading of entries
                     function(entries) { // more entries read, or done
                        if (!entries || entries.length==0) {
                           pending--;
                           processDirFunction(dirEntry.fullPath, listingObj);
                           return;
                        }
                        var entry;
                        for (var i=0; i<entries.length; i++) {
                           entry = entries[i];
                           if (entry.isFile) {
                              listingObj.files.push(entry.name);
                           }
                           else {
                              listingObj.dirs.push(entry);
                           }
                        }
                        readDirEntries(); // recurse to call dirReader.readEntries again
                     },
                     onError);
                  };
               readDirEntries(); // do first reading of entries
            };
         pending++;
         pathprefix = fsEntry.fullPath; // get prefix
         listDirFunction(fsEntry); // do first list getting
      };
   window.resolveLocalFileSystemURL(rootpath, onResolvedURL, onError);
}
//
// DLG1_DlgObj.phoneGapListFilesURL(dirpath, matchRegex, onCompletion, onError)
//
// dirpath is the file URL of the directory whose contents will be listed (only files).
// matchRegex, if non-null, will need to match file names found for them to be listed.
// onCompletion(filelist) will contain an array of strings representing each file.
//
DLG1_DlgObj.phoneGapListFilesURL = function(dirpath, matchRegex, onCompletion, onError) {
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) {
      onError();
      return;
   }
   var onResolvedURL =
      function(fsEntry) {
         var filelist = [];
         var dirReader = fsEntry.createReader();
         var readEntriesFunction =
            function() { // function to recurse to call repeatedly after each completion until no result
               dirReader.readEntries( // start an async reading of entries
                  function(entries) { // more entries read, or done
                     if (!entries || entries.length==0) {
                        onCompletion(filelist);
                        return;
                     }
                     var name;
                     for (var i=0; i<entries.length; i++) {
                        name = entries[i].name;
                        if (!matchRegex || name.match(matchRegex)) {
                           filelist.push(name);
                        }
                     }
                     readEntriesFunction(); // recurse to call dirReader.readEntries again
                  },
                  onError);
               };
         readEntriesFunction(); // do first reading
      };
   window.resolveLocalFileSystemURL(dirpath, onResolvedURL, onError);
}
DLG1_DlgObj.getSQLiteFolder = function(mode) {
	if(typeof mode == 'undefined') mode = 0;
	var thisPackageName = '';
	thisPackageName = _phoneGapSettings().appId ;
	var localDbFileUrl = {
		androidx: '/data/data/' + thisPackageName + '/databases/',
		android1x: 'file:///data/data/' + thisPackageName + '/databases/',
		android2x: 'file:///data/data/' + thisPackageName,
		android: cordova.file.applicationStorageDirectory.substr(7)+ 'databases/',
		android1: cordova.file.applicationStorageDirectory + 'databases/',
		android2: cordova.file.applicationStorageDirectory.substr(0, cordova.file.applicationStorageDirectory.length -1) ,
		ios: cordova.file.dataDirectory
	};
	try{
		var thisDevice = device.platform.toLowerCase();
		if(mode == 1 && thisDevice == 'android') thisDevice = 'android1';
		if(mode == 2 && thisDevice == 'android') thisDevice = 'android2';
		var _targetDir = localDbFileUrl[thisDevice];
		return _targetDir;
	}catch(e) {
		alert('PhoneGap \'device\' Plugin not loaded');
	}
}
DLG1_DlgObj.phoneGapUnzipSQLite =  function(explicitFileName,filesystemSource,folderSource,zipFileName,dirStructureTarget,ok,fail) {
	if(typeof explicitFileName == 'undefined' || explicitFileName == '') {
		var baseURI = DLG1_DlgObj.phoneGapGetLocalDirURL(filesystemSource)
		var fnSource = baseURI + folderSource + '/' + zipFileName;
	} else {
		var fnSource = explicitFileName;
		var fn = fnSource
		fn = fn.split('/');
		zipFileName = fn[fn.length-1];
	}
	var baseURITarget = DLG1_DlgObj.getSQLiteFolder(1);
	var dirTarget = baseURITarget ;
	var targetFolder = fnSource.split('/')
	targetFolder.pop();
	targetFolder = targetFolder.join('/') + '/';
	var copyFNSource = fnSource.split('.');
	copyFNSource.pop();
	copyFNSource = copyFNSource.join('.') + '.db'
	//alert('target folder: ' + targetFolder)
	var cb = function(e) {
	//alert('unzip cb ' + e);
		if(e == 0) {
		//get files in targetFolder (assumme .zip file only has a single sqlite file and that the sqllite file has as .db extension and name of sqlite.zip file is same as sqlite.db file)
			//alert('copy file to target location'); debugger;
			///////////
			var rootpath = dirTarget;
			var _srcPath = copyFNSource
			var _destinationName = zipFileName.split('.')
			_destinationName.pop()
			_destinationName = dirStructureTarget + '___' + _destinationName.join('.') + '.db';
			//ensure that the databases folder exists/////////
			var _baseURI = baseURITarget;
			if(_baseURI.indexOf('/databases/') > -1) {
				_baseURI = _baseURI.substr(0,_baseURI.indexOf('/databases/')+1)
			}
			//alert(_baseURI);
			var _dirStructure = 'databases';;
			DLG1_DlgObj.phoneGapEnsureDirPathURL(_baseURI, _dirStructure,function() {
				DLG1_DlgObj.phoneGapCopyFileURL(_srcPath, rootpath, _destinationName, function() { } ,function() { });
			} ,function() {alert('failed to create databases folder'); } );
			ok.call(this);
		}
		else fail.call(this);
	}
	//zip.unzip(fnSource, dirTarget, cb );
	zip.unzip(fnSource, targetFolder, cb );
}
DLG1_DlgObj.copySQLiteDB = function(explicitFilename,sourceFileSystem,sourceFolder,sourceDBName,targetDBName,targetFolder, onSuccess, onError) {
		if(typeof onSuccess == 'undefined') onSuccess = function() { };
		if(typeof onError == 'undefined') onError = function() { }
		var _copyLow = function() {
			var localDBName = targetDBName;
			if (targetFolder != '') {
				localDBName = targetFolder + '___' + targetDBName;
			}
			if(typeof explicitFilename == 'undefined' || explicitFilename == '') {
				var fnSource = DLG1_DlgObj.phoneGapGetLocalDirURL(sourceFileSystem) + sourceFolder + '/' + sourceDBName;
			} else {
				var fnSource = explicitFilename;
			}
			var fnTarget = DLG1_DlgObj.getSQLiteFolder(1) +  localDBName;
			//alert('fnsource: ' + fnSource +'\nfntarget: ' + fnTarget);
			// '/data/data/' + thisPackageName + '/databases/',
			var _onCopySuccess = function() {
				//alert('sqlite copy success: ' + 5)
				onSuccess.call(this);
				if(sourceFolder == 'tempFolder/zipfiles') {
					//delete this folder. this is where the sqlitedb zip file was unzipped
					var _onRemoveSuccess = function() { /* alert('tempFolder/zipfiles was deleted'); */};
					var _error = function(e) { /*alert('could not delete the tempFolder/zipfiles folder');*/	};
					var _baseURI = DLG1_DlgObj.phoneGapGetLocalDirURL('temp');;
					var _dirName = 'tempFolder/zipfiles/';;
					var _dirPath = _baseURI + _dirName;
					DLG1_DlgObj.phoneGapRemoveDirectoryRecurseURL(_dirPath, _onRemoveSuccess, _error);
				}
			};
			var _onCopyError = function(e) {
				alert('sqlite copy error:' + JSON.stringify(e));
				onError.call(this);
			};
			var _onDeleteSuccess = function() {
				var folderTarget = DLG1_DlgObj.getSQLiteFolder(1) ;
				//alert(fnSource);
				//alert(folderTarget);
				//alert('about to copy: ' + localDBName);
				DLG1_DlgObj.phoneGapCopyFileURL(fnSource,folderTarget, localDBName, _onCopySuccess, _onCopyError);
			};
			var _onDeleteError = _onDeleteSuccess;
			//alert('delete what: ' + fnTarget)
			DLG1_DlgObj.phoneGapDeleteFileURL(fnTarget, _onDeleteSuccess,_onDeleteError);
		}
		if(targetFolder != '') {
			var onFolderCreated = function() {   _copyLow();}
			var onFolderCreatedFailed = function(e) { alert('SQLite folder not created');  onError.call()}
			var _base = DLG1_DlgObj.getSQLiteFolder(2); //add file:// and omit trailing 'databases' folder
			var targetx;
			var thisPackageName = '';
			thisPackageName = _phoneGapSettings().appId ;
			if(thisPackageName.toLowerCase() == 'android') {
				targetx = 'databases/' + targetFolder;
				targetx = 'databases/'
			} else {
				targetx = targetFolder;
				targetx = '/';
			}
			DLG1_DlgObj.phoneGapEnsureDirPathURL(_base,targetx, onFolderCreated, onFolderCreatedFailed);
		} else {
			_copyLow()
		}
}
DLG1_DlgObj.phoneGapUnzipFiles =  function(explicitFileName,filesystemSource,folderSource,zipFileName,fileSystemTarget, dirStructureTarget,ok,fail,flagListUnzippedFiles) {
	if(typeof ok == 'undefined') ok = function() { };
	if(typeof fail == 'undefined') fail = function() { };
	var _listFileThatWereUnzipped = function() {
		 var _onSuccess = function(filelist) {
			ok.call(this,filelist);
			//remove the tempUnzipFolder, but do not trigger the follow on function to unzip to the tempUnzipFolder
			_removeTempUnzipFolder('',2);
		};
		var _error = function(e) { alert('error');};
		var _baseURI = DLG1_DlgObj.phoneGapGetLocalDirURL('temp');;
		var _dirName = 'tempUnzipFolder/';;
		var _dirPath = _baseURI + _dirName;
		DLG1_DlgObj.phoneGapListFilesRecurseURL(_dirPath, _onSuccess, _error);
	}
	var _removeTempUnzipFolder = function(fnSource,mode) {
		if(typeof mode == 'undefined') mode = 1;
		var _onRemoveSuccess = function() { if(mode == 1) _listUnzippedFiles(fnSource);};
		var _error = function(e) { if(mode == 1) _listUnzippedFiles(fnSource);};
		var _baseURI = DLG1_DlgObj.phoneGapGetLocalDirURL('temp');;
		var _dirName = 'tempUnzipFolder/';;
		var _dirPath = _baseURI + _dirName;
		DLG1_DlgObj.phoneGapRemoveDirectoryRecurseURL(_dirPath, _onRemoveSuccess, _error);
	}
	var _listUnzippedFiles = function(fnSource) {
		var baseURITarget =  DLG1_DlgObj.phoneGapGetLocalDirURL('temp')
		var cb = function(e) {
			if(e == 0) {
				_listFileThatWereUnzipped();
			} else {
				//could not unzip to the tempUnzipFolder -- should be unlikely
				ok.call(this,[]);
			}
		}
		zip.unzip(fnSource,baseURITarget + 'tempUnzipFolder',cb)
	}
	if(typeof explicitFileName == 'undefined' || explicitFileName == '') {
		var baseURI = DLG1_DlgObj.phoneGapGetLocalDirURL(filesystemSource)
		var fnSource = baseURI + folderSource + '/' + zipFileName;
	} else {
		var fnSource = explicitFileName;
	}
	var baseURITarget = DLG1_DlgObj.phoneGapGetLocalDirURL(fileSystemTarget)
	var dirTarget = baseURITarget + dirStructureTarget
	var cb = function(e) {
		if(e == 0) {
			if(flagListUnzippedFiles) {
				//this function will call the follow on functions to unzip to the tempUnzipFolder
				_removeTempUnzipFolder(fnSource)
			} else {
				ok.call(this);
			}
		}
		else {
			//alert('in unzip: ' + e); sr55
			fail.call(this);
		}
	}
	if(typeof zip == 'undefined') {
		alert('FATAL ERROR - Cordova Zip plugin not loaded');
	}
	zip.unzip(fnSource, dirTarget, cb );
}
/*
DLG1_DlgObj.phoneGapUnzipSQLiteDB = function(explicitFileName,filesystemSource,folderSource,zipName,account,onCopyOK,onCopyError) {
	//unzips a .zip file that contains one (only 1) sqlite.db file and copies file to the sqlite folder
	var _copyLow = function(sqliteDBSource,account,onCopyOK,onCopyError) {
		var sourceFileSystem = 'temp';
		sourceFolder = 'tempFolder/zipfiles';
		sourceDBName = sqliteDBSource;
		targetDBName = sqliteDBSource;
		targetFolder = account;
		DLG1_DlgObj.copySQLiteDB(sourceFileSystem,sourceFolder,sourceDBName,targetDBName,targetFolder, onCopyOK, onCopyError)
	}
	var flagListUnzippedFiles = true;
	var okUnzip = function(fileArray) {
		alert(JSON.stringify(fileArray,'','\t'));
		if(fileArray.length > 1) {
			alert('zip file caon only contain one SQLite database which must not be in a sub-folder.');
		} else {
			var sqliteDBSource = fileArray[0];
			alert('dirPath: ' + dirPath);
			_copyLow(sqliteDBSource,account,onCopyOK,onCopyError)
		}
	 };
	var failUnzip = function() { alert('fail');}
	var dirPath = 'tempFolder/zipfiles'
	DLG1_DlgObj.phoneGapUnzipFiles(explicitFileName,filesystemSource,folderSource,zipName,'temp', dirPath,okUnzip,failUnzip,flagListUnzippedFiles)
}
*/
DLG1_DlgObj.phoneGapDownloadManifestFiles = function(manifest,folder,cbAllDone,optionsIn,fileSystemPart,flagMoveSQLiteFiles,manifestName) {
	////////////////////////////////////////////////////////
	function storeManifest(string,name) {
		//'transFormOnDeviceManifest'
		if(manifestName == '') {
			localStorage.setItem('transFormOnDeviceManifest',string);
			return;
		} else {
			var manifestObj = DLG1_DlgObj.__getManifestObj();
			manifestObj[name] = string;
			localStorage.manifests = JSON.stringify(manifestObj);
		}
	}
	function getManifest(name) {
		//'transFormOnDeviceManifest'
		if(manifestName == '') return localStorage.getItem('transFormOnDeviceManifest');
		else {
			var manifestObj = DLG1_DlgObj.__getManifestObj();
			var m = manifestObj[name];
			return m;
			//return JSON.stringify(manifestObj[name]);
		}
	}
	function getManifestStorageLocation(manifestName) {
		//'transFormFileSystemPart'
		if(manifestName == ''|| true) return localStorage.getItem('transFormFileSystemPart')
	}
	function setManifestStorageLocation(string,manifestName) {
		//'transFormFileSystemPart'
		if(manifestName == '' || true) localStorage.setItem('transFormFileSystemPart',string);
	}
	//var storedWhere = localStorage.getItem('transFormFileSystemPart');
	//var storedWhere = getManifestStorageLocation(manifestName);
	//localStorage.setItem('transFormFileSystemPart',_string);
	//setManifestStorageLocation(_string,manifestName);
	//localStorage.setItem('transFormOnDeviceManifest',json);
	//storeManifest(json,manifestName)
	//localStorage.transFormOnDeviceManifest = m;
	//storeManifest(m,manifestName);
	//var oldManifest = localStorage.getItem('transFormOnDeviceManifest');
	//var oldManifest = getManifest(manifestName);
	//var m = localStorage.transFormOnDeviceManifest;
	//var m = getManifest(manifestName);
	/////////////////////////////////////////////////////////
	if(typeof manifestName == 'undefined') manifestName = '';
	var obj = DLG1_DlgObj.__getManifestObj('manifestInfo');
	var manifestName2 = manifestName
	if(manifestName2 == '') manifestName2 = '___default___';
	if(typeof obj[manifestName2] =='undefined') obj[manifestName2] = {};
	obj[manifestName2].folder = folder =  folder ;
	obj[manifestName2].fileSystemPart = fileSystemPart
	var json = JSON.stringify(obj)
	localStorage.setItem('manifestInfo',json)
if(typeof flagMoveSQLiteFiles == 'undefined') flagMoveSQLiteFiles = true;
	/*
	usage:
	if 'informationOnly' is set to true, the cb function is called with arr.mode = 'informationOnly' and arr.array set to the manifest of files that need to be downloaded
	var opsIn = {
		informationOnly: false,
		showProgress: true,
		progress: {
			xcolor: '#9fa1e8',
			color: 'green',
			width: '600px',
			progressElement: 'DLG1.V.R1.PLACEHOLDER_1'
		}
	}
	var cb = function(arr) {
		if(typeof arr.mode != 'undefined') {
				if(arr.mode == 'informationOnly') {
					alert('Number of files to download: ' + arr.array.length);
					return;
				}
		}
		alert('post process is now COMPLETE: items - ' + arr.array.length);
	};
	//url can also be an http::// or https:// address or an array of objects
		var url = '';
		url = [
					{
						url: 'https://alphamediacapture.s3.amazonaws.com/transform/SQLiteNorthwind.zip',
						type: 'sqlite',
						version: 1,
						size: 70900
					},
					{
						url: 'https://alphamediacapture.s3.amazonaws.com/transform/sqlite3.db',
						type: 'sqlite',
						version: 1,
						size: 7000
					},
					{
						url: 'https://alphamediacapture.s3.amazonaws.com/transform/allimages.zip',
						type: 'folder',
						zipped: true,
						targetFolder: 'transFormShortFileList',
						version: 1,
						size: 56900
					}
		]
	var url = 'https://alphamediacapture.s3.amazonaws.com/transform/transformManifest.json';
	DLG1_DlgObj.phoneGapDownloadManifestFiles(url,'account1',cb,opsIn)
	*/
	var computeNewManifest = function(oldManifestJSON,manifest, accountId) {
		try{
			var om = JSON.parse(oldManifestJSON);
			om = om[accountId];
			if(typeof om == 'undefined' || om == null) {
				return manifest;
			}
			var arr = manifest;
			var totalSize = 0;
			for(var i = 0; i < arr.length; i++) {
				arr[i].mustFetch = true;
				var url = arr[i].url;
				var type = arr[i].type;
				for(var j = 0; j < om.length; j++) {
					if(om[j].url == url && om[j].type == type) {
						var oldVersion = om[j].version;
						if(typeof oldVersion == 'undefined') oldVersion = -1;
						if(typeof oldVersion == 'number') {
							var newVersion = arr[i].version;
							if(typeof newVersion == 'undefined') newVersion = -1;
							if(typeof newVersion == 'number') {
								if(newVersion <= oldVersion) {
									arr[i].mustFetch = false;
								} else {
									//alert('must fetch: ' + i);
									if(typeof arr[i].size != 'undefined') totalSize = totalSize + arr[i].size;
								}
							}
						}
					}
				}
			}
			var count = 0;
			var arr2 = [];
			for(var i = 0; i < arr.length; i++) {
				if(arr[i].mustFetch) {
					count++;
					arr2.push(arr[i])
				}
			}
			//if optionsIn says information only then we can do the callback function here, passing in the arr2 array
			//alert('count must fetch: ' + count +  ' total size: ' + totalSize);
			return arr2;
		}catch(err) {
			return manifest;
		}
	}
	var flagExplicit = false;
	if(typeof fileSystemPart == 'undefined') fileSystemPart = 'saved';
	if(fileSystemPart.toLowerCase().indexOf('explicit:') == 0) {
		fileSystemPart = fileSystemPart.substr('explicit:'.length);
		flagExplicit = true;
	}
	//var storedWhere = localStorage.getItem('transFormFileSystemPart');
	var storedWhere = getManifestStorageLocation(manifestName);
	var obj = {}
	if(storedWhere == null) {
		obj[folder] = fileSystemPart;
	} else {
		try{
			obj = JSON.parse(storedWhere)
			obj[folder] = fileSystemPart;
		}catch(e) {
			obj[folder] = fileSystemPart;
		}
	}
	var _string = JSON.stringify(obj);
	//localStorage.setItem('transFormFileSystemPart',_string);
	setManifestStorageLocation(_string,manifestName);
	var accountId = folder;
	var fetchManifest = function(url) {
	var onOK = function(data) {
		try{
			var arr = JSON.parse(data);
			DLG1_DlgObj.phoneGapDownloadManifestFiles(arr,accountId,cbAllDone,optionsIn,fileSystemPart,flagMoveSQLiteFiles,manifestName);
		}catch(e) {
			//alert('Error - could not read the TransForm manifest file.' + JSON.stringify(e));
			var cbObj = {error: true, errorText: 'Could not read the manifest file.'};
			cbAllDone.call(this,cbObj);
			}
		}
		var onFail = function() {
			//alert('Error - Could not download the TransForm manifest file.');
			var cbObj = {error: true, errorText: 'Could not download the manifest file.'};
			cbAllDone.call(this,cbObj);
		}
		DLG1_DlgObj.httpFetch(url,onOK,onFail,[{name:"cache-control",value:"no-cache"}]);
	}
	if(typeof manifest == 'function') {
		manifest = manifest.call()
	}
	if(typeof manifest == 'string') {
		fetchManifest(manifest);
		return;
	}
	//var oldManifest = localStorage.getItem('transFormOnDeviceManifest');
	//debugger;
	var oldManifest = getManifest(manifestName);
	var obj = {};
	var newManifest = manifest;
	if(oldManifest != null) {
		var newManifest = computeNewManifest(oldManifest,manifest,folder);
	} else {
		if(manifest.constructor != Array) {
			obj = JSON.parse(manifest);
		}
	}
	obj[folder] = manifest;
	var json = JSON.stringify(obj);
	var flagInformationOnly = false;
	if(typeof optionsIn.informationOnly != 'undefined') {
		if(optionsIn.informationOnly) {
			flagInformationOnly = true;
		}
	}
	if (!flagInformationOnly) {
		//localStorage.setItem('transFormOnDeviceManifest',json);
		storeManifest(json,manifestName)
	}
	manifest = newManifest;
	if(flagInformationOnly) {
		var objCB = {error: false, array: manifest, accountId: accountId, mode: 'informationOnly'}
		cbAllDone.call(this,objCB);
		return;
	}
	if(manifest.length == 0) {
		var objCB = {error: false, array: manifest, accountId: accountId, arrayFilesRelative: [], arrayFiles: [], fileCount: 0}
		cbAllDone.call(this,objCB);
		return;
	}
	if(typeof flagMoveSQLiteFiles == 'undefined') flagMoveSQLiteFiles = true;
		if(flagMoveSQLiteFiles) {
			//android can use sqlite files in a sub-dir so they are moved to the root and given a filename account___sqlitedbname.db
			if(typeof cbAllDone == 'undefined') {
				var origCB = function() { }
			} else {
				origCB = cbAllDone;
			}
			cbAllDone = function(obj) {
				var makeCBDone = function(array,cbNoError) {
					var cbDone = function() {
						var arrayIn = array;
						/////////////////
						var folder = accountId;
						var cb = function(array) {
							var arrFQ = [];
							var arrR = [];
							var uriPrefix = DLG1_DlgObj.phoneGapTFGetFSPart(accountId);
							for(var i = 0; i < array.length; i++) {
								arrR.push(array[i].name);
								arrFQ.push(uriPrefix + array[i].name);
							}
						    var obj = {error: false, array: arrayIn, arrayFilesRelative: arrR, arrayFiles: arrFQ, fileCount: array.length}
							cbNoError.call(this,obj);
						};
						DLG1_DlgObj.phoneGapTFListAccountFiles(folder,cb);
						////////////////
					}
					return cbDone;
				}
				var cbDone = makeCBDone(obj.array,origCB);
				var cbError = function() {};
				DLG1_DlgObj.moveSQLiteFilesFromSubfolder(obj.accountId,cbDone,cbError)
			}
	}
	var arr = manifest
	var tempFolderName = 'transFormTemp';
	for(var i = 0; i < arr.length; i++) {
		arr[i].filename = arr[i].url;
		arr[i].zipped = false;
		var flagZip = false;
		var fn = arr[i].filename;
		var ext = fn.split('.');
		ext = ext[ext.length-1];
		if(typeof ext != 'undefined') {
			if(ext.toLowerCase() == 'zip') {
				flagZip = true;
				arr[i].zipped = true;
				if(arr[i].type == 'file') {
					arr[i].type = 'folder';
					if(typeof arr[i].targetFolder == 'undefined') arr[i].targetFolder = '';
				}
			}
		}
		arr[i].shortName = A5.parseFilename(fn).name;
		if(typeof arr[i].targetFolder == 'undefined') arr[i].targetFolder = '';
	}
	var options = {
		directory: tempFolderName,
		strip: true,
		filesystem: 'temp',
		forceDownloadIfFileExists: true,
		onComplete: function(array) {
			_processDownloadedFiles(arr,accountId)
		},
		onError: function(array,arrayIndex) {
			var cbObj = {error:true, errorText: 'Error downloading files to device.'};
			cbAllDone.call(this,cbObj);
		},
		onDeviceOffline: function() {
			var cbObj = {error:true, errorText: 'No connection.'};
			cbAllDone.call(this,cbObj);
		}
	}
	if(typeof optionsIn == 'object') $u.o.assign(options,optionsIn);
	var _deleteTempFolder = function() {
		var _onRemoveSuccess = function() {  };
		var _error = function(e) {  };
		var _baseURI = DLG1_DlgObj.phoneGapGetLocalDirURL('temp');;
		var _dirName = tempFolderName + '/';
		var _dirPath = _baseURI + _dirName;
		DLG1_DlgObj.phoneGapRemoveDirectoryRecurseURL(_dirPath, _onRemoveSuccess, _error);
	}
	var postProcessComplete = function(arr) {
		var flagDone = true;
		for(var i = 0; i < arr.length; i++) {
			if(arr[i].postProcessDone == false) {
				flagDone = false;
				break;
			}
		}
		var ph = '';
		if(typeof options.progress != 'undefined') {
			if(typeof options.progress.progressElement != 'undefined') {
				ph = options.progress.progressElement;
			}
		}
		if(ph == '') flagShowProgress = false;
		var ele = $(ph + '.PROGRESS.TOTAL');
		var ele2 = $(ph + '.PROGRESSDISPLAY');
		if(ele2) {
			ele2.style.display = '';
			ele2.innerHTML = 'Processing files...';
		}
		//alert('flag done: ' + flagDone);
		var flagShowProgress = false;
		if(typeof options.showProgress != 'undefined') {
			flagShowProgress = options.showProgress;
		}
		if(flagShowProgress) {
			//we don't show progress anymore for post processing. just put up a message saying 'Processing files...'
		}
		if(flagDone) {
			if(ele2) ele2.innerHTML = '';
			if(ele2) ele2.style.display = 'none';
			if(ele) ele.style.display = 'none';
			var that = this;
			setTimeout(function() {
				if(ele2) ele2.style.display = 'none';
				setTimeout(function() {
					var objCB = {error: false, array: arr, accountId: accountId};
					cbAllDone.call(that,objCB);
					_deleteTempFolder();
				},100);
			},101);
		} else {
			var countDone = 0;
			for(var i = 0; i < arr.length; i++) {
				if(arr[i].postProcessDone) countDone = countDone + 1;
			}
			if(ele2) ele2.style.display = '';
			var pct = (countDone/arr.length) * 100;
			if(ele) {
				//ele.style.width = pct + '%';
			}
		}
	}
	//////////////////// post process function start ////////////////////
	var _processDownloadedFiles = function(arr, accountId) {
		for(var i = 0; i < arr.length; i++) {
			arr[i].postProcessDone = false;
			arr[i].postProcessError = false;
		}
		var flagMustUpdateOnDeviceManifest = false;
		for(var i = 0; i < arr.length; i++) {
			if(!arr[i].downloaded) {
				if(!flagInformationOnly) flagMustUpdateOnDeviceManifest = true;
				arr[i].postProcessDone = true;
			}
		}
		//sr00
		if(flagMustUpdateOnDeviceManifest) {
			//var m = localStorage.transFormOnDeviceManifest;
			var m = getManifest(manifestName);
			var mObj = JSON.parse(m);
			var url_i = '';
			var mObj2 = mObj[folder];
			//window.onerror = function(err) { alert('Unhandled Javascript Error - postprocess:  ' + JSON.stringify(err));}
			for(var i = 0; i < arr.length; i++) {
				if(!arr[i].downloaded) {
					url_i = arr[i].url;
					for(var j = 0; j < mObj2.length; j++) {
						if(mObj2[j].url == url_i) {
							mObj2[j].version = -1; //set version to -1 so that if the error is later corrected, file will download
						}
					}
				}
			}
			m = JSON.stringify(mObj)
			//localStorage.transFormOnDeviceManifest = m;
			storeManifest(m,manifestName);
		}
		postProcessComplete(arr) //if all downloads fail, need to trigger the onDone event
		for(var i = 0; i < arr.length; i++) {
			if(arr[i].type == 'sqlite' && arr[i].downloaded) {
				var flagZip = arr[i].zipped
				if(flagZip) {
					var _getcbok = function(index,arrIn) {
						var i = index;
						var arr = arrIn;
						var ok = function() {
							//alert('sqlite unzipped in target - '  + i + arr[i].localFilename );
							arr[i].postProcessDone = true;
							arr[i].postProcessError = false;
							postProcessComplete(arr)
						}
						return ok
					}
					var _getcbfail = function(index,arrIn) {
						var i = index;
						var arr = arrIn;
						var fail = function() {
							//alert('failed');
							arr[i].postProcessDone = true;
							arr[i].postProcessError = true;
							postProcessComplete(arr)
						};
						return fail;
					}
					var ok = _getcbok(i,arr);
					var fail = _getcbfail(i,arr);
					//alert('about to unzip'); debugger;
					DLG1_DlgObj.phoneGapUnzipSQLite(arr[i].localFilename,'','','',accountId,ok,fail)
				} else {
					//SQLite db is NOT zipped
					var _getcbok = function(index,arrIn) {
						var i = index;
						var arr = arrIn;
						var onSuccess = function() {
							//alert('sqlite db copied: ' + i + ' must now delete ' + arr[i].localFilename);
							arr[i].postProcessDone = true;
							arr[i].postProcessError = false;
							//alert(JSON.stringify(arr,'','\t'));
							postProcessComplete(arr)
						}
						return onSuccess;
					}
					var _getcbfail = function(index,arrIn) {
						var i = index;
						var arr = arrIn;
						var ok = function() {
							//alert('sqlite db NOT copied: ' + i);
							arr[i].postProcessDone = true;
							arr[i].postProcessError = true;
							postProcessComplete(arr)
						}
						return ok;
					}
					var onSuccess = _getcbok(i,arr);
					var onError = _getcbfail(i,arr);
					var fn = arr[i].localFilename
					fn = fn.split('/');
					var localDBName = fn[fn.length-1];
					DLG1_DlgObj.copySQLiteDB(arr[i].localFilename,'','','',localDBName,accountId, onSuccess, onError)
				}
			}
			if(arr[i].type == 'file' && arr[i].downloaded) {
				var fnSource = arr[i].localFilename;
				if(arr[i].targetFolder == '') {
					var _targetFolder = accountId + '/';
				} else {
					var _targetFolder = accountId + '/' + arr[i].targetFolder;
				}
				var makeOnMoveOK = function(arr,i) {
					var _ok = function() {
						arr[i].postProcessDone = true;
						arr[i].postProcessError = false;
						postProcessComplete(arr);
					}
					return _ok;
				}
				var makeOnMoveError = function(arr,i) {
					var _err = function() {
						arr[i].postProcessDone = true;
						arr[i].postProcessError = true;
						postProcessComplete(arr);
					}
					return _err;
				}
				var _onMoveSuccess = makeOnMoveOK(arr,i);
				var _error = makeOnMoveError(arr,i);
				var _srcPath = fnSource;
				var _destinationDirPath = DLG1_DlgObj.phoneGapGetLocalDirURL(fileSystemPart) + _targetFolder;;
				var _destinationName = arr[i].shortName;
				var _onFolderCreateSuccess = function() {
					DLG1_DlgObj.phoneGapMoveFileURL(_srcPath, _destinationDirPath, _destinationName, _onMoveSuccess, _error);
				};
				var _onFolderCreateError = makeOnMoveError(arr,i);
				var _baseURI = DLG1_DlgObj.phoneGapGetLocalDirURL(fileSystemPart);;
				var _dirStructure = _targetFolder;;
				DLG1_DlgObj.phoneGapEnsureDirPathURL(_baseURI, _dirStructure, _onFolderCreateSuccess, _onFolderCreateError);
			}
			if(arr[i].type == 'folder' && arr[i].downloaded) {
				var _getcbfail = function(index,arrIn) {
						var i = index;
						var arr = arrIn;
						var ok = function(err) {
							//alert('failed');
							alert('UNZIP folder failed: ' + i);
							arr[i].postProcessDone = true;
							arr[i].postProcessError = true;
							postProcessComplete(arr)
						}
						return ok;
					}
				var _getcbok = function(index,arrIn) {
						var i = index;
						var arr = arrIn;
						var onSuccess = function() {
							//alert('folder UNZIP OK: ' + i + ' delete temp file: ' + arr[i].localFilename) ;
							arr[i].postProcessDone = true;
							arr[i].postProcessError = false;
							postProcessComplete(arr)
						}
						return onSuccess;
					}
				var ok = _getcbok(i,arr)
				var fail = _getcbfail(i,arr)
				if(arr[i].targetFolder == '') {
					var _target = accountId;
				} else {
					var _target = accountId + '/' + arr[i].targetFolder;
				}
				DLG1_DlgObj.phoneGapUnzipFiles(arr[i].localFilename,'','','',fileSystemPart, _target,ok,fail,false)
			}
		}
	}
	//////////////////// post process function end ////////////////////
	DLG1_DlgObj.phoneGapFileDownload(arr,options);
}
//////////////////////////===========new
//each named manifest MUST have its own folder
DLG1_DlgObj.__getManifestObj = function(keyName) {
	if(typeof keyName == 'undefined') keyName = 'manifests';
		var manifestObj = localStorage.getItem(keyName);
		if(manifestObj == null || !manifestObj) manifestObj = '';
		if(manifestObj == '') {
			manifestObj = {};
		} else {
			manifestObj = JSON.parse(manifestObj);
		}
		return manifestObj;
}
DLG1_DlgObj.getFolderForNamedManifest = function(manifestName) {
	window.onerror = function(err) { alert('Error - getFolderForNamedManifest():  ' + JSON.stringify(err));}
	//returns an object with 'folder' and 'fileSystemPart'
	if(typeof manifestName == 'undefined' || manifestName == '') manifestName = '___default___';
	var obj = DLG1_DlgObj.__getManifestObj('manifestInfo');
	var obj2 = obj[manifestName];
	return obj2;
}
DLG1_DlgObj.phoneGapListFilesInManifest = function(manifestName,cb) {
	window.onerror = function(err) { alert('Error - phoneGapListFilesInManifest():  ' + JSON.stringify(err));}
	if(typeof manifestName == 'undefined') manifestName = '';
	var obj = DLG1_DlgObj.getFolderForNamedManifest(manifestName);
	if(obj) {
		var folder = DLG1_DlgObj.getFolderForNamedManifest(manifestName).folder;
		DLG1_DlgObj.phoneGapTFListAccountFiles(folder,cb);
	} else {
		var arr = [];
		cb.call(this,arr);
	}
}
DLG1_DlgObj.phoneGapDeleteFilesInManifest = function(manifestName,onOK,onError) {
	window.onerror = function(err) { alert('Error - phoneGapDeleteFilesInManifest():  ' + JSON.stringify(err));}
	if(typeof manifestName == 'undefined') manifestName = '';
	var obj = DLG1_DlgObj.getFolderForNamedManifest(manifestName);
	if(!obj) return;
	if(obj) var folder = obj.folder;
	DLG1_DlgObj.phoneGapTFRemoveFilesForAccount(folder,onOK,onError,manifestName)
	var obj = DLG1_DlgObj.__getManifestObj('manifestInfo');
	delete obj[manifestName];
	var json = JSON.stringify(obj);
	localStorage.setItem('manifestInfo',json) ;
	var obj = DLG1_DlgObj.__getManifestObj();
	delete obj[manifestName];
	var json = JSON.stringify(obj);
	localStorage.setItem('manifests',json)
}
DLG1_DlgObj.listManifests = function(cb) {
	window.onerror = function(err) { alert('Error - listManifests():  ' + JSON.stringify(err));}
	var m = [];
	var obj = DLG1_DlgObj.__getManifestObj('manifestInfo');
	if(obj) {
		for(var n in obj) {
			if(n.indexOf('___default___') > -1) {
				var obj2 = localStorage.getItem('transFormOnDeviceManifest');
				if(obj2 == null || obj2 == 'null') {
				} else {
					m.push('Default Manifest');
				}
			} else {
				m.push(n)
			}
		}
	}
	if(cb) cb.call(this,m);
	return m;
}
DLG1_DlgObj.getManifests = function(onOK) {
	window.onerror = function(err) { alert('FATAL: getManifests()  ' + JSON.stringify(err));}
	var m = DLG1_DlgObj.listManifests();
	var r = [];
	var robj = {};
	var obj =  DLG1_DlgObj.__getManifestObj('manifestInfo');
	var obj2 = DLG1_DlgObj.__getManifestObj();
	for(var i = 0; i < m.length; i++) {
		var n = m[i];
		if(n == 'Default Manifest') {
			var obj4 = obj['___default___'];
			if(obj4) {
				if(obj4.folder && obj4.folder != null) {
					delete robj;
					var robj = {};
					robj.name = 'Default Manifest';;
					robj.folder = obj4.folder
					robj.fileSystemPart = obj4.fileSystemPart;
					var ls = localStorage.getItem('transFormOnDeviceManifest');
					var ls = JSON.parse(ls);
					if(ls) {
						var manifest = ls[obj4.folder];
						robj.manifest = manifest;
						r.push(robj)
					}
				}
			}
		} else {
			delete robj;
			var robj = {};
			robj.name = n;
			var obj4 = obj[n]
			if(obj4 && obj4.folder) {
				robj.folder = obj4.folder;
				robj.fileSystemPart = obj4.fileSystemPart;
				robj.manifest = JSON.parse(obj2[n])[obj4.folder];
				r.push(robj);
			}
		}
	}
	if(typeof onOK == 'function') onOK.call(this,r);
	return r;
}
/*
DLG1_DlgObj.getManifest = function(manifestName,onOK) {
	var val = DLG1_DlgObj.phoneGapGetManifestBaseFolder(manifestName,onOK,'getManifest')
}
*/
DLG1_DlgObj.phoneGapGetManifestBaseFolder = function(manifestName,onOK,mode) {
	var name = manifestName;
	if(name == '') name = 'Default Manifest';
	if(manifestName == 'Default Manifest') manifestName = ''
	var obj = DLG1_DlgObj.getManifests();
	if(!obj) {
		if(typeof onOK == 'function') onOK.call(this,{});
		return '';
	};
	var obj2 = {};
	var found = false;
	for(var i = 0; i < obj.length; i++) {
		if(obj[i].name == name) {
			obj2 = obj[i];
			found = true;
		}
	}
	if(mode == 'getManifest') {
		if(typeof onOK == 'function') onOK.call(this,obj2)
		return obj2;
	}
	if(!found) {
		if(typeof onOK == 'function') onOK.call(this,{});
		return '';
	}
	var folder = obj2.folder;
	var fspart = obj2.fileSystemPart;
	obj2.baseFolder = DLG1_DlgObj.phoneGapGetLocalDirURL(obj2.fileSystemPart)
	if(typeof onOK == 'function') onOK.call(this,obj2)
	return '' + DLG1_DlgObj.phoneGapGetLocalDirURL(obj2.fileSystemPart)
}
//////////////
DLG1_DlgObj.phoneGapTFReadFile = function(filename,ok,fail) {
	var fileSystemPart = DLG1_DlgObj.phoneGapTFGetFSPart(account,true);
	if(typeof ok == 'undefined') ok = function() { };
	if(typeof fail == 'undefined') fail = function(e) { };
	var _success = function(result) {
		ok.call(this,result)
	};
	var _error = function(e) {
		fail.call(this,e)
	};
	if(fileSystemPart == null || fileSystemPart == '') {
		fail.call(this);
		return;
	}
	var _filePath = DLG1_DlgObj.phoneGapGetLocalDirURL(fileSystemPart) + filename;
	DLG1_DlgObj.phoneGapReadFileURL(_filePath, _success,_error)
}
DLG1_DlgObj.phoneGapTFExecuteSQL = function(dbName,sql,args,ok,fail) {
/*
useage:
var _success = function() {
	resultArray = arguments[0];
	DLG1_DlgObj.setListColumnsAndPopulate('list1',resultArray)
};
var _error = function(e) { };
DLG1_DlgObj.phoneGapTFExecuteSQL('account1/SQLiteNorthwind.db','select * from Customers where Country = ?',['UK'],ok,fail)
*/
	if(typeof ok != 'function') ok = function() { };
	if(typeof fail != 'function') fail = function(e) { }
	//dbName is typically like this: account1/dbname.db
	if(args.constructor == Array) {
		var _args = args;
	} else {
		var _args = [];
	}
	var _success = function(tx,result,resultArray) {
		ok.call(this,resultArray,result,tx)
	};
	var _error = function(e) {
		fail.call(this,e)
	};
	_onTxSuccess = function() {/*transaction success */  };
	_onTxError = function() {/*transaction error */  };
	DLG1_DlgObj.SQLiteExecuteSQL(dbName,sql,_args,_success,_error,_onTxSuccess,_onTxError);
}
DLG1_DlgObj.phoneGapDeleteSQLiteDBFiles = function(account,cb,onerror) {
	if(typeof cb == 'undefined') cb = function() { };
	if(typeof onerror == 'undefined') onerror = function() { };
 	var ext = '.db';
 	var _onCompletion = function() { cb.call(this);};
	var _error = function(e) { onerror.call(this) };
	var _baseURI = DLG1_DlgObj.getSQLiteFolder(1);
	var _dirName = '/';;
	var _matchRegex = new RegExp(account.escapeRegExp() + '___[A-z0-9_]*' + ext.escapeRegExp());
	var _keepList = [];
	var _dirPath = _baseURI + _dirName;
	DLG1_DlgObj.phoneGapDeleteFilesNotInListURL(_dirPath,_matchRegex,_keepList, _onCompletion, _error);
}
DLG1_DlgObj.phoneGapTFRemoveFilesForAccount = function(accountId,cb,onError) {
	if(typeof onError == 'undefined') onError = function() { };
	if(typeof cb == 'undefined') cb = function() { };
	//get the fspart where manifest was loaded
	var fsPart = DLG1_DlgObj.phoneGapTFGetFSPart(accountId);
	var __removeSQLite = function(accountId,cb,onError) {
		DLG1_DlgObj.phoneGapDeleteSQLiteDBFiles(accountId,cb,onError);
	}
	var _errorRemoveFolder = function() { __removeSQLite(accountId,cb,onError); };
	var _onRemoveFolderSuccess = function() { __removeSQLite(accountId,cb,onError);};
	var _dirPath = fsPart + accountId + '/';
	DLG1_DlgObj.phoneGapRemoveDirectoryRecurseURL(_dirPath, _onRemoveFolderSuccess, _errorRemoveFolder);
	var manifestName = arguments[3];
	if(typeof manifestName == 'undefined') localStorage.transFormOnDeviceManifest = null;
}
DLG1_DlgObj.phoneGapTFListAccountFiles = function(account,cb) {
//alert('list');
//debugger;
//if fileSystemPart is 'private' on iOS will get odd results because private and getSQLiteFolder() are same folder
	var fileSystemPart = DLG1_DlgObj.phoneGapTFGetFSPart(account,true);
	if(typeof cb == 'undefined') cb = function() { };
	if(fileSystemPart == null || fileSystemPart == '') {
		cb.call(this,[]);
		return;
	}
	var arr = [];
	var _files = function(account) {
		var _onSuccess = function(filelist) {
			var str;
			for(var i = 0; i < filelist.length; i++) {
				str = filelist[i];
				if(str.substr(str.length-1) != '/') {
					arr.push({name: account + '/' + filelist[i], type: 'file'});
				}
			};
			_sqlite(account)
		};
		var _error = function(e) {  _sqlite(account) };
		var _baseURI = DLG1_DlgObj.phoneGapGetLocalDirURL(fileSystemPart);;
		var _dirName = account + '/';;
		var _dirPath = _baseURI + _dirName;
		DLG1_DlgObj.phoneGapListFilesRecurseURL(_dirPath, _onSuccess, _error);
	}
	var _sqlite = function(account) {
		var _onSuccessSQ = function(filelist) {
			var _ext = function(fn) {
				fn = fn.split('.')
				if(fn.length == 1) return '';
				var ext = fn[fn.length-1];
				if(typeof ext == 'undefined') ext = '';
				return ext;
			}
			var flagFixType = false;
			for(var i = 0; i < filelist.length; i++) {
				flagFixType = false;
				/*
				try{
					if(fileSystemPart == 'private' && device.platform.toLowerCase() == 'ios') {
						flagFixType = true;
					}
				}catch(e) { }
				*/
				if(flagFixType == false) {
					if(filelist[i].indexOf(account) == 0) {
						if( filelist[i].substr(filelist[i].length-1) != '/' && _ext(filelist[i]) == 'db') {
							arr.push({name: filelist[i], type: 'SQLiteDB'});
						}
					}
				}
			};
			if(flagFixType) {
				for(var i = 0; i < arr.length; i++) {
					var _n = arr[i].name.split('.');
					var _e = _n[_n.length-1];
					if(_e.toLowerCase() == 'db') {
						arr[i].type = 'SQLiteDB';
					}
				}
			}
			cb.call(this,arr);
		};
		var _error = function(e) { cb.call(this,arr);};
		var _baseURI = DLG1_DlgObj.getSQLiteFolder(1);
		//var _dirName = account + '/';;
		_dirName = '/';
		var _dirPath = _baseURI + _dirName;
		DLG1_DlgObj.phoneGapListFilesRecurseURL(_dirPath, _onSuccessSQ, _error);
	}
	_files(account)
}
DLG1_DlgObj.phoneGapGetSQLiteDatabases = function(account,cb,error) {
	if(typeof error == 'undefined') error = function(e) { };
	var _sqlite = function(account) {
		var _onSuccessSQ = function(filelist) {
			if(account != '') {
				var _f = [];
				var x;
				for(var i = 0; i < filelist.length; i++) {
					x = filelist[i].split('.');
					x = x[x.length-1];
					if(filelist[i].indexOf(account+'___') == 0 && x != 'undefined' && x == 'db' ) {
						_f.push(filelist[i]);
					}
				}
			} else {
				var _f = [];
				var x;
				for(var i = 0; i < filelist.length; i++) {
					x = filelist[i].split('.');
					x = x[x.length-1];
					if(x != 'undefined' && x == 'db' ) {
						_f.push(filelist[i]);
					}
				}
			}
			cb.call(this,_f);
		};
		var _error = function(e) { error.call(this,e);};
		var _baseURI = DLG1_DlgObj.getSQLiteFolder(1);
		_dirName = '/';
		var _dirPath = _baseURI + _dirName;
		DLG1_DlgObj.phoneGapListFilesRecurseURL(_dirPath, _onSuccessSQ, _error);
	}
	_sqlite(account)
}
DLG1_DlgObj.phoneGapTFGetFSPart = function(accountId,flagShortPartName) {
	if(typeof flagShortPartName == 'undefined') flagShortPartName = false;
	var baseFolder = ''
	var storedWhere = localStorage.getItem('transFormFileSystemPart');
	var obj = {}
	if(storedWhere == null) {
	} else {
		try{
			obj = JSON.parse(storedWhere);
			baseFolder = obj[accountId];
		}catch(e) {
		}
	}
	if(flagShortPartName) {
		return baseFolder;
	}
	baseFolder = DLG1_DlgObj.phoneGapGetLocalDirURL( baseFolder);
	return baseFolder;
}
DLG1_DlgObj.phoneGapTFGetFullPath = function(relativeFilename,accountId) {
	if(relativeFilename.indexOf(accountId) == -1) {
		var baseFolder = DLG1_DlgObj.phoneGapTFGetFSPart(accountId) + accountId + '/' + relativeFilename;
	} else {
		var baseFolder = DLG1_DlgObj.phoneGapTFGetFSPart(accountId) +  relativeFilename;
	}
	return baseFolder;
}
////=========== 'sr87
DLG1_DlgObj.moveSQLiteFilesFromSubfolder = function(accountIn, cbDone, cbError) {
	//called after a manifest has been downloaded to move the SQLite databases to the root of the SQLite folder with 'accountName___' as the db prefix
	//this is done because while iOS can open a db named folder/sqlite.db, android can't. so we make folder___sqlite.db
	//get a list of SQLite dbs in the subfolder, then iterate over list calling _moveLow()
	function _moveLow(account,dbName,array, cbDone) {
		//var _onMoveSuccess = function() { alert('ok'); + alert(JSON.stringify(array)); };
		var _onMoveSuccess = cbDone;
		var _error = function(e) { alert('move failed');};
		var _srcPath = DLG1_DlgObj.getSQLiteFolder(1) + account + '/' + dbName;
		var _destinationDirPath = DLG1_DlgObj.getSQLiteFolder(1);;
		var _destinationName = account + '___' + dbName;
		DLG1_DlgObj.phoneGapMoveFileURL(_srcPath, _destinationDirPath, _destinationName, _onMoveSuccess, _error);
	}
	//make a closure that captures the accountIn name
	var _makeOK = function(accountIn,cbDone,cbError) {
		var account = accountIn;
		var _ok = function(filelist) {
			var _arr = []
			for(var i = 0; i < filelist.length; i++) {
				if(filelist[i].indexOf(account + '/') == 0) {
					var n = filelist[i];
					n = n.split('/')
					var acc = n[0];
					var dbName = n[1];
					_arr.push({account: acc, dbName: dbName, completed: 0});
				}
			}
			//alert(' now do _moveLow for ' + _arr.length + ' files');
			if (_arr.length == 0) {
				cbDone.call();
			}
			var count = 0;
			for(var i = 0; i < _arr.length; i++) {
				var _okmc = function(ii) {
					var arr = _arr;
					var _ok = function() {
						_arr[ii].completed = 1;
						var _done = 0;
						for(var j = 0; j < arr.length; j++) {
							_done = _done + arr[j].completed;
							if(_done == arr.length) {
								//alert('done: ' + _done + ' account: ' + accountIn + ' typeof cbDone: ' + typeof cbDone);
								//alert(cbDone.toString())
								cbDone.call();
							}
						}
					};
					return _ok;
				}
				var _okm = _okmc(i);
				_moveLow(_arr[i].account,_arr[i].dbName,_arr,_okm)
			}
		};
		return _ok;
	}
	//var cbx = function() { };
	//alert(1);
	//alert(cbDone.toString());
	var _ok = _makeOK(accountIn,cbDone);
	var _err = function(e) { };
	var _err = _ok; //sr 6-12-2020 on android, if there are no sqlite databases, then the _err function will get called and as a result, the onComplete event was  not firing
	//therefore make the _err() function same as the _ok() function
	//need to specify a blank account because the sqlite unzip creates subfolders at the root level of the sqlite folder and these are the files we want to move
	var account = '';
	DLG1_DlgObj.phoneGapGetSQLiteDatabases(account,_ok,_err);
}
////=======
//
// DLG1_DlgObj.phoneGapDeleteFilesNotInListURL(dirpath, matchRegex, keepList, onCompletion, onError)
//
// dirpath is the file URL of the directory whose contents will be examined (only files).
// matchRegex, if non-null, will need to match file names found for them to be considered for deletion.
// Any file name which is in the array keepList will not be considered even if it matches.
// All remaining files found (those matched and not in keepList) will be deleted.
//
DLG1_DlgObj.phoneGapDeleteFilesNotInListURL = function(dirpath, matchRegex, keepList, onCompletion, onError) {
   if (!DLG1_DlgObj.phoneGapFilesAvailable()) {
      onError();
      return;
   }
   var keepnames = {}; // fill object with all the names as attributes
   for (var j=0; j<keepList.length; j++) {
      keepnames[keepList[j]] = true;
   }
   var filelist = []; // list of files to delete
   var totalDeleted = 0;
   var deleteFromFileList = function() { // called repeatedly by itself on successes until all deleted
      if (filelist.length==0) { // no more to delete
         onCompletion(totalDeleted);
         return;
      }
      var todelete = filelist.pop(); // pop one from list and delete it, leaving list shorter
      totalDeleted += 1;
      todelete.remove(deleteFromFileList, onError);
   };
   var onResolvedURL =
      function(fsEntry) {
         var dirReader = fsEntry.createReader();
         var readEntriesFunction =
            function() { // function to recurse to call repeatedly after each completion until no result
               dirReader.readEntries( // start an async reading of entries
                  function(entries) { // more entries read, or done
                     if (!entries || entries.length==0) {
                        deleteFromFileList(); // got all - now start deleting them
                        return;
                     }
                     var name;
                     for (var i=0; i<entries.length; i++) {
                        name = entries[i].name;
                        if (!matchRegex || name.match(matchRegex)) { // must match regex
                           if (!keepnames[name]) { // and not be on keep list
                              filelist.push(entries[i]); // add one to delete to list
                           }
                        }
                     }
                     readEntriesFunction(); // recurse to call dirReader.readEntries again
                  },
                  onError);
               };
         readEntriesFunction(); // do first reading
      };
   window.resolveLocalFileSystemURL(dirpath, onResolvedURL, onError);
}
DLG1_DlgObj.phoneGapGetVideoFromLibrary = function(ops) {
	if(typeof ops.onBeforeCaptureJavascript != 'undefined') {
		if(ops.onBeforeCaptureJavascript.constructor == Function) {
			var result = ops.onBeforeCaptureJavascript.call();
			if(typeof result !='undefined' && !result) return false;
		}
	}
	var _options = ops
	var getVideoWithPromises = function() {
		return new Promise(function (returnResolve, returnReject) {
		// here are all the callbacks as promises
		new Promise(function (resolve, reject) {
			// call camera | photo library | videos only
			var options = {
				destinationType: Camera.DestinationType.FILE_URI,
				sourceType: Camera.PictureSourceType.PHOTOLIBRARY,
				mediaType: Camera.MediaType.VIDEO
			};
			navigator.camera.getPicture(resolve, reject, options);
		}).then(function(filePath) {
			console.log('First promise returned filepath: '+filePath);
			//Android does not return prefix so append
			var prefix = 'file://'
			filePath=filePath.includes(prefix)?filePath:prefix+filePath;
			return new Promise(function(resolve, reject) {
					window.resolveLocalFileSystemURL(filePath, resolve, reject);
			});
		}).then(function (videoFileEntry) {
			console.log('Second promise returned videoFileEntry: '+videoFileEntry);
			returnResolve(videoFileEntry)
		});
	});
}
	var getVideo = function() {
		getVideoWithPromises().then(function (videoFileName) {
			console.log('Final promise completed.');
			var vUrl = videoFileName.toURL();
			DLG1_DlgObj._thisVideo = [vUrl];
			DLG1_DlgObj.setValue('vp',vUrl);
			console.log('Local Video File: '+vUrl);
			var e2 = {};
			e2.fileSystemURL = vUrl;
			_options.onCaptureJavascript.call(this,e2);
		}, function(err) {
			console.log('Error: ' + err);
			alert('Error: ' + err);
		});
	};
	getVideo();
}
DLG1_DlgObj.phoneGapOpenFileWithNativeViewer = function(objIn,_onSuccess,_onError) {
	var _ts = function(txt) { //add trailing slash
 		if(txt[txt.length-1] == '/') return txt;
		return txt + '/';
	}
	if(typeof objIn.targetFolder == 'undefined') objIn.targetFolder = '';
	objIn.targetFolder = _ts(objIn.targetFolder);
	objIn.sourceFolder = _ts(objIn.sourceFolder);
	objIn.flagMustDownload = typeof objIn.flagMustDownload != 'undefined' ? objIn.flagMustDownload: false;
	//set up obj variables from the passed in object (objIn);
	var obj = {};
	obj.__tempFolderDirName = '__AATEMPFILES/';
	if(objIn.flagMustDownload == false) { //local file
		obj.__fileName = objIn.sourceFileName;
	} else {//remote file
		var __url = objIn.sourceFileName;
		obj.__url = __url;
		var __forceDownloadIfFileExists = true;
		var __showProgress = objIn.options.showProgress;
		var __downloadOptions = objIn.options;
		//alert('__url: ' + __url);
		obj.__fileName = A5.parseFilename(objIn.sourceFileName).name; ''  //get the short filename from the URL
	}
	obj.__sourceFileSystemPart = objIn.sourceFileSystem;
	obj.__sourceFolder = objIn.sourceFolder;
	obj.flagMustDownload = objIn.flagMustDownload
	obj.options = objIn;
	//end set up obj variables
	DLG1_DlgObj._phoneGapOpenNativeLow(obj,_onSuccess,_onError)
}
DLG1_DlgObj._phoneGapOpenNativeLow = function(obj,_onSuccess,_onError) {
	try {
	//cordova.plugins.fileOpener2
		var _open = cordova.plugins.disusered.open;
	} catch(e) {
		alert("'cordova-open' plugin not loaded.");
		return false;
	}
	if(obj.__fileName.indexOf('http:') == -1 && obj.__fileName.indexOf('https:') == -1)  {
		var o = A5.parseFilename(obj.__fileName);
		obj.__fileNameFull = obj.__fileName;
		obj.__fileName = o.name;
		if(o.path != '') {
			obj.__sourceFolder = obj.__sourceFolder + o.path + '/';
		}
	}
	var __targetFileName = obj.options.targetFileName;
	var __tempFolderDirName = obj.__tempFolderDirName; //temp dir where files are copied so that they can be opened
	var __fileName = obj.__fileName;
	var __srcFileName = __fileName;
	var __srcFileNameFull = obj.__fileNameFull
	if(typeof __targetFileName != 'undefined') {
		__fileName = __targetFileName;
	} else {
		__targetFileName = '';
	}
	var __sourceFileSystemPart = obj.__sourceFileSystemPart; //dir part where local file exists were where remote file will be downloaded
	var __sourceFolder = obj.__sourceFolder; //dir folder where local file exists or where remote file will be downloaded
	var __url = obj.__url;  //if file is remote, the remote url for the file
	//obj.flagMustDownload - true/false indicates if file is local or remote
	//clear out the temp folder by deleting it/////////////////////////////////////
	var _deleteTemp = function(cb) {
		var _onRemoveSuccess = function() {
			if(A5.log) A5.log('Temp dir was removed.');
			cb.next();
		};
		var _error = function(e) {
			if(A5.log) A5.log('Temp dir was not removed. Not critical, so continue.');
			cb.next();
		};
		var _baseURI = DLG1_DlgObj.phoneGapGetLocalDirURL('temp');;
		var _dirName = __tempFolderDirName;;
		var _dirPath = _baseURI + _dirName;
		DLG1_DlgObj.phoneGapRemoveDirectoryRecurseURL(_dirPath, _onRemoveSuccess, _error);
	}
	//recreate the temp folder////////////////////////////////////////////////////
	var _createTemp = function(cb) {
		var _onSuccess = function() {
			if(A5.log) A5.log('Temp dir was created');
			cb.next();
		};
		var _error = function(e) {
			if(A5.log) A5.log('Temp dir was not created. Critical error, so stop.');
			_onError(e);
			cb.stop();
		};
		var _baseURI = DLG1_DlgObj.phoneGapGetLocalDirURL('temp');;
		var _dirStructure = __tempFolderDirName;;
		DLG1_DlgObj.phoneGapEnsureDirPathURL(_baseURI, _dirStructure, _onSuccess, _error);
	}
	//copy the source file to the temp folder ////////////////////////////////////////////
	var _copyToTemp = function(cb) {
		var _onCopySuccess = function() {
			if(A5.log) A5.log('File was copied');
			cb.next()
		};
		var _error = function(e) {
			if(A5.log) A5.log('File was not copied. Critical error, so stop.');
			_onError(e);
			cb.stop();
		};
		if(__sourceFileSystemPart.indexOf('manifest:') == -1 ) {
			var _srcPath = DLG1_DlgObj.phoneGapGetLocalDirURL(__sourceFileSystemPart) + __sourceFolder +  __srcFileName;
		} else {
			var manifestFolder = __sourceFileSystemPart.split(':')[1];
			var _srcPath = DLG1_DlgObj.phoneGapTFGetFSPart(manifestFolder)
			_srcPath = _srcPath + manifestFolder + '/' + __srcFileNameFull;
		}
		var _destinationDirPath = DLG1_DlgObj.phoneGapGetLocalDirURL('temp');;
		var _destinationName = __tempFolderDirName + __fileName;
		if(A5.log) A5.log('Copy file - source: ' + _srcPath)
		if(A5.log) A5.log('Copy file - target: ' + _destinationDirPath + _destinationName);
		if(_srcPath == _destinationDirPath + _destinationName) {
		 	cb.next();
		 } else {
			DLG1_DlgObj.phoneGapCopyFileURL(_srcPath, _destinationDirPath, _destinationName, _onCopySuccess, _error);
		}
	}
	//open the file with the native viewer ////////////////////////////////////////
	var _openFile = function(cb) {
		var _open = cordova.plugins.disusered.open;
		var _filename = DLG1_DlgObj.phoneGapGetLocalDirURL('temp') + __tempFolderDirName + __fileName;
		if(A5.log) A5.log('File to show: ' +_filename);
		_open(_filename,_onSuccess,_onError);
	}
	var _actions = [];
	if(obj.__sourceFileSystemPart != 'temp') {
		_actions.push(_deleteTemp);
		_actions.push(_createTemp);
	}
	_actions.push(_copyToTemp);
	_actions.push(_openFile);
	var forEach = function(actions,andThen,ifError) {
	    var index = 0;
	    var stop = function(err) {
	    	if(ifError) {
	    		ifError(err);
	    	}
	    }
	    var  next = function() {
	        if( index < actions.length ) {
	            var action = actions[index];
	            ++index;
	            action({next:next,stop:stop});
	        } else if(andThen) {
	        	andThen();
	        }
	    };
	    next();
	};
	var _allDone = function() { }
	var _fatal = function() { }
	if(obj.flagMustDownload) { //file download
		var fileToGet = __url;
		var arr = [{filename: fileToGet}];
		var opsIn = obj.options;
		var options = {
			directory: '',
			targetFolder: opsIn.sourceFolder,
			forceDownloadIfFileExists: opsIn.options.forceDownloadIfFileExists,
			showProgress: opsIn.options.showProgress,
			onComplete: function(array) {
				if(A5.log) A5.log('File download complete');
				var msg = JSON.stringify(array,'','\t');
				if(A5.log) A5.log(msg);
				/*
				var _a2 = []
				var _a = [];
				for(var i = 0; i < array.length; i++) {
					_a.push({filename: array[i].localFilename, found: array[i].found, downloaded: array[i].downloaded});
					_a2.push(array[i].localFilename);
				}
				var l = DLG1_DlgObj.getControl('list2');
				l.populate(_a);
				$('div4').innerHTML = 'actual download filename: ' + _a2.join('<br>');
				*/
			if(__targetFileName == '' && (__sourceFileSystemPart == 'temp' || __sourceFileSystemPart == 'public')) {
				if(A5.log) A5.log('Open file in place. No need to copy to a temporary folder');
				var _open = cordova.plugins.disusered.open;
				var _filename = DLG1_DlgObj.phoneGapGetLocalDirURL(__sourceFileSystemPart) + __sourceFolder + __fileName;
				_open(_filename,_onSuccess,_onError);
				return false;
			}
				forEach(_actions,_allDone,_fatal)
			},
			onError: function(array,arrayIndex) { alert('Download error'); _onError();},
			onDeviceOffline: obj.options.options.onDeviceOffline,
			progress: opsIn.options.progress,
			strip: true
		}
		delete options.targetFolder;
		options.filesystem =  opsIn.sourceFileSystem;
		options.directory = opsIn.sourceFolder;
		if(A5.log) A5.log('About to do file download')
		if(A5.log) A5.log(JSON.stringify(arr,'','\t'));
		if(A5.log) A5.log(JSON.stringify(options,'','\t'));
		DLG1_DlgObj.phoneGapFileDownload(arr,options);
		//end file download
	} else {
		//local file
		if(__targetFileName == '' && (__sourceFileSystemPart == 'temp' || __sourceFileSystemPart == 'public')) {
			if(A5.log) A5.log('Open file in place. No need to copy to temporary folder.');
			var _open = cordova.plugins.disusered.open;
			var _filename = DLG1_DlgObj.phoneGapGetLocalDirURL(__sourceFileSystemPart) + __sourceFolder + __fileName;
			_open(_filename,_onSuccess,_onError);
			return false;
		}
		forEach(_actions,_allDone,_fatal);
	}
}
//PROMISE VERSIONS
DLG1_DlgObj.phoneGapEnsureDirPathURLPromise = function(_baseURI,_dirStructure) {
	var promiseF = function(resolve,reject) {
		var _ok = function() {resolve()};
		var _err = function(e) { 	reject(e)	};
		DLG1_DlgObj.phoneGapEnsureDirPathURL(_baseURI, _dirStructure, _ok, _err);
	}
   return new Promise(promiseF);
}
DLG1_DlgObj.phoneGapWriteFileURLPromise = function(filepath, text, append) {
	var promiseF = function(resolve,reject) {
		var _ok = function() { resolve() };
		var _err = function(e) { reject(e) };
		DLG1_DlgObj.phoneGapWriteFileURL(filepath,text,_ok,_err,append)
	}
	return new Promise(promiseF);
}
DLG1_DlgObj.phoneGapReadFileURLPromise = function(filepath, startAt, endAt) {
	var promiseF = function(resolve,reject) {
		var _ok = function(data) { resolve(data) };
		var _err = function(e) { reject(e) };
		DLG1_DlgObj.phoneGapReadFileURL(filepath,_ok,_err,startAt, endAt)
	}
	return new Promise(promiseF);
}
DLG1_DlgObj.phoneGapListFilesRecurseURLPromise = function(rootpath) {
	var promiseF = function(resolve,reject) {
		var _ok = function(data) { resolve(data) };
		var _err = function(e) { reject(e) };
		DLG1_DlgObj.phoneGapListFilesRecurseURL(rootpath, _ok, _err)
	}
	return new Promise(promiseF);
}
DLG1_DlgObj.phoneGapRemoveDirectoryRecurseURLPromise = function(dirpath) {
	var promiseF = function(resolve,reject) {
		var _ok = function() { resolve() };
		var _err = function(e) { reject(e) };
		DLG1_DlgObj.phoneGapRemoveDirectoryRecurseURL(dirpath, _ok, _err)
	}
	return new Promise(promiseF);
}
DLG1_DlgObj.phoneGapFileExistsURLPromise = function(filepath) {
	var promiseF = function(resolve,reject) {
		var _ok = function(flag) { resolve(flag) };
		var _err = function(e) { reject(e) };
		DLG1_DlgObj.phoneGapFileExistsURL(filepath,_ok,_err)
	}
	return new Promise(promiseF);
}
DLG1_DlgObj.phoneGapDeleteFileURLPromise = function(filepath) {
	var promiseF = function(resolve,reject) {
		var _ok = function() { resolve() };
		var _err = function(e) { reject(e) };
		DLG1_DlgObj.phoneGapDeleteFileURL(filepath,_ok,_err)
	}
	return new Promise(promiseF);
}
DLG1_DlgObj.phoneGapDeleteFilesNotInListURLPromise = function(dirpath, matchRegex, keepList) {
	var promiseF = function(resolve,reject) {
		var _ok = function() {resolve() };
		var _err = function(e) { reject(e) };
		DLG1_DlgObj.phoneGapDeleteFilesNotInListURL(dirpath, matchRegex, keepList, _ok, _err);
	}
	return new Promise(promiseF);
}
DLG1_DlgObj.phoneGapCopyFileURLPromise = function(srcpath, destdirpath, destname) {
	var promiseF = function(resolve,reject) {
		var _ok = function() { resolve() };
		var _err = function(e) { reject(e) };
		DLG1_DlgObj.phoneGapCopyFileURL(srcpath,destdirpath,destname,_ok,_err)
	}
	return new Promise(promiseF);
}
DLG1_DlgObj.phoneGapMoveFileURLPromise = function(srcpath, destdirpath, destname) {
	var promiseF = function(resolve,reject) {
		var _ok = function() { resolve() };
		var _err = function(e) { reject(e) };
		DLG1_DlgObj.phoneGapMoveFileURL(srcpath,destdirpath,destname,_ok,_err)
	}
	return new Promise(promiseF);
}
DLG1_DlgObj.phoneGapListFilesURLPromise = function(dirpath, matchRegex) {
	var promiseF = function(resolve,reject) {
		var _ok = function(filelist) { resolve(filelist) };
		var _err = function(e) { reject(e) };
		DLG1_DlgObj.phoneGapListFilesURL(dirpath,matchRegex,_ok,_err)
	}
	return new Promise(promiseF);
}
var obj = {
//startdefinition//
	_evalJS: function(str) {
		if( str.toLowerCase().indexOf('javascript:') == -1) return str;
		var func = str.split(':')[1];
		var _ret = ''
		func = func.replace('()','');
		if( typeof window[func] != 'undefined') {
			_ret = window[func].call();
		} else {
			_ret = '<default>';
		}
		return _ret;
	},
	_deleteDataCacheFiles: function() {
		var _files = arguments[0];
		if(typeof _files == 'undefined') _files = '<all>';
		if(_files.toLowerCase() == '<all>') _files = _files.toLowerCase();
		var _onSuccess = arguments[1];
		var _onFail = arguments[2];
		if(typeof _onSuccess == 'undefined') {
			_onSuccess = function() { alert('File(s) were deleted.');}
		}
		if(typeof _onFail == 'undefined') {
			_onFail = function() { alert('Error - file(s) were not deleted.')}
		}
		var o = this._getDataCacheFilesystemLocation();
		var _baseURI = this.phoneGapGetLocalDirURL(o._fs);;
		var _dirName = o._dir + '/';
		var _dirPath = _baseURI + _dirName;
		var flagAll = false;
		if(_files == '<all>') {
			//delete a directory
			this.phoneGapRemoveDirectoryRecurseURL(_dirPath, _onSuccess, _onFail);
		} else {
			//delete an individual file
			var fn = _files + '.json';
			if(o._strip == false) fn = 'A5SessionFile/' + _files + '.json';
			var _filePath = _dirPath + fn;
			//alert(_filePath);
			this.phoneGapDeleteFileURL(_filePath, _onSuccess,_onFail);
		}
	},
	deleteFromDataCache: function(item,onSuccessIn,onError) {
		var arr = [];
		var flagAll = false
		var flagPG
		if(item.toLowerCase() == '<all>') {
			flagAll = true;
			for(var n in this._dataCache) {
				arr.push(n)
			}
		} else {
			arr.push(item)
		}
		var _dc = this._dataCache
		var _dci = '';
		var nsObj = this._localStorageSettings;
		var ns = nsObj.namespace;
		var key = ''
		var location = '';
		var flagHasFSItems = false;
		var flagEventsHaveFired = false;
		//if item = <all> then loop over all items in arr[] and delete localStorage
		//but do not delete any filesystem items as they will be deleted by making a single call to _dleteDataCacheFiles()
		for(var i = 0; i < arr.length; i++) {
			_dci = _dc[arr[i]];
			if(_dci.persist) {
				if(_dci.persisted || true) {
					location = _dci.persistWhere.toLowerCase();
					if(_dci.persistWhere.toLowerCase() == 'localstorage') {
						var key = ns + '._dataCache_' + arr[i];
						localStorage.removeItem(key)
					} else if(_dci.persistWhere.toLowerCase() == 'indexdb' || _dci.persistWhere.toLowerCase() == 'indexeddb') {
						var key = ns + '._dataCache_' + arr[i];
						this.idbDeleteItem(key);
					} else {
						//filesystem
						flagHasFSItems = true;
						if(!flagAll) this._deleteDataCacheFiles(arr[i],onSuccessIn,onError);
						flagEventsHaveFired = true;
					}
				}
			}
		}
		//done with loop -- we have deleted all localstorage items and filesystem items (as long as item was not <all>
		if(flagAll) {
			var ls = [];
			var idb = [];
			var fs = [];
			for(var n in _dc) {
				if(_dc[n].persistWhere.toLowerCase() == 'filesystem') fs.push(n)
				if(_dc[n].persistWhere.toLowerCase() == 'indexdb' || _dc[n].persistWhere.toLowerCase() == 'indexeddb' ) idb.push(n)
				if(_dc[n].persistWhere.toLowerCase() == 'localstorage') ls.push(n)
			}
			//delete all from file system at once - this will take care of firing the events
			if(fs.length > 0) {
				this._deleteDataCacheFiles(fs.join(','),onSuccessIn,onError);
			} else {
				onSuccessIn.call()
			}
		} else {
			//user selected a single item. if it was a localstorage item, events have not yet fired
			if(!flagEventsHaveFired) if(onSuccessIn) onSuccessIn.call();
		}
    },
	_getDataCacheFilesystemLocation: function() {
		var _dc = this._dataCache;
		var flagUsesFS = false;
		var _fs = '';
		var _dir = '';
		var _strip = '';
		var _dci = ''
		for(var n in _dc) {
			_dci = _dc[n];
			if(typeof _dci.fileSystem != 'undefined') {
				flagUsesFS = true;
				_fs = _dci.fileSystem;
				_dir = _dci.directory;
				_strip = _dci.strip;
				_dir = this._evalJS(_dir);
				_fs = this._evalJS(_fs);
				if(_fs.toLowerCase() == '<default>') _fs = 'persistent';
				if(_dir.toLowerCase() == '<default>') _dir = '__AADataCache';
				_dci.directory = _dir;
				_dci.fileSystem = _fs
			}
		}
		return {flagUsesFileSystem: flagUsesFS, _fs: _fs, _dir: _dir, _strip: _strip};
	},
	listFilesInDataCache: function() {
		var o = this._getDataCacheFilesystemLocation();
		if(o.flagUsesFileSystem == false) {
			alert('Data cache does not persist to the file system');
			return false;
		}
		if(typeof arguments[0] != 'undefined') {
			var _onSuccess = arguments[0];
		} else {
			var _onSuccess = function(filelist) {
				var msg = JSON.stringify(filelist);
				alert('Files found: ' + msg);
			}
		};
		if(typeof arguments[1] != 'undefined') {
			var _error = arguments[1];
		} else {
			var _error = function(e) {
				alert('No files found: ' + JSON.stringify(e));
			};
		};
		var _baseURI = this.phoneGapGetLocalDirURL(o._fs);;
		var _dirName = o._dir
		var _dirPath = _baseURI + _dirName;
		this.phoneGapListFilesRecurseURL(_dirPath, _onSuccess, _error);
	},
	fetchDataCacheFiles: function(filesArray,targetFolder,progObj,callbackId,item,_dlgObj,onRefreshAllComplete) {
 		var fn = false;
 		try {
			var obj = JSON.parse(targetFolder);
			var _fs = obj._fs;
			var _dir = obj._dir;
			var _strip = obj._strip
		}
		catch(err) {
		  var _fs = '<default>';
		  var _dir = '<default>';
		  var _strip = false;
		}
		_dir = this._evalJS(_dir);
		_fs = this._evalJS(_fs);
		var _dc = this._dataCache[item];
		_dc._fs = _fs;
		_dc._dir = _dir;
		_dc._strip = _strip
 		if(typeof progObj.javascript != 'undefined') {
 			fn = progObj.javascript.beforeDownloadBegin;
 		}
 		if(typeof fn == 'function') fn.call(this,{totalFileSize: progObj.totalFileSize, fileCount: progObj.fileCount});
    	if(typeof targetFolder == 'undefined' || targetFolder == '') targetFolder = '__AADataCache';
    	if(typeof progObj == 'undefined') {
    		showProgress = false;
    		progObj = {};
    	}
    	if(typeof progObj.showProgress == 'undefined') progObj.showProgress =  false;;
    	if(typeof progObj.color == 'undefined') progObj.color =  '#9fa1e8';
    	if(typeof progObj.width == 'undefined') progObj.width = '300px;';
    	if(typeof progObj.placeHolder == 'undefined') progObj.showProgress = false;
    	progressElement = progObj.placeHolder;
		var arr = [];
		for(var i = 0; i < filesArray.length; i++) {
			arr.push( {filename: filesArray[i]} );
		}
		//targetFolder: targetFolder,
		var that = this;
		var options = {
			totalFileSize: progObj.totalFileSize,
			filesystem: _fs,
			directory: _dir,
			strip: _strip,
			showProgress: progObj.showProgress,
			forceDownloadIfFileExists: true,
			onComplete: function(array) {
				if(callbackId == '') {
					//alert('all done - call the oncomplete function:' + onRefreshAllComplete);
					var objx = _dlgObj._ajaxCallbackCompleteCode;
					var onSuccess =	objx[onRefreshAllComplete].success;
					onSuccess.call();
					delete objx[callbackId];
				} else {
					//alert('all done fetching data from server -- now call the oncomplete for THE item = callback id:' + callbackId + '\nitemName: ' + item);
					var objx = _dlgObj._ajaxCallbackCompleteCode;
					var onSuccess =	objx[callbackId].success;
					var onError = 	objx[callbackId].fail;
					delete objx[callbackId];
					var o = that._getDataCacheFilesystemLocation();
					var objFS = {_fs: o._fs, _dir: o._dir, _strip: o._strip };
					_dlgObj.getDataCacheItemFromFile(item,onSuccess,onError,objFS);
				}
			},
			onError: function(array,arrayIndex) {
				alert('Error fetching files in data cache');
			},
			progress: {
				color: progObj.color,
				width: progObj.width,
				allowCancel: false,
				progressElement: progressElement
			}
		}
		this.phoneGapFileDownload(arr,options);
    },
    getDataCacheItemFromFile: function(itemName,onSuccess,onError,options) {
    	var fnObj = {};
    	fnObj.fileNameShort = itemName + '.json';
    	fnObj._fs = options._fs;
    	fnObj._dir = options._dir;
    	fnObj._strip = options._strip;
    	this.phoneGapReadFile(fnObj,function(data) {
    		var d1 = new Date();
    		try {
    			data = JSON.parse(data);
	    		var d2 = new Date();
				onSuccess(data);
			} catch(e) {
				alert('Error - Could not JSON.parse data in file');
			}
		},function() { alert('failed'); })
    },
    _updateDataCacheStatus: function(item) {
    	var that = this;
    	///////////
    	function getKeyName(item) {
			var nsObj = that._localStorageSettings;
			var ns = nsObj.namespace;
			var key = ns + '._dataCache_' + item;
			return key
		}
		var keyName = getKeyName(item)
		function getKeys() {
			return DLG1_DlgObj.idbGetKeysPromise()
		}
		async function doWork() {
			var keys = await getKeys()
			var flag;
			if(keys.indexOf(keyName) > -1) {flag = true; }
			else {flag = false;}
			//alert('key was found: ' + flag + ' == persisted? ' +  that._dataCache[item].persisted);
			return flag;
		}
    	return doWork()
    },
    getFromDataCache: function(item,onSuccessIn,onError,filterString,orderString,onOffline,onServerNotAvailable) {
    	var _dlgObj = window[this.dialogId + '_DlgObj'];
    	var _dc = _dlgObj._dataCache[item];
    	if(typeof filterString == 'undefined') filterString = '';
    	if(typeof orderString == 'undefined') orderString = '';
    	var opsIn = arguments[5];
    	//example: {columns: ['City','Country'], distinct: true, distinctColumn: 'Country'}
    	if(typeof opsIn == 'undefined') opsIn = {};
    	//redefine the onSuccess function
    	var opsInJSON = JSON.stringify(opsIn);
    	if(opsInJSON == '{}') opsInJSON = '';
    	if(filterString + orderString + opsInJSON != '') {
    	   	var onSuccess = function(data) {
    	   		data = A5FilterPropertyArray(data,filterString,orderString,opsIn);
    			onSuccessIn(data);
    		}
    	} else  {
    		var onSuccess = onSuccessIn;
    	}
    	if(_dc.persistWhere.toLowerCase() == 'indexdb' || _dc.persistWhere.toLowerCase() == 'indexeddb') {
    		//alert('update cache info for indexdb: ' + item)
    		//debugger;
    		var resultPromise = _dlgObj._updateDataCacheStatus(item)
    		resultPromise.then(flag => {
    			if(flag) {
   					//alert('666a: item is in cache -- ' + flag)
   					_dc.persisted = true;
   					var resultPromise2 = _dlgObj._getFromDataCacheLow(item,onSuccess,onError,onOffline,onServerNotAvailable)
   					resultPromise2.then(data=> {
   						data = JSON.parse(data)
   						onSuccess(data);
   					})
   				} else {
   					//alert('not in cache. make a callback');
   					_dlgObj._getFromDataCacheLow(item,onSuccess,onError,onOffline,onServerNotAvailable)
   				}
   			})
   			return;
   		}
    	var _dlgObj = window[this.dialogId + '_DlgObj'];
    	var _dc = _dlgObj._dataCache[item];
    	if(typeof _dc == 'undefined') {
    		alert('Item not defined: \''+item+'\'');
    		return false;
    	}
    	var cb = function(flag) {
    		//alert('Item \''+item+'\'is in cache: ' + flag + ' ---- ' + _dc.persisted);
    		if(flag) { //in cache
   				_dc.persisted = true;
   			} else { //not in cache
    			_dc.persisted = false;
    		}
    		_dlgObj._getFromDataCacheLow(item,onSuccess,onError,onOffline,onServerNotAvailable)
    	}
    	//alert('PERSISTED: ' + _dc.persisted +'\nPERSIST: ' + _dc.persist + '\nDELAYED: ' + _dc.delayed);
    	if(_dc.delayed == false  ) {
    		//alert('read directly from object because it was not delayed');
    		var data = [];
    		$u.o.assign(data,_dc.data)
    		onSuccess.call(this,data);
    	} else {
    		this._isDataItemInCache(item,cb)
    	}
    },
	_getFromDataCacheLow: function(item,onSuccess,onError,onOffline,onServerNotAvailable) {
		//alert(3)
		//debugger;
		var onSuccessRead = onSuccess
		var _dc = this._dataCache;
		if(typeof _dc == 'undefined') {
			if(typeof onError == 'function') {
				onError.call();
			} else {
				alert('UX does not have a data cache');
			}
			return false;
		}
		_dc = _dc[item];
		if(typeof _dc == 'undefined') {
			if(typeof onError == 'function') {
				onError.call();
			} else {
				alert('Item not found in data cache: ' + item);
			}
			return false;
		}
		flagMakeAjaxCallback = false;
		if(_dc.persist == false) {
			//persist is false
			if(_dc.delayed == false) {
				//data is available in _dataCache (_dc), but we never actually get here because getDataFromCache() handles this
				alert('data is available in _dc - should never get here');
			} else {
				//alert('make a callback - delayed data has not been fetched');
				flagMakeAjaxCallback = true;
			}
		} else {
			//persist is true
			if(_dc.persisted) {
				//alert('data has been persisted into cache - read from cache');
			} else {
				//alert('data has not yet been persisted - make ajax callback');
				flagMakeAjaxCallback = true;
			}
		};
		//alert('flagMakeAjaxCallback:' + flagMakeAjaxCallback)
		if(flagMakeAjaxCallback) {
			//make ajax callback to get delayed non-persistable item or persistable item that has not yet been persisted
			var cbData = '_item=' + item;
			var callbackId = A5.UUID();
			cbData = cbData + '&_callbackId=' + callbackId;
			var pgLoaded = 'no';
			if (typeof window['cordova'] != 'undefined') pgLoaded = 'yes';
			cbData = cbData + '&_phoneGapLoaded=' + pgLoaded;
			var objx = this._ajaxCallbackCompleteCode;
			objx[callbackId] = {};
			objx[callbackId].success = onSuccess;
			objx[callbackId].fail = onError;
			var obj = {};
			if(typeof onError == 'function') {
				obj.errorFunction = function() { onError.call(); };
			} else {
				obj.errorFunction = function() {  };
			}
			obj.onComplete = function() {  };
			if(typeof onOffline == 'function') {
				obj.deviceOfflineFunction = function() { onOffline.call(); };
			} else {
				obj.deviceOfflineFunction = function() {  };
			}
			//alert('Make ajax callback to get: ' + item)
			this._executeEvent('onBeforeClientSideDataCacheRead',{item: item,hasBeenFetched: false ,location: ''});
			//checking if the server is available is much quicker than waiting for an ajax callback error
			if(typeof onServerNotAvailable == 'function') {
				var that = this;
				var _yes = function() {
					that.ajaxCallback('','','__A5SystemRefreshDataCacheItem','',cbData,obj);
				}
				var _no = onServerNotAvailable;
				this.serverIsAvailable(300,_yes,_no);
			} else {
				this.ajaxCallback('','','__A5SystemRefreshDataCacheItem','',cbData,obj);
			}
		} else {
			//alert('read from cache (local storage or file)')
			var persistWhere = _dc.persistWhere;
			//debugger;
			var flagPG = false;
			if(typeof window['cordova'] != 'undefined') flagPG = true;
			if(!flagPG) {
				if(persistWhere == 'FileSystemPreferred') {
					persistWhere = 'LocalStorage';
				} else if (persistWhere  == 'FileSystem') {
					alert('Cannot read item from file system when not running in PhoneGap.');
					onError.call();
					return false;
				}
			}
			if(persistWhere.toLowerCase() == 'indexdb' || persistWhere.toLowerCase() == 'indexeddb') {
				//alert('read from indexdb');
				var nsObj = this._localStorageSettings;
				var ns = nsObj.namespace;
				var key = ns + '._dataCache_' + item;
				//alert('has been fetched - read from local storage');
				this._executeEvent('onBeforeClientSideDataCacheRead',{item: item,hasBeenFetched: true ,location: 'IndexDB'});
				var promise = this.idbGetItemPromise(key);
				return promise;
			} else if(persistWhere == 'LocalStorage') {
				var nsObj = this._localStorageSettings;
				var ns = nsObj.namespace;
				var key = ns + '._dataCache_' + item;
				//alert('has been fetched - read from local storage');
				this._executeEvent('onBeforeClientSideDataCacheRead',{item: item,hasBeenFetched: true ,location: 'localStorage'});
				this._readFromLocalStorage(key,onSuccess,onError);
			} else {
				//read from file system
				//alert('has been fetched - read from file system')
				this._executeEvent('onBeforeClientSideDataCacheRead',{item: item,hasBeenFetched: true ,location: 'fileSystem'});
				var o = this._getDataCacheFilesystemLocation();
				var objFS = {_fs: o._fs, _dir: o._dir, _strip: o._strip };
				this.getDataCacheItemFromFile(item,onSuccess,onError,objFS);
			}
		}
		return 'junk';
	},
	_isDataItemInCache: function(item,cb) {
		var _dc = this._dataCache[item];
		var flagPG = false;
		if(typeof window['cordova'] != 'undefined') flagPG = true;
		if(flagPG) {
			if(_dc.persistWhere == 'LocalStorage' || _dc.persistWhere.toLowerCase() == 'indexdb' || _dc.persistWhere.toLowerCase() == 'indexeddb') flagPG = false;
		}
		if(!flagPG) {
			var nsObj = this._localStorageSettings;
			var ns = nsObj.namespace;
			var key = ns + '._dataCache_' + item;
			var flagWP = this._embeddedMode;
			var ls = this._localStorageSettings;
			if(flagWP && ls.workingPreviewTestingMode.toLowerCase() == 'filesystem') {
				//always set to false for working preview-filesystem-mode mode - forces an ajax callback
				if(_dc) _dc.foundInCache = false;
				cb(false,item);
			} else {
				if(_dc.persistWhere.toLowerCase() == 'indexdb' || _dc.persistWhere.toLowerCase() == 'indexeddb') {
					//alert('check if key exists: ' + key)
					var ok = function(k) { console.log(k); if(k.indexOf(key) > -1) { console.log('key was found');cb(true,item) ; }};
					var error = function() { alert('could not get the keys')};
					this.idbGetKeys(ok,error);
				} else {
					var indx = -1;
					for ( var i = 0, len = localStorage.length; i < len; ++i ) {
						if(localStorage.key(i) == key) {
							indx = i;
							break;
						}
					}
				}
				var flagFound = false;
				if(indx > -1) flagFound = true;
				//alert('2 '  + ' found: ' + flagFound)
				if(_dc) _dc.foundInCache = flagFound;
				cb(flagFound,item)
			}
		} else {
			//phonegap
			var _fs = 'persistent';
			var _dir = '__AADataCache';
			if(typeof _dc.fileSystem != 'undefined') _fs = _dc.fileSystem;
			if(typeof _dc.directory != 'undefined') _dir = _dc.directory;
			if(_fs == '<default>') _fs = 'persistent';
			if(_dir == '<default>') _dir = '__AADataCache';
			 var _onSuccess = function(filelist) {
				var msg = JSON.stringify(filelist);
				var i = filelist.indexOf(item + '.json');
				if(i < 0) i = filelist.indexOf('A5SessionFile/' + item  + '.json');
				if(i >=0) {
					//alert('found in cache - fetch from disk');
					if(_dc) _dc.foundInCache = true;
					cb(true,item);
				} else {
					//alert('cache files found, but this file not found - fetch from server');
					if(_dc) _dc.foundInCache = false;
					cb(false,item);
				}
			};
			var _error = function(e) {
				//no files in cache
				//alert('no files in cache - fetch from server');
				if(_dc) _dc.foundInCache = false;
				cb(false,item);
			};
			var _baseURI = this.phoneGapGetLocalDirURL(_fs);;
			var _dirName = _dir + '/';
			var _dirPath = _baseURI + _dirName;
			this.phoneGapListFilesRecurseURL(_dirPath, _onSuccess, _error);
		}
	},
	_fetchItemsNotInCache: function(items,onComplete) {
		//fetches any delayed items that have not yet been fetched
		var _dlgObj = window[this.dialogId + '_DlgObj'];
		items = items.split(',');
		var arr = [];
		for(var i = 0; i < items.length; i++) {
			arr.push({item: items[i], found: null});
		}
		var itemName = '';
		var ix = '';
		for(var i = 0; i < arr.length; i++) {
			itemName = arr[i].item;
			function _cb(flag,item) {
				ix = -1;
				for(var i2 = 0; i2 < arr.length; i2++) {
					if(arr[i2].item == item) {
						arr[i2].found = flag;
						break;
					}
				}
				var flagAllDone = true;
				for(var i2 = 0; i2 < arr.length; i2++) {
					if(arr[i2].found == null) {
						flagAllDone = false;
						break;
					}
				}
				if(flagAllDone) {
					var itemsToRefresh = [];
					for(var i2 = 0; i2 < arr.length; i2++) {
						if(!arr[i2].found) {
							if(typeof _dlgObj._dataCache[arr[i2].item] != 'undefined') {
								itemsToRefresh.push(arr[i2].item); //don't try to refresh non-existent items
							}
						}
					}
					//alert('items to fetch: ' + JSON.stringify(itemsToRefresh));
					if(itemsToRefresh.length == 0) {
						onComplete.call();
					} else {
						_dlgObj.refreshDataCacheItem(itemsToRefresh.join(','),onComplete)
					}
				}
			}
			_dlgObj._isDataItemInCache(itemName,_cb);
		}
	},
	_removeUndefinedItems: function(items) {
		items = items.split(',');
		var arr = [];
		var obj = '';
		for(var i = 0; i < items.length; i++) {
			obj = this._dataCache[items[i]];
			if(typeof obj != 'undefined') arr.push(items[i]);
		}
		return arr.join(',');
	},
	readDataCacheItems: function(items,onComplete) {
		//read multiple items at once, then call onComplete
		items = this._removeUndefinedItems(items);
		var _dlgObj = window[this.dialogId + '_DlgObj'];
		var _cb = function() {
			_dlgObj.readDataCacheItems_low(items,onComplete);
		}
		//first make sure all items are in the cache
		_dlgObj._fetchItemsNotInCache(items,_cb);
	},
	readDataCacheItems_low: function(items,onComplete) {
		var _dlgObj = window[this.dialogId + '_DlgObj'];
		var objData = {};
		var arr = [];
		items = items.split(',');
		for(var i = 0; i < items.length; i++) {
			arr.push({item: items[i], data: null, complete: null});
		}
		var _onFail = function() { 	};
		var _filter = '';
		var _order = '';
		var itemName = '';
		this.__dataItemRead = function(data,itemName) {
			var ix = -1;
			for(var i = 0; i < arr.length; i++) {
				if(arr[i].item == itemName) {
					arr[i].complete = true;
					objData[itemName] = data;
				}
			}
			var flagAllDone = true;
			for(var i = 0; i < arr.length; i++) {
				if(arr[i].complete == null) {
					flagAllDone = false;
					break;
				}
			}
			if(flagAllDone) {
				onComplete.call(this,objData);
				delete arr;
				delete objData;
			}
		}
		for(var i = 0; i < arr.length; i++) {
			itemName = arr[i].item;
			var functionString = 'window[\''+this.dialogId + '_DlgObj'+'\'].__dataItemRead(data,\'' +itemName+'\');'
			var _onSuccess = Function('data',functionString);
			_dlgObj.getFromDataCache(arr[i].item,_onSuccess,'','','');
		}
	},
	_runGetDataCallback: function(cbid,item,dataPassedIn) {
		var objx = this._ajaxCallbackCompleteCode;
		if(typeof objx == 'undefined') return false;
		var fn = objx[cbid];
		if(typeof fn == 'undefined') return false;
		var _dc = this._dataCache[item];
		if(typeof _dc == 'undefined') return false;
		if(_dc.hasError == false) type = 'success';
		else type = 'fail';
		if(type == 'success') {
			fn = fn.success;
		} else {
			fn = fn.fail;
		}
		if(typeof dataPassedIn == 'undefined') {
			var data = this._dataCache[item].data;
			var d2 = [];
			$u.o.assign(d2,data);
			fn.call(this,d2);
		} else {
			fn.call(this,dataPassedIn);
		}
		delete objx[cbid]; //delete from stack
	},
	refreshDataCacheItem: function(item) {
		var cbData = '_item=' + item;
		var pgLoaded = 'no';
		if (typeof window['cordova'] != 'undefined') pgLoaded = 'yes';
		cbData = cbData + '&_phoneGapLoaded=' + pgLoaded;
		var obj = {};
		obj.errorFunction = function() {  };
		obj.onComplete = function() { };
		obj.deviceOfflineFunction = function() {   };
		var onComplete = arguments[1];
		if(typeof onComplete == 'function') {
			var guid = A5.UUID();
			var objx = this._ajaxCallbackCompleteCode;
			objx[guid] = {}
			objx[guid].success = onComplete;
			cbData = cbData + '&_onCompleteDataItemRefresh=' + guid;
		}
		this.ajaxCallback('','','__A5SystemRefreshDataCacheItem','',cbData,obj);
	},
	addDataItemToLocalStorage: function(item,data, callbackId) {
		var nsObj = this._localStorageSettings;
		var ns = nsObj.namespace;
		//alert('add item to cache: ' + item + ' namespace: ' + ns);
		var key = ns + '._dataCache_' + item;
		var flag = this._persistToLocalStorageLow(key,JSON.stringify(data));
		var _dc = this._dataCache[item];
		if(flag == false) {
			var fn = _dc.persistToLocalStorageFailed;
			fn.call();
		} else {
			if(callbackId != '') {
				this._runGetDataCallback(callbackId,item,data);
				delete data;
			}
		}
	},
	addDataItemToIndexDB: function(item,data, callbackId) {
		var nsObj = this._localStorageSettings;
		var ns = nsObj.namespace;
		var key = ns + '._dataCache_' + item;
		var that = this;
		var onSuccess = function() {
			var _dc = that._dataCache[item];
			flag = true;
			if(flag == false) {
				var fn = _dc.persistToLocalStorageFailed;
				fn.call();
			} else {
				if(callbackId != '') {
					this._runGetDataCallback(callbackId,item,data);
					delete data;
				}
			}
		};
		var onError = function() { alert('fail')}
		this.idbSetItem(key,JSON.stringify(data),onSuccess,onError);
	}
//enddefinition//
}
$u.o.assign(DLG1_DlgObj,obj)
;
/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.localforage=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a){"use strict";function c(){k=!0;for(var a,b,c=l.length;c;){for(b=l,l=[],a=-1;++a<c;)b[a]();c=l.length}k=!1}function d(a){1!==l.push(a)||k||e()}var e,f=a.MutationObserver||a.WebKitMutationObserver;if(f){var g=0,h=new f(c),i=a.document.createTextNode("");h.observe(i,{characterData:!0}),e=function(){i.data=g=++g%2}}else if(a.setImmediate||void 0===a.MessageChannel)e="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var b=a.document.createElement("script");b.onreadystatechange=function(){c(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},a.document.documentElement.appendChild(b)}:function(){setTimeout(c,0)};else{var j=new a.MessageChannel;j.port1.onmessage=c,e=function(){j.port2.postMessage(0)}}var k,l=[];b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){"use strict";function d(){}function e(a){if("function"!=typeof a)throw new TypeError("resolver must be a function");this.state=s,this.queue=[],this.outcome=void 0,a!==d&&i(this,a)}function f(a,b,c){this.promise=a,"function"==typeof b&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),"function"==typeof c&&(this.onRejected=c,this.callRejected=this.otherCallRejected)}function g(a,b,c){o(function(){var d;try{d=b(c)}catch(b){return p.reject(a,b)}d===a?p.reject(a,new TypeError("Cannot resolve promise with itself")):p.resolve(a,d)})}function h(a){var b=a&&a.then;if(a&&("object"==typeof a||"function"==typeof a)&&"function"==typeof b)return function(){b.apply(a,arguments)}}function i(a,b){function c(b){f||(f=!0,p.reject(a,b))}function d(b){f||(f=!0,p.resolve(a,b))}function e(){b(d,c)}var f=!1,g=j(e);"error"===g.status&&c(g.value)}function j(a,b){var c={};try{c.value=a(b),c.status="success"}catch(a){c.status="error",c.value=a}return c}function k(a){return a instanceof this?a:p.resolve(new this(d),a)}function l(a){var b=new this(d);return p.reject(b,a)}function m(a){function b(a,b){function d(a){g[b]=a,++h!==e||f||(f=!0,p.resolve(j,g))}c.resolve(a).then(d,function(a){f||(f=!0,p.reject(j,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=new Array(e),h=0,i=-1,j=new this(d);++i<e;)b(a[i],i);return j}function n(a){function b(a){c.resolve(a).then(function(a){f||(f=!0,p.resolve(h,a))},function(a){f||(f=!0,p.reject(h,a))})}var c=this;if("[object Array]"!==Object.prototype.toString.call(a))return this.reject(new TypeError("must be an array"));var e=a.length,f=!1;if(!e)return this.resolve([]);for(var g=-1,h=new this(d);++g<e;)b(a[g]);return h}var o=a(1),p={},q=["REJECTED"],r=["FULFILLED"],s=["PENDING"];b.exports=e,e.prototype.catch=function(a){return this.then(null,a)},e.prototype.then=function(a,b){if("function"!=typeof a&&this.state===r||"function"!=typeof b&&this.state===q)return this;var c=new this.constructor(d);if(this.state!==s){g(c,this.state===r?a:b,this.outcome)}else this.queue.push(new f(c,a,b));return c},f.prototype.callFulfilled=function(a){p.resolve(this.promise,a)},f.prototype.otherCallFulfilled=function(a){g(this.promise,this.onFulfilled,a)},f.prototype.callRejected=function(a){p.reject(this.promise,a)},f.prototype.otherCallRejected=function(a){g(this.promise,this.onRejected,a)},p.resolve=function(a,b){var c=j(h,b);if("error"===c.status)return p.reject(a,c.value);var d=c.value;if(d)i(a,d);else{a.state=r,a.outcome=b;for(var e=-1,f=a.queue.length;++e<f;)a.queue[e].callFulfilled(b)}return a},p.reject=function(a,b){a.state=q,a.outcome=b;for(var c=-1,d=a.queue.length;++c<d;)a.queue[c].callRejected(b);return a},e.resolve=k,e.reject=l,e.all=m,e.race=n},{1:1}],3:[function(a,b,c){(function(b){"use strict";"function"!=typeof b.Promise&&(b.Promise=a(2))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{2:2}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(){try{if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!=typeof mozIndexedDB)return mozIndexedDB;if("undefined"!=typeof OIndexedDB)return OIndexedDB;if("undefined"!=typeof msIndexedDB)return msIndexedDB}catch(a){return}}function f(){try{if(!ua||!ua.open)return!1;var a="undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),b="function"==typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!a||b)&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange}catch(a){return!1}}function g(a,b){a=a||[],b=b||{};try{return new Blob(a,b)}catch(f){if("TypeError"!==f.name)throw f;for(var c="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,d=new c,e=0;e<a.length;e+=1)d.append(a[e]);return d.getBlob(b.type)}}function h(a,b){b&&a.then(function(a){b(null,a)},function(a){b(a)})}function i(a,b,c){"function"==typeof b&&a.then(b),"function"==typeof c&&a.catch(c)}function j(a){return"string"!=typeof a&&(console.warn(a+" used as a key, but it is not a string."),a=String(a)),a}function k(){if(arguments.length&&"function"==typeof arguments[arguments.length-1])return arguments[arguments.length-1]}function l(a){for(var b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c),e=0;e<b;e++)d[e]=a.charCodeAt(e);return c}function m(a){return new va(function(b){var c=a.transaction(wa,Ba),d=g([""]);c.objectStore(wa).put(d,"key"),c.onabort=function(a){a.preventDefault(),a.stopPropagation(),b(!1)},c.oncomplete=function(){var a=navigator.userAgent.match(/Chrome\/(\d+)/),c=navigator.userAgent.match(/Edge\//);b(c||!a||parseInt(a[1],10)>=43)}}).catch(function(){return!1})}function n(a){return"boolean"==typeof xa?va.resolve(xa):m(a).then(function(a){return xa=a})}function o(a){var b=ya[a.name],c={};c.promise=new va(function(a,b){c.resolve=a,c.reject=b}),b.deferredOperations.push(c),b.dbReady?b.dbReady=b.dbReady.then(function(){return c.promise}):b.dbReady=c.promise}function p(a){var b=ya[a.name],c=b.deferredOperations.pop();if(c)return c.resolve(),c.promise}function q(a,b){var c=ya[a.name],d=c.deferredOperations.pop();if(d)return d.reject(b),d.promise}function r(a,b){return new va(function(c,d){if(ya[a.name]=ya[a.name]||B(),a.db){if(!b)return c(a.db);o(a),a.db.close()}var e=[a.name];b&&e.push(a.version);var f=ua.open.apply(ua,e);b&&(f.onupgradeneeded=function(b){var c=f.result;try{c.createObjectStore(a.storeName),b.oldVersion<=1&&c.createObjectStore(wa)}catch(c){if("ConstraintError"!==c.name)throw c;console.warn('The database "'+a.name+'" has been upgraded from version '+b.oldVersion+" to version "+b.newVersion+', but the storage "'+a.storeName+'" already exists.')}}),f.onerror=function(a){a.preventDefault(),d(f.error)},f.onsuccess=function(){var b=f.result;b.onversionchange=function(a){a.target.close()},c(b),p(a)}})}function s(a){return r(a,!1)}function t(a){return r(a,!0)}function u(a,b){if(!a.db)return!0;var c=!a.db.objectStoreNames.contains(a.storeName),d=a.version<a.db.version,e=a.version>a.db.version;if(d&&(a.version!==b&&console.warn('The database "'+a.name+"\" can't be downgraded from version "+a.db.version+" to version "+a.version+"."),a.version=a.db.version),e||c){if(c){var f=a.db.version+1;f>a.version&&(a.version=f)}return!0}return!1}function v(a){return new va(function(b,c){var d=new FileReader;d.onerror=c,d.onloadend=function(c){var d=btoa(c.target.result||"");b({__local_forage_encoded_blob:!0,data:d,type:a.type})},d.readAsBinaryString(a)})}function w(a){return g([l(atob(a.data))],{type:a.type})}function x(a){return a&&a.__local_forage_encoded_blob}function y(a){var b=this,c=b._initReady().then(function(){var a=ya[b._dbInfo.name];if(a&&a.dbReady)return a.dbReady});return i(c,a,a),c}function z(a){o(a);for(var b=ya[a.name],c=b.forages,d=0;d<c.length;d++){var e=c[d];e._dbInfo.db&&(e._dbInfo.db.close(),e._dbInfo.db=null)}return a.db=null,s(a).then(function(b){return a.db=b,u(a)?t(a):b}).then(function(d){a.db=b.db=d;for(var e=0;e<c.length;e++)c[e]._dbInfo.db=d}).catch(function(b){throw q(a,b),b})}function A(a,b,c,d){void 0===d&&(d=1);try{var e=a.db.transaction(a.storeName,b);c(null,e)}catch(e){if(d>0&&(!a.db||"InvalidStateError"===e.name||"NotFoundError"===e.name))return va.resolve().then(function(){if(!a.db||"NotFoundError"===e.name&&!a.db.objectStoreNames.contains(a.storeName)&&a.version<=a.db.version)return a.db&&(a.version=a.db.version+1),t(a)}).then(function(){return z(a).then(function(){A(a,b,c,d-1)})}).catch(c);c(e)}}function B(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function C(a){function b(){return va.resolve()}var c=this,d={db:null};if(a)for(var e in a)d[e]=a[e];var f=ya[d.name];f||(f=B(),ya[d.name]=f),f.forages.push(c),c._initReady||(c._initReady=c.ready,c.ready=y);for(var g=[],h=0;h<f.forages.length;h++){var i=f.forages[h];i!==c&&g.push(i._initReady().catch(b))}var j=f.forages.slice(0);return va.all(g).then(function(){return d.db=f.db,s(d)}).then(function(a){return d.db=a,u(d,c._defaultConfig.version)?t(d):a}).then(function(a){d.db=f.db=a,c._dbInfo=d;for(var b=0;b<j.length;b++){var e=j[b];e!==c&&(e._dbInfo.db=d.db,e._dbInfo.version=d.version)}})}function D(a,b){var c=this;a=j(a);var d=new va(function(b,d){c.ready().then(function(){A(c._dbInfo,Aa,function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=g.get(a);h.onsuccess=function(){var a=h.result;void 0===a&&(a=null),x(a)&&(a=w(a)),b(a)},h.onerror=function(){d(h.error)}}catch(a){d(a)}})}).catch(d)});return h(d,b),d}function E(a,b){var c=this,d=new va(function(b,d){c.ready().then(function(){A(c._dbInfo,Aa,function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=g.openCursor(),i=1;h.onsuccess=function(){var c=h.result;if(c){var d=c.value;x(d)&&(d=w(d));var e=a(d,c.key,i++);void 0!==e?b(e):c.continue()}else b()},h.onerror=function(){d(h.error)}}catch(a){d(a)}})}).catch(d)});return h(d,b),d}function F(a,b,c){var d=this;a=j(a);var e=new va(function(c,e){var f;d.ready().then(function(){return f=d._dbInfo,"[object Blob]"===za.call(b)?n(f.db).then(function(a){return a?b:v(b)}):b}).then(function(b){A(d._dbInfo,Ba,function(f,g){if(f)return e(f);try{var h=g.objectStore(d._dbInfo.storeName);null===b&&(b=void 0);var i=h.put(b,a);g.oncomplete=function(){void 0===b&&(b=null),c(b)},g.onabort=g.onerror=function(){var a=i.error?i.error:i.transaction.error;e(a)}}catch(a){e(a)}})}).catch(e)});return h(e,c),e}function G(a,b){var c=this;a=j(a);var d=new va(function(b,d){c.ready().then(function(){A(c._dbInfo,Ba,function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=g.delete(a);f.oncomplete=function(){b()},f.onerror=function(){d(h.error)},f.onabort=function(){var a=h.error?h.error:h.transaction.error;d(a)}}catch(a){d(a)}})}).catch(d)});return h(d,b),d}function H(a){var b=this,c=new va(function(a,c){b.ready().then(function(){A(b._dbInfo,Ba,function(d,e){if(d)return c(d);try{var f=e.objectStore(b._dbInfo.storeName),g=f.clear();e.oncomplete=function(){a()},e.onabort=e.onerror=function(){var a=g.error?g.error:g.transaction.error;c(a)}}catch(a){c(a)}})}).catch(c)});return h(c,a),c}function I(a){var b=this,c=new va(function(a,c){b.ready().then(function(){A(b._dbInfo,Aa,function(d,e){if(d)return c(d);try{var f=e.objectStore(b._dbInfo.storeName),g=f.count();g.onsuccess=function(){a(g.result)},g.onerror=function(){c(g.error)}}catch(a){c(a)}})}).catch(c)});return h(c,a),c}function J(a,b){var c=this,d=new va(function(b,d){if(a<0)return void b(null);c.ready().then(function(){A(c._dbInfo,Aa,function(e,f){if(e)return d(e);try{var g=f.objectStore(c._dbInfo.storeName),h=!1,i=g.openKeyCursor();i.onsuccess=function(){var c=i.result;if(!c)return void b(null);0===a?b(c.key):h?b(c.key):(h=!0,c.advance(a))},i.onerror=function(){d(i.error)}}catch(a){d(a)}})}).catch(d)});return h(d,b),d}function K(a){var b=this,c=new va(function(a,c){b.ready().then(function(){A(b._dbInfo,Aa,function(d,e){if(d)return c(d);try{var f=e.objectStore(b._dbInfo.storeName),g=f.openKeyCursor(),h=[];g.onsuccess=function(){var b=g.result;if(!b)return void a(h);h.push(b.key),b.continue()},g.onerror=function(){c(g.error)}}catch(a){c(a)}})}).catch(c)});return h(c,a),c}function L(a,b){b=k.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{},a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);var d,e=this;if(a.name){var f=a.name===c.name&&e._dbInfo.db,g=f?va.resolve(e._dbInfo.db):s(a).then(function(b){var c=ya[a.name],d=c.forages;c.db=b;for(var e=0;e<d.length;e++)d[e]._dbInfo.db=b;return b});d=a.storeName?g.then(function(b){if(b.objectStoreNames.contains(a.storeName)){var c=b.version+1;o(a);var d=ya[a.name],e=d.forages;b.close();for(var f=0;f<e.length;f++){var g=e[f];g._dbInfo.db=null,g._dbInfo.version=c}return new va(function(b,d){var e=ua.open(a.name,c);e.onerror=function(a){e.result.close(),d(a)},e.onupgradeneeded=function(){e.result.deleteObjectStore(a.storeName)},e.onsuccess=function(){var a=e.result;a.close(),b(a)}}).then(function(a){d.db=a;for(var b=0;b<e.length;b++){var c=e[b];c._dbInfo.db=a,p(c._dbInfo)}}).catch(function(b){throw(q(a,b)||va.resolve()).catch(function(){}),b})}}):g.then(function(b){o(a);var c=ya[a.name],d=c.forages;b.close();for(var e=0;e<d.length;e++){d[e]._dbInfo.db=null}return new va(function(b,c){var d=ua.deleteDatabase(a.name);d.onerror=function(){var a=d.result;a&&a.close(),c(d.error)},d.onblocked=function(){console.warn('dropInstance blocked for database "'+a.name+'" until all open connections are closed')},d.onsuccess=function(){var a=d.result;a&&a.close(),b(a)}}).then(function(a){c.db=a;for(var b=0;b<d.length;b++)p(d[b]._dbInfo)}).catch(function(b){throw(q(a,b)||va.resolve()).catch(function(){}),b})})}else d=va.reject("Invalid arguments");return h(d,b),d}function M(){return"function"==typeof openDatabase}function N(a){var b,c,d,e,f,g=.75*a.length,h=a.length,i=0;"="===a[a.length-1]&&(g--,"="===a[a.length-2]&&g--);var j=new ArrayBuffer(g),k=new Uint8Array(j);for(b=0;b<h;b+=4)c=Da.indexOf(a[b]),d=Da.indexOf(a[b+1]),e=Da.indexOf(a[b+2]),f=Da.indexOf(a[b+3]),k[i++]=c<<2|d>>4,k[i++]=(15&d)<<4|e>>2,k[i++]=(3&e)<<6|63&f;return j}function O(a){var b,c=new Uint8Array(a),d="";for(b=0;b<c.length;b+=3)d+=Da[c[b]>>2],d+=Da[(3&c[b])<<4|c[b+1]>>4],d+=Da[(15&c[b+1])<<2|c[b+2]>>6],d+=Da[63&c[b+2]];return c.length%3==2?d=d.substring(0,d.length-1)+"=":c.length%3==1&&(d=d.substring(0,d.length-2)+"=="),d}function P(a,b){var c="";if(a&&(c=Ua.call(a)),a&&("[object ArrayBuffer]"===c||a.buffer&&"[object ArrayBuffer]"===Ua.call(a.buffer))){var d,e=Ga;a instanceof ArrayBuffer?(d=a,e+=Ia):(d=a.buffer,"[object Int8Array]"===c?e+=Ka:"[object Uint8Array]"===c?e+=La:"[object Uint8ClampedArray]"===c?e+=Ma:"[object Int16Array]"===c?e+=Na:"[object Uint16Array]"===c?e+=Pa:"[object Int32Array]"===c?e+=Oa:"[object Uint32Array]"===c?e+=Qa:"[object Float32Array]"===c?e+=Ra:"[object Float64Array]"===c?e+=Sa:b(new Error("Failed to get type for BinaryArray"))),b(e+O(d))}else if("[object Blob]"===c){var f=new FileReader;f.onload=function(){var c=Ea+a.type+"~"+O(this.result);b(Ga+Ja+c)},f.readAsArrayBuffer(a)}else try{b(JSON.stringify(a))}catch(c){console.error("Couldn't convert value into a JSON string: ",a),b(null,c)}}function Q(a){if(a.substring(0,Ha)!==Ga)return JSON.parse(a);var b,c=a.substring(Ta),d=a.substring(Ha,Ta);if(d===Ja&&Fa.test(c)){var e=c.match(Fa);b=e[1],c=c.substring(e[0].length)}var f=N(c);switch(d){case Ia:return f;case Ja:return g([f],{type:b});case Ka:return new Int8Array(f);case La:return new Uint8Array(f);case Ma:return new Uint8ClampedArray(f);case Na:return new Int16Array(f);case Pa:return new Uint16Array(f);case Oa:return new Int32Array(f);case Qa:return new Uint32Array(f);case Ra:return new Float32Array(f);case Sa:return new Float64Array(f);default:throw new Error("Unkown type: "+d)}}function R(a,b,c,d){a.executeSql("CREATE TABLE IF NOT EXISTS "+b.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],c,d)}function S(a){var b=this,c={db:null};if(a)for(var d in a)c[d]="string"!=typeof a[d]?a[d].toString():a[d];var e=new va(function(a,d){try{c.db=openDatabase(c.name,String(c.version),c.description,c.size)}catch(a){return d(a)}c.db.transaction(function(e){R(e,c,function(){b._dbInfo=c,a()},function(a,b){d(b)})},d)});return c.serializer=Va,e}function T(a,b,c,d,e,f){a.executeSql(c,d,e,function(a,g){g.code===g.SYNTAX_ERR?a.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[b.storeName],function(a,h){h.rows.length?f(a,g):R(a,b,function(){a.executeSql(c,d,e,f)},f)},f):f(a,g)},f)}function U(a,b){var c=this;a=j(a);var d=new va(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){T(c,e,"SELECT * FROM "+e.storeName+" WHERE key = ? LIMIT 1",[a],function(a,c){var d=c.rows.length?c.rows.item(0).value:null;d&&(d=e.serializer.deserialize(d)),b(d)},function(a,b){d(b)})})}).catch(d)});return h(d,b),d}function V(a,b){var c=this,d=new va(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){T(c,e,"SELECT * FROM "+e.storeName,[],function(c,d){for(var f=d.rows,g=f.length,h=0;h<g;h++){var i=f.item(h),j=i.value;if(j&&(j=e.serializer.deserialize(j)),void 0!==(j=a(j,i.key,h+1)))return void b(j)}b()},function(a,b){d(b)})})}).catch(d)});return h(d,b),d}function W(a,b,c,d){var e=this;a=j(a);var f=new va(function(f,g){e.ready().then(function(){void 0===b&&(b=null);var h=b,i=e._dbInfo;i.serializer.serialize(b,function(b,j){j?g(j):i.db.transaction(function(c){T(c,i,"INSERT OR REPLACE INTO "+i.storeName+" (key, value) VALUES (?, ?)",[a,b],function(){f(h)},function(a,b){g(b)})},function(b){if(b.code===b.QUOTA_ERR){if(d>0)return void f(W.apply(e,[a,h,c,d-1]));g(b)}})})}).catch(g)});return h(f,c),f}function X(a,b,c){return W.apply(this,[a,b,c,1])}function Y(a,b){var c=this;a=j(a);var d=new va(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){T(c,e,"DELETE FROM "+e.storeName+" WHERE key = ?",[a],function(){b()},function(a,b){d(b)})})}).catch(d)});return h(d,b),d}function Z(a){var b=this,c=new va(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){T(b,d,"DELETE FROM "+d.storeName,[],function(){a()},function(a,b){c(b)})})}).catch(c)});return h(c,a),c}function $(a){var b=this,c=new va(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){T(b,d,"SELECT COUNT(key) as c FROM "+d.storeName,[],function(b,c){var d=c.rows.item(0).c;a(d)},function(a,b){c(b)})})}).catch(c)});return h(c,a),c}function _(a,b){var c=this,d=new va(function(b,d){c.ready().then(function(){var e=c._dbInfo;e.db.transaction(function(c){T(c,e,"SELECT key FROM "+e.storeName+" WHERE id = ? LIMIT 1",[a+1],function(a,c){var d=c.rows.length?c.rows.item(0).key:null;b(d)},function(a,b){d(b)})})}).catch(d)});return h(d,b),d}function aa(a){var b=this,c=new va(function(a,c){b.ready().then(function(){var d=b._dbInfo;d.db.transaction(function(b){T(b,d,"SELECT key FROM "+d.storeName,[],function(b,c){for(var d=[],e=0;e<c.rows.length;e++)d.push(c.rows.item(e).key);a(d)},function(a,b){c(b)})})}).catch(c)});return h(c,a),c}function ba(a){return new va(function(b,c){a.transaction(function(d){d.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(c,d){for(var e=[],f=0;f<d.rows.length;f++)e.push(d.rows.item(f).name);b({db:a,storeNames:e})},function(a,b){c(b)})},function(a){c(a)})})}function ca(a,b){b=k.apply(this,arguments);var c=this.config();a="function"!=typeof a&&a||{},a.name||(a.name=a.name||c.name,a.storeName=a.storeName||c.storeName);var d,e=this;return d=a.name?new va(function(b){var d;d=a.name===c.name?e._dbInfo.db:openDatabase(a.name,"","",0),b(a.storeName?{db:d,storeNames:[a.storeName]}:ba(d))}).then(function(a){return new va(function(b,c){a.db.transaction(function(d){function e(a){return new va(function(b,c){d.executeSql("DROP TABLE IF EXISTS "+a,[],function(){b()},function(a,b){c(b)})})}for(var f=[],g=0,h=a.storeNames.length;g<h;g++)f.push(e(a.storeNames[g]));va.all(f).then(function(){b()}).catch(function(a){c(a)})},function(a){c(a)})})}):va.reject("Invalid arguments"),h(d,b),d}function da(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(a){return!1}}function ea(a,b){var c=a.name+"/";return a.storeName!==b.storeName&&(c+=a.storeName+"/"),c}function fa(){var a="_localforage_support_test";try{return localStorage.setItem(a,!0),localStorage.removeItem(a),!1}catch(a){return!0}}function ga(){return!fa()||localStorage.length>0}function ha(a){var b=this,c={};if(a)for(var d in a)c[d]=a[d];return c.keyPrefix=ea(a,b._defaultConfig),ga()?(b._dbInfo=c,c.serializer=Va,va.resolve()):va.reject()}function ia(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var d=localStorage.key(c);0===d.indexOf(a)&&localStorage.removeItem(d)}});return h(c,a),c}function ja(a,b){var c=this;a=j(a);var d=c.ready().then(function(){var b=c._dbInfo,d=localStorage.getItem(b.keyPrefix+a);return d&&(d=b.serializer.deserialize(d)),d});return h(d,b),d}function ka(a,b){var c=this,d=c.ready().then(function(){for(var b=c._dbInfo,d=b.keyPrefix,e=d.length,f=localStorage.length,g=1,h=0;h<f;h++){var i=localStorage.key(h);if(0===i.indexOf(d)){var j=localStorage.getItem(i);if(j&&(j=b.serializer.deserialize(j)),void 0!==(j=a(j,i.substring(e),g++)))return j}}});return h(d,b),d}function la(a,b){var c=this,d=c.ready().then(function(){var b,d=c._dbInfo;try{b=localStorage.key(a)}catch(a){b=null}return b&&(b=b.substring(d.keyPrefix.length)),b});return h(d,b),d}function ma(a){var b=this,c=b.ready().then(function(){for(var a=b._dbInfo,c=localStorage.length,d=[],e=0;e<c;e++){var f=localStorage.key(e);0===f.indexOf(a.keyPrefix)&&d.push(f.substring(a.keyPrefix.length))}return d});return h(c,a),c}function na(a){var b=this,c=b.keys().then(function(a){return a.length});return h(c,a),c}function oa(a,b){var c=this;a=j(a);var d=c.ready().then(function(){var b=c._dbInfo;localStorage.removeItem(b.keyPrefix+a)});return h(d,b),d}function pa(a,b,c){var d=this;a=j(a);var e=d.ready().then(function(){void 0===b&&(b=null);var c=b;return new va(function(e,f){var g=d._dbInfo;g.serializer.serialize(b,function(b,d){if(d)f(d);else try{localStorage.setItem(g.keyPrefix+a,b),e(c)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||f(a),f(a)}})})});return h(e,c),e}function qa(a,b){if(b=k.apply(this,arguments),a="function"!=typeof a&&a||{},!a.name){var c=this.config();a.name=a.name||c.name,a.storeName=a.storeName||c.storeName}var d,e=this;return d=a.name?new va(function(b){b(a.storeName?ea(a,e._defaultConfig):a.name+"/")}).then(function(a){for(var b=localStorage.length-1;b>=0;b--){var c=localStorage.key(b);0===c.indexOf(a)&&localStorage.removeItem(c)}}):va.reject("Invalid arguments"),h(d,b),d}function ra(a,b){a[b]=function(){var c=arguments;return a.ready().then(function(){return a[b].apply(a,c)})}}function sa(){for(var a=1;a<arguments.length;a++){var b=arguments[a];if(b)for(var c in b)b.hasOwnProperty(c)&&($a(b[c])?arguments[0][c]=b[c].slice():arguments[0][c]=b[c])}return arguments[0]}var ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},ua=e();"undefined"==typeof Promise&&a(3);var va=Promise,wa="local-forage-detect-blob-support",xa=void 0,ya={},za=Object.prototype.toString,Aa="readonly",Ba="readwrite",Ca={_driver:"asyncStorage",_initStorage:C,_support:f(),iterate:E,getItem:D,setItem:F,removeItem:G,clear:H,length:I,key:J,keys:K,dropInstance:L},Da="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ea="~~local_forage_type~",Fa=/^~~local_forage_type~([^~]+)~/,Ga="__lfsc__:",Ha=Ga.length,Ia="arbf",Ja="blob",Ka="si08",La="ui08",Ma="uic8",Na="si16",Oa="si32",Pa="ur16",Qa="ui32",Ra="fl32",Sa="fl64",Ta=Ha+Ia.length,Ua=Object.prototype.toString,Va={serialize:P,deserialize:Q,stringToBuffer:N,bufferToString:O},Wa={_driver:"webSQLStorage",_initStorage:S,_support:M(),iterate:V,getItem:U,setItem:X,removeItem:Y,clear:Z,length:$,key:_,keys:aa,dropInstance:ca},Xa={_driver:"localStorageWrapper",_initStorage:ha,_support:da(),iterate:ka,getItem:ja,setItem:pa,removeItem:oa,clear:ia,length:na,key:la,keys:ma,dropInstance:qa},Ya=function(a,b){return a===b||"number"==typeof a&&"number"==typeof b&&isNaN(a)&&isNaN(b)},Za=function(a,b){for(var c=a.length,d=0;d<c;){if(Ya(a[d],b))return!0;d++}return!1},$a=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},_a={},ab={},bb={INDEXEDDB:Ca,WEBSQL:Wa,LOCALSTORAGE:Xa},cb=[bb.INDEXEDDB._driver,bb.WEBSQL._driver,bb.LOCALSTORAGE._driver],db=["dropInstance"],eb=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(db),fb={description:"",driver:cb.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},gb=function(){function a(b){d(this,a);for(var c in bb)if(bb.hasOwnProperty(c)){var e=bb[c],f=e._driver;this[c]=f,_a[f]||this.defineDriver(e)}this._defaultConfig=sa({},fb),this._config=sa({},this._defaultConfig,b),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return a.prototype.config=function(a){if("object"===(void 0===a?"undefined":ta(a))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var b in a){if("storeName"===b&&(a[b]=a[b].replace(/\W/g,"_")),"version"===b&&"number"!=typeof a[b])return new Error("Database version must be a number.");this._config[b]=a[b]}return!("driver"in a&&a.driver)||this.setDriver(this._config.driver)}return"string"==typeof a?this._config[a]:this._config},a.prototype.defineDriver=function(a,b,c){var d=new va(function(b,c){try{var d=a._driver,e=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!a._driver)return void c(e);for(var f=eb.concat("_initStorage"),g=0,i=f.length;g<i;g++){var j=f[g];if((!Za(db,j)||a[j])&&"function"!=typeof a[j])return void c(e)}(function(){for(var b=function(a){return function(){var b=new Error("Method "+a+" is not implemented by the current driver"),c=va.reject(b);return h(c,arguments[arguments.length-1]),c}},c=0,d=db.length;c<d;c++){var e=db[c];a[e]||(a[e]=b(e))}})();var k=function(c){_a[d]&&console.info("Redefining LocalForage driver: "+d),_a[d]=a,ab[d]=c,b()};"_support"in a?a._support&&"function"==typeof a._support?a._support().then(k,c):k(!!a._support):k(!0)}catch(a){c(a)}});return i(d,b,c),d},a.prototype.driver=function(){return this._driver||null},a.prototype.getDriver=function(a,b,c){var d=_a[a]?va.resolve(_a[a]):va.reject(new Error("Driver not found."));return i(d,b,c),d},a.prototype.getSerializer=function(a){var b=va.resolve(Va);return i(b,a),b},a.prototype.ready=function(a){var b=this,c=b._driverSet.then(function(){return null===b._ready&&(b._ready=b._initDriver()),b._ready});return i(c,a,a),c},a.prototype.setDriver=function(a,b,c){function d(){g._config.driver=g.driver()}function e(a){return g._extend(a),d(),g._ready=g._initStorage(g._config),g._ready}function f(a){return function(){function b(){for(;c<a.length;){var f=a[c];return c++,g._dbInfo=null,g._ready=null,g.getDriver(f).then(e).catch(b)}d();var h=new Error("No available storage method found.");return g._driverSet=va.reject(h),g._driverSet}var c=0;return b()}}var g=this;$a(a)||(a=[a]);var h=this._getSupportedDrivers(a),j=null!==this._driverSet?this._driverSet.catch(function(){return va.resolve()}):va.resolve();return this._driverSet=j.then(function(){var a=h[0];return g._dbInfo=null,g._ready=null,g.getDriver(a).then(function(a){g._driver=a._driver,d(),g._wrapLibraryMethodsWithReady(),g._initDriver=f(h)})}).catch(function(){d();var a=new Error("No available storage method found.");return g._driverSet=va.reject(a),g._driverSet}),i(this._driverSet,b,c),this._driverSet},a.prototype.supports=function(a){return!!ab[a]},a.prototype._extend=function(a){sa(this,a)},a.prototype._getSupportedDrivers=function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];this.supports(e)&&b.push(e)}return b},a.prototype._wrapLibraryMethodsWithReady=function(){for(var a=0,b=eb.length;a<b;a++)ra(this,eb[a])},a.prototype.createInstance=function(b){return new a(b)},a}(),hb=new gb;b.exports=hb},{3:3}]},{},[4])(4)});
;
// version: 2018-06-24-143455
    /**
    * o--------------------------------------------------------------------------------o
    * | This file is part of the RGraph package - you can learn more at:               |
    * |                                                                                |
    * |                          http://www.rgraph.net                                 |
    * |                                                                                |
    * | RGraph is licensed under the Open Source MIT license. That means that it's     |
    * | totally free to use and there are no restrictions on what you can do with it!  |
    * o--------------------------------------------------------------------------------o
    */
    RGraph          = window.RGraph || {isRGraph: true,isRGraphSVG: true};
    RGraph.SVG      = RGraph.SVG || {};
    RGraph.SVG.AJAX = RGraph.SVG.AJAX || {};
// Module pattern
(function (win, doc, undefined)
{
    var RG  = RGraph,
        ua  = navigator.userAgent,
        ma  = Math;
    /**
    * Makes an AJAX call. It calls the given callback (a function) when ready
    * 
    * @param string   url      The URL to retrieve
    * @param function callback A function that is called when the response is ready, there's an example below
    *                          called "myCallback".
    */
    RG.SVG.AJAX = function (url, callback)
    {
        // Mozilla, Safari, ...
        if (window.XMLHttpRequest) {
            var httpRequest = new XMLHttpRequest();
        // MSIE
        } else if (window.ActiveXObject) {
            var httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
        }
        httpRequest.onreadystatechange = function ()
        {
            if (this.readyState == 4 && this.status == 200) {
                this.__user_callback__ = callback;
                this.__user_callback__(this.responseText);
            }
        }
        httpRequest.open('GET', url, true);
        httpRequest.send();
    };
    /**
    * Makes an AJAX POST request. It calls the given callback (a function) when ready
    * 
    * @param string   url      The URL to retrieve
    * @param object   data     The POST data
    * @param function callback A function that is called when the response is ready, there's an example below
    *                          called "myCallback".
    */
    RG.SVG.AJAX.POST = function (url, data, callback)
    {
        // Used when building the POST string
        var crumbs = [];
        // Mozilla, Safari, ...
        if (window.XMLHttpRequest) {
            var httpRequest = new XMLHttpRequest();
        // MSIE
        } else if (window.ActiveXObject) {
            var httpRequest = new ActiveXObject("Microsoft.XMLHTTP");
        }
        httpRequest.onreadystatechange = function ()
        {
            if (this.readyState == 4 && this.status == 200) {
                this.__user_callback__ = callback;
                this.__user_callback__(this.responseText);
            }
        }
        httpRequest.open('POST', url, true);
        httpRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        for (i in data) {
            if (typeof i == 'string') {
                crumbs.push(i + '=' + encodeURIComponent(data[i]));
            }
        }
        httpRequest.send(crumbs.join('&'));
    };
    /**
    * Uses the above function but calls the call back passing a number as its argument
    * 
    * @param url string The URL to fetch
    * @param callback function Your callback function (which is passed the number as an argument)
    */
    RG.SVG.AJAX.getNumber = function (url, callback)
    {
        RG.SVG.AJAX(url, function ()
        {
            var num = parseFloat(this.responseText);
            callback(num);
        });
    };
    /**
    * Uses the above function but calls the call back passing a string as its argument
    * 
    * @param url string The URL to fetch
    * @param callback function Your callback function (which is passed the string as an argument)
    */
    RG.SVG.AJAX.getString = function (url, callback)
    {
        RG.SVG.AJAX(url, function ()
        {
            var str = String(this.responseText);
            callback(str);
        });
    };
    /**
    * Uses the above function but calls the call back passing JSON (ie a JavaScript object ) as its argument
    * 
    * @param url string The URL to fetch
    * @param callback function Your callback function (which is passed the JSON object as an argument)
    */
    RG.SVG.AJAX.getJSON = function (url, callback)
    {
        RG.SVG.AJAX(url, function ()
        {
            var json = eval('(' + this.responseText + ')');
            callback(json);
        });
    };
    /**
    * Uses the above RGraph.AJAX function but calls the call back passing an array as its argument.
    * Useful if you're retrieving CSV data
    * 
    * @param url string The URL to fetch
    * @param callback function Your callback function (which is passed the CSV/array as an argument)
    */
    RG.SVG.AJAX.getCSV = function (url, callback)
    {
        var seperator = (typeof arguments[2] === 'string'  ? arguments[2] : ','),
            lineSep   = (typeof arguments[3] === 'string' ? arguments[3] : "\r?\n");
        RG.SVG.AJAX(url, function ()
        {
            var text   = this.responseText,
                regexp = new RegExp(seperator),
                lines  = this.responseText.split(lineSep),
                rows   = [];
            for (var i=0; i<lines.length; ++i) {
                var row = lines[i].split(seperator);
                for (var j=0,len=row.length;j<len;++j) {
                    if (row[j].match(/^[0-9.]+$/)) {
                        row[j] = parseFloat(row[j]);
                    }
                }
                rows.push(row);
            }
            callback(rows);
        });
    };
// End module pattern
})(window, document);;
    /**
    * o--------------------------------------------------------------------------------o
    * | This file is part of the RGraph package - you can learn more at:               |
    * |                                                                                |
    * |                          http://www.rgraph.net                                 |
    * |                                                                                |
    * | RGraph is licensed under the Open Source MIT license. That means that it's     |
    * | totally free to use and there are no restrictions on what you can do with it!  |
    * o--------------------------------------------------------------------------------o
    */
    RGraph        = window.RGraph || {isRGraph: true,isRGraphSVG: true};
    RGraph.SVG    = RGraph.SVG    || {};
    RGraph.SVG.FX = RGraph.SVG.FX || {};
// Module pattern
(function (win, doc, undefined)
{
    var RG  = RGraph,
        ua  = navigator.userAgent,
        ma  = Math;
    RG.SVG.REG = {
        store: []
    };
    // ObjectRegistry
    RG.SVG.OR = {objects: []};
    // Used to categorise trigonometery functions
    RG.SVG.TRIG        = {};
    RG.SVG.TRIG.HALFPI = ma.PI * .4999;
    RG.SVG.TRIG.PI     = RG.SVG.TRIG.HALFPI * 2;
    RG.SVG.TRIG.TWOPI  = RG.SVG.TRIG.PI * 2;
    RG.SVG.ISIE = ua.indexOf('rident') > 0;
    RG.SVG.ISFF = ua.indexOf('irefox') > 0;
    RG.SVG.events = [];
    // This allows you to set globalconfiguration values that are copied to
    // all objects automatically.
    RG.SVG.GLOBALS = {};
    RG.SVG.ISFF     = ua.indexOf('Firefox') != -1;
    RG.SVG.ISOPERA  = ua.indexOf('Opera') != -1;
    RG.SVG.ISCHROME = ua.indexOf('Chrome') != -1;
    RG.SVG.ISSAFARI = ua.indexOf('Safari') != -1 && !RG.ISCHROME;
    RG.SVG.ISWEBKIT = ua.indexOf('WebKit') != -1;
    RG.SVG.ISIE     = ua.indexOf('Trident') > 0 || navigator.userAgent.indexOf('MSIE') > 0;
    RG.SVG.ISIE6    = ua.indexOf('MSIE 6') > 0;
    RG.SVG.ISIE7    = ua.indexOf('MSIE 7') > 0;
    RG.SVG.ISIE8    = ua.indexOf('MSIE 8') > 0;
    RG.SVG.ISIE9    = ua.indexOf('MSIE 9') > 0;
    RG.SVG.ISIE10   = ua.indexOf('MSIE 10') > 0;
    RG.SVG.ISIE11UP = ua.indexOf('MSIE') == -1 && ua.indexOf('Trident') > 0;
    RG.SVG.ISIE10UP = RG.SVG.ISIE10 || RG.SVG.ISIE11UP;
    RG.SVG.ISIE9UP  = RG.SVG.ISIE9 || RG.SVG.ISIE10UP;
    //
    // Create an SVG tag
    //
    RG.SVG.createSVG = function (opt)
    {
        var container = opt.container,
            obj       = opt.object;
        if (container.__svg__) {
            return container.__svg__;
        }
        var svg = doc.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.setAttribute('style', 'top: 0; left: 0; position: absolute');
            svg.setAttribute('width', container.offsetWidth);
            svg.setAttribute('height', container.offsetHeight);
            svg.setAttribute('version', '1.1');
            svg.setAttributeNS("http://www.w3.org/2000/xmlns/", 'xmlns', 'http://www.w3.org/2000/svg');
            svg.setAttributeNS("http://www.w3.org/2000/xmlns/", "xmlns:xlink", "http://www.w3.org/1999/xlink");
        container.appendChild(svg);
        container.__svg__ = svg;
        var style = getComputedStyle(container);
        if (style.position !== 'absolute' && style.position !== 'fixed' && style.position !== 'sticky') {
            container.style.position = 'relative';
        }
        // Add the groups that facilitate "background layers"
        var numLayers = 10;
        for (var i=1; i<=numLayers; ++i) {
            var group = RG.SVG.create({
                svg: svg,
                type: 'g',
                attr: {
                    className: 'background' + i
                }
            });
            // Store a reference to the group
            obj.layers['background' + i] = group;
            svg['background' + i]        = group;
        }
        // Add the group tag to the SVG that contains all of the elements
        var group = RG.SVG.create({
            svg: svg,
            type: 'g',
            attr: {
                className: 'all-elements'
            }
        });
        container.__svg__.all = group;
        return svg;
    };
    //
    // Create a defs tag inside the SVG
    //
    RG.SVG.createDefs = function (obj)
    {
        if (!obj.svg.defs) {
            var defs = RG.SVG.create({
                svg: obj.svg,
                type: 'defs'
            });
            obj.svg.defs = defs;
        }
        return defs;
    };
    //
    // Creates a tag depending on the args that you give
    //
    //@param opt object The options for the function
    //
    RG.SVG.create = function (opt)
    {
        var ns  = "http://www.w3.org/2000/svg",
            tag = doc.createElementNS(ns, opt.type);
        // Add the attributes
        for (var o in opt.attr) {
            if (typeof o === 'string') {
                var name = o;
                if (o === 'className') {
                    name = 'class';
                }
                if ( (opt.type === 'a' || opt.type === 'image') && o === 'xlink:href') {
                    tag.setAttributeNS('http://www.w3.org/1999/xlink', o, String(opt.attr[o]));
                } else {
                    tag.setAttribute(name, String(opt.attr[o]));
                }
            }
        }
        // Add the style
        for (var o in opt.style) {
            if (typeof o === 'string') {
                tag.style[o] = String(opt.style[o]);
            }
        }
        if (opt.parent) {
            opt.parent.appendChild(tag);
        } else {
            opt.svg.appendChild(tag);
        }
        return tag;
    };
    //
    // Function that adds up all of the offsetLeft and offsetTops to get
    // X/Y coords for the mouse
    //
    //@param object e The event object
    //@return array   The X/Y coordinate pair representing the mouse
    //                location in relation to the SVG tag.
    //
    RG.SVG.getMouseXY = function(e)
    {
        // This is necessary for IE9
        if (!e.target) {
            return;
        }
        var el = e.target, offsetX = 0, offsetY = 0, x, y;
        if (typeof el.offsetParent !== 'undefined') { 
            do {
                offsetX += el.offsetLeft;
                offsetY += el.offsetTop;
            } while ((el = el.offsetParent));
        }
        x = e.pageX;
        y = e.pageY;
        x -= (2 * (parseInt(document.body.style.borderLeftWidth) || 0));
        y -= (2 * (parseInt(document.body.style.borderTopWidth) || 0));
        // We return a javascript array with x and y defined
        return [x, y];
    };
    //
    // Draws an X axis
    //
    //@param The chart object
    //
    RG.SVG.drawXAxis = function (obj)
    {
        var prop = obj.properties;
        // Draw the axis
        if (prop.xaxis) {
            var y = obj.type === 'hbar' ? obj.height - prop.gutterBottom : obj.getYCoord(obj.scale.min < 0 && obj.scale.max < 0 ? obj.scale.max : (obj.scale.min > 0 && obj.scale.max > 0 ? obj.scale.min : 0));
            var axis = RG.SVG.create({
                svg: obj.svg,
                parent: obj.svg.all,
                type: 'path',
                attr: {
                    d: 'M{1} {2} L{3} {4}'.format(
                        prop.gutterLeft,
                        y,
                        obj.width - prop.gutterRight,
                        y
                    ),
                    fill: prop.xaxisColor,
                    stroke: prop.xaxisColor,
                    'stroke-width': typeof prop.xaxisLinewidth === 'number' ? prop.xaxisLinewidth : 1,
                    'shape-rendering': 'crispEdges',
                    'stroke-linecap': 'square'
                }
            });
            // HBar X axis
            if (obj.type === 'hbar') {
                var width  = obj.graphWidth / obj.data.length,
                    x      = prop.gutterLeft,
                    startY = (obj.height - prop.gutterBottom),
                    endY   = (obj.height - prop.gutterBottom) + prop.xaxisTickmarksLength;
            // Line/Bar/Waterfall/Scatter X axis
            } else {
                var width  = obj.graphWidth / obj.data.length,
                    x      = prop.gutterLeft,
                    startY = obj.getYCoord(0) - (prop.yaxisMin < 0 ? prop.xaxisTickmarksLength : 0),
                    endY   = obj.getYCoord(0) + prop.xaxisTickmarksLength;
                if (obj.scale.min < 0 && obj.scale.max <= 0) {
                    startY = prop.gutterTop;
                    endY   = prop.gutterTop - prop.xaxisTickmarksLength;
                }
                if (obj.scale.min > 0 && obj.scale.max > 0) {
                    startY = obj.getYCoord(obj.scale.min);
                    endY   = obj.getYCoord(obj.scale.min) + prop.xaxisTickmarksLength;
                }
            }
            // Draw the tickmarks
            if (prop.xaxisTickmarks) {
                // The HBar uses a scale
                if (prop.xaxisScale) {
                    for (var i=0; i<(typeof prop.xaxisLabelsPositionEdgeTickmarksCount === 'number' ? prop.xaxisLabelsPositionEdgeTickmarksCount : (obj.scale.numlabels + (prop.yaxis && prop.xaxisMin === 0 ? 0 : 1))); ++i) {
                        if (obj.type === 'hbar') {
                            var dataPoints = obj.data.length;
                        }
                        x = prop.gutterLeft + ((i+(prop.yaxis && prop.xaxisMin === 0 ? 1 : 0)) * (obj.graphWidth / obj.scale.numlabels));
                        // Allow Manual specification of number of tickmarks
                        if (typeof prop.xaxisLabelsPositionEdgeTickmarksCount === 'number') {
                            dataPoints = prop.xaxisLabelsPositionEdgeTickmarksCount;
                            var gap    = (obj.graphWidth / prop.xaxisLabelsPositionEdgeTickmarksCount);
                            x          = (gap * i) + prop.gutterLeft + gap;
                        }
                        RG.SVG.create({
                            svg: obj.svg,
                            parent: obj.svg.all,
                            type: 'path',
                            attr: {
                                d: 'M{1} {2} L{3} {4}'.format(
                                    x,
                                    startY,
                                    x,
                                    endY
                                ),
                                stroke: prop.xaxisColor,
                                'stroke-width': typeof prop.xaxisLinewidth === 'number' ? prop.xaxisLinewidth : 1,
                                'shape-rendering': "crispEdges"
                            }
                        });
                    }
                } else {
                    // This style is used by Bar and Scatter charts
                    if (prop.xaxisLabelsPosition === 'section') {
                        if (obj.type === 'bar' || obj.type === 'waterfall') {
                            var dataPoints = obj.data.length;
                        } else if (obj.type === 'line'){
                            var dataPoints = obj.data[0].length;
                        } else if (obj.type === 'scatter') {
                            var dataPoints = prop.xaxisLabels ? prop.xaxisLabels.length : 10;
                        }
                        // Allow Manual specification of number of tickmarks
                        if (typeof prop.xaxisLabelsPositionSectionTickmarksCount === 'number') {
                            dataPoints = prop.xaxisLabelsPositionSectionTickmarksCount;
                        }
                        for (var i=0; i<dataPoints; ++i) {
                            x = prop.gutterLeft + ((i+1) * (obj.graphWidth / dataPoints));
                            RG.SVG.create({
                                svg: obj.svg,
                                parent: obj.svg.all,
                                type: 'path',
                                attr: {
                                    d: 'M{1} {2} L{3} {4}'.format(
                                        x + 0.001,
                                        startY,
                                        x,
                                        endY
                                    ),
                                    stroke: prop.xaxisColor,
                                    'stroke-width': typeof prop.xaxisLinewidth === 'number' ? prop.xaxisLinewidth : 1,
                                    'shape-rendering': "crispEdges"
                                }
                            });
                        }
                    // This style is used by line charts
                    } else if (prop.xaxisLabelsPosition === 'edge') {
                        if (typeof prop.xaxisLabelsPositionEdgeTickmarksCount === 'number') {
                            var len = prop.xaxisLabelsPositionEdgeTickmarksCount;
                        } else {
                            var len = obj.data && obj.data[0] && obj.data[0].length ? obj.data[0].length : 0;
                        }
                        for (var i=0; i<len; ++i) {
                            var gap = ( (obj.graphWidth) / (len - 1)),
                                x   = prop.gutterLeft + ((i+1) * gap);
                            RG.SVG.create({
                                svg: obj.svg,
                                parent: obj.svg.all,
                                type: 'path',
                                attr: {
                                    d: 'M{1} {2} L{3} {4}'.format(
                                        x + 0.001,
                                        startY,
                                        x,
                                        endY
                                    ),
                                    stroke: prop.xaxisColor,
                                    'stroke-width': typeof prop.xaxisLinewidth === 'number' ? prop.xaxisLinewidth : 1,
                                    'shape-rendering': "crispEdges"
                                }
                            });
                        }
                    }
                }
                // Draw an extra tick if the Y axis is not being shown
                if (prop.yaxis === false) {
                    RG.SVG.create({
                        svg: obj.svg,
                        parent: obj.svg.all,
                        type: 'path',
                        attr: {
                            d: 'M{1} {2} L{3} {4}'.format(
                                prop.gutterLeft + 0.001,
                                startY,
                                prop.gutterLeft,
                                endY
                            ),
                            stroke: obj.properties.xaxisColor,
                            'stroke-width': typeof prop.xaxisLinewidth === 'number' ? prop.xaxisLinewidth : 1,
                            'shape-rendering': "crispEdges",
                            parent: obj.svg.all,
                        }
                    });
                }
            }
        }
        //
        // Draw an X axis scale
        //
        if (prop.xaxisScale) {
            if (obj.type === 'scatter') {
                obj.xscale = RG.SVG.getScale({
                    object:    obj,
                    numlabels: prop.xaxisLabelsCount,
                    unitsPre:  prop.xaxisUnitsPre,
                    unitsPost: prop.xaxisUnitsPost,
                    max:       prop.xaxisMax,
                    min:       prop.xaxisMin,
                    point:     prop.xaxisPoint,
                    round:     prop.xaxisRound,
                    thousand:  prop.xaxisThousand,
                    decimals:  prop.xaxisDecimals,
                    strict:    typeof prop.xaxisMax === 'number',
                    formatter: prop.xaxisFormatter
                });
                var segment = obj.graphWidth / prop.xaxisLabelsCount
                for (var i=0; i<obj.xscale.labels.length; ++i) {
                    var x = prop.gutterLeft + (segment * i) + segment + prop.xaxisLabelsOffsetx;
                    var y = (obj.height - prop.gutterBottom) + (prop.xaxis ? prop.xaxisTickmarksLength + 6 : 10) + (prop.xaxisLinewidth || 1) + prop.xaxisLabelsOffsety;
                    RG.SVG.text({
                        object: obj,
                        parent: obj.svg.all,
                        text:   obj.xscale.labels[i],
                        x:      x,
                        y:      y,
                        halign: 'center',
                        valign: 'top',
                        tag:    'labels.xaxis',
                        font:   prop.xaxisTextFont   || prop.textFont,
                        size:   prop.xaxisTextSize   || (typeof prop.textSize === 'number' ? prop.textSize + 'pt' : prop.textSize),
                        bold:   prop.xaxisTextBold   || prop.textBold,
                        italic: prop.xaxisTextItalic || prop.textItalic,
                        color:  prop.xaxisTextColor  || prop.textColor
                    });
                }
                // Add the minimum label if labels are enabled
                if (prop.xaxisLabelsCount > 0) {
                    var y   = obj.height - prop.gutterBottom + prop.xaxisLabelsOffsety + (prop.xaxis ? prop.xaxisTickmarksLength + 6 : 10),
                        str = RG.SVG.numberFormat({
                            object:     obj,
                            num:        prop.xaxisMin.toFixed(prop.xaxisDecimals),
                            prepend:    prop.xaxisUnitsPre,
                            append:     prop.xaxisUnitsPost,
                            point:      prop.xaxisPoint,
                            thousand:   prop.xaxisThousand,
                            formatter:  prop.xaxisFormatter
                        });
                    var text = RG.SVG.text({
                        object: obj,
                        parent: obj.svg.all,
                        text: typeof prop.xaxisFormatter === 'function' ? (prop.xaxisFormatter)(this, prop.xaxisMin) : str,
                        x: prop.gutterLeft + prop.xaxisLabelsOffsetx,
                        y: y,
                        halign: 'center',
                        valign: 'top',
                        tag:    'labels.xaxis',
                        font:   prop.xaxisTextFont   || prop.textFont,
                        size:   prop.xaxisTextSize   || (typeof prop.textSize === 'number' ? prop.textSize + 'pt' : prop.textSize),
                        bold:   prop.xaxisTextBold   || prop.textBold,
                        italic: prop.xaxisTextItalic || prop.textItalic,
                        color:  prop.xaxisTextColor  || prop.textColor
                    });
                }
            // =========================================================================
            } else {
                var segment = obj.graphWidth / prop.xaxisLabelsCount,
                    scale   = obj.scale;
                for (var i=0; i<scale.labels.length; ++i) {
                    var x = prop.gutterLeft + (segment * i) + segment + prop.xaxisLabelsOffsetx;
                    var y = (obj.height - prop.gutterBottom) + (prop.xaxis ? prop.xaxisTickmarksLength + 6 : 10) + (prop.xaxisLinewidth || 1) + prop.xaxisLabelsOffsety;
                    RG.SVG.text({
                        object: obj,
                        parent: obj.svg.all,
                        text:   obj.scale.labels[i],
                        x:      x,
                        y:      y,
                        halign: 'center',
                        valign: 'top',
                        tag:    'labels.xaxis',
                        font:   prop.xaxisTextFont   || prop.textFont,
                        size:   prop.xaxisTextSize   || (typeof prop.textSize === 'number' ? prop.textSize + 'pt' : prop.textSize),
                        bold:   prop.xaxisTextBold   || prop.textBold,
                        italic: prop.xaxisTextItalic || prop.textItalic,
                        color:  prop.xaxisTextColor  || prop.textColor
                    });
                }
                // Add the minimum label if labels are enabled
                if (prop.xaxisLabelsCount > 0) {
                    var y   = obj.height - prop.gutterBottom + prop.xaxisLabelsOffsety + (prop.xaxis ? prop.xaxisTickmarksLength + 6 : 10),
                        str = RG.SVG.numberFormat({
                            object:     obj,
                            num:        prop.xaxisMin.toFixed(prop.xaxisDecimals),
                            prepend:    prop.xaxisUnitsPre,
                            append:     prop.xaxisUnitsPost,
                            point:      prop.xaxisPoint,
                            thousand:   prop.xaxisThousand,
                            formatter:  prop.xaxisFormatter
                        });
                    var text = RG.SVG.text({
                        object: obj,
                        parent: obj.svg.all,
                        text: typeof prop.xaxisFormatter === 'function' ? (prop.xaxisFormatter)(this, prop.xaxisMin) : str,
                        x: prop.gutterLeft + prop.xaxisLabelsOffsetx,
                        y: y,
                        halign: 'center',
                        valign: 'top',
                        tag:    'labels.xaxis',
                        font:   prop.xaxisTextFont   || prop.textFont,
                        size:   prop.xaxisTextSize   || (typeof prop.textSize === 'number' ? prop.textSize + 'pt' : prop.textSize),
                        bold:   prop.xaxisTextBold   || prop.textBold,
                        italic: prop.xaxisTextItalic || prop.textItalic,
                        color:  prop.xaxisTextColor  || prop.textColor
                    });
                }
            }
        //
        // Draw the X axis labels
        //
        } else {
            if (typeof prop.xaxisLabels === 'object' && !RG.SVG.isNull(prop.xaxisLabels) ) {
                var angle = prop.xaxisTextAngle;
                // Loop through the X labels
                if (prop.xaxisLabelsPosition === 'section') {
                    var segment = (obj.width - prop.gutterLeft - prop.gutterRight) / prop.xaxisLabels.length;
                    for (var i=0; i<prop.xaxisLabels.length; ++i) {
                        var x = prop.gutterLeft + (segment / 2) + (i * segment);
                        if (obj.scale.max <=0 && obj.scale.min < obj.scale.max) {
                            var y = prop.gutterTop - (RG.SVG.ISFF ? 5 : 10)  - (prop.xaxisLinewidth || 1) + prop.xaxisLabelsOffsety;
                            var valign = 'bottom';
                        } else {
                            var y = obj.height - prop.gutterBottom + (RG.SVG.ISFF ? 5 : 10) + (prop.xaxisLinewidth || 1) + prop.xaxisLabelsOffsety;
                            var valign = 'top';
                        }
                        RG.SVG.text({
                            object: obj,
                            parent: obj.svg.all,
                            text: prop.xaxisLabels[i],
                            x: x + prop.xaxisLabelsOffsetx,
                            y: y,
                            valign: (typeof angle === 'number' && angle) ? 'center' : valign,
                            halign: (typeof angle === 'number' && angle) ? 'right' : 'center',
                            angle: angle,
                            tag:    'labels.xaxis',
                            size:   prop.xaxisTextSize   || prop.textSize,
                            italic: prop.xaxisTextItalic || prop.textItalic,
                            font:   prop.xaxisTextFont   || prop.textFont,
                            bold:   prop.xaxisTextBold   || prop.textBold,
                            color:  prop.xaxisTextColor  || prop.textColor
                        });
                    }
                } else if (prop.xaxisLabelsPosition === 'edge') {
                    if (obj.type === 'line') {
                        var hmargin = prop.hmargin;
                    } else {
                        var hmargin = 0;
                    }
                    var segment = (obj.graphWidth - hmargin - hmargin) / (prop.xaxisLabels.length - 1);
                    for (var i=0; i<prop.xaxisLabels.length; ++i) {
                        var x = prop.gutterLeft + (i * segment) + hmargin;
                        if (obj.scale.max <= 0 && obj.scale.min < 0) {
                            valign = 'bottom';
                            y = prop.gutterTop - (RG.SVG.ISFF ? 5 : 10) - (prop.xaxisTickmarksLength - 5)  - (prop.xaxisLinewidth || 1) + prop.xaxisLabelsOffsety
                        } else {
                            valign = 'top';
                            y = obj.height - prop.gutterBottom + (RG.SVG.ISFF ? 5 : 10) + (prop.xaxisTickmarksLength - 5) + (prop.xaxisLinewidth || 1) + prop.xaxisLabelsOffsety;
                        }
                        RG.SVG.text({
                            object: obj,
                            parent: obj.svg.all,
                            text: prop.xaxisLabels[i],
                            x: x + prop.xaxisLabelsOffsetx,
                            y: y,
                            valign: (typeof angle === 'number' && angle) ? 'center' : valign,
                            halign: (typeof angle === 'number' && angle) ? 'right' : 'center',
                            angle: angle,
                            tag:    'labels.xaxis',
                            size:   prop.xaxisTextSize   ||  prop.textSize,
                            italic: prop.xaxisTextItalic ||  prop.textItalic,
                            font:   prop.xaxisTextFont   ||  prop.textFont,
                            bold:   prop.xaxisTextBold   ||  prop.textBold,
                            color:  prop.xaxisTextColor  ||  prop.textColor
                        });
                    }
                }
            }
        }
    };
    //
    // Draws an Y axis
    //
    //@param The chart object
    //
    RG.SVG.drawYAxis = function (obj)
    {
        var prop = obj.properties;
        if (prop.yaxis) {
            // The X coordinate that the Y axis is positioned at
            if (obj.type === 'hbar') {
                var x = obj.getXCoord(prop.xaxisMin > 0 ? prop.xaxisMin : 0);
                if (prop.xaxisMin < 0 && prop.xaxisMax <= 0) {
                    x = obj.getXCoord(prop.xaxisMax);
                }
            } else {
                var x = prop.gutterLeft;
            }
            var axis = RG.SVG.create({
                svg: obj.svg,
                parent: obj.svg.all,
                type: 'path',
                attr: {
                    d: 'M{1} {2} L{3} {4}'.format(
                        x,
                        prop.gutterTop,
                        x,
                        obj.height - prop.gutterBottom
                    ),
                    stroke: prop.yaxisColor,
                    fill: prop.yaxisColor,
                    'stroke-width': typeof prop.yaxisLinewidth === 'number' ? prop.yaxisLinewidth : 1,
                    'shape-rendering': "crispEdges",
                    'stroke-linecap': 'square'
                }
            });
            if (obj.type === 'hbar') {
                var height = (obj.graphHeight - prop.vmarginTop - prop.vmarginBottom) / prop.yaxisLabels.length,
                    y      = prop.gutterTop + prop.vmarginTop,
                    len    = prop.yaxisLabels.length,
                    startX = obj.getXCoord(0) + (prop.xaxisMin < 0 ? prop.yaxisTickmarksLength : 0),
                    endX   = obj.getXCoord(0) - prop.yaxisTickmarksLength;
                if (prop.xaxisMin < 0 && prop.xaxisMax <=0) {
                    startX = obj.getXCoord(prop.xaxisMax);
                    endX   = obj.getXCoord(prop.xaxisMax) + 5;
                }
                // A custom number of tickmarks
                if (typeof prop.yaxisLabelsPositionSectionTickmarksCount === 'number') {
                    len    = prop.yaxisLabelsPositionSectionTickmarksCount;
                    height = (obj.graphHeight - prop.vmarginTop - prop.vmarginBottom) / len;
                }
                //
                // Draw the tickmarks
                //
                if (prop.yaxisTickmarks) {
                    for (var i=0; i<len; ++i) {
                        // Draw the axis
                        var axis = RG.SVG.create({
                            svg: obj.svg,
                            parent: obj.svg.all,
                            type: 'path',
                            attr: {
                                d: 'M{1} {2} L{3} {4}'.format(
                                    startX,
                                    y,
                                    endX,
                                    y + 0.001
                                ),
                                stroke: prop.yaxisColor,
                                'stroke-width': typeof prop.yaxisLinewidth === 'number' ? prop.yaxisLinewidth : 1,
                                'shape-rendering': "crispEdges"
                            }
                        });
                        y += height;
                    }
                    // Draw an extra tick if the X axis position is not zero or
                    // if the xaxis is not being shown
                    if (prop.xaxis === false) {
                        if (obj.type === 'hbar' && prop.xaxisMin <= 0 && prop.xaxisMax < 0) {
                            var startX = obj.getXCoord(prop.xaxisMax);
                            var endX   = obj.getXCoord(prop.xaxisMax) + prop.yaxisTickmarksLength;
                        } else {
                            var startX = obj.getXCoord(0) - prop.yaxisTickmarksLength;
                            var endX   = obj.getXCoord(0) + (prop.xaxisMin < 0 ? prop.yaxisTickmarksLength : 0);
                        }
                        var axis = RG.SVG.create({
                            svg: obj.svg,
                            parent: obj.svg.all,
                            type: 'path',
                            attr: {
                                d: 'M{1} {2} L{3} {4}'.format(
                                    startX,
                                    ma.round(obj.height - prop.gutterBottom - parseFloat(prop.vmarginBottom)),
                                    endX,
                                    ma.round(obj.height - prop.gutterBottom - parseFloat(prop.vmarginBottom))
                                ),
                                stroke: obj.properties.yaxisColor,
                                'stroke-width': typeof prop.yaxisLinewidth === 'number' ? prop.yaxisLinewidth : 1,
                                'shape-rendering': "crispEdges"
                            }
                        });
                    }
                }
            //
            // Bar, Line etc types of chart
            //
            } else {
                var height = obj.graphHeight / prop.yaxisLabelsCount,
                    y      = prop.gutterTop,
                    len    = prop.yaxisLabelsCount,
                    startX = prop.gutterLeft,
                    endX   = prop.gutterLeft - prop.yaxisTickmarksLength;
                // A custom number of tickmarks
                if (typeof prop.yaxisLabelsPositionEdgeTickmarksCount === 'number') {
                    len    = prop.yaxisLabelsPositionEdgeTickmarksCount;
                    height = obj.graphHeight / len;
                }
                //
                // Draw the tickmarks
                //
                if (prop.yaxisTickmarks) {
                    for (var i=0; i<len; ++i) {
                        // Draw the axis
                        var axis = RG.SVG.create({
                            svg: obj.svg,
                            parent: obj.svg.all,
                            type: 'path',
                            attr: {
                                d: 'M{1} {2} L{3} {4}'.format(
                                    startX,
                                    y,
                                    endX,
                                    y
                                ),
                                stroke: prop.yaxisColor,
                                'stroke-width': typeof prop.yaxisLinewidth === 'number' ? prop.yaxisLinewidth : 1,
                                'shape-rendering': "crispEdges"
                            }
                        });
                        y += height;
                    }
                    // Draw an extra tick if the X axis position is not zero or
                    //if the xaxis is not being shown
                    if (    (prop.yaxisMin !== 0 || prop.xaxis === false)
                        && !(obj.scale.min > 0 && obj.scale.max > 0) ) {
                        var axis = RG.SVG.create({
                            svg: obj.svg,
                            parent: obj.svg.all,
                            type: 'path',
                            attr: {
                                d: 'M{1} {2} L{3} {4}'.format(
                                    prop.gutterLeft - prop.yaxisTickmarksLength,
                                    obj.height - prop.gutterBottom,
                                    prop.gutterLeft,
                                    obj.height - prop.gutterBottom - 0.001
                                ),
                                stroke: prop.yaxisColor,
                                'stroke-width': typeof prop.yaxisLinewidth === 'number' ? prop.yaxisLinewidth : 1,
                                'shape-rendering': "crispEdges"
                            }
                        });
                    }
                }
            }
        }
        //
        // Draw the Y axis labels
        //
        if (prop.yaxisScale) {
            var segment = (obj.height - prop.gutterTop - prop.gutterBottom) / prop.yaxisLabelsCount;
            for (var i=0; i<obj.scale.labels.length; ++i) {
                var y = obj.height - prop.gutterBottom - (segment * i) - segment;
                RG.SVG.text({
                    object: obj,
                    parent: obj.svg.all,
                    text:   obj.scale.labels[i],
                    x:      prop.gutterLeft - 7 - (prop.yaxis ? (prop.yaxisTickmarksLength - 3) : 0) + prop.yaxisLabelsOffsetx,
                    y:      y + prop.yaxisLabelsOffsety,
                    halign: prop.yaxisLabelsHalign || 'right',
                    valign: prop.yaxisLabelsValign || 'center',
                    tag:    'labels.yaxis',
                    font:   prop.yaxisTextFont   || prop.textFont,
                    size:   prop.yaxisTextSize   || (typeof prop.textSize === 'number' ? prop.textSize + 'pt' : prop.textSize),
                    bold:   prop.yaxisTextBold   || prop.textBold,
                    italic: prop.yaxisTextItalic || prop.textItalic,
                    color:  prop.yaxisTextColor  || prop.textColor
                });
            }
            //
            // Add the minimum label
            //
            var y   = obj.height - prop.gutterBottom,
                str = (prop.yaxisUnitsPre + prop.yaxisMin.toFixed(prop.yaxisDecimals).replace(/\./, prop.yaxisPoint) + prop.yaxisUnitsPost);
            var text = RG.SVG.text({
                object: obj,
                parent: obj.svg.all,
                text: typeof prop.yaxisFormatter === 'function' ? (prop.yaxisFormatter)(this, prop.yaxisMin) : str,
                x: prop.gutterLeft - 7 - (prop.yaxis ? (prop.yaxisTickmarksLength - 3) : 0) + prop.yaxisLabelsOffsetx,
                y: y + prop.yaxisLabelsOffsety,
                halign: 'right',
                valign: 'center',
                tag:    'labels.yaxis',
                font:   prop.yaxisTextFont   || prop.textFont,
                size:   prop.yaxisTextSize   || (typeof prop.textSize === 'number' ? prop.textSize + 'pt' : prop.textSize),
                bold:   prop.yaxisTextBold   || prop.textBold,
                italic: prop.yaxisTextItalic || prop.textItalic,
                color:  prop.yaxisTextColor  || prop.textColor
            });
        //
        // Draw Y axis labels (eg when specific labels are defined or
        //the chart is an HBar
        //
        } else if (prop.yaxisLabels && prop.yaxisLabels.length) {
            for (var i=0; i<prop.yaxisLabels.length; ++i) {
                var segment = (obj.graphHeight - (prop.vmarginTop || 0) - (prop.vmarginBottom || 0) ) / prop.yaxisLabels.length,
                    y       = prop.gutterTop + (prop.vmarginTop || 0) + (segment * i) + (segment / 2) + prop.yaxisLabelsOffsety,
                    x       = prop.gutterLeft - 7 /*- (prop.yaxis ? (prop.yaxisTickmarksLength) : 0)*/ - (prop.yaxisLinewidth || 1) + prop.yaxisLabelsOffsetx,
                    halign  = 'right';
                // HBar labels
                if (obj.type === 'hbar' && obj.scale.min < obj.scale.max && obj.scale.max <= 0) {
                    halign = 'left';
                    x      = obj.width - prop.gutterRight + 7 + prop.yaxisLabelsOffsetx;
                // HBar labels (again?)
                } else if (obj.type === 'hbar' && !prop.yaxisLabelsSpecific) {
                    var segment = (obj.graphHeight - (prop.vmarginTop || 0) - (prop.vmarginBottom || 0) ) / (prop.yaxisLabels.length);
                    y = prop.gutterTop + (prop.vmarginTop || 0) + (segment * i) + (segment / 2) + prop.yaxisLabelsOffsety;
                // Specific scale
                } else {
                    var segment = (obj.graphHeight - (prop.vmarginTop || 0) - (prop.vmarginBottom || 0) ) / (prop.yaxisLabels.length - 1);
                    y = obj.height - prop.gutterBottom - (segment * i) + prop.yaxisLabelsOffsety;
                }
                var text = RG.SVG.text({
                    object: obj,
                    parent: obj.svg.all,
                    text:   prop.yaxisLabels[i] ? prop.yaxisLabels[i] : '',
                    x:      x,
                    y:      y,
                    halign: halign,
                    valign: 'center',
                    tag:    'labels.yaxis',
                    font:   prop.yaxisTextFont   || prop.textFont,
                    size:   prop.yaxisTextSize   || (typeof prop.textSize === 'number' ? prop.textSize + 'pt' : prop.textSize),
                    bold:   typeof prop.yaxisTextBold === 'boolean' ? prop.yaxisTextBold : prop.textBold,
                    italic: typeof prop.yaxisTextItalic === 'boolean' ? prop.yaxisTextItalic : prop.textItalic,
                    color:  prop.yaxisTextColor  || prop.textColor
                });
            }
        }
    };
    //
    // Draws the background
    //
    //@param The chart object
    //
    RG.SVG.drawBackground = function (obj)
    {
        var prop = obj.properties;
        // Set these properties so that if it doesn't exist things don't fail
        if (typeof prop.variant3dOffsetx !== 'number') prop.variant3dOffsetx = 0;
        if (typeof prop.variant3dOffsety !== 'number') prop.variant3dOffsety = 0;
        if (prop.backgroundColor) {
            RG.SVG.create({
                svg:  obj.svg,
                parent: obj.svg.all,
                type: 'rect',
                attr: {
                    x: -1 + prop.variant3dOffsetx + prop.gutterLeft,
                    y: -1 - prop.variant3dOffsety + prop.gutterTop,
                    width: parseFloat(obj.svg.getAttribute('width')) + 2 - prop.gutterLeft - prop.gutterRight,
                    height: parseFloat(obj.svg.getAttribute('height')) + 2 - prop.gutterTop - prop.gutterBottom,
                    fill: prop.backgroundColor
                }
            });
        }
        // Render a background image
        // <image xlink:href="firefox.jpg" x="0" y="0" height="50px" width="50px"/>
        if (prop.backgroundImage) {
            var attr = {
                'xlink:href': prop.backgroundImage,
                //preserveAspectRatio: 'xMidYMid slice',
                preserveAspectRatio: prop.backgroundImageAspect || 'none',
                x: prop.gutterLeft,
                y: prop.gutterTop
            };
            if (prop.backgroundImageStretch) {
                attr.x      = prop.gutterLeft + prop.variant3dOffsetx;
                attr.y      = prop.gutterTop + prop.variant3dOffsety;
                attr.width  = obj.width - prop.gutterLeft - prop.gutterRight;
                attr.height = obj.height - prop.gutterTop - prop.gutterBottom;
            } else {
                if (typeof prop.backgroundImageX === 'number') {
                    attr.x =  prop.backgroundImageX + prop.variant3dOffsetx;
                } else {
                    attr.x =  prop.gutterLeft + prop.variant3dOffsetx;
                }
                if (typeof prop.backgroundImageY === 'number') {
                    attr.y =  prop.backgroundImageY + prop.variant3dOffsety;
                } else {
                    attr.y =  prop.gutterTop + prop.variant3dOffsety;
                }
                if (typeof prop.backgroundImageW === 'number') {
                    attr.width =  prop.backgroundImageW;
                }
                if (typeof prop.backgroundImageH === 'number') {
                    attr.height =  prop.backgroundImageH;
                }
            }
            //
            // Account for the chart being 3d
            //
            if (prop.variant === '3d') {
                attr.x += prop.variant3dOffsetx;
                attr.y -= prop.variant3dOffsety;
            }
            var img = RG.SVG.create({
                svg:  obj.svg,
                parent: obj.svg.all,
                type: 'image',
                attr: attr,
                style: {
                    opacity: typeof prop.backgroundImageOpacity === 'number' ? prop.backgroundImageOpacity : 1
                }
            });
            // Set the width and height if necessary
            if (!prop.backgroundImageStretch) {
                var img2    = new Image();
                img2.src    = prop.backgroundImage;
                img2.onload = function ()
                {
                    img.setAttribute('width', typeof prop.backgroundImageW === 'number' ? prop.backgroundImageW : img2.width);
                    img.setAttribute('height', typeof prop.backgroundImageH === 'number' ? prop.backgroundImageH : img2.height);
                };
            }
        }
        if (prop .backgroundGrid) {
            var parts = [];
            // Add the horizontal lines to the path
            if (prop.backgroundGridHlines) {
                if (typeof prop.backgroundGridHlinesCount === 'number') {
                    var count = prop.backgroundGridHlinesCount;
                } else if (obj.type === 'hbar' || obj.type === 'bipolar') {
                    if (typeof prop.yaxisLabels === 'object' && !RG.SVG.isNull(prop.yaxisLabels) && prop.yaxisLabels.length) {
                        var count = prop.yaxisLabels.length;
                    } else if (obj.type === 'hbar') {
                        var count = obj.data.length;
                    } else if (obj.type === 'bipolar') {
                        var count = obj.left.length;
                    }
                } else {
                    var count = prop.yaxisLabelsCount || 5;
                }
                for (var i=0; i<=count; ++i) {
                    parts.push('M{1} {2} L{3} {4}'.format(
                        prop.gutterLeft + prop.variant3dOffsetx,
                        prop.gutterTop + (obj.graphHeight / count) * i - prop.variant3dOffsety,
                        obj.width - prop.gutterRight + prop.variant3dOffsetx,
                        prop.gutterTop + (obj.graphHeight / count) * i - prop.variant3dOffsety
                    ));
                }
                // Add an extra background grid line to the path - this its
                // underneath the X axis and shows up if its not there.
                parts.push('M{1} {2} L{3} {4}'.format(
                    prop.gutterLeft + prop.variant3dOffsetx,
                    obj.height - prop.gutterBottom - prop.variant3dOffsety,
                    obj.width - prop.gutterRight + prop.variant3dOffsetx,
                    obj.height - prop.gutterBottom - prop.variant3dOffsety
                ));
            }
            // Add the vertical lines to the path
            if (prop.backgroundGridVlines) {
                if (obj.type === 'line' && RG.SVG.isArray(obj.data[0])) {
                    var len = obj.data[0].length;
                } else if (obj.type === 'hbar') {
                    var len = prop.xaxisLabelsCount || 10;
                } else if (obj.type === 'bipolar') {
                    var len = prop.xaxisLabelsCount || 10;
                } else if (obj.type === 'scatter') {
                    var len = (prop.xaxisLabels && prop.xaxisLabels.length) || 10;
                } else if (obj.type === 'waterfall') {
                    var len = obj.data[0].length;
                } else {
                    var len = obj.data.length;
                }
                var count = typeof prop.backgroundGridVlinesCount === 'number' ? prop.backgroundGridVlinesCount : len;
                if (prop.xaxisLabelsPosition === 'edge') {
                    count--;
                }
                for (var i=0; i<=count; ++i) {
                    parts.push('M{1} {2} L{3} {4}'.format(
                        prop.gutterLeft + ((obj.graphWidth / count) * i) + prop.variant3dOffsetx,
                        prop.gutterTop - prop.variant3dOffsety,
                        prop.gutterLeft + ((obj.graphWidth / count) * i) + prop.variant3dOffsetx,
                        obj.height - prop.gutterBottom - prop.variant3dOffsety
                    ));
                }
            }
            // Add the box around the grid
            if (prop.backgroundGridBorder) {
                parts.push('M{1} {2} L{3} {4} L{5} {6} L{7} {8} z'.format(
                    prop.gutterLeft + prop.variant3dOffsetx,
                    prop.gutterTop  - prop.variant3dOffsety,
                    obj.width - prop.gutterRight + prop.variant3dOffsetx,
                    prop.gutterTop - prop.variant3dOffsety,
                    obj.width - prop.gutterRight + prop.variant3dOffsetx,
                    obj.height - prop.gutterBottom - prop.variant3dOffsety,
                    prop.gutterLeft + prop.variant3dOffsetx,
                    obj.height - prop.gutterBottom - prop.variant3dOffsety
                ));
            }
            // Get the dash array if its defined to be dotted or dashed
            var dasharray;
            if (prop.backgroundGridDashed) {
                dasharray = [3,5];
            } else if (prop.backgroundGridDotted) {
                dasharray = [1,3];
            } else if (prop.backgroundGridDashArray) {
                dasharray = prop.backgroundGridDashArray;
            } else {
                dasharray = '';
            }
            // Now draw the path
            var grid = RG.SVG.create({
                svg: obj.svg,
                parent: obj.svg.all,
                type: 'path',
                attr: {
                    className: 'rgraph_background_grid',
                    d: parts.join(' '),
                    stroke: prop.backgroundGridColor,
                    fill: 'rgba(0,0,0,0)',
                    'stroke-width': prop.backgroundGridLinewidth,
                    'shape-rendering': "crispEdges",
                    'stroke-dasharray': dasharray
                },
                style: {
                    pointerEvents: 'none'
                }
            });
        }
        // Draw the title and subtitle
        if (obj.type !== 'bipolar') {
            RG.SVG.drawTitle(obj);
        }
    };
    /**
    * Returns true/false as to whether the given variable is null or not
    * 
    * @param mixed arg The argument to check
    */
    RG.SVG.isNull = function (arg)
    {
        // must BE DOUBLE EQUALS - NOT TRIPLE
        if (arg == null || typeof arg === 'object' && !arg) {
            return true;
        }
        return false;
    };
    /**
    * Returns an appropriate scale. The return value is actualy an object consisting of:
    *  scale.max
    *  scale.min
    *  scale.scale
    * 
    * @param  obj object  The graph object
    * @param  prop object An object consisting of configuration properties
    * @return     object  An object containg scale information
    */
    RG.SVG.getScale = function (opt)
    {
        var obj          = opt.object,
            prop         = obj.properties,
            numlabels    = opt.numlabels,
            unitsPre     = opt.unitsPre,
            unitsPost    = opt.unitsPost,
            max          = Number(opt.max),
            min          = Number(opt.min),
            strict       = opt.strict,
            decimals     = Number(opt.decimals),
            point        = opt.point,
            thousand     = opt.thousand,
            originalMax  = max,
            round        = opt.round,
            scale        = {max:1,labels:[],values:[]},
            formatter    = opt.formatter;
        /**
        * Special case for 0
        * 
        * ** Must be first **
        */
        if (max === 0 && min === 0) {
            var max = 1;
            for (var i=0; i<numlabels; ++i) {
                var label = ((((max - min) / numlabels) * (i + 1)) + min).toFixed(decimals);
                scale.labels.push(unitsPre + label + unitsPost);
                scale.values.push(parseFloat(label))
            }
        /**
        * Manually do decimals
        */
        } else if (max <= 1 && !strict) {
            var arr = [
                1,0.5,
                0.10,0.05,
                0.010,0.005,
                0.0010,0.0005,
                0.00010,0.00005,
                0.000010,0.000005,
                0.0000010,0.0000005,
                0.00000010,0.00000005,
                0.000000010,0.000000005,
                0.0000000010,0.0000000005,
                0.00000000010,0.00000000005,
                0.000000000010,0.000000000005,
                0.0000000000010,0.0000000000005
            ], vals = [];
            for (var i=0; i<arr.length; ++i) {
                if (max > arr[i]) {
                    i--;
                    break;
                }
            }
            scale.max    = arr[i]
            scale.labels = [];
            scale.values = [];
            for (var j=0; j<numlabels; ++j) {
                var value = ((((arr[i] - min) / numlabels) * (j + 1)) + min).toFixed(decimals);
                scale.values.push(value);
                scale.labels.push(RG.SVG.numberFormat({
                    object: obj,
                    num: value,
                    prepend: unitsPre,
                    append: unitsPost,
                    point: prop.yaxisPoint,
                    thousand: prop.yaxisThousand,
                    formatter: formatter
                }));
            }
        } else if (!strict) {
            /**
            * Now comes the scale handling for integer values
            */
            // This accomodates decimals by rounding the max up to the next integer
            max = ma.ceil(max);
            var interval = ma.pow(10, ma.max(1, Number(String(Number(max) - Number(min)).length - 1)) );
            var topValue = interval;
            while (topValue < max) {
                topValue += (interval / 2);
            }
            // Handles cases where the max is (for example) 50.5
            if (Number(originalMax) > Number(topValue)) {
                topValue += (interval / 2);
            }
            // Custom if the max is greater than 5 and less than 10
            if (max <= 10) {
                topValue = (Number(originalMax) <= 5 ? 5 : 10);
            }
            // Added 02/11/2010 to create "nicer" scales
            if (obj && typeof(round) == 'boolean' && round) {
                topValue = 10 * interval;
            }
            scale.max = topValue;
            for (var i=0; i<numlabels; ++i) {
                var label = RG.SVG.numberFormat({
                    object: obj,
                    num: ((((i+1) / numlabels) * (topValue - min)) + min).toFixed(decimals),
                    prepend: unitsPre,
                    append: unitsPost,
                    point: point,
                    thousand: thousand,
                    formatter: formatter
                });
                scale.labels.push(label);
                scale.values.push(((((i+1) / numlabels) * (topValue - min)) + min).toFixed(decimals));
            }
        } else if (typeof max === 'number' && strict) {
            /**
            * ymax is set and also strict
            */
            for (var i=0; i<numlabels; ++i) {
                scale.labels.push(RG.SVG.numberFormat({
                    object: obj,
                    formatter: formatter,
                    num: ((((i+1) / numlabels) * (max - min)) + min).toFixed(decimals),
                    prepend: unitsPre,
                    append: unitsPost,
                    point: point,
                    thousand: thousand
                }));
                scale.values.push(
                    ((((i+1) / numlabels) * (max - min)) + min).toFixed(decimals)
                );
            }
            // ???
            scale.max = max;
        }
        scale.unitsPre  = unitsPre;
        scale.unitsPost = unitsPost;
        scale.point     = point;
        scale.decimals  = decimals;
        scale.thousand  = thousand;
        scale.numlabels = numlabels;
        scale.round     = Boolean(round);
        scale.min       = min;
        //
        // Convert all of the scale values to numbers
        //
        for (var i=0; i<scale.values.length; ++i) {
            scale.values[i] = parseFloat(scale.values[i]);
        }
        return scale;
    };
    /**
    * Pads/fills the array
    * 
    * @param  array arr The array
    * @param  int   len The length to pad the array to
    * @param  mixed     The value to use to pad the array (optional)
    */
    RG.SVG.arrayFill = 
    RG.SVG.arrayPad  = function (opt)
    {
        var arr   = opt.array,
            len   = opt.length,
            value = (typeof opt.value === 'undefined' ? null : opt.value);
        if (arr.length < len) {            
            for (var i=arr.length; i<len; i+=1) {
                arr[i] = value;
            }
        }
        return arr;
    };
    /**
    * An array sum function
    * 
    * @param  array arr The  array to calculate the total of
    * @return int       The summed total of the arrays elements
    */
    RG.SVG.arraySum = function (arr)
    {
        // Allow integers
        if (typeof arr === 'number') {
            return arr;
        }
        // Account for null
        if (RG.SVG.isNull(arr)) {
            return 0;
        }
        var i, sum, len = arr.length;
        for(i=0,sum=0;i<len;sum+=arr[i++]);
        return sum;
    };
    /**
    * Returns the maximum numeric value which is in an array. This function IS NOT
    * recursive
    * 
    * @param  array arr The array (can also be a number, in which case it's returned as-is)
    * @param  int       Whether to ignore signs (ie negative/positive)
    * @return int       The maximum value in the array
    */
    RG.SVG.arrayMax = function (arr)
    {
        var max = null
        if (typeof arr === 'number') {
            return arr;
        }
        if (RG.SVG.isNull(arr)) {
            return 0;
        }
        for (var i=0,len=arr.length; i<len; ++i) {
            if (typeof arr[i] === 'number') {
                var val = arguments[1] ? ma.abs(arr[i]) : arr[i];
                if (typeof max === 'number') {
                    max = ma.max(max, val);
                } else {
                    max = val;
                }
            }
        }
        return max;
    };
    /**
    * Returns the minimum numeric value which is in an array
    * 
    * @param  array arr The array (can also be a number, in which case it's returned as-is)
    * @param  int       Whether to ignore signs (ie negative/positive)
    * @return int       The minimum value in the array
    */
    RG.SVG.arrayMin = function (arr)
    {
        var max = null,
            min = null,
            ma  = Math;
        if (typeof arr === 'number') {
            return arr;
        }
        if (RG.SVG.isNull(arr)) {
            return 0;
        }
        for (var i=0,len=arr.length; i<len; ++i) {
            if (typeof arr[i] === 'number') {
                var val = arguments[1] ? ma.abs(arr[i]) : arr[i];
                if (typeof min === 'number') {
                    min = ma.min(min, val);
                } else {
                    min = val;
                }
            }
        }
        return min;
    };
    /**
    * Returns the maximum value which is in an array
    * 
    * @param  array arr The array
    * @param  int   len The length to pad the array to
    * @param  mixed     The value to use to pad the array (optional)
    */
    RG.SVG.arrayPad = function (arr, len)
    {
        if (arr.length < len) {
            var val = arguments[2] ? arguments[2] : null;
            for (var i=arr.length; i<len; i+=1) {
                arr[i] = val;
            }
        }
        return arr;
    };
    /**
    * An array sum function
    * 
    * @param  array arr The  array to calculate the total of
    * @return int       The summed total of the arrays elements
    */
    RG.SVG.arraySum = function (arr)
    {
        // Allow integers
        if (typeof arr === 'number') {
            return arr;
        }
        // Account for null
        if (RG.SVG.isNull(arr)) {
            return 0;
        }
        var i, sum, len = arr.length;
        for(i=0,sum=0;i<len;sum+=arr[i++]);
        return sum;
    };
    /**
    * Takes any number of arguments and adds them to one big linear array
    * which is then returned
    * 
    * @param ... mixed The data to linearise. You can strings, booleans, numbers or arrays
    */
    RG.SVG.arrayLinearize = function ()
    {
        var arr  = [],
            args = arguments
        for (var i=0,len=args.length; i<len; ++i) {
            if (typeof args[i] === 'object' && args[i]) {
                for (var j=0,len2=args[i].length; j<len2; ++j) {
                    var sub = RG.SVG.arrayLinearize(args[i][j]);
                    for (var k=0,len3=sub.length; k<len3; ++k) {
                        arr.push(sub[k]);
                    }
                }
            } else {
                arr.push(args[i]);
            }
        }
        return arr;
    };
    /**
    * Takes one off the front of the given array and returns the new array.
    * 
    * @param array arr The array from which to take one off the front of array 
    * 
    * @return array The new array
    */
    RG.SVG.arrayShift = function(arr)
    {
        var ret = [];
        for(var i=1,len=arr.length; i<len; ++i) {
            ret.push(arr[i]);
        }
        return ret;
    };
    /**
    * Reverses the order of an array
    * 
    * @param array arr The array to reverse
    */
    RG.SVG.arrayReverse = function (arr)
    {
        if (!arr) {
            return;
        }
        var newarr=[];
        for(var i=arr.length - 1; i>=0; i-=1) {
            newarr.push(arr[i]);
        }
        return newarr;
    };
    /**
    * Makes a clone of an object
    * 
    * @param obj val The object to clone
    */
    RG.SVG.arrayClone = function (obj)
    {
        if(obj === null || typeof obj !== 'object') {
            return obj;
        }
        if (RG.SVG.isArray(obj)) {
            var temp = [];
            for (var i=0,len=obj.length;i<len; ++i) {
                if (typeof obj[i]  === 'number') {
                    temp[i] = (function (arg) {return Number(arg);})(obj[i]);
                } else if (typeof obj[i]  === 'string') {
                    temp[i] = (function (arg) {return String(arg);})(obj[i]);
                } else if (typeof obj[i] === 'function') {
                    temp[i] = obj[i];
                } else {
                    temp[i] = RG.SVG.arrayClone(obj[i]);
                }
            }
        } else if (typeof obj === 'object') {
            var temp = {};
            for (var i in obj) {
                if (typeof i === 'string') {
                    temp[i] = obj[i];
                }
            }
        }
        return temp;
    };
    //
    // Converts an the truthy values to falsey values and vice-versa
    //
    RG.SVG.arrayInvert = function (arr)
    {
        for (var i=0,len=arr.length; i<len; ++i) {
            arr[i] = !arr[i];
        }
        return arr;
    };
    //
    // An array_trim function that removes the empty elements off
    //both ends
    //
    RG.SVG.arrayTrim = function (arr)
    {
        var out = [], content = false;
        // Trim the start
        for (var i=0; i<arr.length; i++) {
            if (arr[i]) {
                content = true;
            }
            if (content) {
                out.push(arr[i]);
            }
        }
        // Reverse the array and trim the start again
        out = RG.SVG.arrayReverse(out);
        var out2 = [], content = false ;
        for (var i=0; i<out.length; i++) {
            if (out[i]) {
                content = true;
            }
            if (content) {
                out2.push(out[i]);
            }
        }
        // Now reverse the array and return it
        out2 = RG.SVG.arrayReverse(out2);
        return out2;
    };
    /**
    * Determines if the given object is an array or not
    * 
    * @param mixed obj The variable to test
    */
    RG.SVG.isArray = function (obj)
    {
        if (obj && obj.constructor) {
            var pos = obj.constructor.toString().indexOf('Array');
        } else {
            return false;
        }
        return obj != null &&
               typeof pos === 'number' &&
               pos > 0 &&
               pos < 20;
    };
    /**
    * Returns the absolute value of a number. You can also pass in an
    * array and it will run the abs() function on each element. It
    * operates recursively so sub-arrays are also traversed.
    * 
    * @param array arr The number or array to work on
    */
    RG.SVG.abs = function (value)
    {
        if (typeof value === 'string') {
            value = parseFloat(value) || 0;
        }
        if (typeof value === 'number') {
            return ma.abs(value);
        }
        if (typeof value === 'object') {
            for (i in value) {
                if (   typeof i === 'string'
                    || typeof i === 'number'
                    || typeof i === 'object') {
                    value[i] = RG.SVG.abs(value[i]);
                }
            }
            return value;
        }
        return 0;
    };
    //
    // Formats a number with thousand seperators so it's easier to read
    //
    // @param opt object The options to the function
    //
    RG.SVG.numberFormat = function (opt)
    {
        var obj                = opt.object,
            prepend            = opt.prepend ? String(opt.prepend) : '',
            append             = opt.append ? String(opt.append) : '',
            output             = '',
            decimal_seperator  = typeof opt.point === 'string' ? opt.point : '.',
            thousand_seperator = typeof opt.thousand === 'string' ? opt.thousand : ',',
            num                = opt.num
            decimals_trim      = opt.decimals_trim;
        RegExp.$1   = '';
        if (typeof opt.formatter === 'function') {
            return opt.formatter(obj, num);
        }
        // Ignore the preformatted version of "1e-2"
        if (String(num).indexOf('e') > 0) {
            return String(prepend + String(num) + append);
        }
        // We need then number as a string
        num = String(num);
        // Take off the decimal part - we re-append it later
        if (num.indexOf('.') > 0) {
            var tmp = num;
            num     = num.replace(/\.(.*)/, ''); // The front part of the number
            decimal = tmp.replace(/(.*)\.(.*)/, '$2'); // The decimal part of the number
        } else {
            decimal = '';
        }
        // Thousand seperator
        //var seperator = arguments[1] ? String(arguments[1]) : ',';
        var seperator = thousand_seperator;
        /**
        * Work backwards adding the thousand seperators
        */
        var foundPoint;
        for (i=(num.length - 1),j=0; i>=0; j++,i--) {
            var character = num.charAt(i);
            if ( j % 3 == 0 && j != 0) {
                output += seperator;
            }
            /**
            * Build the output
            */
            output += character;
        }
        /**
        * Now need to reverse the string
        */
        var rev = output;
        output = '';
        for (i=(rev.length - 1); i>=0; i--) {
            output += rev.charAt(i);
        }
        // Tidy up
        //output = output.replace(/^-,/, '-');
        if (output.indexOf('-' + thousand_seperator) == 0) {
            output = '-' + output.substr(('-' + thousand_seperator).length);
        }
        // Reappend the decimal
        if (decimal.length) {
            output =  output + decimal_seperator + decimal;
            decimal = '';
            RegExp.$1 = '';
        }
        //
        // Trim the decimals if it's all zeros
        //
        if (decimals_trim) {
            output = output.replace(/0+$/,'');
            output = output.replace(/\.$/,'');
        }
        // Minor bugette
        if (output.charAt(0) == '-') {
            output = output.replace(/-/, '');
            prepend = '-' + prepend;
        }
        return prepend + output + append;
    };
    //
    // A function that adds text to the chart
    //
    RG.SVG.text = function (opt)
    {
        var obj        = opt.object,
            parent     = opt.parent || opt.object.svg.all,
            size       = typeof opt.size === 'number' ? opt.size + 'pt' : (typeof opt.size === 'string' ? opt.size.replace(/pt$/,'') : 12) + 'pt',
            bold       = opt.bold ? 'bold' : 'normal',
            font       = opt.font ? opt.font : 'sans-serif',
            italic     = opt.italic ? 'italic' : 'normal',
            halign     = opt.halign,
            valign     = opt.valign,
            str        = opt.text,
            x          = opt.x,
            y          = opt.y,
            color      = opt.color ? opt.color : 'black',
            background = opt.background || null,
            padding    = opt.padding || 0,
            link       = opt.link || '',
            linkTarget = opt.linkTarget || '_blank',
            events     = (opt.events === false ? false : true),
            angle      = opt.angle;
        //
        // Change numbers to strings
        //
        if (typeof str === 'number') {
            str = String(str);
        }
        //
        // If the string starts with a carriage return add a unicode non-breaking
        // space to the start of it.
        //
        if (str.substr(0,2) == '\r\n' || str.substr(0,1) === '\n') {
            str = "\u00A0" + str;
        }
        // Horizontal alignment
        if (halign === 'right') {
            halign = 'end';
        } else if (halign === 'center' || halign === 'middle') {
            halign = 'middle';
        } else {
            halign = 'start';
        }
        // Vertical alignment
        if (valign === 'top') {
            valign = 'hanging';
        } else if (valign === 'center' || valign === 'middle') {
            valign = 'central';
            valign = 'middle';
        } else {
            valign = 'bottom';
        }
        //
        // If a link has been specified then the text node should
        // be a child of an a node
        if (link) {
            var a = RGraph.SVG.create({
                svg: obj.svg,
                type: 'a',
                parent: parent,
                attr: {
                    'xlink:href': link,
                    target: linkTarget
                }
            });
        }
        //
        // Text does not include carriage returns
        //
        if (str && str.indexOf && str.indexOf("\n") === -1) {
            var text = RG.SVG.create({
                svg: obj.svg,
                parent: link ? a : opt.parent,
                type: 'text',
                attr: {
                    tag: opt.tag ? opt.tag : '',
                    fill: color,
                    x: x,
                    y: y,
                    'font-size':         size,
                    'font-weight':       bold,
                    'font-family':       font,
                    'font-style':        italic,
                    'text-anchor':       halign,
                    'dominant-baseline': valign
                }
            });
            var textNode = document.createTextNode(str);
            text.appendChild(textNode);
            if (!events) {
                text.style.pointerEvents = 'none';
            }
        //
        // Includes carriage returns
        //
        } else if (str && str.indexOf) {
            // Measure the text
            var dimensions = RG.SVG.measureText({
                text: 'My',
                bold: bold,
                font: font,
                size: size
            });
            var lineHeight = dimensions[1];
            str = str.split(/\r?\n/);
            //
            // Account for the carriage returns and move the text
            // up as required
            //
            if (valign === 'bottom') {
                y -= str.length * lineHeight;
            }
            if (valign === 'center' || valign === 'middle') {
                y -= (str.length * lineHeight) / 2;
            }
            var text = RG.SVG.create({
                svg: obj.svg,
                parent: link ? a : opt.parent,
                type: 'text',
                attr: {
                    tag: opt.tag ? opt.tag : '',
                    fill: color,
                    x: x,
                    y: y,
                    'font-size':         size,
                    'font-weight':       bold,
                    'font-family':       font,
                    'font-style':        italic,
                    'text-anchor':       halign,
                    'dominant-baseline': valign
                }
            });
            if (!events) {
                text.style.pointerEvents = 'none';
            }
            for (var i=0; i<str.length; ++i) {
                var tspan = RG.SVG.create({
                    svg: obj.svg,
                    parent: text,
                    type: 'tspan',
                    attr: {
                        x: x,
                        dy: dimensions ? (dimensions[1] * (i ? 1 : 0)) + 3 : 0
                    }
                });
                var textNode = document.createTextNode(str[i]);
                tspan.appendChild(textNode);
                if (!events) {
                    tspan.style.pointerEvents = 'none';
                }
                var dimensions = RG.SVG.measureText({
                    text: str[i],
                    bold: bold,
                    font: font,
                    size: parseInt(size)
                });
            }
        }
        // Now add the rotation if necessary
        if (typeof angle === 'number' && angle && text) {
            text.setAttribute('x', 0);
            text.setAttribute('y', 0);
            text.setAttribute('transform', 'translate({1} {2}) rotate({3})'.format(x, y, -1 * angle));
        }
        //
        // Add a background color if specified
        //
        if (typeof background === 'string') {
            var parent = link ? a : parent;
            var bbox = text.getBBox(),
                rect = RG.SVG.create({
                    svg:    obj.svg,
                    parent: parent,
                    type:   'rect',
                    attr: {
                        x:      bbox.x - padding,
                        y:      bbox.y - padding,
                        width:  bbox.width + (padding * 2),
                        height: bbox.height + (padding * 2),
                        fill:   background
                    }
                });
                if (!events) {
                    rect.style.pointerEvents = 'none';
                }
            text.parentNode.insertBefore(rect, text);
        }
        if (RG.SVG.ISIE && (valign === 'hanging') && text) {
            text.setAttribute('y', y + (text.scrollHeight / 2));
        } else if (RG.SVG.ISIE && valign === 'middle') {
            text.setAttribute('y', y + (text.scrollHeight / 3));
        }
        if (RG.SVG.ISFF && text) {
            Y = y + (text.scrollHeight / 3);
        }
        return text;
    };
    //
    // Helps you get hold of the SPAN tag nodes that hold the text on the chart
    //
    RG.SVG.text.find = function (opt)
    {
        // Search criteria should include:
        //  o text (literal string and regex)
        if (typeof opt.object === 'object' && opt.object.isRGraph) {
            var svg = opt.object.svg;
        } else if (typeof opt.svg === 'object' && opt.svg.all) {
            var svg = opt.svg;
        }
        // Look for text nodes based on the text
        var nodes = svg.getElementsByTagName('text');
        var found = [];
        for (var i=0,len=nodes.length; i<len; ++i) {
            var text = false,
                tag  = false;
            // Exact match or regex on the text
            if (typeof opt.text === 'string' && nodes[i].innerHTML === opt.text) {
                text = true;
            } else if (typeof opt.text === 'object' && nodes[i].innerHTML.match(opt.text)) {
                text = true;
            } else if (typeof opt.text === 'undefined') {
                text = true;
            }
            // Exact match or regex on the tag
            if (typeof opt.tag === 'string' && nodes[i].getAttribute('tag') === opt.tag) {
                tag = true;
            } else if (typeof opt.tag === 'object' && nodes[i].getAttribute('tag').match(opt.tag)) {
                tag = true;
            } else if (typeof opt.tag === 'undefined') {
                tag = true;
            }
            // Did all of the conditions pass?
            if (text === true && tag === true) {
                found.push(nodes[i])
            }
        }
        return found;
    };
    //
    // Creates a UID that is applied to the object
    //
    RG.SVG.createUID = function ()
    {
        return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c)
        {
            var r = ma.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
            return v.toString(16);
        });
    };
    //
    // Determines if the SVG DIV container is fixed
    //
    RG.SVG.isFixed = function (svg)
    {
        var obj = svg.parentNode,
            i   = 0;
        while (obj && obj.tagName.toLowerCase() != 'body' && i < 99) {
            if (obj.style.position === 'fixed') {
                return obj;
            }
            obj = obj.offsetParent;
        }
        return false;
    };
    /**
    * Sets an object in the RGraph registry
    * 
    * @param string name The name of the value to set
    */
    RG.SVG.REG.set = function (name, value)
    {
        RG.SVG.REG.store[name] = value;
        return value;
    };
    /**
    * Gets an object from the RGraph registry
    * 
    * @param string name The name of the value to fetch
    */
    RG.SVG.REG.get = function (name)
    {
        return RG.SVG.REG.store[name];
    };
    /**
    * Removes white-space from the start aqnd end of a string
    * 
    * @param string str The string to trim
    */
    RG.SVG.trim = function (str)
    {
        return RG.SVG.ltrim(RG.SVG.rtrim(str));
    };
    /**
    * Trims the white-space from the start of a string
    * 
    * @param string str The string to trim
    */
    RG.SVG.ltrim = function (str)
    {
        return str.replace(/^(\s|\0)+/, '');
    };
    /**
    * Trims the white-space off of the end of a string
    * 
    * @param string str The string to trim
    */
    RG.SVG.rtrim = function (str)
    {
        return str.replace(/(\s|\0)+$/, '');
    };
    //
    // Hides the currently shown tooltip
    //
    RG.SVG.hideTooltip = function ()
    {
        var tooltip = RG.SVG.REG.get('tooltip');
        if (tooltip && tooltip.parentNode /*&& (!uid || uid == tooltip.__canvas__.uid)*/) {
            tooltip.parentNode.removeChild(tooltip);
            tooltip.style.display = 'none';                
            tooltip.style.visibility = 'hidden';
            RG.SVG.REG.set('tooltip', null);
        }
        if (tooltip && tooltip.__object__) {
            RG.SVG.removeHighlight(tooltip.__object__);
        }
    };
    //
    // Creates a shadow
    //
    RG.SVG.setShadow = function (options)
    {
        var obj     = options.object,
            offsetx = options.offsetx  || 0,
            offsety = options.offsety || 0,
            blur    = options.blur || 0,
            opacity = options.opacity || 0,
            id      = options.id;
        var filter = RG.SVG.create({
            svg: obj.svg,
            parent: obj.svg.defs,
            type: 'filter',
            attr: {
                id: id,
                 width: "130%",
                 height: "130%"
            }
        });
        RG.SVG.create({
            svg: obj.svg,
            parent: filter,
            type: 'feOffset',
            attr: {
                result: 'offOut',
                'in': 'SourceGraphic',
                dx: offsetx,
                dy: offsety
            }
        });
        RG.SVG.create({
            svg: obj.svg,
            parent: filter,
            type: 'feColorMatrix',
            attr: {
                result: 'matrixOut',
                'in': 'offOut',
                type: 'matrix',
                values: '0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 {1} 0'.format(
                    opacity
                )
            }
        });
        RG.SVG.create({
            svg: obj.svg,
            parent: filter,
            type: 'feGaussianBlur',
            attr: {
                result: 'blurOut',
                'in': 'matrixOut',
                stdDeviation: blur
            }
        });
        RG.SVG.create({
            svg: obj.svg,
            parent: filter,
            type: 'feBlend',
            attr: {
                'in': 'SourceGraphic',
                'in2': 'blurOut',
                mode: 'normal'
            }
        });
    };
    /**
    * Takes a sequential index and returns the group/index variation of it. Eg if you have a
    * sequential index from a grouped bar chart this function can be used to convert that into
    * an appropriate group/index combination
    * 
    * @param nindex number The sequential index
    * @param data   array  The original data (which is grouped)
    * @return              The group/index information
    */
    RG.SVG.sequentialIndexToGrouped = function (index, data)
    {
        var group         = 0,
            grouped_index = 0;
        while (--index >= 0) {
            if (RG.SVG.isNull(data[group])) {
                group++;
                grouped_index = 0;
                continue;
            }
            // Allow for numbers as well as arrays in the dataset
            if (typeof data[group] == 'number') {
                group++
                grouped_index = 0;
                continue;
            }
            grouped_index++;
            if (grouped_index >= data[group].length) {
                group++;
                grouped_index = 0;
            }
        }
        return [group, grouped_index];
    };
    //
    // This is the reverse of the above function - converting
    // group/index to a sequential index
    //
    // @return number The sequential index
    //
    RG.SVG.groupedIndexToSequential = function (opt)
    {
        var dataset = opt.dataset,
            index   = opt.index,
            obj     = opt.object;
        for (var i=0,seq=0; i<=dataset; ++i) {
            for (var j=0; j<obj.data[dataset].length; ++j) {
                if (i === dataset && j === index) {
                    return seq;
                }
                seq++;
            }
        }
        return seq;
    };
    //
    // This function converts coordinates into the type understood by
    // SVG for drawing arcs
    //
    RG.SVG.TRIG.toCartesian = function (options)
    {
        return {
            x: options.cx + (options.r * ma.cos(options.angle)),
            y: options.cy + (options.r * ma.sin(options.angle))
        };
    };
    //
    // Gets a path that is usable by the SVG A path command
    //
    // @patam object options The options/arg to the function
    //
    // NB ** Still used by the Pie chart and the semi-circular Meter **
    //
    RG.SVG.TRIG.getArcPath = function (options)
    {
        //
        // Make circles start at the top instead of the right hand side
        //
        options.start -= 1.57;
        options.end   -= 1.57;
        var start = RG.SVG.TRIG.toCartesian({
            cx:    options.cx,
            cy:    options.cy,
            r:     options.r,
            angle: options.start}
        );
        var end = RG.SVG.TRIG.toCartesian({
            cx:    options.cx,
            cy:    options.cy,
            r:     options.r,
            angle: options.end
        });
        var diff = options.end - options.start;
        // Initial values
        var largeArc = '0';
        var sweep    = '0';
        if (options.anticlockwise && diff > 3.14) {
            largeArc = '0';
            sweep    = '0';
        } else if (options.anticlockwise && diff <= 3.14) {
            largeArc = '1';
            sweep    = '0';
        } else if (!options.anticlockwise && diff > 3.14) {
            largeArc = '1';
            sweep    = '1';
        } else if (!options.anticlockwise && diff <= 3.14) {
            largeArc = '0';
            sweep    = '1';
        }
        if (options.start > options.end && options.anticlockwise && diff <= 3.14) {
            largeArc = '0';
            sweep    = '0';
        }
        if (options.start > options.end && options.anticlockwise && diff > 3.14) {
            largeArc = '1';
            sweep    = '1';
        }
        if (typeof options.moveto === 'boolean' && options.moveto === false) {
            var d = [
                "A", options.r, options.r, 0, largeArc, sweep, end.x, end.y
            ];
        } else {
            var d = [
                "M", start.x, start.y, 
                "A", options.r, options.r, 0, largeArc, sweep, end.x, end.y
            ];
        }
        if (options.array === true) {
            return d;
        } else {
            return d.join(" ");
        }
    };
    //
    // Gets a path that is usable by the SVG A path command
    //
    // @patam object options The options/arg to the function
    //
    RG.SVG.TRIG.getArcPath2 = function (options)
    {
        //
        // Make circles start at the top instead of the right hand side
        //
        options.start -= 1.57;
        options.end   -= 1.57;
        var start = RG.SVG.TRIG.toCartesian({
            cx:    options.cx,
            cy:    options.cy,
            r:     options.r,
            angle: options.start
        });
        var end = RG.SVG.TRIG.toCartesian({
            cx:    options.cx,
            cy:    options.cy,
            r:     options.r,
            angle: options.end
        });
        var diff = ma.abs(options.end - options.start);
        // Initial values
        var largeArc = '0';
        var sweep    = '0';
        //TODO Put various options here for the correct combination of flags to use
        if (!options.anticlockwise) {
            if (diff > RG.SVG.TRIG.PI) {
                largeArc = '1';
                sweep    = '1';
            } else {
                largeArc = '0';
                sweep    = '1';
            }
        } else {
            if (diff > RG.SVG.TRIG.PI) {
                largeArc = '1';
                sweep    = '0';
            } else {
                largeArc = '0';
                sweep    = '0';
            }
        }
        if (typeof options.lineto === 'boolean' && options.lineto === false) {
            var d = [
                "M", start.x, start.y,
                "A", options.r, options.r, 0, largeArc, sweep, end.x, end.y
            ];
        } else {
            var d = [
                "M", options.cx, options.cy,
                "L", start.x, start.y, 
                "A", options.r, options.r, 0, largeArc, sweep, end.x, end.y
            ];
        }
        if (options.array === true) {
            return d;
        } else {
            return d.join(" ");
        }
    };
    //
    // Gets a path that is usable by the SVG A path command
    //
    // @param object options The options/arg to the function
    //
    RG.SVG.TRIG.getArcPath3 = function (options)
    {
        //
        // Make circles start at the top instead of the right hand side
        //
        options.start -= (ma.PI / 2);
        options.end   -= (ma.PI / 2);
        var start = RG.SVG.TRIG.toCartesian({
            cx:    options.cx,
            cy:    options.cy,
            r:     options.r,
            angle: options.start
        });
        var end = RG.SVG.TRIG.toCartesian({
            cx:    options.cx,
            cy:    options.cy,
            r:     options.r,
            angle: options.end
        });
        var diff = ma.abs(options.end - options.start);
        // Initial values
        var largeArc = '0';
        var sweep    = '0';
        //TODO Put various options here for the correct combination of flags to use
        if (!options.anticlockwise) {
            if (diff > RG.SVG.TRIG.PI) {
                largeArc = '1';
                sweep    = '1';
            } else {
                largeArc = '0';
                sweep    = '1';
            }
        } else {
            if (diff > RG.SVG.TRIG.PI) {
                largeArc = '1';
                sweep    = '0';
            } else {
                largeArc = '0';
                sweep    = '0';
            }
        }
        if (typeof options.lineto === 'boolean' && options.lineto === false) {
            var d = [
                "M", start.x, start.y,
                "A", options.r, options.r, 0, largeArc, sweep, end.x, end.y
            ];
        } else {
            var d = [
                "L", start.x, start.y,
                "A", options.r, options.r, 0, largeArc, sweep, end.x, end.y
            ];
        }
        if (options.array === true) {
            return d;
        } else {
            return d.join(" ");
        }
    };
    /**
    * This function gets the end point (X/Y coordinates) of a given radius.
    * You pass it the center X/Y and the radius and this function will return
    * the endpoint X/Y coordinates.
    * 
    * @param number cx    The center X coord
    * @param number cy    The center Y coord
    * @param number r     The length of the radius
    * @param number angle The anle to use
    */
    RG.SVG.TRIG.getRadiusEndPoint = function (opt)
    {
        // Allow for two arguments style
        if (arguments.length === 1) {
            var angle = opt.angle,
                r     = opt.r;
        } else if (arguments.length === 4) {
            var angle = arguments[0],
                r     = arguments[1];
        }
        var x = ma.cos(angle) * r,
            y = ma.sin(angle) * r;
        return [x, y];
    };
    /**
    * This function draws the title. This function also draws the subtitle.
    */
    RG.SVG.drawTitle = function (obj)
    {
        var prop                   = obj.properties,
            valign                 = 'bottom',
            originalTitleX         = prop.titleX,
            originalTitleY         = prop.titleY,
            originalTitleSubtitleX = prop.titleSubtitleX,
            originalTitleSubtitleY = prop.titleSubtitleY;
        if (typeof originalTitleX === 'string')         originalTitleX.replace(/^\+/,'');
        if (typeof originalTitleY === 'string')         originalTitleY.replace(/^\+/,'');
        if (typeof originalTitleSubtitleX === 'string') originalTitleSubtitleX.replace(/^\+/,'');
        if (typeof originalTitleSubtitleY === 'string') originalTitleSubtitleY.replace(/^\+/,'');
        //
        // The Pie chart title should default to being above the centerx
        //
        if (obj.type === 'pie') {
            if (RG.SVG.isNull(prop.titleX)) {
                prop.titleX         = obj.centerx;
                prop.titleSubtitleX = obj.centerx;
            }
            if (RG.SVG.isNull(prop.titleY)) {
                prop.titleY = obj.centery - obj.radius - 10;
            }
        }
        if (obj.scale && obj.scale.max <= 0 && obj.scale.min < 0 && typeof prop.titleY !== 'number' && obj.type !== 'hbar') {
            prop.titleY = obj.height - prop.gutterBottom + 10;
            var positionBottom = true;
            valign = 'top';
        } else if (typeof prop.titleY !== 'number') {
            var positionBottom = false;
            prop.titleY = prop.gutterTop - 10;
            valign      = 'bottom';
            // Account for the key
            if (!RG.SVG.isNull(prop.key)) {
                prop.titleY -= (2 * (prop.keyTextSize || prop.textSize));
            }
        }
        // If a subtitle is specified move the title up a bit in
        // order to accommodate it
        if (prop.titleSubtitle && typeof prop.titleSubtitleY !== 'number' && !positionBottom) {
            prop.titleY = prop.titleY - (prop.titleSubtitleSize * 1.5);
        }
        // Work out the subtitle size
        prop.titleSubTitleSize = prop.titleSubTitleSize || prop.textSize;
        // Work out the subtitle Y position
        prop.titleSubtitleY = prop.titleSubtitleY || prop.titleY + 18;
        if (positionBottom && typeof prop.titleSubtitleY !== 'number') {
            prop.titleSubtitleY = prop.titleY + 26;
        }
        // Draw the title
        if (prop.title) {
            var x = typeof prop.titleX === 'number' ? prop.titleX + (prop.variant3dOffsetx || 0) : prop.gutterLeft + (obj.graphWidth / 2) + (prop.variant3dOffsetx || 0);
            var y = prop.titleY + (prop.variant3dOffsety || 0);
            // Add any adjustment to the positioning
            if (typeof originalTitleX === 'string') {
                x += parseFloat(originalTitleX);
            }
            if (typeof originalTitleY === 'string') {
                y += parseFloat(originalTitleY);
            }
            RG.SVG.text({
                object: obj,
                svg:    obj.svg,
                parent: obj.svg.all,
                tag:    'title',
                text:   prop.title.toString(),
                size:   prop.titleSize   || (prop.textSize + 4) || 16,
                x:      x,
                y:      y,
                halign: prop.titleHalign || 'center',
                valign: prop.titleValign || valign,
                color:  prop.titleColor  || prop.textColor || 'black',
                bold:   prop.titleBold   || false,
                italic: prop.titleItalic || false,
                font:   prop.titleFont   || prop.textFont || 'Arial'
            });
        }
        // Draw the subtitle
        if (typeof prop.title === 'string' && typeof prop.titleSubtitle === 'string') {
            // By default, the X and Y coordinates place the subtitle
            // underneath the title. Though the y coord is now adjusted
            // so that the subtitle sits underneath the title.
            y += (prop.titleSubtitleSize * 1.5);
            // Is the subtitleX or subtitleY are numbers then just use those
            if (typeof originalTitleSubtitleX === 'number') {
                x = originalTitleSubtitleX;
            }
            if (typeof originalTitleSubtitleY === 'number') {
                y = originalTitleSubtitleY;
            }
            // Add the subtitles adjustment to the position
            if (typeof originalTitleSubtitleX === 'string') {
                x += parseFloat(originalTitleSubtitleX);
            }
            // Add the subtitles adjustment to the position
            if (typeof originalTitleSubtitleY === 'string') {
                y += parseFloat(originalTitleSubtitleY);
            }
            RG.SVG.text({
                object: obj,
                svg: obj.svg,
                parent: obj.svg.all,
                tag:    'subtitle',
                text:   prop.titleSubtitle,
                size:   prop.titleSubtitleSize,
                x:      x,
                y:      y,
                halign: prop.titleSubtitleHalign || 'center',
                valign: prop.titleSubtitleValign || valign,
                color:  prop.titleSubtitleColor  || prop.textColor || '#aaa',
                bold:   prop.titleSubtitleBold   || false,
                italic: prop.titleSubtitleItalic || false,
                font:   prop.titleSubtitleFont   || prop.textFont || 'Arial'
            });
        }
    };
    /**
    * Removes white-space from the start and end of a string
    * 
    * @param string str The string to trim
    */
    RG.SVG.trim = function (str)
    {
        return RG.SVG.ltrim(RG.SVG.rtrim(str));
    };
    /**
    * Trims the white-space from the start of a string
    * 
    * @param string str The string to trim
    */
    RG.SVG.ltrim = function (str)
    {
        return String(str).replace(/^(\s|\0)+/, '');
    };
    /**
    * Trims the white-space off of the end of a string
    * 
    * @param string str The string to trim
    */
    RG.SVG.rtrim = function (str)
    {
        return String(str).replace(/(\s|\0)+$/, '');
    };
    /**
    * This parses a single color value
    */
    RG.SVG.parseColorLinear = function (opt)
    {
        var obj   = opt.object,
            color = opt.color;
        if (!color || typeof color !== 'string') {
            return color;
        }
        if (color.match(/^gradient\((.*)\)$/i)) {
            var parts = RegExp.$1.split(':'),
                diff  = 1 / (parts.length - 1);
            if (opt && opt.direction && opt.direction === 'horizontal') {
                var grad = RG.SVG.create({
                    type: 'linearGradient',
                    parent: obj.svg.defs,
                    attr: {
                        id: 'RGraph-linear-gradient-' + obj.uid + '-' + obj.gradientCounter,
                        x1: opt.start || 0,
                        x2: opt.end || '100%',
                        y1: 0,
                        y2: 0,
                        gradientUnits: "userSpaceOnUse"
                    }
                });
            } else {
                var grad = RG.SVG.create({
                    type: 'linearGradient',
                    parent: obj.svg.defs,
                    attr: {
                        id: 'RGraph-linear-gradient-' + obj.uid + '-' + obj.gradientCounter,
                        x1: 0,
                        x2: 0,
                        y1: opt.start || 0,
                        y2: opt.end || '100%',
                        gradientUnits: "userSpaceOnUse"
                    }
                });
            }
            // Add the first color stop
            var stop = RG.SVG.create({
                type: 'stop',
                parent: grad,
                attr: {
                    offset: '0%',
                    'stop-color': RG.SVG.trim(parts[0])
                }
            });
            // Add the rest of the color stops
            for (var j=1,len=parts.length; j<len; ++j) {
                RG.SVG.create({
                    type: 'stop',
                    parent: grad,
                    attr: {
                        offset: (j * diff * 100) + '%',
                        'stop-color': RG.SVG.trim(parts[j])
                    }
                });
            }
        }
        color = grad ? 'url(#RGraph-linear-gradient-' + obj.uid + '-' + (obj.gradientCounter++) + ')' : color;
        return color;
    };
    /**
    * This parses a single color value
    */
    RG.SVG.parseColorRadial = function (opt)
    {
        var obj   = opt.object,
            color = opt.color;
        if (!color || typeof color !== 'string') {
            return color;
        }
        if (color.match(/^gradient\((.*)\)$/i)) {
            var parts = RegExp.$1.split(':'),
                diff  = 1 / (parts.length - 1);
            var grad = RG.SVG.create({
                type: 'radialGradient',
                parent: obj.svg.defs,
                attr: {
                    id: 'RGraph-radial-gradient-' + obj.uid + '-' + obj.gradientCounter,
                    gradientUnits: opt.gradientUnits || 'userSpaceOnUse',
                    cx: opt.cx || obj.centerx,
                    cy: opt.cy || obj.centery,
                    fx: opt.fx || obj.centerx,
                    fy: opt.fy || obj.centery,
                    r:  opt.r  || obj.radius
                }
            });
            // Add the first color stop
            var stop = RG.SVG.create({
                type: 'stop',
                parent: grad,
                attr: {
                    offset: '0%',
                    'stop-color': RG.SVG.trim(parts[0])
                }
            });
            // Add the rest of the color stops
            for (var j=1,len=parts.length; j<len; ++j) {
                RG.SVG.create({
                    type: 'stop',
                    parent: grad,
                    attr: {
                        offset: (j * diff * 100) + '%',
                        'stop-color': RG.SVG.trim(parts[j])
                    }
                });
            }
        }
        color = grad ? 'url(#RGraph-radial-gradient-' + obj.uid + '-' + (obj.gradientCounter++) + ')' : color;
        return color;
    };
    /**
    * Reset all of the color values to their original values
    * 
    * @param object
    */
    RG.SVG.resetColorsToOriginalValues = function (opt)
    {
        var obj = opt.object;
        if (obj.originalColors) {
            // Reset the colors to their original values
            for (var j in obj.originalColors) {
                if (typeof j === 'string') {
                    obj.properties[j] = RG.SVG.arrayClone(obj.originalColors[j]);
                }
            }
        }
        /**
        * If the function is present on the object to reset specific
        * colors - use that
        */
        if (typeof obj.resetColorsToOriginalValues === 'function') {
            obj.resetColorsToOriginalValues();
        }
        // Hmmm... Should this be necessary? I don't think it will
        // do any harm to leave it in.
        obj.originalColors = {};
        // Reset the colorsParsed flag so that they're parsed for gradients again
        obj.colorsParsed = false;
        // Reset the gradient counter
        obj.gradientCounter = 1;
    };
    //
    // Clear the SVG tag by deleting all of its
    // child nodes
    //
    // @param object svg The SVG tag (same as what is returned
    //                   by document.getElementById() )
    //
    RG.SVG.clear = function (svg)
    {
        // Clear all the layer nodes
        for (var i=1; i<=100; ++i) {
            if (svg['background' + i]) {
                // Clear all the nodes within this group
                while (svg['background' + i].lastChild) {
                    svg['background' + i].removeChild(svg['background' + i].lastChild);
                }
            } else {
                break;
            }
        }
        // Clear all the node within the "all" group
        while (svg.all.lastChild) {
            svg.all.removeChild(svg.all.lastChild);
        }
        // Clear Line chart hotspots
        if (svg.all.line_tooltip_hotspots) {
            while (svg.all.line_tooltip_hotspots.lastChild) {
                svg.all.line_tooltip_hotspots.removeChild(svg.all.line_tooltip_hotspots.lastChild);
            }
        }
    };
    /**
    * Adds an event listener
    * 
    * @param object obj   The graph object
    * @param string event The name of the event, eg ontooltip
    * @param object func  The callback function
    */
    RG.SVG.addCustomEventListener = function (obj, name, func)
    {
        // Initialise the events array if necessary
        if (typeof RG.SVG.events[obj.uid] === 'undefined') {
            RG.SVG.events[obj.uid] = [];
        }
        // Prepend "on" if necessary
        if (name.substr(0, 2) !== 'on') {
            name = 'on' + name;
        }
        RG.SVG.events[obj.uid].push({
            object: obj,
            event:  name,
            func:   func
        });
        return RG.SVG.events[obj.uid].length - 1;
    };
    /**
    * Used to fire one of the RGraph custom events
    * 
    * @param object obj   The graph object that fires the event
    * @param string event The name of the event to fire
    */
    RG.SVG.fireCustomEvent = function (obj, name)
    {
        if (obj && obj.isRGraph) {
            var uid = obj.uid;
            if (   typeof uid === 'string'
                && typeof RG.SVG.events === 'object'
                && typeof RG.SVG.events[uid] === 'object'
                && RG.SVG.events[uid].length > 0) {
                for(var j=0,len=RG.SVG.events[uid].length; j<len; ++j) {
                    if (RG.SVG.events[uid][j] && RG.SVG.events[uid][j].event === name) {
                        RG.SVG.events[uid][j].func(obj);
                    }
                }
            }
        }
    };
    /**
    * Clears all the custom event listeners that have been registered
    * 
    * @param string optional Limits the clearing to this object UID
    */
    RG.SVG.removeAllCustomEventListeners = function ()
    {
        var uid = arguments[0];
        if (uid && RG.SVG.events[uid]) {
            RG.SVG.events[uid] = {};
        } else {
            RG.SVG.events = [];
        }
    };
    /**
    * Clears a particular custom event listener
    * 
    * @param object obj The graph object
    * @param number i   This is the index that is return by .addCustomEventListener()
    */
    RG.SVG.removeCustomEventListener = function (obj, i)
    {
        if (   typeof RG.SVG.events === 'object'
            && typeof RG.SVG.events[obj.uid] === 'object'
            && typeof RG.SVG.events[obj.uid][i] === 'object') {
            RG.SVG.events[obj.uid][i] = null;
        }
    };
    //
    // Removes the highlight from the chart added by tooltips (possibly others too)
    //
    RG.SVG.removeHighlight = function (obj)
    {
        var highlight = RG.SVG.REG.get('highlight');
        if (highlight && RG.SVG.isArray(highlight) && highlight.length) {
            for (var i=0,len=highlight.length; i<len; ++i) {
                if (highlight[i].parentNode) {
                    //obj.svg.removeChild(highlight[i]);
                    highlight[i].parentNode.removeChild(highlight[i]);
                }
            }
        } else if (highlight && highlight.parentNode) {
            if (obj.type === 'scatter') {
                highlight.setAttribute('fill', 'transparent');
            } else {
                highlight.parentNode.removeChild(highlight);
            }
        }
    };
    //
    // Removes the highlight from the chart added by tooltips (possibly others too)
    //
    RG.SVG.redraw = function ()
    {
        if (arguments.length === 1) {
            var svg = arguments[0];
            RG.SVG.clear(svg);
            var objects = RG.SVG.OR.get('id:' + svg.parentNode.id);
            for (var i=0,len=objects.length; i<len; ++i) {
                // Reset the colors to the original values
                RG.SVG.resetColorsToOriginalValues({object: objects[i]});
                objects[i].draw();
            }
        } else {
            var tags = RG.SVG.OR.tags();
            for (var i in tags) {
                RG.SVG.redraw(tags[i]);
            }
        }
    };
    //
    // A better, more flexible, date parsing function
    //
    //@param  string str The string to parse
    //@return number     A number, as returned by Date.parse()
    //
    RG.SVG.parseDate = function (str)
    {
        var d = new Date();
        // Initialise the default values
        var defaults = {
            seconds: '00',
            minutes: '00',
            hours: '00',
            date: d.getDate(),
            month: d.getMonth() + 1,
            year: d.getFullYear()
        };
        // Create the months array for turning textual months back to numbers
        var months       = ['january','february','march','april','may','june','july','august','september','october','november','december'],
            months_regex = months.join('|');
        for (var i=0; i<months.length; ++i) {
            months[months[i]] = i;
            months[months[i].substring(0,3)] = i;
            months_regex = months_regex + '|' + months[i].substring(0,3);
        }
        // These are the seperators allowable for d/m/y and y/m/d dates
        // (Its part of a regexp so the position of the square brackets
        //  is crucial)
        var sep = '[-./_=+~#:;,]+';
        // Tokenise the string
        var tokens = str.split(/ +/);
        // Loop through each token checking what is is
        for (var i=0,len=tokens.length; i<len; ++i) {
            if (tokens[i]) {
                // Year
                if (tokens[i].match(/^\d\d\d\d$/)) {
                    defaults.year = tokens[i];
                }
                // Month
                var res = isMonth(tokens[i]);
                if (typeof res === 'number') {
                    defaults.month = res + 1; // Months are zero indexed
                }
                // Date
                if (tokens[i].match(/^\d?\d(?:st|nd|rd|th)?$/)) {
                    defaults.date = parseInt(tokens[i]);
                }
                // Time
                if (tokens[i].match(/^(\d\d):(\d\d):?(?:(\d\d))?$/)) {
                    defaults.hours   = parseInt(RegExp.$1);
                    defaults.minutes = parseInt(RegExp.$2);
                    if (RegExp.$3) {
                        defaults.seconds = parseInt(RegExp.$3);
                    }
                }
                // Dateformat: XXXX-XX-XX
                if (tokens[i].match(new RegExp('^(\\d\\d\\d\\d)' + sep + '(\\d\\d)' + sep + '(\\d\\d)$', 'i'))) {
                    defaults.date  = parseInt(RegExp.$3);
                    defaults.month = parseInt(RegExp.$2);
                    defaults.year  = parseInt(RegExp.$1);
                }
                // Dateformat: XX-XX-XXXX
                if (tokens[i].match(new RegExp('^(\\d\\d)' + sep + '(\\d\\d)' + sep + '(\\d\\d\\d\\d)$','i') )) {
                    defaults.date  = parseInt(RegExp.$1);
                    defaults.month = parseInt(RegExp.$2);
                    defaults.year  = parseInt(RegExp.$3);
                }
            }
        }
        // Now put the defaults into a format thats recognised by Date.parse()
        str = '{1}/{2}/{3} {4}:{5}:{6}'.format(
            defaults.year,
            String(defaults.month).length     === 1 ? '0' + (defaults.month) : defaults.month,
            String(defaults.date).length      === 1 ? '0' + (defaults.date)      : defaults.date,
            String(defaults.hours).length     === 1 ? '0' + (defaults.hours)     : defaults.hours,
            String(defaults.minutes).length   === 1 ? '0' + (defaults.minutes)   : defaults.minutes,
            String(defaults.seconds).length   === 1 ? '0' + (defaults.seconds)   : defaults.seconds
        );
        return Date.parse(str);
        //
        // Support functions
        //
        function isMonth(str)
        {
            var res = str.toLowerCase().match(months_regex);
            return res ? months[res[0]] : false;
        }
    };
    // The ObjectRegistry add function
    RG.SVG.OR.add = function (obj)
    {
        RG.SVG.OR.objects.push(obj);
        return obj;
    };
    // The ObjectRegistry function that returns all of the objects. Th argument
    // can aither be:
    //
    // o omitted  All of the registered objects are returned
    // o id:XXX  All of the objects on that SVG tag are returned
    // o type:XXX All the objects of that type are returned
    //
    RG.SVG.OR.get = function ()
    {
        // Fetch objects that are on a particular SVG tag
        if (typeof arguments[0] === 'string' && arguments[0].substr(0, 3).toLowerCase() === 'id:') {
            var ret = [];
            for (var i=0; i<RG.SVG.OR.objects.length; ++i) {
                if (RG.SVG.OR.objects[i].id === arguments[0].substr(3)) {
                    ret.push(RG.SVG.OR.objects[i]);
                }
            }
            return ret;
        }
        // Fetch objects that are of a particular type
        //
        // TODO Allow multiple types to be specified
        if (typeof arguments[0] === 'string' && arguments[0].substr(0, 4).toLowerCase() === 'type') {
            var ret = [];
            for (var i=0; i<RG.SVG.OR.objects.length; ++i) {
                if (RG.SVG.OR.objects[i].type === arguments[0].substr(5)) {
                    ret.push(RG.SVG.OR.objects[i]);
                }
            }
            return ret;
        }
        // Fetch an object that has a specific UID
        if (typeof arguments[0] === 'string' && arguments[0].substr(0, 3).toLowerCase() === 'uid') {
            var ret = [];
            for (var i=0; i<RG.SVG.OR.objects.length; ++i) {
                if (RG.SVG.OR.objects[i].uid === arguments[0].substr(4)) {
                    ret.push(RG.SVG.OR.objects[i]);
                }
            }
            return ret;
        }
        return RG.SVG.OR.objects;
    };
    // The ObjectRegistry function that returns all of the registeredt SVG tags
    //
    RG.SVG.OR.tags = function ()
    {
        var tags = [];
        for (var i=0; i<RG.SVG.OR.objects.length; ++i) {
            if (!tags[RG.SVG.OR.objects[i].svg.parentNode.id]) {
                tags[RG.SVG.OR.objects[i].svg.parentNode.id] = RG.SVG.OR.objects[i].svg;
            }
        }
        return tags;
    };
    //
    // This function returns a two element array of the SVG x/y position in
    // relation to the page
    // 
    // @param object svg
    //
    RG.SVG.getSVGXY = function (svg)
    {
        var x  = 0,
            y  = 0,
            el = svg.parentNode; // !!!
        do {
            x += el.offsetLeft;
            y += el.offsetTop;
            // Account for tables in webkit
            if (el.tagName.toLowerCase() == 'table' && (RG.SVG.ISCHROME || RG.SVG.ISSAFARI)) {
                x += parseInt(el.border) || 0;
                y += parseInt(el.border) || 0;
            }
            el = el.offsetParent;
        } while (el && el.tagName && el.tagName.toLowerCase() != 'body');
        var paddingLeft = svg.style.paddingLeft ? parseInt(svg.style.paddingLeft) : 0,
            paddingTop  = svg.style.paddingTop ? parseInt(svg.style.paddingTop) : 0,
            borderLeft  = svg.style.borderLeftWidth ? parseInt(svg.style.borderLeftWidth) : 0,
            borderTop   = svg.style.borderTopWidth  ? parseInt(svg.style.borderTopWidth) : 0;
        if (navigator.userAgent.indexOf('Firefox') > 0) {
            x += parseInt(document.body.style.borderLeftWidth) || 0;
            y += parseInt(document.body.style.borderTopWidth) || 0;
        }
        return [x + paddingLeft + borderLeft, y + paddingTop + borderTop];
    };
    //
    // This function is a compatibility wrapper around
    // the requestAnimationFrame function.
    //
    // @param function func The function to give to the
    //                      requestAnimationFrame function
    //
    RG.SVG.FX.update = function (func)
    {
        win.requestAnimationFrame =
            win.requestAnimationFrame ||
            win.webkitRequestAnimationFrame ||
            win.msRequestAnimationFrame ||
            win.mozRequestAnimationFrame ||
            (function (func){setTimeout(func, 16.666);});
        win.requestAnimationFrame(func);
    };
    /**
    * This function returns an easing multiplier for effects so they eas out towards the
    * end of the effect.
    * 
    * @param number frames The total number of frames
    * @param number frame  The frame number
    */
    RG.SVG.FX.getEasingMultiplier = function (frames, frame)
    {
        var multiplier = ma.pow(ma.sin((frame / frames) * RG.SVG.TRIG.HALFPI), 3);
        return multiplier;
    };
    /**
    * Measures text by creating a DIV in the document and adding the relevant
    * text to it, then checking the .offsetWidth and .offsetHeight.
    * 
    * @param  object opt An object containing the following:
    *                        o text( string) The text to measure
    *                        o bold (bool)   Whether the text is bold or not
    *                        o font (string) The font to use
    *                        o size (number) The size of the text (in pts)
    * 
    * @return array         A two element array of the width and height of the text
    */
    RG.SVG.measureText = function (opt)
    {
        //text, bold, font, size
        var text = opt.text || '',
            bold = opt.bold || false,
            font = opt.font || 'Arial',
            size = opt.size || 10,
            str  = text + ':' + bold + ':' + font + ':' + size;
        // Add the sizes to the cache as adding DOM elements is costly and causes slow downs
        if (typeof RG.SVG.measuretext_cache === 'undefined') {
            RG.SVG.measuretext_cache = [];
        }
        if (typeof RG.SVG.measuretext_cache == 'object' && RG.SVG.measuretext_cache[str]) {
            return RG.SVG.measuretext_cache[str];
        }
        if (!RG.SVG.measuretext_cache['text-span']) {
            var span = document.createElement('SPAN');
                span.style.position = 'absolute';
                //span.style.backgroundColor = 'red';
                span.style.padding    = 0;
                span.style.display    = 'inline';
                span.style.top        = '-200px';
                span.style.left       = '-200px';
                span.style.lineHeight = '1em';
            document.body.appendChild(span);
            // Now store the newly created DIV
            RG.SVG.measuretext_cache['text-span'] = span;
        } else if (RG.SVG.measuretext_cache['text-span']) {
            var span = RG.SVG.measuretext_cache['text-span'];
        }
        span.innerHTML        = text.replace(/\r?\n/g, '<br />');
        span.style.fontFamily = font;
        span.style.fontWeight = bold ? 'bold' : 'normal';
        span.style.fontSize   = String(size).replace(/pt$/, '') + 'pt';
        var sizes = [span.offsetWidth, span.offsetHeight];
        //document.body.removeChild(span);
        RG.SVG.measuretext_cache[str] = sizes;
        return sizes;
    };
    /**
    * This function converts an array of strings to an array of numbers. Its used by the meter/gauge
    * style charts so that if you want you can pass in a string. It supports various formats:
    * 
    * '45.2'
    * '-45.2'
    * ['45.2']
    * ['-45.2']
    * '45.2,45.2,45.2' // A CSV style string
    * 
    * @param number frames The string or array to parse
    */
    RG.SVG.stringsToNumbers = function (str)
    {
        // An optional seperator to use intead of a comma
        var sep = arguments[1] || ',';
        // If it's already a number just return it
        if (typeof str === 'number') {
            return str;
        }
        if (typeof str === 'string') {
            if (str.indexOf(sep) != -1) {
                str = str.split(sep);
            } else {
                str = parseFloat(str);
            }
        }
        if (typeof str === 'object') {
            for (var i=0,len=str.length; i<len; i+=1) {
                str[i] = parseFloat(str[i]);
            }
        }
        return str;
    };
    // This function allows for numbers that are given as a +/- adjustment
    RG.SVG.getAdjustedNumber = function (opt)
    {
        var value = opt.value,
            prop  = opt.prop;
        if (typeof prop === 'string' && match(/^(\+|-)([0-9.]+)/)) {
            if (RegExp.$1 === '+') {
                value += parseFloat(RegExp.$2);
            } else if (RegExp.$1 === '-') {
                value -= parseFloat(RegExp.$2);
            }
        }
        return value;
    };
    // NOT USED ANY MORE
    RG.SVG.attribution=function(){return;};
    /**
    * Parse a gradient and returns the various parts
    * 
    * @param string str The gradient string
    */
    RG.SVG.parseGradient = function (str)
    {
    };
    /**
    * Generates a random number between the minimum and maximum
    * 
    * @param number min The minimum value
    * @param number max The maximum value
    * @param number     OPTIONAL Number of decimal places
    */
    RG.SVG.random = function (opt)
    {
        var min = opt.min,
            max = opt.max,
            dp  = opt.dp || opt.decimals || 0,
            r   = ma.random();
        return Number((((max - min) * r) + min).toFixed(dp));
    };
    /**
    * Fill an array full of random numbers
    */
    RG.SVG.arrayRand    =
    RG.SVG.arrayRandom  =
    RG.SVG.random.array = function (opt)
    {
        var num = opt.num,
            min = opt.min,
            max = opt.max,
            dp  = opt.dp || opt.decimals || 0;
        for(var i=0,arr=[]; i<num; i+=1) {
            arr.push(RG.SVG.random({min: min, max: max, dp: dp}));
        }
        return arr;
    };
    //
    // This function is called by each objects setter so that common BC
    // and adjustments are centralised. And there's less typing for me too.
    //
    // @param object opt An object of options to the function, which are:
    //                    object: The chart object
    //                    name:   The name of the config parameter
    //                    value:  The value thats being set
    //
    RG.SVG.commonSetter = function (opt)
    {
        var obj   = opt.object,
            name  = opt.name,
            value = opt.value;
        // The default event for tooltips is click
        if (name === 'tooltipsEvent'&& value !== 'click' && value !== 'mousemove') {
            value = 'click';
        }
        return {
            name:  name,
            value: value
        };
    };
    //
    // Generates logs for... log charts
    //
    // @param object opt The options:
    //                     o num  The number
    //                     o base The base
    //
    RG.SVG.log = function (opt)
    {
        var num  = opt.num,
            base = opt.base;
        return ma.log(num) / (base ? ma.log(base) : 1);
    };
    RG.SVG.donut = function (opt)
    {
        var arcPath1 = RG.SVG.TRIG.getArcPath3({
            cx: opt.cx,
            cy: opt.cy,
            r: opt.outerRadius,
            start: 0,
            end: RG.SVG.TRIG.TWOPI,
            anticlockwise: false,
            lineto: false
        });
        var arcPath2 = RG.SVG.TRIG.getArcPath3({
            cx: opt.cx,
            cy: opt.cy,
            r: opt.innerRadius,
            start: RG.SVG.TRIG.TWOPI,
            end: 0,
            anticlockwise: true,
            lineto: false
        });
        //
        // Create the red circle
        //
        var path = RG.SVG.create({
            svg: opt.svg,
            type: 'path',
            attr: {
                d: arcPath1 + arcPath2,
                stroke: opt.stroke,
                fill: opt.fill
            }
        });
        return path;
    };
    //
    // Copy the globals (if any have been set) from the global object to
    // this instances configuration
    //
    RG.SVG.getGlobals = function (obj)
    {
        var prop = obj.properties;
        for (i in RG.SVG.GLOBALS) {
            if (typeof i === 'string') {
                prop[i] = RG.SVG.arrayClone(RG.SVG.GLOBALS[i]);
            }
        }
    };
    //
    // This function adds a link to the SVG document
    //
    // @param object opt The various options to the function
    //
    RG.SVG.link = function (opt)
    {
        var a = RGraph.SVG.create({
            svg: bar.svg,
            type: 'a',
            parent: bar.svg.all,
            attr: {
                'xlink:href': href,
                target:       target
            }
        });
        var text = RGraph.SVG.create({
            svg: bar.svg,
            type: 'text',
            parent: a,
            attr: {
                x: x,
                y: y,
                fill: fill
            }
        });
        text.innerHTML = text;
    };
    // This function is used to get the errorbar MAXIMUM value. Its in the common
    // file because it's used by multiple chart libraries
    //
    // @param object opt An object containing the arguments to the function
    //         o object: The chart object
    //         o index:  The index to fetch
    RG.SVG.getErrorbarsMaxValue = function (opt)
    {
        var obj   = opt.object,
            prop  = obj.properties,
            index = opt.index;
        if (typeof prop.errorbars === 'object' && !RG.SVG.isNull(prop.errorbars) && typeof prop.errorbars[index] === 'number') {
            var value = prop.errorbars[index];
        } else if (   typeof prop.errorbars === 'object'
                   && !RG.SVG.isNull(prop.errorbars)
                   && typeof prop.errorbars[index] === 'object'
                   && !RG.SVG.isNull(prop.errorbars[index])
                   && typeof prop.errorbars[index].max === 'number'
                  ) {
            var value = prop.errorbars[index].max;
        } else {
            var value = 0;
        }
        return value;
    };
    // This function is used to get the errorbar MINIMUM value. Its in the common
    // file because it's used by multiple chart libraries
    //
    // @param object opt An object containing the arguments to the function
    //         o object: The chart object
    //         o index:  The index to fetch
    RG.SVG.getErrorbarsMinValue = function (opt)
    {
        var obj   = opt.object,
            prop  = obj.properties,
            index = opt.index;
        if (   typeof prop.errorbars === 'object'
            && !RG.SVG.isNull(prop.errorbars)
            && typeof prop.errorbars[index] === 'object'
            && !RG.SVG.isNull(prop.errorbars[index])
            && typeof prop.errorbars[index].min === 'number'
           ) {
            var value = prop.errorbars[index].min;
        } else {
            var value = null;
        }
        return value;
    };
    // This function is used to get the errorbar color. Its in the common
    // file because it's used by multiple chart libraries
    //
    // @param object opt An object containing the arguments to the function
    //         o object: The chart object
    //         o index:  The index to fetch
    RG.SVG.getErrorbarsColor = function (opt)
    {
        var obj   = opt.object,
            prop  = obj.properties,
            index = opt.index;
        var color = prop.errorbarsColor || 'black';
        if (typeof prop.errorbars === 'object' && !RG.SVG.isNull(prop.errorbars) && typeof prop.errorbars[index] === 'object' && !RG.SVG.isNull(prop.errorbars[index]) && typeof prop.errorbars[index].color === 'string') {
            color = prop.errorbars[index].color;
        }
        return color;
    };
    // This function is used to get the errorbar linewidth. Its in the common
    // file because it's used by multiple chart libraries
    //
    // @param object opt An object containing the arguments to the function
    //         o object: The chart object
    //         o index:  The index to fetch
    RG.SVG.getErrorbarsLinewidth = function (opt)
    {
        var obj   = opt.object,
            prop  = obj.properties,
            index = opt.index;
        var linewidth = prop.errorbarsLinewidth || 1
        if (typeof prop.errorbars === 'object' && !RG.SVG.isNull(prop.errorbars) && typeof prop.errorbars[index] === 'object' && !RG.SVG.isNull(prop.errorbars[index]) && typeof prop.errorbars[index].linewidth === 'number') {
            linewidth = prop.errorbars[index].linewidth;
        }
        return linewidth;
    };
    // This function is used to get the errorbar capWidth. Its in the common
    // file because it's used by multiple chart libraries
    //
    // @param object opt An object containing the arguments to the function
    //         o object: The chart object
    //         o index:  The index to fetch
    RG.SVG.getErrorbarsCapWidth = function (opt)
    {
        var obj   = opt.object,
            prop  = obj.properties,
            index = opt.index;
        var capwidth = prop.errorbarsCapwidth || 10
        if (   typeof prop.errorbars === 'object'
            && !RG.SVG.isNull(prop.errorbars)
            && typeof prop.errorbars[index] === 'object'
            && !RG.SVG.isNull(prop.errorbars[index])
            && typeof prop.errorbars[index].capwidth === 'number'
            ) {
            capwidth = prop.errorbars[index].capwidth;
        }
        return capwidth;
    };
    //
    // This is here so that if the tooltip library has not
    // been included, this function will show an alert
    //informing the user
    //
    if (typeof RG.SVG.tooltip !== 'function') {
        RG.SVG.tooltip = function ()
        {
            $$a('The tooltip library has not been included!');
        };
    }
// End module pattern
})(window, document);
/**
* Loosly mimicks the PHP function print_r();
*/
window.$p = function (obj)
{
    var indent = (arguments[2] ? arguments[2] : '    ');
    var str    = '';
    var counter = typeof arguments[3] == 'number' ? arguments[3] : 0;
    if (counter >= 5) {
        return '';
    }
    switch (typeof obj) {
        case 'string':    str += obj + ' (' + (typeof obj) + ', ' + obj.length + ')'; break;
        case 'number':    str += obj + ' (' + (typeof obj) + ')'; break;
        case 'boolean':   str += obj + ' (' + (typeof obj) + ')'; break;
        case 'function':  str += 'function () {}'; break;
        case 'undefined': str += 'undefined'; break;
        case 'null':      str += 'null'; break;
        case 'object':
            // In case of null
            if (RGraph.SVG.isNull(obj)) {
                str += indent + 'null\n';
            } else {
                str += indent + 'Object {' + '\n'
                for (j in obj) {
                    str += indent + '    ' + j + ' => ' + window.$p(obj[j], true, indent + '    ', counter + 1) + '\n';
                }
                str += indent + '}';
            }
            break;
        default:
            str += 'Unknown type: ' + typeof obj + '';
            break;
    }
    /**
    * Finished, now either return if we're in a recursed call, or alert()
    * if we're not.
    */
    if (!arguments[1]) {
        alert(str);
    }
    return str;
};
/**
* A shorthand for the default alert() function
*/
window.$$a = function (v)
{
    alert(v);
};
/**
* Short-hand for console.log
* 
* @param mixed v The variable to log to the console
*/
window.$cl = function (v)
{
    return console.log(v);
};
/**
* A basic string formatting function. Use it like this:
* 
* var str = '{1} {2} {3}'.format('a', 'b', 'c');
* 
* Outputs: a b c
*/
if (!String.prototype.format) {
  String.prototype.format = function()
  {
    var args = arguments;
    return this.replace(/{(\d+)}/g, function(str, idx)
    {
      return typeof args[idx - 1] !== 'undefined' ? args[idx - 1] : str;
    });
  };
};
// version: 2018-06-24-143455
    /**
    * o--------------------------------------------------------------------------------o
    * | This file is part of the RGraph package - you can learn more at:               |
    * |                                                                                |
    * |                          http://www.rgraph.net                                 |
    * |                                                                                |
    * | RGraph is licensed under the Open Source MIT license. That means that it's     |
    * | totally free to use and there are no restrictions on what you can do with it!  |
    * o--------------------------------------------------------------------------------o
    */
    /**
    * Initialise the various objects
    */
    RGraph = window.RGraph || {isRGraph: true};
    RGraph.CSV = function (url, func)
    {
        var RG  = RGraph,
            ua  = navigator.userAgent,
            ma  = Math;
        /**
        * Some default values
        */
        this.url       = url;
        this.ready     = func;
        this.data      = null;
        this.numrows   = null;
        this.numcols   = null;
        this.seperator = arguments[2] || ',';
        this.endofline = arguments[3] || /\r?\n/;
        /**
        * A Custom split function
        * 
        * @param string str  The CSV string to split
        * @param mixed  char The character to split on - or it can also be an object like this:
        *                    {
        *                        preserve: false, // Whether to preserve whitespace
        *                        char: ','        // The character to split on
        *                    }
        */
        this.splitCSV = function (str, split)
        {
            // Defaults
            var arr            = [];
            var field          = '';
            var inDoubleQuotes = false;
            var inSingleQuotes = false;
            var preserve       = (typeof split === 'object' && split.preserve) ? true : false;
            // The character to split the CSV string on
            if (typeof split === 'object') {
                if (typeof split.char === 'string') {
                    split = split.char;
                } else {
                    split = ',';
                }
            } // If not an object just leave the char as it's supplied
            for (var i=0,len=str.length; i<len; i+=1) {
                char = str.charAt(i);
                if ( (char === '"') && !inDoubleQuotes) {
                    inDoubleQuotes = true;
                    continue;
                } else if ( (char === '"') && inDoubleQuotes) {
                    inDoubleQuotes = false;
                    continue;
                }
                if ( (char === "'") && !inSingleQuotes) {
                    inSingleQuotes = true;
                    continue;
                } else if ( (char === "'") && inSingleQuotes) {
                    inSingleQuotes = false;
                    continue;
                } else if (char === split && !inDoubleQuotes && !inSingleQuotes) {
// TODO look ahead in order to allow for multi-character seperators
                    arr.push(field);
                    field = '';
                    continue;
                } else {
                    field = field + char;
                }
            }
            // Add the last field
            arr.push(field);
            // Now trim each value if necessary
            if (!preserve) {
                for (i=0,len=arr.length; i<len; i+=1) {
                    arr[i] = arr[i].trim();
                }
            }
            return arr;
        };
        /**
        * This function splits the CSV data into an array so that it can be useful.
        */
        this.fetch = function ()
        {
            var sep = this.seperator,
                eol = this.endofline,
                obj = this;
            if (this.url.substring(0,3) === 'id:' || this.url.substring(0,4) === 'str:') {
                // Get rid of any surrounding whitespace
                if (this.url.substring(0,3) === 'id:') {
                    var data = document.getElementById(this.url.substring(3)).innerHTML.trim();
                } else if (this.url.substring(0,4) === 'str:') {
                    var data = this.url.substring(4).trim();
                }
                // Store the CSV data on the CSV object (ie - this object)
                obj.data = data.split(eol);
                // Store the number of rows
                obj.numrows = obj.data.length;
                for (var i=0,len=obj.data.length; i<len; i+=1) {
                    /**
                    * Split the individual line
                    */
                    //var row = obj.data[i].split(sep);
                    var row = obj.splitCSV(obj.data[i], {preserve: false, char: sep});
                    if (!obj.numcols) {
                        obj.numcols = row.length;
                    }
                    /**
                    * If the cell is purely made up of numbers - convert it
                    */
                    for (var j=0; j<row.length; j+=1) {
                        if ((/^\-?[0-9.]+$/).test(row[j])) {
                            row[j] = parseFloat(row[j]);
                        }
                        // Assign the split-up-row back to the data array
                        obj.data[i] = row;
                    }
                }
                // Call the ready function straight away
                obj.ready(obj);
            } else {
                RGraph.SVG.AJAX.getString(this.url, function (data)
                {
                    data = data.replace(/(\r?\n)+$/, '');
                    /**
                    * Split the lines in the CSV
                    */
                    obj.data = data.split(eol);
                    /**
                    * Store the number of rows
                    */
                    obj.numrows = obj.data.length;
                    /**
                    * Loop thru each lines in the CSV file
                    */
                    for (var i=0,len=obj.data.length; i<len; i+=1) {
                        /**
                        * Use the new split function to split each row NOT preserving whitespace
                        */
                        //var row = obj.data[i].split(sep);
                        var row = obj.splitCSV(obj.data[i], {preserve: false, char: sep});
                        if (!obj.numcols) {
                            obj.numcols = row.length;
                        }
                        /**
                        * If the cell is purely made up of numbers - convert it
                        */
                        for (var j=0; j<row.length; j+=1) {
                            if ((/^\-?[0-9.]+$/).test(row[j])) {
                                row[j] = parseFloat(row[j]);
                            }
                            // Assign the split-up-row back to the data array
                            obj.data[i] = row;
                        }
                    }
                    // Call the ready function straight away
                    obj.ready(obj);
                });
            }
        };
        /**
        * Returns a row of the CSV file
        * 
        * @param number index The index of the row to fetch
        * @param        start OPTIONAL If desired you can specify a column to start at (which starts at 0 by default)
        */
        this.getRow = function (index)
        {
            var row   = [];
            var start = arguments[1] || 0;
            for (var i=start; i<this.numcols; i+=1) {
                row.push(this.data[index][i]);
            }
            return row;
        };
        /**
        * Returns a column of the CSV file
        * 
        * @param number index The index of the column to fetch
        * @param        start OPTIONAL If desired you can specify a row to start at (which starts at 0 by default)
        */
        this.getCol =
        this.getColumn = function (index)
        {
            var col   = [];
            var start = arguments[1] || 0;
            for (var i=start; i<this.numrows; i+=1) {
                col.push(this.data[i][index]);
            }
            return col;
        };
        // Fetch the CSV file
        this.fetch();
    };;
// version: 2018-06-24-143455
    /**
    * o--------------------------------------------------------------------------------o
    * | This file is part of the RGraph package - you can learn more at:               |
    * |                                                                                |
    * |                          http://www.rgraph.net                                 |
    * |                                                                                |
    * | RGraph is licensed under the Open Source MIT license. That means that it's     |
    * | totally free to use and there are no restrictions on what you can do with it!  |
    * o--------------------------------------------------------------------------------o
    */
    /**
    * This is a library of a few functions that make it easier to do
    * effects like fade-ins or eaxpansion.
    */
    /**
    * Initialise the various objects
    */
    RGraph        = window.RGraph || {isRGraph: true};
    RGraph.SVG    = RGraph.SVG    || {};
    RGraph.SVG.FX = RGraph.SVG.FX || {};
// Module pattern
(function (win, doc, undefined)
{
    var RG = RGraph,
        ua = navigator.userAgent,
        ma = Math;
    /**
    * This functions adds the generic effects to thechart object
    * 
    * @param object obj The chart object
    */
    RG.SVG.FX.decorate = function (obj)
    {
        for (i in RG.SVG.FX) {
            if (typeof RG.SVG.FX[i] === 'function') {
                obj[i] = RG.SVG.FX[i];
            }
        }
    };
    /**
    * fadeIn
    * 
    * This function simply uses the CSS opacity property - initially set to zero and
    * increasing to 1 over the period of 0.5 second
    */
    RG.SVG.FX.fadein = function ()
    {
        // This function gets added to the chart object - so the this
        // variable is the chart object
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            duration = (frames / 60) * 1000,
            frame    = 0,
            callback = opt.callback || function () {};
        // Initially the opacity should be zero
        obj.svg.style.opacity = 0;
        // Draw the chart
        RG.SVG.redraw(this.svg);
        // Now fade the chart in
        for (var i=1; i<=frames; ++i) {
            (function (index)
            {
                setTimeout(function ()
                {
                    obj.svg.style.opacity = (index / frames);
                    if (index >= frames) {
                        callback(obj);
                    }
                }, (index / frames) * duration);
            })(i)
        }
        return this;
    };
    /**
    * fadeOut
    * 
    * This function is a reversal of the above function - fading out instead of in
    */
    RG.SVG.FX.fadeout = function ()
    {
        // This function gets added to the chart object - so the this
        // variable is the chart object
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            duration = (frames / 60) * 1000,
            frame    = 0,
            callback = opt.callback || function () {};
         //RG.SVG.redraw()
        // Now fade the chart out
        for (var i=1; i<=frames; ++i) {
            (function (index)
            {
                setTimeout(function ()
                {
                    obj.svg.style.opacity = 1 - (index / frames);
                    if (index >= frames) {
                        callback(obj);
                    }
                }, (index / frames) * duration);
            })(i)
        }
        return this;
    };
    /**
    * fadeSlideIn
    * 
    * This function fades the canvas in in a sliding motion
    */
    RG.SVG.FX.fadeslidein = function ()
    {
        // This function gets added to the chart object - so the this
        // variable is the chart object
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            frame    = 0,
            pc       = -20,
            step     = (120 - pc) / frames,
            color    = opt.color || 'white',
            width    = this.container.offsetWidth,
            height   = this.container.offsetHeight,
            callback = opt.callback || function () {};
        // Draw the chart
        RG.SVG.redraw(this.svg);
        // Create the cover
        $('<div id="rgraph_fadeslide_cover_' + obj.id + '"></div>').css({
            background: 'linear-gradient(135deg, rgba(255,255,255,0) ' + pc + '%, ' + color + ' ' + (pc + 20) + '%)',
            width:      width  + 'px',
            height:     height + 'px',
            top:        0,
            left:       0,
            position:   'absolute'
        }).appendTo($(this.container));
        function iterator ()
        {
            if (pc < 120) {
                $('div#rgraph_fadeslide_cover_' + obj.id).css({
                    background: 'linear-gradient(135deg, rgba(255,255,255,0) ' + pc + '%, ' + color + ' ' + (pc + 20) + '%)'
                });
                pc += step;
                RG.SVG.FX.update(iterator);
            } else {
                $('div#rgraph_fadeslide_cover_' + obj.id).remove();
                callback(obj);
            }
        }
        iterator();
        return this;
    };
    //
    // fadeSlideOut
    //
    // Fades the canvas out in a sliding motion. This function gets added
    // to the chart object - so the this variable is the chart object
    //
    RG.SVG.FX.fadeslideout = function ()
    {
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            frame    = 0,
            pc       = -20,
            step     = (120 - pc) / frames,
            canvasXY = RG.SVG.getSVGXY(obj.svg),
            color    = opt.color || 'white',
            width    = this.container.offsetWidth,
            height   = this.container.offsetHeight,
            callback = opt.callback || function () {};
        // Draw the chart
        //RG.SVG.redraw(this.svg);
        // Create the cover
        $('<div id="rgraph_fadeslide_cover_' + obj.id + '"></div>').css({
            background: 'linear-gradient(135deg, ' + color + ' ' + pc + '%, rgba(255,255,255,0) ' + (pc + 20) + '%)',
            width:      width + 'px',
            height:     height + 'px',
            top:        0,
            left:       0,
            position:   'absolute'
        }).appendTo($(obj.svg.parentNode));
        function iterator ()
        {
            if (pc < 120) {
                $('div#rgraph_fadeslide_cover_' + obj.id).css({
                                                               background: 'linear-gradient(135deg, ' + color + ' ' + pc + '%, rgba(255,255,255,0) ' + (pc + 20) + '%)'
                                                              });
                pc += step;
                RG.SVG.FX.update(iterator);
            } else {
                RG.SVG.clear(obj.svg);
                $('div#rgraph_fadeslide_cover_' + obj.id).remove();
                callback(obj);
            }
        }
        iterator();
        return this;
    };
    //
    // fadeCircularIn
    // 
    // This function uses radial CSS gradients to cover the canvas with a radial fade in effect
    // (from the center outwards)
    //
    RG.SVG.FX.fadecircularinoutwards = function ()
    {
        // This function gets added to the chart object - so the 'this'
        // variable is the chart object
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            frame    = 1,
            radius   = 0,
            svgXY    = RG.SVG.getSVGXY(obj.svg),
            color    = opt.color || 'white',
            callback = opt.callback || function () {};
        // Draw the chart
        RG.SVG.redraw(this.svg);
        // Create the cover
        $('<div id="rgraph_fadecircularinoutwards_cover_' + obj.id + '"></div>').css({
            background: 'radial-gradient(rgba(255,255,255,0) 0%, ' + color + ' ' + radius + '%)',
            width:      this.container.offsetWidth + 'px',
            height:     this.container.offsetHeight + 'px',
            top:        0,
            left:       0,
            position:   'absolute'
        }).appendTo($(obj.svg.parentNode));
        function iterator ()
        {
            if (frame < frames) {
                    $('div#rgraph_fadecircularinoutwards_cover_' + obj.id).css({
                        background: 'radial-gradient(rgba(255,255,255,0) ' + ((frame++ / frames) * 100) + '%, ' + color + ' ' + ((frame++ / frames) * 150) + '%)'
                    });
                    RG.SVG.FX.update(iterator);
            } else {
                $('div#rgraph_fadecircularinoutwards_cover_' + obj.id).remove();
                callback(obj);
            }
        }
        iterator();
        return this;
    };
    //
    // fadecircularoutoutwards
    // 
    // This function uses radial CSS gradients to cover the canvas with a radial fade out effect
    // (from the center outwards)
    //
    RG.SVG.FX.fadecircularoutoutwards = function ()
    {
        // This function gets added to the chart object - so the this
        // variable is the chart object
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            frame    = 0,
            width    = this.container.offsetWidth,
            height   = this.container.offsetHeight,
            canvasXY = RG.SVG.getSVGXY(obj.svg),
            color    = opt.color || 'white',
            callback = opt.callback || function () {};
        // Draw the chart
        //RG.SVG.redraw(this.svg);
        // Create the cover
        $('<div id="rgraph_fadeslide_cover_' + obj.id + '"></div>').css({
            background: 'radial-gradient(rgba(255,255,255,0) 0%, transparent 0%)',
            width:      width + 'px',
            height:     height + 'px',
            top:        0,
            left:       0,
            position:   'absolute'
        }).appendTo($(obj.svg.parentNode));
        function iterator ()
        {
            if (frame < frames) {
                    $('div#rgraph_fadeslide_cover_' + obj.id).css({
                        background: 'radial-gradient(' + color + ' ' + ((frame++ / frames) * 100) + '%, rgba(255,255,255,0) ' + ((frame++ / frames) * 150) + '%)'
                    });
                    RG.SVG.FX.update(iterator);
            } else {
                RG.SVG.clear(obj.svg);
                $('div#rgraph_fadeslide_cover_' + obj.id).remove();
                callback(obj);
            }
        }
        iterator();
        return this;
    };
    //
    // fadeCircularInInwards
    //
    // This function gets added to the chart object - so the 'this'
    // variable is the chart object
    //
    RG.SVG.FX.fadecircularininwards = function ()
    {
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            frame    = 0,
            radius   = ma.max(
                obj.container.offsetWidth,
                obj.container.offsetHeight
            ),
            color    = opt.color || 'white',
            callback = opt.callback || function () {};
        // Draw the chart
        RG.SVG.redraw(this.svg);
        // Create the cover
        $('<div id="rgraph_fadeslide_cover_' + obj.id + '"></div>').css({
            background: 'radial-gradient(rgba(255,255,255,0) 100%, rgba(255,255,255,0) 0%)',
            width:      this.container.offsetWidth + 'px',
            height:     this.container.offsetHeight + 'px',
            top:        0,
            left:       0,
            position:   'absolute'
        }).appendTo($(obj.svg.parentNode));
        function iterator ()
        {
            if (frame < frames) {
                    $('div#rgraph_fadeslide_cover_' + obj.id).css({
                        background: 'radial-gradient(' + color + ' ' + (( (frames - frame++) / frames) * 100) + '%, rgba(255,255,255,0) ' + (( (frames - frame++) / frames) * 120) + '%)'
                    });
                    RG.SVG.FX.update(iterator);
            } else {
                $('div#rgraph_fadeslide_cover_' + obj.id).remove();
                callback(obj);
            }
        }
        iterator();
        return this;
    };
    //
    // fadecircularoutinwards
    //
    // This function gets added to the chart object - so the this
    // variable is the chart object
    //
    RG.SVG.FX.fadecircularoutinwards = function ()
    {
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            frame    = 0,
            radius   = ma.max(
                this.container.offsetWidth,
                this.container.offsetHeight
            ),
            color    = opt.color || 'white',
            callback = opt.callback || function () {};
        // Draw the chart
        //RG.SVG.redraw(this.svg);
        // Create the cover
        $('<div id="rgraph_fadeslide_cover_' + this.id + '"></div>').css({
            background: 'radial-gradient(rgba(255,255,255,0) 0%, rgba(255,255,255,0) 0%)',
            width:      this.container.offsetWidth + 'px',
            height:     this.container.offsetHeight + 'px',
            top:        0,
            left:       0,
            position:   'absolute'
        }).appendTo($(obj.svg.parentNode));
        function iterator ()
        {
            if (frame < frames) {
                    $('div#rgraph_fadeslide_cover_' + obj.id).css({
                        background: 'radial-gradient(rgba(255,255,255,0) ' + (( (frames - frame++) / frames) * 100) + '%, ' + color + ' ' + (( (frames - frame++) / frames) * 120) + '%)'
                    });
                    RG.SVG.FX.update(iterator);
            } else {
                RG.SVG.clear(obj.svg);
                $('div#rgraph_fadeslide_cover_' + obj.id).remove();
                callback(obj);
            }
        }
        iterator();
        return this;
    };
    //
    // Reveal
    // 
    // With this effect the chart is slowly revealed from the centre outwards. This
    // function gets added to the chart object - so the 'this' variable is the chart
    // object
    // 
    // @param object    Options for the effect. You can give frames here
    // @param function  An optional callback function
    //
    RG.SVG.FX.reveal = function ()
    {
        var obj       = this,
            opt       = arguments[0] || {}
            color     = opt.color    || 'white',
            frames    = opt.frames   || 90,
            duration  = (frames / 60) * 1000,
            callback  = opt.callback || function () {}
        var divs = [
            ['rgraph_reveal_left_'   + this.id, 0, 0, this.container.offsetWidth  / 2, this.container.offsetHeight],
            ['rgraph_reveal_right_'  + this.id,(this.container.offsetWidth  / 2),0,(this.container.offsetWidth  / 2),this.container.offsetHeight],
            ['rgraph_reveal_top_'    + this.id,0,0,this.container.offsetWidth,(this.container.offsetHeight / 2)],
            ['rgraph_reveal_bottom_' + this.id,0,(this.container.offsetHeight  / 2),this.container.offsetWidth,(this.container.offsetHeight / 2)]
        ];
        for (var i=0,len=divs.length; i<len; ++i) {
            var div = doc.createElement('DIV');
                div.id                    = divs[i][0];
                div.style.left            = divs[i][1] + 'px';
                div.style.top             = divs[i][2] + 'px';
                div.style.width           = divs[i][3] + 'px';
                div.style.height          = divs[i][4] + 'px';
                div.style.position        = 'absolute';
                div.style.backgroundColor = color;
            this.container.appendChild(div);
        }
        // Redraw
        RG.SVG.redraw(obj.svg);
        // Animate the shrinking of the DIVs
        jQuery('#rgraph_reveal_left_'   + obj.id).animate({width: 0}, duration);
        jQuery('#rgraph_reveal_right_'  + obj.id).animate({left: '+=' + (this.container.offsetWidth / 2),width: 0}, duration);
        jQuery('#rgraph_reveal_top_'    + obj.id).animate({height: 0}, duration);
        jQuery('#rgraph_reveal_bottom_' + obj.id).animate({top: '+=' + (this.container.offsetHeight / 2),height: 0}, duration);
        // Remove the DIVs from the DOM 100ms after the animation ends
        setTimeout(function ()
        {
            obj.container.removeChild(doc.getElementById("rgraph_reveal_top_" + obj.id));
            obj.container.removeChild(doc.getElementById("rgraph_reveal_bottom_" + obj.id));
            obj.container.removeChild(doc.getElementById("rgraph_reveal_left_" + obj.id));
            obj.container.removeChild(doc.getElementById("rgraph_reveal_right_" + obj.id));
            callback(obj);
        }, duration);
        return this;
    };
    //
    // Conceal
    // 
    // This effect is the reverse of the Reveal effect - instead of revealing
    // the canvas it conceals it. Combined with the reveal effect would make
    // for a nice wipe effect.
    // 
    // @param object obj The chart object
    ///
    RG.SVG.FX.conceal = function ()
    {
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames   || 90,
            callback = opt.callback || function () {},
            color    = opt.color    || 'white',
            duration = (frames / 60) * 1000,
            frame    = 0;
        var divs = [
            ['rgraph_conceal_left_' + obj.id, 0, 0, 0, this.container.offsetHeight],
            ['rgraph_conceal_right_' + obj.id,this.container.offsetWidth,0,0,this.container.offsetHeight],
            ['rgraph_conceal_top_' + obj.id,0,0,this.container.offsetWidth,0],
            ['rgraph_conceal_bottom_' + obj.id,0,this.container.offsetHeight,this.container.offsetWidth,0]
        ];
        for (var i=0,len=divs.length; i<len; ++i) {
            var div = doc.createElement('DIV');
                div.id                    = divs[i][0];
                div.style.left            = divs[i][1] + 'px';
                div.style.top             = divs[i][2] + 'px';
                div.style.width           = divs[i][3] + 'px';
                div.style.height          = divs[i][4] + 'px';
                div.style.position        = 'absolute';
                div.style.backgroundColor = color;
            this.container.appendChild(div);
        }
        jQuery('#rgraph_conceal_left_' + obj.id).animate({width: '+=' + (this.container.offsetWidth / 2)}, duration);
        jQuery('#rgraph_conceal_right_' + obj.id).animate({left: '-=' + (this.container.offsetWidth / 2),width: (this.container.offsetWidth / 2)}, duration);
        jQuery('#rgraph_conceal_top_' + obj.id).animate({height: '+=' + (this.container.offsetHeight / 2)}, duration);
        jQuery('#rgraph_conceal_bottom_' + obj.id).animate({top: '-=' + (this.container.offsetHeight / 2),height: (this.container.offsetHeight / 2)}, duration);
        // Remove the DIVs from the DOM 100ms after the animation ends
        setTimeout(
            function ()
            {
                obj.container.removeChild(doc.getElementById("rgraph_conceal_top_" + obj.id));
                obj.container.removeChild(doc.getElementById("rgraph_conceal_bottom_" + obj.id));
                obj.container.removeChild(doc.getElementById("rgraph_conceal_left_" + obj.id));
                obj.container.removeChild(doc.getElementById("rgraph_conceal_right_" + obj.id));
                RG.SVG.clear(obj.svg);
                callback(obj);
            },
            duration
        );
        return this;
    };
    //
    // Horizontal Blinds (open)
    // 
    // @params object obj The graph object
    //
    RG.SVG.FX.hblindsopen = function ()
    {
        // This function gets added to the chart object - so the this
        // variable is the chart object
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            duration = (frames / 60) * 1000,
            frame    = 0,
            callback = opt.callback || function () {},
            color    = opt.color || 'white',
            height   = this.container.offsetHeight / 5;
        //
        // First draw the chart
        //
        RG.SVG.redraw(this.svg);
        for (var i=0; i<5; ++i) {
            var div = doc.createElement('DIV');
                div.id                    = 'rgraph_hblinds_' + i + '_' + obj.id;
                div.style.left            = 0;
                div.style.top             = ((this.container.offsetHeight * (i / 5))) + 'px';
                div.style.width           = this.container.offsetWidth + 'px';
                div.style.height          = (this.container.offsetHeight / 5) + 'px';
                div.style.position        = 'absolute';
                div.style.backgroundColor = color;
            this.container.appendChild(div);
            jQuery('#rgraph_hblinds_' + i + '_' + obj.id).animate({height: 0}, duration);
        }
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_hblinds_0_' + obj.id));}, duration);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_hblinds_1_' + obj.id));}, duration);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_hblinds_2_' + obj.id));}, duration);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_hblinds_3_' + obj.id));}, duration);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_hblinds_4_' + obj.id));}, duration);
        setTimeout(function () {callback(obj);}, duration);
        return this;
    };
    //
    // Horizontal Blinds (close)
    // 
    // This function gets added to the chart object - so the this
    // variable is the chart object
    //
    // @params object obj The graph object
    //
    RG.SVG.FX.hblindsclose = function ()
    {
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            duration = (frames / 60) * 1000,
            frame    = 0,
            callback = opt.callback || function () {},
            color    = opt.color = 'white',
            height   = this.container.offsetHeight / 5;
        for (var i=0; i<5; ++i) {
            var div = doc.createElement('DIV');
                div.id                    = 'rgraph_hblinds_' + i + '_' + obj.id;
                div.style.left            = 0;
                div.style.top             = (this.container.offsetHeight * (i / 5)) + 'px';
                div.style.width           = this.container.offsetWidth + 'px';
                div.style.height          = 0;
                div.style.position        = 'absolute';
                div.style.backgroundColor = color;
            this.container.appendChild(div);
            jQuery('#rgraph_hblinds_' + i + '_' + obj.id)
                .animate({
                    height: height + 'px'
                }, duration);
        }
        setTimeout(function () {RG.SVG.clear(obj.svg);}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_hblinds_0_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_hblinds_1_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_hblinds_2_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_hblinds_3_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_hblinds_4_' + obj.id));}, duration + 100);
        setTimeout(function () {callback(obj);}, duration + 100);
    };
    //
    // Vertical Blinds (open)
    // 
    // @params object obj The graph object
    //
    // This function gets added to the chart object - so the this
    // variable is the chart object
    RG.SVG.FX.vblindsopen = function ()
    {
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            duration = (frames / 60) * 1000,
            frame    = 0,
            callback = opt.callback || function () {},
            color    = opt.color || 'white',
            width    = this.container.offsetWidth / 10;
        //
        // First draw the chart
        //
        RG.SVG.redraw(obj.svg);
        for (var i=0; i<10; ++i) {
            var div = doc.createElement('DIV');
                div.id = 'rgraph_vblinds_' + i + '_' + obj.id;
                div.style.width           =  width + 'px';
                div.style.height          = this.container.offsetHeight + 'px';
                div.style.left            = (this.container.offsetWidth * (i / 10)) + 'px';
                div.style.top             = 0;
                div.style.position        = 'absolute';
                div.style.backgroundColor = color;
            obj.container.appendChild(div);
            jQuery('#rgraph_vblinds_' + i + '_' + obj.id).animate({width: 0}, duration);
        }
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_0_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_1_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_2_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_3_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_4_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_5_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_6_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_7_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_8_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_9_' + obj.id));}, duration + 100);
        setTimeout(function () {callback(obj);}, duration + 100);
        return this;
    };
    //
    // Vertical Blinds (close)
    //
    // This function gets added to the chart object - so the this
    // variable is the chart object
    // 
    // @params object obj The graph object
    //
    RG.SVG.FX.vblindsclose = function ()
    {
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            duration = (frames / 60) * 1000,
            frame    = 0,
            callback = opt.callback || function () {},
            color    = opt.color || 'white',
            width    = this.container.offsetWidth / 10;
        // Create the blinds
        for (var i=0; i<10; ++i) {
            var div = doc.createElement('DIV');
                div.id                    = 'rgraph_vblinds_' + i + '_' + obj.id;
                div.style.left            = (this.container.offsetWidth * (i / 10)) + 'px';
                div.style.top             = 0;
                div.style.width           = 0;
                div.style.height          = this.container.offsetHeight + 'px';
                div.style.position        = 'absolute';
                div.style.backgroundColor = color;
            this.container.appendChild(div);
            jQuery('#rgraph_vblinds_' + i + '_' + obj.id).animate({width: width}, duration);
        }
        setTimeout(function () {RG.SVG.clear(obj.svg);}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_0_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_1_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_2_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_3_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_4_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_5_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_6_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_7_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_8_' + obj.id));}, duration + 100);
        setTimeout(function () {obj.container.removeChild(doc.getElementById('rgraph_vblinds_9_' + obj.id));}, duration + 100);
        setTimeout(function () {callback(obj);}, duration + 100);
        return this;
    };
    //
    // Slide in
    // 
    // This function is a wipe that can be used when switching the canvas to a
    // new graph
    //
    // This function gets added to the chart object - so the this
    // variable is the chart object
    // 
    // @param object obj The graph object
    //
    RG.SVG.FX.slidein = function ()
    {
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            duration = (frames / 60) * 1000,
            frame    = 0,
            callback = opt.callback || function () {},
            color    = opt.color || 'white',
            width    = this.container.offsetWidth / 10,
            from     = opt.from || 'left';
        this.container.style.overflow = 'hidden';
        RG.SVG.redraw(this.svg);
        this.svg.style.position = 'relative';
        if (from == 'left') {
            this.svg.style.left = (0 - this.container.offsetWidth) + 'px';
            this.svg.style.top  = 0;
        } else if (from == 'top') {
            this.svg.style.left = 0;
            this.svg.style.top  = (0 - this.container.offsetHeight) + 'px';
        } else if (from == 'bottom') {
            this.svg.style.left = 0;
            this.svg.style.top  = this.container.offsetHeight + 'px';
        } else {
            this.svg.style.left = this.container.offsetWidth + 'px';
            this.svg.style.top  = 0;
        }
        jQuery(this.svg).animate({left:0,top:0}, duration, function ()
        {
            callback(obj);
        });
        return this;
    };
    //
    // Slide out
    // 
    // This function is a wipe that can be used when switching the canvas to a new graph
    // 
    // @param object   Optional object containing configuration.
    // @param function Optional callback function
    //
    RG.SVG.FX.slideout = function ()
    {
        // This function gets added to the chart object - so the this
        // variable is the chart object
        var opt      = arguments[0] || {},
            frames   = opt.frames   || 90,
            color    = opt.color    || 'white',
            to       = opt.to       || 'left',
            duration = (frames / 60) * 1000,
            frame    = 0,
            callback = opt.callback || function () {},
            width    = this.container.offetsWidth / 10;
        this.container.style.overflow= 'hidden';
        this.svg.style.position = 'relative';
        this.svg.style.left     = 0;
        this.svg.style.top      = 0;
        if (to == 'left') {
            jQuery(this.svg).animate({left: (0 - this.container.offsetWidth) + 'px'}, duration, function () {callback(this);});
        } else if (to == 'top') {
            jQuery(this.svg).animate({left: 0, top: (0 - this.container.offsetHeight) + 'px'}, duration, function () {callback(this);});
        } else if (to == 'bottom') {
            jQuery(this.svg).animate({top: (0 + this.container.offsetHeight) + 'px'}, duration, function () {callback(this);});
        } else {
            jQuery(this.svg).animate({left: (0 + this.container.offsetWidth) + 'px'}, duration, function () {callback(this);});
        }
        return this;
    };
    //
    // Horizontal Scissors (open)
    //
    // This function gets added to the chart object - so the this
    // variable is the chart object
    // 
    // @param object      Optional array of options
    // @param function     Optional callback function
    // 
    //
    RG.SVG.FX.hscissorsopen = function ()
    {
        var opt      = arguments[0] || {},
            obj      = this,
            frames   = opt.frames   || 90,
            callback = opt.callback || function () {},
            color    = opt.color    || 'white',
            to       = opt.to       || 'left',
            frame    = 0,
            duration = (frames / 60) * 1000,
            width    = this.container.offsetWidth / 10,
            height   = this.container.offsetHeight / 5;
        //
        // First draw the chart
        //
        RG.SVG.redraw(this.svg);
        for (var i=0; i<5; ++i) {
            var div = doc.getElementById("rgraph_hscissors_" + i + '_' + this.id)
            if (!div) {
                var div    = doc.createElement('DIV');
                    div.id = 'rgraph_hscissors_' + i + '_' + this.id;
                    div.style.width =  this.container.offsetWidth + 'px';
                    div.style.height = (this.container.offsetHeight / 5) + 'px';
                    div.style.left   = 0;
                    div.style.top   = (this.container.offsetHeight * (i / 5)) + 'px';
                    div.style.position = 'absolute';
                    div.style.backgroundColor = color;
                this.container.appendChild(div);
            }
            if (i % 2 == 0) {
                jQuery('#' + 'rgraph_hscissors_' + i + '_' + this.id).animate({left: this.container.offsetWidth + 'px', width: 0}, duration);
            } else {
                jQuery('#' + 'rgraph_hscissors_' + i + '_' + this.id).animate({width: 0}, duration);
            }
        }
        setTimeout(function ()
        {
            obj.container.removeChild(doc.getElementById('rgraph_hscissors_0_' + obj.id));
            obj.container.removeChild(doc.getElementById('rgraph_hscissors_1_' + obj.id));
            obj.container.removeChild(doc.getElementById('rgraph_hscissors_2_' + obj.id));
            obj.container.removeChild(doc.getElementById('rgraph_hscissors_3_' + obj.id));
            obj.container.removeChild(doc.getElementById('rgraph_hscissors_4_' + obj.id));
            callback(obj);
        }, duration);
        return this;
    };
    //
    // Horizontal Scissors (Close)
    //
    // This function gets added to the chart object - so the this
    // variable is the chart object
    // 
    // @param @object      Optional object of options
    // @param function     Optional callback function
    // 
    //
    RG.SVG.FX.hscissorsclose = function ()
    {
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 60,
            duration = (frames / 60) * 1000,
            frame    = 0,
            callback = opt.callback || function () {},
            color    = opt.color || 'white',
            height   = this.container.offsetHeight / 5;
        for (var i=0; i<5; ++i) {
            var div                       = doc.createElement('DIV');
                div.id                    = 'rgraph_hscissors_' + i + '_' + this.id;
                div.style.width           = 0;
                div.style.height          = height + 'px';
                div.style.left            = (i % 2 == 0 ? this.container.offsetWidth : 0) + 'px';
                div.style.top             = (this.container.offsetHeight * (i / 5)) + 'px';
                div.style.position        = 'absolute';
                div.style.backgroundColor = color;
            this.container.appendChild(div);
            if (i % 2 == 0) {
                jQuery('#' + 'rgraph_hscissors_' + i + '_' + this.id).animate({left: 0, width: this.container.offsetWidth + 'px'}, duration);
            } else {
                jQuery('#' + 'rgraph_hscissors_' + i + '_' + this.id).animate({width: this.container.offsetWidth + 'px'}, duration);
            }
        }
        setTimeout(function ()
        {
            RG.SVG.clear(obj.svg);
            jQuery('#' + 'rgraph_hscissors_' + 0 + '_' + obj.id).remove();
            jQuery('#' + 'rgraph_hscissors_' + 1 + '_' + obj.id).remove();
            jQuery('#' + 'rgraph_hscissors_' + 2 + '_' + obj.id).remove();
            jQuery('#' + 'rgraph_hscissors_' + 3 + '_' + obj.id).remove();
            jQuery('#' + 'rgraph_hscissors_' + 4 + '_' + obj.id).remove();
            callback(obj);
        }, duration);
        return this;
    };
    //
    // Vertical Scissors (open)
    // 
    // @param @object  Optional An object of options. It can consist of:
    //                  o color    - The color of the scissors. The default is white
    //                  o frames   - Number of animation frames in the effect. Default
    //                               is 60
    //                  o callback - A function that's called when the effect is
    //                               finished
    //
    RG.SVG.FX.vscissorsopen = function ()
    {
        // This function gets added to the chart object - so the this
        // variable is the chart object
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            duration = (frames / 60) * 1000,
            frame    = 0,
            callback = opt.callback || function () {},
            color    = opt.color || 'white',
            width    = this.container.offsetWidth / 10;
        //
        // First (re)draw the chart
        //
        RG.SVG.redraw(this.svg);
        for (var i=0; i<10; ++i) {
            var div = doc.getElementById("rgraph_vscissors_" + i + '_' + this.id);
            if (!div) {
                var div = doc.createElement('DIV');
                    div.id = 'rgraph_vscissors_' + i + '_' + this.id;
                    div.style.width           =  width + 'px';
                    div.style.height          = this.container.offsetHeight + 'px';
                    div.style.left            = this.container.offsetWidth * (i / 10) + 'px';
                    div.style.top             = 0;
                    div.style.position        = 'absolute';
                    div.style.backgroundColor = color;
                this.container.appendChild(div);
            }
            if (i % 2 == 0) {
                jQuery('#' + 'rgraph_vscissors_' + i + '_' + this.id).animate({top: this.container.offsetHeight + 'px', height: 0}, duration);
            } else {
                jQuery('#' + 'rgraph_vscissors_' + i + '_' + this.id).animate({height: 0}, duration);
            }
        }
        setTimeout(function ()
        {
            obj.container.removeChild(doc.getElementById('rgraph_vscissors_0' + '_' + obj.id));
            obj.container.removeChild(doc.getElementById('rgraph_vscissors_1' + '_' + obj.id));
            obj.container.removeChild(doc.getElementById('rgraph_vscissors_2' + '_' + obj.id));
            obj.container.removeChild(doc.getElementById('rgraph_vscissors_3' + '_' + obj.id));
            obj.container.removeChild(doc.getElementById('rgraph_vscissors_4' + '_' + obj.id));
            callback(obj);
        }, duration);
        return this;
    };
    //
    // Vertical Scissors (close)
    //
    RG.SVG.FX.vscissorsclose = function ()
    {
        // This function gets added to the chart object - so the this
        // variable is the chart object
        var obj      = this,
            opt      = arguments[0] || {},
            frames   = opt.frames || 90,
            duration = (frames / 60) * 1000,
            frame    = 0,
            callback = opt.callback || function () {},
            color    = opt.color  || 'white',
            width    = this.container.offsetWidth / 10;
        for (var i=0; i<10; ++i) {
            var div = doc.getElementById("rgraph_vscissors_" + i + '_' + this.id)
            if (!div) {
                var div                = doc.createElement('DIV');
                    div.id             = 'rgraph_vscissors_' + i + '_' + this.id;
                    div.style.width    =  width + 'px';
                    div.style.height   = 0;
                    div.style.left     = (width * i) + 'px';
                    div.style.top      = (i % 2 == 0 ? this.container.offsetHeight : 0) + 'px';
                    div.style.position = 'absolute';
                    div.style.backgroundColor = color;
                this.container.appendChild(div);
            }
            if (i % 2 == 0) {
                jQuery('#' + 'rgraph_vscissors_' + i + '_' + this.id).animate({top: 0, height: this.container.offsetHeight + 'px'}, duration);
            } else {
                jQuery('#' + 'rgraph_vscissors_' + i + '_' + this.id).animate({height: this.container.offsetHeight + 'px'}, duration);
            }
        }
        setTimeout(function ()
        {
            RG.SVG.clear(obj.svg);
            for (var i=0; i<10; i++) {
                jQuery('#rgraph_vscissors_' + i + '_' + obj.id).remove();
            }
            callback(obj);
        }, duration);
        return this;
    };
// End Module pattern
})(window, document);;
// version: 2018-06-24-143455
    /**
    * o--------------------------------------------------------------------------------o
    * | This file is part of the RGraph package - you can learn more at:               |
    * |                                                                                |
    * |                          http://www.rgraph.net                                 |
    * |                                                                                |
    * | RGraph is licensed under the Open Source MIT license. That means that it's     |
    * | totally free to use and there are no restrictions on what you can do with it!  |
    * o--------------------------------------------------------------------------------o
    */
    RGraph          = window.RGraph || {isRGraph: true};
    RGraph.SVG      = RGraph.SVG || {};
    RGraph.SVG.HTML = RGraph.SVG.HTML || {};
// Module pattern
(function (win, doc, undefined)
{
    var RG = RGraph,
        ua = navigator.userAgent,
        ma = Math;
    /**
    * Draws the graph key (used by various graphs)
    * 
    * @param object obj The graph object
    * @param array  key An array of the texts to be listed in the key
    * @param colors An array of the colors to be used
    */
    RG.SVG.drawKey = function (obj)
    {
        var prop          = obj.properties,
            key           = prop.key,
            colors        = prop.keyColors || prop.colors,
            defaultFont   = 'Arial',
            blobSize      = 0,
            width         = 0,
            keyColorShape = prop.keyColorShape;
        // Work out the center point of the SVG tag
        var centerx = obj.svg.getAttribute('width') / 2;
        // If we're drawing a key on a funnel then work out the center of
        // the chart differently. This may be useful to other chart types
        // too
        if (obj.type === 'funnel') {
            centerx = (obj.graphWidth / 2) + prop.gutterLeft;
        }
        // Loop thru the key and draw them
        if (key && key.length) {
            // First measure the length so that the key can be centered
            for (var i=0,length = 0; i<key.length; i++) {
                // First measure the text
                var textDimensions = RG.SVG.measureText({
                    text: key[i],
                    bold: prop.keyTextBold || false,
                    font: prop.keyTextFont || prop.textFont || defaultFont,
                    size: prop.keyTextSize || prop.textSize
                });
                blobSize = ma.max(blobSize, textDimensions[1]);
                width = width + 10 + blobSize + 5 + textDimensions[0];
            }
            // Center the key
            x = centerx - width / 2;
            for (var i=0,y=prop.gutterTop - 5; i<key.length; ++i) {
                // Do this on the first iteration only
                if (i === 0) {
                    if (obj.type === 'pie' && prop.highlightStyle == 'outline') {
                        y -= prop.highlightStyleOutlineWidth;
                    }
                }
                // First measure the text
                var textDimensions = RG.SVG.measureText({
                    text: key[i],
                    bold: prop.keyTextBold || false,
                    font: prop.keyTextFont || prop.textFont || defaultFont,
                    size: prop.keyTextSize || prop.textSize
                });
                //
                // Draw the blob of color (accounting for it being an array first)
                //
                var shape = prop.keyColorShape;
                if (typeof shape === 'object') {
                    shape = prop.keyColorShape[i];
                }
                // A circle
                if (shape === 'circle') {
                    RG.SVG.create({
                        svg: obj.svg,
                        type: 'circle',
                        parent: obj.svg.all,
                        attr: {
                            cx: x + (blobSize / 2)  + prop.keyOffsetx,
                            cy: y - (blobSize / 2) + prop.keyOffsety,
                            r: blobSize / 2,
                            fill: colors[i]
                        }
                    });
                // A triangle
                } else if (shape === 'triangle') {
                    RG.SVG.create({
                        svg: obj.svg,
                        type: 'path',
                        parent: obj.svg.all,
                        attr: {
                            d: 'M {1} {2} L {3} {4} L {5} {6} z'.format(
                                x + prop.keyOffsetx + (blobSize / 2),
                                y - blobSize + prop.keyOffsety,
                                x + prop.keyOffsetx + blobSize,
                                y + prop.keyOffsety,
                                x + prop.keyOffsetx,
                                y + prop.keyOffsety                                
                            ),
                            fill: colors[i]
                        }
                    });
                // A line
                } else if (shape === 'line') {
                    RG.SVG.create({
                        svg: obj.svg,
                        type: 'path',
                        parent: obj.svg.all,
                        attr: {
                            d: 'M {1} {2} L {3} {4}'.format(
                                x + prop.keyOffsetx,
                                y - (blobSize / 2) + prop.keyOffsety,
                                x + prop.keyOffsetx + blobSize,
                                y - (blobSize / 2) + prop.keyOffsety
                            ),
                            stroke: colors[i],
                            'stroke-width': 2,
                            'stroke-linecap': 'round'
                        }
                    });
                // A dot
                } else if (shape === 'dot') {
                    RG.SVG.create({
                        svg: obj.svg,
                        type: 'path',
                        parent: obj.svg.all,
                        attr: {
                            d: 'M {1} {2} L {3} {4}'.format(
                                x + prop.keyOffsetx,
                                y - (blobSize / 2) + prop.keyOffsety,
                                x + prop.keyOffsetx + blobSize,
                                y - (blobSize / 2) + prop.keyOffsety
                            ),
                            stroke: colors[i],
                            'stroke-width': 2,
                            'stroke-linecap': 'round'
                        }
                    });
                    RG.SVG.create({
                        svg: obj.svg,
                        type: 'circle',
                        parent: obj.svg.all,
                        attr: {
                            cx: x + (blobSize / 2)  + prop.keyOffsetx,
                            cy: y - (blobSize / 2) + prop.keyOffsety,
                            r: blobSize / 4,
                            fill: colors[i]
                        }
                    });
                // A dot
                } else if (shape === 'squaredot' || shape === 'rectdot') {
                    // Create the line
                    RG.SVG.create({
                        svg: obj.svg,
                        type: 'path',
                        parent: obj.svg.all,
                        attr: {
                            d: 'M {1} {2} L {3} {4}'.format(
                                x + prop.keyOffsetx,
                                y - (blobSize / 2) + prop.keyOffsety,
                                x + prop.keyOffsetx + blobSize,
                                y - (blobSize / 2) + prop.keyOffsety
                            ),
                            stroke: colors[i],
                            'stroke-width': 2,
                            'stroke-linecap': 'round'
                        }
                    });
                    RG.SVG.create({
                        svg: obj.svg,
                        type: 'rect',
                        parent: obj.svg.all,
                        attr: {
                            x: x + (blobSize / 4) + prop.keyOffsetx,
                            y: y + (blobSize / 4) - blobSize + prop.keyOffsety,
                            width: blobSize / 2,
                            height: blobSize / 2,
                            fill: colors[i]
                        }
                    });
                // Ccustom
                } else if (typeof shape === 'function') {
                    RG.SVG.create({
                        svg: obj.svg,
                        type: 'path',
                        parent: obj.svg.all,
                        attr: {
                            d: 'M {1} {2} L {3} {4}'.format(
                                x + prop.keyOffsetx,
                                y - (blobSize / 2) + prop.keyOffsety,
                                x + prop.keyOffsetx + blobSize,
                                y - (blobSize / 2) + prop.keyOffsety
                            ),
                            stroke: colors[i],
                            'stroke-width': 2,
                            'stroke-linecap': 'round'
                        }
                    });
                // A rectangle default
                } else {
                    RG.SVG.create({
                        svg: obj.svg,
                        type: 'rect',
                        parent: obj.svg.all,
                        attr: {
                            x: x + prop.keyOffsetx,
                            y: y - blobSize + prop.keyOffsety,
                            width: blobSize,
                            height: blobSize,
                            fill: colors[i]
                        }
                    });
                }
                //
                // Add the text
                //
                RGraph.SVG.text({
                    object:     obj,
                    parent:     obj.svg.all,
                    tag:        'key',
                    size:       prop.keyTextSize || prop.textSize,
                    bold:       typeof prop.keyTextBold === 'boolean' ? prop.keyTextBold : prop.textBold,
                    italic:     typeof prop.keyTextItalic === 'boolean' ? prop.keyTextItalic : prop.textItalic,
                    font:       prop.keyTextFont || prop.textFont,
                    halign:     'left',
                    valign:     'bottom',
                    text:       key[i],
                    x:          x + blobSize + 5 + prop.keyTextOffsetx + prop.keyOffsetx,
                    y:          y + prop.keyTextOffsety + prop.keyOffsety,
                    color:      prop.keyTextColor || 'black',
                    background: prop.keyTextBackground || 'white',
                    padding:    0
                })
                x += 10 + blobSize + 5 + textDimensions[0];
            }
        }
    };
    /**
    * Create a TABLE based HTML key. There's lots of options so it's
    * suggested that you consult the documentation page
    * 
    * @param mixed id   This should be a string consisting of the ID of the container
    * @param object prop An object map of the various properties that you can use to
    *                    configure the key. See the documentation page for a list.
    */
    RG.SVG.HTML.key = function (id, prop)
    {
        var div = doc.getElementById(id);
        /**
        * Create the table that becomes the key
        */
        var str = '<table border="0" cellspacing="0" cellpadding="0" id="rgraph_key" style="display: inline;' + (function ()
            {
                var style = ''
                for (i in prop.tableCss) {
                    if (typeof i === 'string') {
                        style = style + i + ': ' + prop.tableCss[i] + ';';
                    }
                }
                return style;
            })() + '" ' + (prop.tableClass ? 'class="' + prop.tableClass + '"' : '') + '>';
        /**
        * Add the individual key elements
        */
        for (var i=0; i<prop.labels.length; i+=1) {
            str += '<tr><td><div style="' + (function ()
            {
                var style = '';
                for (var j in prop.blobCss) {
                    if (typeof j === 'string') {
                        style = style + j + ': ' + prop.blobCss[j] + ';';
                    }
                }
                return style;
            })() + 'display: inline-block; margin-right: 5px; margin-top: 4px; width: 15px; height: 15px; background-color: ' + prop.colors[i] + '"' + (prop.blobClass ? 'class="' + prop.blobClass + '"' : '') + '>&nbsp;</div><td>' + (prop.links && prop.links[i] ? '<a href="' + prop.links[i] + '">' : '') + '<span ' + (prop.labelClass ? 'class="' + prop.labelClass + '"' : '') + '" style="' + (function ()
            {
                var style = '';
                for (var j in prop.labelCss) {
                    if (typeof j === 'string') {
                        style = style + j + ': ' + prop.labelCss[j] + ';';
                    }
                }
                return style;
            })() + '" ' + (function ()
            {
                var style = '';
                if (prop['labelCss_' + i]) {
                    for (var j in prop['labelCss_' + i]) {
                        style = style + j + ': ' + prop['labelCss_' + i][j] + ';';
                    }
                }
                return style ? 'style="' + style + '"' : '';
            })() + '>' + prop.labels[i] + '</span>' + (prop.links && prop.links[i] ? '</a>' : '') + '</td></tr>';
        }
        div.innerHTML += (str + '</table>');
        // Return the TABLE object that is the HTML key
        return doc.getElementById('rgraph_key');
    };
// End module pattern
})(window, document);;
// version: 2018-06-24-143455
    /**
    * o--------------------------------------------------------------------------------o
    * | This file is part of the RGraph package - you can learn more at:               |
    * |                                                                                |
    * |                          http://www.rgraph.net                                 |
    * |                                                                                |
    * | RGraph is licensed under the Open Source MIT license. That means that it's     |
    * | totally free to use and there are no restrictions on what you can do with it!  |
    * o--------------------------------------------------------------------------------o
    */
    /**
    * Initialise the various objects
    */
    RGraph = window.RGraph || {isRGraph: true};
// Module pattern
(function (win, doc, undefined)
{
    RGraph.Sheets = function (key)
    {
        var worksheet,
            callback,
            letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        // 3 arguments
        if (arguments.length === 3) {
            worksheet = Number(arguments[1]);
            callback  = arguments[2];
        // 2 arguments
        } else {
            worksheet = 1;
            callback  = arguments[1];
        }
        var url = 'https://spreadsheets.google.com/feeds/cells/[KEY]/[WORKSHEET]/public/full?alt=json-in-script&callback=__rgraph_JSONPCallback'.replace(/\[KEY\]/, key).replace(/\[WORKSHEET\]/, worksheet);
        /*
        * https://spreadsheets.google.com/feeds/cells/1q_BMjvKO_kKbAO3VjoaITSDyrLAk8f0SK5UFMmE3oRs/2/public/full?alt=json-in-script
        */
        //
        // Loads the spreadsheet
        //
        this.load = function(url, userCallback)
        {
            var obj = this;
            // A global on purpose
            __rgraph_JSONPCallback = function (json)
            {
                // Save the JSON on the RGraph.Sheets object
                obj.json = json;
                //
                // Put the entries in the JSON feed into a grid
                //
                var grid = [], row = 0, col = 0;
                for (var i=0; i<json.feed.entry.length; ++i) {
                    row = json.feed.entry[i].gs$cell.row - 1;
                    col = json.feed.entry[i].gs$cell.col - 1;
                    if (!grid[row]) {
                        grid[row] = [];
                    }
                    grid[row][col] = json.feed.entry[i].content.$t;
                }
                //
                // Determine the longest row
                //
                var maxcols = 0; // The max length of the rows
                for (var i=0; i<grid.length; ++i) {
                    maxcols = grid[i] ? Math.max(maxcols, grid[i].length) : maxcols;
                }
                //
                // Now go through the array and fill in any blank holes.
                //
                for (var i=0; i<grid.length; ++i) {
                    if (typeof grid[i] === 'undefined') {
                        grid[i] = new Array(maxcols);
                    }
                    for (var j=0; j<maxcols; j++) {
                        if (typeof grid[i][j] === 'undefined') {
                            grid[i][j] = '';
                        }
                        // Convert numbers to real numbers and floats here too
                        if (grid[i][j].match(/^[0-9]+$/)) {
                            grid[i][j] = parseInt(grid[i][j]);
                        } else if (grid[i][j].match(/^[0-9.]+$/)) {
                            grid[i][j] = parseFloat(grid[i][j]);
                        }
                    }
                }
                //
                // Save the grid on the object
                //
                obj.data = grid;
                //
                // Call the users callback function. Users can access the raw data if
                // they want with the obj.data property or by using the accessor
                // methods (better)
                //
                userCallback(obj);
            };
            // Add the new script tag to the document that pulls in the JSON
            //
            // With jQuery...
            //
            //jQuery('body').append("\u003Cscript src='" + url + "'>\u003C/script\u003E");
            //
            // And without jQuery...
            var scriptNode = document.createElement('SCRIPT');
            scriptNode.src = url;
            document.body.appendChild(scriptNode);
        };
        //
        // Fetches a row of data and returns it
        //
        // @param id    number The numeric index of the column to fetch (starts at 1)
        // @param start number The index to start fetching/returning at. The first
        //                     character is 1
        // @param opt        An option object containing options
        //
        this.row = function (index, start)
        {
            var opt = {}, row;
            // Default for start is 1
            start = start || 1;
            //
            // Parse the .trim argument
            //
            if (arguments && typeof arguments[2] === 'object' && typeof arguments[2].trim === 'boolean') {
                opt.trim = arguments[2].trim;
            } else {
                opt.trim = true;
            }
            row = this.data[index - 1].slice(start - 1);
            // Trim the array if required
            if (opt.trim) {
                row = RGraph.SVG.arrayTrim(row);
            }
            return row;
        };
        //
        // Fetches a column of data and returns it
        //
        // @param id    number The letter that corresponds to the column
        // @param start number The index to start fetching/returning at. The first
        //                     character is 1
        // @param opt        An option object containing options
        //
        this.col = function (index, start)
        {
            var opt = {},
                col = [];
            // Default for start is 1
            start = start || 1;
            if (arguments && typeof arguments[2] === 'object' && typeof arguments[2].trim === 'boolean') {
                opt.trim = arguments[2].trim;
            } else {
                opt.trim = true;
            }
            for (var i=0; i<this.data.length; ++i) {
                col.push(this.data[i][index - 1]);
            }
            // Trim the array if required
            if (opt.trim) {
                col = RGraph.SVG.arrayTrim(col);
            }
            // Now account for the start index
            col = col.slice(start - 1);
            return col;
        };
        //
        // Returns the index (zero index) of the given letters
        //
        this.getIndexOfLetters = function (l)
        {
            var parts = l.split('');
            if (parts.length === 1) {
                return letters.indexOf(l) + 1;
            } else if (parts.length === 2){
                var idx = ((letters.indexOf(parts[0]) + 1) * 26) + (letters.indexOf(parts[1]) + 1);
                return idx;
            }
        }
        //
        // The get method makes retrieving cells very straightforward,
        // for example: obj.get('B1');
        //
        // @param str string The cells(s) to fetch
        // @param     string Optional set of options that are passed
        //                   to the relevant row/col function
        //
        this.get = function (str)
        {
            // Uppercase letters please!
            str = str.toUpperCase();
            //
            // Handle the style of .get('C') or .get('AA'
            //
            if (str.match(/^[a-z]+$/i)) {
                if (str.length === 1) {
                    var index = letters.indexOf(str) + 1;
                    return this.col(index, 1, arguments[1]);
                } else if (str.length === 2) {
                    var index = ((letters.indexOf(str[0]) + 1) * 26) + letters.indexOf(str[1]) + 1;
                    return this.col(index, 1, arguments[1]);
                }
            }
            //
            // Handle the style of .get('2');
            //(fetching a whole row
            //
            if (str.match(/^[0-9]+$/i)) {
                return this.row(str, null, arguments[1]);
            }
            //
            // Handle the style of .get('E2');
            //(fetching a single cell)
            //
            if (str.match(/^([a-z]{1,2})([0-9]+)$/i)) {
                var letter = RegExp.$1,
                    number = RegExp.$2,
                    col    = this.get(letter, {trim: false});
                return col[number - 1];
            }
            //
            // Handle the style of .get('B2:E2');
            //(fetching the E2 cell to the E2 cell)
            //
            if (str.match(/^([a-z]{1,2})([0-9]+):([a-z]{1,2})([0-9]+)$/i)) {
                var letter1 = RegExp.$1,
                    number1 = RegExp.$2,
                    letter2 = RegExp.$3,
                    number2 = RegExp.$4
                if (letter1 === letter2) {
                    var cells = [],
                        index = this.getIndexOfLetters(letter1),
                        col   = this.col(index, null, {trim: false});
                    for (var i=(number1 - 1); i<=(number2 - 1); ++i) {
                        cells.push(col[i]);
                    }
                } else if (number1 === number2) {
                    var cells = [],
                        row   = this.row(number1, null, {trim: false}),
                        index1 = this.getIndexOfLetters(letter1),
                        index2 = this.getIndexOfLetters(letter2)
                    for (var i=(index1 - 1); i<=(index2 - 1); ++i) {
                        cells.push(row[i]);
                    }
                }
                // Trim the results
                if (arguments[1] && arguments[1].trim === false) {
                    // Nada
                } else {
                    cells = RGraph.SVG.arrayTrim(cells);
                }
                return cells;
            }
        };
        //
        // Load the data
        //
        this.load(url, callback);
    };
// End module pattern
})(window, document);;
// version: 2018-06-24-143455
    /**
    * o--------------------------------------------------------------------------------o
    * | This file is part of the RGraph package - you can learn more at:               |
    * |                                                                                |
    * |                          http://www.rgraph.net                                 |
    * |                                                                                |
    * | RGraph is licensed under the Open Source MIT license. That means that it's     |
    * | totally free to use and there are no restrictions on what you can do with it!  |
    * o--------------------------------------------------------------------------------o
    */
    RGraph     = window.RGraph || {isRGraph: true,isRGraphSVG: true};
    RGraph.SVG = RGraph.SVG || {};
// Module pattern
(function (win, doc, undefined)
{
    var RG  = RGraph,
        ua  = navigator.userAgent,
        ma  = Math;
    /**
    * This is used in two functions, hence it's here
    */
    RG.SVG.tooltips       = {};
    RG.SVG.tooltips.style = {
        display:    'inline-block',
        position:   'absolute',
        padding:    '6px',
        fontFamily: 'Arial',
        fontSize:   '12pt',
        fontWeight: 'normal',
        textAlign:  'center',
        left:       0,
        top:        0,
        backgroundColor: 'rgb(255,255,239)',
        color:      'black',
        visibility: 'visible',
        zIndex:     3,
        borderRadius: '5px',
        boxShadow:  'rgba(96,96,96,0.5) 0 0 5px',
        transition: 'left ease-out .25s, top ease-out .25s'
    };
    //
    // Shows a tooltip
    //
    // @param obj The chart object
    // @param opt The options
    //
    RG.SVG.tooltip = function (opt)
    {
        var obj = opt.object;
        // Fire the beforetooltip event
        RG.SVG.fireCustomEvent(obj, 'onbeforetooltip');
        if (!opt.text || typeof opt.text === 'undefined' || RG.SVG.trim(opt.text).length === 0) {
            return;
        }
        var prop = obj.properties;
        /**
        * chart.tooltip.override allows you to totally take control of rendering the tooltip yourself
        */
        if (typeof prop.tooltipsOverride === 'function') {
            // Add the body click handler that clears the highlight if necessary
            //
            document.body.addEventListener('mouseup', function (e)
            {
                obj.removeHighlight();
            }, false);
            return (prop.tooltipsOverride)(obj, opt);
        }
        // Create the tooltip DIV element
        if (!RG.SVG.REG.get('tooltip')) {
            var tooltipObj        = document.createElement('DIV');
            tooltipObj.className  = prop.tooltipsCssClass;
            // Add the default CSS to the tooltip
            for (var i in RG.SVG.tooltips.style) {
                if (typeof i === 'string') {
                    tooltipObj.style[i] = RG.SVG.tooltips.style[i];
                }
            }
        // Reuse an existing tooltip
        } else {
            var tooltipObj = RG.SVG.REG.get('tooltip');
            tooltipObj.__object__.removeHighlight();
            // This prevents the object from continuously growing
            tooltipObj.style.width = '';
        }
        if (RG.SVG.REG.get('tooltip-lasty')) {
            tooltipObj.style.left = RG.SVG.REG.get('tooltip-lastx') + 'px';
            tooltipObj.style.top  = RG.SVG.REG.get('tooltip-lasty') + 'px';
        }
        tooltipObj.innerHTML  = opt.text;
        tooltipObj.__text__   = opt.text; // This is set because the innerHTML can change when it's set
        tooltipObj.id         = '__rgraph_tooltip_' + obj.id + '_' + obj.uid + '_'+  opt.index;
        tooltipObj.__event__  = prop.tooltipsEvent || 'click';
        tooltipObj.__object__ = obj;
        // Add the index
        if (typeof opt.index === 'number') {
            tooltipObj.__index__ = opt.index;
        }
        // Add the dataset
        if (typeof opt.dataset === 'number') {
            tooltipObj.__dataset__ = opt.dataset;
        }
        // Add the group
        if (typeof opt.group === 'number' || RG.SVG.isNull(opt.group)) {
            tooltipObj.__group__ = opt.group;
        }
        // Add the sequentialIndex
        if (typeof opt.sequentialIndex === 'number') {
            tooltipObj.__sequentialIndex__ = opt.sequentialIndex;
        }
        // Add the tooltip to the document
        document.body.appendChild(tooltipObj);
        var width  = tooltipObj.offsetWidth,
            height = tooltipObj.offsetHeight;
        // Move the tooltip into position
        tooltipObj.style.left = opt.event.pageX - (width / 2) + 'px';
        tooltipObj.style.top  = opt.event.pageY - height - 15 + 'px';
        /**
        * Set the width on the tooltip so it doesn't resize if the window is resized
        */
        tooltipObj.style.width = width + 'px';
        // Fade the tooltip in if the tooltip is not the first view
        if (!RG.SVG.REG.get('tooltip-lastx')) {
            for (var i=0; i<=30; ++i) {
                (function (idx)
                {
                    setTimeout(function ()
                    {
                        tooltipObj.style.opacity = (idx / 30) * 1;
                    }, (idx / 30) * 200);
                })(i);
            }
        }
        // If the left is less than zero - set it to 5
        if (parseFloat(tooltipObj.style.left) <= 5) {
            tooltipObj.style.left = '5px';
        }
        // If the tooltip goes over the right hand edge then
        // adjust the positioning
        if (parseFloat(tooltipObj.style.left) + parseFloat(tooltipObj.style.width) > window.innerWidth) {
            tooltipObj.style.left  = ''
            tooltipObj.style.right = '5px'
        }
        // If the canvas has fixed positioning then set the tooltip position to
        // fixed too
        if (RG.SVG.isFixed(obj.svg)) {
            var scrollTop = window.scrollY || document.documentElement.scrollTop;
            tooltipObj.style.position = 'fixed';
            tooltipObj.style.top      = opt.event.pageY - scrollTop - height - 10 + 'px';
        }
        // Cancel the mousedown event
        tooltipObj.onmousedown = function (e)
        {
            e.stopPropagation();
        };
        // Cancel the mouseup event
        tooltipObj.onmouseup = function (e)
        {
            e.stopPropagation();
        };
        // Cancel the click event
        tooltipObj.onclick  = function (e)
        {
            if (e.button == 0) {
                e.stopPropagation();
            }
        };
        // Add the body click handler that clears the tooltip
        document.body.addEventListener('mouseup', function (e)
        {
            RG.SVG.hideTooltip();
        }, false);
        /**
        * Keep a reference to the tooltip in the registry
        */
        RG.SVG.REG.set('tooltip', tooltipObj);
        RG.SVG.REG.set('tooltip-lastx', parseFloat(tooltipObj.style.left));
        RG.SVG.REG.set('tooltip-lasty', parseFloat(tooltipObj.style.top));
        //
        // Fire the tooltip event
        //
        RG.SVG.fireCustomEvent(obj, 'ontooltip');
    };
// End module pattern
})(window, document);;
RGraph.SVG.tooltips.style.zIndex     = '10000';
;
DLG1_DlgObj.listKanbanSetup = function(lObj){
	lObj._kanban = {
		type: 'handle',
		//type: 'downhold',
		action: function(mode,from,to,after){
			var _d = this._data[this._dataMap[from]];
			var categoryField = '';
			var orderField = '';
			try{ 
				categoryField = this.layouts[this.layout].kanBan.categoryField;
			}catch(err) { } 
			try{ 
				orderField = this.layouts[this.layout].kanBan.orderField;
			}catch(err) { } 
			//onBeforeMove gets called here return false
			var allowMove = true;
			var fCat = _d[categoryField];
			if(mode == 'category') { 
				var tCat = to;
			} else if(to != -1) { 
				var _td = this._data[this._dataMap[to]];
				var tCat = _td[categoryField];
			}
			try{
				var _f = this.layouts[this.layout].kanBan.onBeforeMove;
				if(typeof _f == 'function') allowMove = _f.call(this,mode,from,to,after,fCat,tCat,_d);
			}catch(err) { }
			if(allowMove === false) {
				this.refresh();
				return false;
			}
			this.setBatchRedraw(true);
			if(mode == 'category'){
				if(to) { 
					var rd = {};
					A5.u.object.assign(rd,lObj._data[lObj._dataMap[from]]);
					if(categoryField != '') rd[categoryField] = to;
					if(orderField != '') rd[orderField] = 0;
					_row = from;
					var _data = {}
					for(var _n in rd) { 
						if(_n.indexOf('*') == -1 && _n.indexOf('__') == -1) { 
							_data[_n] = rd[_n];
						}
					}
					if(lObj.updateTableRow) lObj.updateTableRow(_row,_data);
					else lObj.updateRow(_row,_data);
					DLG1_DlgObj.refreshClientSideComputations();
					this.setBatchRedraw(false);
					lObj.refresh();
					delete rd;
				}
			} else if(to != -1){
				var rd = {};
				A5.u.object.assign(rd,lObj._data[lObj._dataMap[from]]);
				var trd = lObj._data[lObj._dataMap[to]];
				var tOrder = 0;
				if(orderField != '') {
					tOrder = Number(trd[orderField]);
					if(after) tOrder++;
					var _td = {};
					if(categoryField != '') {
						for(var i=0;i<lObj._data.length;i++){
							if(lObj._data[i][categoryField] == tCat){
								if(lObj._data[i][orderField] >= tOrder) {
									_td = {};
									_td[orderField] = Number( lObj._data[i][orderField])+1;
									if(lObj.updateTableRow) lObj.updateTableRow(lObj._data[i]['*value'],_td);
									else lObj.updateRow(lObj._data[i]['*value'],_td);
								}
							}
						}
					}
				}
				if(categoryField != '') rd[categoryField] = tCat;
				if(orderField != '') rd[orderField] = tOrder;
				_row = from;
				var _data = {}
				for(var _n in rd) { 
					if(_n.indexOf('*') == -1 && _n.indexOf('__') == -1) { 
						//alert(_n + ' --- ' + rd[_n]);
						_data[_n] = rd[_n];
					}
				}
				if(lObj.updateTableRow) lObj.updateTableRow(_row,_data);
				else lObj.updateRow(_row,_data);
				DLG1_DlgObj.refreshClientSideComputations();
				this.setBatchRedraw(false);
				lObj.refresh();
				delete rd;
				delete trd;
			}
			try{
				var _f = this.layouts[this.layout].kanBan.onMove;
				if(typeof _f == 'function') _f.call(this,mode,from,to,after,fCat,tCat,_d);
			}catch(err) { }
		},
		className: 'dragItem',
		spacerClassName: 'dragSpacer',
		message: function(html){
			//html = html+'<div style="position: absolute; bottom: -26px; left: 0px; right: 0px; line-height: 26px; padding: 0px 6px; text-align: center; background: rgba(0,0,0,.75); color: #fff;">And 3 more...</div>'
			return html;
		}
	}
	/* --------------------------------- generic ------------------------------------ */
	var listName = lObj.listVariableName;
	var eleDR = document.createElement('div');
	eleDR.id = lObj.contId+'.KANBAN';
	$ss(eleDR,'display: none; position: absolute; left: 0px; right: 0px; box-sizing: border-box;');
	eleDR.className = lObj.item.className+' '+lObj._kanban.className;
	var eleCW = $(lObj.contId+'.CONTENT').parentNode;
	eleCW.appendChild(eleDR);
	lObj._kanbanComplete = function(from,to,after){
		var phEle = $(this.contId+'.KANBANPH');
		if(phEle){
			var cEle = phEle.parentNode;
			cEle.removeChild(phEle);
		}
		$(this.contId+'.'+from).style.display = '';
		$(this.contId+'.KANBAN').style.display = 'none';
		if(from != -1) this._kanban.action.call(this,(typeof to == 'string' ? 'category' : 'item'),from,to,after);
	}
	lObj._kanbanStart = function(indx){
		var eleR = $(this.contId+'.'+indx);
			if(eleR){
				var eleC = $(this.contId+'.CONTENT');
				var eleCW = eleC.parentNode;
				var ot = eleR.offsetTop;
				var eleDR = $(this.contId+'.KANBAN');
				var dlgId = this._hostComponentId;
				var vn = this.listVariableName;
				var html = eleR.innerHTML;
				html = html.replace(/(<[^>]+)+(id="[^"]+")+([^>]*\>)/gi,'$1$3');
				if( typeof this._kanban.message == 'function'){
					html = this._kanban.message.call(this,html);
				}
				eleDR.innerHTML = html;
				eleDR.style.top = ot+'px';
				eleDR.style.display = '';
				var oh = eleDR.offsetHeight;
				var oho = eleR.offsetHeight;
				var owo = eleR.offsetWidth;
				var olo = eleR.offsetLeft;
				var scl = A5.u.element.getScroll(eleCW);
				scl.height -= eleDR.offsetHeight;
				var bcr = $(this.contId+'.CONTENTWRAPPER').getBoundingClientRect();
				eleDR.style.left = olo + 'px';
				eleDR.style.width = owo+'px';
				var eleDI1 = document.createElement('div');
				eleDI1.style.overflow = 'hidden';
				eleDI1.style.height = oho+'px';
				eleDI1.className = this._kanban.spacerClassName;
				var eleDI2 = document.createElement('div');
				eleDI2.style.overflow = 'hidden';
				eleDI2.style.height = '0px';
				eleDI2.className = this._kanban.spacerClassName;
				eleR.parentNode.insertBefore(eleDI1,eleR);
				eleC.appendChild(eleDI2);
				eleR.style.display = 'none';
				A5.u.drag.start({
					axis: 'y',
					varName: vn,
					dlgId: dlgId,
					contId: this.contId,
					eleC: eleC,
					eleCW: eleCW,
					eleCWS: scl,
					eleDR: eleDR,
					eleR: eleR,
					eleDI1: eleDI1,
					eleDI2: eleDI2,
					ot: ot-scl.top,
					oh: oh,
					ol: olo,
					animIn: {from: {height: '0px'}, to: {height: oho+'px'}, duration: 200, tween: 'linear'},
					animOut: {to: {height: '0px'}, from: {height: oho+'px'}, duration: 200, tween: 'linear'},
					animShown: 1,
					scrlEleH: bcr.height-oh,
					scrlTop: scl.top,
					scrlLeft: scl.left,
					scrlUp: bcr.top+(oh*2),
					scrlDown: bcr.bottom-(oh*2),
					scrlTO: null,
					scrlAuto: false,
					scrlAmt: 0,
					indx: indx,
					after: false,
					category: false,
					autoScroll: function(i){
						var amt = this.scrlAmt;
						var nst = this.scrlTop+amt;
						if(nst < 0){
							amt = 0-this.scrlTop;
						} else if(nst > this.eleCWS.height-this.scrlEleH){
							amt = this.eleCWS.height-this.scrlEleH-this.scrlTop;
						}
						if(amt != 0){
							this.scrlTop += amt;
							A5.u.element.setScroll(this.eleCW,0,this.scrlTop);
							this.eleDR.style.top = Math.max(0,Math.min($u.s.toNum(this.eleDR.style.top)+amt,this.eleCWS.height))+'px';
						} else{
							clearInterval(this.scrlTO);
							this.scrlAuto = false;
						}
						this.indexFromPoint(A5.u.drag._i);
					},
					indexFromPoint: function(i){
						var oi = i.indx;
						var oa = i.after;
						var ocat = i.category;
						this.eleDR.style.display = 'none';
						var sEle = document.elementFromPoint(i.x,i.y);
						this.eleDR.style.display = '';
						if(sEle == this.eleDI1 || sEle == this.eleDI2) return false;
						i.indx = -1;
						i.category = false;
						if(sEle){
							var ta = '';
							while(sEle != this.eleCW && sEle != document.body && sEle != document){
								if(!sEle.getAttribute){
									i.indx = -1;
									break;
								}
								if(sEle.hasAttribute('a5-item')){
									ta = sEle.getAttribute('a5-item');
									if(''+Number(ta) == ta){
										ta = Number(ta);
										if(ta < i.indx) i.indx = ta-1;
										else i.indx = ta;
										var bcr = sEle.getBoundingClientRect();
										if(i.y > bcr.top+(bcr.height/2)) i.after = true;
										else i.after = false;
										break;
									}
								} else if(sEle.hasAttribute('a5-category')){
									i.indx = -2;
									i.category = sEle.getAttribute('a5-category');
									break;
								}
								sEle = sEle.parentNode;
							}
						}
						if(i.indx == -1) i.indx = this.indx;
						if((i.indx != oi || oa !== i.after) && i.indx >= 0){
							var tEle = $(this.contId+'.'+i.indx);
							var tcEle = this.eleC;
							if(tEle) tcEle = tEle.parentNode;
							if(this.animShown == 1){
								if(tEle){
									if(i.after) tcEle.insertBefore(this.eleDI2,tEle.nextSibling);
									else tcEle.insertBefore(this.eleDI2,tEle);
								} else tcEle.appendChild(this.eleDI2);
								A5.u.element.transition(this.eleDI2,this.animIn);
								A5.u.element.transition(this.eleDI1,this.animOut);
								this.animShown = 2;
							} else{
								if(tEle){
									if(i.after) tcEle.insertBefore(this.eleDI1,tEle.nextSibling);
									else tcEle.insertBefore(this.eleDI1,tEle);
								} else tcEle.appendChild(this.eleDI1);
								A5.u.element.transition(this.eleDI1,this.animIn);
								A5.u.element.transition(this.eleDI2,this.animOut);
								this.animShown = 1;
							}
						} else if(i.indx == -1){
							if(this.animShown == 1) A5.u.element.transition(this.eleDI1,this.animOut);
							else A5.u.element.transition(this.eleDI2,this.animOut);
						} else if(i.indx == -2 && ocat !== i.category){
							var tEle = $(this.contId+'.CAT.'+i.category);
							var tcEle = this.eleC;
							if(tEle) tcEle = tEle.parentNode.nextSibling;
							if(this.animShown == 1){
								if(tcEle) { 
									tcEle.insertBefore(this.eleDI2,tcEle.firstChild);
									A5.u.element.transition(this.eleDI2,this.animIn);
								}
								A5.u.element.transition(this.eleDI1,this.animOut);
								this.animShown = 2;
							} else{
								if(tcEle) { 
									tcEle.insertBefore(this.eleDI1,tcEle.firstChild);
									A5.u.element.transition(this.eleDI1,this.animIn);
								}
								A5.u.element.transition(this.eleDI2,this.animOut);
								this.animShown = 1;
							}
						}
					},
					onMove: function(i,c,e){
						A5.u.drag._sDif = 1000;
						c.eleDR.style.top = Math.max(0,c.ot+c.scrlTop+i.customMoveY)+'px';
						c.eleDR.style.left = Math.max(0,Math.min(c.ol+c.scrlLeft+i.customMoveX,c.eleCWS.width))+'px';
						if(i.y < c.scrlUp && !c.scrlAuto){
							c.scrlAmt = -10;
							c.scrlTO = setInterval(Function('A5.u.drag._w[\'*a5unbound\'].c.autoScroll();'),50);
							c.scrlAuto = true;
						} else if(i.y > c.scrlDown && !c.scrlAuto){
							c.scrlAmt = 10;
							c.scrlTO = setInterval(Function('A5.u.drag._w[\'*a5unbound\'].c.autoScroll();'),50);
							c.scrlAuto = true;
						} else if(i.y < c.scrlUp && c.scrlAuto){
							if(i.y < c.scrlUp-(c.oh*1.5)) c.scrlAmt = -30;
							else if(i.y < c.scrlUp-c.oh) c.scrlAmt = -20;
							else c.scrlAmt = -10;
						} else if(i.y > c.scrlDown && c.scrlAuto){
							if(i.y > c.scrlDown+(c.oh*1.5)) c.scrlAmt = 30;
							else if(i.y > c.scrlDown+c.oh) c.scrlAmt = 20;
							else c.scrlAmt = 10;
						} else if(i.y >= c.scrlUp && i.y <= c.scrlDown && c.scrlAuto){
							clearInterval(c.scrlTO);
							c.scrlAuto = false;
						} else {
							c.indexFromPoint(i);
						}
					},
					onEnd: function(i,c,e){
						clearInterval(c.scrlTO);
						if(typeof i.indx == 'number' && i.indx != -1){
							var tEle = $(c.contId+'.'+i.indx);
							var tcEle = c.eleC;
							if(tEle) tcEle = tEle.parentNode;
							if(tEle) tcEle.insertBefore(c.eleR,tEle);
							else tcEle.appendChild(c.eleR);
							if(c.animShown == 1){
								tEle = c.eleDI1;
								tcEle = c.eleDI2.parentNode;
								tcEle.removeChild(c.eleDI2);
							} else{
								tEle = c.eleDI2;
								tcEle = c.eleDI1.parentNode;
								tcEle.removeChild(c.eleDI1);
							}
							tEle.id = c.contId+'.KANBANPH';
							A5.u.element.transition(c.eleDR,{
								form: {top: c.eleDR.style.top, left: c.eleDR.style.left},
								to: {top: tEle.offsetTop+'px', left: tEle.offsetLeft+'px'},
								duration: 100,
								tween: 'linear'
							},Function('var lObj = '+c.dlgId+'_DlgObj.getControl(\''+c.varName+'\'); lObj._kanbanComplete('+c.indx+','+(i.indx == -2 ? '\''+i.category+'\'' : i.indx)+','+i.after+');'));
						} else{
							c.eleR.style.display = '';
							c.eleDR.style.display = 'none';
							var tcEle = c.eleDI1.parentNode;
							tcEle.removeChild(c.eleDI1);
							tcEle = c.eleDI2.parentNode;
							tcEle.removeChild(c.eleDI2);
						}
						i.indx = -1;
						c.indx = -1;
						c.category = false;
						setTimeout(function(){A5.u.drag._sDif = 0;},50);
					}
				});
			}
	}
	if(lObj._kanban.type == 'handle'){
		if(!lObj.items['drag-reorder-handle']){
			lObj.items['drag-reorder-handle'] = {
				onDown: function(indx,val,args){
					this._kanbanStart(indx);
				}
			}
		}
	} else{
		$e.removeGroup(lObj.contId+'.DRAGREOREDER');
		$e.add(eleCW,'abstractdownhold',function(e){
			var indx = this.indexFromEvent(e);
			if(typeof indx == 'number' && indx != -1) this._kanbanStart(indx);
		},lObj,true,lObj.contId+'.DRAGREOREDER');
	}
}
DLG1_DlgObj._navigationBar = function(id) {
		var styleName = this.styleName;
		var _id = id //specify the id of the element where the viewbox should be rendered. Typically a div on the component. Set the div style height and width properties
		var _settings = {
			"dialogId" : this.dialogId + '_DlgObj',
			"inputId": "",
			"variableName": "",
			"theme": this.styleName,
			"animation": {
				"allow": true
			},
			"datasource": {
				"lowLevel": "Data",
				"type": "Static JSON"
			},
			"multiple": false,
			"loopNavigate": false,
			"loopNavigateNullSelection": true,
			"allowNullSelection": false,
			"allowTextSelection": false,
			"allowNullDeselection": false,
			"autoRefresh": false,
			"allowAnyValue": false,
			"captureFocus": false,
			"scroll": false,
			"generateLinks": function(data) {
				var buttonSubTheme = 'circle';
				var buttonSubThemeDisabled = 'circleSubtle'
				//var buttonSubTheme = 'deny';
				//var buttonSubThemeDisabled = 'deny';
				if(typeof data.settings == 'undefined') return '';
				var _ss = data.settings;
				if(_ss.buttonsubtheme != 'undefined') { 
					var buttonSubTheme = _ss.buttonsubtheme
					var buttonSubThemeDisabled = _ss.buttonsubtheme
				}
				var listName = data.listName;
				//var listObj = _dlgObj.getControl(listName);
				var listObj = window[this.dialogId].getControl(listName);
				var suffix = '&nbsp;&nbsp;&nbsp;';
				var _type = 'list';
				if(typeof listObj.listVariableName == 'undefined') _type = 'ss';
				var recordsPerPage = '';
				if(_ss.showPageSizeSelector) {
					var recordsPerPageOptions = _ss.pageSizes;
					var _s = [];
					var _r = recordsPerPageOptions.split(',');
					if(_type == 'list') { 
						if(_r.indexOf(''+listObj._state.pageSize) == -1) _r.push(''+listObj._state.pageSize);
					} else { 
						if(_r.indexOf(''+listObj.pagination.__pageSize) == -1) _r.push(''+listObj.pagination.__pageSize);
					}
					if(_type == 'list') { 
						for(var i = 0; i < _r.length; i++) {
							if(_r[i] ==listObj._state.pageSize) {
								_s.push('<option value="'+_r[i]+'" selected="selected">' + _r[i] + '</option>');
							}	else {
							_s.push('<option value="'+_r[i]+'">' + _r[i] + '</option>');
							}
						}
					} 
					if(_type == 'ss') { 
						for(var i = 0; i < _r.length; i++) {
							if(_r[i] == listObj.pagination.__pageSize) {
								_s.push('<option value="'+_r[i]+'" selected="selected">' + _r[i] + '</option>');
							}	else {
							_s.push('<option value="'+_r[i]+'">' + _r[i] + '</option>');
							}
						}
					} 
					_s = _s.join(' ');
					var _classEdit;
					if(window[this.dialogId].styleVersion >=4) {
						_classEdit = 'edit';
					} else {
						_classEdit = styleName + 'Edit';
					}
					recordsPerPage = '<select id="s1" value="{pageSize}" class="'+_classEdit+'" onchange="var listObj = window[\''+this.dialogId+'\'].getControl(\''+listName+'\');listObj._setPageSize(this.value);">' + _s + '</select>';
					var templatePageSize = _ss.pageSizeSelectorTemplate
					recordsPerPage = templatePageSize.replace('{pageSizeSelector}',recordsPerPage) + suffix;
				}
				var _classEdit;
				if(window[this.dialogId].styleVersion >=4) {
					_classEdit = 'editPrimary';
				} else {
					_classEdit = styleName + 'Edit';
				}
				var pageNavigator = '<input class="'+_classEdit+'" style="width: '+_ss.currentPageNumberInputControlSize+'" value="{pageNumber}"  onkeyup="if(event.keyCode == 13) {window[\''+this.dialogId+'\']._listNavigateToPage(\''+listName+'\',this.value)}" />'
				//var pageNumberTemplateButton = A5.buttons.html("",{theme: styleName + ":"+buttonSubThemeDisabled,html: "{pageNumber}",layout: "text"});
				var pageNumberTemplateButton = A5.buttons.html("",{theme: styleName + ":"+buttonSubTheme,html: "{pageNumber}",layout: "text"},"","disabled");
				var pnTemplate = '';
				if(_ss.showCurrentPageNumber) {
					pnTemplate = _ss.currentPageNumberTemplate;
					if(_ss.showCurrentPageNumberasInputControl) {
						pnTemplate = pnTemplate.replace('{pageNumber}',pageNavigator);
					} else {
						pnTemplate = pnTemplate.replace('{pageNumber}',pageNumberTemplateButton);
					}
				}
				var firstButtonImage, prevButtonImage, nextButtonImage, lastButtonImage;
				firstButtonImage = _ss.firstIcon;
				prevButtonImage = _ss.prevIcon;
				lastButtonImage = _ss.lastIcon
				nextButtonImage = _ss.nextIcon
				var flagShowCurrentPageNumber = _ss.showCurrentPageNumber;
				var totalPagesTemplate = _ss.currentPageNumberTemplate;
				if(flagShowCurrentPageNumber) {
					var flagShowpageNavigator = _ss.showCurrentPageNumberasInputControl;
				} else {
					var flagShowpageNavigator = false;
					totalPagesTemplate = '';
				}
				var template =  A5.buttons.html("",{theme: styleName + ":"+buttonSubTheme,html: "{pageNumber}",layout: "text"},'a5-item=\'clickNavigationLink:{listName}|{pageNumber}\'');
				var firstbutton, prevbutton,nextbutton,lastbutton;
				if(data.pageNumber == 1) {
					//firstbutton = A5.buttons.html(listObj.contId + '.FIRST',{theme: styleName + ":"+buttonSubThemeDisabled,layout: "icon",icon:firstButtonImage},"") + suffix;
					//prevbutton = A5.buttons.html(listObj.contId + '.PREV',{theme: styleName + ":"+buttonSubThemeDisabled,layout: "icon",icon:prevButtonImage},"") + suffix;
					firstbutton = A5.buttons.html(listObj.contId + '.FIRST',{theme: styleName + ":"+buttonSubTheme,layout: "icon",icon:firstButtonImage},"","disabled") + suffix;
					prevbutton = A5.buttons.html(listObj.contId + '.PREV',{theme: styleName + ":"+buttonSubTheme,layout: "icon",icon:prevButtonImage},"","disabled") + suffix;
				} else {
					firstbutton = A5.buttons.html(listObj.contId + '.FIRST',{theme: styleName + ":"+buttonSubTheme,layout: "icon",icon:firstButtonImage},'a5-item=\'clickNavigationLink:{listName}|first\'') + suffix;
					prevbutton =  A5.buttons.html(listObj.contId + '.PREV',{theme: styleName + ":"+buttonSubTheme,layout: "icon",icon:prevButtonImage},'a5-item=\'clickNavigationLink:{listName}|prev\'') + suffix;
				}
				if(data.pageNumber == data.totalPages) {
					//lastbutton = A5.buttons.html(listObj.contId + '.LAST',{theme: styleName + ":"+buttonSubThemeDisabled,layout: "icon",icon:lastButtonImage},"") + suffix;
					//nextbutton = A5.buttons.html(listObj.contId + '.NEXT',{theme: styleName + ":"+buttonSubThemeDisabled,layout: "icon",icon:nextButtonImage},"") + suffix;
					lastbutton = A5.buttons.html(listObj.contId + '.LAST',{theme: styleName + ":"+buttonSubTheme,layout: "icon",icon:lastButtonImage},"","disabled") + suffix;
					nextbutton = A5.buttons.html(listObj.contId + '.NEXT',{theme: styleName + ":"+buttonSubTheme,layout: "icon",icon:nextButtonImage},"","disabled") + suffix;
				} else {
					lastbutton = A5.buttons.html(listObj.contId + '.LAST',{theme: styleName + ":"+buttonSubTheme,layout: "icon",icon:lastButtonImage},'a5-item=\'clickNavigationLink:{listName}|last\'') + suffix;
					nextbutton =  A5.buttons.html(listObj.contId + '.NEXT',{theme: styleName + ":"+buttonSubTheme,layout: "icon",icon:nextButtonImage},'a5-item=\'clickNavigationLink:{listName}|next\'') + suffix;
				}
				var pageNumber = data.pageNumber;
				var links = _ss.numberOfLinks
				var totalPages = data.totalPages;
				var totalRecords = data.totalRecords;
				var selectedClass = data.selectedClass;
				var before = [];
				var after = [];
				var linksBefore = '';
				var linksAfter = '';
				var totalPagesText = totalPagesTemplate.replace(/{pageCount}/g,''+totalPages);
				var totalPagesText = totalPagesText.replace(/{recordCount}/g,''+totalRecords);
				if(template == '') template = '{pageNumber}';
				links = $u.n.round((links/2),0,'d');
				if( (data.totalPages - data.pageNumber) <=links ) {
					linksAfter = data.totalPages - data.pageNumber
					linksBefore = (links * 2) - linksAfter;
				} else if (pageNumber>links) {
					linksBefore = links
					linksAfter = links
				} else {
					var _p = '';
					for(var i = links; i > 0; i--) {
						_p = pageNumber - i;
						if(_p >0) {
							before.push(_p);
						}
					}
					linksBefore = before.length
					if(linksBefore > links) {
						linksBefore = links;
					}
					linksAfter = ( (links*2) - linksBefore)
				}
				before = [];
				after = [];
				var _p = '';
				var _template_i = '';
				for(var i = linksBefore; i > 0; i--) {
					if((pageNumber-i) > 0){
						var _pn = '' + (pageNumber-i);
						_p = template.replace(/{pageNumber}/g, _pn) + suffix;
						before.push(_p);
					}
				}
				for(var i = 1; i <= linksAfter; i++) {
					if( (pageNumber + i) <= totalPages) {
						var _pn = '' + (pageNumber + i);
						_p =  template.replace(/{pageNumber}/g, _pn) + suffix;
						after.push(_p);
					}
				}
				pnTemplate = pnTemplate.replace('{pageCount}',totalPages);
				var pageNumberText = pnTemplate.replace(/{pageNumber}/g, pageNumber);
				pageNumberText = pageNumberText.replace(/{recordCount}/g,''+totalRecords);
				if(pageNumberText != '') {
					pageNumberText = pageNumberText + suffix;
				};
				var string = recordsPerPage + firstbutton + prevbutton + before.join(' ') +  pageNumberText +    after.join(' ') + nextbutton + lastbutton;
				var _class = '';
				if(_ss.buttonSize == "Compact") _class = 'compact';
				string = '<div class="'+_class+'">' + string.replace(/{listName}/g,listName) + '</div>'
				return string;
			},
			"layout": "default",
			"layouts": {
				'default' : {
					type: 'template',
					template: [
					'{@[scope].generateLinks}'
					].join('')
				}
			},
			"_onInitialize": function() { $acn(listObj.contId,'DLG1_' + this.variableName); },
			"items": {
				'clickNavigationLink' : {
					itemName: 'clickNavigationLink',
					selectable: false,
					onClick: function(v,ia,i,ele) {
						ia = ia.split('|');
						var list = ia[0];
						var target = ia[1];
						if(target == 'first' || target == 'prev' || target == 'next' || target == 'last') {
							window[this.dialogId]._listNavigate(list,target)
						} else {
							window[this.dialogId]._listNavigateToPage(list,target)
						}
					}
				},
				'setRecordsPerPage' : {
					itemName: 'setRecordsPerPage',
					selectable: false,
					onClick: function(v,ia,i,ele) {
						alert(ia);
					}
				}
				}
		}
		var _data = {};
		//_settings.onBeforePopulate = function() { debugger;}
		var navBar =  new A5.ViewBox(_id,_data,_settings);
		return navBar
	}
DLG1_DlgObj._layoutMode = 'containerwidth';
DLG1_DlgObj._responsiveRulesMode = 'firsttrue';
DLG1_DlgObj.__controlNesting = {
PANELHEADER_53: [],
CONTAINER_8_2: ['container:CONTAINER_240_2'],
CONTAINER_240_2: [],
CONTAINER_241: ['repid','MedRep','frame:FRAME_2','Date','password'],
FRAME_2: ['repid_1','MedRep_1'],
CONTAINER_238: [],
CONTAINER_239: ['autosaveinv','hidebonus','COMPANYID'],
WINDOW_PROGRESS: [],
WINDOW_16: ['changepass','newpassword'],
PANELFOOTER_26: [],
CONTAINER_8_1: ['container:CONTAINER_240_1'],
CONTAINER_240_1: [],
CONTAINER_10: ['CompanyCode','CompanyName'],
CONTAINER_238_1: [],
PANELHEADER_55: ['MessLow_','MessMedium_','MessHight_','MessAlert_','container:CONTAINER_246'],
CONTAINER_246: ['SliderSaving'],
PANELHEADER_2: [],
PANELFOOTER_4: [],
PANELHEADER_23: ['Search_offRoute'],
PANELFOOTER_5: [],
PANELHEADER_9: [],
PANELHEADER_50: ['test1','test2'],
PANELFOOTER_27: [],
PANELHEADER_4: ['DEVLAT','DEVLONG'],
PANELFOOTER_3: [],
PANELHEADER_51: [],
INJECTIBLE_3: ['container:CONTAINER_244','container:CONTAINER_245','container:INJECTIBLE_ORDERTOT','container:INJECTIBLE_INVTOT'],
CONTAINER_244: ['dropgroup','dropsubgroup','txtsearchdesc','subgrouparray'],
CONTAINER_245: [],
INJECTIBLE_ORDERTOT: ['total_bef_ord','total_vat_order','total_order_with_vat'],
INJECTIBLE_INVTOT: ['total_bef_inv','total_vat_inv','total_inv_with_vat'],
WINDOW_18: ['Ditrict1','district_id','Region1','Area1'],
GETPASS: ['posaccuracy','posDistance','container:CONTAINER_248'],
CONTAINER_248: ['mypin','receivedpin','pinisvalid'],
WINDOW_SKIPREAS: ['skipreas','skipcomment'],
WINDOW_VACATION: ['vacation_medrep','vacation_company_id','vacation_activity','reason','vacation_date','vacation_comment'],
CONTAINER_1_1: ['routeid','medrepid','endtime','latx','laty','accuracy','altitude','altitudeaccur','heading','speed','timestanpd'],
PANELHEADER_6: [],
PANELFOOTER_30: [],
PANELHEADER_8: [],
PANELFOOTER_29: [],
PANELHEADER_11: [],
PANELFOOTER_28: [],
PANELHEADER_12: [],
PANELFOOTER_6: [],
PANELHEADER_18: [],
WINDOW_14: ['container:CONTAINER_1'],
CONTAINER_1: ['paimenttype','txtrecdesc','Currency','amount','OnInvoiceNo'],
WINDOW_SHIP: ['Shipdate','PayMode','DeliveryMode'],
PANELFOOTER_25: [],
PANELHEADER_19: [],
PANELHEADER_20: [],
PANELHEADER_21: [],
CONTAINER_226: ['LSTVISITNOTES'],
WINDOW_13: ['container:CONTAINER_1_4'],
CONTAINER_1_4: ['imageblob','Notes','note_compid','id_3','visitfk'],
PANELFOOTER_24: [],
PANELHEADER_25: [],
CONTAINER_2: ['lstMedialFiles'],
PANELHEADER_26: [],
CONTAINER_228: ['FeedBack'],
PANELHEADER_39: [],
PANELHEADER_42: [],
PANELFOOTER_31: [],
PANELHEADER_43: [],
WINDOW_BASKET: ['BASKETNUM'],
WINDOW_15: ['basketitem'],
WINDOW_17: ['container:CONTAINER_252','container:CONTAINER_253','container:CONTAINER_255','liteitems_DiscussedType','listitems_DiscussedComent','container:CONTAINER_247','returnable','flagviewbonus'],
CONTAINER_252: ['prodcode','itemname'],
CONTAINER_253: ['container:CONTAINER_251','container:CONTAINER_249','container:CONTAINER_254','container:CONTAINER_256','container:CONTAINER_250'],
CONTAINER_251: [],
CONTAINER_249: ['lstitems_qty_pac','lstitems_bonusq_pac'],
CONTAINER_254: ['dropsellunit','dropbonusunit'],
CONTAINER_256: ['lstitems_sellsize','lstitems_bonussize'],
CONTAINER_250: [],
CONTAINER_255: ['qty','bonus','lstitems_unitpr','lstitems_discount','Total_Price','smoq','bmoq'],
CONTAINER_247: ['tmpret','returnitem','returnqty','retprice'],
PANELHEADER_1: [],
PANELFOOTER_38: [],
PANELHEADER_48: [],
PANELFOOTER_33: [],
PANELHEADER_49: ['LSTPOI_KEYWORDSEARCH'],
PANELFOOTER_34: [],
PANELHEADER_60: [],
CONTAINER_NEW_POI: ['POINAME_1','COMMENT_1','CONTACTPERSON','PHONENO_1','MOBILE','EMAIL','ADDRESS','STREET','frequency','medrep_id','company_id'],
PANELFOOTER_35: [],
PANELHEADER_52: [],
PANELHEADER_54: [],
PANELHEADER_56: [],
PANELHEADER_57: [],
PANELFOOTER_36: [],
PANELHEADER_59: [],
PANELHEADER_59_1: [],
PANELHEADER_59_2: [],
PANELFOOTER_37: [],
PANELHEADER_58: []
}
DLG1_DlgObj._listsDV = ['LSTVISITHEAD','LSTDISCUSSED','LSTSAMPLES','LSTORDERS','LSTINVOICES','LSTRECEIPT','LSTVISITNOTES','LSTITEMS','LSTVACATION','LSTPOI','LSTDEALS','LSTGEOLOC'];
//Add methods to the List prototype for Lists with Detail Views
$u.o.assign(A5.ListBox.prototype,
{
 __deleteOrphanFiles_new: function() {
var lObj = this;
try{
 if(lObj._phoneGap.mediaFiles.download.autodownloadFilesOnPullSynch) {
  if(lObj._phoneGap.mediaFiles.download.deleteOrphansAfterSync) {
   var flagDeleteOrphans = true;
  }
 }
}catch(e) {
 var flagDeleteOrphans = false;
}
 var obj = this;
 var cb = function(arr) {
  var countOK =0;
  var countFail = 0;
  var ok = function(count,countOK,countError) { alert('total count: ' +count + ' deleted: ' + countOK) }
  var fail = function(count,countOK, countError) { alert('failed'); }
  if(arr.length ==0) {
   ok.call(this,0,0,0);
  } else {
   for(var i = 0; i < arr.length; i++) {
    var f = arr[i];
    var _onDeleteSuccess = function(count,countOK,countFail) {countOK++ };
    var _error = function(e) {countFail++ };
   }
   DLG1_DlgObj.deleteArrayOfFiles(arr,ok,fail)
  }
 }
 obj.__findOrphanFiles(cb);
}
,
 _getMediaFilesInPermanentStorage: function(cb) {
 var obj = this;
 var listName = obj.listVariableName;
 var flag2 = obj._phoneGap.mediaFiles.fireMediaFileCleanup
 var fs2 = obj._phoneGap.mediaFiles.mediafilefolderlocation
 var folder2 = obj._phoneGap.mediaFiles.mediafilefoldertoclean;
 var _onCompletion = function(filelist) {
  var f2 = [];
  for(var i = 0; i < filelist.length; i++) {
   var fi = filelist[i];
   if(fi[fi.length-1] != '/') f2.push(fi)
  }
  filelist = f2;
  for(var i = 0; i <filelist.length; i++) {
   filelist[i] = _dirPath + filelist[i];
  }
  if(typeof cb == 'function') cb.call(this,filelist);
 };
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var _error = function(e) { alert('error');};
 var _baseURI = _dlgObj.phoneGapGetLocalDirURL(fs2);;
 var _dirName = folder2 +'/' ;;
 var _dirPath = _baseURI + _dirName;
 _dlgObj.phoneGapListFilesRecurseURL(_dirPath, _onCompletion, _error);
}
,
 __findOrphanFiles: function(cb) {
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var obj = this;
 var listName = obj.listVariableName;
 var flag = obj._phoneGap.mediaFiles.download.autodownloadFilesOnPullSynch
 var fs = obj._phoneGap.mediaFiles.download.targetFileSystem
 var folder = obj._phoneGap.mediaFiles.download.targetFolder
 var _onCompletion = function(filelist) {
 var f2 = [];
  for(var i = 0; i < filelist.length; i++) {
   var fi = filelist[i];
   if(fi[fi.length-1] != '/') f2.push(fi)
  }
  filelist = f2;
  for(var i = 0; i <filelist.length; i++) {
   filelist[i] = _dirPath + filelist[i];
  }
  var obj = _dlgObj.getControl('images_parent')
  var rows = 'all';
  var arr = obj._harvestMediaFields({cleanOnly: true},rows);
  var referencedFiles = [];
  for(var i = 0; i < arr.length; i++) {
   var fi = arr[i].filename
   fi = fi.split('//').join('/');
   fi = fi.split('file://').join('file:///')
   referencedFiles.push(fi)
  }
  var subtractArray = function(arrToSubtractFrom,arrToSubtract) {
   var arr3 = [];
   var index = '';
   for(var i = 0; i < arrToSubtractFrom.length; i++) {
    indx = arrToSubtract.indexOf(arrToSubtractFrom[i])
    if(indx == -1) arr3.push(arrToSubtractFrom[i])
   }
   return arr3;
  }
  var arrToSubtractFrom = filelist;
  var arrToSubtract = referencedFiles
  var orphans = subtractArray(arrToSubtractFrom,arrToSubtract)
  if(typeof cb == 'function') {
   cb.call(this,orphans);
  }
 };
 var _error = function(e) { alert('error');};
 var _baseURI = _dlgObj.phoneGapGetLocalDirURL(fs);;
 var _dirName = folder +'/' + listName + '/';;
 var _matchRegex = '';
 var _dirPath = _baseURI + _dirName;
 _dlgObj.phoneGapListFilesRecurseURL(_dirPath, _onCompletion, _error);
}
,
 __cleanMediaFiles: function() {
 var obj = this;
 var rows = 'all';
 var arr = obj._harvestMediaFields({cleanOnly: true},rows);
 var arr2 = [];
 for(var i = 0; i < arr.length; i++) {
  var fi = arr[i].filename
  fi = fi.split('//');
  fi = fi.join('/');
  arr2.push(fi)
 }
 return arr2
}
,
 _deleteOrphanMediaFiles_low: function() {
 var obj = this;
 var listName = obj.listVariableName;
 var folder = '';
 obj._deleteMediaFilesFromPermanentStorage()
 try{
  var fspart = obj._phoneGap.mediaFiles.download.targetFileSystem
  var folder = obj._phoneGap.mediaFiles.download.targetFolder
 }catch(e) {
  alert('You have not configured the List download folder for media files');
  return;
 }
 if(folder == '') return;
 var keep = this.__cleanMediaFiles()
 var _onSuccess = function(filelist) {
  var f = [];
  for(var i = 0; i < filelist.length;  i++) {
   var txt = filelist[i]
   if(txt[txt.length-1] != '/') {
    txt = _dirPath + txt;
    txt = txt.split('///').join('//');
    f.push(txt)
   }
  }
  filelist = f;
  var orphan = [];
  for(var i = 0; i < filelist.length; i++) {
   var fi = filelist[i]
   var indx = keep.indexOf(fi)
   if(indx == -1) {
    $('pre1').innerHTML = 'file: ' + fi;
    orphan.push(fi)
   }
  }
  var _dlgObj = window[that._hostComponentId + '_DlgObj'];
  var orphanCount = orphan.length;
  var result = _dlgObj._list_executeEvent(lObj.listVariableName,'detailView.beforeDeleteOrphanMediaFiles',{array:orphan});
  if(orphanCount == 0) {
   _dlgObj._list_executeEvent(lObj.listVariableName,'detailView.afterDeleteOrphanMediaFiles',{countFilesDeleted:0});
  }
  if(result == false) return;
  var flagDeleteOrphans = true;
  if(flagDeleteOrphans) {
   var count = 0;
   var okCount = 0;
   var errorCount = 0;
   var _onDeleteSuccess = function() {
    count++;
    okCount++;
    if(count == orphanCount) {
     _dlgObj._list_executeEvent(lObj.listVariableName,'detailView.afterDeleteOrphanMediaFiles',{countFilesDeleted:okCount});
    }
   };
   var _onDeleteError = function(e) {
    count++;
    errorCount++;
    if(count == orphanCount) {
     _dlgObj._list_executeEvent(lObj.listVariableName,'detailView.afterDeleteOrphanMediaFiles',{countFilesDeleted:okCount});
    }
     };
   for(var i =0; i < orphan.length; i++) {
    var _filePath = orphan[i];
    var fileToDelete = _filePath;
    fileToDelete = fileToDelete.split('//').join('///');
    _dlgObj.phoneGapDeleteFileURL(fileToDelete, _onDeleteSuccess,_onDeleteError);
   }
  }
 };
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var _error = function(e) { alert('xxx failed' + JSON.stringify(e))};
 var _baseURI = _dlgObj.phoneGapGetLocalDirURL(fspart);;
 var _dirName = folder + '/';;
 var _dirPath = _baseURI + _dirName;
 var that = this;
 if(typeof cordova == 'undefined') {
 } else {
  _dlgObj.phoneGapListFilesRecurseURL(_dirPath, _onSuccess, _error);
 }
}
,
 _deleteMediaFilesFromPermanentStorage: function() {
 var obj = this;
 var mode = '';
 try{mode = arguments[0].mode}catch(e) { }
 var rows = 'all';
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var arr = obj._harvestMediaFields({},rows);
 var arrClean = obj._harvestMediaFields({cleanOnly: true},rows)
 var dirtyFiles = [];
 for(var i = 0; i < arr.length; i++) {
  dirtyFiles.push(arr[i].filename);
 }
 var flagDoCleanup = false;
 try{
  var flagDoCleanup = obj._phoneGap.mediaFiles.fireMediaFileCleanup;
  var folderToClean = obj._phoneGap.mediaFiles.mediafilefoldertoclean + '/';
  var folderToCleanLocation = obj._phoneGap.mediaFiles.mediafilefolderlocation;
 }catch(e) { }
 if(!flagDoCleanup) return;
 var allfilesinFolder = [];
 var _onSuccess = function(filelist) {
 ;
  allfilesinFolder = filelist;
  for(var i = 0 ; i < allfilesinFolder.length; i++) {
   allfilesinFolder[i] = _baseURI + folderToClean + allfilesinFolder[i];
  }
  var filesToKeep = dirtyFiles;
  var filesToDelete = [];
  for(var i = 0; i < allfilesinFolder.length; i++) {
   var fi = allfilesinFolder[i];
   if(filesToKeep.indexOf(fi) == -1) {
    filesToDelete.push(fi);
   }
  }
  var cleanImagesShortName= [];
  for(var i = 0; i < arrClean.length; i++) {
   delete o;
   var o = A5.parseFilename(arrClean[i].filename)
   cleanImagesShortName.push(o.name);
  }
  var actualFilesToDelete = [];
  for(var i = 0; i < filesToDelete.length; i++) {
   var o = A5.parseFilename(filesToDelete[i])
   var fn = o.name;
   var indx = cleanImagesShortName.indexOf(o.name);
   if(indx > -1) {
    actualFilesToDelete.push(filesToDelete[i]);
   }
  }
  if(mode.toLowerCase() != 'allfiles')  filesToDelete = actualFilesToDelete;
  var countFilesToDelete = filesToDelete.length
  if(countFilesToDelete > 0) {
   var _clearOK = function() {
   }
   var _clearError = function() {
   }
   _dlgObj.deleteArrayOfFiles(filesToDelete, _clearOK  ,_clearError)
  } else {
  }
 };
 var _error = function(e) { alert('failed')};
 var _baseURI = _dlgObj.phoneGapGetLocalDirURL(folderToCleanLocation);;
 var _dirName = folderToClean;;
 var _dirPath = _baseURI + _dirName;
 _dlgObj.phoneGapListFilesRecurseURL(_dirPath, _onSuccess, _error);
}
,
 _deleteOrphanIndexDBImages: function(flagForce) {
 if(typeof flagForce == 'undefined') flagForce = false;
 var lObj = this;
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var ok = function(data) {
  var arr = lObj._harvestMediaFields({indexDB:true, dirtyOnly: false});
  var filenamesUsed = [];
  for( var i = 0; i < arr.length; i++){
   filenamesUsed.push(arr[i].filename);
  }
   lObj._putIndexDBKeyNamesIntoListData(arr);
   var arr = lObj._harvestMediaFields({indexDB:true, dirtyOnly: false});
  var filenamesUsed = [];
  for( var i = 0; i < arr.length; i++){
   filenamesUsed.push(arr[i].filename);
  }
  var orphan = [];
  for(var i = 0; i < data.length; i++) {
   if( filenamesUsed.indexOf(data[i]) == -1) {
    if(data[i].indexOf('INDEXDB') > -1) {
     orphan.push(data[i]);
    }
   }
  }
  var result = _dlgObj._list_executeEvent(lObj.listVariableName,'detailView.beforeDeleteOrphanMediaFiles',{array:orphan});
  var flagDeleteOrphans = false;
  try{
   flagDeleteOrphans = lObj._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
  }catch(e) { }
  if(flagForce) flagDeleteOrphans = true;
  if( result && flagDeleteOrphans) {
   if(orphan.length > 0) {
    for(var i = 0;i <orphan.length; i++) {
     _dlgObj.idbDeleteItem(orphan[i]);
    }
   }
  } else {
  }
  var txt = JSON.stringify(orphan,'','\t');
  lObj.__loadImages();
  lObj.populateUXControls()
 }
 var error = function() { alert('error');}
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 _dlgObj.idbGetKeys(ok,error);
}
,
 _indexDBResetImageURLs: function() {
 var lObj = this;
 var _data = lObj._data
 var _dataJSON = JSON.stringify(_data)
 var rArr = lObj.__replace;
 var s = '';
 var r = '';
 if (typeof rArr == 'undefined') return;
  for(var i = 0; i < rArr.length; i++) {
   s = rArr[i].key;
   r = rArr[i].url;
   _dataJSON = _dataJSON.replace(s,r)
 }
 _dataJSON = _dataJSON.split('INDEXDB_').join('');
 var _data2 = JSON.parse(_dataJSON);
 lObj.populate(_data2);
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var obj = {};
 obj.phase2 = true;
 _dlgObj.saveListEdits(lObj.listVariableName,obj);
}
,
 _putIndexDBKeyNamesIntoListData: function(arr) {
 var lObj = this;
 var putdata = function(arr,lObj) {
  var route = '';
  var r = '';
  var d = '';
  function getData(lObj,route) {
   route  = JSON.parse(route);
   r = [];
   for(var i = 0; i < route.length; i++) {
    r.push(route[i].table);
    r.push(route[i].row);
   }
   r.shift();
   data = lObj._data;
   var d = '';
   for(var i = 0; i < r.length; i++) {
    d = data[r[i]];
    data = d;
   }
   return d;
  }
  for(var i = 0; i < arr.length; i++) {
   var route = arr[i].route;
   var data = getData(lObj,route);
   if(data[arr[i].listFieldName].indexOf('INDEXDB_') != 0) {
    data[arr[i].listFieldName] = 'INDEXDB_' +arr[i].filename;
   }
  }
 }
 putdata(arr,lObj);
 lObj.refresh();
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 _dlgObj.persistListToLocalStorage(this.listVariableName);
}
,
 _getBase64Data: function(flagRefreshMode) {
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var listName = this.listVariableName;
 var lObj = this;
 if(typeof flagRefreshMode == 'undefined') flagRefreshMode = false;
 if(flagRefreshMode) {
  var arr = lObj._harvestMediaFields({indexDB:true, dirtyOnly: false});
  this._putIndexDBKeyNamesIntoListData(arr);
 }
 var okGotKeys = function(data) {
  var datajson0 = JSON.stringify(data,'','\t')
  var lObj = _dlgObj.getControl(listName)
  var arr = lObj._harvestMediaFields({indexDB:true, dirtyOnly: false});
  var fetchImages = [];
  var msg = JSON.stringify(arr,'','\t');
  msg = 'Images found: ' + arr.length + '\n'; + msg;
  var countImagesFound = 0;
  for(var i = 0; i < arr.length; i++) {
   arr[i]._found = false;
   var url = arr[i].filename;
   var idx = -1;
   for(var i2 = 0; i2 < data.length; i2++) {
    if(data[i2] == '' + url || data[i2] == 'INDEXDB_' + url) {
     arr[i]._found = true;
     idx = i2;
     countImagesFound++
     break;
    }
   }
   if(idx == -1) {
    fetchImages.push(arr[i].filename);
   } else {
   }
  }
  if(fetchImages.length > 0 ) {
  }
  var countImagesToFetch = (arr.length - countImagesFound);
  var data = [];
  data.push(A5.ajax.buildURLParam('__array',JSON.stringify(arr)));
  data.push(A5.ajax.buildURLParam('__listname',listName));
  data.push(A5.ajax.buildURLParam('__progress',JSON.stringify(lObj._indexdb.mediafiles)));
  data = data.join('&')
  var that = this;
  var result = _dlgObj._list_executeEvent(listName,'detailView.beforeMediaFilesDownloaded',{array:arr, originalArray:arr});
  if(!result) {
   _dlgObj._list_executeEvent(listName,'detailView.afterMediaFilesDownloaded',{array:arr, aborted: true, originalArray: arr});
   setTimeout(function() {
   })
   return false;
  }
  _dlgObj.ajaxCallback('','','system:getBase64dataForImages','',data,{chunkedResponses: {allow: true,maxMessages: -1,maxTime: 600},deviceOfflineFunction: function() {   },checkifserveravailable: true,serveravailabletimeout: 2000,onServerNotAvailable: function() { alert('The server is not available');},retryCount: 0});
 }
 var errorGettingKeys = function() { alert('error');}
 _dlgObj.idbGetKeys(okGotKeys,errorGettingKeys);
}
,
 applyData: function() {
 var rn = DLG1_DlgObj.__rownumbers;
 var data = DLG1_DlgObj.__data;
 var findData = function(pk) {
  for(var i = 0; i < data.length; i++) {
   if((''+data[i].__primaryKey).toUpperCase() == (''+pk).toUpperCase()) {
    return data[i]
   }
  }
  alert('error 9346 in applydata data not found for primary key: ' + pk);
  return {}
 }
 for(var i = 0; i < rn.length; i++) {
  var _pk = rn[i].primaryKey;
  var _row = rn[i].rowNumber;
  var d = findData(_pk);
  var _rowPhysical = this._dataMap[_row]
  this._data[_rowPhysical] = d;
 }
 this.refresh();
}
,
 applyData2: function() {
 if(arguments.length == 0) {
  var rn = DLG1_DlgObj.__rownumbers;
  var data = DLG1_DlgObj.__data;
  var fdata = this._data;
  var errors = [];
  if(typeof DLG1_DlgObj.__errors != 'undefined') errors = DLG1_DlgObj.__errors;
  var cleanRows = [];
  if(typeof DLG1_DlgObj.__cleanRows != 'undefined') cleanRows = DLG1_DlgObj.__cleanRows;
  var _row;
  for(var i = 0; i < cleanRows.length; i++) {
   var _r = cleanRows[i];
   var d = this._getDataFromRoute(_r);
   delete d._oldData;
  }
 } else {
  var rn = arguments[0];
  var data = arguments[1];
  var fdata = arguments[2];
 }
 var findData = function(pk) {
  for(var i = 0; i < data.length; i++) {
   if((''+data[i].__primaryKey).toUpperCase() == (''+pk).toUpperCase()) {
    return data[i]
   }
  }
  alert('error 9345 data not found for primary key: ' + pk);
  return {}
 }
 for(var i = 0; i < rn.length; i++) {
  var _pk = rn[i].primaryKey;
  var _row = rn[i].rowNumber;
  var d = findData(_pk);
  d._isDirty = false;
  d._isNewRow = false;
  d._hasGlobalErrors = false;
  d._flagGlobalErrorInChild = false;
  d._hasServerSideError = false;
  d._flagServerSideErrorInChild = false;
  d._globalErrors = '';
  d._globalErrorsRaw = '';
  if(arguments.length == 0) {
   var _rowPhysical = this._dataMap[_row];
  } else {
   var _rowPhysical = _row;
  }
  var od = fdata[_rowPhysical]
  for(var p in d) {
   if(p.indexOf('__LIST__') == 0 ) {
    var crn = [];
    var cData = d[p];
    if(typeof od != 'undefined') {
     var oData = od[p];
    } else {
     var oData = [];
     od = {};
    }
    if(oData.length == 0 && (cData &&cData.length > 0)) {
     od[p] = d[p];
    } else if(Array.isArray(cData) && oData.length > 0) {
     for(var k = 0; k < cData.length; k++) {
      var krn = A5.u.array.search(oData,{'*value': cData[k].__primaryKey})
      if(krn == -1) {
       var krn = A5.u.array.search(oData,{'__primaryKey': cData[k].__primaryKey});
      }
      crn.push({primaryKey: cData[k].__primaryKey, rowNumber: krn});
     }
     this.applyData2(crn,cData,oData);
    }
   }else { try{od[p] = d[p]} catch(e) { };
   }
  }
 }
 if(arguments.length == 0){
  for(var i = 0; i < errors.length; i++) {
   var d = this._getDataFromRoute(errors[i].route);
   if(d) {
    var txt = errors[i].error
    var txtRaw = txt;
    d._globalErrors = txt;
    d._globalErrorsRaw = txtRaw;
    d._hasGlobalErrors = true;
   }
  }
  for(var i = 0; i < cleanRows.length; i++) {
   var d = this._getDataFromRoute(cleanRows[i]);
   if(d) {
    d._isNewRow = false;
    d._isDirty = false;
   }
   this._populateMyChildren();
  }
  this.refresh();
 }
}
,
 _pullSyncStart: function() {
}
,
 _pullSyncEnd: function() {
 if(this._beforePersistToStorage) this._beforePersistToStorage({mode:'incrementalRefresh', data: data});
 if(this.persistToStorage) this.persistToStorage({mode:'incrementalRefresh', data: data});
}
,
 _setRouteClean: function(route) {
 var listName = this.listVariableName;
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var lObj = _dlgObj.getControl(listName);
 lObj.setRowClean(route);
 for(var i = 0; i < route.length; i++) {
  if(route[i].constructor == String) {
   if(route[i].indexOf('__LIST__') > -1) {
    listName = route[i].split('__LIST__')
    listName = listName[1];
    lObj = _dlgObj.getControl(listName);
   }
  } else {
   lObj.setRowClean(route[i]);
  }
 }
}
,
 _removeRowsInRoute: function(route) {
 var listName = this.listVariableName;
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var lObj = _dlgObj.getControl(listName);
 var _d = lObj._data;
 for(var i = 0; i < route.length; i++) {
  if(route[i].constructor == String) {
   listName = route[i].split('__LIST__')
   listName = listName[1];
   lObj = _dlgObj.getControl(listName);
  } else {
   if(i == route.length-1) {
    lObj.removeRows( [route[i]]);
    _d.splice( route[i],1);
   }
  }
  _d = _d[route[i]];
 }
}
,
 _setLinkValue: function(route,linkfield,linkvalue) {
 var lObj = this;
 var _d = lObj._data;
 for(var i = 0; i < route.length; i++) {
   _d = _d[route[i]];
 }
 _d[linkfield] = linkvalue;
 lObj.refresh();
 lObj._populateMyChildren();
}
,
 _setPrimaryKey: function(route,pkvalue,pkfields){
 var lObj = this;
 var _d = lObj._data;
 for(var i = 0; i < route.length; i++) {
  _d = _d[route[i]];
 }
 _d['__primaryKey'] = pkvalue;
 var f = pkfields.split('.');
 var v = pkvalue.split('|||');
 for(var i = 0; i < f.length; i++) {
  _d[f[i]] = v[i];
 }
 lObj.refresh();
 lObj._populateMyChildren();
}
,
 _isValidValue: function(value) {
 for(var i = 0; i < this._data.length; i++) {
  if(this._data[i]['*value'] == value) return true;
 }
 return false;
}
,
 _getTopParentListObject: function() {
 var topParent = this.allParentLists[this.allParentLists.length -1];
 if(typeof topParent == 'undefined') {
  return this;
 } else {
  var lObj = window[this._hostComponentId + '_DlgObj'].getControl(topParent);
  return lObj;
 }
}
,
 _clearNestedArrays: function(row) {
 var _data = this._data[row];
 var __clearSubarray = function(_data) {
  for(var n in _data) {
   if(n.indexOf('__LIST__') == 0) {
    _data[n] = []
   }
  }
 }
 __clearSubarray(_data);
}
,
 _controlDefaultValueForListField: function(fieldName) {
 var controlName = this._getUXDetailViewControlName(fieldName);
 if(controlName == '') return '';
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  return _dlgObj.defaultValues[controlName.toUpperCase()];
}
,
 _updateRowAfterSync: function(pk,data) {
 this.updateRow(pk,data);
 var lObjP = this._getTopParentListObject();
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var _mode = _dlgObj.__listPersistMode(lObjP.listVariableName);
 if(_mode == 'edits') {
  _dlgObj._saveSyncedEdits(lObjP.listVariableName,pk,data);
 }
}
,
 _updateNewRow: function(rowNum,data) {
 var lObjP = this._getTopParentListObject();
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var _mode = _dlgObj.__listPersistMode(lObjP.listVariableName);
 var _currRow = this.selection[0];
 this.updateRow(rowNum,data);
 if(typeof _currRow != 'undefined') this.setValue(_currRow,false);
 if(_mode == 'edits') {
  _dlgObj._appendNewRowToSyncedEdits(lObjP.listVariableName,data);
 }
}
,
 _updateExistingRow: function(rowNum,data) {
 var lObjP = this._getTopParentListObject();
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var _mode = _dlgObj.__listPersistMode(lObjP.listVariableName);
 this.updateRow(rowNum,data);
 if(_mode == 'edits') {
  _dlgObj._updateDataInSyncedEdits(lObjP.listVariableName,rowNum,data);
 }
}
,
 _removeRowsPullSync: function(array) {
 var lObjP = this._getTopParentListObject();
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var _mode = _dlgObj.__listPersistMode(lObjP.listVariableName);
 if(_mode == 'edits') {
  _dlgObj._updateDeletesInSyncedDeletes(lObjP.listVariableName,array);
 }
 this.removeRows(array);
}
,
 _appendNewRow2: function(data) {
 var lObjP = this._getTopParentListObject();
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var _mode = _dlgObj.__listPersistMode(lObjP.listVariableName);
 this.appendRows(data);
 if(_mode == 'edits') {
  _dlgObj._appendNewRowToSyncedEdits(lObjP.listVariableName,data);
 }
}
,
 _appendNewRow: function(data) {
 var lObjP = this._getTopParentListObject();
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var _mode = _dlgObj.__listPersistMode(lObjP.listVariableName);
 this.appendRows(data);
 if(_mode == 'edits') {
  _dlgObj._updateDataInSyncedEdits(lObjP.listVariableName,false,data);
 }
}
,
 _applyEditsToOriginalData: function(originalData,listEdits) {
 var flagAdd = false;
 if(typeof arguments[2] != 'undefined') flagAdd = arguments[2];
 var ol = originalData;
 var edits = listEdits;
 var findRowDataByKey = function(data,pk) {
  var ix = -1;
  for(var i = 0; i < data.length; i++) {
   if(data[i]['__primaryKey'] == pk) {
    ix = i;
    break;
   }
  }
  var rd = false;
  if(ix > -1) {
   rd = ix
  }
  return rd;
 }
 var _pk;
 var _rowData;
 var flagDoAppend;
 for (var i = 0; i < edits.length; i++) {
  _pk = edits[i]['__primaryKey'];
  if(typeof _pk == 'undefined') {
   flagDoAppend = true;
   if(typeof edits[i]._isDeleted != 'undefined') {
    if(edits[i]._isDeleted) {
     flagDoAppend = true
    }
   }
   if(flagAdd && flagDoAppend) originalData.push(edits[i]);
  } else {
   _rowData = findRowDataByKey(ol,_pk);
   if(_rowData != false || typeof _rowData == 'number') {
    originalData[_rowData] = {};
    $u.o.assign(originalData[_rowData],edits[i]);
   } else {
    flagDoAppend = true;
    if(typeof edits[i]._isDeleted != 'undefined') {
     if(edits[i]._isDeleted) {
      flagDoAppend = true
     }
    }
    if(flagAdd && flagDoAppend) originalData.push(edits[i]);
   }
  }
 }
 return ol;
}
,
 _applyDeletesToOriginalData: function(data,deletedPK) {
 for(var i = 0; i < deletedPK.length; i++) {
  for(var j = 0; j < data.length; j++) {
   if(data[j]['__primaryKey'] == deletedPK[i]) {
    data.splice(j,1);
    break;
   }
  }
 }
 return data;
}
,
 queryByFormClearControls: function() {
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var controlName;
 for(var i = 0; i < this._listFields.length; i++) {
  controlName = this._getUXDetailViewControlName(this._listFields[i].name);
  if(controlName != '') {
   val = '';
   _dlgObj.setValue(controlName,val,false);
  }
 }
}
,
 removeRowFromListByKey: function(rowKey) {
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var curVal = this.value[0];
 this.nullOutDetailViewRecord();
 _dlgObj.persistVariablesToLocalStorage();
 if(curVal != rowKey) {
  this.removeRows([rowKey]);
  if(typeof curVal != 'undefined') {
   this.setValue(curVal,false);
   this._selectedRow = curVal;
  }
  this.__currentRoute = this._getRoute();
 } else {
  var index = this.indexFromValue(curVal);
  var newIndex = '';
  if( (index+1) < this._dataMap.length) {
   newIndex = index;
  } else {
   newIndex = index -1;
  }
  this.removeRows([rowKey]);
  this.setValue(newIndex,false);
  this._selectedRow = newIndex;
  this.__currentRoute = this._getRoute();
 }
 _dlgObj.refreshClientSideComputations();
 var lObj = this;
 if (this._data.length == 0) {
  this.setValue(0,false);
  this._selectedRow = -1;
  var mode = this._noRecordInListIsSelectedSettingForDetailView;
  if(mode == 'newrecord') {
   var lObj = this;
   setTimeout(function() {lObj.newDetailViewRecord();},10);
  } else if (mode == 'disabledetailview') {
   var lObj = this;
   setTimeout(function() {lObj.disableDetailView();},10);
  }
 }
 _dlgObj._listRowSelect(this.listVariableName);
 var lObjP = this._getTopParentListObject();
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var _mode = _dlgObj.__listPersistMode(lObjP.listVariableName);
 if(_mode == 'edits') {
  _dlgObj._updateDeletesInSyncedDeletes(lObjP.listVariableName,[rowKey]);
 }
}
,
 searchModeOff: function() {
 if(this._dvmode != 'search') return true;
 var val = this._searchModeReturnValue;
 if(typeof val != 'undefined') {
  if(val != '') {
   this.setValue(this._searchModeReturnValue);
  } else {
   this.newDetailViewRecord();
  }
 } else {
  this.newDetailViewRecord();
 }
}
,
 searchModeOn: function() {
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 if(this.detailViewIsDirty()) {
  alert('cannot switch to search mode because detail view is dirty');
  return false;
 }
 this._dvmode = 'search';
 this._setNullMode();
 this._searchModeReturnValue = this.value;
 this._deselectAll();
 this.queryByFormClearControls();
 if(typeof this.__queryByFormValues != 'undefined') {
  for(var i = 0; i < this.__queryByFormValues.length; i++) {
   _dlgObj.setValue(this.__queryByFormValues[i].control,this.__queryByFormValues[i].value,false);
  }
 }
 _dlgObj._list_executeEvent(this.listVariableName,'detailView.modeChanged',{mode: 'search'});
 _dlgObj.refreshClientSideComputations();
}
,
 populateUXControls: function() {
 var r = this.selection[0];
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var lObj = this;
 var listId = this.listVariableName;
 var rowNum = this.selection[0];
 if(typeof rowNum == 'undefined') {
  this.nullOutDetailViewRecord();
  return;
 }
 var flagForce = arguments[1];
 if(typeof flagForce == 'undefined') flagForce = false;
 if(!flagForce)  if(this.detailViewOrChildListDetailViewIsDirty() ) return false;
 setTimeout(function() {
  _dlgObj._listSystemOnClick(listId,rowNum);
 },100);
 if(typeof _dlgObj._freeformLayoutLists != 'undefined') {
  if(typeof _dlgObj._freeformLayoutLists[this.listVariableName.toUpperCase()] != 'undefined') {
   var js = _dlgObj._freeformLayoutLists[this.listVariableName.toUpperCase()].javascript;
   try{
    var data = this._data[rowNum];
    eval(js);
   }catch(e) { }
  }
 }
 var ops = typeof arguments[0] != 'undefined' ? arguments[0] : {};
 ops.listVariableName = this.listVariableName;
 ops.listObj = this;
 if(this._detailView.method == 'fieldMap') argIn = this._detailView.fieldMap;
 else argIn = this._detailView.container;
 var _d = this.getData(this.selection[0]);
 var n = '';
 var b64prefix = ''
 this._currentDetailViewKey = undefined;
 if(typeof _d == 'undefined' || _d == null || this.selectionData.length == 0) {
  this.nullOutDetailViewRecord();
  return false;
 }
 if(this._data.length == 0) return false;
 this._currentDetailViewKey = _d['*key'];
 _dlgObj._list_executeEvent(this.listVariableName,'detailView.beforeDetailViewPopulate',{});
 window[this._hostComponentId + '_DlgObj']._populateUXControlsWithListData(_d,argIn,ops);
 for(var id in window[this._hostComponentId + '_DlgObj']._floatingLabels) {
  window[this._hostComponentId + '_DlgObj']._floatingLabels[id](id);
 };
 this._clearServerSideErrors();
 this._showServerSideErrors();
 this._showWriteConflictErrors();
 this._dvmode = 'edit';
 this._setNullMode();
 _dlgObj._list_executeEvent(this.listVariableName,'detailView.modeChanged',{mode: 'edit'});
 _dlgObj.refreshClientSideComputations();
 this._setParentIsDeletedOnChildren();
 if(!this._restoringList) _dlgObj.persistVariablesToLocalStorage();
 if(typeof _d._flagViewed != 'undefined') {
  if(_d._flagViewed == false) {
   _d._flagViewed = true;
   this.updateRow(this.selection[0],_d);
  }
 }
 _dlgObj._list_executeEvent(this.listVariableName,'detailView.afterDetailViewPopulate',{});
 if(this._hasDetailView) {
  if(this._JSONForm) {
   var that = this;
   setTimeout(function() {
    that.resize();
   },0);
  }
 }
}
,
 _listSystemOnClickPopulateJSONForm: function(rowNum) {
 var lObj = this;
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var flagClientSide = false;
  if(lObj.__JSONFormDefinition.indexOf('client-side') > -1) {
   flagClientSide = true;
  }
 if(flagClientSide) {
  var fName = lObj._JSONFormName;
  var fObj = _dlgObj.getControl(fName);
  rowNum = lObj._dataMap[rowNum];
  var _d = lObj._data[rowNum];
  var d = JSON.parse(JSON.stringify(_d))
  delete d['*key'];
  delete d['*renderIndex'];
  delete d['*value'];
  var json = JSON.stringify(d);
  var itemsJSON = lObj.generateJSONFormDefinitionFromSampleJSON(json);
  var items = JSON.parse(itemsJSON)
  A5.u.json.postparse(items)
  var formDef = {form: {items: items}};
  formDef.guides = {
   "layouts": {
    "flex-label": "<div style=\"display: flex; width: 100%;\">\t<div style=\"flex: 1 1;\">{label}</div>\t<div >{content}</div></div>{error}{description}",
    "label-float-above": { draw: function(dObj){  var l = dObj.item.def.sys.item.layout.settings;    if(dObj.item.isNull) return '<div style="position: relative;"><div float-state="1" style="position: absolute; top: 0px; left: 0px; right: 0px; height: 100%;"><div style="position: absolute; top: 50%; transform: translate(0px,-50%);">{label}</div></div>{content}</div><div>{error}</div><div>{description}</div>';  else return '<div style="position: relative;"><div float-state="2" style="position: absolute; top: -'+l.size+'; left: 0px; right: 0px; height: '+l.size+';'+l.style+'"><div style="position: absolute; top: 50%; transform: translate(0px,-50%);">{label}</div></div>{content}</div><div>{error}</div><div>{description}</div>'; }, settings: {  size: '14px',  style: '',  duration: 300 }, handle: {  focus: function(dObj){   var e = this.getElements(dObj.item.path.def);   if(e){    e = e[0].children[0].children[0];    if(e && e.getAttribute('float-state') == '1'){     var l = dObj.item.def.sys.item.layout.settings;     e.setAttribute('float-state','2');     if(dObj.item.isNull){      if(l.style != '') A5.u.element.style(e,'+='+l.style);      A5.u.element.transition(e,{       from: {top: '0px', height: '100%'},       to: {top: '-'+l.size, height: l.size},       duration: l.duration      });     }    }   }  },  blur: function(dObj){   var e = this.getElements(dObj.item.path.def);   if(e){    e = e[0].children[0].children[0];    if(e && e.getAttribute('float-state') == '2'){          var l = dObj.item.def.sys.item.layout.settings;     e.setAttribute('float-state','1');     if(dObj.item.isNull){      if(l.style != '') A5.u.element.style(e,'-='+l.style);      A5.u.element.transition(e,{       from: {top: '-'+l.size, height: l.size},       to: {top: '0px', height: '100%'},       duration: l.duration      });     }    }   }  } }}
   }
  };
  fObj.setDefinition(formDef)
  fObj.populate(d);
  return;
 }
 rowNum = lObj._dataMap[rowNum];
 var _d = lObj._data[rowNum];
 if(typeof _d == 'undefined') return;
 var jfObj = _dlgObj.getControl(lObj._JSONFormName);
 if(jfObj) {
  jfObj.__listName = lObj.listVariableName;
  var d2 = JSON.parse(JSON.stringify(_d))
  jfObj.populate(d2);
  jfObj.refresh();
 }
 }
,
 generateJSONFormDefinitionFromSampleJSON: function (json) {    var lObj = this;
    var generateFormLow = function (items, data, path) {
        if (data == null) return;
        if (data.constructor == Array) {
            if (data.length > 0) {
                var item = {
                    type: 'frame',
                    container: {
                        collapse: { allow: true, initial: true },
                        className: 'formIndent',
                        title: {
                            html: '<div style="margin-left: -8px;">' + path + '</div>',
                            className: '[theme:accordion.base.titleClassName] formIndentable',
                            selectedClassName: '[theme:accordion.base.titleSelectedClassName] formIndentable'
                        }
                    },
                    items: [
                        {
                            type: 'repeat',
                            data: { from: path },
                            items: []
                        }
                    ]
                }
                generateFormLow(item.items[0].items, data[0], '');
                items.push(item);
            }
        } else if (data.constructor == Object) {
            if (path != '') {
                var item = {
                    type: 'frame',
                    container: {
                        collapse: { allow: true, initial: true },
                        className: 'formIndent',
                        title: {
                            html: '<div style="margin-left: -8px;">' + path + '</div>',
                            className: '[theme:accordion.base.titleClassName] formIndentable',
                            selectedClassName: '[theme:accordion.base.titleSelectedClassName] formIndentable'
                        }
                    },
                    data: { from: path },
                    items: []
                }
                generateFormLow(item.items, data, '');
                items.push(item);
            } else {
                for (var n in data) {
                    var sysFields = [
                        '_flagGlobalErrorInChild',
                        '_flagServerSideErrorInChild',
                        '_flagWriteConflictErrorInChild',
                        '_hasGlobalErrors',
                        '_hasServerSideError',
                        '_hasUnsyncedMediaFiles',
                        '_hasWriteConflictErrors',
                        '_isDirty',
                        '_isNewRow',
                        '_serverSideErrors',
                        '_writeConflictErrors',
                        '__proto__',
                        '_dirtyImages'
                    ]
                    if (sysFields.indexOf(n) > -1 || n.indexOf('__') >= 0 || n.indexOf('*') >= 0) {
                    } else {
                        generateFormLow(items, data[n], n);
                    }
                }
            }
        } else {
            if (typeof data == 'boolean') {
                items.push({
                    type: 'switch',
                    layout: 'label-above',
                    label: { text: path },
                    data: { from: path },
                    control: {
                        values: {
                            on: true,
                            off: false
                        }
                    }
                });
            } else if (typeof data == 'number') {
                items.push({
                    type: 'step-number',
                    layout: 'label-above',
                    label: { text: path },
                    data: { from: path },
                    control: {
                        flow: 'rtl',
                        layout: 'after'
                    }
                });
            } else {
                items.push({
                    type: 'edit',
                    layout: 'label-before',
                    label: { text: path, style: 'width:200px; ' },
                    data: { from: path },
                    control: {
                        width: '100%'
                    }
                });
            }
        }
    }
    var formData = null;
    try {
        formData = JSON.parse(json);
    } catch (e) {
        alert('Error - could not parse JSON')
    }
    if (formData) {
        var bSave = {
            "type": "button",
            "disabled": function (d) { return this._saveButtonIsDisabled() },
            "control": {
                "layout": "icon text",
                "html": "Save",
                "style": "white-space:nowrap",
                "icon": lObj.__jsonformicons.save,
                "onClick": function () {
                    this._listDetailView('save')
                }
            },
            "container": {
                "style": ";",
                "className": ""
            }
        }
        var bNewRecord = {
            "type": "button",
            "disabled": function (d) { return this._newRecordButtonIsDisabled() },
            "control": {
                "layout": "icon text",
                "html": "New Record",
                "icon": lObj.__jsonformicons.newrecord,
                "listName": lObj.listVariableName,
                "style": "white-space:nowrap",
                "onClick": function () {
                    this._listDetailView('newrecord')
                }
            },
            "container": {
                "style": ";",
                "className": ""
            }
        }
        var bDeleteRecord = {
            "type": "button",
            "disabled": function (d) { return this._deleteRecordButtonIsDisabled() },
            "control": {
                "layout": "icon text",
                "html": "Delete Record",
                "style": "white-space:nowrap",
                "icon": lObj.__jsonformicons.deleterecord,
                "listName": lObj.listVariableName,
                "onClick": function () {
                    this._listDetailView('deleterecord')
                }
            },
            "container": {
                "style": ";",
                "className": ""
            }
        }
        var bresetRecord = {
            "type": "button",
            "disabled": function (d) { return this._resetRecordButtonIsDisabled() },
            "control": {
                "layout": "icon text",
                "html": "Reset",
                "icon": lObj.__jsonformicons.reset,
                "style": "white-space:nowrap",
                "listName": lObj.listVariableName,
                "onClick": function () {
                    this._listDetailView('reset')
                }
            },
            "container": {
                "style": ";",
                "className": ""
            }
        }
        var bSnchronizeRecord = {
            "type": "button",
            "disabled": function (d) { return this._synchronizeButtonIsDisabled() },
            "control": {
                "layout": "icon text",
                "html": "Synchronize",
                "style": "white-space:nowrap",
                "icon": lObj.__jsonformicons.synchronize,
                "listName": lObj.listVariableName,
                "onClick": function () {
                    this._listDetailView('synchronize')
                }
            },
            "container": {
                "style": ";",
                "className": ""
            }
        }
        var formDef = { form: { items: [] } };
        generateFormLow(formDef.form.items, formData, '');
        var buttonsDef = {
            type: 'group',
            container: {
                style: 'display:flex; flex-direction:row;'
            },
            items: [{
                type: 'html',
                container: {
                    style: 'flex:1 1 auto;'
                }
            }, bSave, bNewRecord, bDeleteRecord, bresetRecord, bSnchronizeRecord]
        };
        formDef.form.items.push(buttonsDef)
        A5.u.json.preparse(formDef.form.items)
        var itemsJSON = JSON.stringify(formDef.form.items)
        return itemsJSON;
    }
}
,
 _setParentIsDeletedOnChildren: function() {
  var _d = this.getData(this.selection[0]);
  if(typeof _d == 'undefined' || _d == null || this.selectionData.length == 0) {
   return false;
  }
  var flagDel = false;
  if(typeof _d['_isDeleted'] != 'undefined') flagDel = _d['_isDeleted'];
  if(!flagDel) {
   var flagParentIsDeleted = false;
   var pData = '';
   if(typeof this.allParentLists == 'undefined') return false;
   if(this.allParentLists.length > 0) {
    for(var i = 0; i < this.allParentLists.length; i++) {
     pObj = window[this._hostComponentId + '_DlgObj'].getControl(this.allParentLists[i]);
     if(typeof pObj.selection[0] != 'undefined') {
      pData = pObj.getData(pObj.selection[0]);
      if(typeof pData._isDeleted != 'undefined') {
       if(pData._isDeleted) {
        flagParentIsDeleted = true;
        break;
       }
      }
     }
    }
   }
   if(flagParentIsDeleted) flagDel = true;
  }
  var flagParentIsDeleted = false;
  if(typeof this._parentIsDeleted != 'undefined') flagParentIsDeleted =  this._parentIsDeleted;
  this.disableDetailView(flagDel || flagParentIsDeleted);
  var lChildObj = '';
  for(var i = 0; i < this.childLists.length; i++) {
   lChildObj = window[this._hostComponentId + '_DlgObj'].getControl(this.childLists[i]);
   if(lChildObj) {
    lChildObj.disableDetailView(flagDel);
    if(flagDel) $acn(lChildObj.contId,'parentIsDeleted');
    else $rcn(lChildObj.contId,'parentIsDeleted');
    lChildObj._parentIsDeleted = flagDel;
    lChildObj._setParentIsDeletedOnChildren();
   }
  }
 }
,
 _saveTFEdits: function() {   if(this._dataSourceType != 'undefined') {
    if(this._dataSourceType.toLowerCase() == 'transform') {
     if(typeof DLG1_DlgObj._listsWithDependentTFControls != 'undefined') {
      var lName = this.listVariableName;
      if(typeof DLG1_DlgObj._listsWithDependentTFControls[lName] !='undefined') {
       tfDataViewer = DLG1_DlgObj._listsWithDependentTFControls[lName]["tfcontrol"];
       if(tfDataViewer != '') {
        var tfObj = DLG1_DlgObj.getControl(tfDataViewer);
        tfObj.dirty = false;;
        if(tfObj.saveEditedRenderedFields) tfObj.saveEditedRenderedFields()
        var initialState = 'edit';
        if(typeof tfObj.initialState != 'undefined') initialState = tfObj.initialState;
        if(initialState.toLowerCase() == 'view') {
         tfObj.editMode(false);
        }
        if(tfObj){
         tfObj.renderForm();
         var _d = tfObj.fieldsdata.formdata;
        }
        var r = this.selection[0];
        this.updateTableRow(r,_d);
       }
      }
     }
    }
   }
 }
,
 __captureDetailViewControlsDirtyState: function() {
  var lObj = this;
  var _dlgObj2 = window[lObj._hostComponentId + '_DlgObj'];
  if (lObj._detailView.method == 'fieldMap') {
   var arr = lObj._detailView.fieldMap
   for(var i = 0; i < arr.length; i++) {
    arr[i].isDirty = _dlgObj2.getControlDirty(arr[i].control.toUpperCase());
   }
  } else {
   var cont = lObj._detailView.container
   var a1 = DLG1_DlgObj.getControlsInContainer(cont)
   var arr = []
   for(var i = 0; i < a1.length; i++) {
    arr.push({control: a1[i], isDirty:  DLG1_DlgObj.getControlDirty(a1[i].toUpperCase()) });
   }
  }
  return arr;
 }
,
 __pktoRecno: function(pk) { var d = this._data;
 for(var i = 0; i < d.length; i++) {
  if(d[i].__primaryKey == pk ) return i;
 }
 return -1;
}
,
 __modifyOldData: function(arr,rowIn) {
  return
  rowIn = this._dataMap[rowIn]
  var _method = 'fieldMap';
  try{
   _method = this._detailView.method;
  }catch(e) { };
  if(_method.toLowerCase() == 'container') {
   for(var i = 0; i < arr.length; i++) {
    arr[i].field = arr[i].control;
   }
  }
  var lObj = this
  if(typeof rowIn == 'undefined') {
   var row = lObj.selection[0];
  } else {
   var row = rowIn;
  }
  if(typeof row == 'string') row = this.__pktoRecno(row);
  if(typeof row == 'undefined') return ;
  var oldData = lObj._data[row]._oldData;
  if(typeof oldData == 'undefined') return;
  if(typeof lObj._data[row]._editedByUser == 'undefined') {
   lObj._data[row]._editedByUser = [];
  }
  for(var i = 0; i < arr.length; i++) {
   if(arr[i].isDirty) {
    if(lObj._data[row]._editedByUser.indexOf(arr[i].field) == -1) lObj._data[row]._editedByUser.push(arr[i].field);
    if(oldData[arr[i].field] == null) {
     oldData[arr[i].field] =  ':::___null___::::::___DIRTY___:::';
    } else {
     if( ( '' +oldData[arr[i].field]).indexOf(':::___DIRTY___:::') == -1) {
      oldData[arr[i].field] = oldData[arr[i].field] + ':::___DIRTY___:::';
     }
    }
   }
  }
 }
,
 updateListFromUXControls: function() {
  var lObj = this;
  try{
   var jformstocommit = lObj._detailView.jsonformstoWatch;
  }catch(e) {
   var jformstocommit = ''
  }
  if(typeof jformstocommit == 'undefined') jformstocommit = '';
  if(jformstocommit != '') {
   jformstocommit = jformstocommit.split(',')
   for(var i = 0; i < jformstocommit.length; i++) {
    var jfi = jformstocommit[i];
    var _dlgObj = window[this._hostComponentId + '_DlgObj'];
    var fObj = _dlgObj.getControl(jfi);
    if(fObj && fObj.commit) fObj.commit()
   }
  }
  if(lObj._updatingListFromUXControls) return false;
  lObj._updatingListFromUXControls = true;
  if(lObj._propertyGrid) {
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   var propertyGridName = this._propertyGridName;
   var pObj = _dlgObj.getControl(propertyGridName);
   pObj.state.isDirtyImmediate = false;
   pObj.state.isDirty = false;
   pObj.refresh();
   var flag = this.detailViewIsDirty();
   var data = _dlgObj.getValue(propertyGridName);
   _dlgObj.refreshClientSideComputations();
   var d = JSON.parse(data);
   d = d.v;
   var d2 = {}
   for(var n in d) {
    if(n.indexOf('*') != 0) {
     d2[n] = d[n];
    }
   }
   var r = lObj.selection[0];
   if(typeof r != 'undefined') {
    lObj.updateTableRow(r,d2);
   } else {
    lObj.addTableRow(d2,{setFocusToTargetRow: true})
   }
  }
  if(lObj._JSONForm) {
   var formName = lObj._JSONFormName;
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   var data = _dlgObj.getValue(formName);
   var d = JSON.parse(data);
   var d2 = {}
   for(var n in d) {
    if(n.indexOf('*') != 0) {
     d2[n] = d[n];
    }
   }
   var r = lObj.selection[0];
   if(typeof r != 'undefined') {
    lObj.updateTableRow(r,d2);
   } else {
    lObj.addTableRow(d2,{setFocusToTargetRow: true})
   }
   var fObj = _dlgObj.getControl(formName);
   fObj.state.isDirty = false;
   fObj.refresh();
  }
  var arrState = this.__captureDetailViewControlsDirtyState();
  var dirtyControls = [];
  for(var i = 0; i < arrState.length; i++) {
   if(arrState[i].isDirty) dirtyControls.push(arrState[i].field)
  }
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var arr = this._getControlsInDv()
  for(var i = 0; i < arr.length; i++) {
   _dlgObj.clientSideValidateField(arr[i],1,null);
  }
  var flagCSE = this._hasClientSideError();
  if(flagCSE) {
   _dlgObj._list_executeEvent(this.listVariableName,'detailView.hasClientSideValidationErrors',{});
   var msg = this.customization.dv.clientSideErrorWarning;
   if(typeof msg != 'undefined' && msg != '') this._showGlobalError(msg);
   lObj._updatingListFromUXControls = false;
   return false;
  } else {
   this._clearGlobalError();
  }
  var _route = this._getRoute();
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var flagGetLocationData = this._submitLocationInfo
  if( _dlgObj._embeddedMode || _dlgObj._livePreviewInBuilder) flagGetLocationData = false;
  var that = this;
  if(flagGetLocationData) {
   var _locationHighAccuracy = _dlgObj.locationHighAccuracy;
   var _locationTimeout = _dlgObj.locationTimeout;
   var _locationMaximumAge = _dlgObj.locationMaximumAge;
   var classInst = this;
   navigator.geolocation.getCurrentPosition(
    function(pos) {
     if(typeof _dlgObj._location == 'undefined') _dlgObj._location = {};
     _dlgObj._location.lat = pos.coords.latitude;
     _dlgObj._location.lng = pos.coords.longitude;
     classInst._updateListFromUXControlsLow();
     classInst.__modifyOldData(arrState);
     delete classInst;
     if(that.synchronizeImmediately) {
      var flagOnLine = _dlgObj._getOnlineStatus();
      if (flagOnLine) {
        _dlgObj.saveListEdits(that.listVariableName)
      } else {
      }
     }
     var dirtyClass = '';
     if(typeof that.dirtyControlClassName != 'undefined') dirtyClass = that.dirtyControlClassName;
     if(dirtyClass != '') that.populateUXControls();
     that._setRoute(_route);
     if(!that._restoringList)  _dlgObj.persistVariablesToLocalStorage();
     _dlgObj.refreshClientSideComputations();
     return true;
    },
    function(error) {
     delete _dlgObj._location;
     classInst._updateListFromUXControlsLow();
     classInst.__modifyOldData(arrState);
     delete classInst;
     if(that.synchronizeImmediately) {
      var flagOnLine = _dlgObj._getOnlineStatus();
      if (flagOnLine) {
        _dlgObj.saveListEdits(that.listVariableName)
      } else {
      }
     }
     var dirtyClass = '';
     if(typeof that.dirtyControlClassName != 'undefined') dirtyClass = that.dirtyControlClassName;
     if(dirtyClass != '') that.populateUXControls();
     that._setRoute(_route);
     if(!that._restoringList)  _dlgObj.persistVariablesToLocalStorage();
     _dlgObj.refreshClientSideComputations();
     return true;
    } , {enableHighAccuracy : _locationHighAccuracy, timeout: _locationTimeout, maximumAge: _locationMaximumAge})
    lObj._updatingListFromUXControls = false;
    return true;
  } else {
   this.__modifyOldData(arrState);
   if(!(lObj._JSONForm|| lObj._propertyGrid)) {
    this._updateListFromUXControlsLow();
    lObj.__setJSONFormsInFieldMapClean();
   }
  }
  this._saveTFEdits();
  this._setRoute(_route);
  if(!this._restoringList)  _dlgObj.persistVariablesToLocalStorage();
  _dlgObj.refreshClientSideComputations();
  if(this.synchronizeImmediately) {
   var flagOnLine = _dlgObj._getOnlineStatus();
   if (flagOnLine) {
     this.__modifyOldData(arrState);
     _dlgObj.saveListEdits(this.listVariableName)
   } else {
    this.__modifyOldData(arrState);
   }
  }
  var dirtyClass = '';
  if(typeof this.dirtyControlClassName != 'undefined') dirtyClass = this.dirtyControlClassName;
  if(dirtyClass != '') this.populateUXControls();
  if(this.showHideDetailView) this.__toggleDetailView('hide');
  this.__modifyOldData(arrState);
  if(this.__pkisguid && this.__assignPKGuidClientSide) {
   var r = this.selection[0];
   if(typeof r != 'undefined') {
    if(typeof this._data[r][this.__pkfieldname] != 'undefined' && this._data[r][this.__pkfieldname] == '') {
     var flagNewRow = this._data[r]._isNewRow;
     if(flagNewRow) {
      var obj2 = {};
      obj2[this.__pkfieldname] = A5.UUID();
      if(!this.__stripcurlyfromguid) {
       obj2[this.__pkfieldname] = '{' + obj2[this.__pkfieldname] + '}';
      }
      this.updateTableRow(r,obj2);
     }
    }
   }
  }
  if(this._detailView.method == 'JSONForm') {
   var _name = this._JSONFormName;
   var jObj = _dlgObj.getControl(_name);
   if(jObj) {
    jObj.state.isDirtyImmediate = false;
    jObj.refresh();
   }
  }
  _dlgObj._list_executeEvent(this.listVariableName,'detailView.afterDetailViewSave',{dirtyFields: dirtyControls.toString()});
  this.__indexDBAfterDetailViewSaveImages(dirtyControls.toString())
  lObj._updatingListFromUXControls = false;
 }
 ,
 __setJSONFormsInFieldMapClean: function() {  if (this._detailView.method != 'fieldMap') return;
  var arr = this._detailView.fieldMap;
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  for(var i = 0; i < arr.length; i++) {
   var jformname = arr[i].control.split('::')[1];
   if(typeof jformname != 'undefined') {
    var obj = _dlgObj.getControl(jformname);
    if(obj) obj.state.isDirty = false;
   }
  }
 }
 ,
 __indexDBAfterDetailViewSaveImages: function(dirtyFields) {
  var lTemp = this._getTopParentListObject();
  var persistLocation = '';
  if(lTemp.__flagPersist) {
   persistLocation = lTemp.__persistWhere;
  };
  var flagRepopulateUXControls = false;
  if(persistLocation.toLowerCase() == 'indexdb' ) {
   var dirtyFields = dirtyFields.split(',');
   var data = {};
   for(var i = 0; i < dirtyFields.length; i++) {
    var fieldi = dirtyFields[i]
    var indx = this._mediaFields.indexOf(fieldi);
    if(indx > -1) {
     var r = this.selection[0];
     var b64 = this._rData[r][fieldi];
     b64 = b64.split('base64,')[1]
     var key = 'INDEXDB_temporary_' + A5.UUID() + '.JPG';
     var lObj = this;
     var _itemSaved = function() {
      lObj.__loadImages(false,true);
     }
     var _dlgObj = window[this._hostComponentId + '_DlgObj'];
     _dlgObj.idbSetItem(key,b64,_itemSaved);
     data[fieldi] = key ;
     flagRepopulateUXControls = true;
    }
   }
   if(typeof r != 'undefined') {
    this.updateTableRow(r,data);
   }
   if(flagRepopulateUXControls) {
    setTimeout(function() { lObj.populateUXControls();},100);
   }
  }
 }
 ,
 _updateListFromUXControlsLow: function() {  var flagCSE = this._hasClientSideError();
 if(flagCSE) {
  var msg = this.customization.dv.clientSideErrorWarning;
  if(msg != '') this._showGlobalError(msg);
  return false;
 } else {
  this._clearGlobalError();
 }
 flagAllParentListsHaveActiveRow = true;
 var pObj = '';
 if(this.allParentLists.length > 0) {
  for(var i = 0; i < this.allParentLists.length; i++) {
   pObj = window[this._hostComponentId + '_DlgObj'].getControl(this.allParentLists[i]);
   if(typeof pObj.selection[0] == 'undefined') {
    flagAllParentListsHaveActiveRow = false;
    alert('List: ' + this.listVariableName + ': Can\'t save record because there is no active record in the parent List. Parent list id: \''+this.allParentLists[i]+'\'');
    this.resetForm({prompt: false});
    return false;
    break;
   }
  }
 }
 var ops = typeof arguments[0] != 'undefined' ? arguments[0] : {};
 var flagSynchronize = this.synchronizeImmediately;
 if(typeof ops.synchronize == 'undefined') {
  ops.synchronize = flagSynchronize;
 }
 if(this._detailView.method == 'fieldMap') {
  var res = window[this._hostComponentId + '_DlgObj']._updateListDataFromUXControls(this.listVariableName,this._detailView.fieldMap,ops); this._refreshDebugInfo();
 } else {
  var res = window[this._hostComponentId + '_DlgObj']._updateListDataFromUXControls(this.listVariableName,this._detailView.container,ops); this._refreshDebugInfo();
 }
 var parentListName = this.parentList;
 if(typeof parentListName != 'undefined' && parentListName != '') {
  var thisData = this.getData(this.selection[0]);
  var flagIsNewRow = false;
  if(typeof thisData._isNewRow != 'undefined') flagIsNewRow = thisData._isNewRow;
  var plObj = window[this._hostComponentId + '_DlgObj'].getControl(this.parentList);
  if(plObj._setDirtyByChild) {
   if (flagIsNewRow == false)   plObj._setDirtyByChild(false);
   else plObj._setDirtyByChild(true,thisData,this.listVariableName);
  }
 }
 this._populateMyChildren();
 var that = this;
 setTimeout(function() {var r = that.selection[0];that.refresh(); that.setValue(r,false);},10);
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 _dlgObj._list_executeEvent(this.listVariableName,'detailView.afterUpdateList',{});
 _dlgObj._list_executeEvent(this.listVariableName,'detailView.onStateChanged',{isDirty:false});
 delete this.__detailViewWentDirtyHasFired == 'undefined'
 var arr = this._getControlsInDv();
 for(var i = 0; i < arr.length; i++) {
  _type = _dlgObj._getControlType(arr[i]);
  if(_type == 'formbox') {
   var _obj = _dlgObj.getControl(arr[i])
   if(_obj) _obj.state.isDirty = false;
  }
 }
 return res;
},
 _setDirtyByChild: function(flagNewRow) {
  var rn = this.selection[0];
  if(typeof rn == 'undefined') rn = 0;
  if(flagNewRow) {
   var newData = arguments[1];
   var listName = arguments[2];
   this.setRowDirty(rn,true,newData,listName);
  } else {
   this.setRowDirty(rn,false);
  }
  var parentListName = this.parentList;
  if(typeof parentListName != 'undefined' && parentListName != '') {
   if(parentListName != '') {
    var plObj = window[this._hostComponentId + '_DlgObj'].getControl(parentListName);
    if(plObj._setDirtyByChild)  plObj._setDirtyByChild(false);
   }
  }
  window[this._hostComponentId + '_DlgObj'].refreshClientSideComputations();
 }
 ,
 _getChildData: function(existingData,childListName) {  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var clObj = _dlgObj.getControl(childListName);
  if(!clObj) return false;
  if(clObj._dataSourceType.toLowerCase() == 'sql') {
   return existingData['__LIST__' + childListName];
  } else {
   return existingData[clObj._objectNameInParentListForData];
  }
 }
 ,
 _getChildDataObjectName: function(childListName) {   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var clObj = _dlgObj.getControl(childListName);
  if(!clObj) return '__LIST__' + childListName.toUpperCase();
  if(clObj._dataSourceType.toLowerCase() == 'sql') {
   return '__LIST__' + childListName.toUpperCase();
  } else {
   return clObj._objectNameInParentListForData
  }
 }
 ,
 setRowDirty: function(rn,flagNewRow) {
  var existingData = this.getData(rn);
  if(typeof existingData == 'undefined') return;
  existingData._isDirty = true;
  if(flagNewRow) {
   var newData = arguments[2];
   var listName = arguments[3];
   var childData = this._getChildData(existingData,listName);
   if(typeof childData == 'undefined') return false;
   var childDataObjectName = this._getChildDataObjectName(listName);
   var n = window[this._hostComponentId + '_DlgObj']._findArrayProp(childData,'*key',newData['*key']);
   if(n == -1) {
    if(existingData[childDataObjectName].constructor == Array) {
     existingData[childDataObjectName].push(newData);
    } else {
     existingData[childDataObjectName] =  [];
     existingData[childDataObjectName].push(newData);
    }
   } else {
   }
  }
  this.updateRow(rn,existingData);
 }
 ,
 _showDirtyDetailViewWarning: function() {
  if(!this.detailViewIsDirty(true)) return true;
  else {
   var obj = {};
   obj.thisListName = this.listVariableName;
   obj.dirtyListName = this._nameOfListWithDirtyDetailView;
   obj.handled = false;
   window[this._hostComponentId + '_DlgObj']._list_executeEvent(this.listVariableName,'detailView.afterListRowSelectCancelled',obj);
   if(obj.handled) return false;
   var msg = this.customization.dv.dirtyDetailViewRecord.message;
   if(msg.toLowerCase().indexOf('javascript:') == 0) {
    var fn = msg.split(':')[1];
    fn = fn.split('(')[0];
    window[fn].call();
    return false;
   }
   var image = this.customization.dv.dirtyDetailViewRecord.icon;
   var iconType = window[this._hostComponentId + '_DlgObj']._iconType(image);
   var imageHTML = window[this._hostComponentId + '_DlgObj']._getImageHTML(image,iconType);
   var flagThisListHasDirtyDv = false;
   if(this.listVariableName == this._nameOfListWithDirtyDetailView) flagThisListHasDirtyDv = true;;
   if(!flagThisListHasDirtyDv) {
    msg = msg + '<br>(List with dirty Detail View: \'' + this._nameOfListWithDirtyDetailView + '\')';
   }
   msg = '<div style="padding: 10px;" >' + imageHTML + msg + '<br style="clear: both;" /></div>';
   var title = this.customization.dv.dirtyDetailViewRecord.title;
   A5.msgBox.show(title,msg,'O',function() {} );
   return false;
  }
 }
 ,
 _getListFieldFromControl: function(ctrl) {
  var indx = '';
  if(this._detailView.method == 'fieldMap') {
   var map = this._detailView.fieldMap;
   indx = window[this._hostComponentId + '_DlgObj']._findArrayProp(map,'control',ctrl);
   if(indx > -1) return map[indx].field
  } else {
   ctrl = ctrl.toUpperCase();
   var la = this._listFields;
   for(var i = 0; i < la.length; i++) {
    if(la[i].name.toUpperCase() == ctrl) return la[i].name;
   }
   return false;
  }
 }
 ,
 disableDetailView: function() {   var flag = typeof arguments[0] != 'undefined' ? arguments[0] : true;
  window[this._hostComponentId + '_DlgObj'].setDisabled(this._getControlsInDv(),flag);
 }
 ,
 _getControlsInDv: function() {  if(typeof this._controlsInDV != 'undefined') {
   return this._controlsInDV;
  }
  var arr = [];
  if(typeof this._detailView == 'undefined') return '';
  if(typeof this._detailView.method == 'undefined') return '';
  if(this._detailView.method == 'fieldMap') {
   var ele = '';
   for (var i = 0; i < this._detailView.fieldMap.length; i++) {
    ele = $(this._hostComponentId + '.V.R1.' + this._detailView.fieldMap[i].control.toUpperCase());
    if(ele) arr.push(this._detailView.fieldMap[i].control.toUpperCase());
   }
   this._controlsInDV = arr;
   return arr;
  } else {
   var indx = -1;
   var ctrlList = window[this._hostComponentId + '_DlgObj'].getControlsInContainer(this._detailView.container);
   for(var c = 0; c < ctrlList.length; c++) {
    for(var i = 0; i < this._listFields.length; i++) {
     if(this._listFields[i].name.toLowerCase() == ctrlList[c].toLowerCase()) arr.push(ctrlList[c].toUpperCase());
    }
   }
   this._controlsInDV = arr;
   return arr;
  }
 }
 ,
 _stripCleanBase64Data: function(_d) {   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var _dc = {}
  var cn = '';
  var ct = '';
  var flagDirty = '';
  var flagCapture = '';
  var ix = '';
  var flagEmbeddedImage = '';
  for(var prop in _d) {
   flagCapture = true;
   cn = this._getUXDetailViewControlName(prop);
   if(cn != '') {
    ct = _dlgObj._getControlType(cn).toLowerCase();
    if(ct == 'signaturecapture' || ct == 'image') {
     flagCapture = false;
     var _dirtyImages = _d['_dirtyImages'];
     var flagImageDirty = false;
     if(typeof _dirtyImages != 'undefined') {
      flagImageDirty = _dirtyImages[prop];
      if(typeof flagImageDirty != 'undefined') flagCapture = true;
     } else {
      flagCapture = true;
     }
    }
   }
   if(flagCapture) _dc[prop] = _d[prop];
  }
  return _dc;
 }
 ,
 _getData2: function(row) {
  var _d = this.getData(row);
  return this._stripCleanBase64Data(_d);
 }
 ,
 harvestListRow: function() {
  var rn = typeof arguments[0] != 'undefined' ? arguments[0] : -1;
  var obj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
  var flagSumbmitAllChildRecords = false;
  if(typeof obj.flagSumbmitAllChildRecords != 'undefined') flagSumbmitAllChildRecords = obj.flagSumbmitAllChildRecords;
  var flagCaptureImages = false;
  if(typeof obj.flagCaptureImages != 'undefined') flagCaptureImages = obj.flagCaptureImages;
  if(typeof rn != 'number') {
   if(!rn._isNewRow){
    if(flagCaptureImages) {
     var existingData = rn;
    } else {
     var existingData = this._stripCleanBase64Data(rn);
    }
   } else {
    var existingData = rn;
   }
  } else {
   if(rn > -1) {
    var existingData = this._getData2(rn);
   } else {
    if(this.selection[0] != 'undefined') var existingData = this._getData2(this.selection[0]);
   }
  }
  if(typeof existingData == 'undefined') return {};
  var flagDirty = false;
  var flagNewRow = false;
  if(typeof existingData._isDirty != 'undefined') flagDirty = existingData._isDirty;
  if(typeof existingData._isNewRow != 'undefined') flagNewRow = existingData._isNewRow;
  delete existingData._previousData;
  if(flagDirty || flagNewRow) {
   if(!flagSumbmitAllChildRecords) {
    this._createKeysLow(existingData);
    var dirtyDataOnly = this._trimNonDirtyData(existingData);
    return dirtyDataOnly;
   } else {
    this._createKeysLow(existingData);
    return existingData;
   }
  }
  return {};
 }
 ,
 _createKeysLow: function(d) {   var count = 0;
  for(var p in d) {
   if(d[p] != null) {
    if(d[p].constructor == Array) {
     count = 0;
     for(var i = 0; i < d[p].length; i++) {
      if(typeof d[p][i] == 'object') {
       if(typeof d[p][i]['*title'] == 'undefined' && typeof d[p][i]['*static'] == 'undefined') {
        d[p][i]['*key'] = i;
        count++;
        this._createKeysLow(d[p][i]);
       }
      }
     }
    }
   }
  }
 }
 ,
 fieldIsDirty: function(field) {   var rSel = this.selection[0];
  var rn = typeof arguments[1] != 'undefined' ? arguments[1] : rSel;
  if(typeof rSel == 'undefined') return false;
  var _d = this.getData(rn);
  var _dv = _d[field];
  var flagNewRow = _d['_isNewRow'];
  if(typeof flagNewRow == 'undefined') flagNewRow = false;
  if(flagNewRow) {
   if(_dv == '') return false;
   return true;
  }
  var _od = _d['_oldData'];
  if(typeof _od == 'undefined') return false;
  var _odv = _od[field];
  if(typeof _dv == 'undefined') return false;
  if(typeof _odv == 'undefined') return false;
  if(_dv == _odv ) return false;
  else return true;
 }
 ,
 _trimNonDirtyData: function(data) {   var data2 = {};
  var tData = [];
  for(var prop in data) {
   if(data[prop] != null) {
    if(data[prop].constructor == Array) {
     tData = [];
     for(var i = 0; i < data[prop].length; i++) {
      if(data[prop][i]._isNewRow || data[prop][i]._isDirty ) {
       tData.push(this._trimNonDirtyData(data[prop][i]));
      }
     }
     data2[prop] = tData;
    } else {
     data2[prop] = data[prop];
    }
   } else {
    data2[prop] = null;
   }
  }
  return data2;
 }
 ,
 _logicalRow2PhysicalRow: function(rn) {
  if(typeof rn != 'number') {
   return rn;
  }
  var u = this._dataMap;
  return $u.a.find(u,rn);
 }
 ,
 __fixData: function(lObj) {
  var _data = lObj._data;
  if(_data.length == 0) return;
  if(typeof _data[0] == 'undefined') lObj._data = [];
 }
 ,
 harvestListKeys: function() {   var existingData = {};
  var arr = [];
  var key = '';
  this.__fixData(this);
  for (var i = 0; i < this._data.length; i++) {
   existingData = this._data[i];
   if(typeof existingData == 'undefined') continue;
   if(typeof existingData.__primaryKey != 'undefined') {
    key = existingData.__primaryKey;
   } else {
    key = existingData['*value']
   }
   if(key != '') arr.push(key);
  }
  return arr;
 }
 ,
 _hasMediaFileUploadErrors: function(data) {
  var flag = false;
  var r = A5.u.object.each(data,function(name,value,path,result){
   if(name == '_flagMediaFileUploadError'){
    if(value) flag =  true;
      }
  });
  return flag;
 }
,
 harvestList: function() {
  var flagPKOnly = typeof arguments[0] != 'undefined' ? arguments[0] : false;
  var obj = typeof arguments[1] != 'undefined' ? arguments[1] : {};
  var startingRow = 1;
  var batchSize = 0;
  var flagSumbmitAllChildRecords = false;
  var flagInPersistListToStorage = false;
  var flagCaptureImages = false;
  if(typeof obj.batchSize != 'undefined') batchSize = obj.batchSize;
  if(typeof obj.startingRow != 'undefined') startingRow = obj.startingRow;
  if(typeof obj.flagSumbmitAllChildRecords != 'undefined') flagSumbmitAllChildRecords = obj.flagSumbmitAllChildRecords;
  if(typeof obj.flagInPersistListToStorage != 'undefined') flagInPersistListToStorage = obj.flagInPersistListToStorage;
  if(typeof obj.flagCaptureImages != 'undefined') flagCaptureImages = obj.flagCaptureImages
  var flagDirty = false;
  var flagNewRow = false;
  var flagHasMediaFileUploadError = false;
  var existingData = '';
  var arr = [];
  var _tempData = '';
  this.__fixData(this);
  if(batchSize > 0 && startingRow > 1 && flagPKOnly == false) {
   var arr2 = [];
   var count = 0;
   for(var i = startingRow -1; i < this.__arrDirtyRows.length; i++) {
    rowToGet = this.__arrDirtyRows[i];
    existingData = this._data[rowToGet];
    if(typeof existingData == 'undefined') continue;
    _tempData = this.harvestListRow(existingData, {flagSumbmitAllChildRecords: flagSumbmitAllChildRecords, flagCaptureImages: flagCaptureImages});
    arr2.push(_tempData);
    count = count + 1;
    if(count >= batchSize) break;
   }
   return arr2;
  }
  if(flagInPersistListToStorage == false) {
   this.__arrDirtyRows = [];
  }
  this.__fixData(this);
  for (var i = 0; i < this._data.length; i++) {
   existingData = this._data[i];
   if(typeof existingData == 'undefined') continue;
   flagDirty = false; flagNewRow = false;
   if(typeof existingData._isDirty != 'undefined') flagDirty = existingData._isDirty;
   if(typeof existingData._isNewRow != 'undefined') flagNewRow = existingData._isNewRow;
   if(flagDirty || flagNewRow) {
    flagHasMediaFileUploadError = this._hasMediaFileUploadErrors(existingData);
   }
   if( (flagDirty || flagNewRow) && !flagHasMediaFileUploadError ) {
    if(flagPKOnly == false) {
     _tempData = this.harvestListRow(existingData, {flagSumbmitAllChildRecords: flagSumbmitAllChildRecords, flagCaptureImages: flagCaptureImages});
     arr.push(_tempData);
    } else {
     if(typeof existingData.__primaryKey != 'undefined') {
      arr.push(existingData.__primaryKey);
     } else {
      arr.push(existingData['*value']);
     }
    }
    if(flagInPersistListToStorage == false) {
     if(batchSize > 0 && startingRow == 1 && flagPKOnly == false)  {
      if(flagPKOnly == false) {
       this.__arrDirtyRows.push(existingData['*key']);
      }
     }
    }
   }
  }
  if(batchSize > 0 && flagPKOnly == false) {
   var arr2 = [];
   var count = 0;
   for(var i = startingRow -1; i < this.__arrDirtyRows.length; i++) {
    rowToGet = this.__arrDirtyRows[i];
    arr2.push(this._getRowByKey(arr,rowToGet));
    count = count + 1;
    if(count >= batchSize) break;
   }
   return arr2
  }
  return arr;
 }
 ,
 _getRowByKey: function(arr,key) {  for(var i = 0; i < arr.length; i++) {
   if(arr[i]['*key'] == key) return arr[i];
  }
  return false;
 }
,
 listRowIsDirty: function() {  var rn = typeof arguments[0] != 'undefined' ? arguments[0] : -1;
  var flagNewRow = typeof arguments[1] != 'undefined' ? arguments[1] : false;
  if(rn > -1) {
   var existingData = this.getData(rn);
  } else {
   var existingData = this.getData(this.selection[0]);
  }
  if(typeof existingData == 'undefined') return false;
  if(!flagNewRow) {
   if(typeof existingData._isDirty != 'undefined') return existingData._isDirty;
   else return false;
  } else {
   if(typeof existingData._isNewRow != 'undefined') return existingData._isNewRow;
   else return false;
  }
 }
 ,
 listRowIsNew: function() {  var rn = typeof arguments[0] != 'undefined' ? arguments[0] : -1;
  return this.listRowIsDirty(rn,true);
 }
 ,
 _getDataFromRoute: function(route) {   var rn = [].concat(route);
  var topParent = this.allParentLists[this.allParentLists.length -1];
  if(typeof topParent == 'undefined') var lObj = this;
  else var lObj = window[this._hostComponentId + '_DlgObj'].getControl(topParent);
  var _td = lObj._data;
  for(var i = 0; i < rn.length; i++) {
   try{
      _td = _td[ rn[i] ];
    }catch(e) { _td = []};
  }
  return _td;
 }
 ,
 _isRowInRouteVisible: function(route) {   var rn = [].concat(route);
  var topParent = this.allParentLists[this.allParentLists.length -1];
  if(typeof topParent == 'undefined') var lObj = this;
  else var lObj = window[this._hostComponentId + '_DlgObj'].getControl(topParent);
  var index = 0;
  while(rn.length >1) {
   index = lObj._logicalRow2PhysicalRow(rn.shift());
   if(lObj.selection[0] != index) return false;
   lObj = window[this._hostComponentId + '_DlgObj'].getControl(rn.shift().replace('__LIST__',''));
  }
  return true;
 }
 ,
 _isRouteBranchDirty: function(route) {   var rn = [].concat(route);
  if( typeof  rn[rn.length-1] == 'number' ) rn.pop();
  var _d = this._getDataFromRoute(rn);
  for(var i = 0; i < _d.length; i++) {
   if( _d[i]._isDirty || _d[i]._isNewRow || _d[i]._isDeletedRow) return true;
  }
  return false;
 }
 ,
 _routeBranchHasServerSideError: function(route) {   var rn = [].concat(route);
  if( typeof  rn[rn.length-1] == 'number' ) rn.pop();
  var _d = this._getDataFromRoute(rn);
  for(var i = 0; i < _d.length; i++) {
   if(  _d[i]._hasServerSideError ||  _d[i]._flagServerSideErrorInChild  || _d[i]._hasWriteConflictErrors ||  _d[i]._flagWriteConflictErrorInChild      ) return true;
  }
  return false;
 }
 ,
 _responseStart: function() {  this.__inSyncResponse = true;
  this.__responseEndHasFired = false;
  delete this._rowGUIDS;
  this._rowGUIDS = [];
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 }
,
 _responseEnd: function() {  this.__responseEndHasFired = true;
  var flagUsingSyncLog = false;
  flagUsingSyncLog = this._useServerSideSyncLog;
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  if(typeof flagUsingSyncLog == 'undefined') flagUsingSyncLog = false;
  if(flagUsingSyncLog) {
   var flagClearLog = this._clearServerSideSyncLog;
   if(typeof flagClearLog == 'undefined') flagClearLog = true;
   if(flagClearLog) {
    _dlgObj.synchronizeComplete(this._rowGUIDS);
   }
  }
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var _mode = _dlgObj.__listPersistMode(this.listVariableName);
  var lObj = this;
  lObj.count = 0;
  if(_mode == 'edits' || _mode == 'add') {
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   if(_dlgObj._executePendingUpdatesToFileSystem) _dlgObj._executePendingUpdatesToFileSystem(this.listVariableName);
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   _dlgObj.persistListToLocalStorage(this.listVariableName);
  }
  setTimeout(function() { lObj.__inSyncResponse = false; },1000);
 }
,
 _getTopParentList: function() {
  var allParentLists = this.allParentLists;
  if(typeof allParentLists == 'undefined') return this.listVariableName;
  if(allParentLists.length == 0) return this.listVariableName;
  return allParentLists[allParentLists.length -1];
 }
,
 setRowCleanPreserveState: function() {
  this.setRowClean(arguments[0],-1,true);
 }
,
 setListClean: function() {  for(var i = 0; i < this._data.length; i++) {
   this.setRowClean(i);
  }
 }
 ,
 setRowClean: function() {
  var topObj = this._getTopParentListObject()
  var flagSyncMediaFields = true;
  if (typeof topObj.flagSyncMediaFields != 'undefined') flagSyncMediaFields = topObj.flagSyncMediaFields
  var rn = typeof arguments[0] != 'undefined' ? arguments[0] : -1;
  var mode = typeof arguments[1] != 'undefined' ? arguments[1] : -1;
  var flagSetParentClean = typeof arguments[2] != 'undefined' ? arguments[2] : false;
  flagSetParentClean = false;
  if( flagSetParentClean) {
   var rn2 = rn;
   rn2.pop()
   rn2.pop()
   var parentList = this.parentList;
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   var obj2 = _dlgObj.getControl(parentList);
   obj2.setRowClean(rn2);
  }
  var flagPreserveState = typeof arguments[2] != 'undefined' ? arguments[2] : false;
  var flagRouteArray = false;
  if(rn.constructor == Array) {
   flagRouteArray = true;
   var existingData = this._getDataFromRoute(rn);
   if(typeof existingData == 'undefined') return;
   var _row = rn[rn.length -1];
   _row = this._logicalRow2PhysicalRow(_row);
  } else {
   var _row = '';
   var existingData = this.getData(this.selection[0]);
   if(rn > -1) {
    _row = rn;
    _row = this._logicalRow2PhysicalRow(_row);
   } else _row = existingData['*key'];
   var existingData = this.getData(_row);
  }
  if(typeof existingData == 'undefined' || existingData == null) return false;
  existingData._editedByUser = [];
  if(!flagSyncMediaFields) {
   if(typeof existingData._dirtyImages != 'undefined') {
    var _dirtyImageArrayJSON = existingData._dirtyImages;
    var _dirtyImages = [];
    for(var n in existingData._dirtyImages) {
     _dirtyImages.push(n);
    }
   } else {
    flagSyncMediaFields = true;
   }
   if (existingData._dirtyImages == false) {
    flagSyncMediaFields = true;
   }
  }
  if(mode == 1 ) {
   if(typeof existingData._oldData != 'undefined') return false;
  }
  var rn2 = [].concat(rn);
  if(!flagPreserveState) {
   if(typeof existingData != 'undefined' && existingData != null) {
    existingData._isDirty = false;
    existingData._isNewRow = false;
   }
  }
  var __rowGUID = null;
  existingData._hasServerSideError = false;
  existingData._serverSideErrors = false;
  existingData._flagServerSideErrorInChild = false;
  existingData._hasWriteConflictErrors = false;
  existingData._hasGlobalErrors = false;
  existingData._flagWriteConflictErrorInChild = false;
  existingData._flagGlobalErrorInChild = false;
  if(flagSyncMediaFields) {
   existingData._dirtyImages = false;
   existingData._hasUnsyncedMediaFiles = false;
  } else {
   existingData._hasUnsyncedMediaFiles = true;
   existingData._isDirty = true;
   existingData._oldData = {};
   existingData._oldData.image = '';
  }
  var topParentList = this._getTopParentList();
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var lTop = _dlgObj.getControl(topParentList);
  if(typeof lTop._rowGUIDS == 'undefined') lTop._rowGUIDS = [];
  lTop._rowGUIDS.push(existingData['*rowGUID']);
  __rowGUID = existingData['*rowGUID'];
  delete existingData['*rowGUID'];
  existingData._writeConflictErrors = false;
  if(!flagPreserveState) delete existingData._oldData;
  if(!flagSyncMediaFields) {
   existingData._isDirty = true;
   existingData._oldData = {};
   for(var ii = 0; ii < _dirtyImages.length; ii++) {
    existingData._oldData[_dirtyImages[ii]] = '';
   }
  }
  delete existingData._globalErrors;
  delete existingData._globalErrorsRaw;
  var _currRowNum = this.selection[0];
  if(existingData._isDeleted) {
  }
  if(flagRouteArray) {
   if(this._isRowInRouteVisible(rn)) {
    if(_row > -1) this.updateRow(_row,existingData);
    else this.updateRow( existingData['*value'],existingData);
   } else {
   }
  } else {
   if(_row > -1) this.updateRow(_row,existingData);
   else this.updateRow( existingData['*value'],existingData);
  }
  if(typeof _currRowNum != 'undefined') this.setValue(_currRowNum,false);
  var parentList = this.parentList;
  if(typeof parentList != 'undefined' ) {
   if(flagRouteArray) var flagListIsDirty =  this._isRouteBranchDirty(rn);
   else var flagListIsDirty = this.listIsDirty();
   if (flagListIsDirty == false) {
    var lObj = window[this._hostComponentId + '_DlgObj'].getControl(parentList);
    if(flagRouteArray) {
     rn.pop();
     rn.pop();
     if(lObj && lObj.setRowClean) lObj.setRowClean(rn,1);
    } else {
     if(!arguments[3]) lObj.setRowClean(-1,1);
    }
   } else {
    if(flagPreserveState) {
     this._setRouteDirty(rn);
    }
   }
  }
 }
 ,
 _updateDataInTopParent: function() {
 var removeDeletedRows = function(data) {
  for(var i = data.length-1; i >= 0; i--) {
   if(data[i]._isDeleted) {
    data.splice(i,1);
   } else {
    for(var p in data[i]) {
     if(p.indexOf('__LIST__') == 0 && Array.isArray(data[i][p])) removeDeletedRows(data[i][p]);
    }
   }
  }
 };
 var lObjTopParent = this._getTopParentListObject();
 var data = lObjTopParent._data
 removeDeletedRows(data)
 lObjTopParent.refresh();
}
,
 _setRouteDirty: function(route) {   route.pop();
  route.pop();
  var flagLoop = true;
  if(route.length == 0) flagLoop = false;
  while(flagLoop) {
   var existingData = this._getDataFromRoute(route);
   if(typeof existingData != 'undefined') {
    existingData._isDirty = true;
   }
   route.pop();
   route.pop();
   if(route.length == 0) break;
  }
 }
,
 _showError: function(id,moreTxt,lessTxt) {   var e = $(id);
  var e2 = $(id + '.LINK');
  if(e.style.display == '') {
   e.style.display = 'none';
   e2.innerHTML = moreTxt;
  } else {
   e.style.display = '';
   e2.innerHTML = lessTxt;
  }
 }
 ,
 _setGlobalCRUDErrors: function(rowNum,txt,mode) {
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var ePH =  this._globalErrorPlaceHolder;
  if(typeof ePH == 'undefined') ePH = '';
  var flagPH = $(ePH);
  if(typeof mode == 'undefined') mode = '';
  var txtRaw = txt;
  if(mode != '' && ePH != '' && flagPH) {
   var customMessage = this.customization.dv.databaseError[mode];
   customMessage = customMessage.split('|');
   txt = '<div onclick="window[\''+this._hostComponentId + '_DlgObj\'].getControl(\''+this.listVariableName+'\')._showError(\''+this.listVariableName +'.GLOBALERROR\',\''+customMessage[1]+'\',\''+customMessage[2]+'\');">' + customMessage[0] + '&nbsp;<a id="'+this._hostComponentId+'.'+this.listVariableName + '.GLOBALERROR.LINK" class="Alpha-MagentaLink" style="cursor: pointer;color:red; font-size: 8pt;" href=\'#\'>'+customMessage[1]+'</a>' + '<div id="'+this.listVariableName+'.GLOBALERROR" style="display: none; font-size: 8pt;">'+txt+'</div></div>';
  }
  if(rowNum.constructor == Array) {
   if(txt != '') this.setServerSideError(true,rowNum,txt,'ge',txtRaw);
   _dlgObj._listRowSelect(this.listVariableName);
   return true;
  }
  var _d = this._getRowData(rowNum);
  _d._globalErrors = txt;
  _d._globalErrorsRaw = txtRaw;
  _d._hasServerSideError = false;
  _d._serverSideErrors = false;
  this.updateRow(rowNum,_d);
  _dlgObj._listRowSelect(this.listVariableName);
 }
 ,
 getAllErrors: function(rows) {   var lObj = this;
  var data = lObj._data;
  if(typeof rows != 'undefined') {
   if(typeof rows == 'string') rows = rows.split(',');
   var d2 = [];
   var r = '';
   for(var j = 0; j < rows.length; j++) {
    r = this._dataMap[rows[j]]
    d2.push(data[r]);
   }
   data = d2;
  }
  var r = A5.u.object.each(data,function(name,value,path,result){
   path = path.splice(0,path.length -1);
   var _dr = data;
   for(var i = 0; i < path.length; i++) {
    var _dr = _dr[path[i]];
   }
   if(name == '_hasServerSideError') {
    if(value) {
     result.push({errorType: 'serverSide', path:path, error: _dr['_serverSideErrors']});
    }
   }
   if(name == '_hasWriteConflictErrors') {
    if(value) {
     var _wc = _dr['_writeConflictErrors'];
     var _wc2 = [];
     $u.o.assign(_wc2,_wc);
     for(var i = 0; i < _wc2.length; i++) {
      delete _wc2[i].errorText;
     }
     result.push({errorType: 'writeConflict', path: path, error: _wc2});
    }
   }
   if(name == '_hasGlobalErrors') {
    if(value) {
     result.push({errorType: 'globalError', path: path, error: _dr['_globalErrorsRaw']});
    }
   }
  })
  return r;
 }
 ,
 _setWriteConflictErrors: function(rowNum,eArr) {  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  if(rowNum.constructor == Array) {
   this.setServerSideError(true,rowNum,eArr,'wc');
   _dlgObj._listRowSelect(this.listVariableName);
   return true;
  }
  rowNum = this._logicalRow2PhysicalRow(rowNum);
  var _d = this._getRowData(rowNum);
  _d._writeConflictErrors = eArr;
  _d._hasWriteConflictErrors = true;
  _d._hasServerSideError = false;
  _d._serverSideErrors = false;
  _d._globalErrors = '';
  _d._hasGlobalErrors = false;
  _d._globalErrorsRaw = '';
  _d._globalErrors = '';
  this.updateRow(rowNum,_d);
  _dlgObj._listRowSelect(this.listVariableName);
 }
 ,
 _setGenericByChild: function(rn,mode) {
  var parentListName = this.parentList;
  if(typeof parentListName != 'undefined' && parentListName != '') {
   if(parentListName != '') {
    var plObj = window[this._hostComponentId + '_DlgObj'].getControl(parentListName);
    var existingData = plObj._getDataFromRoute(rn);
    if(typeof existingData == 'undefined') return;
    if(mode == 'sse') {
     existingData._flagServerSideErrorInChild = true;
     existingData._isDirty = true;
    } else if (mode == 'wc') {
     existingData._flagWriteConflictErrorInChild = true;
     existingData._isDirty = true;
    } else if (mode == 'ge') {
     existingData._flagGlobalErrorInChild = true;
     existingData._isDirty = true;
    }
    var _row = rn[rn.length -1];
    _row = plObj._logicalRow2PhysicalRow(_row);
    if(plObj._isRowInRouteVisible(rn)) plObj.updateRow(_row,existingData);
    rn.pop();
    rn.pop();
    plObj._setGenericByChild(rn,mode)
   }
  }
 }
 ,
 setServerSideError: function(flag) {
  var rn = typeof arguments[1] != 'undefined' ? arguments[1] : -1;
  var flagRouteArray = false;
  if(rn.constructor == Array) {
   flagRouteArray = true;
  }
  var errObj =  typeof arguments[2] != 'undefined' ? arguments[2] : {};
  if(flag == false) {
   errObj = false;
  }
  var mode = typeof arguments[3] != 'undefined' ? arguments[3] : 'sse'
  var txtRaw = typeof arguments[4] != 'undefined' ? arguments[4] : '';
  var _row = '';
  if(flagRouteArray) {
   var existingData = this._getDataFromRoute(rn);
   if(typeof existingData == 'undefined') return;
   var _row = rn[rn.length -1];
   _row = this._logicalRow2PhysicalRow(_row);
  } else {
   var existingData = this.getData(this.selection[0]);
   if(typeof existingData == 'undefined') return;
   if(rn > -1) {
    _row = rn;
    _row = this._logicalRow2PhysicalRow(_row);
   } else _row = existingData['*key'];
   var existingData = this.getData(_row);
   if(typeof existingData == 'undefined') return;
  }
  if(mode == 'sse') {
   existingData._hasServerSideError = flag;
   existingData._serverSideErrors = errObj;
   existingData._globalErrors = false;
   existingData._globalErrorsRaw = ''
   existingData._hasGlobalErrors = false;
   existingData._hasWriteConflictErrors = false;
   existingData._writeConflictErrors = false;
  } else if (mode == 'wc') {
   existingData._hasWriteConflictErrors = flag;
   existingData._writeConflictErrors = errObj;
   existingData._hasServerSideError = false;
   existingData._serverSideErrors = false;
   existingData._globalErrors = '';
   existingData._hasGlobalErrors = false;
   existingData._globalErrorsRaw = '';
   existingData._globalErrors = '';
  } else if (mode == 'ge') {
   existingData._globalErrors = errObj;
   existingData._globalErrorsRaw = txtRaw;
   existingData._hasGlobalErrors = flag;
   existingData._hasServerSideError = false;
   existingData._serverSideErrors = false;
  }
  if(flagRouteArray) {
   if(this._isRowInRouteVisible(rn)) {
    if(_row > -1) this.updateRow(_row,existingData);
    else this.updateRow( existingData['*value'],existingData);
   }
   if(this._setGenericByChild) {
    rn.pop();
    rn.pop();
    this._setGenericByChild(rn,mode);
   }
  } else {
   if(_row > -1) this.updateRow(_row,existingData);
   else this.updateRow( existingData['*value'],existingData);
  }
 }
 ,
 _showWCErrorMore: function(varName,eleIn,infoIn) {   var info = {};
  if(typeof infoIn != 'undefined') {
   info = infoIn;
  }
  if(typeof eleIn == 'undefined') eleIn = false;
  var row = this.selection[0];
  this._wceVarname = varName;
  var myValue = window[this._hostComponentId + '_DlgObj'].getValue(varName);
  var _d = this._getRowData(row)
  var wce = _d._writeConflictErrors;
  var wcCount = wce.length;
  var indx = '';
  indx = window[this._hostComponentId + '_DlgObj']._findArrayProp(wce,'varName',varName);
  if(indx == -1) return false
  wce = wce[indx];
  var mTheirs = this.customization.dv.writeConflict.useTheirsMessage;
  var mMine   = this.customization.dv.writeConflict.useMineMessage;
  var mTheirsAll = this.customization.dv.writeConflict.useTheirsAll;
  var mMineAll   = this.customization.dv.writeConflict.useMineAll;
  mTheirs = mTheirs.replace('{theirvalue}',this._stripHTML(wce.oldValueCurrent,30));
  mMine = mMine.replace('{myvalue}',this._stripHTML(myValue,30));
  var ctxt = this;
  var mD = [];
  mD.push({html: mMine, value: 'mine'});
  mD.push({html: mTheirs, value: 'theirs'});
  if(wcCount > 1) {
   mD.push('-');
   mD.push({html: mMineAll , value: 'mineAll'});
   mD.push({html: mTheirsAll, value: 'theirsAll' });
  }
  var mS = {
   theme: 'Alpha-Magenta',
   _hostComponentId : this._hostComponentId,
   listVariableName: this.listVariableName,
   iconColumn: {show: false},
   pointer: {show: true,location: 'auto'},
   animation: {show: {type: 'css-slide',duration: 'fast'}, hide: {type: 'none',duration: 'fast'}},
   onHide: function() {  $(this._eleWCM).style.visibility = '';},
   onClick: function(item) {
    var lObj = window[this._hostComponentId + '_DlgObj'].getControl(this.listVariableName);
    if(item.value == 'mine') lObj._useMine(this._varName);
    if(item.value == 'mineAll') lObj._useMineAll();
    if(item.value == 'theirs') lObj._useTheirs(this._varName);
    if(item.value == 'theirsAll') lObj._useTheirsAll();
   }
  };
  var eleWCM = this._hostComponentId +'.WCM.'+this.listVariableName+ '.' +  varName.toUpperCase();
  $(eleWCM).style.visibility = 'hidden';
  if(typeof this._menu == 'undefined') {
   this._menu = new A5.Menu(mD,mS);
  } else {
   this._menu.populate(mD);
  }
  this._menu._varName = varName;
  this._menu._eleWCM = eleWCM;
  var ele = '';
  if(eleIn == false) {
   ele = window[this._hostComponentId + '_DlgObj'].getPointer(varName);
  } else {
   ele = eleIn;
  }
  this._menu.show('dropdown',ele);
 }
 ,
 _useMine: function(varName) {   this.resolveConflictUsingMine(varName);
 }
 ,
 _useTheirs: function(varName) {   this.resolveConflictUsingTheirs(varName);
 }
 ,
 _useMineAll: function() {   this.resolveConflictUsingMine();
 }
 ,
 _useTheirsAll: function() {   this.resolveConflictUsingTheirs();
 }
 ,
 resolveConflictUsingMine: function() {
  var control = typeof arguments[0] != 'undefined' ? arguments[0] : '__all__';
  var formViewObject = arguments[1];
  var flagFV = false;
  if(typeof formViewObject != 'undefined') flagFV = true;
  var row = this.selection[0];
  var _d = this._getRowData(row)
  var wce = _d._writeConflictErrors;
  if(typeof wce == 'undefined') return false;
  var arr = [];
  if(control == '__all__') arr = this._getControlsInDv();
  else arr.push(control);
  var myValue = '';
  var indx = '';
  var fn = '';
  var ix2 = '';
  for(var i = 0; i < arr.length; i++) {
   if(!flagFV) myValue = window[this._hostComponentId + '_DlgObj'].getValue(arr[i]);
   else myValue = formViewObject.conflictValues.newValue;
   indx = window[this._hostComponentId + '_DlgObj']._findArrayProp(wce,'varName',arr[i]);
   if(indx >0 -1) {
    ix2 = window[this._hostComponentId + '_DlgObj']._findArrayProp(wce,'varName',arr[i]);
    if(ix2 == -1) return false
    if(!flagFV) fn = this._getListFieldFromControl(arr[i]);
    else fn = arr[i];
    _d._oldData[fn] = wce[ix2].oldValueCurrent;
    wce.splice(indx,1);
   }
  }
  if(wce.length == 0) {
   _d._writeConflictErrors = false;
   _d._hasWriteConflictErrors = false;
   this.updateRow(row,_d);
  };
  if(_d._hasWriteConflictErrors == false) {
   var parentList = this.parentList;
   if(typeof parentList != 'undefined') {
    var lObj = window[this._hostComponentId + '_DlgObj'].getControl(parentList);
    lObj._setChildHasWriteConflictFlag();
   }
  }
  this._clearServerSideErrors();
  this._showWriteConflictErrors();
 }
 ,
 resolveConflictUsingTheirs: function() {
  var control = typeof arguments[0] != 'undefined' ? arguments[0] : '__all__';
  var formViewObject = arguments[1];
  var flagFV = false;
  if(typeof formViewObject != 'undefined') flagFV = true;
  var row = this.selection[0];
  var _d = this._getRowData(row)
  var wce = _d._writeConflictErrors;
  if(typeof wce == 'undefined') return false;
  var arr = [];
  if(control == '__all__') {
   arr = this._getControlsInDv();
  } else {
   if(control.constructor == Array) {
    arr = control;
   } else {
    arr.push(control);
   }
  }
  var indx = '';
  var fn = '';
  var ix2 = '';
  for(var i = 0; i < arr.length; i++) {
   indx = window[this._hostComponentId + '_DlgObj']._findArrayProp(wce,'varName',arr[i]);
   if(indx >0 -1) {
    ix2 = window[this._hostComponentId + '_DlgObj']._findArrayProp(wce,'varName',arr[i]);
    if(ix2 == -1) return false
    if(!flagFV) fn = this._getListFieldFromControl(arr[i]);
    else fn = arr[i];
    _d[fn] = wce[ix2].oldValueCurrent;
    _d._oldData[fn] = wce[ix2].oldValueCurrent;
    if(!flagFV) window[this._hostComponentId + '_DlgObj'].setValue(arr[i], wce[ix2].oldValueCurrent,false);
    wce.splice(indx,1);
   }
  }
  if(wce.length == 0) {
   _d._writeConflictErrors = false;
   _d._hasWriteConflictErrors = false;
  };
  var allArr = this._getControlsInDv();
  if(flagFV) {
   allArr = [];
   for(var n in _d._oldData) {
    allArr.push(n);
   }
  }
  _d._isDirty = false;
  var tempData = '';
  for(var i = 0; i < allArr.length; i++) {
   fn = this._getListFieldFromControl(allArr[i]);
   if(flagFV) fn = allArr[i];
   tempData = _d._oldData[fn];
   if(tempData == null) tempData = '';
   if( _d[fn] != tempData ) {
    _d._isDirty = true;
    break;
   }
  }
  this.updateRow(row,_d);
  this._clearServerSideErrors();
  this._showWriteConflictErrors();
  if(_d._hasWriteConflictErrors == false) {
   var parentList = this.parentList;
   if(typeof parentList != 'undefined') {
    var lObj = window[this._hostComponentId + '_DlgObj'].getControl(parentList);
    lObj._setChildHasWriteConflictFlag();
   }
  }
  window[this._hostComponentId + '_DlgObj'].refreshClientSideComputations();
 }
 ,
 nullOutDetailViewRecord: function() {
  var flagDisable = typeof arguments[0] != 'undefined' ? arguments[0] : false;
  var val = '';
  var flagParentListHasActiveRow = this._parentListHasActiveRow();
  if(flagDisable) {
   if(flagParentListHasActiveRow) flagDisable = false;
  }
  var debugMsg = 'CurrentList: ' + this.listVariableName + ' - flagDisable is set to: ' + flagDisable + ' my parentList has active row: ' +  this._parentListHasActiveRow();
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var controlName = '';
  var controlType = '';
  for(var i = 0; i < this._listFields.length; i++) {
   controlName = this._getUXDetailViewControlName(this._listFields[i].name);
   controlType = _dlgObj._getControlType(controlName);
   val = window[this._hostComponentId + '_DlgObj'].defaultValues[controlName.toUpperCase()];
   if(controlType == 'formbox') val = '{}'
   window[this._hostComponentId + '_DlgObj'].setValue(controlName,val,false);
  }
  this._deselectAll();
  this._clearServerSideErrors();
  if(flagDisable) this.disableDetailView(true);
  else this.disableDetailView(false)
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var arr = this._getControlsInDv();
  for(var i = 0; i < arr.length; i++) {
   _type = _dlgObj._getControlType(arr[i]);
   if(_type == 'formbox') {
    _dlgObj.setValue(arr[i],'{}')
   }
  }
 }
 ,
 _stripHTML: function(txt,length) {   var ele = document.createElement('div');
  ele.innerHTML = txt;
  var txt2 = ele.textContent;
  var txt3 = txt2.substr(0,length);
  if(txt3.length < txt2.length) txt3 = txt3 + '...';
  delete ele;
  return txt2;
 }
 ,
 _showWriteConflictErrors: function(row) {
  var _d = this._getRowData(row);
  if(typeof _d == 'undefined') return false;
  if(typeof _d._writeConflictErrors == 'undefined') return false;
  if(typeof _d._hasWriteConflictErrors == 'undefined') return false;
  if(_d._hasWriteConflictErrors == false) return false;
  _e = _d._writeConflictErrors
  var arr = [];
  for(var i = 0; i < _e.length; i++) {
   delete obj;
   var obj = {};
   obj.id =  this._hostComponentId +  '.V.R1.' + _e[i].varName.toUpperCase();
   obj.message = _e[i].errorText;
   arr.push(obj);
  }
  var arrFix = [];
  for(var i = 0; i < arr.length; i++) {
   if($(arr[i].id)) arrFix.push(arr[i]);
  }
  if(arrFix.length > 0) window[this._hostComponentId + '_DlgObj'].setErrors(arr);;
 }
 ,
 _showServerSideErrors: function(row) {
  var _d = this._getRowData();
  if(typeof _d == 'undefined') return false;
  if(typeof _d._globalErrors != 'undefined') {
   if(_d._globalErrors != '') {
    this._showGlobalError(_d._globalErrors);
   }
  }
  if(typeof _d._serverSideErrors == 'undefined') return false;
  if(typeof _d._hasServerSideError == 'undefined') return false;
  if(_d._hasServerSideError == false) return false;
  _e = _d._serverSideErrors;
  var arr = [];
  for(var i = 0; i < _e.length; i++) {
   delete obj;
   var obj = {};
   var _n = '';
   _n = _e[i].varName;
   if(typeof _n == 'undefined') _n = _e[i].fieldName
   _n = this._getUXDetailViewControlName(_n);
   if(typeof _n != 'undefined') {
    obj.id = this._hostComponentId + '.V.R1.' + _n.toUpperCase();
    obj.message = _e[i].errorText;
    obj.errorType = 'serverside';
    arr.push(obj);
   }
  }
  var arrFix = [];
  for(var i = 0; i < arr.length; i++) {
   if($(arr[i].id)) arrFix.push(arr[i]);
  }
  if(arrFix.length > 0) window[this._hostComponentId + '_DlgObj'].setErrors(arr);;
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  _dlgObj._listRowSelect(this.listVariableName);
 }
 ,
 _clearServerSideErrors: function() {  var ea = window[this._hostComponentId + '_DlgObj']._eh._e;
  if(typeof ea == 'undefined') return false;
  var arr = this._getControlsInDv();
  var fa = [];
  var id = '';
  for(var i = 0; i < arr.length; i++) {
   id = this._hostComponentId + '.V.R1.' + arr[i].toUpperCase()
   if(window[this._hostComponentId + '_DlgObj']._findArrayProp(ea,'id',id) >= 0) fa.push(id);
  }
  window[this._hostComponentId + '_DlgObj'].clearErrors(fa);
  this._clearGlobalError();
 }
 ,
 _hasClientSideError: function() {   var ea = window[this._hostComponentId + '_DlgObj']._eh._e;
  if(typeof ea == 'undefined') return false;
  var arr = this._getControlsInDv();
  var indx = '';
  for(var i = 0; i < arr.length; i++) {
   id = this._hostComponentId + '.V.R1.' + arr[i].toUpperCase()
   indx = window[this._hostComponentId + '_DlgObj']._findArrayProp(ea,'id',id);
   if(indx >= 0) {
    if( ea[indx].clientSide == true) {
     return true;
    }
   }
  }
  return false;
 }
 ,
 _getRowData: function() {   var rn = typeof arguments[0] != 'undefined' ? arguments[0] : -1;
  if(rn > -1) return this.getData(rn);
  else return this.getData(this.selection[0]);
 }
 ,
 deleteRow: function() {
  var _rn = this.selection[0];
  if(typeof _rn == 'undefined') return false;
  if(this._executeEvent('detailView.canDeleteRow',{}) == false) return false;
  var ops = typeof arguments[0] != 'undefined' ? arguments[0] : {};
  var flagPrompt = typeof ops.prompt != 'undefined' ? ops.prompt : true;
  if(!flagPrompt) {
   this._deleteRowLow(ops);
   return true;
  }
  var classInst = this;
  if(typeof this.customization == 'undefined') return false;
  var msg = this.customization.dv.confirmDeleteWarning.message;
  if(msg.toLowerCase().indexOf('javascript:') == 0) {
   var fn = msg.split(':')[1];
   fn = fn.split('(')[0];
   window[fn].call();
   return false;
  }
  var image = this.customization.dv.confirmDeleteWarning.icon;
  var iconType = window[this._hostComponentId + '_DlgObj']._iconType(image);
  var imageHTML = window[this._hostComponentId + '_DlgObj']._getImageHTML(image,iconType);
  msg = '<div style="padding: 10px;" >' + imageHTML + msg + '<br style="clear: both;" /></div>';
  var title = this.customization.dv.confirmDeleteWarning.title;
  A5.msgBox.show(title,msg,'yn',function(button) {
   if(button == 'yes'){
    classInst._deleteRowLow(ops);
    setTimeout(function() {  classInst.refresh() ; },0);
      } else if(button == 'no'){
      }
      delete classInst;
  } );
 }
 ,
 resetRow: function() {   if(this._executeEvent('detailView.canResetRow',{}) == false) return false;
  var ops = typeof arguments[0] != 'undefined' ? arguments[0] : {};
  var flagPrompt = typeof ops.prompt != 'undefined' ? ops.prompt : true;
  if(!flagPrompt) {
   this._resetRowLow();
   return true;
  }
  var classInst = this;
  var msg = this.customization.dv.confirmRowResetWarning.message;
  if(msg.toLowerCase().indexOf('javascript:') == 0) {
   var fn = msg.split(':')[1];
   fn = fn.split('(')[0];
   window[fn].call();
   return false;
  }
  var image = this.customization.dv.confirmRowResetWarning.icon;
  var iconType = window[this._hostComponentId + '_DlgObj']._iconType(image);
  var imageHTML = window[this._hostComponentId + '_DlgObj']._getImageHTML(image,iconType);
  msg = '<div style="padding: 10px;" >' + imageHTML + msg + '<br style="clear: both;" /></div>';
  var title = this.customization.dv.confirmRowResetWarning.title;
  A5.msgBox.show(title,msg,'yn',function(button) {
   if(button == 'yes'){
   setTimeout(function() { classInst._resetRowLow();    },0);
      } else if(button == 'no'){
      }
      delete classInst;
  } );
 }
 ,
 _removeDirtyFlag: function(obj) {
 for(var n in obj) {
  if(n && n != null) {
   if(obj[n] && obj[n] != null && typeof obj[n] == 'string') {
    if(obj[n].indexOf(':::___DIRTY___:::') > -1) {
     var _d = obj[n]
     _d = _d.split(':::___DIRTY___:::')[0]
     _d = _d.split(':::___null___:::')[0]
     obj[n] = _d;
    }
   }
  }
 }
}
,
 _resetRowLow: function() {
  var existingData = this.getData(this.selection[0]);
  if(typeof existingData == 'undefined') return;
  var flagNewRow = false;
  if(typeof existingData._isNewRow != 'undefined') flagNewRow = existingData._isNewRow;
  if(flagNewRow) {
   this.deleteRow({prompt:false});
   return;
  }
  if(typeof existingData == 'undefined') return false;
  if(typeof existingData._oldData == 'undefined') return false;
  var data = {};
  var obj = existingData._oldData
  this._removeDirtyFlag(obj)
  $u.o.assign(data,obj);
  data._isDirty = false;
  data._isDeleted = false;
  data._hasServerSideError = false;
  data._serverSideErrors = false;
  data._hasWriteConflictErrors = false;
  data._writeConflictErrors = false;
  data._oldData = false;
  delete data._globalErrors;
  delete data._globalErrorsRaw;
  this.updateRow(this.selection[0],data);
  var existingData = this.getData(this.selection[0]);
  delete existingData._globalErrors;
  delete existingData._globalErrorsRaw;
  this.updateRow(this.selection[0],existingData);
  window[this._hostComponentId + '_DlgObj'].refreshClientSideComputations();
  this.populateUXControls();
  this._refreshDebugInfo();
  var topParent = this.allParentLists[this.allParentLists.length -1];
  if(typeof topParent != 'undefined') {
   var lObjTP = window[this._hostComponentId + '_DlgObj'].getControl(topParent);
   var _r = lObjTP._getRoute();
   var _ra = this.__routeToArray(_r)
   this.setRowCleanPreserveState(_ra);
  }
  if(this.editInplaceSaveAll) this.editInplaceSaveAll()
  this._executeEvent('detailView.afterResetRow',{});
 }
 ,
 __routeToArray: function(_r) {   var arr = [];
  for(var i = 0; i < _r.length; i++) {
   if(i==0) {
    arr.push(_r[i].row);
   } else {
    arr.push('__LIST__' +_r[i].list);
    arr.push(_r[i].row);
   }
  }
  return arr;
 }
,
 _arrayIsDirty: function(arr) {   var flag = false;
  for(var i = 0; i < arr.length; i++) {
   if(arr[i]._isDirty) {
    return true;
   }
  }
  return false;
 }
,
 _deleteRowLow: function(ops) {
  var flagSetValue = typeof ops.setValue != 'undefined' ? ops.setValue : true;
  var data = this.getData(this.selection[0]);
  if(typeof data == 'undefined') return false;
  var flagNewRow = '';
  if(typeof data._isNewRow != 'undefined') flagNewRow = data._isNewRow;
  if(flagNewRow) {
   var _rn = this.selection[0];
   var _newRow = _rn;
   if( (_newRow +1) > (this._dataMap.length-1) ) _newRow = _newRow -1;
   this.nullOutDetailViewRecord();
   this.removeRows([_rn]);
   var flagListIsClean = !this._arrayIsDirty(this._data);
   data._isDeleted = true;
   var parentListName = this.parentList;
   if(typeof parentListName != 'undefined' && parentListName != '') {
    var flagIsNewRow = false;
    var plObj = window[this._hostComponentId + '_DlgObj'].getControl(this.parentList);
    var parentData = plObj.getData(plObj.selection[0]);
    var parentData2 = parentData;
    var parentDataSublist = parentData['__LIST__' + this.listVariableName];
    var indx = window[this._hostComponentId + '_DlgObj']._findArrayProp(parentDataSublist,'*key',data['*key']);
    parentDataSublist.splice(indx,1);
    var flagLoop = true;
    var parentList = plObj;
    while(flagLoop && flagListIsClean) {
     if( (typeof parentData['_oldData'] == 'undefined' || !parentData['_oldData']) && (typeof parentData._isNewRecord != 'undefined' || !parentData._isRewRecord)    ) {
      parentData._isDirty = false;
      parentData._flagGlobalErrorInChild = false;
      if(typeof parentList.parentList == 'undefined' || parentList == '') break;
      parentList = window[this._hostComponentId + '_DlgObj'].getControl(parentList.parentList);
      if(parentList) {
       parentData = parentList.getData(parentList.selection[0]);
      } else {
       break;
      }
     } else {
      break;
     }
    }
    var topParent = this.allParentLists[this.allParentLists.length -1];
    var lTop = window[this._hostComponentId + '_DlgObj'].getControl(topParent);
    var topParentData = lTop.getData(lTop.selection[0]);
    lTop._resetFlags(topParentData);
    lTop._refreshListRecursive();
   }
   if(flagSetValue) this.setValue(_newRow);
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   _dlgObj.persistVariablesToLocalStorage();
   var that = this
   setTimeout(function() {
    that._executeEvent('detailView.afterDeleteRow',{})
   },10);
   if(flagNewRow) {
     var lObjP = this._getTopParentListObject();
     var _dlgObj = window[this._hostComponentId + '_DlgObj'];
     var _mode = _dlgObj.__listPersistMode(lObjP.listVariableName);
    if(_mode == 'edits') {
     var parentListId = this._getTopParentListObject().listVariableName;
     _dlgObj.persistListToLocalStorage(parentListId, { mode: 'update'});
    }
   }
   return false;
  }
  data._isDirty = true;
  data._hasServerSideError = false;
  data._serverSideErrors = false;
  data._hasWriteConflictErrors = false;
  data._writeConflictErrors = false;
  data._oldData = false;
  data._isDeleted = true;
  data = this._base64Prefix(data,true);
  this.updateRow(this.selection[0],data);
  window[this._hostComponentId + '_DlgObj'].refreshClientSideComputations();
  this.populateUXControls();
  this._refreshDebugInfo();
  var that = this
   setTimeout(function() {
    that._executeEvent('detailView.afterDeleteRow',{})
   },10)
  var parentListName = this.parentList;
  if(typeof parentListName != 'undefined' && parentListName != '') {
   var flagIsNewRow = false;
   var plObj = window[this._hostComponentId + '_DlgObj'].getControl(this.parentList);
   if(plObj._setDirtyByChild) {
    plObj._setDirtyByChild(false);
   }
  }
  if(this.synchronizeImmediately) {
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   var flagOnLine = _dlgObj._getOnlineStatus();
   if (flagOnLine) {
    _dlgObj.saveListEdits(this.listVariableName);
   }
  }
  if(this.onInplaceEditDeleteRowAfter){
   var d = this._data;
   var lObj = this;
   var rowNumber = this.selection[0];
   setTimeout(function() {
    lObj.onInplaceEditDeleteRowAfter.call(lObj,d,rowNumber);
   },100)
  }
 }
 ,
 _base64Prefix: function(_d,flagRemove) {   var n = '';
  var b64prefix = ''
  for(var i = 0; i < this._listFields.length; i++) {
   if(typeof this._listFields[i].base64Prefix !== 'undefined') {
    n = this._listFields[i].name;
    b64prefix = this._listFields[i].base64Prefix;
    _d[n] = _d[n].replace(b64prefix,'');
    if(!flagRemove) _d[n] = b64prefix + _d[n];
   }
  }
  return _d;
 }
 ,
 _resetFlags: function(_d) {
 var r = A5.u.object.each(_d,function(name,value,path,result) {
  if(name == '_isDirty'|| name == '_isNewRow' ){
   if(value) {
    path = path.splice(0,path.length -3);
    result.push({'property' : '_isDirty', path: JSON.stringify(path)} );
    while(path.length > 0) {
     path = path.splice(0,path.length -2)
     result.push({'property' : '_isDirty', 'path': JSON.stringify(path)});
    }
   }
  }
  if(name == '_hasServerSideError' || name == '_flagServerSideErrorInChild' ) {
   if(value) {
    path = path.splice(0,path.length -3);
    result.push({'property' : '_flagServerSideErrorInChild', path: JSON.stringify(path)} );
    while(path.length > 0) {
     path = path.splice(0,path.length -2)
     result.push({'property' : '_flagServerSideErrorInChild', 'path': JSON.stringify(path)});
    }
   }
  }
  if(name == '_hasGlobalErrors' || name == '_flagGlobalErrorInChild' ) {
   if(value) {
    path = path.splice(0,path.length -3);
    result.push({'property' : '_flagGlobalErrorInChild', path: JSON.stringify(path)} );
    while(path.length > 0) {
     path = path.splice(0,path.length -2)
     result.push({'property' : '_flagGlobalErrorInChild', 'path': JSON.stringify(path)});
    }
   }
  }
  if(name == '_hasWriteConflictErrors' || name == '_flagWriteConflictErrorInChild' ) {
   if(value) {
    path = path.splice(0,path.length -3);
    result.push({'property' : '_flagWriteConflictErrorInChild', path: JSON.stringify(path)} );
    while(path.length > 0) {
     path = path.splice(0,path.length -2)
     result.push({'property' : '_flagWriteConflictErrorInChild', 'path': JSON.stringify(path)});
    }
   }
  }
 });
 var _d2 = '';
 var path = '';
 var property = '';
 for(var i = 0; i < r.length; i++) {
    _d2 = _d
   path = JSON.parse(r[i].path)
   property = r[i].property
   for(var j = 0; j < path.length; j++) {
    _d2 = _d2[path[j]];
   }
   _d2[property] = true;
 }
}
,
 resetForm: function() {
  if(this._executeEvent('detailView.canUndoEdits',{}) == false) return false;
  var ops = typeof arguments[0] != 'undefined' ? arguments[0] : {};
  var flagPrompt = typeof ops.prompt != 'undefined' ? ops.prompt : true;
  if(!flagPrompt) {
   this._resetFormLow();
   return true;
  }
  var classInst = this;
  var msg = this.customization.dv.confirmFormResetWarning.message;
  var image = this.customization.dv.confirmFormResetWarning.icon;
  var title = this.customization.dv.confirmFormResetWarning.title;
  if(msg.toLowerCase().indexOf('javascript:') == 0) {
   var fn = msg.split(':')[1];
   fn = fn.split('(')[0];
   window[fn].call();
   return false;
  }
  var iconType = window[this._hostComponentId + '_DlgObj']._iconType(image);
  var imageHTML = window[this._hostComponentId + '_DlgObj']._getImageHTML(image,iconType);
  msg = '<div style="padding: 10px;" >' + imageHTML + msg + '<br style="clear: both;" /></div>';
  A5.msgBox.show(title,msg,'yn',function(button) {
   if(button == 'yes'){
    classInst._resetFormLow();
      } else if(button == 'no'){
      }
      delete classInst;
  } );
 }
 ,
 _resetFormLow: function() {  var r = this.selection[0];
  if(typeof r == 'undefined') {
   this.newDetailViewRecord();
  }
  this.populateUXControls(undefined,true);
  var ctrls = this._getControlsInDv();
  var eleId = '';
  var arr = [];
  var indx = -1;
  for(var i = 0; i < ctrls.length; i++) {
   window[this._hostComponentId + '_DlgObj'].setControlDirty(ctrls[i],false);
   if( window[this._hostComponentId + '_DlgObj']._eh._e.length > 0) {
    eleId = this._hostComponentId +  '.V.R1.' + ctrls[i].toUpperCase();
    indx = window[this._hostComponentId + '_DlgObj']._findArrayProp(window[this._hostComponentId + '_DlgObj']._eh._e,'id',eleId);
    if(indx >= 0 ) arr.push(eleId);
   }
  }
  if(arr.length > 0) window[this._hostComponentId + '_DlgObj'].clearErrors(arr);
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  _dlgObj.refreshClientSideComputations();
  this._executeEvent('detailView.afterUndoEdits',{});
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  _dlgObj.persistVariablesToLocalStorage();
  _dlgObj._list_executeEvent(this.listVariableName,'detailView.onStateChanged',{isDirty:false});
  this.__detailViewWentDirtyHasFired = undefined;
 }
 ,
 detailViewIsDirty: function() {
  if(this._dvmode == 'search') return false;
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  if (this._hasDetailView) {
   if(this._propertyGrid) {
    var propertyGridName = this._propertyGridName;
     var obj = _dlgObj.getControl(propertyGridName);
     if(typeof obj.state.isDirtyImmediate != 'undefined') return obj.state.isDirtyImmediate
     return obj.state.isDirty;
   }
   if(this._JSONForm) {
    var formName = this._JSONFormName;
    if(formName != '') {
     try{
      var _dlgObj = window[this._hostComponentId + '_DlgObj'];
      var obj = _dlgObj.getControl(formName);
      if(typeof obj.state.isDirtyImmediate == 'undefined') return false;
      if (obj) return obj.state.isDirtyImmediate
     }catch(e) {
      return false;
     }
    }
   }
  }
  var flagDrillDown = typeof arguments[0] != 'undefined' ? arguments[0] : false;
  var isDirty = false;
  this._nameOfListWithDirtyDetailView = '';
  this._nameOfDirtyDetailViewConrol = '';
  for(var i = 0; i < this._listFields.length; i++) {
   controlName = this._getUXDetailViewControlName(this._listFields[i].name);
   if(window[this._hostComponentId + '_DlgObj'].getControlDirty(controlName.toUpperCase())) {
    var flagLog = false;
    if(typeof this.logDetailViewDirty != 'undefined') flagLog = this.logDetailViewDirty;
    if(flagLog) console.log(controlName + ' caused the list to go dirty')
    isDirty =  true;
    this._nameOfListWithDirtyDetailView = this.listVariableName;
    this._nameOfDirtyDetailViewConrol = controlName
    break;
   }
  }
  if(!isDirty) {
   if (this._detailView.method == 'fieldMap') {
    var arr = this._detailView.fieldMap;
    var jForm = '';
    for(var i = 0; i < arr.length; i++) {
     jForm = arr[i].control.split('::')[1];
     var jObj = _dlgObj.getControl(jForm);
     if(jObj && jObj.state && jObj.state.isDirty) {
      this._nameOfListWithDirtyDetailView = this.listVariableName;
      isDirty = true;
     }
    }
   }
  }
  this._dvIsDirty = isDirty;
  if(isDirty == false && flagDrillDown) {
   var lObj = '';
   for(var i = 0; i < this.childLists.length; i++) {
    lObj = window[this._hostComponentId + '_DlgObj'].getControl(this.childLists[i]);
    if(lObj) {
     isDirty = lObj.detailViewIsDirty(flagDrillDown);
     if(isDirty) {
      this._nameOfListWithDirtyDetailView = lObj._nameOfListWithDirtyDetailView;
      $('msg1').innerHTML = this._nameOfListWithDirtyDetailView ;
     }
     if(isDirty) break;
    }
   }
  }
  if(typeof this.__detailViewWentDirtyHasFired == 'undefined') {
   if(isDirty) {
    var _dlgObj = window[this._hostComponentId + '_DlgObj'];
    _dlgObj._list_executeEvent(this.listVariableName,'detailView.onStateChanged',{isDirty:true});
    this.__detailViewWentDirtyHasFired = true
   }
  }
  return isDirty;
 }
 ,
 listIsInEditMode: function() {   var flag = false;
  var d = this._data;
  for(var i = 0; i < d.length; i++) {
   if(d[i].__edit) {
    flag = true;
    break;
   }
  }
  return flag;
 }
 ,
 listIsDirty: function() {  this.__fixData(this)
  for(var i = 0; i < this._data.length; i++) {
   if(typeof this._data[i]._isDirty != 'undefined') {
    if(this._data[i]._isDirty) {
     return true;
     }
   }
  }
  if(typeof this._editing != 'undefined') {
   if(this._editing.dirty) return true;
  }
  return false;
 }
 ,
 _parentListHasActiveRow: function() {  var pl = this.parentList;
  if(typeof pl == 'undefined') {
   return true;
  }
  var l = window[this._hostComponentId + '_DlgObj'].getControl(pl);
  if(!l) return false;
  var s = l.selection[0];
  if(typeof s == 'undefined') return false;
  return true;
 }
 ,
 newDetailViewRecord: function() {
 if(typeof this.__hasEmbeddedDetailView != 'undefined') {
  if(this.__hasEmbeddedDetailView) {
   var cont = this.__embeddedDetailView.container
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   var ele = _dlgObj.getPointer(cont)
   var pEle = $(this.contId+'.CONTENT');
   pEle.appendChild(ele)
   ele.style.display = '';
   A5.u.element.setScroll(pEle.parentNode,ele);
  }
}
  var flagParentIsDeleted = false;
  var pData = '';
  if(this.allParentLists.length > 0) {
   for(var i = 0; i < this.allParentLists.length; i++) {
    pObj = window[this._hostComponentId + '_DlgObj'].getControl(this.allParentLists[i]);
    if(typeof pObj.selection[0] != 'undefined') {
     pData = pObj.getData(pObj.selection[0]);
     if(typeof pData._isDeleted != 'undefined') {
      if(pData._isDeleted) {
       flagParentIsDeleted = true;
       break;
      }
     }
    }
   }
  }
  if(this._executeEvent('detailView.canNewRecord',{}) == false) return false;
  var val = '';
  var controlName = '';
  var defaultJS = '';
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var flagJSONForm = false;
  var flagPropertyGrid = false;
  var jfobj = {};
  if(this._JSONForm) {
   flagJSONForm = true;
  }
  if(this._propertyGrid) {
   flagPropertyGrid = true;
  }
  for(var i = 0; i < this._listFields.length; i++) {
   controlName = this._getUXDetailViewControlName(this._listFields[i].name);
   defaultJS = this._listFields[i].defaultValue;
   var flagForceSet = false;
   if(defaultJS != '') {
    var _f = Function(this._listFields[i].defaultValue);
    val = _f.call(this);
   } else {
    val = '';
   }
   jfobj[this._listFields[i].name] = val;
   var controlType = _dlgObj._getControlType(controlName).toLowerCase();
   if(controlType == 'formbox' && (typeof val == 'undefined' || val == '' ) ) val = '{}';
   if(typeof val == 'undefined') val = '';
   _dlgObj.setValue(controlName,val,false);
   var valOriginal = _dlgObj.originalValues[0][controlName.toUpperCase()];
   if(  (val == valOriginal || typeof val == 'undefined') && flagForceSet == false &&controlName != '' ) {
   } else {
   }
   if(controlType == 'signaturecapture') {
    _dlgObj._functions._toggleCanvas(controlName.toUpperCase(),'canvas');
    _dlgObj._functions._clearCanvas(controlName.toUpperCase())
   }
  }
  this._deselectAll();
  this._clearServerSideErrors();
  this._executeEvent('detailView.afterNewRecord',{});
  this._emptyAllChildLists();
  if(flagParentIsDeleted) this.disableDetailView(true);
  else this.disableDetailView(false);
  this._dvmode = 'enter';
  this._setNullMode();
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  _dlgObj._list_executeEvent(this.listVariableName,'detailView.modeChanged',{mode: 'enter'});
  _dlgObj.refreshClientSideComputations();
  this._selectedRow = -1;
  this._currentDetailViewKey = undefined;
  if(this._dataSourceType.toLowerCase() == 'transform') {
   var d = {};
   var obj = {'setFocusToTargetRow': true}
   this.addTableRow(d,obj);
  }
  if(flagJSONForm) {
   var json = JSON.stringify(jfobj);
   var fn = this._JSONFormName;
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   _dlgObj.setValue(fn,json);
   }
  if(flagPropertyGrid) {
   var d2 = {};
   d2.v = jfobj
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   var pgName = lObj._propertyGridName;
   var pObj = _dlgObj.getControl(pgName);
   if(pObj) pObj.populate(d2);
  }
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  _dlgObj.setValue(this.listVariableName,'',false);
 }
 ,
 _setNullMode: function() {
  if(typeof this._dvmode == 'undefined') return true;
  if(this._dvmode == 'enter') {
   if(typeof this._allowNullSelectionStored == 'undefined') {
    this._allowNullSelectionStored = this.allowNullSelection;
   }
   this.allowNullSelection = true;
  }
  if(this._dvmode != 'enter') {
   if(typeof this._allowNullSelectionStored != 'undefined') {
    this.allowNullSelection = this._allowNullSelectionStored;
   }
  }
 }
,
 _emptyAllChildLists: function() {   for(var i = 0; i < this.childLists.length; i++) {
   var lobj = window[this._hostComponentId + '_DlgObj'].getControl(this.childLists[i]);
   if(lobj) {
    if(lobj._emptyList) lobj._emptyList();
    window[this._hostComponentId + '_DlgObj'].setValue(lobj.listVariableName,false,false);
   }
  }
 }
 ,
 _emptyChildList: function(row) {
  var _d = this.getData(row);
  var lName = '';
  for(var name in _d) {
   if(_d[name] != null) {
    if(_d[name].constructor == Array) {
     lName = name.split('__LIST__')[1];
     if(typeof lName != 'undefined') {
      _d[name] = [];
     }
    }
   }
  }
 }
 ,
 _getUXDetailViewControlName: function(field) {  if(!this._hasDetailView) {
   return '';
  }
  if(this._detailView.method == 'fieldMap') {
   for(var i = 0; i < this._detailView.fieldMap.length; i++) {
    if(this._detailView.fieldMap[i].field == field) {
     return this._detailView.fieldMap[i].control;
    }
   }
   return '';
  } else {
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   var controlsInContainer = _dlgObj.__controlNesting[this._detailView.container];
   if(typeof controlsInContainer == 'undefined') return '';
   var indx = controlsInContainer.indexOf(field);
   if(indx == -1 ) return '';
   else return field;
  }
 }
 ,
 _showGlobalError: function(txt) {  var flagShowAlerts = this.flagShowAlerts;
  if(typeof flagShowAlerts == 'undefined') flagShowAlerts = true;
  var gph = this._hostComponentId + '.V.R1.' + this._globalErrorPlaceHolder;
  var ele = $(gph);
  if(!ele) {
   if(flagShowAlerts) alert(txt);
   return false;
  }
  var cssTxt = this._detailViewGlobalErrorStyle;
  cssTxt = cssTxt + '; display: ;'
  ele.style.cssText = cssTxt;
  ele.innerHTML = txt;
 }
 ,
 _clearGlobalError: function() {  var gph = this._hostComponentId + '.V.R1.' + this._globalErrorPlaceHolder;
  ele = $(gph);
  if(ele) {
   ele.style.display = 'none';
   ele.innerHTML = '';
  }
 }
 ,
 updateTableRow: function(primaryKeyOrRowNumber,dataObj,options) {
  var a = [];
  var fm = [];
  if(this._detailView.method == 'fieldMap') {
   fm = this._detailView.fieldMap
  }
  var getFieldFromMap = function(n) {
   if(fm.length == 0) return '';
   for(var i = 0; i < fm.length; i++) {
    if(fm[i].control == n) return fm[i].field;
   }
   return '';
  }
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  for(var n in dataObj) {
   var fn = '';
   fn = getFieldFromMap(n);
   if(fn == '') fn = n;
   a.push({control: n, field: fn,isDirty: true})
   var _id = _dlgObj.dialogId + '.V.R1.' + n.toUpperCase() + '_HIDDENA5FN';
   var ele = $(_id);
   if(ele) $sa(ele,'a5isdirty','true')
  }
  if(typeof primaryKeyOrRowNumber == undefined || primaryKeyOrRowNumber == null) {
   alert('Action cancelled because primaryKeyOrRowNumber parameter was not specified');
   return;
  }
  if(typeof options == 'undefined') options = {};
  if(typeof options.setFocusToTargetRow == 'undefined') options.setFocusToTargetRow = false;
  var obj = {};
  obj.programmatic = true;
  obj.data = {};
  $u.o.assign(obj.data,dataObj);
  obj.primaryKeyOrRowNumber = primaryKeyOrRowNumber;
  obj.setFocusToTargetRow = options.setFocusToTargetRow;
  window[this._hostComponentId + '_DlgObj']._updateListDataFromUXControls(this.listVariableName,null,obj);
  var parentListName = this.parentList;
  if(typeof parentListName != 'undefined' && parentListName != '') {
   var thisData = obj.data;
   var flagIsNewRow = false;
   if(typeof thisData._isNewRow != 'undefined') flagIsNewRow = thisData._isNewRow;
   var flagIsExistingRow = false;
   if(typeof thisData._isDirty != 'undefined') flagIsExistingRow = thisData._isDirty;
   if(flagIsNewRow || flagIsExistingRow) {
   }
   var plObj = window[this._hostComponentId + '_DlgObj'].getControl(this.parentList);
   if(plObj._setDirtyByChild) {
    plObj._setDirtyByChild(false);
   }
  }
  this.__modifyOldData(a,primaryKeyOrRowNumber);
  window[this._hostComponentId + '_DlgObj'].refreshClientSideComputations();
 }
 ,
 __setListValues: function(row, pk,pkfields, crc,linkValue, linkFieldName,fullpath) {
  var _data = this._data ;
  if(_data.length == 0) return;
  var _dr = _data[row];
  if(typeof _dr == 'undefined') return;
  for(var n in _dr) {
   if(n.indexOf('_') == 0 && n.indexOf('__LIST__') != 0) {
    delete _dr[n];
   }
  }
  _dr.__primaryKey = '' + pk;
  pkfields = pkfields.split(',')
  pk = '' + pk
  var pkval = pk.split('|||');
  for(var i = 0; i < pkfields.length ; i++) {
   _dr[pkfields[i]] = pkval[i];
  }
  _dr.__A5crc = '' + crc;
  if(typeof linkValue != 'undefined') {
   _dr[linkFieldName] = linkValue;
  }
  this.refresh();
  this.setValue(row,false);
 }
,
 __setFocusToKey: function(pk) {   var _data = this._rData;
  if(pk == 'lastrecord') {
   if(typeof _data[_data.length -1] == 'undefined') return;
   var pk2 = _data[_data.length -1].__primaryKey;
   obj.setValue(pk2,false);
  }else {
   obj.setValue(pk,false);
  }
 }
,
 __findRowNumberForKey: function(pk) {   var _data = this._rData;
  var ix = -1
  for(var i = 0; i < _data.length; i++) {
   if(_data[i].__primaryKey == pk) {
    ix = i;
    break;
   }
  }
  if(typeof _data[ix+1] == 'undefined' || typeof _data[ix+1].__primaryKey == 'undefined') return 'lastrecord';
  else return _data[ix+1].__primaryKey
  return ix;
 }
,
 deleteTableRowsBulk: function(dataArray) {   var d = this._data
  function findrow(data,pk) {
   var n = -1
   for (var i = 0; i < data.length; i++) {
    if(typeof pk == 'string') {
     if(data[i]['*value'] == pk) {
      n = i;
      break;
     }
    } else {
     n = data[i];
    }
   }
   return n;
  }
  var indx = [];
  for(var i = 0; i <dataArray.length; i++) {
   var n = -1
   if(typeof dataArray[i] == 'string') {
    n = findrow(d,dataArray[i])
   } else {
    n = i;
   }
   if(n > -1) {
    if(typeof d[n].__primaryKey != 'undefined') {
     d[n]._isDeleted = true;
     d[n].__displayStyle = 'deleteRow';
     d[n]._isDirty = true;
    } else {
     indx.push(n);
    }
   }
  }
  indx.sort(function(a,b){return a < b ? 1 : -1});
  for(var i = 0; i < indx.length; i++) {
   this._data.splice(indx[i],1)
  }
  this.refresh();
}
,
 addTableRowsBulk: function(dataArray) {
  var _str = JSON.stringify(dataArray);
  dataArray = JSON.parse(_str)
  if(this.__pkisguid) {
   if(this.__assignPKGuidClientSide) {
    var d2;
    for(var i = 0; i < dataArray.length; i++) {
     d2 = dataArray[i]
     if(typeof d2[this.__pkfieldname] == 'undefined') {
      d2[this.__pkfieldname] = A5.UUID();
      if(!this.__stripcurlyfromguid) {
       d2[this.__pkfieldname] = '{' + d2[this.__pkfieldname] + '}';
      }
     }
    }
   }
  }
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  if(typeof dataArray == 'undefined') return false;
  if(dataArray.length == 0) return false;
  var mf = this._mediaFields;
  var dirtyMediaFields = [];
  var flagHasDirtyMediaFields = false;
  if(typeof mf != 'undefined') {
   var d1 = dataArray[0];
   for(var n in d1) {
    if(mf.indexOf(n) > -1) dirtyMediaFields.push(n);
   }
  }
  if(dirtyMediaFields.length > 0) flagHasDirtyMediaFields = true;
  if(flagHasDirtyMediaFields) {
   var _dirtyImages = {};
   for(var i = 0; i < dirtyMediaFields.length; i++) {
    _dirtyImages[dirtyMediaFields[i]] = true;
   }
  }
  var _guid;
  for(var i = 0; i < dataArray.length; i++) {
   _guid = A5.UUID();
   dataArray[i]['*rowGUID'] = _guid ;
   dataArray[i]._isDirty = true;
   dataArray[i]._isNewRow = true;
   dataArray[i]._displayStyle = 'newRow';
   if(flagHasDirtyMediaFields) dataArray[i]._dirtyImages = _dirtyImages;
  }
  var allParentLists = this.allParentLists;
  var isTopParent = false;
  if(allParentLists == '') {
   isTopParent = true;
   var _d = this._data;
   this.appendRows(dataArray);
   var targetRow;
   targetRow = this._data.length-1;
   this.setValue(targetRow ,true)
   return false;
  }
  var route;
  var thisList = this;
  var topParentListName = this.listVariableName;
  var flag = true;
  while(flag) {
   if(typeof thisList.parentList == 'undefined' || thisList.parentList == '') break;
   thisList = _dlgObj.getControl(thisList.parentList);
  };
  var lObjTopParent = thisList;
  var listName = this.listVariableName;
  route = lObjTopParent._getRoute('*key',[],listName);
  if(!route) {
   alert('Cannot add rows to List becuase parent List does not have a selected row.')
   return false;
  }
  var _row = this.selection[0];
  var ra = lObjTopParent.__routeToArray(route);
  if(ra.indexOf('__LIST__' + this.listVariableName.toUpperCase()) == -1) {
   ra.push('__LIST__' + this.listVariableName.toUpperCase());
   ra.push(0);
  }
  var _d = lObjTopParent._data;
  for(var i = 0; i < ra.length-1; i++) {
   var _r = ra[i];
   if(typeof _d[_r] != 'undefined') _d = _d[_r];
  }
  _d.push.apply(_d,dataArray);
  var flag = true;
  var listPObj;
  var listCObj;
  listCObj = this;
  while(flag) {
   if(typeof listCObj.parentList == 'undefined' || listCObj.parentList == '') break;
   listPObj = _dlgObj.getControl(listCObj.parentList);
   listPObj._setDirtyByChild(false,[],listCObj.listVariableName);
   listCObj = listPObj;
  };
  listPObj = _dlgObj.getControl(this.parentList);
  listPObj._populateChildList(this.listVariableName);
 }
 ,
 addTableRow: function(dataObj,options) {  var flagRefresh = false;
  for(var n in dataObj) {
   if(A5.u.typeOf(dataObj[n]) == 'date') dataObj[n] = '' + dataObj[n];
  }
  var _str = JSON.stringify(dataObj);
  dataObj = JSON.parse(_str)
  var parentList = this.parentList;
  if(typeof parentList != 'undefined' && parentList != '') {
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   var lp = _dlgObj.getControl(parentList);
   var r = lp.selection[0];
   if(typeof r == 'undefined') {
    alert('Can not add row to list ' + this.listVariableName + ' as there is no row selected in this List\'s parent list (\''+parentList+'\')');
    return false;
   }
  }
  if(typeof options == 'undefined') {
   options = {};
  }
  if(typeof options.setFocusToTargetRow == 'undefined') options.setFocusToTargetRow = false;
  var obj = {};
  obj.programmatic = true;
  obj.data = {};
  if(this.__pkisguid) {
   if(this.__assignPKGuidClientSide) {
    if(typeof dataObj[this.__pkfieldname] == 'undefined') {
     dataObj[this.__pkfieldname] = A5.UUID();
     if(!this.__stripcurlyfromguid) {
      dataObj[this.__pkfieldname] = '{' + dataObj[this.__pkfieldname] + '}';
     }
    }
   }
  }
  $u.o.assign(obj.data,dataObj);
  obj.primaryKeyOrRowNumber = null;
  obj.setFocusToTargetRow = options.setFocusToTargetRow;
  if(typeof options.insertRow == 'undefined') options.insertRow = false;
  obj.insertRow = options.insertRow;
  obj.insertRowPosition = options.insertPosition;
  var _dlg = window[this._hostComponentId + '_DlgObj'];
  _dlg._updateListDataFromUXControls(this.listVariableName,null,obj);
  var parentListName = this.parentList;
  if(typeof parentListName != 'undefined' && parentListName != '') {
   var thisData = obj.data;
   var plObj = window[this._hostComponentId + '_DlgObj'].getControl(this.parentList);
   if(plObj._setDirtyByChild) {
    plObj._setDirtyByChild(true,thisData,this.listVariableName);
   }
  }
  if(!options.preventOnSelect) this._onSelect();
  _dlg.refreshClientSideComputations();
  return obj.data;
 }
 ,
 _setChildHasWriteConflictFlag: function() {
 var _d = this.getData(this.selection[0]);
 var flag = this._hasChildWithWriteConflict();
 _d._flagWriteConflictErrorInChild = flag;
 if(typeof _d._oldData == 'undefined') {
  var flag = this._hasChildWithDirtyData()
  _d._isDirty = flag;
 }
 this.updateRow(this.selection[0],_d);
 var parentList = this.parentList;
 if(typeof parentList != 'undefined') {
  var lObj = window[this._hostComponentId + '_DlgObj'].getControl(parentList);
  lObj._setChildHasWriteConflictFlag();
 }
 return false;
}
,
 detailViewOrChildListDetailViewIsDirty: function() {
 var flag = false;
 if(this.detailViewIsDirty() )return true;
 var lObj = '';
 var data = '';
 for (var i = 0; i < this.childLists.length; i++) {
  lObj = window[this._hostComponentId + '_DlgObj'].getControl(this.childLists[i]);
  if (lObj && lObj.detailViewIsDirty()) {
   flag = true;
   return true;
  }
 }
 return flag;
}
,
 _hasChildWithDirtyData: function() {
 var flag = false;
 var lObj = '';
 var data = '';
 for (var i = 0; i < this.childLists.length; i++) {
  lObj = window[this._hostComponentId + '_DlgObj'].getControl(this.childLists[i]);
  data = lObj.getData(lObj.selection[0]);
  if(typeof data._isDirty != 'undefined') {
   if(data._isDirty) flag = true;
  }
  if(flag == false) {
   var flag2 = lObj._hasChildWithDirtyData();
   if(flag2) flag = true;
  }
 }
 return flag;
}
,
 _hasChildWithWriteConflict: function() {
 var flag = false;
 var lObj = '';
 var data = '';
 for (var i = 0; i < this.childLists.length; i++) {
  lObj = window[this._hostComponentId + '_DlgObj'].getControl(this.childLists[i]);
  data = lObj.getData(lObj.selection[0]);
  if(typeof data._hasWriteConflictErrors != 'undefined') {
   if(data._hasWriteConflictErrors) flag = true;
  }
  if(typeof data._flagWriteConflictErrorInChild != 'undefined') {
   if(data._flagWriteConflictErrorInChild) flag = true;
  }
  if(flag == false) {
   var flag2 = lObj._hasChildWithWriteConflict();
   if(flag2) flag = true;
  }
 }
 return flag;
}
,
 _populateMyChildren: function() {
if(this.detailViewOrChildListDetailViewIsDirty() ) return false;
 for(var i = 0; i < this.childLists.length; i++) {
  var lname = this.childLists[i];
  this._populateChildList(lname);
 }
}
,
 _emptyList: function() {
 this.populate([]);
 this._currentDetailViewKey = undefined;
 this._selectedRow = -1;
 var e = $(this._hostComponentId + '.' + this.listVariableNameTrueCase + '.RECORDCOUNT');
 if(e) e.innerHTML = '0';
 this.nullOutDetailViewRecord(true);
 for(var i = 0; i < this.childLists.length; i++) {
  var lname = this.childLists[i];
  var lobj = window[this._hostComponentId + '_DlgObj'].getControl(lname);
  lobj._emptyList();
 }
}
,
 _populateChildList: function(list) {
 var alreadyCleared = arguments[1] || false;
 var flagParentIsDeleted = false;
 lChildObj = window[this._hostComponentId + '_DlgObj'].getControl(list);
 if(typeof lChildObj._parentIsDeleted != 'undefined') flagParentIsDeleted = lChildObj._parentIsDeleted;
 var _d = this.getData(this.selection[0]);
 var flagClearChildLists = false;
 if(typeof _d == 'undefined' || _d == null || this.selectionData.length == 0) {
  flagClearChildLists = true;
 }
 if(typeof _d == 'undefined') {
  flagClearChildLists = true;
 }
 if(flagClearChildLists) {
  if(! alreadyCleared) this._emptyAllChildLists();
  return false;
 }
 var childDataObjectName = this._getChildDataObjectName(list);
 var _rd = _d[childDataObjectName];
 if(_rd == null || typeof _rd == 'undefined') {
  _rd = [];
 }
 if(typeof _rd == 'undefined' || _rd.length == 0) {
  if(_d == false) _d = [];
  _d[childDataObjectName] = [];
  _rd = _d[childDataObjectName]
 }
 var lobj = window[this._hostComponentId + '_DlgObj'].getControl(list);
 if(lobj) {
  lobj.populate(_rd);
  var e = $(this._hostComponentId + '.' + lobj.listVariableNameTrueCase + '.RECORDCOUNT');
  if(e) e.innerHTML = _rd.length;
  lobj.disableDetailView(false);
  if(lobj.allowNullSelection) {
   if(lobj.nullOutDetailViewRecord) lobj.nullOutDetailViewRecord(true);
   var ac = false;
   for(var i = 0; i < lobj.childLists.length; i++) {
    var lname = lobj.childLists[i];
    if(!lobj._populateChildList(lname,ac)) {
     ac = true;
       }
   }
  }
 }
 this._currentSelection = this.selection[0];
 if(flagParentIsDeleted) lobj.disableDetailView(true);
 setTimeout(function() { if(lobj) lobj.refresh()},10);
}
,
 _setSynchProgress: function(pct) {
 var x = '';
 if(Number(pct) == 0) x = 'none';
 var eleO = $('SYNCHPROGRESS.' + this.listVariableName);
 if(eleO) eleO.style.display = '';
 var eleI = $('SYNCHPROGRESS.' + this.listVariableName + '.SLIDER');
 if(eleI) {
  eleI.style.display = x;
  eleI.style.width = '' + pct + '%';
 }
}
,
 _hideSynchProgress: function(pct) {
 var eleO = $('SYNCHPROGRESS.' + this.listVariableName);
 if(eleO) eleO.style.display = 'none';
}
,
 _cancelBatchSynchronize: function() {
 var flag = this._executeEvent('detailView.canCancelBatch',{});
 if(!flag) {
  return false;
 }
 this._flagCancelBatchSynchronize = true;
}
,
 _harvestMediaFields_low: function(arr,objListName,objState,data,options) {
 var _mediaMap = '';;
 var _mediaFields = '';
 var listName = '';
 var lObj = '';
 var flagNested = false;
 var objDirty = false;
 var fieldDirty = false;
 var lName = '';
 var flagCheck = '';
 var flagIsMediaField = false;
 var mode = options.mode;
 if(typeof mode == 'undefined') mode = '';
 var flagCapture = false;
 var flagCapture2 = false;
 var flagChildTable = false;
 for(var prop in data) {
  if(prop == '_dirtyImages' || prop == '_writeConflictErrors' || prop == '_serverSideErrors' || prop =='_globalErrorsRaw' || prop == '_globalErrors' ) continue;
  if( data[prop] != null && data[prop].constructor == Array) {
   if(data[prop].length > 0 && prop.indexOf('__LIST__') ==0) {
    objListName.push({table: prop, nested: true});
    for(var i = 0; i < data[prop].length; i++) {
     objState.push( {table: objListName[  objListName.length -1]['table'], row: i}) ;
     this._harvestMediaFields_low(arr,objListName,objState,data[prop][i],options);
     objState.pop();
    }
    objListName.pop();
   }
  } else {
   if(objListName.length == 0) {
    continue;
   }
   listName   = objListName[objListName.length -1]['table'];
   flagNested = objListName[objListName.length -1]['nested'];
   var lObj = '';
   if(listName == '_top_') {
    lObj = this;
    flagChildTable = false;
   } else {
    listName = listName.split('__LIST__')[1];
    if(typeof listName != 'undefined') {
     var _dlgObj = window[this._hostComponentId + '_DlgObj'];
     lObj = _dlgObj.getControl(listName);
     flagChildTable = true;
    }
   }
   if(lObj) {
    flagCheck = true;
    _mediaMap = lObj._mediaFields;
    flagIsMediaField = false;
    if(!options.flagDirtyOnly) {
     if(_mediaMap.indexOf(prop) > -1) flagIsMediaField = true;
     if(flagIsMediaField) {
      lName = objListName[objListName.length -1]['table'];
      if(lName == '_top_') lName = lObj.listVariableName;
      flagCapture = false;
      var _data = '';
      try{
       _data = data[prop];
       if(_data.toLowerCase().indexOf('alpha-local://jpg?url=') == 0) {
        _data = _data.split('url=')[1];
       }
      }catch(e) { }
      if(mode == '') {
       if(_data != null && _data != '' && _data.toLowerCase().indexOf('file:') != 0) flagCapture = true;
      } else if(mode == 'file') {
       if(_data != null && _data != '' && _data.toLowerCase().indexOf('file:') == 0) flagCapture = true;
      }
      if(flagCapture) {
       arr.push({
        listFieldName: prop,
        filename: _data,
        listName: lName,
        route: JSON.stringify(objState),
        flagChildTable: flagChildTable,
        listRowData: data
        });
      }
     }
    } else {
     if(flagCheck) {
      fieldDirty = false;
      if( (typeof data._dirtyImages != 'undefined') && (data._dirtyImages.constructor == Array) ) {
       objDirty = data._dirtyImages[prop];
       fieldDirty = false;
       if(typeof objDirty != 'undefined') fieldDirty = objDirty;
      } else if(data._dirtyImages == false) {
       fieldDirty = false;
      } else {
       if(data._isNewRow) {
        fieldDirty = true;
       } else {
        if(typeof data._oldData != 'undefined') {
         if(data[prop] != data._oldData[prop]) fieldDirty = true;
        }
       }
      }
      _mediaMap = lObj._mediaFields;
      if(_mediaMap.indexOf(prop) > -1) flagIsMediaField = true;
      if(flagIsMediaField) {
       var flagImageIsDirty = false;
       if(typeof data._dirtyImages != 'undefined') {
        var _isDirtyMedia = data._dirtyImages[prop];
        if(_isDirtyMedia) flagImageIsDirty = true;
       } else {
       }
      }
      flagCapture2 = false;
      if(options.flagCleanOnly) {
       if(!fieldDirty) {
        if(flagIsMediaField) flagCapture2 = true;
       }
      } else {
       if(fieldDirty) {
        if(flagIsMediaField && flagImageIsDirty ) flagCapture2 = true;
       }
      }
      var flagDeleted = false;
      if(typeof data['_isDeleted'] != 'undefined') {
       if(data['_isDeleted']) flagDeleted = true;
       flagCapture2 = false;
      }
      var _data = '';
      try{
       _data = data[prop];
       if(_data.toLowerCase().indexOf('alpha-local://jpg?url=') == 0) {
        _data = _data.split('url=')[1];
       }
      }catch(e) { }
      if( ( ( flagCapture2 ) && _data != null &&  _data.toLowerCase().indexOf('file:') == 0 && _data.toLowerCase().indexOf('null_1x1.png' ) == -1 )) {
       lName = objListName[objListName.length -1]['table'];
       if(lName == '_top_') {
        lName = lObj.listVariableName;
        flagChildTable = false;
       } else  {
        flagChildTable = true;
       }
       arr.push({
        listFieldName: prop,
        filename: _data,
        listName: lName,
        route: JSON.stringify(objState),
        flagChildTable: flagChildTable
        });
      }
     }
    }
   }
  }
 }
}
,
 _harvestMediaFields: function(arg0,rows) {
 var ops = arguments[0];
 if(typeof ops == 'undefined') ops = {};
 if (typeof window['cordova'] == 'undefined' && typeof ops.indexDB == 'undefined') return [];
 if(typeof ops.dirtyOnly == 'undefined') ops.dirtyOnly = true;
 if(typeof ops.cleanOnly == 'undefined') ops.cleanOnly = false;
 if(typeof ops.mode == 'undefined') ops.mode = '';
 var _r = ops.row;
 if(typeof _r == 'undefined') _r = -1;
 try{
  if (rows.toString().toLowerCase() == 'current') {
   _r = this.selection[0];
   _r = this._dataMap[_r];
  }
 }catch(e) {
 }
 var arr = [];
 var objListName = [];
 var objState = [];
 var flagRowIsDirty = '';
 var flagDirtyOnly = ops.dirtyOnly;
 var options = {
  flagDirtyOnly: flagDirtyOnly,
  mode: ops.mode,
  flagCleanOnly: ops.cleanOnly
 };
 var flagSingleRow = false;
 if(_r == -1 && typeof rows != 'undefined' && Array.isArray(rows)) { _r = rows[0]; _r = this._dataMap[_r];};
 if(_r == -1) {
  var _d = this._data;
 } else {
  var _d = [this._data[_r]];
  flagSingleRow = true;
 }
 var _row = '';
 objListName.push({table: '_top_', nested: false});
 for(var i = 0; i < _d.length; i++) {
  flagRowIsDirty = false;
  if(typeof _d[i]._isDirty != 'undefined') flagRowIsDirty = _d[i]._isDirty;
  if(flagRowIsDirty || !flagDirtyOnly || ops.cleanOnly ) {
   _row = i;
   if(flagSingleRow) _row = _r;
   objState.push( {table: objListName[  objListName.length -1]['table'], row: _row})
   this._harvestMediaFields_low(arr,objListName,objState,_d[i],options);
   objState.pop();
  }
 }
 if (!ops.cleanOnly) {
   this._mediaFieldsArray = arr;
 }
 return arr;
}
,
 _pushMediaFieldArrayToList: function(arr) {
 if (typeof window['cordova'] == 'undefined') return false;
 var flagUnFix = false;
 if(typeof arguments[1] != 'undefined') flagUnFix = arguments[1];
 var lObj = this;
 var _data = lObj._data;
 if(_data.length == 0) return false;
 var _di = '';
 var r = '';
 var table = '';
 for(var i = 0; i < arr.length; i++) {
  arr[i].routeObj = JSON.parse(arr[i].route);
  r = arr[i].routeObj[0].row;
  for(var j = 0; j < arr[i].routeObj.length; j ++) {
   table = arr[i].routeObj[j].table;
   r = arr[i].routeObj[j].row;
   if(table == '_top_') {
    _di = _data[r];
   } else {
    if(typeof _di[table] == 'undefined') return false;
    _di = _di[table][r];
   }
  };
  if(typeof _di == 'undefined') return false;
  _di._flagMediaFileUploadError = false;
  if(!flagUnFix) {
   if(typeof arr[i].modifiedValue != 'undefined') {
    if(arr[i].succeeded || arr[i].success) {
     _di[arr[i].listFieldName] = arr[i].modifiedValue;
    } else {
    }
   } else {
    _di._flagMediaFileUploadError = true;
   }
  } else {
   _di[arr[i].listFieldName] = arr[i].filename;
  }
 }
 var _route = lObj._getRoute();
 lObj.refresh();
 this._setRoute(_route);
 if(flagUnFix) {
  this.populateUXControls();
 }
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 if(typeof lObj.__fetchMediaMode != 'undefined') {
  _dlgObj._list_executeEvent(lObj.listVariableName,'detailView.listReadyToPersist',{listSyncMode: lObj.__fetchMediaMode });
 }
 lObj.__fetchMediaMode  = undefined;
 if(this.__flagPersist) {
  if(this.persistToStorage) { this.persistToStorage({}); }
 }
}
,
 _unFixMediaFields: function() {
 if (typeof window['cordova'] == 'undefined') return false;
 var arr = this._mediaFieldsArray;
 if(typeof arr == 'undefined') return false;
 this._pushMediaFieldArrayToList(arr,true);
 delete this._mediaFieldsArray;
}
,
 _syncMediaFiles: function(objS) {
var _batchSize = -1;
try{
 _batchSize = Number(this._phoneGap.mediaFiles.mediaFileUploadBatchSize);
}catch(e){};
this._batchSize = _batchSize
if(_batchSize == -1) {
 this._syncMediaFilesLow(objS);
 return;
}
var applyCompletedToAllList = function(all,done) {
 for(var i = 0; i < done.length; i++) {
  var index = done[i].index;
  for(var j = 0; j < all.length; j++) {
   if(all[j].index == index) {
    all[j].status = 'done';
   }
  }
 }
}
var makeWorkToDoArray = function(_list,_batchSize) {
 var w = [];
 for(var i = 0; i < _allList.length; i++) {
  if (_allList[i].status == 'none') {
   _allList[i].status = 'pending';
   w.push(_allList[i]);
   if (w.length == _batchSize) {
    break;
   }
  }
 }
 return w;
}
 if(typeof arguments[1] == 'undefined') {
  this._objS = objS
  var _list = this._mediaFiles;
  var _totalFilesToSync = _list.length;
  var _batchCount = Number(_list.length)/Number(_batchSize);
  _numberOfBatches = Math.round(_batchCount)
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var result = _dlgObj._list_executeEvent(this.listVariableName,'detailView.beforeMediaFilesUploaded',{array:_list});
  var _allList = JSON.parse(JSON.stringify(_list));
  for(var i = 0; i < _allList.length; i++) {
   _allList[i].index = i;
   _allList[i].status = 'none';
   _allList[i].batchCount = _numberOfBatches
   _allList[i].batchNumber = 1;
  }
  this._allList = _allList;
 } else {
  var _allList = this._allList;
  for(var i = 0; i < _allList.length; i++) {
   _allList[i].batchNumber = _allList[i].batchNumber + 1;
  }
  var arrayCompleted = arguments[1];
  applyCompletedToAllList(_allList, arrayCompleted);
  this._allList = _allList
  var _list = _allList;
 }
 w = makeWorkToDoArray(_list,_batchSize);
 if(w.length == 0) {
  this._list = _allList
  this._sync.array = _allList;
  this.__MediaFilesSyncOnComplete(objS);
 } else {
  this._mediaFiles = w;
  objS = this._objS
  this._syncMediaFilesLow(objS);
 }
}
,
 _syncMediaFilesLow: function(objS) {
 if (typeof window['cordova'] == 'undefined') return false;
 _batchSize = this._batchSize;
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var _list = this._mediaFiles;
 var msg = JSON.stringify(_list,'','\t');
 var _onProgressEvent = this._phoneGap.mediaFiles.onProgressEvent;
 var listName = this.listVariableName;
 var componentAlias = this._hostComponentId;
 var target = this._phoneGap.mediaFiles.target.toLowerCase();
 if(target == 's3') {
  var S3ConnectionString = this._phoneGap.mediaFiles.s3.connectionString;
 } else {
  target = 'alphaanywhere';
 }
 var targetFileNameFunction = this._phoneGap.mediaFiles.targetFilenameFunction;
 var protectedRead = this._phoneGap.mediaFiles.protectedRead;
 var fileNameTemplate = this._phoneGap.mediaFiles.template;
 var instanceId = A5.ts();
 if(typeof device != 'undefined') {
  if(typeof device.uuid != 'undefined') instanceId = device.uuid;
 }
 targetFileNameFunction = targetFileNameFunction.replace('<DeviceId>',instanceId);
 var showProgress = this._phoneGap.mediaFiles.showProgress;
 var onErrorFunction = this._phoneGap.mediaFiles.onErrorFunction;
 var pColor = '';
 var pElement = '';
 var pWidth = '';
 if(showProgress) {
  pColor = this._phoneGap.mediaFiles.progress.color;
  pElement = this._phoneGap.mediaFiles.progress.element;
  pWidth = this._phoneGap.mediaFiles.progress.width;
 }
 var arr = _list;
 var s3Obj = {};
 var aaObj = {}
 if(target == 's3') {
  s3Obj.connectionString = S3ConnectionString;
  s3Obj.protectedRead = protectedRead;
 } else {
 }
 var that = this;
 var options = {
  specialMode: 'detailViewMediaUpload',
  target: target,
  listName: listName,
  componentAlias: componentAlias,
  AAServerOptions: aaObj,
  s3: s3Obj,
  showProgress: showProgress,
  onComputeS3Filename: Function('e',targetFileNameFunction),
  fileNameTemplate: fileNameTemplate,
  onProgressEvent: _onProgressEvent,
  onComplete: function(array) {
   that._sync = {};
    that._sync.array = array;
    that._sync.target = target;
    that._sync.listName = listName;
    that._sync.componentAlias = componentAlias;
    that._sync.options = options;
    that._sync.objS = objS;
   if(that._batchSize == -1) {
    that.__MediaFilesSyncOnComplete(array, target,listName,  componentAlias, options, objS)
   } else {
    array  = that._sync.array;
    target = that._sync.target;
    listName = that._sync.listName
    componentAlias = that._sync.componentAlias
    options = that._sync.options
    objS = that._sync.objS;
    that.__MediaFilesSyncOnCompleteBatch(array, target,listName,  componentAlias, options, objS)
   }
  },
  progress: {
   color: pColor,
   width: pWidth,
   individualProgress: false,
   showTotalProgress: true,
   allowCancel: false,
   progressElement: pElement
  },
  onError : onErrorFunction
 }
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 if(Number(that._batchSize) == -1) {
  var result = _dlgObj._list_executeEvent(listName,'detailView.beforeMediaFilesUploaded',{array:arr});
 } else {
  var result = _dlgObj._list_executeEvent(listName,'detailView.beforeMediaFilesBatchUploaded',{array:arr, batchNumber: arr[0].batchNumber,batchCount: arr[0].batchCount });
 }
 if(!result) return false;
 _dlgObj.phoneGapFileUpload(arr,options);
}
,
 __MediaFilesSyncOnCompleteBatch: function(array, target, listName, componentAlias, options, objS) {
var _dlgObj = window[options.componentAlias + '_DlgObj'];
 _dlgObj._list_executeEvent(listName,'detailView.afterMediaFilesBatchUploaded',{array:array, batchNumber: array[0].batchNumber,batchCount: array[0].batchCount });
 this._syncMediaFiles(objS,array);
}
,
 __MediaFilesSyncOnComplete: function(array, target, listName, componentAlias, options, objS) {
 options = this._sync.options
 array  = this._sync.array;
 target = this._sync.target;
 listName = this._sync.listName
 componentAlias = this._sync.componentAlias
 options = this._sync.options
 objS = this._sync.objS;
 var that = this;
  if(target == 'alphaanywhere') {
  } else {
   var fileNameTemplate = this.fileNameTemplate;
   var _dlgObj = window[that._hostComponentId + '_DlgObj'];
   if(typeof _dlgObj._pgS3.urlTemplate != 'undefined') fileNameTemplate = _dlgObj._pgS3.urlTemplate;
    var mVal = '';
    for(var i = 0; i < array.length; i++) {
     mVal = fileNameTemplate.replace('__name__',array[i].targetName);
     array[i].modifiedValue = mVal;
    }
   }
   var _dlgObj = window[componentAlias + '_DlgObj'];
   var lObj = _dlgObj.getControl(listName);
   var _dlgObj = window[options.componentAlias + '_DlgObj'];
   _dlgObj._list_executeEvent(listName,'detailView.afterMediaFilesUploaded',{array:array});
   for(var i = 0; i < array.length; i++) {
    array[i].routeObj = JSON.parse(array[i].route);
   }
   var rowsWithMediaUploadErrors = [];
   var _rn;
   for(var i = 0; i < array.length; i++) {
    if(!array[i].succeeded) {
     _rn = array[i].routeObj[0].row;
     if(rowsWithMediaUploadErrors.indexOf(_rn) == -1) {
      rowsWithMediaUploadErrors.push(array[i].routeObj[0].row)
     }
    }
   }
   var topParentRow;
   for(var i = 0; i < array.length; i++) {
    topParentRow = array[i].routeObj[0].row;
    if( rowsWithMediaUploadErrors.indexOf(topParentRow) > -1) {
     array[i].succeeded = false;
    }
   }
   lObj._pushMediaFieldArrayToList(array);
   var countSucceeded = 0;
   for(var i = 0; i < array.length; i++) {
    if(array[i].succeeded) countSucceeded = countSucceeded + 1;
   }
   var errorCount = 0;
   if(countSucceeded < array.length) {
    errorCount = array.length - countSucceeded;
    if(typeof errorCount != 'undefined') {
     _dlgObj._list_executeEvent(listName,'detailView.onMediaFilesUploadErrors',{array:array, errorCount: errorCount, rowsWithMediFileUploadErrors: rowsWithMediaUploadErrors});
    }
     return;
   }
   if(typeof objS.other.chunked == 'object') flagChunked = objS.other.chunked.allow
   else if(typeof flagChunked == 'undefined') flagChunked = false;
   var _rows = 'allRows';
   if(typeof objS.rows != 'undefined') _rows = objS.rows
   _dlgObj.saveListEdits(options.listName,
   {
    rows: _rows,
    chunked: {allow: flagChunked},
    checkForMediaFiles: false,
    fixMediaFileReferences: true,
    resetMediaFileUploadErrors: false,
    rowsWithMediaUploadErrors: rowsWithMediaUploadErrors,
    ajax: objS.ajax
   });
}
,
 _fetchMediaFiles1: function() { this._fetchMediaFiles() },
 _fetchMediaFiles: function() {
 if(typeof cordova == 'undefined') {
  if(typeof this._afterSynchronizeData != 'undefined') {
   var _obj = this._afterSynchronizeData;
   var _dlgObj = window[this._hostComponentId + '_DlgObj'];
   _dlgObj._list_executeEvent(this.listVariableName,'detailView.afterSynchronizeListCompleted',_obj);
   delete this._afterSynchronizeData;
  }
  return false;
 }
 var _arg0 = arguments[0];
 var _arg1 = arguments[1];
 var that = this;
 var flagFetchMediaFiles = false;
 if(typeof this._phoneGap != 'undefined') {
  if(typeof this._phoneGap.mediaFiles != 'undefined') {
   if(typeof this._phoneGap.mediaFiles.download != 'undefined') {
    if(typeof this._phoneGap.mediaFiles.download.autodownloadFilesOnPullSynch != 'undefined') {
     flagFetchMediaFiles = this._phoneGap.mediaFiles.download.autodownloadFilesOnPullSynch;
    }
   }
  }
 }
 if(!flagFetchMediaFiles) return false;
 flagIgnoreMediaFieldsInWWW = false;
 if(typeof this._ignoreMediaFieldsInWWWSubFolder != 'undefined') flagIgnoreMediaFieldsInWWW = this._ignoreMediaFieldsInWWWSubFolder;
 if(flagIgnoreMediaFieldsInWWW && typeof this._mediaFilesInWWW == 'undefined' ) {
  var _dlgObj = window[this._hostComponentId + '_DlgObj'];
  var _onCompletion = function(filelist) {
   that._mediaFilesInWWW = filelist;
   that._fetchMediaFiles_low(_arg0,_arg1);
  };
  var _error = function(e) { that._fetchMediaFiles_low(_arg0,_arg1); };
  var _baseURI = cordova.file.applicationDirectory;
  var _dirName = 'www/' + this._mediaFieldFolderInWWW
  var _matchRegex = '';
  var _dirPath = _baseURI + _dirName;
  _dlgObj.phoneGapListFilesURL(_dirPath,_matchRegex, _onCompletion, _error);
 } else {
 ;
  this._fetchMediaFiles_low(_arg0,_arg1);
 }
}
,
 _fetchMediaFiles_low: function() {
 if(A5.log) A5.log('About to fetch media files');
 var __persistWhere = this.__persistWhere;
 if(typeof __persistWhere == 'undefined') __persistWhere = '';
 if (typeof window['cordova'] == 'undefined') return false;
 if (typeof this._mediaFields == 'undefined') return false;
 var _route = arguments[1];
 if(typeof _route == 'undefined') _route = false;
 var _r = arguments[0];
 if(typeof  _r == 'undefined') _r = -1;
 var flagFetchMediaFiles = false;
 if(typeof this._phoneGap != 'undefined') {
  if(typeof this._phoneGap.mediaFiles != 'undefined') {
   if(typeof this._phoneGap.mediaFiles.download != 'undefined') {
    if(typeof this._phoneGap.mediaFiles.download.autodownloadFilesOnPullSynch != 'undefined') {
     flagFetchMediaFiles = this._phoneGap.mediaFiles.download.autodownloadFilesOnPullSynch;
    }
   }
  }
 }
 if(!flagFetchMediaFiles) return false;
 var folder = this._phoneGap.mediaFiles.download.targetFolder;
 if(folder == '') {
  alert('You have not specified the file download settings in the List builder. Edit the settings for List '+this.listVariableName+' and go to \'Detail View\' pane, \'PhoneGap Properties\'.');
  return false;
 }
 if(typeof folder == 'function') {
   folder = folder.call();
 }
 this._flagFetchMediaHasRun = true;
 folder = folder + '/' + this.listVariableName;
 var listName = this.listVariableName;
 var showProgress = this._phoneGap.mediaFiles.download.showProgress;
 var fileSystemPart = 'persistent';
 if(typeof this._phoneGap.mediaFiles.download.targetFileSystem != 'undefined') {
  fileSystemPart = this._phoneGap.mediaFiles.download.targetFileSystem;
  if(typeof fileSystemPart == 'function') {
   fileSystemPart = fileSystemPart.call();
  }
 }
 var pColor = '';
 var pElement = '';
 var pWidth = '';
 if(showProgress) {
  pColor = this._phoneGap.mediaFiles.download.progress.color;
  pElement = this._phoneGap.mediaFiles.download.progress.element;
  pWidth = this._phoneGap.mediaFiles.download.progress.width;
 }
 var flagDeleteOrphans = false;
 if(typeof this._phoneGap.mediaFiles.download.deleteOrphansAfterSync != 'undefined') flagDeleteOrphans =this._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
 var arr = this._harvestMediaFields({dirtyOnly: false, row: _r});
 if(flagDeleteOrphans) {
  this.__harvestedMediaFields = arr;
 }
 if(A5.log) A5.log('Harvest media files has run.');
 if(A5.log) A5.log('Harvested media files (that must be downloaded): ' + JSON.stringify(arr,'','\t'));
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 if(A5.log) A5.log('Fire beforeMediaFilesDownload event');
 if(arr.length == 0) {
  _dlgObj._list_executeEvent(listName,'detailView.onNoMediaFilesToFetch',{});
  var that = this;
  setTimeout(function() {
  },0)
  if(typeof this._afterSynchronizeData != 'undefined') {
   var _obj = this._afterSynchronizeData;
    _dlgObj._list_executeEvent(this.listVariableName,'detailView.afterSynchronizeListCompleted',_obj);
   delete this._afterSynchronizeData;
  }
  if(typeof this.__fetchMediaMode != 'undefined') {
   _dlgObj._list_executeEvent(this.listVariableName,'detailView.listReadyToPersist',{listSyncMode: this.__fetchMediaMode });
  }
  this.__fetchMediaMode  = undefined;
  return true;
 }
 flagIgnoreMediaFieldsInWWW = false;
 if(typeof this._ignoreMediaFieldsInWWWSubFolder != 'undefined') flagIgnoreMediaFieldsInWWW = this._ignoreMediaFieldsInWWWSubFolder;
 if(flagIgnoreMediaFieldsInWWW) {
  var _skip = this._mediaFilesInWWW;
  var _folder = this._mediaFieldFolderInWWW;
  _folder = $u.s.rTrim(_folder,'/');
  for(var i9 = 0; i9 < _skip.length; i9++) {
   if(_skip[i9].indexOf(_folder) == -1) _skip[i9] = _folder + '/' +  _skip[i9]
  }
  var skipCount = 0;
  for(var i = 0; i < arr.length; i++) {
   arr[i].skip = false;
   if(_skip.indexOf(arr[i].filename) > -1) {
    skipCount++
    arr[i].skip = true;
   }
  }
  for(var i = arr.length-1; i >= 0; i--) {
   if(arr[i].skip) arr.splice(i,1);
  }
 }
 var _onSuccess = function(arr2, obj, arrfound) {
  var result = _dlgObj._list_executeEvent(listName,'detailView.beforeMediaFilesDownloaded',{array:arr2, originalArray:arr});
  if(!result) {
   _dlgObj._list_executeEvent(listName,'detailView.afterMediaFilesDownloaded',{array:arr2, aborted: true, originalArray: arr});
   return false;
  }
  obj._fetchMediaFiles_lowWork(arr2,_route,folder, arrfound);
 };
 this._getPreviouslyDownloadedFiles(fileSystemPart,folder,arr,_onSuccess);
}
,
 _getPreviouslyDownloadedFiles: function(fileSystemPart,folder,arr,_onSuccess) {
 var obj = this;
 var _onSuccess2 = function(filelist) {
  var fnshort;
  var ix;
  var arr2 = [];
  var arrfound = [];
  for(var i = 0; i < arr.length; i++) {
   fnshort = A5.parseFilename(arr[i].filename).name
   fnshort = decodeURIComponent(fnshort)
   ix = filelist.indexOf(fnshort);
   if(ix == -1) {
    arr2.push(arr[i]);
   } else {
    arr[i].modifiedValue = _dirPath + '/' + fnshort;
    arr[i].success = true;
    arrfound.push(arr[i]);
   }
  }
  _onSuccess.call(obj,arr2, obj,arrfound);
 };
 var _error2 = function(e) {
  _onSuccess.call(obj,arr,obj)
  };
 var _baseURI = DLG1_DlgObj.phoneGapGetLocalDirURL(fileSystemPart);;
 var _dirName = folder + '/';;
 var _dirPath = _baseURI + _dirName;
 DLG1_DlgObj.phoneGapListFilesRecurseURL(_dirPath, _onSuccess2, _error2);
}
,
 _fetchMediaFiles_lowWork: function(arr,_route,folder, arrfound) {
 if(typeof arrfound != 'undefined' && arrfound.length > 0) {
  var lObj = this;
  lObj._pushMediaFieldArrayToList(arrfound);
 } else {
 }
 var showProgress = this._phoneGap.mediaFiles.download.showProgress;
 var fileSystemPart = 'persistent';
 if(typeof this._phoneGap.mediaFiles.download.targetFileSystem != 'undefined') {
  fileSystemPart = this._phoneGap.mediaFiles.download.targetFileSystem;
  if(typeof fileSystemPart == 'function') {
   fileSystemPart = fileSystemPart.call();
  }
 }
 var pColor = '';
 var pElement = '';
 var pWidth = '';
 if(showProgress) {
  pColor = this._phoneGap.mediaFiles.download.progress.color;
  pElement = this._phoneGap.mediaFiles.download.progress.element;
  pWidth = this._phoneGap.mediaFiles.download.progress.width;
 }
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var listName = this.listVariableName;
 var flagDeleteOrphans = false;
 if(typeof this._phoneGap.mediaFiles.download.deleteOrphansAfterSync != 'undefined') flagDeleteOrphans =this._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
 if(arr.length > 0 ) {
  var lObj = this;
  var _dlgObj = _dlgObj;
  var that = this;
  var options = {
   showProgress: showProgress,
   directory: folder,
   strip: true,
   filesystem: fileSystemPart,
   onComplete: function(array) {
    var arr = [];
    var _d = lObj._data;
    for(var i = 0; i < array.length; i++) {
     if(array[i].success) {
      array[i].modifiedValue = array[i].localFilename;
     } else {
      array[i].modifiedValue = array[i].filename;
     }
    }
    if(A5.log) A5.log('File download complete.');
    if(A5.log) A5.log('Downloaded files: ' + JSON.stringify(array,'','\t'));
    if(A5.log) A5.log('Fire afterMediaFilesDownloaded event.');
    var result = _dlgObj._list_executeEvent(listName,'detailView.afterMediaFilesDownloaded',{array:array, aborted: false});
    if(typeof that._afterSynchronizeData != 'undefined') {
     var _obj = that._afterSynchronizeData;
      _dlgObj._list_executeEvent(that.listVariableName,'detailView.afterSynchronizeListCompleted',_obj);
     delete that._afterSynchronizeData;
    }
    if(!result) return false;
    if(A5.log) A5.log('Push translated media filenames to array.');
    lObj._pushMediaFieldArrayToList(array);
    if(flagDeleteOrphans) {
     if(A5.log) A5.log('Delete orphan media files.');
     that._deleteOrphanMediaFiles()
    }
    if(A5.log) A5.log('Populate DetailView Controls.');
    that.populateUXControls();
    var r = that._getRoute()
    that._populateAllChildLists();
    that._setRoute(r);
    if(_route) {
     that._setRoute(_route);
     that.populateUXControls();
     that._setRoute(_route);
     that._populateAllChildLists();
     that._setRoute(_route);
    }
   },
   onProgressEvent: this._phoneGap.mediaFiles.download.onProgressEvent,
   progress: {
    color: pColor,
    width: pWidth,
    allowCancel: false,
    progressElement: pElement
   }
  }
  _dlgObj.phoneGapFileDownload(arr,options);
 } else {
  if(A5.log) A5.log('No media files to download - execute afterMediaFilesDownloaded.');
   _dlgObj._list_executeEvent(listName,'detailView.onNoMediaFilesToFetch',{});
  if(typeof this._afterSynchronizeData != 'undefined') {
   var _obj = this._afterSynchronizeData;
    _dlgObj._list_executeEvent(this.listVariableName,'detailView.afterSynchronizeListCompleted',_obj);
   delete this._afterSynchronizeData;
  }
 }
}
,
 resolveFieldConflict: function(route,fieldName,oldValueCurrent,newValueMine) {
 var _d = this._getDataFromRoute(route);
 var _routeCapture = this._getRoute();
 if(!_d) return false;
 if(typeof _d[fieldName] == 'undefined') return false;
 if(typeof _d['_oldData'] == 'undefined') return false;
 _d['_oldData'][fieldName] = oldValueCurrent;
 if(typeof newValueMine != 'undefined') {
  _d[fieldName] = newValueMine;
 } else {
  _d[fieldName] = oldValueCurrent;
 }
 if(typeof _d['_writeConflictErrors'] != 'undefined') {
  var _wce = _d['_writeConflictErrors'];
  for(var i = 0; i < _wce.length; i++)  {
   if(_wce[i].fieldName == fieldName) {
    _wce.splice(i,1);
   }
  }
  if(_wce.length == 0) {
   _d['_hasWriteConflictErrors'] = false;
   _d['_writeConflictErrors'] = false;
  }
 }
 var flagClean = true;
 for(var n in _d['_oldData']) {
  if(_d['_oldData'][n] != _d[n]) {
   flagClean = false;
   break;
  }
 }
 if(flagClean) {
  delete _d['_oldData'];
  delete _d.__displayStyle;
  _d._isDirty = false;
  var flagLoop = true;
  while(flagLoop) {
   route.pop();
   route.pop();
   if(route.length == 0) {
    break;
   };
   var _dp = this._getDataFromRoute(route);
   if(typeof _dp['_oldData'] == 'undefined') {
    _dp._isDirty = false;
    delete _dp.__displayStyle;
   }
  }
  this._refreshListRecursive();
 }
}
,
 _refreshListRecursive: function() {
 this.refresh();
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var lObj = '';
 for(var i = 0; i < this.childLists.length; i++) {
  lObj = _dlgObj.getControl(this.childLists[i]);
  if(lObj) lObj._refreshListRecursive();
 }
}
,
 _getOrphanFiles: function(cb) {
 var obj = this;
 var rows = 'all';
 var arr = obj._harvestMediaFields({cleanOnly: true},rows);
 var referencedCleanMediaFiles = [];
 for(var i = 0; i < arr.length; i++) {
  var fi = arr[i].filename
  fi = fi.split('//');
  fi = fi.join('/');
  referencedCleanMediaFiles.push(fi)
 }
 alert('outside the cb. referencedCleanMediaFiles.length: ' + referencedCleanMediaFiles.length)
 var cb = function() {
  alert('files in download folder: ' + arr.length);
  var rows = 'all';
  alert('obj: ' + obj);
  var arrX = obj._harvestMediaFields({cleanOnly: true},rows);
  alert('arrx' + arrX.length);
  var referencedCleanMediaFiles = [];
  for(var i = 0; i < arrX.length; i++) {
   var fi = arrX[i].filename
   fi = fi.split('//');
   fi = fi.join('/');
   referencedCleanMediaFiles.push(fi)
  }
  alert('referenced files length: ' + referencedCleanMediaFiles.length)
 }
 this._getMediaFilesInDownloadFolder(cb);
}
,
 _getMediaFilesInDownloadFolder: function(cb) {
 var obj = this;
 var listName = obj.listVariableName;
 var flag = obj._phoneGap.mediaFiles.download.autodownloadFilesOnPullSynch
 var fs = obj._phoneGap.mediaFiles.download.targetFileSystem
 var folder = obj._phoneGap.mediaFiles.download.targetFolder
 var _onCompletion = function(filelist) {
  var f2 = [];
  for(var i = 0; i < filelist.length; i++) {
   var fi = filelist[i];
   if(fi[fi.length-1] != '/') f2.push(fi)
  }
  filelist = f2;
  for(var i = 0; i <filelist.length; i++) {
   filelist[i] = _dirPath + filelist[i];
  }
  if(typeof cb == 'function') cb.call(this,filelist);
 };
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var _error = function(e) { alert('error');};
 var _baseURI = _dlgObj.phoneGapGetLocalDirURL(fs);;
 var _dirName = folder +'/' + listName + '/';;
 var _dirPath = _baseURI + _dirName;
 _dlgObj.phoneGapListFilesRecurseURL(_dirPath, _onCompletion, _error);
}
,
 _deleteOrphanMediaFiles: function() {
 obj = this;
 try{
  flagDeleteOrphans = obj._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
 }catch(e) {
  var flagDeleteOrphans = false;
 }
 if(flagDeleteOrphans == false) return;
 this._deleteOrphanMediaFiles_low()
}
,
 _deleteOrphanMediaFilesOLD: function() {
 var lTemp = this._getTopParentListObject();
 var persistLocation = '';
 if(lTemp.__flagPersist) {
  persistLocation = lTemp.__persistWhere;
 };
 if(persistLocation.toLowerCase() == 'indexdb') {
  this._deleteOrphanIndexDBImages(true);
  return;
 }
 var flagDownloadMediaFiles = false;
 if(typeof this._phoneGap.mediaFiles.download.autodownloadFilesOnPullSynch != 'undefined') flagDownloadMediaFiles =this._phoneGap.mediaFiles.download.autodownloadFilesOnPullSynch;
 if(flagDownloadMediaFiles == false) return false;
 var flagDeleteOrphans = false;
 if(typeof this._phoneGap.mediaFiles.download.deleteOrphansAfterSync != 'undefined') flagDeleteOrphans =this._phoneGap.mediaFiles.download.deleteOrphansAfterSync;
 if(flagDeleteOrphans == false) return false;
 if (typeof window['cordova'] == 'undefined') return false;
 var folder = this._phoneGap.mediaFiles.download.targetFolder;
 if(folder == '') {
  alert('You have not specified the file download settings in the List builder. Edit the settings for List '+this.listVariableName+' and go to \'Detail View\' pane, \'PhoneGap Properties\'.');
  return false;
 }
 if(typeof folder == 'function') {
   folder = folder.call();
 }
 if(typeof this._flagFetchMediaHasRun == 'undefined' || this._flagFetchMediaHasRun == false ) {
  alert('Sync media files method has not yet been run');
  return false;
 }
 if(folder.substring(0,1) == '/') folder = folder.substring(1);
 if(folder.substr( folder.length -1,1) == '/') {
  folder = folder.substring(0,folder.length -1);
 }
 folder = folder + '/' + this.listVariableName;
 var that = this;
 var listName = this.listVariableName;
 var _dlgObj = window[this._hostComponentId + '_DlgObj'];
 var fileSystemPart = 'persistent';
 var folder = this._phoneGap.mediaFiles.download.targetFolder;
 if(typeof folder == 'function') {
  folder = folder.call();
 }
 folder = folder + '/' + this.listVariableName.toUpperCase();
 if(typeof this._phoneGap.mediaFiles.download.targetFileSystem != 'undefined') {
  fileSystemPart = this._phoneGap.mediaFiles.download.targetFileSystem;
 }
 if(typeof this._phoneGap.mediaFiles.download.targetFileSystem != 'undefined') {
  fileSystemPart = this._phoneGap.mediaFiles.download.targetFileSystem;
  if(typeof fileSystemPart == 'function') {
   fileSystemPart = fileSystemPart.call();
  }
 }
 var that = this;
 _onSuccessGotFiles = function(fileList) {
  alert('_onsuccessgotfiles inside delete orphans: ' + fileList.length + ' harvestMediaFields: ' + arr.length);
  var arr = lObj._harvestMediaFields({},'all');
  alert(arr.length);
  var arr2 = that.__harvestedMediaFields;
  that.__harvestedMediaFields = false;
  arr = arr2
  var fnshort;
  var fd = [];
  for(var i = 0; i < arr.length; i++) {
   fnshort = A5.parseFilename(arr[i].filename).name
   fnshort = decodeURIComponent(fnshort)
   if (fileList.indexOf(fnshort) == -1 ) {
    fd.push(arr[i].localFilename);
   }
  }
  if(fd.length == 0) {
   _dlgObj._list_executeEvent(listName,'detailView.afterDeleteOrphanMediaFiles',{array:fd});
   return false;
  }
  alert('orphans to delete: ' + fd.length);
  var result = _dlgObj._list_executeEvent(listName,'detailView.beforeDeleteOrphanMediaFiles',{array:fd});
  if(!result) return false;
  var countDeleted = 0;
  var _onDeleteSuccess = function() {
   countDeleted++
   if(countDeleted == fd.length) {
    _dlgObj._list_executeEvent(listName,'detailView.afterDeleteOrphanMediaFiles',{array:fd});
   }
  }
  var _error = function(e) {
   countDeleted++
  }
  alert('count files to delete: ' + fd.length);
  if(fd.length == 0) {
   _dlgObj._list_executeEvent(listName,'detailView.afterDeleteOrphanMediaFiles',{array:fd});
  } else {
   for(var i = 0; i < fd.length; i++) {
    _dlgObj.phoneGapDeleteFileURL(fd[i], _onDeleteSuccess,_error);
   }
  }
  return false;
 }
 _onErrorCouldNotGetFiles = function(e) {
  alert('error::::: could not get files') ;
  return true;
 };
 var _baseURI = _dlgObj.phoneGapGetLocalDirURL(fileSystemPart);;
 var _dirName = folder + '/';
 var _dirPath = _baseURI + _dirName;
 _dlgObj.phoneGapListFilesRecurseURL(_dirPath, _onSuccessGotFiles, _onErrorCouldNotGetFiles);
}
}
)
//End section - Add methods to List prototype
var ele = DLG1_DlgObj.getPointer('PLACEHOLDER_PROGRESS');
ele.innerHTML = '<div id="SYNCHPROGRESS.LSTVISITHEAD" style="display: none ; width: 100%; " class="A5CWLayout">\n\t<div style="display:table;width: 100%; table-layout:fixed;">\n\t\t<div style="display:table-row;">\n\t\t\t<div style="display:table-cell; vertical-align:middle;" id="SYNCHPROGRESS.LSTVISITHEAD.OUTER"  class="Alpha-MagentaSliderH" a5hasdrag="true">\n\t\t\t\t<div id="DLG1.V.R1.SLIDERONE.CONTROL.SLIDER" class="Alpha-MagentaSliderHInner Alpha-MagentaSliderInner" style="position: relative;" a5abstevntd="true" a5abstevntg="true">\n\t\t\t\t\t<div id="SYNCHPROGRESS.LSTVISITHEAD.SLIDER"  class="Alpha-MagentaSliderHRange Alpha-MagentaSliderRange" style="display: none; position: absolute; width: 50%;"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\n\t\t\t\n\t\t\t\n\t\t</div>\n\t</div>\n</div>\n\n<div style="font: 0pt arial;clear:both;"></div>\n';
DLG1_DlgObj._getInstanceId();
$e.add(window.applicationCache,'error',function(e) { DLG1_DlgObj._executeEvent('appCache_error',{event: e});     } );
$e.add(window.applicationCache,'progress',function(e) { DLG1_DlgObj._executeEvent('appCache_progress',{event: e});     } );
$e.add(window.applicationCache,'updateready',function(e) { DLG1_DlgObj._executeEvent('appCache_updateready',{event: e});     } );
DLG1_DlgObj._listControls = ['LIST2','LSTROUTES','LSTOFFROUTE','LSTVISITHEAD','LSTDISCUSSED','LSTSAMPLES','lstorders','lstinvoices','LSTRECEIPT','LSTUNPAIDINV','LSTVISITNOTES','lstMedialFiles','LSTBASKETH','LSTBASKETDET','LSTITEMS','LSTVACATION','LSTPOI','LSTDEALS','lstgeoloc']
DLG1_DlgObj._formBoxControls = [];
DLG1_DlgObj._localStorageSettings = {namespace: 'ALPHA_mrep',friendlyName: 'mrep',description: 'mrep',persistVariableValues: true,__version: 0,persistComponentState: false,workingPreviewTestingFolder: 'c:\\pcs',restore: {variables: true,data: true,state: false},compressData: false,minify: false,variablesToNotPersist: 'DATE,CHANGEPASS,SYNCINPROGRESS',workingPreviewTestingMode: 'Filesystem',compressListData: false}
;
DLG1_DlgObj._securityAction = 'event'
DLG1_DlgObj.__r = [];
navigator.geolocation.getAccuratePosition = function(geolocationSuccess, geolocationError, options) {
 var _lastCheckedPosition = null;
 var _locationEventCount = 0;
 options = options || {};
 options.context = this;
    function _checkLocation(pos) {
        _lastCheckedPosition = pos;
        _locationEventCount++;
        if ((pos.coords.accuracy <= options.desiredAccuracy) && (_locationEventCount > options.ignoreResultCount)) {
            clearTimeout(_timerID);
            navigator.geolocation.clearWatch(_watchID);
            _foundPosition(pos);
        }
    }
    function _stopLocationCheck() {
      var error = {};
      error.code = 0;
      error.message = 'Timeout: No results';
        navigator.geolocation.clearWatch(_watchID);
        _lastCheckedPosition ? _foundPosition(_lastCheckedPosition) : geolocationError.call(options.context,error);
    }
    function _onError(error) {
        clearTimeout(_timerID);
        navigator.geolocation.clearWatch(_watchID);
        geolocationError.call(options.context,error);
    }
    function _foundPosition(pos) {
        geolocationSuccess.call(options.context,pos);
    }
    if (!options.maxWait) {
     options.maxWait = 10000;
    }
    if (!options.desiredAccuracy) {
       options.desiredAccuracy = 20;
    }
    if (!options.timeout) {
        options.timeout = options.maxWait;
  }
  if (!options.ignoreResultCount) {
    options.ignoreResultCount = 1;
  }
    options.maximumAge = 0;
    options.enableHighAccuracy = true;
    var _watchID = navigator.geolocation.watchPosition(_checkLocation, _onError, options);
    var _timerID = setTimeout(_stopLocationCheck, options.maxWait);
}
DLG1_DlgObj.__flagIsStaticHTML = true; DLG1_DlgObj._staticHTMLMode = true;  DLG1_DlgObj._embeddedMode = false;
DLG1_DlgObj._EDITOR_EDITORSET = {};
DLG1_DlgObj.styleName = 'Alpha-Magenta';
DLG1_DlgObj.styleVersion = 4
DLG1_DlgObj.framesInfo = {
};
DLG1_DlgObj._beforePrepare = function(e) { if(typeof DLG1_DlgObj._dataCache == 'undefined') {DLG1_DlgObj._dataCache = {};};
DLG1_DlgObj._dataCache = {
	'items' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'discussedtypes' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'medreps' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'currencies' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'paytypes' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'medias' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'listofinvoices' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'visitobj' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'visittypedata' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'supervisors' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'prices' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'invoices' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'paimode' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'deliverymode' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'skipreasons' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'itemgroups' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'itemsubgroup' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	},
	'itemunits' : {
		delayed: true,
		persisted: false,
		persistWhere: 'IndexedDB',
		persist: true,
		hasError: false,
		data:  null 
	}
};if(DLG1_DlgObj.styleVersion < 3) {
	A5.themes.add('Alpha-Magenta', {edit: {base: { className: 'Alpha-MagentaEdit', errorClassName: 'Alpha-MagentaEditError', watermark: {className: 'Alpha-MagentaEditWatermark'}}}});
}
};
DLG1_DlgObj._noPersist = ['DATE','CHANGEPASS','SYNCINPROGRESS']
DLG1_DlgObj.dialogWatches['CONTROLBAR_17_SAVE_LSTRECEIPT_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return !((dialog.listDetailView.LSTRECEIPT.isDirty == true) && (dialog.listDetailView.LSTRECEIPT.mode != 'search'));}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_17');
cb.update('Save_LSTRECEIPT_disabled',val,false,true,true);
}
};DLG1_DlgObj.dialogWatches['CONTROLBAR_17_NEWRECORD_LSTRECEIPT_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return !((dialog.listDetailView.LSTRECEIPT.isDirty == false)  && (dialog.listDetailView.LSTRECEIPT.mode != 'search'));}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_17');
cb.update('NewRecord_LSTRECEIPT_disabled',val,false,true,true);
}
};DLG1_DlgObj.dialogWatches['CONTROLBAR_17_DELETERECORD_LSTRECEIPT_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return !((dialog.listDetailView.LSTRECEIPT.mode != 'search') && (dialog.listRow.LSTRECEIPT.isRowSelected == true));}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_17');
cb.update('DeleteRecord_LSTRECEIPT_disabled',val,false,true,true);
}
};DLG1_DlgObj.dialogWatches['CONTROLBAR_17_SYNCHRONIZE_LSTRECEIPT_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return !((dialog.list.LSTRECEIPT.isDirty == true)  && (dialog.listDetailView.LSTRECEIPT.mode != 'search'));}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_17');
cb.update('Synchronize_LSTRECEIPT_disabled',val,false,true,true);
}
};
DLG1_DlgObj.dialogWatches['CONTROLBAR_16_SAVE_LSTVISITNOTES_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true) && (dialog.listDetailView.LSTVISITNOTES.mode != 'search'));}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_16');
cb.update('Save_LSTVISITNOTES_disabled',val,false,true,true);
}
};DLG1_DlgObj.dialogWatches['CONTROLBAR_16_NEWRECORD_LSTVISITNOTES_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return !((dialog.listDetailView.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != 'search'));}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_16');
cb.update('NewRecord_LSTVISITNOTES_disabled',val,false,true,true);
}
};DLG1_DlgObj.dialogWatches['CONTROLBAR_16_DELETERECORD_LSTVISITNOTES_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return !((dialog.listDetailView.LSTVISITNOTES.mode != 'search') && (dialog.listRow.LSTVISITNOTES.isRowSelected == true));}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_16');
cb.update('DeleteRecord_LSTVISITNOTES_disabled',val,false,true,true);
}
};DLG1_DlgObj.dialogWatches['CONTROLBAR_16_RESET_LSTVISITNOTES_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return !((dialog.listDetailView.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != 'search'));}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_16');
cb.update('Reset_LSTVISITNOTES_disabled',val,false,true,true);
}
};DLG1_DlgObj.dialogWatches['CONTROLBAR_16_SYNCHRONIZE_LSTVISITNOTES_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return !((dialog.list.LSTVISITNOTES.isDirty == true)  && (dialog.listDetailView.LSTVISITNOTES.mode != 'search'));}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_16');
cb.update('Synchronize_LSTVISITNOTES_disabled',val,false,true,true);
}
};DLG1_DlgObj.dialogWatches['CONTROLBAR_16_REFRESHLIST_LSTVISITNOTES_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return !((dialog.list.LSTVISITNOTES.isDirty == false)  && (dialog.listDetailView.LSTVISITNOTES.mode != 'search'));}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_16');
cb.update('RefreshList_LSTVISITNOTES_disabled',val,false,true,true);
}
};DLG1_DlgObj.dialogWatches['CONTROLBAR_16_DELETESTORAGE_LSTVISITNOTES_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return ;}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_16');
cb.update('DeleteStorage_LSTVISITNOTES_disabled',val,false,true,true);
}
};DLG1_DlgObj.dialogWatches['CONTROLBAR_16_DUMPSTORAGE_LSTVISITNOTES_DISABLED'] = {
	"watch": [],
	"variables": [],
	"onChange": function(data) { 
var val = function(data) { 			var dialog = {};
			var summary = {};
			DLG1_DlgObj._getDialogVariables(dialog,summary,data);
			 return ;}(data);
var cb = DLG1_DlgObj.getControl('CONTROLBAR_16');
cb.update('DumpStorage_LSTVISITNOTES_disabled',val,false,true,true);
}
};
DLG1_DlgObj._ssdecimal = '.';
var ele = '';
ele =DLG1_DlgObj.getPointer('BUTTON_73'); $sa(ele,'tabIndex',1); 
ele =DLG1_DlgObj.getPointer('MedRep'); $sa(ele,'tabIndex',2); 
ele =DLG1_DlgObj.getPointer('password'); $sa(ele,'tabIndex',3); 
ele =DLG1_DlgObj.getPointer('textbox3'); $sa(ele,'tabIndex',4); 
ele =DLG1_DlgObj.getPointer('Date'); $sa(ele,'tabIndex',5); 
ele =DLG1_DlgObj.getPointer('BUTTON_30'); $sa(ele,'tabIndex',6); 
ele =DLG1_DlgObj.getPointer('BUTTON_23'); $sa(ele,'tabIndex',7); 
ele =DLG1_DlgObj.getPointer('BUTTON_47'); $sa(ele,'tabIndex',8); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSYNCHRONIZE_LSTVISITHEAD'); $sa(ele,'tabIndex',9); 
ele =DLG1_DlgObj.getPointer('BUTTON_33'); $sa(ele,'tabIndex',10); 
ele =DLG1_DlgObj.getPointer('BUTTON_25'); $sa(ele,'tabIndex',11); 
ele =DLG1_DlgObj.getPointer('BUTTON_53'); $sa(ele,'tabIndex',12); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSYNCHRONIZE_LSTVISITHEAD1'); $sa(ele,'tabIndex',13); 
ele =DLG1_DlgObj.getPointer('BUTTON_34'); $sa(ele,'tabIndex',14); 
ele =DLG1_DlgObj.getPointer('BUTTON_21'); $sa(ele,'tabIndex',15); 
ele =DLG1_DlgObj.getPointer('poiname'); $sa(ele,'tabIndex',16); 
ele =DLG1_DlgObj.getPointer('poitype'); $sa(ele,'tabIndex',17); 
ele =DLG1_DlgObj.getPointer('besttime'); $sa(ele,'tabIndex',18); 
ele =DLG1_DlgObj.getPointer('region'); $sa(ele,'tabIndex',19); 
ele =DLG1_DlgObj.getPointer('comment'); $sa(ele,'tabIndex',20); 
ele =DLG1_DlgObj.getPointer('phoneno'); $sa(ele,'tabIndex',21); 
ele =DLG1_DlgObj.getPointer('route'); $sa(ele,'tabIndex',22); 
ele =DLG1_DlgObj.getPointer('Total_Dues'); $sa(ele,'tabIndex',23); 
ele =DLG1_DlgObj.getPointer('starttime'); $sa(ele,'tabIndex',24); 
ele =DLG1_DlgObj.getPointer('date_1'); $sa(ele,'tabIndex',25); 
ele =DLG1_DlgObj.getPointer('latitude'); $sa(ele,'tabIndex',26); 
ele =DLG1_DlgObj.getPointer('longitude'); $sa(ele,'tabIndex',27); 
ele =DLG1_DlgObj.getPointer('BUTTON_6'); $sa(ele,'tabIndex',28); 
ele =DLG1_DlgObj.getPointer('BUTTON_4'); $sa(ele,'tabIndex',29); 
ele =DLG1_DlgObj.getPointer('BUTTON_1'); $sa(ele,'tabIndex',30); 
ele =DLG1_DlgObj.getPointer('BUTTON_10'); $sa(ele,'tabIndex',31); 
ele =DLG1_DlgObj.getPointer('BUTTON_2'); $sa(ele,'tabIndex',32); 
ele =DLG1_DlgObj.getPointer('VisitType'); $sa(ele,'tabIndex',33); 
ele =DLG1_DlgObj.getPointer('VisitObjective'); $sa(ele,'tabIndex',34); 
ele =DLG1_DlgObj.getPointer('Responsible_Availaible'); $sa(ele,'tabIndex',35); 
ele =DLG1_DlgObj.getPointer('Wait_Time'); $sa(ele,'tabIndex',36); 
ele =DLG1_DlgObj.getPointer('SpecialRequest'); $sa(ele,'tabIndex',37); 
ele =DLG1_DlgObj.getPointer('Coment'); $sa(ele,'tabIndex',38); 
ele =DLG1_DlgObj.getPointer('BUTTON_9'); $sa(ele,'tabIndex',39); 
ele =DLG1_DlgObj.getPointer('BUTTON_11'); $sa(ele,'tabIndex',40); 
ele =DLG1_DlgObj.getPointer('BUTTON_8'); $sa(ele,'tabIndex',41); 
ele =DLG1_DlgObj.getPointer('BUTTON_5'); $sa(ele,'tabIndex',42); 
ele =DLG1_DlgObj.getPointer('BUTTON_7'); $sa(ele,'tabIndex',43); 
ele =DLG1_DlgObj.getPointer('BUTTON_12'); $sa(ele,'tabIndex',44); 
ele =DLG1_DlgObj.getPointer('BUTTON_13'); $sa(ele,'tabIndex',45); 
ele =DLG1_DlgObj.getPointer('BUTTON_14'); $sa(ele,'tabIndex',46); 
ele =DLG1_DlgObj.getPointer('BUTTON_16'); $sa(ele,'tabIndex',47); 
ele =DLG1_DlgObj.getPointer('BUTTON_17'); $sa(ele,'tabIndex',48); 
ele =DLG1_DlgObj.getPointer('id'); $sa(ele,'tabIndex',49); 
ele =DLG1_DlgObj.getPointer('date_2'); $sa(ele,'tabIndex',50); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTVISITHEAD'); $sa(ele,'tabIndex',51); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVNEWRECORD_LSTVISITHEAD'); $sa(ele,'tabIndex',52); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTVISITHEAD'); $sa(ele,'tabIndex',53); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVRESET_LSTVISITHEAD'); $sa(ele,'tabIndex',54); 
ele =DLG1_DlgObj.getPointer('BUTTON_28'); $sa(ele,'tabIndex',55); 
ele =DLG1_DlgObj.getPointer('BUTTON_15'); $sa(ele,'tabIndex',56); 
ele =DLG1_DlgObj.getPointer('InvDetailQty'); $sa(ele,'tabIndex',57); 
ele =DLG1_DlgObj.getPointer('DiscussedType'); $sa(ele,'tabIndex',58); 
ele =DLG1_DlgObj.getPointer('DiscussedComent'); $sa(ele,'tabIndex',59); 
ele =DLG1_DlgObj.getPointer('UnitPrice'); $sa(ele,'tabIndex',60); 
ele =DLG1_DlgObj.getPointer('Discount'); $sa(ele,'tabIndex',61); 
ele =DLG1_DlgObj.getPointer('TotalLine'); $sa(ele,'tabIndex',62); 
ele =DLG1_DlgObj.getPointer('VAT'); $sa(ele,'tabIndex',63); 
ele =DLG1_DlgObj.getPointer('BUTTON_31'); $sa(ele,'tabIndex',64); 
ele =DLG1_DlgObj.getPointer('flagadditem'); $sa(ele,'tabIndex',65); 
ele =DLG1_DlgObj.getPointer('routeid'); $sa(ele,'tabIndex',66); 
ele =DLG1_DlgObj.getPointer('poiid'); $sa(ele,'tabIndex',67); 
ele =DLG1_DlgObj.getPointer('medrepid'); $sa(ele,'tabIndex',68); 
ele =DLG1_DlgObj.getPointer('endtime'); $sa(ele,'tabIndex',69); 
ele =DLG1_DlgObj.getPointer('latx'); $sa(ele,'tabIndex',70); 
ele =DLG1_DlgObj.getPointer('laty'); $sa(ele,'tabIndex',71); 
ele =DLG1_DlgObj.getPointer('accuracy'); $sa(ele,'tabIndex',72); 
ele =DLG1_DlgObj.getPointer('altitude'); $sa(ele,'tabIndex',73); 
ele =DLG1_DlgObj.getPointer('altitudeaccur'); $sa(ele,'tabIndex',74); 
ele =DLG1_DlgObj.getPointer('heading'); $sa(ele,'tabIndex',75); 
ele =DLG1_DlgObj.getPointer('speed'); $sa(ele,'tabIndex',76); 
ele =DLG1_DlgObj.getPointer('timestanpd'); $sa(ele,'tabIndex',77); 
ele =DLG1_DlgObj.getPointer('lat1'); $sa(ele,'tabIndex',78); 
ele =DLG1_DlgObj.getPointer('long1'); $sa(ele,'tabIndex',79); 
ele =DLG1_DlgObj.getPointer('BUTTON_22'); $sa(ele,'tabIndex',80); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTDISCUSSED'); $sa(ele,'tabIndex',81); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTDISCUSSED'); $sa(ele,'tabIndex',82); 
ele =DLG1_DlgObj.getPointer('BUTTON_29'); $sa(ele,'tabIndex',83); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTSAMPLES1'); $sa(ele,'tabIndex',84); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTSAMPLES'); $sa(ele,'tabIndex',85); 
ele =DLG1_DlgObj.getPointer('BUTTON_24'); $sa(ele,'tabIndex',86); 
ele =DLG1_DlgObj.getPointer('LIST1_KEYWORDSEARCH'); $sa(ele,'tabIndex',87); 
ele =DLG1_DlgObj.getPointer('BUTTON_LISTSEARCH_LIST1'); $sa(ele,'tabIndex',88); 
ele =DLG1_DlgObj.getPointer('BUTTON_LISTSEARCHCLEAR_LIST1'); $sa(ele,'tabIndex',89); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTDISCUSSED1'); $sa(ele,'tabIndex',90); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTDISCUSSED1'); $sa(ele,'tabIndex',91); 
ele =DLG1_DlgObj.getPointer('t1'); $sa(ele,'tabIndex',92); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTDISCUSSED2'); $sa(ele,'tabIndex',93); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTDISCUSSED2'); $sa(ele,'tabIndex',94); 
ele =DLG1_DlgObj.getPointer('BUTTON_35'); $sa(ele,'tabIndex',95); 
ele =DLG1_DlgObj.getPointer('INVTotal'); $sa(ele,'tabIndex',96); 
ele =DLG1_DlgObj.getPointer('INVVAT'); $sa(ele,'tabIndex',97); 
ele =DLG1_DlgObj.getPointer('INVTTC'); $sa(ele,'tabIndex',98); 
ele =DLG1_DlgObj.getPointer('test'); $sa(ele,'tabIndex',99); 
ele =DLG1_DlgObj.getPointer('paimenttype'); $sa(ele,'tabIndex',100); 
ele =DLG1_DlgObj.getPointer('txtrecdesc'); $sa(ele,'tabIndex',101); 
ele =DLG1_DlgObj.getPointer('Currency'); $sa(ele,'tabIndex',102); 
ele =DLG1_DlgObj.getPointer('amount'); $sa(ele,'tabIndex',103); 
ele =DLG1_DlgObj.getPointer('BUTTON_40'); $sa(ele,'tabIndex',104); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTRECEIPT'); $sa(ele,'tabIndex',105); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVNEWRECORD_LSTRECEIPT'); $sa(ele,'tabIndex',106); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTRECEIPT'); $sa(ele,'tabIndex',107); 
ele =DLG1_DlgObj.getPointer('BUTTON_41'); $sa(ele,'tabIndex',108); 
ele =DLG1_DlgObj.getPointer('BUTTON_42'); $sa(ele,'tabIndex',109); 
ele =DLG1_DlgObj.getPointer('BUTTON_43'); $sa(ele,'tabIndex',110); 
ele =DLG1_DlgObj.getPointer('BUTTON_19'); $sa(ele,'tabIndex',111); 
ele =DLG1_DlgObj.getPointer('Notes'); $sa(ele,'tabIndex',112); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTVISITNOTES'); $sa(ele,'tabIndex',113); 
ele =DLG1_DlgObj.getPointer('id_3'); $sa(ele,'tabIndex',114); 
ele =DLG1_DlgObj.getPointer('visitfk'); $sa(ele,'tabIndex',115); 
ele =DLG1_DlgObj.getPointer('BUTTON_44'); $sa(ele,'tabIndex',116); 
ele =DLG1_DlgObj.getPointer('BUTTON_48'); $sa(ele,'tabIndex',117); 
ele =DLG1_DlgObj.getPointer('BUTTON_49'); $sa(ele,'tabIndex',118); 
ele =DLG1_DlgObj.getPointer('BUTTON_50'); $sa(ele,'tabIndex',119); 
ele =DLG1_DlgObj.getPointer('BUTTON_51'); $sa(ele,'tabIndex',120); 
ele =DLG1_DlgObj.getPointer('BUTTON_52'); $sa(ele,'tabIndex',121); 
ele =DLG1_DlgObj.getPointer('BUTTON_54'); $sa(ele,'tabIndex',122); 
ele =DLG1_DlgObj.getPointer('BUTTON_45'); $sa(ele,'tabIndex',123); 
ele =DLG1_DlgObj.getPointer('BUTTON_57'); $sa(ele,'tabIndex',124); 
ele =DLG1_DlgObj.getPointer('BUTTON_60'); $sa(ele,'tabIndex',125); 
ele =DLG1_DlgObj.getPointer('BUTTON_46'); $sa(ele,'tabIndex',126); 
ele =DLG1_DlgObj.getPointer('id_1'); $sa(ele,'tabIndex',127); 
ele =DLG1_DlgObj.getPointer('loaddate'); $sa(ele,'tabIndex',128); 
ele =DLG1_DlgObj.getPointer('itemid'); $sa(ele,'tabIndex',129); 
ele =DLG1_DlgObj.getPointer('qty'); $sa(ele,'tabIndex',130); 
ele =DLG1_DlgObj.getPointer('TmpType'); $sa(ele,'tabIndex',131); 
ele =DLG1_DlgObj.getPointer('type'); $sa(ele,'tabIndex',132); 
ele =DLG1_DlgObj.getPointer('salesman'); $sa(ele,'tabIndex',133); 
ele =DLG1_DlgObj.getPointer('LoadSearch'); $sa(ele,'tabIndex',134); 
ele =DLG1_DlgObj.getPointer('srchItem'); $sa(ele,'tabIndex',135); 
ele =DLG1_DlgObj.getPointer('BUTTON_58'); $sa(ele,'tabIndex',136); 
ele =DLG1_DlgObj.getPointer('BUTTON_59'); $sa(ele,'tabIndex',137); 
ele =DLG1_DlgObj.getPointer('id_2'); $sa(ele,'tabIndex',138); 
ele =DLG1_DlgObj.getPointer('itemid1'); $sa(ele,'tabIndex',139); 
ele =DLG1_DlgObj.getPointer('qty1'); $sa(ele,'tabIndex',140); 
ele =DLG1_DlgObj.getPointer('type1'); $sa(ele,'tabIndex',141); 
ele =DLG1_DlgObj.getPointer('unloaddate'); $sa(ele,'tabIndex',142); 
ele =DLG1_DlgObj.getPointer('BUTTON_55'); $sa(ele,'tabIndex',143); 
ele =DLG1_DlgObj.getPointer('BUTTON_3'); $sa(ele,'tabIndex',144); 
ele =DLG1_DlgObj.getPointer('BUTTON_18'); $sa(ele,'tabIndex',145); 
ele =DLG1_DlgObj.getPointer('BUTTON_56'); $sa(ele,'tabIndex',146); 
ele =DLG1_DlgObj.getPointer('AVAILABLE_MEDIA1'); $sa(ele,'tabIndex',147); 
ele =DLG1_DlgObj.getPointer('FeedBack'); $sa(ele,'tabIndex',148); 
ele =DLG1_DlgObj.getPointer('LoadSearch1'); $sa(ele,'tabIndex',149); 
ele =DLG1_DlgObj.getPointer('textbox1'); $sa(ele,'tabIndex',150); 
ele =DLG1_DlgObj.getPointer('LQty'); $sa(ele,'tabIndex',151); 
ele =DLG1_DlgObj.getPointer('BUTTON_32'); $sa(ele,'tabIndex',152); 
ele =DLG1_DlgObj.getPointer('LoadSearch2'); $sa(ele,'tabIndex',153); 
ele =DLG1_DlgObj.getPointer('textbox2'); $sa(ele,'tabIndex',154); 
ele =DLG1_DlgObj.getPointer('LQty1'); $sa(ele,'tabIndex',155); 
ele =DLG1_DlgObj.getPointer('BUTTON_36'); $sa(ele,'tabIndex',156); 
ele = DLG1_DlgObj.getPointer('BUTTON_73'); if(ele) ele.focus();
var ele = '';
ele =DLG1_DlgObj.getPointer('BUTTON_73'); $sa(ele,'tabIndex',1); 
ele =DLG1_DlgObj.getPointer('MedRep'); $sa(ele,'tabIndex',2); 
ele =DLG1_DlgObj.getPointer('password'); $sa(ele,'tabIndex',3); 
ele =DLG1_DlgObj.getPointer('textbox3'); $sa(ele,'tabIndex',4); 
ele =DLG1_DlgObj.getPointer('Date'); $sa(ele,'tabIndex',5); 
ele =DLG1_DlgObj.getPointer('BUTTON_30'); $sa(ele,'tabIndex',6); 
ele =DLG1_DlgObj.getPointer('BUTTON_23'); $sa(ele,'tabIndex',7); 
ele =DLG1_DlgObj.getPointer('BUTTON_47'); $sa(ele,'tabIndex',8); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSYNCHRONIZE_LSTVISITHEAD'); $sa(ele,'tabIndex',9); 
ele =DLG1_DlgObj.getPointer('BUTTON_33'); $sa(ele,'tabIndex',10); 
ele =DLG1_DlgObj.getPointer('BUTTON_25'); $sa(ele,'tabIndex',11); 
ele =DLG1_DlgObj.getPointer('BUTTON_53'); $sa(ele,'tabIndex',12); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSYNCHRONIZE_LSTVISITHEAD1'); $sa(ele,'tabIndex',13); 
ele =DLG1_DlgObj.getPointer('BUTTON_34'); $sa(ele,'tabIndex',14); 
ele =DLG1_DlgObj.getPointer('BUTTON_21'); $sa(ele,'tabIndex',15); 
ele =DLG1_DlgObj.getPointer('poiname'); $sa(ele,'tabIndex',16); 
ele =DLG1_DlgObj.getPointer('poitype'); $sa(ele,'tabIndex',17); 
ele =DLG1_DlgObj.getPointer('besttime'); $sa(ele,'tabIndex',18); 
ele =DLG1_DlgObj.getPointer('region'); $sa(ele,'tabIndex',19); 
ele =DLG1_DlgObj.getPointer('comment'); $sa(ele,'tabIndex',20); 
ele =DLG1_DlgObj.getPointer('phoneno'); $sa(ele,'tabIndex',21); 
ele =DLG1_DlgObj.getPointer('route'); $sa(ele,'tabIndex',22); 
ele =DLG1_DlgObj.getPointer('Total_Dues'); $sa(ele,'tabIndex',23); 
ele =DLG1_DlgObj.getPointer('starttime'); $sa(ele,'tabIndex',24); 
ele =DLG1_DlgObj.getPointer('date_1'); $sa(ele,'tabIndex',25); 
ele =DLG1_DlgObj.getPointer('latitude'); $sa(ele,'tabIndex',26); 
ele =DLG1_DlgObj.getPointer('longitude'); $sa(ele,'tabIndex',27); 
ele =DLG1_DlgObj.getPointer('BUTTON_6'); $sa(ele,'tabIndex',28); 
ele =DLG1_DlgObj.getPointer('BUTTON_4'); $sa(ele,'tabIndex',29); 
ele =DLG1_DlgObj.getPointer('BUTTON_1'); $sa(ele,'tabIndex',30); 
ele =DLG1_DlgObj.getPointer('BUTTON_10'); $sa(ele,'tabIndex',31); 
ele =DLG1_DlgObj.getPointer('BUTTON_2'); $sa(ele,'tabIndex',32); 
ele =DLG1_DlgObj.getPointer('VisitType'); $sa(ele,'tabIndex',33); 
ele =DLG1_DlgObj.getPointer('VisitObjective'); $sa(ele,'tabIndex',34); 
ele =DLG1_DlgObj.getPointer('Responsible_Availaible'); $sa(ele,'tabIndex',35); 
ele =DLG1_DlgObj.getPointer('Wait_Time'); $sa(ele,'tabIndex',36); 
ele =DLG1_DlgObj.getPointer('SpecialRequest'); $sa(ele,'tabIndex',37); 
ele =DLG1_DlgObj.getPointer('Coment'); $sa(ele,'tabIndex',38); 
ele =DLG1_DlgObj.getPointer('BUTTON_9'); $sa(ele,'tabIndex',39); 
ele =DLG1_DlgObj.getPointer('BUTTON_11'); $sa(ele,'tabIndex',40); 
ele =DLG1_DlgObj.getPointer('BUTTON_8'); $sa(ele,'tabIndex',41); 
ele =DLG1_DlgObj.getPointer('BUTTON_5'); $sa(ele,'tabIndex',42); 
ele =DLG1_DlgObj.getPointer('BUTTON_7'); $sa(ele,'tabIndex',43); 
ele =DLG1_DlgObj.getPointer('BUTTON_12'); $sa(ele,'tabIndex',44); 
ele =DLG1_DlgObj.getPointer('BUTTON_13'); $sa(ele,'tabIndex',45); 
ele =DLG1_DlgObj.getPointer('BUTTON_14'); $sa(ele,'tabIndex',46); 
ele =DLG1_DlgObj.getPointer('BUTTON_16'); $sa(ele,'tabIndex',47); 
ele =DLG1_DlgObj.getPointer('BUTTON_17'); $sa(ele,'tabIndex',48); 
ele =DLG1_DlgObj.getPointer('id'); $sa(ele,'tabIndex',49); 
ele =DLG1_DlgObj.getPointer('date_2'); $sa(ele,'tabIndex',50); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTVISITHEAD'); $sa(ele,'tabIndex',51); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVNEWRECORD_LSTVISITHEAD'); $sa(ele,'tabIndex',52); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTVISITHEAD'); $sa(ele,'tabIndex',53); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVRESET_LSTVISITHEAD'); $sa(ele,'tabIndex',54); 
ele =DLG1_DlgObj.getPointer('BUTTON_28'); $sa(ele,'tabIndex',55); 
ele =DLG1_DlgObj.getPointer('BUTTON_15'); $sa(ele,'tabIndex',56); 
ele =DLG1_DlgObj.getPointer('InvDetailQty'); $sa(ele,'tabIndex',57); 
ele =DLG1_DlgObj.getPointer('DiscussedType'); $sa(ele,'tabIndex',58); 
ele =DLG1_DlgObj.getPointer('DiscussedComent'); $sa(ele,'tabIndex',59); 
ele =DLG1_DlgObj.getPointer('UnitPrice'); $sa(ele,'tabIndex',60); 
ele =DLG1_DlgObj.getPointer('Discount'); $sa(ele,'tabIndex',61); 
ele =DLG1_DlgObj.getPointer('TotalLine'); $sa(ele,'tabIndex',62); 
ele =DLG1_DlgObj.getPointer('VAT'); $sa(ele,'tabIndex',63); 
ele =DLG1_DlgObj.getPointer('BUTTON_31'); $sa(ele,'tabIndex',64); 
ele =DLG1_DlgObj.getPointer('flagadditem'); $sa(ele,'tabIndex',65); 
ele =DLG1_DlgObj.getPointer('routeid'); $sa(ele,'tabIndex',66); 
ele =DLG1_DlgObj.getPointer('poiid'); $sa(ele,'tabIndex',67); 
ele =DLG1_DlgObj.getPointer('medrepid'); $sa(ele,'tabIndex',68); 
ele =DLG1_DlgObj.getPointer('endtime'); $sa(ele,'tabIndex',69); 
ele =DLG1_DlgObj.getPointer('latx'); $sa(ele,'tabIndex',70); 
ele =DLG1_DlgObj.getPointer('laty'); $sa(ele,'tabIndex',71); 
ele =DLG1_DlgObj.getPointer('accuracy'); $sa(ele,'tabIndex',72); 
ele =DLG1_DlgObj.getPointer('altitude'); $sa(ele,'tabIndex',73); 
ele =DLG1_DlgObj.getPointer('altitudeaccur'); $sa(ele,'tabIndex',74); 
ele =DLG1_DlgObj.getPointer('heading'); $sa(ele,'tabIndex',75); 
ele =DLG1_DlgObj.getPointer('speed'); $sa(ele,'tabIndex',76); 
ele =DLG1_DlgObj.getPointer('timestanpd'); $sa(ele,'tabIndex',77); 
ele =DLG1_DlgObj.getPointer('lat1'); $sa(ele,'tabIndex',78); 
ele =DLG1_DlgObj.getPointer('long1'); $sa(ele,'tabIndex',79); 
ele =DLG1_DlgObj.getPointer('BUTTON_22'); $sa(ele,'tabIndex',80); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTDISCUSSED'); $sa(ele,'tabIndex',81); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTDISCUSSED'); $sa(ele,'tabIndex',82); 
ele =DLG1_DlgObj.getPointer('BUTTON_29'); $sa(ele,'tabIndex',83); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTSAMPLES1'); $sa(ele,'tabIndex',84); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTSAMPLES'); $sa(ele,'tabIndex',85); 
ele =DLG1_DlgObj.getPointer('BUTTON_24'); $sa(ele,'tabIndex',86); 
ele =DLG1_DlgObj.getPointer('LIST1_KEYWORDSEARCH'); $sa(ele,'tabIndex',87); 
ele =DLG1_DlgObj.getPointer('BUTTON_LISTSEARCH_LIST1'); $sa(ele,'tabIndex',88); 
ele =DLG1_DlgObj.getPointer('BUTTON_LISTSEARCHCLEAR_LIST1'); $sa(ele,'tabIndex',89); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTDISCUSSED1'); $sa(ele,'tabIndex',90); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTDISCUSSED1'); $sa(ele,'tabIndex',91); 
ele =DLG1_DlgObj.getPointer('t1'); $sa(ele,'tabIndex',92); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTDISCUSSED2'); $sa(ele,'tabIndex',93); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTDISCUSSED2'); $sa(ele,'tabIndex',94); 
ele =DLG1_DlgObj.getPointer('BUTTON_35'); $sa(ele,'tabIndex',95); 
ele =DLG1_DlgObj.getPointer('INVTotal'); $sa(ele,'tabIndex',96); 
ele =DLG1_DlgObj.getPointer('INVVAT'); $sa(ele,'tabIndex',97); 
ele =DLG1_DlgObj.getPointer('INVTTC'); $sa(ele,'tabIndex',98); 
ele =DLG1_DlgObj.getPointer('test'); $sa(ele,'tabIndex',99); 
ele =DLG1_DlgObj.getPointer('paimenttype'); $sa(ele,'tabIndex',100); 
ele =DLG1_DlgObj.getPointer('txtrecdesc'); $sa(ele,'tabIndex',101); 
ele =DLG1_DlgObj.getPointer('Currency'); $sa(ele,'tabIndex',102); 
ele =DLG1_DlgObj.getPointer('amount'); $sa(ele,'tabIndex',103); 
ele =DLG1_DlgObj.getPointer('BUTTON_40'); $sa(ele,'tabIndex',104); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTRECEIPT'); $sa(ele,'tabIndex',105); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVNEWRECORD_LSTRECEIPT'); $sa(ele,'tabIndex',106); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVDELETERECORD_LSTRECEIPT'); $sa(ele,'tabIndex',107); 
ele =DLG1_DlgObj.getPointer('BUTTON_41'); $sa(ele,'tabIndex',108); 
ele =DLG1_DlgObj.getPointer('BUTTON_42'); $sa(ele,'tabIndex',109); 
ele =DLG1_DlgObj.getPointer('BUTTON_43'); $sa(ele,'tabIndex',110); 
ele =DLG1_DlgObj.getPointer('BUTTON_19'); $sa(ele,'tabIndex',111); 
ele =DLG1_DlgObj.getPointer('Notes'); $sa(ele,'tabIndex',112); 
ele =DLG1_DlgObj.getPointer('BUTTON_DVSAVE_LSTVISITNOTES'); $sa(ele,'tabIndex',113); 
ele =DLG1_DlgObj.getPointer('id_3'); $sa(ele,'tabIndex',114); 
ele =DLG1_DlgObj.getPointer('visitfk'); $sa(ele,'tabIndex',115); 
ele =DLG1_DlgObj.getPointer('BUTTON_44'); $sa(ele,'tabIndex',116); 
ele =DLG1_DlgObj.getPointer('BUTTON_48'); $sa(ele,'tabIndex',117); 
ele =DLG1_DlgObj.getPointer('BUTTON_49'); $sa(ele,'tabIndex',118); 
ele =DLG1_DlgObj.getPointer('BUTTON_50'); $sa(ele,'tabIndex',119); 
ele =DLG1_DlgObj.getPointer('BUTTON_51'); $sa(ele,'tabIndex',120); 
ele =DLG1_DlgObj.getPointer('BUTTON_52'); $sa(ele,'tabIndex',121); 
ele =DLG1_DlgObj.getPointer('BUTTON_54'); $sa(ele,'tabIndex',122); 
ele =DLG1_DlgObj.getPointer('BUTTON_45'); $sa(ele,'tabIndex',123); 
ele =DLG1_DlgObj.getPointer('BUTTON_57'); $sa(ele,'tabIndex',124); 
ele =DLG1_DlgObj.getPointer('BUTTON_60'); $sa(ele,'tabIndex',125); 
ele =DLG1_DlgObj.getPointer('BUTTON_46'); $sa(ele,'tabIndex',126); 
ele =DLG1_DlgObj.getPointer('id_1'); $sa(ele,'tabIndex',127); 
ele =DLG1_DlgObj.getPointer('loaddate'); $sa(ele,'tabIndex',128); 
ele =DLG1_DlgObj.getPointer('itemid'); $sa(ele,'tabIndex',129); 
ele =DLG1_DlgObj.getPointer('qty'); $sa(ele,'tabIndex',130); 
ele =DLG1_DlgObj.getPointer('TmpType'); $sa(ele,'tabIndex',131); 
ele =DLG1_DlgObj.getPointer('type'); $sa(ele,'tabIndex',132); 
ele =DLG1_DlgObj.getPointer('salesman'); $sa(ele,'tabIndex',133); 
ele =DLG1_DlgObj.getPointer('LoadSearch'); $sa(ele,'tabIndex',134); 
ele =DLG1_DlgObj.getPointer('srchItem'); $sa(ele,'tabIndex',135); 
ele =DLG1_DlgObj.getPointer('BUTTON_58'); $sa(ele,'tabIndex',136); 
ele =DLG1_DlgObj.getPointer('BUTTON_59'); $sa(ele,'tabIndex',137); 
ele =DLG1_DlgObj.getPointer('id_2'); $sa(ele,'tabIndex',138); 
ele =DLG1_DlgObj.getPointer('itemid1'); $sa(ele,'tabIndex',139); 
ele =DLG1_DlgObj.getPointer('qty1'); $sa(ele,'tabIndex',140); 
ele =DLG1_DlgObj.getPointer('type1'); $sa(ele,'tabIndex',141); 
ele =DLG1_DlgObj.getPointer('unloaddate'); $sa(ele,'tabIndex',142); 
ele =DLG1_DlgObj.getPointer('BUTTON_55'); $sa(ele,'tabIndex',143); 
ele =DLG1_DlgObj.getPointer('BUTTON_3'); $sa(ele,'tabIndex',144); 
ele =DLG1_DlgObj.getPointer('BUTTON_18'); $sa(ele,'tabIndex',145); 
ele =DLG1_DlgObj.getPointer('BUTTON_56'); $sa(ele,'tabIndex',146); 
ele =DLG1_DlgObj.getPointer('AVAILABLE_MEDIA1'); $sa(ele,'tabIndex',147); 
ele =DLG1_DlgObj.getPointer('FeedBack'); $sa(ele,'tabIndex',148); 
ele =DLG1_DlgObj.getPointer('LoadSearch1'); $sa(ele,'tabIndex',149); 
ele =DLG1_DlgObj.getPointer('textbox1'); $sa(ele,'tabIndex',150); 
ele =DLG1_DlgObj.getPointer('LQty'); $sa(ele,'tabIndex',151); 
ele =DLG1_DlgObj.getPointer('BUTTON_32'); $sa(ele,'tabIndex',152); 
ele =DLG1_DlgObj.getPointer('LoadSearch2'); $sa(ele,'tabIndex',153); 
ele =DLG1_DlgObj.getPointer('textbox2'); $sa(ele,'tabIndex',154); 
ele =DLG1_DlgObj.getPointer('LQty1'); $sa(ele,'tabIndex',155); 
ele =DLG1_DlgObj.getPointer('BUTTON_36'); $sa(ele,'tabIndex',156); 
ele = DLG1_DlgObj.getPointer('BUTTON_73'); if(ele) ele.focus();
DLG1_DlgObj._mobilePreview = false;
DLG1_DlgObj._modernFrames = {};
DLG1_DlgObj._listsWithDependentTFControls = DLG1_DlgObj._listsWithDependentTFControls = {}
DLG1_DlgObj.__r = [];
var ele2 = $('DLG1.R1'); if(ele2) {
var ele = document.createElement('div');
ele.innerHTML = '\n<div style="display:none;"><span><input\ttype="text" id="DLG1.V.R1.MEDREPCODE" title=""     class="[theme:edit.base.className|class.dialogInput] " style="text-align: right; width: 25%; "  onBlur="DLG1_DlgObj.setValueFrom(\'MedRep\',\'medrepcode\');" onchange="var tfunc = function() {onChange_medrepcode_272e1a4ce97140d4baa1be74abb68faf.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.MEDREPCODE"    value=""    />\n</span>\n<span><input\ttype="text" id="DLG1.V.R1.SAVING" title=""     class="[theme:edit.base.className|class.dialogInput] " style="text-align: right; width: 1%; "  onchange="var tfunc = function() {onChange_saving_423437b528f5462ba787fb9d115f3768.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.SAVING"    value=""    />\n</span>\n<span><input\ttype="text" id="DLG1.V.R1.CHANGEPASS" title=""     class="[theme:edit.base.className|class.dialogInput] " style="text-align: right; "  onchange="var tfunc = function() {onChange_changepass_7c4c548485644520ba8822a57b751b55.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.CHANGEPASS"    value=""    />\n</span>\n</div>\n\n\n\n\n\n<div style="display:none;"><span><input\ttype="text" id="DLG1.V.R1.TEST2" title=""     class="[theme:edit.base.className|class.dialogInput] " style=""  onchange="var tfunc = function() {onChange_test2_e40b869910fb4048ad3c0853a4491c2f.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.TEST2"    value=""    />\n</span>\n</div>\n\n<div style="display:none;"><span><table id="DLG1.V.R1.STARTTIME.CONTAINER" cellspacing="0" cellpadding="0" class="[theme:editButtonGroup.base.container.className|Alpha-MagentaEditBG]" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\n<tr>\n<td style="width:100%">\n\t<input  \tid="DLG1.V.R1.STARTTIME" name="V.R1.STARTTIME"  value=""  autocomplete="off"   size="200" class="[class.dialogInput]" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\n\t\n</td>\n\t</tr>\n</table>\n</span>\n<span><input\ttype="text" id="DLG1.V.R1.DATE_1" title=""     class="[class.dialogInput] " style=""  onchange="var tfunc = function() {onChange_date_1_a390822e914a46849a7012ec0273d7f3.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DATE_1"    value=""    />\n</span>\n<span><input\ttype="text" id="DLG1.V.R1.DISTRICT_ID" title=""     class="[theme:edit.base.className|class.dialogInput] " style="text-align: right; "  onchange="var tfunc = function() {onChange_district_id_b8bd3a5fe25d44509d6ab7b0b6f8ca15.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.DISTRICT_ID"    value=""    />\n</span>\n<span><table id="DLG1.V.R1.AREA1.CONTAINER" cellspacing="0" cellpadding="0" class="[theme:editButtonGroup.base.container.className|Alpha-MagentaEditBG]" style="width: 100%; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;; display: inline-table; white-space:normal; ">\n<tr>\n<td style="width:100%">\n\t<input  \tid="DLG1.V.R1.AREA1" name="V.R1.AREA1"  value=""  autocomplete="off"   size="200" class="[theme:editButtonGroup.base.container.editClassName|class.editButtonGroupEdit]" style="width: 100%; ; box-sizing: border-box; -moz-box-sizing: border-box; -ms-box-sizing: border-box; -webkit-box-sizing: border-box;" />\n\t\n</td>\n\t</tr>\n</table>\n</span>\n<span><input\ttype="text" id="DLG1.V.R1.PINISVALID" title=""     class="[theme:edit.base.className|class.dialogInput] " style=""  onchange="var tfunc = function() {onChange_pinisvalid_a93f4ff9ea914a0081e8251841faac61.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.PINISVALID"    value=""    />\n</span>\n<span><input\ttype="text" id="DLG1.V.R1.VACATION_MEDREP" title=""     class="[theme:edit.base.className|class.dialogInput] " style="width: 100%; "  onchange="var tfunc = function() {onChange_vacation_medrep_70c34b7937834ef4b9e7907c72106767.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.VACATION_MEDREP"    value=""    />\n</span>\n<span><input\ttype="text" id="DLG1.V.R1.VACATION_COMPANY_ID" title=""     class="[theme:edit.base.className|class.dialogInput] " style="width: 100%; "  onchange="var tfunc = function() {onChange_vacation_company_id_30e0db0a676d402eb53bf202ed4f5cc5.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.VACATION_COMPANY_ID"    value=""    />\n</span>\n</div>\n\n\n\n\n\n\n\n\n<div style="display:none;"><span><input\ttype="text" id="DLG1.V.R1.ID_3" title=""     class="[class.dialogInput] " style=""  onchange="var tfunc = function() {onChange_id_3_c33f2e84d4b846e1b2adcd067fce732c.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.ID_3"    value=""    />\n</span>\n<span><input\ttype="text" id="DLG1.V.R1.VISITFK" title=""     class="[class.dialogInput] " style=""  onchange="var tfunc = function() {onChange_visitfk_6fe86094678f42caac3e53d4847583a1.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.VISITFK"    value=""    />\n</span>\n</div>\n\n<div style="display:none;"><span><input\ttype="text" id="DLG1.V.R1.AVAILABLE_MEDIA1" title=""     class="[class.dialogInput] " style=""  onchange="var tfunc = function() {onChange_AVAILABLE_MEDIA1_8b1ff9aa084e4d5c8adbe5799defc85c.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.AVAILABLE_MEDIA1"    value=""    />\n</span>\n</div>\n\n\n\n\n\n\n<div style="display:none;"><span><!--JSControlStart--><input type="hidden" id="DLG1.V.R1.LSTPOI" name="V.R1.LSTPOI" /><!--JSControlEnd-->\n<div   style="padding:0px; "  >\n\t<div id="DLG1.V.R1.LSTPOI.CONTROL"  class="DLG1_LSTPOI" style="overflow: auto; width: 100%; height: 3in; "></div>\n</div>\n</span>\n</div>\n<div style="display:none;"><span><input\ttype="text" id="DLG1.V.R1.MEDREP_ID" title=""     class="[theme:edit.primary.className|class.dialogInput] " style="width: 100%; "  onchange="var tfunc = function() {onChange_medrep_id_b4f2fc2cf2bb4971ac4ea801f9b4ef07.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.MEDREP_ID"    value=""    />\n</span>\n<span><input\ttype="text" id="DLG1.V.R1.COMPANY_ID" title=""     class="[theme:edit.primary.className|class.dialogInput] " style="width: 100%; "  onchange="var tfunc = function() {onChange_company_id_9464100e0dd247358e6852cdca5f9dbc.call(this,DLG1_DlgObj);;}; var tscope = this; setTimeout(function() { if(tscope) { tfunc.call(tscope);} delete tscope;},1 );"   name="V.R1.COMPANY_ID"    value=""    />\n</span>\n</div>\n\n\n\n<div style="display:none;"><span><!--JSControlStart--><input type="hidden" id="DLG1.V.R1.LSTDEALS" name="V.R1.LSTDEALS" /><!--JSControlEnd-->\n<div   style="padding:0px; "  >\n\t<div id="DLG1.V.R1.LSTDEALS.CONTROL"  class="DLG1_LSTDEALS" style="overflow: auto; width: 100%; height: 3in; "></div>\n</div>\n</span>\n</div>\n\n\n\n';
ele2.appendChild(ele);
};
window.__preventDefault = function(event) { event.preventDefault()};
setTimeout(function() {; },100);
DLG1_DlgObj.__flagIsStaticHTML = true; DLG1_DlgObj._staticHTMLMode = true;  DLG1_DlgObj._embeddedMode = false;
DLG1_DlgObj._listInsideCards = {
}
;DLG1_DlgObj.__workingPreviewProject = 'C:/amigacloud/AMIGACLOUD/AMIGACLOUD.WebProjects/Default.WebProject';
setTimeout(function() { var ele = DLG1_DlgObj.getPointer('map1');
A5.u.drag.add(ele,'prevent');},1000);
DLG1_DlgObj._freeformLayoutLists = {
};
var arr = DLG1_DlgObj._listControls;
if(arr) {
 var obj;
 for(var i = 0; i < arr.length; i++) {
  obj = DLG1_DlgObj.getControl(arr[i]);
  if(obj) {
    obj.resize = function() {
        if(this.fireResize) this._resize('resize'); //._resize() is a private internal method
    }
  }
 }
}
var ele = DLG1_DlgObj.getPointer('CONTAINER_FORGOTPASSWORDLINK'); if(ele) ele.style.display = 'none';DLG1_DlgObj.____passwordReset = false;DLG1_DlgObj.____createAccount = false;;DLG1_DlgObj.setControlDisplay('LOGINWITHGOOGLE',false);;DLG1_DlgObj.setControlDisplay('LOGINWITHCOGNITO',false);;DLG1_DlgObj.setControlDisplay('LOGINWITHFIREBASE',false);
DLG1_DlgObj.__serverVersion = '9348-5713';
DLG1_DlgObj.__guid = '243b85e3-f1be-453b-82ef-bc82c8108ab6';
DLG1_DlgObj._watchEvents = []
DLG1_DlgObj._csDateFormats = {
	'VACATION_DATE' : {dateformat: '<DefaultDateOnlyFormat>'},
	'SHIPDATE' : {dateformat: '<DefaultDateOnlyFormat>'},
	'DEAL_STARTD' : {dateformat: '<DefaultDateOnlyFormat>'},
	'DEAL_ROI_DATE' : {dateformat: '<DefaultDateOnlyFormat>'},
	'DEAL_PH_DATE' : {dateformat: '<DefaultDateOnlyFormat>'}
}
DLG1_DlgObj._dataBindingJSONForm = '';
var href = window.location.href;
DLG1_DlgObj.setStateInfo({ 'locationHref' : href}); 
DLG1_DlgObj.__panelLayouts = []
setTimeout(function() { },0);
;DLG1_DlgObj.__parentAlias = '__parentAliasNotDefined'; 
DLG1_DlgObj.__info = {
	"description": "",
	"createdBy": "Paul",
	"lastUpdatedBy": "",
	"dateCreated": "2018-10-14",
	"dateLastEdited": "2025-4-29",
	"comments": "",
	"revisionnumber": 2264
}
A5.__csdfmt = (obj) =>{ if(obj) return obj.stateInfo.__dtfmt};DLG1_DlgObj._workingPreview = false;
$u.decimal = '.';
$u.comma = ',';
;
;
DLG1_DlgObj.applyServerSideRules(3);

$e.add('DLG1.V.R1.IMAGE_5_1',A5.d.evnts.dblClick,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_SETTINGS'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },300);}
},this,false,'DLG1.V.R1.IMAGE_5_1');

$e.add('DLG1.V.R1.IMAGE_5_1','touchstart',function(e) {$e.preventDefault(e);});





$e.add('DLG1.V.R1.IMAGE_6',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_SETTING'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },300);}
},this,false,'DLG1.V.R1.IMAGE_6');

$e.add('DLG1.V.R1.IMAGE_6','touchstart',function(e) {$e.preventDefault(e);});



$e.add('DLG1.V.R1.REPID.CUSTOMBUTTON.0',A5.d.evnts.click,function(e) { mv = DLG1_DlgObj.getValue('repid');
DLG1_DlgObj.setValue('MedRep',mv);});


$e.add('DLG1.V.R1.REPID_1.CUSTOMBUTTON.0',A5.d.evnts.click,function(e) { DLG1_DlgObj.setValueFrom('MedRep_1','repid_1');});


$e.add('DLG1.V.R1.DATE.CUSTOMBUTTON.0',A5.d.evnts.click,function(e) { m1 = DLG1_DlgObj.getValue('repid');
m2 = DLG1_DlgObj.getValue('MedRep');
if (m1 == '' || m2 == '')  {
 alert("you have to enter a rep");
 return;
}
let mv = DLG1_DlgObj.getValue('syncinprogress');
if (mv == 1) {
 alert("Download in progress");
 return;
}
function checkDn() {
    const maxRetries = 3;
    let mv = DLG1_DlgObj.getValue('syncinprogress');
 mv = Number(mv);
    let mf = DLG1_DlgObj.getValue('failedsync');
 mf = Number(mf);
    if (mv == 0 && mf == 0) {
        console.log("Download completed successfully.");
        return;
    } else {
        mv += 1;
        DLG1_DlgObj.setValue('syncinprogress', mv);
  console.log(mv);
  console.log(mf);
        if (mv > maxRetries) {
            alert("Tried downloading 3 times and failed. Try signing offline.");
            DLG1_DlgObj.setValue('syncinprogress', 0);
            return;
        }
        console.log('Retrying download..');
        downloadData();
        setTimeout(checkDn, 240000);
    }
}
DLG1_DlgObj.setValue('syncinprogress', 1);
downloadData();
setTimeout(checkDn, 240000);});
$e.add('DLG1.V.R1.PASSWORD',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.setValue('passok','0'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },300);}
},this,false,'DLG1.V.R1.PASSWORD');
$e.add('DLG1.V.R1.PASSWORD.CUSTOMBUTTON.0',A5.d.evnts.click,function(e) { mMedrId = DLG1_DlgObj.getValue('MedRep') ;
mT3 = DLG1_DlgObj.getValue('textbox3') ;
mArgv = DLG1_DlgObj.argumentValue('MREPID');
if(mMedrId != mT3) {
 alert('Representative was changed! you need to re-sync');
 return;
}
mComId = DLG1_DlgObj.getValue('COMPANYID');
if(mComId==''){
 alert('no company is selected') ;
 return;
}
var _onOffline = function() {
};
var _onServerNotAvailable = function() {
};
var _onSuccess = function(data) {
 mRealPass = data[0].Password ;
 DLG1_DlgObj.setValue('vPAssword',mRealPass);
 mMedrepName = data[0].MEDREPNAME ;
 mSecurity = data[0].SecurityType  ;
 DLG1_DlgObj.setValue('medrepname',mMedrepName);
 DLG1_DlgObj.setValue('vSecurity',mSecurity);
 mPass = DLG1_DlgObj.getValue('password') ;
 mRealPass = DLG1_DlgObj.getValue('vPAssword');
 if(mPass != mRealPass){
  alert('Wrong Password');
 }
 if(mPass == mRealPass){
  DLG1_DlgObj.showContainerWindow(this,'WINDOW_16');
 }
};
var _onFail = function() {
};
mMedRepId = DLG1_DlgObj.getValue('MedRep');
var _filter = 'data.ID=="'+mMedRepId+'"';
var _order = '';
DLG1_DlgObj.getFromDataCache('medreps',_onSuccess,_onFail,_filter,_order,_onOffline,_onServerNotAvailable);});












$e.add('DLG1.V.R1.BUTTON_30_2',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {function removeTime(date) {
    return new Date(date.getFullYear(), date.getMonth(), date.getDate());
}
var today = removeTime(new Date());
var twoDaysAgo = new Date(today);
twoDaysAgo.setDate(today.getDate() - 2);
var selectedDateStr = DLG1_DlgObj.getValue('Date');
var [d, m, y] = selectedDateStr.split('/').map(n => parseInt(n, 10));
var selectedDate = removeTime(new Date(y, m - 1, d));
if (selectedDate > today) {
    alert('Please select a date not after today.');
    return;
}
if (selectedDate < twoDaysAgo) {
    alert('Please select a date within the last 2 days.');
    return;
}
let medRepId = DLG1_DlgObj.getValue('MedRep');
let textbox3 = DLG1_DlgObj.getValue('textbox3');
if (medRepId !== textbox3) {
    alert('Representative was changed! Please re-sync.');
    return;
}
let companyId = DLG1_DlgObj.getValue('COMPANYID');
if (!companyId) {
    alert('No company is selected.');
    return;
}
DLG1_DlgObj.runAction('showwait1');
var actions = [loadMedrepData, validatePassword, refreshDropdowns];
A5.runChain(actions, onChainDone, onChainFail);
function loadMedrepData(obj) {
    let filter = `data.ID=="${medRepId}"`;
    DLG1_DlgObj.getFromDataCache(
        'medreps',
        function(data) {
            let rep = data[0];
            DLG1_DlgObj.setValue('vPAssword', rep.Password);
            DLG1_DlgObj.setValue('medrepname', rep.MEDREPNAME);
            DLG1_DlgObj.setValue('printername', rep.printername);
            DLG1_DlgObj.setValue('vSecurity', rep.SecurityType);
            obj.next();
        },
        function() { obj.stop('MedRep data load failed.'); },
        filter, '',
        function() {}, function() {}
    );
}
function validatePassword(obj) {
    let enteredPass = DLG1_DlgObj.getValue('password');
    let actualPass = DLG1_DlgObj.getValue('vPAssword');
    if (enteredPass !== actualPass) {
        alert('Wrong Password');
        obj.stop();
        return;
    }
    let changePass = DLG1_DlgObj.getValue('changepass');
    if (changePass == 1) {
        DLG1_DlgObj.showContainerWindow(this, 'WINDOW_16');
    }
    DLG1_DlgObj.setValueFrom('vmedrep', 'MedRep');
    DLG1_DlgObj.setValueFrom('textbox3', 'MedRep');
    let repName = DLG1_DlgObj.getValueDisplay('MedRep');
    let visitDate = DLG1_DlgObj.getValue('Date');
    DLG1_DlgObj.setValue('DISPLAYMEDREPNAME', repName);
    DLG1_DlgObj.setValue('DISPLAYDATE', visitDate);
    DLG1_DlgObj.panelSetActive('PANELCARD_MENU');
    obj.next();
}
function refreshDropdowns(obj) {
    let onComplete = function(data) {
 DLG1_DlgObj.stateInfo['_visittype'] = data.visittypedata;
 DLG1_DlgObj.stateInfo['_visitobj'] = data.visitobj;
 DLG1_DlgObj.stateInfo['_supervisors'] = data.supervisors;
 DLG1_DlgObj.stateInfo['_discussedtypes'] = data.discussedtypes;
 DLG1_DlgObj.stateInfo['_paytypes'] = data.paytypes ;
 DLG1_DlgObj.stateInfo['_currencies'] = data.currencies ;
 DLG1_DlgObj.stateInfo['_items'] = data.items ;
 DLG1_DlgObj.stateInfo['_itemgroups'] = data.itemgroups ;
 DLG1_DlgObj.stateInfo['_itemsubgroups'] = data.itemsubgroup ;
 console.log(data.itemsubgroup);
 DLG1_DlgObj.setValue('subgrouparray',JSON.stringify(data.itemsubgroup));
 var cbObj = DLG1_DlgObj.getControl('CONTROLBAR_31');
 if(cbObj) {
  var varNames = ['msubgrp'];
  var dataValues = ['Fred Smith'];
  cbObj.update(varNames,data.itemsubgroup);
 };
 console.log( DLG1_DlgObj.stateInfo['_itemsubgroups']);
  console.log('subgrou')
       populateDrop('VISITTYPE', DLG1_DlgObj.stateInfo['_visittype'], 'visittype');
       populateDrop('VISITOBJECTIVE', DLG1_DlgObj.stateInfo['_visitobj'], 'objective');
       populateDrop('SUPERVISOR',  DLG1_DlgObj.stateInfo['_supervisors'], 'supervisorname');
       populateDrop('DISCUSSEDTYPE',DLG1_DlgObj.stateInfo['_discussedtypes'], 'discussed_type');
       populateDrop('PAIMENTTYPE', DLG1_DlgObj.stateInfo['_paytypes'], 'paimentType');
       populateDrop('CURRENCY', DLG1_DlgObj.stateInfo['_currencies'], 'Currency');
       populateDrop('ITEMID', DLG1_DlgObj.stateInfo['_items'], 'description');
       populateDrop('DROPGROUP', DLG1_DlgObj.stateInfo['_itemgroups'], 'itemgroup');
       obj.next();
    };
    DLG1_DlgObj.readDataCacheItems(
        'visittypedata,visitobj,supervisors,discussedtypes,paytypes,currencies,items,itemgroups,itemsubgroup',
        onComplete
    );
}
function onChainDone() {
    let keys = ['autosaveinv', 'CompanyCode', 'COMPANYID', 'CompanyName', 'MedRep', 'textbox3'];
    keys.forEach(k => {
        localStorage.setItem('ls_' + k.toLowerCase(), DLG1_DlgObj.getValue(k));
    });
    if (DLG1_DlgObj.getValue('changepass') == 1 &&
        DLG1_DlgObj.getValue('password') === DLG1_DlgObj.getValue('vPAssword')) {
        DLG1_DlgObj.showContainerWindow(this, 'WINDOW_16');
    }
    DLG1_DlgObj.runAction('hidewait');
}
function onChainFail(reason) {
    DLG1_DlgObj.runAction('hidewait');
    alert('Sign-in failed: ' + reason);
}
function populateDrop(control, data, textField) {
    let values = [['', '']].concat(data.map(item => [item[textField], item.id]));
    DLG1_DlgObj.populateDropdownBox(control, values, true);
} } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_30_2');















$e.add('DLG1.V.R1.BUTTON_125',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.setValue('changepass',0);
mrpid = DLG1_DlgObj.getValue('repid');
if (mrpid<2000000)  {
  if (mrpid<900000 )  {
   DLG1_DlgObj.runAction('updatemedreppass');
  }
 else {
  DLG1_DlgObj.runAction('updatesuppass');
   }
}
else {
 DLG1_DlgObj.runAction('updateexcellenceppass');
 } } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_125');












$e.add('DLG1.V.R1.IMAGE_5',A5.d.evnts.dblClick,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_SETTINGS'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },300);}
},this,false,'DLG1.V.R1.IMAGE_5');

$e.add('DLG1.V.R1.IMAGE_5','touchstart',function(e) {$e.preventDefault(e);});





$e.add('DLG1.V.R1.COMPANYCODE.CUSTOMBUTTONSTATIC.0',A5.d.evnts.click,function(e) { function f1(obj) {
 DLG1_DlgObj.runAction('fillcompanyinfo');
}
function f2(obj) {
 DLG1_DlgObj.runAction('setsessionid');
}
function f3(obj) {
 var _done = function(obj) {
     console.log('entered _done function');
     console.log(obj);
     var _d = [['', '']];
     for (var i = 0; i < obj.medreps.length; i++) {
         _d.push([obj.medreps[i].MEDREPNAME, obj.medreps[i].ID]);
     }
     DLG1_DlgObj.populateDropdownBox('MEDREP', _d, true);
     DLG1_DlgObj.populateDropdownBox('MEDREP_1', _d, true);
 };
 var _onServerNotAvailable = function() {
     alert('server not available');
 };
 var _onRefreshOK = function() {
     DLG1_DlgObj.readDataCacheItems('medreps', _done);
 };
 var _onServerIsAvailable = function() {
     DLG1_DlgObj.refreshDataCacheItem('medreps', _onRefreshOK);
 };
 DLG1_DlgObj.serverIsAvailable(800, _onServerIsAvailable, _onServerNotAvailable);
}
function f4() {
 var _html = '<div style="display:inline-block;">Company Info Refreshed</div>';
 var _options = {
 "close": {
  "show": false
 },
 "duration": 2000,
 "animation": {
  "show": {
   "type": "auto",
   "duration": 600
  },
  "hide": {
   "type": "auto",
   "duration": 600
  }
  }
 };
 DLG1_DlgObj.transientMessage('top-fill',_html,_options);
  mcp1 = DLG1_DlgObj.getValue('CompanyCode');
 mcp2 = DLG1_DlgObj.getValue('CompanyName');
 console.log(mcp1);
 console.log(mcp2);
 if (mcp1=='' || mcp2 == '')  {
  return;
  }
 DLG1_DlgObj.panelSetActive('SIGNIN_PANELCARD');
}
f1();
setTimeout(f2,750);
setTimeout(f3,2500);
setTimeout(f4,5500);});




$e.add('DLG1.V.R1.BUTTON_30_1',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {function f1(obj) {
 DLG1_DlgObj.runAction('fillcompanyinfo');
}
function f2(obj) {
 DLG1_DlgObj.runAction('setsessionid');
}
function f3(obj) {
 var _done = function(obj) {
     console.log('entered _done function');
     console.log(obj);
     var _d = [['', '']];
     for (var i = 0; i < obj.medreps.length; i++) {
         _d.push([obj.medreps[i].MEDREPNAME, obj.medreps[i].ID]);
     }
     DLG1_DlgObj.populateDropdownBox('MEDREP', _d, true);
     DLG1_DlgObj.populateDropdownBox('MEDREP_1', _d, true);
 };
 var _onServerNotAvailable = function() {
     alert('server not available');
 };
 var _onRefreshOK = function() {
     DLG1_DlgObj.readDataCacheItems('medreps', _done);
 };
 var _onServerIsAvailable = function() {
     DLG1_DlgObj.refreshDataCacheItem('medreps', _onRefreshOK);
 };
 DLG1_DlgObj.serverIsAvailable(1800, _onServerIsAvailable, _onServerNotAvailable);
}
function f4() {
 var _html = '<div style="display:inline-block;">Company Info Refreshed</div>';
 var _options = {
 "close": {
  "show": false
 },
 "duration": 2000,
 "animation": {
  "show": {
   "type": "auto",
   "duration": 600
  },
  "hide": {
   "type": "auto",
   "duration": 600
  }
  }
 };
 DLG1_DlgObj.transientMessage('top-fill',_html,_options);
  mcp1 = DLG1_DlgObj.getValue('CompanyCode');
 mcp2 = DLG1_DlgObj.getValue('CompanyName');
 console.log(mcp1);
 console.log(mcp2);
 if (mcp1=='' || mcp2 == '')  {
  return;
  }
 DLG1_DlgObj.panelSetActive('SIGNIN_PANELCARD');
}
f1();
setTimeout(f2,750);
setTimeout(f3,2500);
setTimeout(f4,5500); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_30_1');



























$e.add('DLG1.V.R1.BUTTON_33',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_16'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_33');






$e.add('DLG1.V.R1.SEARCH_OFFROUTE.CUSTOMBUTTON.0',A5.d.evnts.click,function(e) { $('DLG1.V.R1.SEARCH_OFFROUTE').value = ''; 
$('DLG1.V.R1.SEARCH_OFFROUTE').blur(); 
$('DLG1.V.R1.SEARCH_OFFROUTE').focus();
var searchFor = DLG1_DlgObj.getValue('Search_offRoute');
var listObj = DLG1_DlgObj.getControl('LSTOFFROUTE');
listObj.filterListClientSide(searchFor);});
$e.add('DLG1.V.R1.SEARCH_OFFROUTE.CUSTOMBUTTON.1',A5.d.evnts.click,function(e) { var searchFor = DLG1_DlgObj.getValue('Search_offRoute');
var listObj = DLG1_DlgObj.getControl('LSTOFFROUTE');
listObj.filterListClientSide(searchFor);});
$e.add('DLG1.V.R1.BUTTON_27',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTOFFROUTE');
lObj.setFilter(function(data){
    if(Number(data.mvisitcnt)>= Number(data.frequency))
     return false;
    else
     return true ;
 }
); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_27');

$e.add('DLG1.V.R1.BUTTON_38',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTOFFROUTE');
lObj.setFilter(false); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_38');

$e.add('DLG1.V.R1.BUTTON_138',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {mval = DLG1_DlgObj.getValue('repid');
if (mval >= 2000000)  {
	DLG1_DlgObj.showContainerWindow(this,'WINDOW_18');		
	}
else {
		DLG1_DlgObj.refreshListData('LSTOFFROUTE');
	 } } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_138');




$e.add('DLG1.V.R1.BUTTON_34',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_2'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_34');















$e.add('DLG1.V.R1.BUTTON_9',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.setValue('flagadditem',1);
DLG1_DlgObj.buttonClick('BUTTON_DVSAVE_LSTVISITHEAD');
mobg = DLG1_DlgObj.getControl('LSTSAMPLES');
 DLG1_DlgObj.getControl('LSTITEMS').selectCurrentLayout('sample');
 DLG1_DlgObj.panelSetActive('PANELCARD_ITEMS_ALL'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_9');

$e.add('DLG1.V.R1.BUTTON_8',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.setValue('flagadditem',2);
DLG1_DlgObj.buttonClick('BUTTON_DVSAVE_LSTVISITHEAD');
DLG1_DlgObj.getControl('LSTITEMS').selectCurrentLayout('discus');
mobg = DLG1_DlgObj.getControl('LSTDISCUSSED');
 DLG1_DlgObj.getControl('LSTITEMS').selectCurrentLayout('sample');
 DLG1_DlgObj.panelSetActive('PANELCARD_ITEMS_ALL'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_8');

$e.add('DLG1.V.R1.BUTTON_11',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.buttonClick('BUTTON_DVSAVE_LSTVISITHEAD');
DLG1_DlgObj.setValue('flagadditem',3);
 DLG1_DlgObj.panelSetActive('PANELCARD_ITEMS_ALL'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_11');
$e.add('DLG1.V.R1.BUTTON_11','abstracttap',function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.buttonClick('BUTTON_DVSAVE_LSTVISITHEAD');
DLG1_DlgObj.setValue('flagadditem',3);
mobg = DLG1_DlgObj.getControl('lstorders');
 DLG1_DlgObj.getControl('LSTITEMS').selectCurrentLayout('default');
 DLG1_DlgObj.panelSetActive('PANELCARD_ITEMS_ALL'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_11');

$e.add('DLG1.V.R1.BUTTON_7',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.setValue('flagadditem',4);
DLG1_DlgObj.buttonClick('BUTTON_DVSAVE_LSTVISITHEAD');
 DLG1_DlgObj.getControl('LSTITEMS').selectCurrentLayout('default');
 DLG1_DlgObj.panelSetActive('PANELCARD_ITEMS_ALL'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_7');

$e.add('DLG1.V.R1.BUTTON_12',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.buttonClick('BUTTON_DVSAVE_LSTVISITHEAD');
DLG1_DlgObj.panelSetActive('PANELCARD_18'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_12');

$e.add('DLG1.V.R1.BUTTON_13',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.buttonClick('BUTTON_DVSAVE_LSTVISITHEAD');
DLG1_DlgObj.panelSetActive('PANELCARD_20'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_13');

$e.add('DLG1.V.R1.BUTTON_16',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_MEDIA'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_16');

$e.add('DLG1.V.R1.BUTTON_20',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var _ok = function() {
 DLG1_DlgObj.runAction('setsessionid');
 DLG1_DlgObj.panelSetActive('PANELCARD_42');
 DLG1_DlgObj.runAction('Open_Questionaire');
};
var _err = function() {
    alert('you need an internet connection for the questionnaire');
};
DLG1_DlgObj.serverIsAvailable(1000,_ok,_err); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_20');

$e.add('DLG1.V.R1.BUTTON_17',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.buttonClick('BUTTON_DVSAVE_LSTVISITHEAD');
DLG1_DlgObj.panelSetActive('PANELCARD_FEEDBACK'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_17');

$e.add('DLG1.V.R1.BUTTON_14',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.buttonClick('BUTTON_DVSAVE_LSTVISITHEAD');
DLG1_DlgObj.panelSetActive('PANELCARD_21'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_14');




$e.add('DLG1.V.R1.BUTTON_97',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_MENU'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_97');

$e.add('DLG1.V.R1.BUTTON_98',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {maA1 = DLG1_DlgObj.argumentValue('MDATE');
ma2 = DLG1_DlgObj.argumentValue('MREPID');
alert(maA1);
alert(ma2);
alert(typeof(maA1));
DLG1_DlgObj.refreshListData('LSTVISITHEAD');
var listObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
console.log(listObj);
maA1 = DLG1_DlgObj.argumentValue('MTDATE');
ma2 = DLG1_DlgObj.argumentValue('MREPID');
alert(maA1);
alert(ma2);
alert(typeof(maA1)); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_98');










$e.add('DLG1.V.R1.BUTTON_28',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelNavigate('PANELNAVIGATOR_1','historyback'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_28');

$e.add('DLG1.V.R1.BUTTON_15',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {waitingmess('Saving Location');
var listObj = DLG1_DlgObj.getControl('lstgeoloc');
mCompId = DLG1_DlgObj.getValue('COMPANYID');
mPoiid = DLG1_DlgObj.getValue('tmppoiid');
mLat = DLG1_DlgObj.getValue('DEVLAT');
mLong = DLG1_DlgObj.getValue('DEVLONG');
mUsern = DLG1_DlgObj.getValue('medrepname');
mUserId = DLG1_DlgObj.getValue('repid');
var data =  { company_id: mCompId, poi_id: mPoiid,lat: mLat,lng: mLong, usern: mUsern,user_id: mUserId};
console.log(data) ;
listObj.addTableRow(data) ;
setTimeout(function(){
 DLG1_DlgObj.saveListEdits('lstgeoloc',{rows: 'allRows'});
 DLG1_DlgObj.runAction('hidewait');
 DLG1_DlgObj.panelNavigate('PANELNAVIGATOR_1','historyback');
 },450); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_15');

$e.add('DLG1.V.R1.BUTTON_4',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.runAction('removemarker');
DLG1_DlgObj.runAction('PlotRoute'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_4');



















$e.add('DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS2',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {mTotGen = 0
var lObj = DLG1_DlgObj.getControl('LSTITEMS');
lObj.setFilter(false);
lObj.setFilter(function(data){
    if( data.qty != 0|| data.bonus != 0 || data.discusedtype != 0 ) {
     mTotGen = mTotGen + Number(data.qty) * Number(data.price) * ((100-Number(data.discount))/100);
     return true;
   } else {
      return false ;
    }
 }
);
var mFlag = DLG1_DlgObj.getValue('flagadditem');
if(mFlag == 4 || mFlag == 3)
 {
 setTimeout(function() {
 var formattedNumber = mTotGen.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
 alert(formattedNumber);
 },500);
} } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS2');

$e.add('DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTITEMS');
lObj.setFilter(false);
mgroup = DLG1_DlgObj.getValueDisplay('dropgroup');
msubgroup = DLG1_DlgObj.getValueDisplay('dropsubgroup')
mSearcht = DLG1_DlgObj.getValue('txtsearchdesc');
mSearcht = mSearcht.toLowerCase();
lObj.setFilter(function(data){
     if(mSearcht==''){
     if(mgroup == '' && msubgroup == '') {
      return true;
     } else {
      if(msubgroup==''){
       if(data.itemgroup == mgroup) {
        return true;
        } else {
         return false ;
        }
      } else {
       if(data.itemgroup == mgroup && data.subgroup == msubgroup) {
        return true;
        } else {
       return false ;
       }
      }
     }
 } else {
  msd = data.description ;
  msd = msd.toLowerCase();
  if(msd.includes(mSearcht)) {
   return true ;
  } else {
   return false
  }
 }
}); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS');

$e.add('DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS1',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTITEMS');
lObj.setFilter(false);
DLG1_DlgObj.setValue('dropgroup',0);
DLG1_DlgObj.setValue('dropsubgroup',0);
DLG1_DlgObj.setValue('txtsearchdesc',''); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_LISTSEARCH_LSTITEMS1');
































$e.add('DLG1.V.R1.BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {  DLG1_DlgObj.saveListEdits('LSTVISITHEAD',{rows: 'allRows', ajax: { timeOut: 60000, onAjaxFail: function() { } , onDeviceOffline: function() { } } });
  var err = lObj.getAllErrors();
console.log(err) ;
mx =JSON.stringify(err);
console.log(mx) ; } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVSYNCHRONIZE_LSTVISITHEAD2');

$e.add('DLG1.V.R1.BUTTON_96',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.synchronizeLists();
var err = lObj.getAllErrors();
console.log(err) ;
mx =JSON.stringify(err);
console.log(err) ; } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_96');

$e.add('DLG1.V.R1.BUTTON_DVSAVE_LSTVISITHEAD',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {
var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');


if(lObj.selection[0] != 'undefined') { 
	lObj._selectedRow = lObj.selection[0];
}

lObj.updateListFromUXControls();

 } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVSAVE_LSTVISITHEAD');

$e.add('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTVISITHEAD',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
lObj.newDetailViewRecord(); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVNEWRECORD_LSTVISITHEAD');

$e.add('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTVISITHEAD',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
lObj.deleteRow();

 } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVDELETERECORD_LSTVISITHEAD');

$e.add('DLG1.V.R1.BUTTON_DVRESET_LSTVISITHEAD',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
lObj.resetForm({prompt: true});

 } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVRESET_LSTVISITHEAD');















$e.add('DLG1.V.R1.BUTTON_84',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_UNPAID'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_84');














$e.add('DLG1.V.R1.BUTTON_139',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.refreshListData('LSTOFFROUTE');
DLG1_DlgObj.closeContainerWindow(this); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_139');




$e.add('DLG1.V.R1.POSACCURACY.CUSTOMBUTTON.0',A5.d.evnts.click,function(e) { if (navigator.geolocation) {
  navigator.geolocation.getCurrentPosition(onSuccess, onError, {
    enableHighAccuracy: true,
    timeout: 15000,
    maximumAge: 0
  });
} else {
  alert("Geolocation is not supported by this browser.");
}
function onSuccess(position) {
 const currentLat = position.coords.latitude;
 const currentLon = position.coords.longitude;
 const accuracy = position.coords.accuracy;
 customerLat = DLG1_DlgObj.getValue('txtpoilat');
 customerLon = DLG1_DlgObj.getValue('txtpoilong');
 DLG1_DlgObj.setValue('posaccuracy',accuracy);
    malloweddist = DLG1_DlgObj.getValue('alloweddistance');
    const distance = calculateDistance(customerLat, customerLon, currentLat, currentLon);
 DLG1_DlgObj.setValue('posDistance',distance)
}
function onError(error) {
  console.log("Error occurred. Error code: " + error.code);
}});
$e.add('DLG1.V.R1.POSDISTANCE.CUSTOMBUTTON.0',A5.d.evnts.click,function(e) { setTimeout(function(){
 const latitude = DLG1_DlgObj.getValue('list::LSTOFFROUTE::LAT') ;
 const longitude = DLG1_DlgObj.getValue('list::LSTOFFROUTE::LONT')
 openGoogleMaps(latitude, longitude);
 DLG1_DlgObj.hideContainerWindow('GETPASS');
 },300);});





$e.add('DLG1.V.R1.BUTTON_130',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {mAccuracy = DLG1_DlgObj.getValue('posDistance');
mvacc = Number(mAccuracy);
mallowed = DLG1_DlgObj.getValue('alloweddistance');
mvmallowed = Number(mallowed);
 if (mvacc<=mvmallowed)  {
    DLG1_DlgObj.hideContainerWindow('GETPASS');
                        setTimeout(function(){
                         startvisit();
      },500)
  }
 else {
  originalCode = DLG1_DlgObj.getValue('mypin');
  encodedPin = DLG1_DlgObj.getValue('receivedpin');
  if (encodedPin==266686)  {
    DLG1_DlgObj.hideContainerWindow('GETPASS');
                        setTimeout(function(){
                         startvisit();
      },500)
    }
  else {
   const isValid = verifyCode(originalCode, encodedPin);
   if (isValid)  {
    DLG1_DlgObj.setValue('pinisvalid',1);
    DLG1_DlgObj.hideContainerWindow('GETPASS');
                        setTimeout(function(){
                         startvisit();
      },500)
   }
  }
 } } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_130');





$e.add('DLG1.V.R1.BUTTON_102',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var now = new Date()
DLG1_DlgObj.setValue('endtime',now)
DLG1_DlgObj.buttonClick('BUTTON_DVSAVE_LSTVISITHEAD')
DLG1_DlgObj.panelSetActive('PANELCARD_2');
DLG1_DlgObj.hideContainerWindow('WINDOW_SKIPREAS');
mAutoSave = DLG1_DlgObj.getValue('autosaveinv');
if(mAutoSave==1){
 DLG1_DlgObj.synchronizeLists();
 var err = lObj.getAllErrors();
 console.log(err) ;
 mx =JSON.stringify(err);
 console.log(err)
} } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_102');



$e.add('DLG1.V.R1.BUTTON_136',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.hideContainerWindow('WINDOW_VACATION'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_136');







$e.add('DLG1.V.R1.BUTTON_DVSAVE_LSTVACATION',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTVACATION');


if(lObj.selection[0] != 'undefined') { 
	lObj._selectedRow = lObj.selection[0];
}

lObj.updateListFromUXControls();
DLG1_DlgObj.hideContainerWindow('WINDOW_VACATION'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVSAVE_LSTVACATION');























$e.add('DLG1.V.R1.BUTTON_22',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_4'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_22');





$e.add('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTDISCUSSED',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTDISCUSSED');
lObj.deleteRow();

 } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVDELETERECORD_LSTDISCUSSED');

$e.add('DLG1.V.R1.BUTTON_DVSAVE_LSTDISCUSSED',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_15'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVSAVE_LSTDISCUSSED');





$e.add('DLG1.V.R1.BUTTON_29',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_4'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_29');





$e.add('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTSAMPLES',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTSAMPLES');
lObj.deleteRow(); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVDELETERECORD_LSTSAMPLES');

$e.add('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTSAMPLES1',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_15'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVDELETERECORD_LSTSAMPLES1');








$e.add('DLG1.V.R1.BUTTON_35',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_4'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_35');




























$e.add('DLG1.V.R1.ONINVOICENO',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_19');
mPoiId = DLG1_DlgObj.getValue('poiid');
var listObj = DLG1_DlgObj.getControl('LSTUNPAIDINV');
listObj.setFilter({
 POI_ID: function(POID_ID){
  if(POID_ID == mPoiId) return true;
  return false;
 }
});
DLG1_DlgObj.hideContainerWindow('WINDOW_14'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },300);}
},this,false,'DLG1.V.R1.ONINVOICENO');
$e.add('DLG1.V.R1.BUTTON_40',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_19'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_40');

$e.add('DLG1.V.R1.BUTTON_DVSAVE_LSTRECEIPT',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {mCmpId = DLG1_DlgObj.getValue('COMPANYID');
mVisitid = DLG1_DlgObj.getValue('list::LSTVISITHEAD::id');
mInvNo = DLG1_DlgObj.getValue('OnInvoiceNo') ;
mDescr = DLG1_DlgObj.getValue('txtrecdesc');
mCur = DLG1_DlgObj.getValue('Currency');
mAmount = DLG1_DlgObj.getValue('amount') ;
mDate = DLG1_DlgObj.getValue('Date') ;
mPaitype = DLG1_DlgObj.getValue('paimenttype') ;
var listObj = DLG1_DlgObj.getControl('LSTRECEIPT');
var data =  {invoiceno: mInvNo, visitid: mVisitid, Description: mDescr, Currency: mCur, amount: mAmount ,date: mDate ,PaimentType:mPaitype ,AmountCV: mAmount, company_id : mCmpId} ;
 listObj.addTableRow(data);
DLG1_DlgObj.hideContainerWindow('WINDOW_14'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVSAVE_LSTRECEIPT');

$e.add('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTRECEIPT',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTRECEIPT');
lObj.newDetailViewRecord(); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVNEWRECORD_LSTRECEIPT');

$e.add('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTRECEIPT',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTRECEIPT');
lObj.deleteRow(); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVDELETERECORD_LSTRECEIPT');







$e.add('DLG1.V.R1.BUTTON_100',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.hideContainerWindow('WINDOW_SHIP'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_100');








$e.add('DLG1.V.R1.BUTTON_41',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_2'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_41');






$e.add('DLG1.V.R1.BUTTON_42',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelNavigate('PANELNAVIGATOR_1','historyback'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_42');






$e.add('DLG1.V.R1.BUTTON_43',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelNavigate('PANELNAVIGATOR_1','historyback'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_43');









$e.add('DLG1.V.R1.BUTTON_DVSAVE_LSTVISITNOTES',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');


if(lObj.selection[0] != 'undefined') { 
	lObj._selectedRow = lObj.selection[0];
}

lObj.updateListFromUXControls();


DLG1_DlgObj.hideContainerWindow('WINDOW_13'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVSAVE_LSTVISITNOTES');

$e.add('DLG1.V.R1.BUTTON_19',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj._functions.imageCapture_b7103bdc9ac94582b275d5b88f05cf2d(this); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_19');























$e.add('DLG1.V.R1.BUTTON_3',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var _list = window['getFiles']();
if(typeof list == 'string') list = [list];
var arr = [];
for(var i = 0; i < _list.length; i++) {
 arr.push( {filename: _list[i]} );
}
var options = {
 directory: 'MEDIALFILES',
 strip: true,
 filesystem: 'persistent',
 showProgress: true,
 forceDownloadIfFileExists: false,
 onComplete: function(array) {
alert('All files were successfully downloaded')
},
 progress: {
  color: '#9fa1e8',
  width: '300px',
  allowCancel: false,
  progressElement: 'DLG1.V.R1.PLACEHOLDER_1'
 }
}
DLG1_DlgObj.phoneGapFileDownload(arr,options); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_3');

$e.add('DLG1.V.R1.BUTTON_18',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var _o = {
 "fsPart": "persistent",
 "fileName": getFileNative(),
 "onSuccess": function() { },
 "onError": function(e) { }
};
var flagFound = false;
try {
 var _open = cordova.plugins.disusered.open;
 flagFound = true;
} catch(e) {
 alert('Cordova-open plugin not loaded');
}
 var obj = {
  sourceFileSystem: _o.fsPart,
  sourceFolder: '',
  sourceFileName: _o.fileName
 }
 var _onError = function(e) { _o.onError(e); };
 var _onSuccess = function() { _o.onSuccess() };
 DLG1_DlgObj.phoneGapOpenFileWithNativeViewer(obj,_onSuccess,_onError); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_18');




$e.add('DLG1.V.R1.BUTTON_56',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_4'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_56');









$e.add('DLG1.V.R1.BUTTON_82',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_4'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_82');

$e.add('DLG1.V.R1.BUTTON_81',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {mcompid = DLG1_DlgObj.getValue('COMPANYID');
mNbrdisc = DLG1_DlgObj.getValue('nbrOfDiscussedProduts');
msec = DLG1_DlgObj.getValue();
mPhoneOrder = DLG1_DlgObj.getValue('phoneorder');

	if (Number(mcompid)==1036 && Number(mNbrdisc)==0 && Number(msec)!=2 && mPhoneOrder==0)  {
			alert('You did not enter any discussed products');
			return;

		
		}

var now = new Date();

DLG1_DlgObj.panelSetActive('PANELCARD_MENU');
DLG1_DlgObj.setValue('endtime',now)
DLG1_DlgObj.setValueFrom('poiid','tmppoiid');
mPoidId = DLG1_DlgObj.getValue('poiid');
mTmpPoidId = DLG1_DlgObj.getValue('tmppoiid');
if(mPoidId==0) alert(mPoidId);
if(mTmpPoidId==0) alert(mTmpPoidId);


setTimeout(function() {
	DLG1_DlgObj.buttonClick('BUTTON_DVSAVE_LSTVISITHEAD');
	},500)

setTimeout(function() {
	mAutoSave = DLG1_DlgObj.getValue('autosaveinv');

	if(mAutoSave==1){
		DLG1_DlgObj.synchronizeLists();
		var err = lObj.getAllErrors();
		console.log(err) ;
		mx =JSON.stringify(err);
		console.log(err) }
	},1000); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_81');










$e.add('DLG1.V.R1.BUTTON_87',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_ITEMS_ALL'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_87');

$e.add('DLG1.V.R1.BUTTON_141',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.refreshListData('LSTBASKETH'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_141');

















$e.add('DLG1.V.R1.BUTTON_91',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {mCmpId = DLG1_DlgObj.getValue('COMPANYID');
mBaskNbr = DLG1_DlgObj.getValue('BASKETNUM');
if(mBaskNbr == 0){
 alert('you have to enter a qty') ;
 return
}
var lObj = DLG1_DlgObj.getControl('LSTBASKETDET');
console.log(lObj._data);
mMedrep = DLG1_DlgObj.argumentValue('mMedrepId');
mmpoiid = mMedrep = DLG1_DlgObj.argumentValue('MPOIID');
mVisitid = DLG1_DlgObj.getValue('list::LSTVISITHEAD::id') ;
mpromd = DLG1_DlgObj.getValue('list::LSTBASKETH::basketdesc');
var now = new Date();
var mFlag = DLG1_DlgObj.getValue('flagadditem');
var mbasketid = DLG1_DlgObj.getValue('list::LSTBASKETH::id') ;
var i;
for (i = 0; i < lObj._data.length; i++) {
 mProdid = lObj._data[i].itemid;
 if(mProdid === null) mProdid="";
 mQty = lObj._data[i].qty;
 if(mQty === null) mQty = '' ;
 mProductCode = '';
 mDescription = lObj._data[i].description;
 if(mDescription === null) mDescription = '' ;
 mImage = lObj._data[i].ItemImage;
 if(mImage === null) mImage = '' ;
 mPrice = lObj._data[i].price ;
 if(mPrice===null) mPrice='' ;
 mUnitPrice = lObj._data[i].price;
 if(mUnitPrice === null) mUnitPrice='' ;
 mDiscount =  lObj._data[i].discount ;
 if(mDiscount === null) mDiscount='' ;
 mVat =  lObj._data[i].tva;
 if(mVat===null) mVat='';
 mqteinpack = lObj._data[i].qteinpack;
 if(mqteinpack===null) mqteinpack=0;
 mbonusinpack = lObj._data[i].bonusinpack;
 if(mbonusinpack===null) mbonusinpack=0;
 msellunit = lObj._data[i].sellunit;
 if(msellunit===null) msellunit='';
 mbonusunit = lObj._data[i].bonusunit;
 if(mbonusunit===null) bonusunit='';
 mQty = mQty * mBaskNbr
 mqteinpack = mqteinpack * mBaskNbr
 mbonusinpack = mbonusinpack * mBaskNbr
   mlinetot = mQty*mUnitPrice*((100-mDiscount)/100);
   mlinevat = (mQty*mUnitPrice*((100-mDiscount)/100))*mVat/100
 if(mFlag == 4){
  var listObj = DLG1_DlgObj.getControl('lstinvoices');
  var data =  {itemcode: mProdid, Visit_id: mVisitid, description: mDescription, ItemImage: mImage,qty: mQty,unitprice :mUnitPrice,discount :mDiscount ,vat :mVat,basketid :mbasketid,company_id :mCmpId, promotion :mpromd, qteinpack: mqteinpack ,bonusinpack: mbonusinpack ,sellunit: msellunit, bonusunit: mbonusunit,totline:mlinetot , totvat: mlinevat} ;
   listObj.addTableRow(data);
  console.log(data);
 }
 if(mFlag == 3){
  var listObj = DLG1_DlgObj.getControl('lstorders');
  var data =  {itemid: mProdid, visitid: mVisitid, description: mDescription, ItemImage: mImage, discount: mDiscount, qty: mQty,price :mPrice, vat: mVat,basketid :mbasketid,company_id :mCmpId, promotion :mpromd ,qteinpack: mqteinpack , bonusinpack: mbonusinpack ,sellunit: msellunit, bonusunit: mbonusunit,totline:mlinetot , totvat: mlinevat} ;
   listObj.addTableRow(data);
 }
};
if(mFlag == 4){
 DLG1_DlgObj.panelSetActive('PANELCARD_INVOICES');
}
if(mFlag == 3){
 DLG1_DlgObj.panelSetActive('PANELCARD_13');
}
DLG1_DlgObj.hideContainerWindow('WINDOW_BASKET'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_91');




$e.add('DLG1.V.R1.BUTTON_93',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var listObj = DLG1_DlgObj.getControl('LSTBASKETDET');
console.log(listObj);
mkey = listObj.selectionKey[0]
mItemId = DLG1_DlgObj.getValue('basketitem');
mDescription = DLG1_DlgObj.getValueDisplay('basketitem');
listObj.updateRow(mkey,{itemid: mItemId, description: mDescription});
DLG1_DlgObj.hideContainerWindow('WINDOW_15'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_93');




























$e.add('DLG1.V.R1.BUTTON_DVSAVE_LSTITEMS1',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var msellu = DLG1_DlgObj.getValue('dropsellunit');
var mbonusu = DLG1_DlgObj.getValue('dropbonusunit');
var mpackqty = parseInt(DLG1_DlgObj.getValue('lstitems_qty_pac'), 10);
var msmoq = parseInt(DLG1_DlgObj.getValue('smoq'), 10);
var mbonusq = parseInt(DLG1_DlgObj.getValue('lstitems_bonusq_pac'), 10);
var mbmoq = parseInt(DLG1_DlgObj.getValue('bmoq'), 10);
if (mpackqty !== 0 && (msmoq === 0 || mpackqty % msmoq !== 0)) {
  alert("Packing quantity must be a multiple of "+msmoq);
  return;
}
if (mbonusq !== 0 && (mbmoq === 0 || mbonusq % mbmoq !== 0)) {
  alert("Bonus quantity must be a multiple of "+mbmoq);
  return;
}
if ((mpackqty != "" && mpackqty != 0) && (msellu == "")) {
    alert("You have to enter a unit for the pack quantity.");
    return;
}
if ((mbonusq != "" && mbonusq != 0) && (mbonusu == "")) {
    alert("You have to enter a bonus unit.");
    return;
}
var lObj = DLG1_DlgObj.getControl('LSTITEMS');
setTimeout(function(){
 if(lObj.selection[0] != 'undefined') {
  lObj._selectedRow = lObj.selection[0];
 }
 lObj.updateListFromUXControls();
 DLG1_DlgObj.hideContainerWindow('WINDOW_17');
},150); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVSAVE_LSTITEMS1');

$e.add('DLG1.V.R1.BUTTON_DVSAVE_LSTITEMS1_1',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {setTimeout(function(){
DLG1_DlgObj.hideContainerWindow('WINDOW_17');
},150); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVSAVE_LSTITEMS1_1');


































$e.add('DLG1.V.R1.BUTTON_103',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_MENU'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_103');




$e.add('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTVACATION',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTVACATION');
lObj.newDetailViewRecord();
setTimeout(function(){
	DLG1_DlgObj.showContainerWindow(this,'WINDOW_VACATION');
},250); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVNEWRECORD_LSTVACATION');

$e.add('DLG1.V.R1.BUTTON_DVDELETERECORD_LSTVACATION',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTVACATION');
lObj.deleteRow();

 } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVDELETERECORD_LSTVACATION');

$e.add('DLG1.V.R1.BUTTON_DVRESET_LSTVACATION',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTVACATION');
lObj.resetForm({prompt: true});

 } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVRESET_LSTVACATION');

$e.add('DLG1.V.R1.BUTTON_DVSYNCHRONIZE_LSTVACATION',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.saveListEdits('LSTVACATION',{ 
	rows: 'allRows'
	}); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVSYNCHRONIZE_LSTVACATION');





$e.add('DLG1.V.R1.BUTTON_114',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {alert('syncing out of route');
	DLG1_DlgObj.refreshListData('LSTOFFROUTE');
DLG1_DlgObj.panelSetActive('PANELCARD_MENU'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_114');


$e.add('DLG1.V.R1.BUTTON_LISTSEARCHCLEAR_LSTPOI',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.getControl('LSTPOI').clearSearchList({searchMode : 'auto'});

 } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_LISTSEARCHCLEAR_LSTPOI');




$e.add('DLG1.V.R1.BUTTON_DVNEWRECORD_LSTPOI1',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_POI_DET'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVNEWRECORD_LSTPOI1');





$e.add('DLG1.V.R1.BUTTON_DVSAVE_LSTPOI_1',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {alert('syncing out of route');
 DLG1_DlgObj.refreshListData('LSTOFFROUTE');
DLG1_DlgObj.panelSetActive('PANELCARD_MENU'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVSAVE_LSTPOI_1');


















$e.add('DLG1.V.R1.BUTTON_DVSAVE_LSTPOI',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var lObj = DLG1_DlgObj.getControl('LSTPOI');
if(lObj.selection[0] != 'undefined') {
 lObj._selectedRow = lObj.selection[0];
}
lObj.updateListFromUXControls();
setTimeout(function(){
 DLG1_DlgObj.saveListEdits('LSTPOI',
     {
        rows: 'allRows',
         chunked: {allow: true},
      ajax: {
        onAjaxFail: function() { alert('Unable to sync.');},
         onDeviceOffline: function() {
          alert('Unable to sync. Device is offline.');
          DLG1_DlgObj.setValue('saving',0);} ,
             onServerNotAvailable: function() {
              alert('Unable to sync. Server is not available');
              DLG1_DlgObj.setValue('saving',0);},
             amountofdatatosend:'.3MB',
    checkifserveravailable: true ,
    maxspeedtestduration: 8200,
    onPoorConnection: function() {
     alert('you have a poor connection -2');
    DLG1_DlgObj.setValue('saving',0); } ,
              dirtyDetailViewMessage: 'd' ,
            performspeedtest: true ,
             timeOutnumber: 8200
         }
     }
 );
 },250); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVSAVE_LSTPOI');








$e.add('DLG1.V.R1.BUTTON_121',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {alert('a');
connectPrinter();
alert('b');
printLine('line 1');
printEscCode('0A');
printLine('line 2');
printLine('line 3');
printEscCode('0A');
printEscCode('0A');
printEscCode('0A');
printEscCode('0A');
printEscCode('0A');
return;
printText('testing-a/ntest 2a/ntestb {lf}polo');
printLine('testing-b  ');
printEscCode('$0A');
printLine('testing-c  ');
printEscCode('$0A');
printLine('testing-d  ');
printEscCode('$0d');
printLine('testing-e  ');
printEscCode('$18');
printLine('testing-f  ');
printEscCode('0A');
printLine('testing-g  ');
printEscCode('0A');
printEscCode('0D');
printLine('testing-h  ');
printEscCode('18');
printLine('testing-i  ');
printLine('testing-j  ');
printEscCode('0A');
printLine('l1/n');
printEscCode('0A');
printLine('l2/n');
printLine('              /n');
printLine('              /n');
printLine('              /n');
alert('c');
var string = 'Hello folks how are you doing today?';
var encodedString = btoa(string);
printBase64(encodedString);
printLine('1             /n');
printLine('2             /n');
printLine('3             /n');
printLine('4             /n');
printLine('5             /n');
disconnectPrinter(); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_121');

$e.add('DLG1.V.R1.BUTTON_120',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {BTPrinter.list(function(data){
		DLG1_DlgObj.setValue('textarea1','success');
		marv = '' ;
		for (let i = 0; i < data.length; i++) {
 		marv = marv +data[i]+'\n';
 		 console.log(data[i]);
 		 alert(data[i]);
		}
		DLG1_DlgObj.setValue('textarea1',marv);
		
	  },function(err){
 		DLG1_DlgObj.setValue('err','success');
    }); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_120');


$e.add('DLG1.V.R1.BUTTON_123',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var obj = DLG1_DlgObj._ls_getData('o');
DLG1_DlgObj._ls_deleteKeys(obj); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_123');

$e.add('DLG1.V.R1.BUTTON_DVDELETESTORAGE_LSTVISITHEAD',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {var ls = DLG1_DlgObj._localStorageSettings;
DLG1_DlgObj._persistToLocalStorageInitializeKeys(ls,'LSTVISITHEAD',true);

var obj = DLG1_DlgObj._ls_getData('lists:t');
DLG1_DlgObj._ls_deleteKeys(obj);


 } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_DVDELETESTORAGE_LSTVISITHEAD');




$e.add('DLG1.V.R1.BUTTON_126',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {mOp = DLG1_DlgObj.getValue('Planoppened');
if(mOp==1) {
 alert('syncing plan');
 DLG1_DlgObj.refreshListData('LSTROUTES');
}
DLG1_DlgObj.panelNavigate('PANELNAVIGATOR_1','historyback');
DLG1_DlgObj.setValue('Planoppened',0); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_126');





$e.add('DLG1.V.R1.BUTTON_127',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelNavigate('PANELNAVIGATOR_1','historyback'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_127');






$e.add('DLG1.V.R1.BUTTON_129',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_MENU'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_129');




$e.add('DLG1.V.R1.BUTTON_132',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_44'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_132');





$e.add('DLG1.V.R1.BUTTON_134',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_45'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_134');














$e.add('DLG1.V.R1.BUTTON_21',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_44'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_21');

$e.add('DLG1.V.R1.BUTTON_21_1',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_46'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_21_1');













$e.add('DLG1.V.R1.BUTTON_21_2',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_44'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_21_2');

$e.add('DLG1.V.R1.BUTTON_133',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {mDealt_Date = DLG1_DlgObj.getValue('Date');
mDeal_PoiId = DLG1_DlgObj.getValue('tmppoiid');
mDeal_Medredp = DLG1_DlgObj.getValue('repid');
mDeal_CompId = DLG1_DlgObj.getValue('COMPANYID');
mDealAmount = DLG1_DlgObj.getValue('deal_amount');
mDeal_roiDate = DLG1_DlgObj.getValue('deal_roi_date');
mDealType = DLG1_DlgObj.getValue('deal_type');
mDealItem1 = DLG1_DlgObj.getValue('deal_item1');
mDealItem1q = DLG1_DlgObj.getValue('deal_item1q');
mDealItem2 = DLG1_DlgObj.getValue('deal_item2');
mDealItem2q = DLG1_DlgObj.getValue('deal_item2q');
mDealItem3 = DLG1_DlgObj.getValue('deal_item3');
mDealItem3q = DLG1_DlgObj.getValue('deal_item3q');
mDealItem4 = DLG1_DlgObj.getValue('deal_item4');
mDealItem4q = DLG1_DlgObj.getValue('deal_item4q');

mdeal_source_sale = DLG1_DlgObj.getValue('deal_source_sale');
mdeal_source_name = DLG1_DlgObj.getValue('deal_source_name');
mdeal_phname = DLG1_DlgObj.getValue('deal_phname');
mdeal_ph_invno = DLG1_DlgObj.getValue('deal_ph_invno');
mdeal_ph_date = DLG1_DlgObj.getValue('deal_ph_date');
mdeal_pay_method = DLG1_DlgObj.getValue('deal_pay_method');
mdeal_bank = DLG1_DlgObj.getValue('deal_bank');

mdeal_bank_acc = DLG1_DlgObj.getValue('deal_bank_acc');
mdeal_id = DLG1_DlgObj.getValue('deal_id');
mdeal_coment = DLG1_DlgObj.getValue('deal_coment');
mdeal_pay = DLG1_DlgObj.getValue('deal_pay');



mdealData = {date: mDealt_Date, 
	poiid: mDeal_PoiId, 
	medrepid: mDeal_Medredp, company_id: mDeal_CompId, deal_amount: mDealAmount, deal_roi_date: mDeal_roiDate, deal_type: mDealType, deal_item1: mDealItem1, deal_item1q: mDealItem1q, deal_item2: mDealItem2, deal_item2q: mDealItem2q, deal_item3: mDealItem3, deal_item3q: mDealItem3q, deal_item4: mDealItem4, deal_item4q: mDealItem4q, deal_source_sale: mdeal_source_sale, deal_source_name: mdeal_source_name, deal_phname: mdeal_phname, deal_ph_invno: mdeal_ph_invno, deal_ph_date: mdeal_ph_date, deal_pay_method: mdeal_pay_method, deal_bank: mdeal_bank, deal_bank_acc: mdeal_bank_acc, deal_id: mdeal_id, deal_coment: mdeal_coment, deal_pay: mdeal_pay}


var listObj = DLG1_DlgObj.getControl('LSTDEALS');

listObj.addTableRow(mdealData);

setTimeout(function(){
	
	DLG1_DlgObj.setValue('deal_amount',0);
	DLG1_DlgObj.setValue('deal_roi_date','');
	DLG1_DlgObj.setValue('deal_type','');
	DLG1_DlgObj.setValue('deal_item1','');
	DLG1_DlgObj.setValue('deal_item1q',0);
	DLG1_DlgObj.setValue('deal_item2','');
	DLG1_DlgObj.setValue('deal_item2q',0);
	DLG1_DlgObj.setValue('deal_item3','');
	DLG1_DlgObj.setValue('deal_item3q',0);
	DLG1_DlgObj.setValue('deal_item4','');
	DLG1_DlgObj.setValue('deal_item4q',0);
	
	DLG1_DlgObj.setValue('deal_source_sale','');
	DLG1_DlgObj.setValue('deal_source_name','');
	DLG1_DlgObj.setValue('deal_phname','');
	DLG1_DlgObj.setValue('deal_ph_invno','');
	DLG1_DlgObj.setValue('deal_ph_date','');
	DLG1_DlgObj.setValue('deal_pay_method','');
	DLG1_DlgObj.setValue('deal_bank','');

	DLG1_DlgObj.setValue('deal_bank_acc','');
	DLG1_DlgObj.setValue('deal_id','');
	DLG1_DlgObj.setValue('deal_coment','');
	DLG1_DlgObj.setValue('deal_pay','');
	DLG1_DlgObj.panelSetActive('PANELCARD_MENU');
	DLG1_DlgObj.runAction('savedsuccessfully');
},1000); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_133');














$e.add('DLG1.V.R1.BUTTON_10',A5.d.evnts.click,function(e) {
var _disabled = this.disabled; if(typeof _disabled == 'undefined') _disabled = false; if(!_disabled) {;var flagLocked = false; if (typeof this._locked != 'undefined') flagLocked = this._locked;  if(!flagLocked) {DLG1_DlgObj.panelSetActive('PANELCARD_MENU'); } ; this._locked = true; flagLocked = true; var that = this; setTimeout(function() { that._locked = false; },500);}
},this,false,'DLG1.V.R1.BUTTON_10');

DLG1_DlgObj.prepare();DLG1_DlgObj.populate(DLG1_DlgObj.originalValues[0]);
DLG1_DlgObj._fireWatches(1);
DLG1_DlgObj._functions.listControlOrientationChange = function() { var e = {};
e.orientation = DLG1_DlgObj.getOrientation(); 

var lObj = DLG1_DlgObj.getControl('LSTITEMS');
if(lObj) {
	if(e.orientation == 'landscape') lObj.selectCurrentLayout('');
	else lObj.selectCurrentLayout('');
	var _r = lObj._selectedRow;
	if(typeof _r != 'undefined') {
		lObj.setValue(_r,false);
		lObj.scrollToItem(_r,{mode: 'into-view',animation: {allow: false,duration: 200},offset: {x: 0,y: 0}});
	}
}

};
if(!A5.flags.isMobile) $e.add(window,'resize',DLG1_DlgObj._functions.calcOrientation,null,false,'DLG1.DIALOG');
else $e.add(window,'orientationchange',DLG1_DlgObj._orientationChangeHandler,DLG1_DlgObj,true,'DLG1.DIALOG');
DLG1_DlgObj._functions.calcOrientation();

DLG1_DlgObj._functions._windowResize = function() {
	var _d = 50;


	if(typeof DLG1_DlgObj._windowResizeDelay != 'undefined') _d = DLG1_DlgObj._windowResizeDelay;
	clearTimeout(DLG1_DlgObj._wrTO);
	DLG1_DlgObj._wrTo = setTimeout(function() {
		DLG1_DlgObj._executeEvent('onWindowResize',{});
		if(DLG1_DlgObj._findActiveLayoutRule) DLG1_DlgObj._findActiveLayoutRule() 
		if(DLG1_DlgObj.resizeFormBoxes) { DLG1_DlgObj.resizeFormBoxes(); }
	},_d);
}
$e.add(window,'resize',DLG1_DlgObj._functions._windowResize,null,false,'DLG1.DIALOG');
setTimeout(function() {
	if(DLG1_DlgObj.resizeLists) { DLG1_DlgObj.resizeLists(); }  ;
	//do initial formbox resize
	if(DLG1_DlgObj.resizeFormBoxes) { DLG1_DlgObj.resizeFormBoxes(); }
	
	
},0);

;



























































































var listObj = DLG1_DlgObj.getControl('LIST2');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LIST2.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;

if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
DLG1_DlgObj._list_executeEvent('LIST2','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();





var listObj = DLG1_DlgObj.getControl('LSTROUTES');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTROUTES.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;

if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
DLG1_DlgObj._list_executeEvent('LSTROUTES','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();












var listObj = DLG1_DlgObj.getControl('LSTOFFROUTE');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTOFFROUTE.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;

if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
DLG1_DlgObj._list_executeEvent('LSTOFFROUTE','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();


































var listObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTVISITHEAD.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;

if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
DLG1_DlgObj._list_executeEvent('LSTVISITHEAD','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();


















































































































































var listObj = DLG1_DlgObj.getControl('LSTDISCUSSED');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTDISCUSSED.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;

if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
DLG1_DlgObj._list_executeEvent('LSTDISCUSSED','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();










var listObj = DLG1_DlgObj.getControl('LSTSAMPLES');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTSAMPLES.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;

if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
DLG1_DlgObj._list_executeEvent('LSTSAMPLES','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();













var listObj = DLG1_DlgObj.getControl('LSTORDERS');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.lstorders.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;

if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
DLG1_DlgObj._list_executeEvent('LSTORDERS','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();








var listObj = DLG1_DlgObj.getControl('LSTINVOICES');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.lstinvoices.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;

if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
DLG1_DlgObj._list_executeEvent('LSTINVOICES','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();








var listObj = DLG1_DlgObj.getControl('LSTRECEIPT');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTRECEIPT.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;

if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
DLG1_DlgObj._list_executeEvent('LSTRECEIPT','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();



























var listObj = DLG1_DlgObj.getControl('LSTUNPAIDINV');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTUNPAIDINV.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;
if(listObj) listObj._state._optimizedJSON = true;
if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '0|||N|MMEDREPID\n0|||N|POIDID\n0|||N|MPOIID\n29/04/2025|||D|MDATE\n0|||N|LOADTYPE\n0|||N|MCOMPID\n0|||N|SYNCINPROGRESS\n0|||N|MREPID\n|||D|MTDATE\n0|||N|SHOWALLDAYINPLAN\n0|||N|MREPID_1\n|||C|MMEDREPNAME\n|||C|MREGIONDESC\n|||C|MCOMPNAME\n0|||N|MHIDEBONUS\n';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
if(listObj) listObj._state.pageCount = 0;
DLG1_DlgObj._list_executeEvent('LSTUNPAIDINV','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();













var listObj = DLG1_DlgObj.getControl('LSTVISITNOTES');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTVISITNOTES.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;

if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
DLG1_DlgObj._list_executeEvent('LSTVISITNOTES','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();

























var listObj = DLG1_DlgObj.getControl('LSTMEDIALFILES');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.lstMedialFiles.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;
if(listObj) listObj._state._optimizedJSON = true;
if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '0|||N|MMEDREPID\n0|||N|POIDID\n0|||N|MPOIID\n29/04/2025|||D|MDATE\n0|||N|LOADTYPE\n0|||N|MCOMPID\n0|||N|SYNCINPROGRESS\n0|||N|MREPID\n|||D|MTDATE\n0|||N|SHOWALLDAYINPLAN\n0|||N|MREPID_1\n|||C|MMEDREPNAME\n|||C|MREGIONDESC\n|||C|MCOMPNAME\n0|||N|MHIDEBONUS\n';
listObj._state.order = 'Description';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
if(listObj) listObj._state.pageCount = 0;
DLG1_DlgObj._list_executeEvent('LSTMEDIALFILES','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();































var listObj = DLG1_DlgObj.getControl('LSTBASKETH');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTBASKETH.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;
if(listObj) listObj._state._optimizedJSON = true;
if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '0|||N|MMEDREPID\n0|||N|POIDID\n0|||N|MPOIID\n29/04/2025|||D|MDATE\n0|||N|LOADTYPE\n0|||N|MCOMPID\n0|||N|SYNCINPROGRESS\n0|||N|MREPID\n|||D|MTDATE\n0|||N|SHOWALLDAYINPLAN\n0|||N|MREPID_1\n|||C|MMEDREPNAME\n|||C|MREGIONDESC\n|||C|MCOMPNAME\n0|||N|MHIDEBONUS\n';
listObj._state.order = 'Description';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
if(listObj) listObj._state.pageCount = 0;
DLG1_DlgObj._list_executeEvent('LSTBASKETH','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();








var listObj = DLG1_DlgObj.getControl('LSTBASKETDET');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTBASKETDET.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;
if(listObj) listObj._state._optimizedJSON = true;
if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '0|||N|MMEDREPID\n0|||N|POIDID\n0|||N|MPOIID\n29/04/2025|||D|MDATE\n0|||N|LOADTYPE\n0|||N|MCOMPID\n0|||N|SYNCINPROGRESS\n0|||N|MREPID\n|||D|MTDATE\n0|||N|SHOWALLDAYINPLAN\n0|||N|MREPID_1\n|||C|MMEDREPNAME\n|||C|MREGIONDESC\n|||C|MCOMPNAME\n0|||N|MHIDEBONUS\n';
listObj._state.order = 'Description';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
if(listObj) listObj._state.pageCount = 0;
DLG1_DlgObj._list_executeEvent('LSTBASKETDET','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();

































































var listObj = DLG1_DlgObj.getControl('LSTITEMS');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 0;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTITEMS.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;
if(listObj) listObj._state._optimizedJSON = true;
if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '0|||N|MMEDREPID\n0|||N|POIDID\n0|||N|MPOIID\n29/04/2025|||D|MDATE\n0|||N|LOADTYPE\n0|||N|MCOMPID\n0|||N|SYNCINPROGRESS\n0|||N|MREPID\n|||D|MTDATE\n0|||N|SHOWALLDAYINPLAN\n0|||N|MREPID_1\n|||C|MMEDREPNAME\n|||C|MREGIONDESC\n|||C|MCOMPNAME\n0|||N|MHIDEBONUS\n';
listObj._state.order = 'Description';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
DLG1_DlgObj._list_executeEvent('LSTITEMS','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();







var listObj = DLG1_DlgObj.getControl('LSTVACATION');
if(listObj) listObj._state.recordCount = 22;
if(listObj) listObj._state.recordCountFormatted = '22';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 1;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTVACATION.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;
if(listObj) listObj._state._optimizedJSON = true;
if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = 'company_id = :MCOMPID  AND  medred_id = :MMEDREPID';
if(listObj) listObj._state.whereParameters = '0|||N|MMEDREPID\n0|||N|POIDID\n0|||N|MPOIID\n29/04/2025|||D|MDATE\n0|||N|LOADTYPE\n0|||N|MCOMPID\n0|||N|SYNCINPROGRESS\n0|||N|MREPID\n|||D|MTDATE\n0|||N|SHOWALLDAYINPLAN\n0|||N|MREPID_1\n|||C|MMEDREPNAME\n|||C|MREGIONDESC\n|||C|MCOMPNAME\n0|||N|MHIDEBONUS\n';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
if(listObj) listObj._state.pageCount = 1;
DLG1_DlgObj._list_executeEvent('LSTVACATION','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();













var listObj = DLG1_DlgObj.getControl('LSTPOI');
if(listObj) listObj._state.recordCount = 0;
if(listObj) listObj._state.recordCountFormatted = '0';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 1;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTPOI.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;
if(listObj) listObj._state._optimizedJSON = true;
if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = 'company_id = :MCOMPID  AND  medred_id = :MMEDREPID';
if(listObj) listObj._state.whereParameters = '0|||N|MMEDREPID\n0|||N|POIDID\n0|||N|MPOIID\n29/04/2025|||D|MDATE\n0|||N|LOADTYPE\n0|||N|MCOMPID\n0|||N|SYNCINPROGRESS\n0|||N|MREPID\n|||D|MTDATE\n0|||N|SHOWALLDAYINPLAN\n0|||N|MREPID_1\n|||C|MMEDREPNAME\n|||C|MREGIONDESC\n|||C|MCOMPNAME\n0|||N|MHIDEBONUS\n';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
if(listObj) listObj._state.pageCount = 1;
DLG1_DlgObj._list_executeEvent('LSTPOI','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();





















































var listObj = DLG1_DlgObj.getControl('LSTDEALS');
if(listObj) listObj._state.recordCount = 11;
if(listObj) listObj._state.recordCountFormatted = '11';
if(listObj) listObj._state.lastBreakValue = '<None>';
if(listObj) listObj._state.pageCount = 1;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.LSTDEALS.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = false;
if(listObj) listObj._state._optimizedJSON = true;
if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = '';
if(listObj) listObj._state.whereParameters = '0|||N|MMEDREPID\n0|||N|POIDID\n0|||N|MPOIID\n29/04/2025|||D|MDATE\n0|||N|LOADTYPE\n0|||N|MCOMPID\n0|||N|SYNCINPROGRESS\n0|||N|MREPID\n|||D|MTDATE\n0|||N|SHOWALLDAYINPLAN\n0|||N|MREPID_1\n|||C|MMEDREPNAME\n|||C|MREGIONDESC\n|||C|MCOMPNAME\n0|||N|MHIDEBONUS\n';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
if(listObj) listObj._state.pageCount = 1;
DLG1_DlgObj._list_executeEvent('LSTDEALS','afterRenderComplete',{});

if(listObj._refreshStateMessages) listObj._refreshStateMessages();



















































var listObj = DLG1_DlgObj.getControl('LSTGEOLOC');
if(listObj) listObj._state.recordCount = 2224;
if(listObj) listObj._state.recordCountFormatted = '2,224';
if(listObj) listObj._state.lastBreakValue = '';
if(listObj) listObj._state.pageCount = 112;
if(listObj) listObj._state.pageSize = 20;
if(listObj) {var ele = $('DLG1.lstgeoloc.RECORDCOUNT'); if(ele) ele.innerHTML = listObj._state.recordCountFormatted;};
if(listObj) listObj._state.paginated = true;
if(listObj) listObj._state._optimizedJSON = false;
if(listObj) listObj._state.highlight = {  };
if(listObj) listObj._state.whereClause = 'company_id = :MCOMPID  AND  user_id = :MMEDREPID';
if(listObj) listObj._state.whereParameters = '0|||N|MMEDREPID\n0|||N|POIDID\n0|||N|MPOIID\n29/04/2025|||D|MDATE\n0|||N|LOADTYPE\n0|||N|MCOMPID\n0|||N|SYNCINPROGRESS\n0|||N|MREPID\n|||D|MTDATE\n0|||N|SHOWALLDAYINPLAN\n0|||N|MREPID_1\n|||C|MMEDREPNAME\n|||C|MREGIONDESC\n|||C|MCOMPNAME\n0|||N|MHIDEBONUS\n';
listObj._state.order = '';
		
		var flagPersist = false;
		if(typeof listObj._flagPersistDataOK != 'undefined') { 
			if(listObj._flagPersistDataOK) { 
				var data = listObj._data;
				listObj.persistToStorage({mode:'populate', data: data, submode: 'ListViewData'});
			}
		}
		
		
;
if(listObj) listObj._state.pageCount = 112;
if(listObj) listObj.setDisplay('content-footer',false);
DLG1_DlgObj._list_executeEvent('LSTGEOLOC','afterRenderComplete',{});
listObj._recordNavigatorLinks = ['1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','112'];
if(listObj._refreshStateMessages) listObj._refreshStateMessages();



var obj = DLG1_DlgObj.getControl('LIST2');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTROUTES');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTOFFROUTE');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTVISITHEAD');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTDISCUSSED');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTSAMPLES');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTORDERS');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTINVOICES');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTRECEIPT');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTVISITNOTES');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTBASKETH');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTBASKETDET');
obj._hasBeenRendered = false;
var obj = DLG1_DlgObj.getControl('LSTPOI');
obj._hasBeenRendered = false;
;
var lObj = DLG1_DlgObj.getControl('LIST2');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;;
var lObj = DLG1_DlgObj.getControl('LSTROUTES');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;;
var lObj = DLG1_DlgObj.getControl('LSTOFFROUTE');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;;
var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTDISCUSSED');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTSAMPLES');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTORDERS');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTINVOICES');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTRECEIPT');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTVISITNOTES');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTUNPAIDINV');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTMEDIALFILES');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTBASKETH');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTBASKETDET');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTITEMS');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVISITHEAD');
var __obj = {
	"sortCodedValue_poiid": function(d) 	{
		var name = 'poiid';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}

};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTVACATION');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVACATION');
var __obj = {
	"sortCodedValue_vacation_activity": function(d) 	{
		var name = 'vacation_activity';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}
,
	"lookupvalue": {
		"vacation_activity": [
{
	"value": "1",
	"html": "non field activity"
},
{
	"value": "2",
	"html": "Vacation"
}]
	}
};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTPOI');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVACATION');
var __obj = {
	"sortCodedValue_vacation_activity": function(d) 	{
		var name = 'vacation_activity';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}
,
	"lookupvalue": {
		"vacation_activity": [
{
	"value": "1",
	"html": "non field activity"
},
{
	"value": "2",
	"html": "Vacation"
}]
	}
};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTDEALS');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVACATION');
var __obj = {
	"sortCodedValue_vacation_activity": function(d) 	{
		var name = 'vacation_activity';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}
,
	"lookupvalue": {
		"vacation_activity": [
{
	"value": "1",
	"html": "non field activity"
},
{
	"value": "2",
	"html": "Vacation"
}]
	}
};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()
;
var lObj = DLG1_DlgObj.getControl('LSTGEOLOC');
var __obj = {
};
if(lObj) $u.o.assign(lObj,__obj);;var lObj = DLG1_DlgObj.getControl('LSTVACATION');
var __obj = {
	"sortCodedValue_vacation_activity": function(d) 	{
		var name = 'vacation_activity';
		var val = this.resolveCodedValue(name,d[name])
		return val
	}
	,
	"resolveCodedValue": function(name,value) { 	var lv = false;
	try{
		var lv = this.lookupvalue[name];
	}catch(e) { }
	
	if(!lv) { 
		try{
			var func = this.lookupFunctions[name];
			lv = func.call()
			if(lv) { 
				var lv2 = [];
				for(var i = 0; i < lv.length; i++) { 
					var x = lv[i].split('|')
					lv2.push({value: x[0], html: x[1]});
				}
				lv = lv2 ;
			}
		}catch(e)  { }
		
	
	}
	if(value == null) value = '';
	
	if(!lv) return value;
	var val = '';
	for(var i = 0; i < lv.length; i++) { 
		if(lv[i].value == value) return lv[i].html;
	}
	
	return value; 
}
,
	"lookupvalue": {
		"vacation_activity": [
{
	"value": "1",
	"html": "non field activity"
},
{
	"value": "2",
	"html": "Vacation"
}]
	}
};
if(lObj) $u.o.assign(lObj,__obj);
if(lObj) lObj.refresh()





























































setTimeout(function() { },0);
DLG1_DlgObj._listsWithJSFuncDataSource = {};

DLG1_DlgObj._paintSliderMessage('','SLIDERSAVING','\'Saving \'+value+\' %\'');
DLG1_DlgObj._executeEvent('onInitializeComplete');
DLG1_DlgObj.initialized = true;




var eleS = $('DLG1.V.R1.INJECTIBLE_ORDERTOT');
var eleT = $('DLG1.45278e2a-78a5-4559-84c5-5f73afe20bba');
		
		if(eleT.firstChild) {
			if(eleT.firstChild.nodeType == 1) { 
				if(eleT.firstChild.id == eleT.id + '.SCROLLWRAPPER') eleT = eleT.firstChild;
			}
		} 

if(eleS && eleT) {eleT.appendChild(eleS); eleS.style.display = '';}
var eleS = $('DLG1.V.R1.INJECTIBLE_INVTOT');
var eleT = $('DLG1.d4d98a91_8cde_4270_a872_4e632786a946');
		
		if(eleT.firstChild) {
			if(eleT.firstChild.nodeType == 1) { 
				if(eleT.firstChild.id == eleT.id + '.SCROLLWRAPPER') eleT = eleT.firstChild;
			}
		} 

if(eleS && eleT) {eleT.appendChild(eleS); eleS.style.display = '';}
;

			
	
		
		
if(typeof DLG1_DlgObj._injectibleContent == 'undefined') DLG1_DlgObj._injectibleContent = {};
DLG1_DlgObj._injectibleContent[''] = { 
	target: { 
		id: 'DLG1.V.R1.CONTROLBAR_28.DISCLOSURE.Disclosure2',
		removeContainer: true
	}
}

var eleS = $('DLG1.V.R1.');
var eleT = $(DLG1_DlgObj._injectibleContent[''].target.id);

if(eleT.firstChild) {
	if(eleT.firstChild.nodeType == 1) { 
		if(eleT.firstChild.id == eleT.id + '.SCROLLWRAPPER') eleT = eleT.firstChild;
	}
} 

if(eleS && eleT) { 
	
	eleT.appendChild(eleS);
	eleS.style.display = '';
}









			
	
		
		
if(typeof DLG1_DlgObj._injectibleContent == 'undefined') DLG1_DlgObj._injectibleContent = {};
DLG1_DlgObj._injectibleContent[''] = { 
	target: { 
		id: 'DLG1.V.R1.CONTROLBAR_30.DISCLOSURE.Disclosure2',
		removeContainer: true
	}
}

var eleS = $('DLG1.V.R1.');
var eleT = $(DLG1_DlgObj._injectibleContent[''].target.id);

if(eleT.firstChild) {
	if(eleT.firstChild.nodeType == 1) { 
		if(eleT.firstChild.id == eleT.id + '.SCROLLWRAPPER') eleT = eleT.firstChild;
	}
} 

if(eleS && eleT) { 
	
	eleT.appendChild(eleS);
	eleS.style.display = '';
}









			
	
		
		
if(typeof DLG1_DlgObj._injectibleContent == 'undefined') DLG1_DlgObj._injectibleContent = {};
DLG1_DlgObj._injectibleContent[''] = { 
	target: { 
		id: 'DLG1.V.R1.CONTROLBAR_26.DISCLOSURE.Disclosure1',
		removeContainer: true
	}
}

var eleS = $('DLG1.V.R1.');
var eleT = $(DLG1_DlgObj._injectibleContent[''].target.id);

if(eleT.firstChild) {
	if(eleT.firstChild.nodeType == 1) { 
		if(eleT.firstChild.id == eleT.id + '.SCROLLWRAPPER') eleT = eleT.firstChild;
	}
} 

if(eleS && eleT) { 
	
	eleT.appendChild(eleS);
	eleS.style.display = '';
}









			
	
		
		
if(typeof DLG1_DlgObj._injectibleContent == 'undefined') DLG1_DlgObj._injectibleContent = {};
DLG1_DlgObj._injectibleContent[''] = { 
	target: { 
		id: 'DLG1.V.R1.CONTROLBAR_27_1.DISCLOSURE.Disclosure1',
		removeContainer: true
	}
}

var eleS = $('DLG1.V.R1.');
var eleT = $(DLG1_DlgObj._injectibleContent[''].target.id);

if(eleT.firstChild) {
	if(eleT.firstChild.nodeType == 1) { 
		if(eleT.firstChild.id == eleT.id + '.SCROLLWRAPPER') eleT = eleT.firstChild;
	}
} 

if(eleS && eleT) { 
	
	eleT.appendChild(eleS);
	eleS.style.display = '';
}









			
	
		
		
if(typeof DLG1_DlgObj._injectibleContent == 'undefined') DLG1_DlgObj._injectibleContent = {};
DLG1_DlgObj._injectibleContent['INJECTIBLE_3'] = { 
	target: { 
		id: 'DLG1.V.R1.CONTROLBAR_31.DISCLOSURE.Disclosure1',
		removeContainer: true
	}
}

var eleS = $('DLG1.V.R1.INJECTIBLE_3');
var eleT = $(DLG1_DlgObj._injectibleContent['INJECTIBLE_3'].target.id);

if(eleT.firstChild) {
	if(eleT.firstChild.nodeType == 1) { 
		if(eleT.firstChild.id == eleT.id + '.SCROLLWRAPPER') eleT = eleT.firstChild;
	}
} 

if(eleS && eleT) { 
	
	eleT.appendChild(eleS);
	eleS.style.display = '';
}









			
	
		
		
if(typeof DLG1_DlgObj._injectibleContent == 'undefined') DLG1_DlgObj._injectibleContent = {};
DLG1_DlgObj._injectibleContent['INJECTIBLE_3'] = { 
	target: { 
		id: 'DLG1.V.R1.CONTROLBAR_31.DISCLOSURE.injectiblesearch',
		removeContainer: true
	}
}

var eleS = $('DLG1.V.R1.INJECTIBLE_3');
var eleT = $(DLG1_DlgObj._injectibleContent['INJECTIBLE_3'].target.id);

if(eleT.firstChild) {
	if(eleT.firstChild.nodeType == 1) { 
		if(eleT.firstChild.id == eleT.id + '.SCROLLWRAPPER') eleT = eleT.firstChild;
	}
} 

if(eleS && eleT) { 
	
	eleT.appendChild(eleS);
	eleS.style.display = '';
}








;DLG1_DlgObj.setStateInfo({ 	__args_n_MMEDREPID: '0', 	__args_n_POIDID: '0', 	__args_n_MPOIID: '0', 	__args_d_MDATE: '29/04/2025', 	__args_n_LOADTYPE: '0', 	__args_n_MCOMPID: '0', 	__args_n_SYNCINPROGRESS: '0', 	__args_n_MREPID: '0', 	__args_d_MTDATE: '', 	__args_n_SHOWALLDAYINPLAN: '0', 	__args_n_MREPID_1: '0', 	__args_c_MMEDREPNAME: '', 	__args_c_MREGIONDESC: '', 	__args_c_MCOMPNAME: '', 	__args_n_MHIDEBONUS: '0', 	argValuesENC: '7C3tO+HPao0zNV11hCNhkXROUiAe0lvZWY7Xx6LngtmeYNlvKd03vaMUf1FQyyDMHkaLn31fVytMkjMWFQJW2XqMjeADGi+MZr5vQEverln7vv/ExOy11CO5U6OCKIW5xk/RPtEPTtpLUWuGxaDa3HDVcNxiVnKPy2PmHp+TupEtDoyENV9Li96dvb8Zjqpz6lA4RhaGbvI5OmlzL9rIQgjCxbDxgLzdtDhIhuVZuWiFtCME4HxXZsWL30b7KTiujMrk1Fh6i3wvYS53Qmj3UTanKeGj/7CYkI69dgH+6J3xzxGhnbmMpc1J3C7EyHqlgp+y/E1AYDYe+mKQZRi1U22b49ETptrrYFQf0LJZclYqWWyNyf3wepfMvfGtXo92HbWyWbgqR80iV9S8MS2vnkLWxls3ihz4+rE6Rn92ewOFnEmiYsSBnNmw1vPl6Y2/Pp445QbO2RKBsFj022CwDaiFYRBL2gXVrdeAdZOAWH47KJ8VaVdzZ16dzih1cjdMQd6dvziuWArxFAFtF7I18IIVkF4mw4q0p/Qbrw2s3HMRG0oDezwipbUNB33DenwSKfzyAvUY6O3Sz+1xAsTrQQ==', 	__debugInfo: 'ssi-6014' });//ssi-6014;
;


setTimeout(function() { ;
;
DLG1_DlgObj._onRenderComplete = function() { var a = DLG1_DlgObj._listControls;
if(typeof a != 'undefined') { 
	for(var i = 0; i < a.length; i++) {
		var obj = DLG1_DlgObj.getControl(a[i])
		if(obj._refreshStateMessages) obj._refreshStateMessages();
	}
};
var flagStaticHTML = DLG1_DlgObj.__flagIsStaticHTML
if(typeof flagStaticHTML == 'undefined') flagStaticHTML = false; 
if(flagStaticHTML) { 

	DLG1_DlgObj.ajaxCallback('','','a5dialogHelper_staticHTMLInitialCallback')
}

var href = window.location.href;
DLG1_DlgObj.setStateInfo({ 'locationHref' : href}); 

DLG1_DlgObj._runJSOnLoad(); DLG1_DlgObj._findActiveLayoutRule(); }; 

var winObj = A5.windows.getFromElement(DLG1_DlgObj.dialogId + '.R1');
if(winObj) { 
	if(typeof winObj._uxComponents == 'undefined') winObj._uxComponents = [];
	winObj._uxComponents.push(DLG1_DlgObj.dialogId);
	

	
}
;
var pObj = window['DLG1_PanelObj'];
if(pObj) pObj.refresh(true);
;	
//this code ensures that content is shown in the mobile peview window even if the content does not use Panels
var eled = $('device.screen')
if(eled) { 
	eled2 = eled.firstChild 
	eles = $('DLG1.R1');
	try{eled2.appendChild(eles);}catch(e) { };
};

DLG1_DlgObj.setStateInfo({'__locationhref':location.href})

///////////
if(DLG1_DlgObj.__restorePanelSizes) {DLG1_DlgObj.__restorePanelSizes();}
setTimeout(function(){ var pObj = window['DLG1_PanelObj']; if(pObj) pObj.refresh();},100);;setTimeout(function() { if(DLG1_DlgObj) {var obj = DLG1_DlgObj.getPanelObject();		if(obj && obj.resize && typeof obj.resize == 'function') obj.resize();			}},100);
setTimeout(function() {
	DLG1_DlgObj._executeEvent('onRenderComplete'); 
	var ele = window.frameElement;
if (ele) {
	var panelCardName = $ga(ele,'A5-PARENTPANEL');
	var flagDoResize = true;
	var flagResize = $ga(ele,'A5-RESIZE');
	if(flagResize =='NO') flagDoResize = false
	
	if(panelCardName) {
		var po = DLG1_DlgObj.getParentObject();
		if(po) var pId = po.panelGetId(panelCardName,'body');
		var pEle = parent.$(pId);
		ele.style.width = '100%';
		if(pEle) ele.style.height = pEle.style.height;
		DLG1_DlgObj._iframeResizeFunc = function() {
			var ele = parent.$(this.getAttribute('CHILDUXIFRAME'));
			if(ele) ele.style.height = this.style.height;
		 }
		parent.$e.add(pEle,'a5resize',DLG1_DlgObj._iframeResizeFunc);
		if(pEle) pEle.setAttribute('CHILDUXIFRAME',ele.id);
		DLG1_DlgObj._onDestroy = function() { 
			parent.$e.remove(pEle,'a5resize',DLG1_DlgObj._iframeResizeFunc);
		}
	} else if(flagDoResize) { 
		ele.style.width = '100%';
		var _height = ele.contentDocument.documentElement.scrollHeight + 'px';
		ele.style.height = _height;
		var observer = new ResizeObserver(function(){
			var _height = ele.contentDocument.documentElement.scrollHeight + 'px';
			ele.style.height = _height;
			});
		observer.observe(ele.contentDocument.documentElement);
	}
}
;DLG1_DlgObj.refreshListData('LSTUNPAIDINV,lstMedialFiles');
var options = {mode: 'incremental'};DLG1_DlgObj.refreshListData('LSTVACATION,LSTDEALS,lstgeoloc',options);
;
	DLG1_DlgObj.flagRenderComplete = true;
	var _flagPGApp = false;
	if(typeof _phoneGapSettings == 'function') {
		_flagPGApp = true;
		/*
		if(typeof cordova == 'object') {
			DLG1_DlgObj._cordovaReady = true;
		} else {
			DLG1_DlgObj._cordovaReady = false;
		};
		*/
	};



	//alert('is a pg app: ' + _flagPGApp + '  _cordovaReady: ' + DLG1_DlgObj._cordovaReady );
	if(!_flagPGApp) {
		DLG1_DlgObj._restoreFromLocalStorage();
	} else {

		//phonegap app, but phonegap may not yet be loaded
		//alert('register the _restoreFormLocalStorage to fire when phonegap is ready');

		DLG1_DlgObj._delayTillPhoneGapReady(DLG1_DlgObj._restoreFromLocalStorage,DLG1_DlgObj);
	}

 },0);
 
 
 
;
DLG1_DlgObj._setScreenHeight = function() {
try{
var s = DLG1_DlgObj.getSize();
var ele = DLG1_DlgObj.getPointer('CONTAINER_1');
if(ele) ele.style.height = (s.height/10*3)+'px';

}catch(err) { };
};

$e.add(window,'resize',DLG1_DlgObj._setScreenHeight,DLG1_DlgObj,true,'DLG1.DIALOG')
DLG1_DlgObj._setScreenHeight();
setTimeout(function() { 
	var key = 'INSTANCEGUID_' + DLG1_DlgObj.componentGUID;
	var instanceGuid = localStorage.getItem(key)
	if(instanceGuid == null || instanceGuid == '' || typeof instanceGuid == 'undefined') { 
		var instanceGuid = A5.UUID()
		localStorage.setItem(key,instanceGuid)
	} else { 
	}
	DLG1_DlgObj.instanceGUID = instanceGuid;
},0);
;

var o2 = 'portrait';
if(window.innerHeight < window.innerWidth) o2 = 'landscape';
DLG1_DlgObj._screen = {h: window.innerHeight, w: window.innerWidth, o: o2};

DLG1_DlgObj._getOnlineStatus();
try {
$e.removeGroup('window_offline_event');
$e.add(window,'offline',function() { if(DLG1_DlgObj) DLG1_DlgObj._fireOnConnectionChangeEvent('offline') }, null,false,'window_offline_event');
$e.add(window,'online',function() {  if(DLG1_DlgObj) DLG1_DlgObj._fireOnConnectionChangeEvent('online') }, null,false,'window_offline_event')
//window.addEventListener("offline",function() {  DLG1_DlgObj._fireOnConnectionChangeEvent('offline') });
//window.addEventListener("online",function() { DLG1_DlgObj._fireOnConnectionChangeEvent('online') });
} catch(err){}



setTimeout(function() {$e.execute('device.screen','a5resize')},1);
;

if(DLG1_DlgObj.restoreListLayouts) DLG1_DlgObj.restoreListLayouts();

},0);;
var lObj = DLG1_DlgObj.getControl('LSTROUTES');
if(lObj) lObj._menuSettings['MENU1'].menuData = [
{
	"html": "Start Visit",
	"icon": "doctor-consultation.png",
	"onClick": function(dn) {

setTimeout(function() { 
	DLG1_DlgObj.setValue('phoneorder',0);
	DLG1_DlgObj.setValueFrom('poiname','list::LSTROUTES::POINAME') ;
	DLG1_DlgObj.setValueFrom('poitype','list::LSTROUTES::POI_TYPE');
	DLG1_DlgObj.setValueFrom('besttime','list::LSTROUTES::BESTTIME');
	DLG1_DlgObj.setValueFrom('region','list::LSTROUTES::REGION');
	DLG1_DlgObj.setValueFrom('comment','list::LSTROUTES::COMMENT');
	DLG1_DlgObj.setValueFrom('phoneno','list::LSTROUTES::PHONENO');
	DLG1_DlgObj.setValueFrom('route','list::LSTROUTES::route_id');
	DLG1_DlgObj.setValueFrom('poiid','list::LSTROUTES::poiid');
	DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTROUTES::poiid');
	DLG1_DlgObj.setValueFrom('pricelist','list::LSTROUTES::pricelist');
	DLG1_DlgObj.setValueFrom('txtpoilat','list::LSTROUTES::LAT') ;
	DLG1_DlgObj.setValueFrom('txtpoilong','list::LSTROUTES::LONT') ;
//	DLG1_DlgObj.runAction('readbalance');

	setTimeout(makeVisit,750);

},300);}
},
{
	"html": "Visit History",
	"icon": "clock.png",
	"onClick": function(dn) {

setTimeout(function() { 
	DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTROUTES::poiid');
	DLG1_DlgObj.panelSetActive('PANELCARD_42');
	DLG1_DlgObj.runAction('open_visitHistory');
},300);}
},
{
	"html": "Direction",
	"icon": "arrows.png",
	"onClick": function(dn) {
setTimeout(function(){
	const latitude = DLG1_DlgObj.getValue('list::LSTROUTES::LAT') ; // Replace with desired latitude
	const longitude = DLG1_DlgObj.getValue('list::LSTROUTES::LONT')
	openGoogleMaps(latitude, longitude);
	},300);}
},
{
	"html": "Skip Stop",
	"icon": "skip.png",
	"onClick": function(dn) {

setTimeout(function() { 
	DLG1_DlgObj.runAction('SkipStop');
},300);}
},
{
	"html": "Update POI Location",
	"icon": "rotate.png",
	"onClick": function(dn) {

/*
TIP: This is a system comment that is added automatically every time you edit this code.
To suppress this system comment, add this comment to your code: //nosystemcomment

TIP: To close the menu before the menu action is executed use this pattern:


//400ms setTimeout to allow animation to complete
*/
mexclloc = DLG1_DlgObj.getValue('list::LSTROUTES::hasexclloc');
if (mexclloc >= 1)  {
	alert('Already confirmed by the excellence team');
	return;
};
	
mrep = DLG1_DlgObj.getValue('repid');

mlat = DLG1_DlgObj.getValue('list::LSTROUTES::LAT');
mlng = DLG1_DlgObj.getValue('list::LSTROUTES::LONT');
if (mlat !== 0 && mlat) {
    // mlat is not 0, null, or an empty string
    // Do something
    	if (mrep<900000)  {
			alert('Not allowed! location already registered');

		}
	else {
		setTimeout(function() { 
			DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTROUTES::poiid');	
			DLG1_DlgObj.setValue('DEVLONG',mlng);
			DLG1_DlgObj.setValue('DEVLAT',mlat);
		
			DLG1_DlgObj.runAction('updatepoiloc_existing');
			},400);
		
		 }


} else {
    // mlat is 0, null, or an empty string
    // Do something else
	setTimeout(function() { 
		DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTROUTES::poiid');	
		DLG1_DlgObj.runAction('updatepoiloc');
	},400);
}}
},
{
	"html": "Work Order (Message)",
	"icon": "planning_16759800.png",
	"onClick": function(dn) {

setTimeout(function() { 
	
	DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTROUTES::poiid');
	
	setTimeout(function(){
		DLG1_DlgObj.runAction('Open_Message2');
		DLG1_DlgObj.panelSetActive('PANELCARD_42');
	},750);
	
},400);}
},
{
	"html": "Phone Order",
	"icon": "phoneorder.png",
	"onClick": function(dn) {



setTimeout(function() { 
	DLG1_DlgObj.setValue('phoneorder',1);
	DLG1_DlgObj.setValueFrom('poiname','list::LSTROUTES::POINAME') ;
	DLG1_DlgObj.setValueFrom('poitype','list::LSTROUTES::POI_TYPE');
	DLG1_DlgObj.setValueFrom('besttime','list::LSTROUTES::BESTTIME');
	DLG1_DlgObj.setValueFrom('region','list::LSTROUTES::REGION');
	DLG1_DlgObj.setValueFrom('comment','list::LSTROUTES::COMMENT');
	DLG1_DlgObj.setValueFrom('phoneno','list::LSTROUTES::PHONENO');
	DLG1_DlgObj.setValueFrom('route','list::LSTROUTES::route_id');
	DLG1_DlgObj.setValueFrom('poiid','list::LSTROUTES::poiid');
	DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTROUTES::poiid');
	DLG1_DlgObj.setValueFrom('pricelist','list::LSTROUTES::pricelist');
	DLG1_DlgObj.setValueFrom('txtpoilat','list::LSTROUTES::LAT') ;
	DLG1_DlgObj.setValueFrom('txtpoilong','list::LSTROUTES::LONT') ;
//	DLG1_DlgObj.runAction('readbalance');

	setTimeout(makeVisit,750);

},300);}
}];

var lObj = DLG1_DlgObj.getControl('LSTOFFROUTE');
if(lObj) lObj._menuSettings['MENU'].menuData = [
{
	"html": "Start Visit",
	"icon": "doctor-consultation.png",
	"onClick": function(dn) {

DLG1_DlgObj.runAction('showwait1');
setTimeout(function() { 
	DLG1_DlgObj.setValue('phoneorder',0);
	DLG1_DlgObj.setValueFrom('poiname','list::LSTOFFROUTE::POINAME') ;
	DLG1_DlgObj.setValueFrom('poitype','list::LSTOFFROUTE::POI_TYPE');
	DLG1_DlgObj.setValueFrom('besttime','list::LSTOFFROUTE::BESTTIME');
	DLG1_DlgObj.setValueFrom('region','list::LSTOFFROUTE::REGION');
	DLG1_DlgObj.setValueFrom('comment','list::LSTOFFROUTE::COMMENT');
	DLG1_DlgObj.setValueFrom('phoneno','list::LSTOFFROUTE::PHONENO');
	DLG1_DlgObj.setValue('route',0);
	DLG1_DlgObj.setValueFrom('poiid','list::LSTOFFROUTE::poiid');
	DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTOFFROUTE::poiid');
	DLG1_DlgObj.setValueFrom('pricelist','list::LSTOFFROUTE::pricelist');
	DLG1_DlgObj.setValueFrom('txtpoilat','list::LSTOFFROUTE::LAT') ;
	DLG1_DlgObj.setValueFrom('txtpoilong','list::LSTOFFROUTE::LONT') ;

//	DLG1_DlgObj.runAction('readbalance');

	setTimeout(makeVisit,150);

},400);}
},
{
	"html": "Visit History",
	"icon": "clock.png",
	"onClick": function(dn) {

setTimeout(function() { 
	DLG1_DlgObj.setValueFrom('poiid','list::LSTROUTES::poiid');
	DLG1_DlgObj.panelSetActive('PANELCARD_42');
	DLG1_DlgObj.runAction('open_visitHistory');
},300);}
},
{
	"html": "Direction",
	"icon": "arrows.png",
	"onClick": function(dn) {

//setTimeout(function() { 
	//DLG1_DlgObj.panelSetActive('PANELCARD_6');
	//DLG1_DlgObj.runAction('AddMarkerOr');
	//DLG1_DlgObj.runAction('getcurcoord');
//},300);


setTimeout(function(){
	const latitude = DLG1_DlgObj.getValue('list::LSTOFFROUTE::LAT') ; // Replace with desired latitude
	const longitude = DLG1_DlgObj.getValue('list::LSTOFFROUTE::LONT')
	openGoogleMaps(latitude, longitude);
	},300);}
},
{
	"html": "Skip Stop",
	"icon": "skip.png",
	"onClick": function(dn) {


setTimeout(function() { 
	DLG1_DlgObj.runAction('SkipStop');
},300);}
},
{
	"html": "Update POI Location",
	"icon": "rotate.png",
	"onClick": function(dn) {

mexclloc = DLG1_DlgObj.getValue('list::LSTOFFROUTE::hasexclloc');
if (mexclloc >= 1)  {
	alert('Already confirmed by the excellence team');
	return ;
};
	
mrep = DLG1_DlgObj.getValue('repid');
mlat = DLG1_DlgObj.getValue('list::LSTOFFROUTE::LAT');
mlng = DLG1_DlgObj.getValue('list::LSTOFFROUTE::LONT');
if (mlat !== 0 && mlat) {
    // mlat is not 0, null, or an empty string
    // Do something
    	if (mrep<900000)  {
			alert('Not allowed! location already registered');

		}
	else {
		setTimeout(function() { 
			DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTOFFROUTE::poiid');	
			DLG1_DlgObj.setValue('DEVLONG',mlng);
			DLG1_DlgObj.setValue('DEVLAT',mlat);
		
			DLG1_DlgObj.runAction('updatepoiloc_existing');
			},400);
		
		 }


} else {
    // mlat is 0, null, or an empty string
    // Do something else
	setTimeout(function() { 
		DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTOFFROUTE::poiid');	
		DLG1_DlgObj.runAction('updatepoiloc');
	},400);
}}
},
{
	"html": "Work Order (Messages)",
	"icon": "planning_16759800.png",
	"onClick": function(dn) {

setTimeout(function() { 
	
	DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTOFFROUTE::poiid');
	
	setTimeout(function(){
		DLG1_DlgObj.runAction('Open_Message2');
		DLG1_DlgObj.panelSetActive('PANELCARD_42');
	},750);
	
},400);}
},
{
	"html": "Deals",
	"icon": "deal.png",
	"onClick": function(dn) {

DLG1_DlgObj.panelSetActive('PANELCARD_48');}
},
{
	"html": "Phone Order",
	"icon": "phoneorder.png",
	"onClick": function(dn) {

DLG1_DlgObj.runAction('showwait1');
setTimeout(function() { 
	DLG1_DlgObj.setValue('phoneorder',1);
	DLG1_DlgObj.setValueFrom('poiname','list::LSTOFFROUTE::POINAME') ;
	DLG1_DlgObj.setValueFrom('poitype','list::LSTOFFROUTE::POI_TYPE');
	DLG1_DlgObj.setValueFrom('besttime','list::LSTOFFROUTE::BESTTIME');
	DLG1_DlgObj.setValueFrom('region','list::LSTOFFROUTE::REGION');
	DLG1_DlgObj.setValueFrom('comment','list::LSTOFFROUTE::COMMENT');
	DLG1_DlgObj.setValueFrom('phoneno','list::LSTOFFROUTE::PHONENO');
	DLG1_DlgObj.setValue('route',0);
	DLG1_DlgObj.setValueFrom('poiid','list::LSTOFFROUTE::poiid');
	DLG1_DlgObj.setValueFrom('tmppoiid','list::LSTOFFROUTE::poiid');
	DLG1_DlgObj.setValueFrom('pricelist','list::LSTOFFROUTE::pricelist');
	DLG1_DlgObj.setValueFrom('txtpoilat','list::LSTOFFROUTE::LAT') ;
	DLG1_DlgObj.setValueFrom('txtpoilong','list::LSTOFFROUTE::LONT') ;

//	DLG1_DlgObj.runAction('readbalance');

	setTimeout(makeVisit,150);

},400);}
}];

DLG1_DlgObj._controlBarData = {
	"CONTROLBAR_28": {
	},
	"CONTROLBAR_30": {
	},
	"CONTROLBAR_20": {
	},
	"CONTROLBAR_26": {
	},
	"CONTROLBAR_2": {
	},
	"CONTROLBAR_27_1": {
	},
	"CONTROLBAR_3": {
	},
	"CONTROLBAR_17": {
	},
	"CONTROLBAR_16": {
	},
	"CONTROLBAR_23": {
	},
	"CONTROLBAR_24": {
	},
	"CONTROLBAR_31": {
	},
	"CONTROLBAR_29": {
	}
}
;;
DLG1_DlgObj._controlBarExpandingMenuSettings = {
	"CONTROLBAR_28": {
	},
	"CONTROLBAR_30": {
	},
	"CONTROLBAR_20": {
	},
	"CONTROLBAR_26": {
	},
	"CONTROLBAR_2": {
	},
	"CONTROLBAR_27_1": {
	},
	"CONTROLBAR_3": {
	},
	"CONTROLBAR_17": {
	},
	"CONTROLBAR_16": {
	},
	"CONTROLBAR_23": {
	},
	"CONTROLBAR_24": {
	},
	"CONTROLBAR_31": {
	},
	"CONTROLBAR_29": {
	}
}
;DLG1_DlgObj.applyServerSideRules(4);
setTimeout(function() { },10);;
DLG1_DlgObj._activeLanguage = '';
</script>
<script>

</script><script>A5.__dtfmt = 'dd/MM/yyyy 0h:0m';A5.__tfmt = '';A5.d.date.format = 'dd/MM/yyyy 0h:0m';DLG1_DlgObj.setStateInfo({"ActivateComponentSecurity": false,"AllowRememberMe": false,"AlwaysRememberMe": false,"AuthenticationMethods": "Alpha","CacheLifetime": 300,"Emailfrom": "","Emailfrom_alias": "","EmailmandrillKey": "","EmailSparkPostKey": "","EmailProfile": "","EmailsendMethod": "Internal by profile","Emailsmtp_password": "","Emailsmtp_port": "","Emailsmtp_server": "","Emailsmtp_SSLOption": "","Emailsmtp_username": "","EmailuseDotNetLibrary": false,"EnforceAtComponentLevel": false,"IntegratedSecurityMode": 1,"LinkFieldDescription": "External User ID Value","LockoutAction": "Wait for period of time","LockoutActionMsg": "Try Again Later","LockoutActionPeriod": "0:0:0:0:30:0","LockoutAttempts": 0,"LockoutRedirectPage": "","LoginActivityLog": true,"LoginActivityLogFolder": "Project target folder","LoginActivityLogFolderAlias": "[PathAlias.ADB_Path]","LoginFailedLog": true,"LoginLogoutLog": true,"LoginActivityLogPasswordChange": true,"LoginLogUserFunction": "","LoginExpirationPolicy": "Expires when current session expires","LoginExpireDuration": "0:0:1:0:0:0","LoginIgnoreRedirect": true,"LoginLostAltErrorMessage": "","LoginLostAltSendMethod": "Show on screen","LoginLostRecoverySendTogether": false,"LoginLostRequestEmail": {"body": "","complete": false,"sendto": "","subject": ""},"LoginLostSendEmail": {"body": "","complete": false,"sendto": "","subject": ""},"LoginLostSendMethod": "Show on Screen","LoginLostSendPasswordEmail": {"body": "","complete": false,"sendto": "","subject": ""},"LoginLostSendUserEmail": {"body": "","complete": false,"sendto": "","subject": ""},"LoginRedirectAction": "Same page for all logins","LoginRedirectPage": "index.a5w","LoginRequiredRedirectPage": "index.a5w","LoginRestrictedRedirectPage": "accessdenied.a5w","NoCacheLoginReqRequest": true,"oAuthNewUserComponent": "","Password": {"fieldtype": "password","HasValidationRules": true,"validationRules": "<fieldtype=\"password\">\r\n<text_format<lLetters=.T.>\r\n<lDigits=.T.>\r\n<lWhitespace=.F.>\r\n<lOther=.F.>\r\n<lCase=.T.>\r\n<lSpecial=.T.>\r\n<Special=\"~@#$%^&:*\">\r\n<regex=\"\">\r\n<use_simple_mask=.F.>\r\n<simple_mask=\"\">\r\n<place_holder=\"_\">\r\n<error_msg=\"\">\r\n>\r\n<general<EnableRules=.T.>\r\n<require_value=.T.>\r\n<error_msg=\"\">\r\n>\r\n<data_length<lRequired=.T.>\r\n<min_length=4>\r\n<max_length=20>\r\n<error_msg=\"\">\r\n>\r\n<data_value<expression_type=\"None\">\r\n<expression=\"\">\r\n<error_msg=\"\">\r\n>\r\n<data_type=\"character\">\r\n<PasswordReset=.F.>\r\n"},"PasswordChangeAllow": true,"PasswordConfirmNoMatch": "Confirm Password","PasswordEncrypt": false,"PasswordEncryptionKey": "","PasswordEncryptLegacy": false,"PasswordExpireDuration": "1:0:0:0:0:0","PasswordExpires": false,"PasswordExpiresChange": false,"PasswordRecoveryAllow": false,"passwordRecoveryData": "","PasswordRecoveryOption": "Not Allowed","PasswordRequired": true,"PasswordResetAllow": false,"PasswordReuseRestrictMessage": "Invalid Password","PasswordReuseRestrictNumber": 0,"RecoveryEmailInvalid": "Not a valid E-mail address","SecurityActive": true,"ShowLinkField": false,"Ulinkvarname": "","UserFile": {"DataMissing": "Required Data Missing"},"Userid": {"fieldtype": "userid","HasValidationRules": true,"validationRules": "<fieldtype=\"userid\">\r\n<text_format<lLetters=.T.>\r\n<lDigits=.T.>\r\n<lWhitespace=.T.>\r\n<lOther=.F.>\r\n<lCase=.F.>\r\n<lSpecial=.F.>\r\n<regex=\"\">\r\n<use_simple_mask=.F.>\r\n<simple_mask=\"\">\r\n<place_holder=\"_\">\r\n<error_msg=\"\">\r\n>\r\n<general<EnableRules=.T.>\r\n<require_value=.T.>\r\n<error_msg=\"\">\r\n>\r\n<data_length<lRequired=.T.>\r\n<min_length=4>\r\n<max_length=0>\r\n<error_msg=\"\">\r\n>\r\n<data_value<expression_type=\"None\">\r\n<expression=\"\">\r\n<error_msg=\"\">\r\n>\r\n<data_type=\"character\">\r\n<PasswordReset=.F.>\r\n"},"UserIdDataType": "Value","UserIdErrorMsg": "Not a valid E-mail address","UserIdNotUniqueMsg": "User ID must be unique","UserRecoveryAllow": false,"UserRecoveryData": "","UserRecoveryDataReq": "On Line","DataType": "SQL Database","UseDataLink": true,"useSecurityFromAnotherProject": false,"useSecurityFromProjectName": "","UseActiveDirectory": false,"adEnabled": false,"adName": "","adConnectionString": "","adUserid": "","adPassword": "","oAuthAddnewUser": false,"UseoAuth": false,"oAuthLinkToUser": false,"oAuthAfterLoginEvent": "","DefaultSecurityGroups": "","EnableFederatedAuth": false,"FederatedLoginPage": "","FederatedAuthErrorPage": "","FederatedAuthXhrTimeoutPage": "","FederatedAuthXhrReauthPage": "","FederatedAuthXhrReauthCompletePage": "","FederatedAuthLogoutPage": "","FederatedLoginCompletePage": "","UserFileDataMissing": "Required Data Missing","UserIdentFieldMissing": "User Identifier field missing","SecurityType": "Built in","SQLSelectProject": false,"fixupGroups": false,"__originalDataType": "SQL Database","__edition": "","__dtfmt": "dd/MM/yyyy 0h:0m","__tfmt2": ""});
A5.__flagWorkingPreview = false;
A5.__flagIIS = false;
A5.__flagSimulateIIS = true;
</script>
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw.js',{scope: './'})
        .then(function() {
         console.log('** Alpha PWA service worker registered');
    	});
    } else {
        console.log('** serviceWorker object not available.');
    }
</script>

</body>
</html>